{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/canvas/common/lib/autocomplete.js","dependencies":[{"path":"x-pack/legacy/plugins/canvas/common/lib/autocomplete.js","mtime":1585205043550},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5nZXRGbkFyZ0RlZkF0UG9zaXRpb24gPSBnZXRGbkFyZ0RlZkF0UG9zaXRpb247CmV4cG9ydHMuZ2V0QXV0b2NvbXBsZXRlU3VnZ2VzdGlvbnMgPSBnZXRBdXRvY29tcGxldGVTdWdnZXN0aW9uczsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2NvbW1vbiA9IHJlcXVpcmUoIkBrYm4vaW50ZXJwcmV0ZXIvY29tbW9uIik7Ci8qCiAqIENvcHlyaWdodCBFbGFzdGljc2VhcmNoIEIuVi4gYW5kL29yIGxpY2Vuc2VkIHRvIEVsYXN0aWNzZWFyY2ggQi5WLiB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuIExpY2Vuc2VkIHVuZGVyIHRoZSBFbGFzdGljIExpY2Vuc2U7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgRWxhc3RpYyBMaWNlbnNlLgogKi8KLy8gQHRzLWlnbm9yZSBVbnR5cGVkIExpYnJhcnkKCgp2YXIgTUFSS0VSID0gJ0NBTlZBU19TVUdHRVNUSU9OX01BUktFUic7IC8vIFR5cGVndWFyZCBmb3IgY2hlY2tpbmcgaWYgRXhwcmVzc2lvbkFyZyBpcyBhIG5ldyBleHByZXNzaW9uCgpmdW5jdGlvbiBpc0V4cHJlc3Npb24obWF5YmVFeHByZXNzaW9uKSB7CiAgcmV0dXJuIF90eXBlb2YobWF5YmVFeHByZXNzaW9uLm5vZGUpID09PSAnb2JqZWN0JzsKfSAvLyBPdmVybG9hZHMgdG8gY2hhbmdlIHJldHVybiB0eXBlIGJhc2VkIG9uIHNwZWNzCgoKZnVuY3Rpb24gZ2V0QnlBbGlhcyhzcGVjcywgbmFtZSkgewogIHJldHVybiAoMCwgX2NvbW1vbi5nZXRCeUFsaWFzKShzcGVjcywgbmFtZSk7Cn0KLyoqCiAqIEdlbmVyYXRlcyB0aGUgQVNUIHdpdGggdGhlIGdpdmVuIGV4cHJlc3Npb24gYW5kIHRoZW4gcmV0dXJucyB0aGUgZnVuY3Rpb24gYW5kIGFyZ3VtZW50IGRlZmluaXRpb25zCiAqIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiBpbiB0aGUgZXhwcmVzc2lvbiwgaWYgdGhlcmUgYXJlIGFueS4KICovCgoKZnVuY3Rpb24gZ2V0Rm5BcmdEZWZBdFBvc2l0aW9uKHNwZWNzLCBleHByZXNzaW9uLCBwb3NpdGlvbikgewogIHRyeSB7CiAgICB2YXIgYXN0ID0gKDAsIF9jb21tb24ucGFyc2UpKGV4cHJlc3Npb24sIHsKICAgICAgYWRkTWV0YTogdHJ1ZQogICAgfSk7CgogICAgdmFyIF9nZXRGbkFyZ0F0UG9zaXRpb24gPSBnZXRGbkFyZ0F0UG9zaXRpb24oYXN0LCBwb3NpdGlvbiksCiAgICAgICAgbmV3QXN0ID0gX2dldEZuQXJnQXRQb3NpdGlvbi5hc3QsCiAgICAgICAgZm5JbmRleCA9IF9nZXRGbkFyZ0F0UG9zaXRpb24uZm5JbmRleCwKICAgICAgICBhcmdOYW1lID0gX2dldEZuQXJnQXRQb3NpdGlvbi5hcmdOYW1lLAogICAgICAgIGFyZ1N0YXJ0ID0gX2dldEZuQXJnQXRQb3NpdGlvbi5hcmdTdGFydCwKICAgICAgICBhcmdFbmQgPSBfZ2V0Rm5BcmdBdFBvc2l0aW9uLmFyZ0VuZDsKCiAgICB2YXIgZm4gPSBuZXdBc3Qubm9kZS5jaGFpbltmbkluZGV4XS5ub2RlOwogICAgdmFyIGZuRGVmID0gZ2V0QnlBbGlhcyhzcGVjcywgZm4uZnVuY3Rpb24pOwoKICAgIGlmIChmbkRlZiAmJiBhcmdOYW1lKSB7CiAgICAgIHZhciBhcmdEZWYgPSBnZXRCeUFsaWFzKGZuRGVmLmFyZ3MsIGFyZ05hbWUpOwogICAgICByZXR1cm4gewogICAgICAgIGZuRGVmOiBmbkRlZiwKICAgICAgICBhcmdEZWY6IGFyZ0RlZiwKICAgICAgICBhcmdTdGFydDogYXJnU3RhcnQsCiAgICAgICAgYXJnRW5kOiBhcmdFbmQKICAgICAgfTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBmbkRlZjogZm5EZWYKICAgIH07CiAgfSBjYXRjaCAoZSkgey8vIEZhaWwgc2lsZW50bHkKICB9CgogIHJldHVybiB7fTsKfQovKioKICogR2V0cyBhIGxpc3Qgb2Ygc3VnZ2VzdGlvbnMgZm9yIHRoZSBnaXZlbiBleHByZXNzaW9uIGF0IHRoZSBnaXZlbiBwb3NpdGlvbi4gSXQgZG9lcyB0aGlzIGJ5CiAqIGluc2VydGluZyBhIG1hcmtlciBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24sIHRoZW4gcGFyc2luZyB0aGUgcmVzdWx0aW5nIGV4cHJlc3Npb24uIFRoaXMgd2F5IHdlIGNhbgogKiBzZWUgd2hhdCB0aGUgbWFya2VyIHdvdWxkIHR1cm4gaW50bywgd2hpY2ggdGVsbHMgdXMgd2hhdCBzb3J0cyBvZiB0aGluZ3MgdG8gc3VnZ2VzdC4gRm9yCiAqIGV4YW1wbGUsIGlmIHRoZSBtYXJrZXIgdHVybnMgaW50byBhIGZ1bmN0aW9uIG5hbWUsIHRoZW4gd2Ugc3VnZ2VzdCBmdW5jdGlvbnMuIElmIGl0IHR1cm5zIGludG8KICogYW4gdW5uYW1lZCBhcmd1bWVudCwgd2Ugc3VnZ2VzdCBhcmd1bWVudCBuYW1lcy4gSWYgaXQgdHVybnMgaW50byBhIHZhbHVlLCB3ZSBzdWdnZXN0IHZhbHVlcy4KICovCgoKZnVuY3Rpb24gZ2V0QXV0b2NvbXBsZXRlU3VnZ2VzdGlvbnMoc3BlY3MsIGV4cHJlc3Npb24sIHBvc2l0aW9uKSB7CiAgdmFyIHRleHQgPSBleHByZXNzaW9uLnN1YnN0cigwLCBwb3NpdGlvbikgKyBNQVJLRVIgKyBleHByZXNzaW9uLnN1YnN0cihwb3NpdGlvbik7CgogIHRyeSB7CiAgICB2YXIgYXN0ID0gKDAsIF9jb21tb24ucGFyc2UpKHRleHQsIHsKICAgICAgYWRkTWV0YTogdHJ1ZQogICAgfSk7CgogICAgdmFyIF9nZXRGbkFyZ0F0UG9zaXRpb24yID0gZ2V0Rm5BcmdBdFBvc2l0aW9uKGFzdCwgcG9zaXRpb24pLAogICAgICAgIG5ld0FzdCA9IF9nZXRGbkFyZ0F0UG9zaXRpb24yLmFzdCwKICAgICAgICBmbkluZGV4ID0gX2dldEZuQXJnQXRQb3NpdGlvbjIuZm5JbmRleCwKICAgICAgICBhcmdOYW1lID0gX2dldEZuQXJnQXRQb3NpdGlvbjIuYXJnTmFtZSwKICAgICAgICBhcmdJbmRleCA9IF9nZXRGbkFyZ0F0UG9zaXRpb24yLmFyZ0luZGV4OwoKICAgIHZhciBmbiA9IG5ld0FzdC5ub2RlLmNoYWluW2ZuSW5kZXhdLm5vZGU7CgogICAgaWYgKGZuLmZ1bmN0aW9uLmluY2x1ZGVzKE1BUktFUikpIHsKICAgICAgcmV0dXJuIGdldEZuTmFtZVN1Z2dlc3Rpb25zKHNwZWNzLCBuZXdBc3QsIGZuSW5kZXgpOwogICAgfQoKICAgIGlmIChhcmdOYW1lID09PSAnXycgJiYgYXJnSW5kZXggIT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gZ2V0QXJnTmFtZVN1Z2dlc3Rpb25zKHNwZWNzLCBuZXdBc3QsIGZuSW5kZXgsIGFyZ05hbWUsIGFyZ0luZGV4KTsKICAgIH0KCiAgICBpZiAoYXJnTmFtZSAmJiBhcmdJbmRleCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiBnZXRBcmdWYWx1ZVN1Z2dlc3Rpb25zKHNwZWNzLCBuZXdBc3QsIGZuSW5kZXgsIGFyZ05hbWUsIGFyZ0luZGV4KTsKICAgIH0KICB9IGNhdGNoIChlKSB7Ly8gRmFpbCBzaWxlbnRseQogIH0KCiAgcmV0dXJuIFtdOwp9Ci8qKgogICAgRWFjaCBlbnRyeSBvZiB0aGUgbm9kZS5jaGFpbiBoYXMgaXQncyBvdmVyYWxsIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb24uICBGb3IgaW5zdGFuY2UsCiAgICBnaXZlbiB0aGUgZXhwcmVzc2lvbiAibGluayBhcmc9J3NvbWV0aGluZycgfCByZW5kZXIiIHRoZSBsaW5rIGZ1bmN0aW9ucyBzdGFydCBwb3NpdGlvbiBpcyAwIGFuZCBlbmQKICAgIHBvc2l0aW9uIGlzIDIxLgoKICAgIFRoaXMgZnVuY3Rpb24gaXMgZ2l2ZW4gdGhlIGZ1bGwgYXN0IGFuZCB0aGUgY3VycmVudCBjdXJzb3IgcG9zaXRpb24gaW4gdGhlIGV4cHJlc3Npb24gc3RyaW5nLgoKICAgIEl0IHJldHVybnMgd2hpY2ggZnVuY3Rpb24gdGhlIGN1cnNvciBpcyBpbiwgYXMgd2VsbCBhcyB3aGljaCBhcmd1bWVudCBmb3IgdGhhdCBmdW5jdGlvbiB0aGUgY3Vyc29yIGlzIGluCiAgICBpZiBhbnkuCiovCgoKZnVuY3Rpb24gZ2V0Rm5BcmdBdFBvc2l0aW9uKGFzdCwgcG9zaXRpb24pIHsKICB2YXIgZm5JbmRleCA9IGFzdC5ub2RlLmNoYWluLmZpbmRJbmRleChmdW5jdGlvbiAoZm4pIHsKICAgIHJldHVybiBmbi5zdGFydCA8PSBwb3NpdGlvbiAmJiBwb3NpdGlvbiA8PSBmbi5lbmQ7CiAgfSk7CiAgdmFyIGZuID0gYXN0Lm5vZGUuY2hhaW5bZm5JbmRleF07CgogIGZvciAodmFyIF9pID0gMCwgX09iamVjdCRlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZm4ubm9kZS5hcmd1bWVudHMpOyBfaSA8IF9PYmplY3QkZW50cmllcy5sZW5ndGg7IF9pKyspIHsKICAgIHZhciBfT2JqZWN0JGVudHJpZXMkX2kgPSBfc2xpY2VkVG9BcnJheShfT2JqZWN0JGVudHJpZXNbX2ldLCAyKSwKICAgICAgICBhcmdOYW1lID0gX09iamVjdCRlbnRyaWVzJF9pWzBdLAogICAgICAgIGFyZ1ZhbHVlcyA9IF9PYmplY3QkZW50cmllcyRfaVsxXTsKCiAgICBmb3IgKHZhciBhcmdJbmRleCA9IDA7IGFyZ0luZGV4IDwgYXJnVmFsdWVzLmxlbmd0aDsgYXJnSW5kZXgrKykgewogICAgICB2YXIgdmFsdWUgPSBhcmdWYWx1ZXNbYXJnSW5kZXhdOwogICAgICB2YXIgYXJnU3RhcnQgPSB2YWx1ZS5zdGFydDsKICAgICAgdmFyIGFyZ0VuZCA9IHZhbHVlLmVuZDsKCiAgICAgIGlmIChhcmdOYW1lICE9PSAnXycpIHsKICAgICAgICAvLyBJZiBhbiBhcmcgbmFtZSBpcyBzcGVjaWZpZWQsIGV4cGFuZCBvdXIgc3RhcnQgcG9zaXRpb24gdG8gaW5jbHVkZQogICAgICAgIC8vIHRoZSBhcmcgbmFtZSBwbHVzIHRoZSBgPWAgY2hhcmFjdGVyCiAgICAgICAgYXJnU3RhcnQgPSBhcmdTdGFydCAtIChhcmdOYW1lLmxlbmd0aCArIDEpOyAvLyBJZiB0aGUgYXJnIHZhbHVlIGlzIGFuIGV4cHJlc3Npb24sIGV4cGFuZCBvdXIgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbgogICAgICAgIC8vIHRvIGluY2x1ZGUgdGhlIG9wZW5pbmcgYW5kIGNsb3NpbmcgYnJhY2VzCgogICAgICAgIGlmICh2YWx1ZS5ub2RlICE9PSBudWxsICYmIGlzRXhwcmVzc2lvbih2YWx1ZSkpIHsKICAgICAgICAgIGFyZ1N0YXJ0LS07CiAgICAgICAgICBhcmdFbmQrKzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChhcmdTdGFydCA8PSBwb3NpdGlvbiAmJiBwb3NpdGlvbiA8PSBhcmdFbmQpIHsKICAgICAgICAvLyBJZiB0aGUgY3VycmVudCBwb3NpdGlvbiBpcyBvbiBhbiBleHByZXNzaW9uIGFuZCBOT1Qgb24gdGhlIGV4cHJlc3Npb24ncwogICAgICAgIC8vIGFyZ3VtZW50IG5hbWUgKGBmb250PWAgZm9yIGV4YW1wbGUpLCByZWN1cnNlIHdpdGhpbiB0aGUgZXhwcmVzc2lvbgogICAgICAgIGlmICh2YWx1ZS5ub2RlICE9PSBudWxsICYmIGlzRXhwcmVzc2lvbih2YWx1ZSkgJiYgKGFyZ05hbWUgPT09ICdfJyB8fCAhKGFyZ1N0YXJ0IDw9IHBvc2l0aW9uICYmIHBvc2l0aW9uIDw9IGFyZ1N0YXJ0ICsgYXJnTmFtZS5sZW5ndGggKyAxKSkpIHsKICAgICAgICAgIHJldHVybiBnZXRGbkFyZ0F0UG9zaXRpb24odmFsdWUsIHBvc2l0aW9uKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBhc3Q6IGFzdCwKICAgICAgICAgIGZuSW5kZXg6IGZuSW5kZXgsCiAgICAgICAgICBhcmdOYW1lOiBhcmdOYW1lLAogICAgICAgICAgYXJnSW5kZXg6IGFyZ0luZGV4LAogICAgICAgICAgYXJnU3RhcnQ6IGFyZ1N0YXJ0LAogICAgICAgICAgYXJnRW5kOiBhcmdFbmQKICAgICAgICB9OwogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gewogICAgYXN0OiBhc3QsCiAgICBmbkluZGV4OiBmbkluZGV4CiAgfTsKfQoKZnVuY3Rpb24gZ2V0Rm5OYW1lU3VnZ2VzdGlvbnMoc3BlY3MsIGFzdCwgZm5JbmRleCkgewogIC8vIEZpbHRlciB0aGUgbGlzdCBvZiBmdW5jdGlvbnMgYnkgdGhlIHRleHQgYXQgdGhlIG1hcmtlcgogIHZhciBfYXN0JG5vZGUkY2hhaW4kZm5JbmQgPSBhc3Qubm9kZS5jaGFpbltmbkluZGV4XSwKICAgICAgc3RhcnQgPSBfYXN0JG5vZGUkY2hhaW4kZm5JbmQuc3RhcnQsCiAgICAgIGVuZCA9IF9hc3Qkbm9kZSRjaGFpbiRmbkluZC5lbmQsCiAgICAgIGZuID0gX2FzdCRub2RlJGNoYWluJGZuSW5kLm5vZGU7CiAgdmFyIHF1ZXJ5ID0gZm4uZnVuY3Rpb24ucmVwbGFjZShNQVJLRVIsICcnKTsKICB2YXIgbWF0Y2hpbmdGbkRlZnMgPSBzcGVjcy5maWx0ZXIoZnVuY3Rpb24gKF9yZWYpIHsKICAgIHZhciBuYW1lID0gX3JlZi5uYW1lOwogICAgcmV0dXJuIHRleHRNYXRjaGVzKG5hbWUsIHF1ZXJ5KTsKICB9KTsgLy8gU29ydCBieSB3aGV0aGVyIG9yIG5vdCB0aGUgZnVuY3Rpb24gZXhwZWN0cyB0aGUgcHJldmlvdXMgZnVuY3Rpb24ncyByZXR1cm4gdHlwZSwgdGhlbiBieQogIC8vIHdoZXRoZXIgb3Igbm90IHRoZSBmdW5jdGlvbiBuYW1lIHN0YXJ0cyB3aXRoIHRoZSB0ZXh0IGF0IHRoZSBtYXJrZXIsIHRoZW4gYWxwaGFiZXRpY2FsbHkKCiAgdmFyIHByZXZGbiA9IGFzdC5ub2RlLmNoYWluW2ZuSW5kZXggLSAxXTsKICB2YXIgcHJldkZuRGVmID0gcHJldkZuICYmIGdldEJ5QWxpYXMoc3BlY3MsIHByZXZGbi5ub2RlLmZ1bmN0aW9uKTsKICB2YXIgcHJldkZuVHlwZSA9IHByZXZGbkRlZiAmJiBwcmV2Rm5EZWYudHlwZTsKICB2YXIgY29tcGFyYXRvciA9IGNvbWJpbmVkQ29tcGFyYXRvcihwcmV2Rm5UeXBlQ29tcGFyYXRvcihwcmV2Rm5UeXBlKSwgaW52b2tlV2l0aFByb3Aoc3RhcnRzV2l0aENvbXBhcmF0b3IocXVlcnkpLCAnbmFtZScpLCBpbnZva2VXaXRoUHJvcChhbHBoYW51bWVyaWNhbENvbXBhcmF0b3IsICduYW1lJykpOwogIHZhciBmbkRlZnMgPSBtYXRjaGluZ0ZuRGVmcy5zb3J0KGNvbXBhcmF0b3IpOwogIHJldHVybiBmbkRlZnMubWFwKGZ1bmN0aW9uIChmbkRlZikgewogICAgcmV0dXJuIHsKICAgICAgdHlwZTogJ2Z1bmN0aW9uJywKICAgICAgdGV4dDogZm5EZWYubmFtZSArICcgJywKICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICBlbmQ6IGVuZCAtIE1BUktFUi5sZW5ndGgsCiAgICAgIGZuRGVmOiBmbkRlZgogICAgfTsKICB9KTsKfQoKZnVuY3Rpb24gZ2V0QXJnTmFtZVN1Z2dlc3Rpb25zKHNwZWNzLCBhc3QsIGZuSW5kZXgsIGFyZ05hbWUsIGFyZ0luZGV4KSB7CiAgLy8gR2V0IHRoZSBsaXN0IG9mIGFyZ3MgZnJvbSB0aGUgZnVuY3Rpb24gZGVmaW5pdGlvbgogIHZhciBmbiA9IGFzdC5ub2RlLmNoYWluW2ZuSW5kZXhdLm5vZGU7CiAgdmFyIGZuRGVmID0gZ2V0QnlBbGlhcyhzcGVjcywgZm4uZnVuY3Rpb24pOwoKICBpZiAoIWZuRGVmKSB7CiAgICByZXR1cm4gW107CiAgfSAvLyBXZSB1c2UgdGhlIGV4YWN0IHRleHQgaW5zdGVhZCBvZiB0aGUgdmFsdWUgYmVjYXVzZSBpdCBpcyBhbHdheXMgYSBzdHJpbmcgYW5kIG1pZ2h0IGJlIHF1b3RlZAoKCiAgdmFyIF9mbiRhcmd1bWVudHMkYXJnTmFtZSA9IGZuLmFyZ3VtZW50c1thcmdOYW1lXVthcmdJbmRleF0sCiAgICAgIHRleHQgPSBfZm4kYXJndW1lbnRzJGFyZ05hbWUudGV4dCwKICAgICAgc3RhcnQgPSBfZm4kYXJndW1lbnRzJGFyZ05hbWUuc3RhcnQsCiAgICAgIGVuZCA9IF9mbiRhcmd1bWVudHMkYXJnTmFtZS5lbmQ7IC8vIEZpbHRlciB0aGUgbGlzdCBvZiBhcmdzIGJ5IHRoZSB0ZXh0IGF0IHRoZSBtYXJrZXIKCiAgdmFyIHF1ZXJ5ID0gdGV4dC5yZXBsYWNlKE1BUktFUiwgJycpOwogIHZhciBtYXRjaGluZ0FyZ0RlZnMgPSBPYmplY3QuZW50cmllcyhmbkRlZi5hcmdzKS5maWx0ZXIoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICB2YXIgX3JlZjMgPSBfc2xpY2VkVG9BcnJheShfcmVmMiwgMSksCiAgICAgICAgbmFtZSA9IF9yZWYzWzBdOwoKICAgIHJldHVybiB0ZXh0TWF0Y2hlcyhuYW1lLCBxdWVyeSk7CiAgfSk7IC8vIEZpbHRlciB0aGUgbGlzdCBvZiBhcmdzIGJ5IHRob3NlIHdoaWNoIGFyZW4ndCBhbHJlYWR5IHByZXNlbnQgKHVubGVzcyB0aGV5IGFsbG93IG11bHRpKQoKICB2YXIgYXJnRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGZuLmFyZ3VtZW50cykubWFwKGZ1bmN0aW9uIChfcmVmNCkgewogICAgdmFyIF9yZWY1ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjQsIDIpLAogICAgICAgIG5hbWUgPSBfcmVmNVswXSwKICAgICAgICB2YWx1ZXMgPSBfcmVmNVsxXTsKCiAgICByZXR1cm4gW25hbWUsIHZhbHVlcy5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHJldHVybiAhdmFsdWUudGV4dC5pbmNsdWRlcyhNQVJLRVIpOwogICAgfSldOwogIH0pOwogIHZhciB1bnVzZWRBcmdEZWZzID0gbWF0Y2hpbmdBcmdEZWZzLmZpbHRlcihmdW5jdGlvbiAoX3JlZjYpIHsKICAgIHZhciBfcmVmNyA9IF9zbGljZWRUb0FycmF5KF9yZWY2LCAyKSwKICAgICAgICBtYXRjaGluZ0FyZ05hbWUgPSBfcmVmN1swXSwKICAgICAgICBtYXRjaGluZ0FyZ0RlZiA9IF9yZWY3WzFdOwoKICAgIGlmIChtYXRjaGluZ0FyZ0RlZi5tdWx0aSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICByZXR1cm4gIWFyZ0VudHJpZXMuc29tZShmdW5jdGlvbiAoX3JlZjgpIHsKICAgICAgdmFyIF9yZWY5ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjgsIDIpLAogICAgICAgICAgbmFtZSA9IF9yZWY5WzBdLAogICAgICAgICAgdmFsdWVzID0gX3JlZjlbMV07CgogICAgICByZXR1cm4gdmFsdWVzLmxlbmd0aCA+IDAgJiYgKG5hbWUgPT09IG1hdGNoaW5nQXJnTmFtZSB8fCAobWF0Y2hpbmdBcmdEZWYuYWxpYXNlcyB8fCBbXSkuaW5jbHVkZXMobmFtZSkpOwogICAgfSk7CiAgfSk7IC8vIFNvcnQgYnkgd2hldGhlciBvciBub3QgdGhlIGFyZyBpcyBhbHNvIHRoZSB1bm5hbWVkLCB0aGVuIGJ5IHdoZXRoZXIgb3Igbm90IHRoZSBhcmcgbmFtZSBzdGFydHMKICAvLyB3aXRoIHRoZSB0ZXh0IGF0IHRoZSBtYXJrZXIsIHRoZW4gYWxwaGFiZXRpY2FsbHkKCiAgdmFyIGNvbXBhcmF0b3IgPSBjb21iaW5lZENvbXBhcmF0b3IodW5uYW1lZEFyZ0NvbXBhcmF0b3IsIGludm9rZVdpdGhQcm9wKHN0YXJ0c1dpdGhDb21wYXJhdG9yKHF1ZXJ5KSwgJ25hbWUnKSwgaW52b2tlV2l0aFByb3AoYWxwaGFudW1lcmljYWxDb21wYXJhdG9yLCAnbmFtZScpKTsKICB2YXIgYXJnRGVmcyA9IHVudXNlZEFyZ0RlZnMubWFwKGZ1bmN0aW9uIChfcmVmMTApIHsKICAgIHZhciBfcmVmMTEgPSBfc2xpY2VkVG9BcnJheShfcmVmMTAsIDIpLAogICAgICAgIG5hbWUgPSBfcmVmMTFbMF0sCiAgICAgICAgYXJnID0gX3JlZjExWzFdOwoKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHsKICAgICAgbmFtZTogbmFtZQogICAgfSwgYXJnKTsKICB9KS5zb3J0KGNvbXBhcmF0b3IpOwogIHJldHVybiBhcmdEZWZzLm1hcChmdW5jdGlvbiAoYXJnRGVmKSB7CiAgICByZXR1cm4gewogICAgICB0eXBlOiAnYXJndW1lbnQnLAogICAgICB0ZXh0OiBhcmdEZWYubmFtZSArICc9JywKICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICBlbmQ6IGVuZCAtIE1BUktFUi5sZW5ndGgsCiAgICAgIGFyZ0RlZjogYXJnRGVmCiAgICB9OwogIH0pOwp9CgpmdW5jdGlvbiBnZXRBcmdWYWx1ZVN1Z2dlc3Rpb25zKHNwZWNzLCBhc3QsIGZuSW5kZXgsIGFyZ05hbWUsIGFyZ0luZGV4KSB7CiAgLy8gR2V0IHRoZSBsaXN0IG9mIHZhbHVlcyBmcm9tIHRoZSBhcmd1bWVudCBkZWZpbml0aW9uCiAgdmFyIGZuID0gYXN0Lm5vZGUuY2hhaW5bZm5JbmRleF0ubm9kZTsKICB2YXIgZm5EZWYgPSBnZXRCeUFsaWFzKHNwZWNzLCBmbi5mdW5jdGlvbik7CgogIGlmICghZm5EZWYpIHsKICAgIHJldHVybiBbXTsKICB9CgogIHZhciBhcmdEZWYgPSBnZXRCeUFsaWFzKGZuRGVmLmFyZ3MsIGFyZ05hbWUpOwoKICBpZiAoIWFyZ0RlZikgewogICAgcmV0dXJuIFtdOwogIH0gLy8gR2V0IHN1Z2dlc3Rpb25zIGZyb20gdGhlIGFyZ3VtZW50IGRlZmluaXRpb24sIGluY2x1ZGluZyB0aGUgZGVmYXVsdAoKCiAgdmFyIF9mbiRhcmd1bWVudHMkYXJnTmFtZTIgPSBmbi5hcmd1bWVudHNbYXJnTmFtZV1bYXJnSW5kZXhdLAogICAgICBzdGFydCA9IF9mbiRhcmd1bWVudHMkYXJnTmFtZTIuc3RhcnQsCiAgICAgIGVuZCA9IF9mbiRhcmd1bWVudHMkYXJnTmFtZTIuZW5kLAogICAgICBub2RlID0gX2ZuJGFyZ3VtZW50cyRhcmdOYW1lMi5ub2RlOwoKICBpZiAodHlwZW9mIG5vZGUgIT09ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gW107CiAgfQoKICB2YXIgcXVlcnkgPSBub2RlLnJlcGxhY2UoTUFSS0VSLCAnJyk7CiAgdmFyIGFyZ09wdGlvbnMgPSBhcmdEZWYub3B0aW9ucyA/IGFyZ0RlZi5vcHRpb25zIDogW107CgogIHZhciBzdWdnZXN0aW9ucyA9IF90b0NvbnN1bWFibGVBcnJheShhcmdPcHRpb25zKTsKCiAgaWYgKGFyZ0RlZi5kZWZhdWx0ICE9PSB1bmRlZmluZWQpIHsKICAgIHN1Z2dlc3Rpb25zLnB1c2goYXJnRGVmLmRlZmF1bHQpOwogIH0KCiAgc3VnZ2VzdGlvbnMgPSAoMCwgX2xvZGFzaC51bmlxKShzdWdnZXN0aW9ucyk7IC8vIEZpbHRlciB0aGUgbGlzdCBvZiBzdWdnZXN0aW9ucyBieSB0aGUgdGV4dCBhdCB0aGUgbWFya2VyCgogIHZhciBmaWx0ZXJlZCA9IHN1Z2dlc3Rpb25zLmZpbHRlcihmdW5jdGlvbiAob3B0aW9uKSB7CiAgICByZXR1cm4gdGV4dE1hdGNoZXMoU3RyaW5nKG9wdGlvbiksIHF1ZXJ5KTsKICB9KTsgLy8gU29ydCBieSB3aGV0aGVyIG9yIG5vdCB0aGUgdmFsdWUgc3RhcnRzIHdpdGggdGhlIHRleHQgYXQgdGhlIG1hcmtlciwgdGhlbiBhbHBoYWJldGljYWxseQoKICB2YXIgY29tcGFyYXRvciA9IGNvbWJpbmVkQ29tcGFyYXRvcihzdGFydHNXaXRoQ29tcGFyYXRvcihxdWVyeSksIGFscGhhbnVtZXJpY2FsQ29tcGFyYXRvcik7CiAgdmFyIHNvcnRlZCA9IGZpbHRlcmVkLnNvcnQoY29tcGFyYXRvcik7CiAgcmV0dXJuIHNvcnRlZC5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICB2YXIgdGV4dCA9IG1heWJlUXVvdGUodmFsdWUpICsgJyAnOwogICAgcmV0dXJuIHsKICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICBlbmQ6IGVuZCAtIE1BUktFUi5sZW5ndGgsCiAgICAgIHR5cGU6ICd2YWx1ZScsCiAgICAgIHRleHQ6IHRleHQKICAgIH07CiAgfSk7Cn0KCmZ1bmN0aW9uIHRleHRNYXRjaGVzKHRleHQsIHF1ZXJ5KSB7CiAgcmV0dXJuIHRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpLnRyaW0oKSk7Cn0KCmZ1bmN0aW9uIG1heWJlUXVvdGUodmFsdWUpIHsKICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgaWYgKHZhbHVlLm1hdGNoKC9eXHsuKlx9JC8pKSB7CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KCiAgICByZXR1cm4gIlwiIi5jb25jYXQodmFsdWUucmVwbGFjZSgvIi9nLCAnXFwiJyksICJcIiIpOwogIH0KCiAgcmV0dXJuIHZhbHVlOwp9CgpmdW5jdGlvbiBwcmV2Rm5UeXBlQ29tcGFyYXRvcihwcmV2Rm5UeXBlKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gKGIuY29udGV4dCAmJiBiLmNvbnRleHQudHlwZXMgJiYgYi5jb250ZXh0LnR5cGVzLmluY2x1ZGVzKHByZXZGblR5cGUpID8gMSA6IDApIC0gKGEuY29udGV4dCAmJiBhLmNvbnRleHQudHlwZXMgJiYgYS5jb250ZXh0LnR5cGVzLmluY2x1ZGVzKHByZXZGblR5cGUpID8gMSA6IDApOwogIH07Cn0KCmZ1bmN0aW9uIHVubmFtZWRBcmdDb21wYXJhdG9yKGEsIGIpIHsKICByZXR1cm4gKGIuYWxpYXNlcyAmJiBiLmFsaWFzZXMuaW5jbHVkZXMoJ18nKSA/IDEgOiAwKSAtIChhLmFsaWFzZXMgJiYgYS5hbGlhc2VzLmluY2x1ZGVzKCdfJykgPyAxIDogMCk7Cn0KCmZ1bmN0aW9uIGFscGhhbnVtZXJpY2FsQ29tcGFyYXRvcihhLCBiKSB7CiAgaWYgKGEgPCBiKSB7CiAgICByZXR1cm4gLTE7CiAgfQoKICBpZiAoYSA+IGIpIHsKICAgIHJldHVybiAxOwogIH0KCiAgcmV0dXJuIDA7Cn0KCmZ1bmN0aW9uIHN0YXJ0c1dpdGhDb21wYXJhdG9yKHF1ZXJ5KSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gKFN0cmluZyhiKS5zdGFydHNXaXRoKHF1ZXJ5KSA/IDEgOiAwKSAtIChTdHJpbmcoYSkuc3RhcnRzV2l0aChxdWVyeSkgPyAxIDogMCk7CiAgfTsKfQoKZnVuY3Rpb24gY29tYmluZWRDb21wYXJhdG9yKCkgewogIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBjb21wYXJhdG9ycyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgIGNvbXBhcmF0b3JzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogIH0KCiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gY29tcGFyYXRvcnMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGNvbXBhcmF0b3IpIHsKICAgICAgaWYgKGFjYyAhPT0gMCkgewogICAgICAgIHJldHVybiBhY2M7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb21wYXJhdG9yKGEsIGIpOwogICAgfSwgMCk7CiAgfTsKfQoKZnVuY3Rpb24gaW52b2tlV2l0aFByb3AoZm4sIHByb3ApIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7CiAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTsKICAgIH0KCiAgICByZXR1cm4gZm4uYXBwbHkodm9pZCAwLCBfdG9Db25zdW1hYmxlQXJyYXkoYXJncy5tYXAoZnVuY3Rpb24gKGFyZykgewogICAgICByZXR1cm4gYXJnW3Byb3BdOwogICAgfSkpKTsKICB9Owp9"},null]}