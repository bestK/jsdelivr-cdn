{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/discover/np_ready/components/field_chooser/field_chooser.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/discover/np_ready/components/field_chooser/field_chooser.js","mtime":1585205039536},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmNyZWF0ZUZpZWxkQ2hvb3NlckRpcmVjdGl2ZSA9IGNyZWF0ZUZpZWxkQ2hvb3NlckRpcmVjdGl2ZTsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX2pxdWVyeSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgianF1ZXJ5IikpOwoKdmFyIF9yaXNvbk5vZGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJpc29uLW5vZGUiKSk7Cgp2YXIgX2ZpZWxkX2NhbGN1bGF0b3IgPSByZXF1aXJlKCIuL2xpYi9maWVsZF9jYWxjdWxhdG9yIik7CgpyZXF1aXJlKCIuL2Rpc2NvdmVyX2ZpZWxkIik7CgpyZXF1aXJlKCIuL2Rpc2NvdmVyX2ZpZWxkX3NlYXJjaF9kaXJlY3RpdmUiKTsKCnJlcXVpcmUoIi4vZGlzY292ZXJfaW5kZXhfcGF0dGVybl9kaXJlY3RpdmUiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9kYXRhL3B1YmxpYyIpOwoKdmFyIF9maWVsZF9jaG9vc2VyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2ZpZWxkX2Nob29zZXIuaHRtbCIpKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgpmdW5jdGlvbiBjcmVhdGVGaWVsZENob29zZXJEaXJlY3RpdmUoJGxvY2F0aW9uLCBjb25maWcsICRyb3V0ZSkgewogIHJldHVybiB7CiAgICByZXN0cmljdDogJ0UnLAogICAgc2NvcGU6IHsKICAgICAgY29sdW1uczogJz0nLAogICAgICBoaXRzOiAnPScsCiAgICAgIGZpZWxkQ291bnRzOiAnPScsCiAgICAgIHN0YXRlOiAnPScsCiAgICAgIGluZGV4UGF0dGVybjogJz0nLAogICAgICBpbmRleFBhdHRlcm5MaXN0OiAnPScsCiAgICAgIG9uQWRkRmllbGQ6ICc9JywKICAgICAgb25BZGRGaWx0ZXI6ICc9JywKICAgICAgb25SZW1vdmVGaWVsZDogJz0nCiAgICB9LAogICAgdGVtcGxhdGU6IF9maWVsZF9jaG9vc2VyLmRlZmF1bHQsCiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKCRzY29wZSkgewogICAgICAkc2NvcGUuc2hvd0ZpbHRlciA9IGZhbHNlOwoKICAgICAgJHNjb3BlLnRvZ2dsZVNob3dGaWx0ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICRzY29wZS5zaG93RmlsdGVyID0gISRzY29wZS5zaG93RmlsdGVyOwogICAgICB9OwoKICAgICAgJHNjb3BlLnNlbGVjdGVkSW5kZXhQYXR0ZXJuID0gJHNjb3BlLmluZGV4UGF0dGVybkxpc3QuZmluZChmdW5jdGlvbiAocGF0dGVybikgewogICAgICAgIHJldHVybiBwYXR0ZXJuLmlkID09PSAkc2NvcGUuaW5kZXhQYXR0ZXJuLmlkOwogICAgICB9KTsKICAgICAgJHNjb3BlLmluZGV4UGF0dGVybkxpc3QgPSBfbG9kYXNoLmRlZmF1bHQuc29ydEJ5KCRzY29wZS5pbmRleFBhdHRlcm5MaXN0LCBmdW5jdGlvbiAobykgewogICAgICAgIHJldHVybiBvLmdldCgndGl0bGUnKTsKICAgICAgfSk7CgogICAgICAkc2NvcGUuc2V0SW5kZXhQYXR0ZXJuID0gZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgJHNjb3BlLnN0YXRlLmluZGV4ID0gaWQ7CiAgICAgICAgJHNjb3BlLnN0YXRlLnNhdmUoKTsKICAgICAgfTsKCiAgICAgICRzY29wZS4kd2F0Y2goJ3N0YXRlLmluZGV4JywgZnVuY3Rpb24gKGlkLCBwcmV2aW91c0lkKSB7CiAgICAgICAgaWYgKHByZXZpb3VzSWQgPT0gbnVsbCB8fCBwcmV2aW91c0lkID09PSBpZCkgcmV0dXJuOwogICAgICAgICRyb3V0ZS5yZWxvYWQoKTsKICAgICAgfSk7CiAgICAgIHZhciBmaWx0ZXIgPSAkc2NvcGUuZmlsdGVyID0gewogICAgICAgIHByb3BzOiBbJ3R5cGUnLCAnYWdncmVnYXRhYmxlJywgJ3NlYXJjaGFibGUnLCAnbWlzc2luZycsICduYW1lJ10sCiAgICAgICAgZGVmYXVsdHM6IHsKICAgICAgICAgIG1pc3Npbmc6IHRydWUsCiAgICAgICAgICB0eXBlOiAnYW55JywKICAgICAgICAgIG5hbWU6ICcnCiAgICAgICAgfSwKICAgICAgICBib29sT3B0czogW3sKICAgICAgICAgIGxhYmVsOiAnYW55JywKICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogJ3llcycsCiAgICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAnbm8nLAogICAgICAgICAgdmFsdWU6IGZhbHNlCiAgICAgICAgfV0sCiAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICAgICAgZmlsdGVyLnZhbHMgPSBfbG9kYXNoLmRlZmF1bHQuY2xvbmUoZmlsdGVyLmRlZmF1bHRzKTsKICAgICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiBmaWx0ZXIgZm9yIGZpZWxkcyB0aGF0IGFyZSBkaXNwbGF5ZWQgLyBzZWxlY3RlZCBmb3IgdGhlIGRhdGEgdGFibGUKICAgICAgICAgKi8KICAgICAgICBpc0ZpZWxkRmlsdGVyZWRBbmREaXNwbGF5ZWQ6IGZ1bmN0aW9uIGlzRmllbGRGaWx0ZXJlZEFuZERpc3BsYXllZChmaWVsZCkgewogICAgICAgICAgcmV0dXJuIGZpZWxkLmRpc3BsYXkgJiYgaXNGaWVsZEZpbHRlcmVkKGZpZWxkKTsKICAgICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiBmaWx0ZXIgZm9yIGZpZWxkcyB0aGF0IGFyZSBub3QgZGlzcGxheWVkIC8gc2VsZWN0ZWQgZm9yIHRoZSBkYXRhIHRhYmxlCiAgICAgICAgICovCiAgICAgICAgaXNGaWVsZEZpbHRlcmVkQW5kTm90RGlzcGxheWVkOiBmdW5jdGlvbiBpc0ZpZWxkRmlsdGVyZWRBbmROb3REaXNwbGF5ZWQoZmllbGQpIHsKICAgICAgICAgIHJldHVybiAhZmllbGQuZGlzcGxheSAmJiBpc0ZpZWxkRmlsdGVyZWQoZmllbGQpICYmIGZpZWxkLnR5cGUgIT09ICdfc291cmNlJzsKICAgICAgICB9LAogICAgICAgIGdldEFjdGl2ZTogZnVuY3Rpb24gZ2V0QWN0aXZlKCkgewogICAgICAgICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5zb21lKGZpbHRlci5wcm9wcywgZnVuY3Rpb24gKHByb3ApIHsKICAgICAgICAgICAgcmV0dXJuIGZpbHRlci52YWxzW3Byb3BdICE9PSBmaWx0ZXIuZGVmYXVsdHNbcHJvcF07CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBmdW5jdGlvbiBpc0ZpZWxkRmlsdGVyZWQoZmllbGQpIHsKICAgICAgICB2YXIgbWF0Y2hGaWx0ZXIgPSBmaWx0ZXIudmFscy50eXBlID09PSAnYW55JyB8fCBmaWVsZC50eXBlID09PSBmaWx0ZXIudmFscy50eXBlOwogICAgICAgIHZhciBpc0FnZ3JlZ2F0YWJsZSA9IGZpbHRlci52YWxzLmFnZ3JlZ2F0YWJsZSA9PSBudWxsIHx8IGZpZWxkLmFnZ3JlZ2F0YWJsZSA9PT0gZmlsdGVyLnZhbHMuYWdncmVnYXRhYmxlOwogICAgICAgIHZhciBpc1NlYXJjaGFibGUgPSBmaWx0ZXIudmFscy5zZWFyY2hhYmxlID09IG51bGwgfHwgZmllbGQuc2VhcmNoYWJsZSA9PT0gZmlsdGVyLnZhbHMuc2VhcmNoYWJsZTsKICAgICAgICB2YXIgc2NyaXB0ZWRPck1pc3NpbmcgPSAhZmlsdGVyLnZhbHMubWlzc2luZyB8fCBmaWVsZC50eXBlID09PSAnX3NvdXJjZScgfHwgZmllbGQuc2NyaXB0ZWQgfHwgZmllbGQucm93Q291bnQgPiAwOwogICAgICAgIHZhciBtYXRjaE5hbWUgPSAhZmlsdGVyLnZhbHMubmFtZSB8fCBmaWVsZC5uYW1lLmluZGV4T2YoZmlsdGVyLnZhbHMubmFtZSkgIT09IC0xOwogICAgICAgIHJldHVybiBtYXRjaEZpbHRlciAmJiBpc0FnZ3JlZ2F0YWJsZSAmJiBpc1NlYXJjaGFibGUgJiYgc2NyaXB0ZWRPck1pc3NpbmcgJiYgbWF0Y2hOYW1lOwogICAgICB9CgogICAgICAkc2NvcGUuc2V0RmlsdGVyVmFsdWUgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHsKICAgICAgICBmaWx0ZXIudmFsc1tuYW1lXSA9IHZhbHVlOwogICAgICB9OwoKICAgICAgJHNjb3BlLmZpbHRlcnNBY3RpdmUgPSAwOyAvLyBzZXQgdGhlIGluaXRpYWwgdmFsdWVzIHRvIHRoZSBkZWZhdWx0cwoKICAgICAgZmlsdGVyLnJlc2V0KCk7CiAgICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKCdmaWx0ZXIudmFscycsIGZ1bmN0aW9uICgpIHsKICAgICAgICBmaWx0ZXIuYWN0aXZlID0gZmlsdGVyLmdldEFjdGl2ZSgpOwoKICAgICAgICBpZiAoZmlsdGVyLnZhbHMpIHsKICAgICAgICAgIHZhciBjb3VudCA9IDA7CiAgICAgICAgICBPYmplY3Qua2V5cyhmaWx0ZXIudmFscykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgIGlmIChrZXkgPT09ICdtaXNzaW5nJyB8fCBrZXkgPT09ICduYW1lJykgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHZhbHVlID0gZmlsdGVyLnZhbHNba2V5XTsKCiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZSAhPT0gJ2FueScgfHwgdmFsdWUgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAkc2NvcGUuZmlsdGVyc0FjdGl2ZSA9IGNvdW50OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgICRzY29wZS4kd2F0Y2hNdWx0aShbJ1tdZmllbGRDb3VudHMnLCAnW11jb2x1bW5zJywgJ1tdaGl0cyddLCBmdW5jdGlvbiAoY3VyLCBwcmV2KSB7CiAgICAgICAgdmFyIG5ld0hpdHMgPSBjdXJbMl0gIT09IHByZXZbMl07CiAgICAgICAgdmFyIGZpZWxkcyA9ICRzY29wZS5maWVsZHM7CiAgICAgICAgdmFyIGNvbHVtbnMgPSAkc2NvcGUuY29sdW1ucyB8fCBbXTsKICAgICAgICB2YXIgZmllbGRDb3VudHMgPSAkc2NvcGUuZmllbGRDb3VudHM7CgogICAgICAgIGlmICghZmllbGRzIHx8IG5ld0hpdHMpIHsKICAgICAgICAgICRzY29wZS5maWVsZHMgPSBmaWVsZHMgPSBnZXRGaWVsZHMoKTsKICAgICAgICB9CgogICAgICAgIGlmICghZmllbGRzKSByZXR1cm47IC8vIGdyb3VwIHRoZSBmaWVsZHMgaW50byBwb3B1bGFyIGFuZCB1cC1wb3B1bGFyIGxpc3RzCgogICAgICAgIF9sb2Rhc2guZGVmYXVsdC5jaGFpbihmaWVsZHMpLmVhY2goZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgICAgICBmaWVsZC5kaXNwbGF5T3JkZXIgPSBfbG9kYXNoLmRlZmF1bHQuaW5kZXhPZihjb2x1bW5zLCBmaWVsZC5uYW1lKSArIDE7CiAgICAgICAgICBmaWVsZC5kaXNwbGF5ID0gISFmaWVsZC5kaXNwbGF5T3JkZXI7CiAgICAgICAgICBmaWVsZC5yb3dDb3VudCA9IGZpZWxkQ291bnRzW2ZpZWxkLm5hbWVdOwogICAgICAgIH0pLnNvcnRCeShmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgICAgIHJldHVybiAoZmllbGQuY291bnQgfHwgMCkgKiAtMTsKICAgICAgICB9KS5ncm91cEJ5KGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgICAgaWYgKGZpZWxkLmRpc3BsYXkpIHJldHVybiAnc2VsZWN0ZWQnOwogICAgICAgICAgcmV0dXJuIGZpZWxkLmNvdW50ID4gMCA/ICdwb3B1bGFyJyA6ICd1bnBvcHVsYXInOwogICAgICAgIH0pLnRhcChmdW5jdGlvbiAoZ3JvdXBzKSB7CiAgICAgICAgICBncm91cHMuc2VsZWN0ZWQgPSBfbG9kYXNoLmRlZmF1bHQuc29ydEJ5KGdyb3Vwcy5zZWxlY3RlZCB8fCBbXSwgJ2Rpc3BsYXlPcmRlcicpOwogICAgICAgICAgZ3JvdXBzLnBvcHVsYXIgPSBncm91cHMucG9wdWxhciB8fCBbXTsKICAgICAgICAgIGdyb3Vwcy51bnBvcHVsYXIgPSBncm91cHMudW5wb3B1bGFyIHx8IFtdOyAvLyBtb3ZlIGV4Y2VzcyBwb3B1bGFyIGZpZWxkcyB0byB1bi1wb3B1bGFyIGxpc3QKCiAgICAgICAgICB2YXIgZXh0cmFzID0gZ3JvdXBzLnBvcHVsYXIuc3BsaWNlKGNvbmZpZy5nZXQoJ2ZpZWxkczpwb3B1bGFyTGltaXQnKSk7CiAgICAgICAgICBncm91cHMudW5wb3B1bGFyID0gZXh0cmFzLmNvbmNhdChncm91cHMudW5wb3B1bGFyKTsKICAgICAgICB9KS5lYWNoKGZ1bmN0aW9uIChncm91cCwgbmFtZSkgewogICAgICAgICAgJHNjb3BlW25hbWUgKyAnRmllbGRzJ10gPSBfbG9kYXNoLmRlZmF1bHQuc29ydEJ5KGdyb3VwLCBuYW1lID09PSAnc2VsZWN0ZWQnID8gJ2Rpc3BsYXknIDogJ25hbWUnKTsKICAgICAgICB9KS5jb21taXQoKTsgLy8gaW5jbHVkZSB1bmRlZmluZWQgc28gdGhlIHVzZXIgY2FuIGNsZWFyIHRoZSBmaWx0ZXIKCgogICAgICAgICRzY29wZS5maWVsZFR5cGVzID0gX2xvZGFzaC5kZWZhdWx0LnVuaW9uKFsnYW55J10sIF9sb2Rhc2guZGVmYXVsdC5wbHVjayhmaWVsZHMsICd0eXBlJykpOwogICAgICB9KTsKCiAgICAgICRzY29wZS5pbmNyZWFzZUZpZWxkQ291bnRlciA9IGZ1bmN0aW9uIChmaWVsZE5hbWUpIHsKICAgICAgICAkc2NvcGUuaW5kZXhQYXR0ZXJuLnBvcHVsYXJpemVGaWVsZChmaWVsZE5hbWUsIDEpOwogICAgICB9OwoKICAgICAgZnVuY3Rpb24gZ2V0VmlzdWFsaXplVXJsKGZpZWxkKSB7CiAgICAgICAgaWYgKCEkc2NvcGUuc3RhdGUpIHsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CgogICAgICAgIHZhciBhZ2cgPSB7fTsKICAgICAgICB2YXIgaXNHZW9Qb2ludCA9IGZpZWxkLnR5cGUgPT09ICdnZW9fcG9pbnQnOwogICAgICAgIHZhciB0eXBlID0gaXNHZW9Qb2ludCA/ICd0aWxlX21hcCcgOiAnaGlzdG9ncmFtJzsgLy8gSWYgd2UncmUgdmlzdWFsaXppbmcgYSBkYXRlIGZpZWxkLCBhbmQgb3VyIGluZGV4IGlzIHRpbWUgYmFzZWQgKGFuZCB0aHVzIGhhcyBhIHRpbWUgZmlsdGVyKSwKICAgICAgICAvLyB0aGVuIHJ1biBhIGRhdGUgaGlzdG9ncmFtCgogICAgICAgIGlmIChmaWVsZC50eXBlID09PSAnZGF0ZScgJiYgJHNjb3BlLmluZGV4UGF0dGVybi50aW1lRmllbGROYW1lID09PSBmaWVsZC5uYW1lKSB7CiAgICAgICAgICBhZ2cgPSB7CiAgICAgICAgICAgIHR5cGU6ICdkYXRlX2hpc3RvZ3JhbScsCiAgICAgICAgICAgIHNjaGVtYTogJ3NlZ21lbnQnLAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBmaWVsZDogZmllbGQubmFtZSwKICAgICAgICAgICAgICBpbnRlcnZhbDogJ2F1dG8nCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIGlmIChpc0dlb1BvaW50KSB7CiAgICAgICAgICBhZ2cgPSB7CiAgICAgICAgICAgIHR5cGU6ICdnZW9oYXNoX2dyaWQnLAogICAgICAgICAgICBzY2hlbWE6ICdzZWdtZW50JywKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgZmllbGQ6IGZpZWxkLm5hbWUsCiAgICAgICAgICAgICAgcHJlY2lzaW9uOiAzCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFnZyA9IHsKICAgICAgICAgICAgdHlwZTogJ3Rlcm1zJywKICAgICAgICAgICAgc2NoZW1hOiAnc2VnbWVudCcsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIGZpZWxkOiBmaWVsZC5uYW1lLAogICAgICAgICAgICAgIHNpemU6IHBhcnNlSW50KGNvbmZpZy5nZXQoJ2Rpc2NvdmVyOmFnZ3M6dGVybXM6c2l6ZScpLCAxMCksCiAgICAgICAgICAgICAgb3JkZXJCeTogJzInCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJyMvdmlzdWFsaXplL2NyZWF0ZT8nICsgX2pxdWVyeS5kZWZhdWx0LnBhcmFtKF9sb2Rhc2guZGVmYXVsdC5hc3NpZ24oX2xvZGFzaC5kZWZhdWx0LmNsb25lKCRsb2NhdGlvbi5zZWFyY2goKSksIHsKICAgICAgICAgIGluZGV4UGF0dGVybjogJHNjb3BlLnN0YXRlLmluZGV4LAogICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgIF9hOiBfcmlzb25Ob2RlLmRlZmF1bHQuZW5jb2RlKHsKICAgICAgICAgICAgZmlsdGVyczogJHNjb3BlLnN0YXRlLmZpbHRlcnMgfHwgW10sCiAgICAgICAgICAgIHF1ZXJ5OiAkc2NvcGUuc3RhdGUucXVlcnkgfHwgdW5kZWZpbmVkLAogICAgICAgICAgICB2aXM6IHsKICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgIGFnZ3M6IFt7CiAgICAgICAgICAgICAgICBzY2hlbWE6ICdtZXRyaWMnLAogICAgICAgICAgICAgICAgdHlwZTogJ2NvdW50JywKICAgICAgICAgICAgICAgIGlkOiAnMicKICAgICAgICAgICAgICB9LCBhZ2ddCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSkpOwogICAgICB9CgogICAgICAkc2NvcGUuY29tcHV0ZURldGFpbHMgPSBmdW5jdGlvbiAoZmllbGQsIHJlY29tcHV0ZSkgewogICAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHQuaXNVbmRlZmluZWQoZmllbGQuZGV0YWlscykgfHwgcmVjb21wdXRlKSB7CiAgICAgICAgICBmaWVsZC5kZXRhaWxzID0gX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgIHZpc3VhbGl6ZVVybDogZmllbGQudmlzdWFsaXphYmxlID8gZ2V0VmlzdWFsaXplVXJsKGZpZWxkKSA6IG51bGwKICAgICAgICAgIH0sIF9maWVsZF9jYWxjdWxhdG9yLmZpZWxkQ2FsY3VsYXRvci5nZXRGaWVsZFZhbHVlQ291bnRzKHsKICAgICAgICAgICAgaGl0czogJHNjb3BlLmhpdHMsCiAgICAgICAgICAgIGZpZWxkOiBmaWVsZCwKICAgICAgICAgICAgY291bnQ6IDUsCiAgICAgICAgICAgIGdyb3VwZWQ6IGZhbHNlCiAgICAgICAgICB9KSk7CgogICAgICAgICAgX2xvZGFzaC5kZWZhdWx0LmVhY2goZmllbGQuZGV0YWlscy5idWNrZXRzLCBmdW5jdGlvbiAoYnVja2V0KSB7CiAgICAgICAgICAgIGJ1Y2tldC5kaXNwbGF5ID0gZmllbGQuZm9ybWF0LmNvbnZlcnQoYnVja2V0LnZhbHVlKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgICRzY29wZS5pbmNyZWFzZUZpZWxkQ291bnRlcihmaWVsZCwgMSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlbGV0ZSBmaWVsZC5kZXRhaWxzOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGZ1bmN0aW9uIGdldEZpZWxkcygpIHsKICAgICAgICB2YXIgcHJldkZpZWxkcyA9ICRzY29wZS5maWVsZHM7CiAgICAgICAgdmFyIGluZGV4UGF0dGVybiA9ICRzY29wZS5pbmRleFBhdHRlcm47CiAgICAgICAgdmFyIGhpdHMgPSAkc2NvcGUuaGl0czsKICAgICAgICB2YXIgZmllbGRDb3VudHMgPSAkc2NvcGUuZmllbGRDb3VudHM7CiAgICAgICAgaWYgKCFpbmRleFBhdHRlcm4gfHwgIWhpdHMgfHwgIWZpZWxkQ291bnRzKSByZXR1cm47CiAgICAgICAgdmFyIGZpZWxkU3BlY3MgPSBpbmRleFBhdHRlcm4uZmllbGRzLnNsaWNlKDApOwoKICAgICAgICB2YXIgZmllbGROYW1lc0luRG9jcyA9IF9sb2Rhc2guZGVmYXVsdC5rZXlzKGZpZWxkQ291bnRzKTsKCiAgICAgICAgdmFyIGZpZWxkTmFtZXNJbkluZGV4UGF0dGVybiA9IF9sb2Rhc2guZGVmYXVsdC5tYXAoaW5kZXhQYXR0ZXJuLmZpZWxkcywgJ25hbWUnKTsKCiAgICAgICAgX2xvZGFzaC5kZWZhdWx0LmRpZmZlcmVuY2UoZmllbGROYW1lc0luRG9jcywgZmllbGROYW1lc0luSW5kZXhQYXR0ZXJuKS5mb3JFYWNoKGZ1bmN0aW9uICh1bmtub3duRmllbGROYW1lKSB7CiAgICAgICAgICBmaWVsZFNwZWNzLnB1c2goewogICAgICAgICAgICBuYW1lOiB1bmtub3duRmllbGROYW1lLAogICAgICAgICAgICB0eXBlOiAndW5rbm93bicKICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgZmllbGRzID0gbmV3IF9wdWJsaWMuRmllbGRMaXN0KGluZGV4UGF0dGVybiwgZmllbGRTcGVjcyk7CgogICAgICAgIGlmIChwcmV2RmllbGRzKSB7CiAgICAgICAgICBmaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgICAgICAgZmllbGQuZGV0YWlscyA9IChwcmV2RmllbGRzLmdldEJ5TmFtZShmaWVsZC5uYW1lKSB8fCB7fSkuZGV0YWlsczsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZpZWxkczsKICAgICAgfQogICAgfQogIH07Cn0="},null]}