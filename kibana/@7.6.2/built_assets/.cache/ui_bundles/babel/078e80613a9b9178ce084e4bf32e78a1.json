{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/vis_type_vega/public/vega_view/vega_map_view.js","dependencies":[{"path":"src/legacy/core_plugins/vis_type_vega/public/vega_view/vega_map_view.js","mtime":1585205040495},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlZlZ2FNYXBWaWV3ID0gdm9pZCAwOwoKdmFyIF9raWJhbmFfbWFwID0gcmVxdWlyZSgidWkvdmlzL21hcC9raWJhbmFfbWFwIik7Cgp2YXIgdmVnYSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInZlZ2EtbGliIikpOwoKdmFyIF92ZWdhX2Jhc2VfdmlldyA9IHJlcXVpcmUoIi4vdmVnYV9iYXNlX3ZpZXciKTsKCnZhciBfdmVnYV9tYXBfbGF5ZXIgPSByZXF1aXJlKCIuL3ZlZ2FfbWFwX2xheWVyIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfY2hyb21lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJ1aS9jaHJvbWUiKSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKdmFyIFZlZ2FNYXBWaWV3ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX1ZlZ2FCYXNlVmlldykgewogIF9pbmhlcml0cyhWZWdhTWFwVmlldywgX1ZlZ2FCYXNlVmlldyk7CgogIGZ1bmN0aW9uIFZlZ2FNYXBWaWV3KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZlZ2FNYXBWaWV3KTsKCiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFZlZ2FNYXBWaWV3KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKICB9CgogIF9jcmVhdGVDbGFzcyhWZWdhTWFwVmlldywgW3sKICAgIGtleTogIl9pbml0Vmlld0N1c3RvbWl6YXRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaW5pdFZpZXdDdXN0b21pemF0aW9ucygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtYXBDb25maWcsIGJhc2VNYXBPcHRzLCBsaW1pdE1pblosIGxpbWl0TWF4WiwgdG1zU2VydmljZXMsIGVtc1RpbGVMYXllcklkLCBtYXBTdHlsZSwgaXNEYXJrTW9kZSwgdmFsaWRhdGUsIG1pblpvb20sIG1heFpvb20sIF9yZWYsIHpvb20sIHZlZ2FNYXBMYXllciwgdmVnYVZpZXc7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9pbml0Vmlld0N1c3RvbWl6YXRpb25zJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBtYXBDb25maWcgPSB0aGlzLl9wYXJzZXIubWFwQ29uZmlnOwogICAgICAgICAgICAgIGxpbWl0TWluWiA9IDA7CiAgICAgICAgICAgICAgbGltaXRNYXhaID0gMjU7CgogICAgICAgICAgICAgIGlmICghKG1hcENvbmZpZy5tYXBTdHlsZSAhPT0gZmFsc2UpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fc2VydmljZVNldHRpbmdzLmdldFRNU1NlcnZpY2VzKCkpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHRtc1NlcnZpY2VzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHRoaXMuXyRjb250YWluZXIpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBlbXNUaWxlTGF5ZXJJZCA9IF9jaHJvbWUuZGVmYXVsdC5nZXRJbmplY3RlZCgnZW1zVGlsZUxheWVySWQnLCB0cnVlKTsKICAgICAgICAgICAgICBtYXBTdHlsZSA9IG1hcENvbmZpZy5tYXBTdHlsZSA9PT0gJ2RlZmF1bHQnID8gZW1zVGlsZUxheWVySWQuYnJpZ2h0IDogbWFwQ29uZmlnLm1hcFN0eWxlOwogICAgICAgICAgICAgIGlzRGFya01vZGUgPSBfY2hyb21lLmRlZmF1bHQuZ2V0VWlTZXR0aW5nc0NsaWVudCgpLmdldCgndGhlbWU6ZGFya01vZGUnKTsKICAgICAgICAgICAgICBiYXNlTWFwT3B0cyA9IHRtc1NlcnZpY2VzLmZpbmQoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzLmlkID09PSBtYXBTdHlsZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9vYmplY3RTcHJlYWQ7CiAgICAgICAgICAgICAgX2NvbnRleHQudDEgPSB7fTsKICAgICAgICAgICAgICBfY29udGV4dC50MiA9IGJhc2VNYXBPcHRzOwogICAgICAgICAgICAgIF9jb250ZXh0LnQzID0ge307CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fc2VydmljZVNldHRpbmdzLmdldEF0dHJpYnV0ZXNGb3JUTVNMYXllcihiYXNlTWFwT3B0cywgdHJ1ZSwgaXNEYXJrTW9kZSkpOwoKICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBfY29udGV4dC50NCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgYmFzZU1hcE9wdHMgPSAoMCwgX2NvbnRleHQudDApKF9jb250ZXh0LnQxLCBfY29udGV4dC50MiwgX2NvbnRleHQudDMsIF9jb250ZXh0LnQ0KTsKCiAgICAgICAgICAgICAgaWYgKCFiYXNlTWFwT3B0cykgewogICAgICAgICAgICAgICAgdGhpcy5vbldhcm4oX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3Zpc1R5cGVWZWdhLm1hcFZpZXcubWFwU3R5bGVOb3RGb3VuZFdhcm5pbmdNZXNzYWdlJywgewogICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ3ttYXBTdHlsZVBhcmFtfSB3YXMgbm90IGZvdW5kJywKICAgICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgICAgbWFwU3R5bGVQYXJhbTogIlwibWFwU3R5bGVcIjogIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkobWFwU3R5bGUpKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxpbWl0TWluWiA9IGJhc2VNYXBPcHRzLm1pblpvb207CiAgICAgICAgICAgICAgICBsaW1pdE1heFogPSBiYXNlTWFwT3B0cy5tYXhab29tOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgdmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZShuYW1lLCB2YWx1ZSwgZGZsdCwgbWluLCBtYXgpIHsKICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIHZhbHVlID0gZGZsdDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPCBtaW4pIHsKICAgICAgICAgICAgICAgICAgX3RoaXMub25XYXJuKF9pMThuLmkxOG4udHJhbnNsYXRlKCd2aXNUeXBlVmVnYS5tYXBWaWV3LnJlc2V0dGluZ1Byb3BlcnR5VG9NaW5WYWx1ZVdhcm5pbmdNZXNzYWdlJywgewogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVzZXR0aW5nIHtuYW1lfSB0byB7bWlufScsCiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiXCIiLmNvbmNhdChuYW1lLCAiXCIiKSwKICAgICAgICAgICAgICAgICAgICAgIG1pbjogbWluCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICB2YWx1ZSA9IG1pbjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPiBtYXgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMub25XYXJuKF9pMThuLmkxOG4udHJhbnNsYXRlKCd2aXNUeXBlVmVnYS5tYXBWaWV3LnJlc2V0dGluZ1Byb3BlcnR5VG9NYXhWYWx1ZVdhcm5pbmdNZXNzYWdlJywgewogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVzZXR0aW5nIHtuYW1lfSB0byB7bWF4fScsCiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiXCIiLmNvbmNhdChuYW1lLCAiXCIiKSwKICAgICAgICAgICAgICAgICAgICAgIG1heDogbWF4CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICB2YWx1ZSA9IG1heDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgbWluWm9vbSA9IHZhbGlkYXRlKCdtaW5ab29tJywgbWFwQ29uZmlnLm1pblpvb20sIGxpbWl0TWluWiwgbGltaXRNaW5aLCBsaW1pdE1heFopOwogICAgICAgICAgICAgIG1heFpvb20gPSB2YWxpZGF0ZSgnbWF4Wm9vbScsIG1hcENvbmZpZy5tYXhab29tLCBsaW1pdE1heFosIGxpbWl0TWluWiwgbGltaXRNYXhaKTsKCiAgICAgICAgICAgICAgaWYgKG1pblpvb20gPiBtYXhab29tKSB7CiAgICAgICAgICAgICAgICB0aGlzLm9uV2FybihfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzVHlwZVZlZ2EubWFwVmlldy5taW5ab29tQW5kTWF4Wm9vbUhhdmVCZWVuU3dhcHBlZFdhcm5pbmdNZXNzYWdlJywgewogICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ3ttaW5ab29tUHJvcGVydHlOYW1lfSBhbmQge21heFpvb21Qcm9wZXJ0eU5hbWV9IGhhdmUgYmVlbiBzd2FwcGVkJywKICAgICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgICAgbWluWm9vbVByb3BlcnR5TmFtZTogJyJtaW5ab29tIicsCiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbVByb3BlcnR5TmFtZTogJyJtYXhab29tIicKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgX3JlZiA9IFttYXhab29tLCBtaW5ab29tXTsKICAgICAgICAgICAgICAgIG1pblpvb20gPSBfcmVmWzBdOwogICAgICAgICAgICAgICAgbWF4Wm9vbSA9IF9yZWZbMV07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB6b29tID0gdmFsaWRhdGUoJ3pvb20nLCBtYXBDb25maWcuem9vbSwgMiwgbWluWm9vbSwgbWF4Wm9vbSk7IC8vIGxldCBtYXhCb3VuZHMgPSBudWxsOwogICAgICAgICAgICAgIC8vIGlmIChtYXBDb25maWcubWF4Qm91bmRzKSB7CiAgICAgICAgICAgICAgLy8gICBjb25zdCBiID0gbWFwQ29uZmlnLm1heEJvdW5kczsKICAgICAgICAgICAgICAvLyAgIG1heEJvdW5kcyA9IEwubGF0TG5nQm91bmRzKEwubGF0TG5nKGJbMV0sIGJbMF0pLCBMLmxhdExuZyhiWzNdLCBiWzJdKSk7CiAgICAgICAgICAgICAgLy8gfQoKICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAgPSBuZXcgX2tpYmFuYV9tYXAuS2liYW5hTWFwKHRoaXMuXyRjb250YWluZXIuZ2V0KDApLCB7CiAgICAgICAgICAgICAgICB6b29tOiB6b29tLAogICAgICAgICAgICAgICAgbWluWm9vbTogbWluWm9vbSwKICAgICAgICAgICAgICAgIG1heFpvb206IG1heFpvb20sCiAgICAgICAgICAgICAgICBjZW50ZXI6IFttYXBDb25maWcubGF0aXR1ZGUsIG1hcENvbmZpZy5sb25naXR1ZGVdLAogICAgICAgICAgICAgICAgem9vbUNvbnRyb2w6IG1hcENvbmZpZy56b29tQ29udHJvbCwKICAgICAgICAgICAgICAgIHNjcm9sbFdoZWVsWm9vbTogbWFwQ29uZmlnLnNjcm9sbFdoZWVsWm9vbQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBpZiAoYmFzZU1hcE9wdHMpIHsKICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5zZXRCYXNlTGF5ZXIoewogICAgICAgICAgICAgICAgICBiYXNlTGF5ZXJUeXBlOiAndG1zJywKICAgICAgICAgICAgICAgICAgb3B0aW9uczogYmFzZU1hcE9wdHMKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmVnYU1hcExheWVyID0gbmV3IF92ZWdhX21hcF9sYXllci5WZWdhTWFwTGF5ZXIodGhpcy5fcGFyc2VyLnNwZWMsIHsKICAgICAgICAgICAgICAgIHZlZ2E6IHZlZ2EsCiAgICAgICAgICAgICAgICBiaW5kaW5nc0NvbnRhaW5lcjogdGhpcy5fJGNvbnRyb2xzLmdldCgwKSwKICAgICAgICAgICAgICAgIGRlbGF5UmVwYWludDogbWFwQ29uZmlnLmRlbGF5UmVwYWludCwKICAgICAgICAgICAgICAgIHZpZXdDb25maWc6IHRoaXMuX3ZlZ2FWaWV3Q29uZmlnLAogICAgICAgICAgICAgICAgb25XYXJuaW5nOiB0aGlzLm9uV2Fybi5iaW5kKHRoaXMpLAogICAgICAgICAgICAgICAgb25FcnJvcjogdGhpcy5vbkVycm9yLmJpbmQodGhpcykKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLmFkZExheWVyKHZlZ2FNYXBMYXllcik7CgogICAgICAgICAgICAgIHRoaXMuX2FkZERlc3Ryb3lIYW5kbGVyKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzLl9raWJhbmFNYXAucmVtb3ZlTGF5ZXIodmVnYU1hcExheWVyKTsKCiAgICAgICAgICAgICAgICBpZiAoYmFzZU1hcE9wdHMpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuX2tpYmFuYU1hcC5zZXRCYXNlTGF5ZXIobnVsbCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuX2tpYmFuYU1hcC5kZXN0cm95KCk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHZlZ2FWaWV3ID0gdmVnYU1hcExheWVyLmdldFZlZ2FWaWV3KCk7CiAgICAgICAgICAgICAgdGhpcy5zZXREZWJ1Z1ZhbHVlcyh2ZWdhVmlldywgdGhpcy5fcGFyc2VyLnNwZWMsIHRoaXMuX3BhcnNlci52bHNwZWMpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuc2V0Vmlldyh2ZWdhVmlldykpOwoKICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVmVnYU1hcFZpZXc7Cn0oX3ZlZ2FfYmFzZV92aWV3LlZlZ2FCYXNlVmlldyk7CgpleHBvcnRzLlZlZ2FNYXBWaWV3ID0gVmVnYU1hcFZpZXc7"},null]}