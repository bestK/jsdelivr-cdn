{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/console/public/np_ready/application/models/legacy_core_editor/legacy_core_editor.js","dependencies":[{"path":"src/legacy/core_plugins/console/public/np_ready/application/models/legacy_core_editor/legacy_core_editor.js","mtime":1585205039192},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkxlZ2FjeUNvcmVFZGl0b3IgPSB2b2lkIDA7Cgp2YXIgX2JyYWNlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJicmFjZSIpKTsKCnZhciBfanF1ZXJ5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJqcXVlcnkiKSk7Cgp2YXIgX2FjZV90b2tlbl9wcm92aWRlciA9IHJlcXVpcmUoIi4uLy4uLy4uL2xpYi9hY2VfdG9rZW5fcHJvdmlkZXIiKTsKCnZhciBjdXJsID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgiLi4vc2Vuc2VfZWRpdG9yL2N1cmwiKSk7Cgp2YXIgX3NtYXJ0X3Jlc2l6ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9zbWFydF9yZXNpemUiKSk7Cgp2YXIgSW5wdXRNb2RlID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgiLi9tb2RlL2lucHV0IikpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIF9BY2VSYW5nZSA9IF9icmFjZS5kZWZhdWx0LmFjZXF1aXJlKCdhY2UvcmFuZ2UnKS5SYW5nZTsKCnZhciByYW5nZVRvQWNlUmFuZ2UgPSBmdW5jdGlvbiByYW5nZVRvQWNlUmFuZ2UoX3JlZikgewogIHZhciBzdGFydCA9IF9yZWYuc3RhcnQsCiAgICAgIGVuZCA9IF9yZWYuZW5kOwogIHJldHVybiBuZXcgX0FjZVJhbmdlKHN0YXJ0LmxpbmVOdW1iZXIgLSAxLCBzdGFydC5jb2x1bW4gLSAxLCBlbmQubGluZU51bWJlciAtIDEsIGVuZC5jb2x1bW4gLSAxKTsKfTsKCnZhciBMZWdhY3lDb3JlRWRpdG9yID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gTGVnYWN5Q29yZUVkaXRvcihlZGl0b3IsIGFjdGlvbnMpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExlZ2FjeUNvcmVFZGl0b3IpOwoKICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiX2FjZU9uUGFzdGUiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiJGFjdGlvbnMiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicmVzaXplIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInNldEFjdGlvbnNCYXIiLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIHRvcE9yQm90dG9tID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAndG9wJzsKCiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgewogICAgICAgIF90aGlzLiRhY3Rpb25zLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodG9wT3JCb3R0b20gPT09ICd0b3AnKSB7CiAgICAgICAgICBfdGhpcy4kYWN0aW9ucy5jc3MoewogICAgICAgICAgICBib3R0b206ICdhdXRvJywKICAgICAgICAgICAgdG9wOiB2YWx1ZSwKICAgICAgICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJGFjdGlvbnMuY3NzKHsKICAgICAgICAgICAgdG9wOiAnYXV0bycsCiAgICAgICAgICAgIGJvdHRvbTogdmFsdWUsCiAgICAgICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImhpZGVBY3Rpb25zQmFyIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZXRBY3Rpb25zQmFyKCk7CiAgICB9KTsKCiAgICB0aGlzLiRhY3Rpb25zID0gKDAsIF9qcXVlcnkuZGVmYXVsdCkoYWN0aW9ucyk7CiAgICB0aGlzLmVkaXRvci5zZXRTaG93UHJpbnRNYXJnaW4oZmFsc2UpOwogICAgdmFyIHNlc3Npb24gPSB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCk7CiAgICBzZXNzaW9uLnNldE1vZGUobmV3IElucHV0TW9kZS5Nb2RlKCkpOwogICAgc2Vzc2lvbi5zZXRGb2xkU3R5bGUoJ21hcmtiZWdpbmVuZCcpOwogICAgc2Vzc2lvbi5zZXRUYWJTaXplKDIpOwogICAgc2Vzc2lvbi5zZXRVc2VXcmFwTW9kZSh0cnVlKTsKICAgIHRoaXMucmVzaXplID0gKDAsIF9zbWFydF9yZXNpemUuZGVmYXVsdCkodGhpcy5lZGl0b3IpOyAvLyBJbnRlcmNlcHQgYWNlIG9uIHBhc3RlIGhhbmRsZXIuCgogICAgdGhpcy5fYWNlT25QYXN0ZSA9IHRoaXMuZWRpdG9yLm9uUGFzdGU7CiAgICB0aGlzLmVkaXRvci5vblBhc3RlID0gdGhpcy5ET19OT1RfVVNFX29uUGFzdGUuYmluZCh0aGlzKTsKICAgIHRoaXMuZWRpdG9yLnNldE9wdGlvbnMoewogICAgICBlbmFibGVCYXNpY0F1dG9jb21wbGV0aW9uOiB0cnVlCiAgICB9KTsKICAgIHRoaXMuZWRpdG9yLiRibG9ja1Njcm9sbGluZyA9IEluZmluaXR5OwogICAgdGhpcy5oaWRlQWN0aW9uc0JhcigpOwogICAgdGhpcy5lZGl0b3IuZm9jdXMoKTsKICB9IC8vIGRpcnR5IGNoZWNrIGZvciB0b2tlbml6ZXIgc3RhdGUsIHVzZXMgYSBsb3QgbGVzcyBjeWNsZXMKICAvLyB0aGFuIGxpc3RlbmluZyBmb3IgdG9rZW5pemVyVXBkYXRlCgoKICBfY3JlYXRlQ2xhc3MoTGVnYWN5Q29yZUVkaXRvciwgW3sKICAgIGtleTogIndhaXRGb3JMYXRlc3RUb2tlbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHdhaXRGb3JMYXRlc3RUb2tlbnMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgdmFyIHNlc3Npb24gPSBfdGhpczIuZWRpdG9yLmdldFNlc3Npb24oKTsKCiAgICAgICAgdmFyIGNoZWNrSW50ZXJ2YWwgPSAyNTsKCiAgICAgICAgdmFyIGNoZWNrID0gZnVuY3Rpb24gY2hlY2soKSB7CiAgICAgICAgICAvLyBJZiB0aGUgYmdUb2tlbml6ZXIgZG9lc24ndCBleGlzdCwgd2UgY2FuIGFzc3VtZSB0aGF0IHRoZSB1bmRlcmx5aW5nIGVkaXRvciBoYXMgYmVlbgogICAgICAgICAgLy8gdG9ybiBkb3duLCBlLmcuIGJ5IGNsb3NpbmcgdGhlIEhpc3RvcnkgdGFiLCBhbmQgd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZyBmdXJ0aGVyLgogICAgICAgICAgaWYgKHNlc3Npb24uYmdUb2tlbml6ZXIpIHsKICAgICAgICAgICAgLy8gV2FpdCB1bnRpbCB0aGUgYmdUb2tlbml6ZXIgaXMgZG9uZSBydW5uaW5nIGJlZm9yZSBleGVjdXRpbmcgdGhlIGNhbGxiYWNrLgogICAgICAgICAgICBpZiAoc2Vzc2lvbi5iZ1Rva2VuaXplci5ydW5uaW5nKSB7CiAgICAgICAgICAgICAgc2V0VGltZW91dChjaGVjaywgY2hlY2tJbnRlcnZhbCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgc2V0VGltZW91dChjaGVjaywgMCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldExpbmVTdGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TGluZVN0YXRlKGxpbmVOdW1iZXIpIHsKICAgICAgdmFyIHNlc3Npb24gPSB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCk7CiAgICAgIHJldHVybiBzZXNzaW9uLmdldFN0YXRlKGxpbmVOdW1iZXIgLSAxKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRWYWx1ZUluUmFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZhbHVlSW5SYW5nZShyYW5nZSkgewogICAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLmdldFRleHRSYW5nZShyYW5nZVRvQWNlUmFuZ2UocmFuZ2UpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRUb2tlblByb3ZpZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUb2tlblByb3ZpZGVyKCkgewogICAgICByZXR1cm4gbmV3IF9hY2VfdG9rZW5fcHJvdmlkZXIuQWNlVG9rZW5zUHJvdmlkZXIodGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRWYWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoKSB7CiAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRWYWx1ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFZhbHVlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRWYWx1ZSh0ZXh0LCBmb3JjZVJldG9rZW5pemUpIHsKICAgICAgdmFyIHNlc3Npb247CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc2V0VmFsdWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHNlc3Npb24gPSB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCk7CiAgICAgICAgICAgICAgc2Vzc2lvbi5zZXRWYWx1ZSh0ZXh0KTsKCiAgICAgICAgICAgICAgaWYgKCFmb3JjZVJldG9rZW5pemUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuZm9yY2VSZXRva2VuaXplKCkpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRMaW5lVmFsdWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldExpbmVWYWx1ZShsaW5lTnVtYmVyKSB7CiAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpOwogICAgICByZXR1cm4gc2Vzc2lvbi5nZXRMaW5lKGxpbmVOdW1iZXIgLSAxKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDdXJyZW50UG9zaXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEN1cnJlbnRQb3NpdGlvbigpIHsKICAgICAgdmFyIGN1cnNvclBvc2l0aW9uID0gdGhpcy5lZGl0b3IuZ2V0Q3Vyc29yUG9zaXRpb24oKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBsaW5lTnVtYmVyOiBjdXJzb3JQb3NpdGlvbi5yb3cgKyAxLAogICAgICAgIGNvbHVtbjogY3Vyc29yUG9zaXRpb24uY29sdW1uICsgMQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyU2VsZWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhclNlbGVjdGlvbigpIHsKICAgICAgdGhpcy5lZGl0b3IuY2xlYXJTZWxlY3Rpb24oKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRUb2tlbkF0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUb2tlbkF0KHBvcykgewogICAgICB2YXIgcHJvdmlkZXIgPSB0aGlzLmdldFRva2VuUHJvdmlkZXIoKTsKICAgICAgcmV0dXJuIHByb3ZpZGVyLmdldFRva2VuQXQocG9zKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbnNlcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluc2VydCh2YWx1ZU9yUG9zLCB2YWx1ZSkgewogICAgICBpZiAodHlwZW9mIHZhbHVlT3JQb3MgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgdGhpcy5lZGl0b3IuaW5zZXJ0KHZhbHVlT3JQb3MpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGRvY3VtZW50ID0gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLmdldERvY3VtZW50KCk7CiAgICAgIGRvY3VtZW50Lmluc2VydCh7CiAgICAgICAgY29sdW1uOiB2YWx1ZU9yUG9zLmNvbHVtbiAtIDEsCiAgICAgICAgcm93OiB2YWx1ZU9yUG9zLmxpbmVOdW1iZXIgLSAxCiAgICAgIH0sIHZhbHVlIHx8ICcnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtb3ZlQ3Vyc29yVG9Qb3NpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZUN1cnNvclRvUG9zaXRpb24ocG9zKSB7CiAgICAgIHRoaXMuZWRpdG9yLm1vdmVDdXJzb3JUb1Bvc2l0aW9uKHsKICAgICAgICByb3c6IHBvcy5saW5lTnVtYmVyIC0gMSwKICAgICAgICBjb2x1bW46IHBvcy5jb2x1bW4gLSAxCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlcGxhY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcGxhY2UocmFuZ2UsIHZhbHVlKSB7CiAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpOwogICAgICBzZXNzaW9uLnJlcGxhY2UocmFuZ2VUb0FjZVJhbmdlKHJhbmdlKSwgdmFsdWUpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldExpbmVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMaW5lcyhzdGFydExpbmUsIGVuZExpbmUpIHsKICAgICAgdmFyIHNlc3Npb24gPSB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCk7CiAgICAgIHJldHVybiBzZXNzaW9uLmdldExpbmVzKHN0YXJ0TGluZSAtIDEsIGVuZExpbmUgLSAxKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXBsYWNlUmFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcGxhY2VSYW5nZShyYW5nZSwgdmFsdWUpIHsKICAgICAgdmFyIHBvcyA9IHRoaXMuZWRpdG9yLmdldEN1cnNvclBvc2l0aW9uKCk7CiAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5yZXBsYWNlKHJhbmdlVG9BY2VSYW5nZShyYW5nZSksIHZhbHVlKTsKICAgICAgdmFyIG1heFJvdyA9IE1hdGgubWF4KHJhbmdlLnN0YXJ0LmxpbmVOdW1iZXIgLSAxICsgdmFsdWUuc3BsaXQoJ1xuJykubGVuZ3RoIC0gMSwgMSk7CiAgICAgIHBvcy5yb3cgPSBNYXRoLm1pbihwb3Mucm93LCBtYXhSb3cpOwogICAgICB0aGlzLmVkaXRvci5tb3ZlQ3Vyc29yVG9Qb3NpdGlvbihwb3MpOyAvLyBBQ0UgVVBHUkFERSAtIGNoZWNrIGlmIG5lZWRlZCAtIGF0IHRoZSBtb21lbnQgdGhlIGFib3ZlIG1heSB0cmlnZ2VyIGEgc2VsZWN0aW9uLgoKICAgICAgdGhpcy5lZGl0b3IuY2xlYXJTZWxlY3Rpb24oKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRTZWxlY3Rpb25SYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2VsZWN0aW9uUmFuZ2UoKSB7CiAgICAgIHZhciByZXN1bHQgPSB0aGlzLmVkaXRvci5nZXRTZWxlY3Rpb25SYW5nZSgpOwogICAgICByZXR1cm4gewogICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICBsaW5lTnVtYmVyOiByZXN1bHQuc3RhcnQucm93ICsgMSwKICAgICAgICAgIGNvbHVtbjogcmVzdWx0LnN0YXJ0LmNvbHVtbiArIDEKICAgICAgICB9LAogICAgICAgIGVuZDogewogICAgICAgICAgbGluZU51bWJlcjogcmVzdWx0LmVuZC5yb3cgKyAxLAogICAgICAgICAgY29sdW1uOiByZXN1bHQuZW5kLmNvbHVtbiArIDEKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0TGluZUNvdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMaW5lQ291bnQoKSB7CiAgICAgIC8vIE9ubHkgdXNlIHRoaXMgZnVuY3Rpb24gdG8gcmV0dXJuIGxpbmUgY291bnQgYXMgaXQgdXNlcwogICAgICAvLyBhIGNhY2hlLgogICAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLmdldExlbmd0aCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImFkZE1hcmtlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkTWFya2VyKHJhbmdlKSB7CiAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuYWRkTWFya2VyKHJhbmdlVG9BY2VSYW5nZShyYW5nZSksICdhY2Vfc25pcHBldC1tYXJrZXInLCAnZnVsbExpbmUnLCBmYWxzZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlTWFya2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVNYXJrZXIocmVmKSB7CiAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5yZW1vdmVNYXJrZXIocmVmKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRXcmFwTGltaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFdyYXBMaW1pdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5nZXRXcmFwTGltaXQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnQsIGxpc3RlbmVyKSB7CiAgICAgIGlmIChldmVudCA9PT0gJ2NoYW5nZUN1cnNvcicpIHsKICAgICAgICB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuc2VsZWN0aW9uLm9uKGV2ZW50LCBsaXN0ZW5lcik7CiAgICAgIH0gZWxzZSBpZiAoZXZlbnQgPT09ICdjaGFuZ2VTZWxlY3Rpb24nKSB7CiAgICAgICAgdGhpcy5lZGl0b3Iub24oZXZlbnQsIGxpc3RlbmVyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkub24oZXZlbnQsIGxpc3RlbmVyKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIm9mZiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmKGV2ZW50LCBsaXN0ZW5lcikgewogICAgICBpZiAoZXZlbnQgPT09ICdjaGFuZ2VTZWxlY3Rpb24nKSB7CiAgICAgICAgdGhpcy5lZGl0b3Iub2ZmKGV2ZW50LCBsaXN0ZW5lcik7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0NvbXBsZXRlckFjdGl2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNDb21wbGV0ZXJBY3RpdmUoKSB7CiAgICAgIC8vIFNlY3JldHMgb2YgdGhlIGFyY2FuZSBoZXJlLgogICAgICByZXR1cm4gQm9vbGVhbih0aGlzLmVkaXRvci5jb21wbGV0ZXIgJiYgdGhpcy5lZGl0b3IuY29tcGxldGVyLmFjdGl2YXRlZCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZm9yY2VSZXRva2VuaXplIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JjZVJldG9rZW5pemUoKSB7CiAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAvLyBmb3JjZSB1cGRhdGUgb2YgdG9rZW5zLCBidXQgbm90IG9uIHRoaXMgdGhyZWFkIHRvIGFsbG93IGZvciBhY2UgcmVuZGVyaW5nLgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGk7CgogICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNlc3Npb24uZ2V0TGVuZ3RoKCk7IGkrKykgewogICAgICAgICAgICBzZXNzaW9uLmdldFRva2VucyhpKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2NhbWVsY2FzZQoKICB9LCB7CiAgICBrZXk6ICJET19OT1RfVVNFX29uUGFzdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIERPX05PVF9VU0Vfb25QYXN0ZSh0ZXh0KSB7CiAgICAgIGlmICh0ZXh0ICYmIGN1cmwuZGV0ZWN0Q1VSTCh0ZXh0KSkgewogICAgICAgIHZhciBjdXJsSW5wdXQgPSBjdXJsLnBhcnNlQ1VSTCh0ZXh0KTsKICAgICAgICB0aGlzLmVkaXRvci5pbnNlcnQoY3VybElucHV0KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuX2FjZU9uUGFzdGUuY2FsbCh0aGlzLmVkaXRvciwgdGV4dCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZXhlY0NvbW1hbmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGV4ZWNDb21tYW5kKGNtZCkgewogICAgICB0aGlzLmVkaXRvci5leGVjQ29tbWFuZChjbWQpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldENvbnRhaW5lciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udGFpbmVyKCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0b3IuY29udGFpbmVyOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFN0eWxlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3R5bGVzKHN0eWxlcykgewogICAgICB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuc2V0VXNlV3JhcE1vZGUoc3R5bGVzLndyYXBMaW5lcyk7CiAgICAgIHRoaXMuZWRpdG9yLmNvbnRhaW5lci5zdHlsZS5mb250U2l6ZSA9IHN0eWxlcy5mb250U2l6ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWdpc3RlcktleWJvYXJkU2hvcnRjdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyS2V5Ym9hcmRTaG9ydGN1dChvcHRzKSB7CiAgICAgIHRoaXMuZWRpdG9yLmNvbW1hbmRzLmFkZENvbW1hbmQoewogICAgICAgIGV4ZWM6IG9wdHMuZm4sCiAgICAgICAgbmFtZTogb3B0cy5uYW1lLAogICAgICAgIGJpbmRLZXk6IG9wdHMua2V5cwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsZWdhY3lVcGRhdGVVSSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbGVnYWN5VXBkYXRlVUkocmFuZ2UpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuJGFjdGlvbnMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChyYW5nZSkgewogICAgICAgIC8vIGVsZW1lbnRzIGFyZSBwb3NpdGlvbmVkIHJlbGF0aXZlIHRvIHRoZSBlZGl0b3IncyBjb250YWluZXIKICAgICAgICAvLyBwYWdlWSBpcyByZWxhdGl2ZSB0byBwYWdlLCBzbyBzdWJ0cmFjdCB0aGUgb2Zmc2V0CiAgICAgICAgLy8gZnJvbSBwYWdlWSB0byBnZXQgdGhlIG5ldyB0b3AgdmFsdWUKICAgICAgICB2YXIgb2Zmc2V0RnJvbVBhZ2UgPSAoMCwgX2pxdWVyeS5kZWZhdWx0KSh0aGlzLmVkaXRvci5jb250YWluZXIpLm9mZnNldCgpLnRvcDsKICAgICAgICB2YXIgc3RhcnRMaW5lID0gcmFuZ2Uuc3RhcnQubGluZU51bWJlcjsKICAgICAgICB2YXIgc3RhcnRDb2x1bW4gPSByYW5nZS5zdGFydC5jb2x1bW47CiAgICAgICAgdmFyIGZpcnN0TGluZSA9IHRoaXMuZ2V0TGluZVZhbHVlKHN0YXJ0TGluZSk7CiAgICAgICAgdmFyIG1heExpbmVMZW5ndGggPSB0aGlzLmdldFdyYXBMaW1pdCgpIC0gNTsKICAgICAgICB2YXIgaXNXcmFwcGluZyA9IGZpcnN0TGluZS5sZW5ndGggPiBtYXhMaW5lTGVuZ3RoOwogICAgICAgIHZhciB0b3RhbE9mZnNldCA9IG9mZnNldEZyb21QYWdlIC0gKHdpbmRvdy5wYWdlWU9mZnNldCB8fCAwKTsKCiAgICAgICAgdmFyIGdldFNjcmVlbkNvb3JkcyA9IGZ1bmN0aW9uIGdldFNjcmVlbkNvb3JkcyhsaW5lKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLmVkaXRvci5yZW5kZXJlci50ZXh0VG9TY3JlZW5Db29yZGluYXRlcyhsaW5lIC0gMSwgc3RhcnRDb2x1bW4pLnBhZ2VZIC0gdG90YWxPZmZzZXQ7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIHRvcE9mUmVxID0gZ2V0U2NyZWVuQ29vcmRzKHN0YXJ0TGluZSk7CgogICAgICAgIGlmICh0b3BPZlJlcSA+PSAwKSB7CiAgICAgICAgICB2YXIgX3RoaXMkZWRpdG9yJGNvbnRhaW5lID0gdGhpcy5lZGl0b3IuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICAgICAgICAgIG1heEJvdHRvbSA9IF90aGlzJGVkaXRvciRjb250YWluZS5ib3R0b207CgogICAgICAgICAgaWYgKHRvcE9mUmVxID4gbWF4Qm90dG9tIC0gdG90YWxPZmZzZXQpIHsKICAgICAgICAgICAgdGhpcy5zZXRBY3Rpb25zQmFyKDAsICdib3R0b20nKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBvZmZzZXQgPSAwOwoKICAgICAgICAgIGlmIChpc1dyYXBwaW5nKSB7CiAgICAgICAgICAgIC8vIFRyeSBnZXQgdGhlIGxpbmUgaGVpZ2h0IG9mIHRoZSB0ZXh0IGFyZWEgaW4gcGl4ZWxzLgogICAgICAgICAgICB2YXIgdGV4dEFyZWEgPSAoMCwgX2pxdWVyeS5kZWZhdWx0KSh0aGlzLmVkaXRvci5jb250YWluZXIucXVlcnlTZWxlY3RvcigndGV4dEFyZWEnKSk7CiAgICAgICAgICAgIHZhciBoYXNSb29tT25OZXh0TGluZSA9IHRoaXMuZ2V0TGluZVZhbHVlKHN0YXJ0TGluZSkubGVuZ3RoIDwgbWF4TGluZUxlbmd0aDsKCiAgICAgICAgICAgIGlmICh0ZXh0QXJlYSAmJiBoYXNSb29tT25OZXh0TGluZSkgewogICAgICAgICAgICAgIC8vIExpbmUgaGVpZ2h0ICsgdGhlIG51bWJlciBvZiB3cmFwcyB3ZSBoYXZlIG9uIGEgbGluZS4KICAgICAgICAgICAgICBvZmZzZXQgKz0gdGhpcy5nZXRMaW5lVmFsdWUoc3RhcnRMaW5lKS5sZW5ndGggKiB0ZXh0QXJlYS5oZWlnaHQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoc3RhcnRMaW5lID4gMSkgewogICAgICAgICAgICAgICAgdGhpcy5zZXRBY3Rpb25zQmFyKGdldFNjcmVlbkNvb3JkcyhzdGFydExpbmUgLSAxKSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLnNldEFjdGlvbnNCYXIoZ2V0U2NyZWVuQ29vcmRzKHN0YXJ0TGluZSArIDEpKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnNldEFjdGlvbnNCYXIodG9wT2ZSZXEgKyBvZmZzZXQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIGJvdHRvbU9mUmVxID0gdGhpcy5lZGl0b3IucmVuZGVyZXIudGV4dFRvU2NyZWVuQ29vcmRpbmF0ZXMocmFuZ2UuZW5kLmxpbmVOdW1iZXIsIHJhbmdlLmVuZC5jb2x1bW4pLnBhZ2VZIC0gb2Zmc2V0RnJvbVBhZ2U7CgogICAgICAgIGlmIChib3R0b21PZlJlcSA+PSAwKSB7CiAgICAgICAgICB0aGlzLnNldEFjdGlvbnNCYXIoMCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTGVnYWN5Q29yZUVkaXRvcjsKfSgpOwoKZXhwb3J0cy5MZWdhY3lDb3JlRWRpdG9yID0gTGVnYWN5Q29yZUVkaXRvcjs="},null]}