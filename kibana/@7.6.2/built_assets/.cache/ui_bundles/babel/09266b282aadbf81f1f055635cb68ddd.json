{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/data/public/ui/query_string_input/query_bar_top_row.js","dependencies":[{"path":"src/plugins/data/public/ui/query_string_input/query_bar_top_row.js","mtime":1585205041598},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlF1ZXJ5QmFyVG9wUm93ID0gdm9pZCAwOwoKdmFyIF9kYXRlbWF0aCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGVsYXN0aWMvZGF0ZW1hdGgiKSk7Cgp2YXIgX2NsYXNzbmFtZXMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImNsYXNzbmFtZXMiKSk7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfID0gcmVxdWlyZSgiLi4vLi4iKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4va2liYW5hX3JlYWN0L3B1YmxpYyIpOwoKdmFyIF9xdWVyeV9zdHJpbmdfaW5wdXQgPSByZXF1aXJlKCIuL3F1ZXJ5X3N0cmluZ19pbnB1dCIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBRdWVyeUJhclRvcFJvd1VJKHByb3BzKSB7CiAgdmFyIF91c2VTdGF0ZSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGlzRGF0ZVJhbmdlSW52YWxpZCA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldElzRGF0ZVJhbmdlSW52YWxpZCA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBraWJhbmEgPSAoMCwgX3B1YmxpYy51c2VLaWJhbmEpKCk7CiAgdmFyIF9raWJhbmEkc2VydmljZXMgPSBraWJhbmEuc2VydmljZXMsCiAgICAgIHVpU2V0dGluZ3MgPSBfa2liYW5hJHNlcnZpY2VzLnVpU2V0dGluZ3MsCiAgICAgIG5vdGlmaWNhdGlvbnMgPSBfa2liYW5hJHNlcnZpY2VzLm5vdGlmaWNhdGlvbnMsCiAgICAgIHN0b3JhZ2UgPSBfa2liYW5hJHNlcnZpY2VzLnN0b3JhZ2UsCiAgICAgIGFwcE5hbWUgPSBfa2liYW5hJHNlcnZpY2VzLmFwcE5hbWUsCiAgICAgIGRvY0xpbmtzID0gX2tpYmFuYSRzZXJ2aWNlcy5kb2NMaW5rczsKICB2YXIga3VlcnlRdWVyeVN5bnRheExpbmsgPSBkb2NMaW5rcy5saW5rcy5xdWVyeS5rdWVyeVF1ZXJ5U3ludGF4OwogIHZhciBxdWVyeUxhbmd1YWdlID0gcHJvcHMucXVlcnkgJiYgcHJvcHMucXVlcnkubGFuZ3VhZ2U7CgogIHZhciBwZXJzaXN0ZWRMb2cgPSBfcmVhY3QuZGVmYXVsdC51c2VNZW1vKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBxdWVyeUxhbmd1YWdlICYmIHVpU2V0dGluZ3MgJiYgc3RvcmFnZSAmJiBhcHBOYW1lID8gKDAsIF8uZ2V0UXVlcnlMb2cpKHVpU2V0dGluZ3MsIHN0b3JhZ2UsIGFwcE5hbWUsIHF1ZXJ5TGFuZ3VhZ2UpIDogdW5kZWZpbmVkOwogIH0sIFthcHBOYW1lLCBxdWVyeUxhbmd1YWdlLCB1aVNldHRpbmdzLCBzdG9yYWdlXSk7CgogIGZ1bmN0aW9uIG9uQ2xpY2tTdWJtaXRCdXR0b24oZXZlbnQpIHsKICAgIGlmIChwZXJzaXN0ZWRMb2cgJiYgcHJvcHMucXVlcnkpIHsKICAgICAgcGVyc2lzdGVkTG9nLmFkZChwcm9wcy5xdWVyeS5xdWVyeSk7CiAgICB9CgogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIG9uU3VibWl0KHsKICAgICAgcXVlcnk6IHByb3BzLnF1ZXJ5LAogICAgICBkYXRlUmFuZ2U6IGdldERhdGVSYW5nZSgpCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGdldERhdGVSYW5nZSgpIHsKICAgIHZhciBkZWZhdWx0VGltZVNldHRpbmcgPSB1aVNldHRpbmdzLmdldCgndGltZXBpY2tlcjp0aW1lRGVmYXVsdHMnKTsKICAgIHJldHVybiB7CiAgICAgIGZyb206IHByb3BzLmRhdGVSYW5nZUZyb20gfHwgZGVmYXVsdFRpbWVTZXR0aW5nLmZyb20sCiAgICAgIHRvOiBwcm9wcy5kYXRlUmFuZ2VUbyB8fCBkZWZhdWx0VGltZVNldHRpbmcudG8KICAgIH07CiAgfQoKICBmdW5jdGlvbiBvblF1ZXJ5Q2hhbmdlKHF1ZXJ5KSB7CiAgICBwcm9wcy5vbkNoYW5nZSh7CiAgICAgIHF1ZXJ5OiBxdWVyeSwKICAgICAgZGF0ZVJhbmdlOiBnZXREYXRlUmFuZ2UoKQogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBvblRpbWVDaGFuZ2UoX3JlZikgewogICAgdmFyIHN0YXJ0ID0gX3JlZi5zdGFydCwKICAgICAgICBlbmQgPSBfcmVmLmVuZCwKICAgICAgICBpc0ludmFsaWQgPSBfcmVmLmlzSW52YWxpZCwKICAgICAgICBpc1F1aWNrU2VsZWN0aW9uID0gX3JlZi5pc1F1aWNrU2VsZWN0aW9uOwogICAgc2V0SXNEYXRlUmFuZ2VJbnZhbGlkKGlzSW52YWxpZCk7CiAgICB2YXIgcmV0VmFsID0gewogICAgICBxdWVyeTogcHJvcHMucXVlcnksCiAgICAgIGRhdGVSYW5nZTogewogICAgICAgIGZyb206IHN0YXJ0LAogICAgICAgIHRvOiBlbmQKICAgICAgfQogICAgfTsKCiAgICBpZiAoaXNRdWlja1NlbGVjdGlvbikgewogICAgICBwcm9wcy5vblN1Ym1pdChyZXRWYWwpOwogICAgfSBlbHNlIHsKICAgICAgcHJvcHMub25DaGFuZ2UocmV0VmFsKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG9uUmVmcmVzaChfcmVmMikgewogICAgdmFyIHN0YXJ0ID0gX3JlZjIuc3RhcnQsCiAgICAgICAgZW5kID0gX3JlZjIuZW5kOwogICAgdmFyIHJldFZhbCA9IHsKICAgICAgZGF0ZVJhbmdlOiB7CiAgICAgICAgZnJvbTogc3RhcnQsCiAgICAgICAgdG86IGVuZAogICAgICB9CiAgICB9OwoKICAgIGlmIChwcm9wcy5vblJlZnJlc2gpIHsKICAgICAgcHJvcHMub25SZWZyZXNoKHJldFZhbCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvblN1Ym1pdChfcmVmMykgewogICAgdmFyIHF1ZXJ5ID0gX3JlZjMucXVlcnksCiAgICAgICAgZGF0ZVJhbmdlID0gX3JlZjMuZGF0ZVJhbmdlOwogICAgaGFuZGxlTHVjZW5lU3ludGF4V2FybmluZygpOwoKICAgIGlmIChwcm9wcy50aW1lSGlzdG9yeSkgewogICAgICBwcm9wcy50aW1lSGlzdG9yeS5hZGQoZGF0ZVJhbmdlKTsKICAgIH0KCiAgICBwcm9wcy5vblN1Ym1pdCh7CiAgICAgIHF1ZXJ5OiBxdWVyeSwKICAgICAgZGF0ZVJhbmdlOiBkYXRlUmFuZ2UKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gb25JbnB1dFN1Ym1pdChxdWVyeSkgewogICAgb25TdWJtaXQoewogICAgICBxdWVyeTogcXVlcnksCiAgICAgIGRhdGVSYW5nZTogZ2V0RGF0ZVJhbmdlKCkKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gdG9BYnNvbHV0ZVN0cmluZyh2YWx1ZSkgewogICAgdmFyIHJvdW5kVXAgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwoKICAgIHZhciB2YWx1ZUFzTW9tZW50ID0gX2RhdGVtYXRoLmRlZmF1bHQucGFyc2UodmFsdWUsIHsKICAgICAgcm91bmRVcDogcm91bmRVcAogICAgfSk7CgogICAgaWYgKCF2YWx1ZUFzTW9tZW50KSB7CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KCiAgICByZXR1cm4gdmFsdWVBc01vbWVudC50b0lTT1N0cmluZygpOwogIH0KCiAgZnVuY3Rpb24gcmVuZGVyUXVlcnlJbnB1dCgpIHsKICAgIGlmICghc2hvdWxkUmVuZGVyUXVlcnlJbnB1dCgpKSByZXR1cm47CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9xdWVyeV9zdHJpbmdfaW5wdXQuUXVlcnlTdHJpbmdJbnB1dCwgewogICAgICBkaXNhYmxlQXV0b0ZvY3VzOiBwcm9wcy5kaXNhYmxlQXV0b0ZvY3VzLAogICAgICBpbmRleFBhdHRlcm5zOiBwcm9wcy5pbmRleFBhdHRlcm5zLAogICAgICBwcmVwZW5kOiBwcm9wcy5wcmVwZW5kLAogICAgICBxdWVyeTogcHJvcHMucXVlcnksCiAgICAgIHNjcmVlblRpdGxlOiBwcm9wcy5zY3JlZW5UaXRsZSwKICAgICAgb25DaGFuZ2U6IG9uUXVlcnlDaGFuZ2UsCiAgICAgIG9uU3VibWl0OiBvbklucHV0U3VibWl0LAogICAgICBwZXJzaXN0ZWRMb2c6IHBlcnNpc3RlZExvZywKICAgICAgZGF0YVRlc3RTdWJqOiBwcm9wcy5kYXRhVGVzdFN1YmoKICAgIH0pKTsKICB9CgogIGZ1bmN0aW9uIHJlbmRlclNoYXJpbmdNZXRhRmllbGRzKCkgewogICAgdmFyIF9nZXREYXRlUmFuZ2UgPSBnZXREYXRlUmFuZ2UoKSwKICAgICAgICBmcm9tID0gX2dldERhdGVSYW5nZS5mcm9tLAogICAgICAgIHRvID0gX2dldERhdGVSYW5nZS50bzsKCiAgICB2YXIgZGF0ZVJhbmdlUHJldHR5ID0gKDAsIF9ldWkucHJldHR5RHVyYXRpb24pKHRvQWJzb2x1dGVTdHJpbmcoZnJvbSksIHRvQWJzb2x1dGVTdHJpbmcodG8pLCBbXSwgdWlTZXR0aW5ncy5nZXQoJ2RhdGVGb3JtYXQnKSk7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAiZGF0YS1zaGFyZWQtdGltZWZpbHRlci1kdXJhdGlvbiI6IGRhdGVSYW5nZVByZXR0eSwKICAgICAgImRhdGEtdGVzdC1zdWJqIjogImRhdGFTaGFyZWRUaW1lZmlsdGVyRHVyYXRpb24iCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHNob3VsZFJlbmRlckRhdGVQaWNrZXIoKSB7CiAgICByZXR1cm4gQm9vbGVhbihwcm9wcy5zaG93RGF0ZVBpY2tlciB8fCBwcm9wcy5zaG93QXV0b1JlZnJlc2hPbmx5KTsKICB9CgogIGZ1bmN0aW9uIHNob3VsZFJlbmRlclF1ZXJ5SW5wdXQoKSB7CiAgICByZXR1cm4gQm9vbGVhbihwcm9wcy5zaG93UXVlcnlJbnB1dCAmJiBwcm9wcy5pbmRleFBhdHRlcm5zICYmIHByb3BzLnF1ZXJ5ICYmIHN0b3JhZ2UpOwogIH0KCiAgZnVuY3Rpb24gcmVuZGVyVXBkYXRlQnV0dG9uKCkgewogICAgdmFyIGJ1dHRvbiA9IHByb3BzLmN1c3RvbVN1Ym1pdEJ1dHRvbiA/IF9yZWFjdC5kZWZhdWx0LmNsb25lRWxlbWVudChwcm9wcy5jdXN0b21TdWJtaXRCdXR0b24sIHsKICAgICAgb25DbGljazogb25DbGlja1N1Ym1pdEJ1dHRvbgogICAgfSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3VwZXJVcGRhdGVCdXR0b24sIHsKICAgICAgbmVlZHNVcGRhdGU6IHByb3BzLmlzRGlydHksCiAgICAgIGlzRGlzYWJsZWQ6IGlzRGF0ZVJhbmdlSW52YWxpZCwKICAgICAgaXNMb2FkaW5nOiBwcm9wcy5pc0xvYWRpbmcsCiAgICAgIG9uQ2xpY2s6IG9uQ2xpY2tTdWJtaXRCdXR0b24sCiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJxdWVyeVN1Ym1pdEJ1dHRvbiIKICAgIH0pOwoKICAgIGlmICghc2hvdWxkUmVuZGVyRGF0ZVBpY2tlcigpKSB7CiAgICAgIHJldHVybiBidXR0b247CiAgICB9CgogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgICAgcmVzcG9uc2l2ZTogZmFsc2UsCiAgICAgIGd1dHRlclNpemU6ICJzIgogICAgfSwgcmVuZGVyRGF0ZVBpY2tlcigpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgZ3JvdzogZmFsc2UKICAgIH0sIGJ1dHRvbikpOwogIH0KCiAgZnVuY3Rpb24gcmVuZGVyRGF0ZVBpY2tlcigpIHsKICAgIGlmICghc2hvdWxkUmVuZGVyRGF0ZVBpY2tlcigpKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHZhciByZWNlbnRseVVzZWRSYW5nZXM7CgogICAgaWYgKHByb3BzLnRpbWVIaXN0b3J5KSB7CiAgICAgIHJlY2VudGx5VXNlZFJhbmdlcyA9IHByb3BzLnRpbWVIaXN0b3J5LmdldCgpLm1hcChmdW5jdGlvbiAoX3JlZjQpIHsKICAgICAgICB2YXIgZnJvbSA9IF9yZWY0LmZyb20sCiAgICAgICAgICAgIHRvID0gX3JlZjQudG87CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHN0YXJ0OiBmcm9tLAogICAgICAgICAgZW5kOiB0bwogICAgICAgIH07CiAgICAgIH0pOwogICAgfQoKICAgIHZhciBjb21tb25seVVzZWRSYW5nZXMgPSB1aVNldHRpbmdzLmdldCgndGltZXBpY2tlcjpxdWlja1JhbmdlcycpLm1hcChmdW5jdGlvbiAoX3JlZjUpIHsKICAgICAgdmFyIGZyb20gPSBfcmVmNS5mcm9tLAogICAgICAgICAgdG8gPSBfcmVmNS50bywKICAgICAgICAgIGRpc3BsYXkgPSBfcmVmNS5kaXNwbGF5OwogICAgICByZXR1cm4gewogICAgICAgIHN0YXJ0OiBmcm9tLAogICAgICAgIGVuZDogdG8sCiAgICAgICAgbGFiZWw6IGRpc3BsYXkKICAgICAgfTsKICAgIH0pOwogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICBjbGFzc05hbWU6ICJrYm5RdWVyeUJhcl9fZGF0ZVBpY2tlcldyYXBwZXIiCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3VwZXJEYXRlUGlja2VyLCB7CiAgICAgIHN0YXJ0OiBwcm9wcy5kYXRlUmFuZ2VGcm9tLAogICAgICBlbmQ6IHByb3BzLmRhdGVSYW5nZVRvLAogICAgICBpc1BhdXNlZDogcHJvcHMuaXNSZWZyZXNoUGF1c2VkLAogICAgICByZWZyZXNoSW50ZXJ2YWw6IHByb3BzLnJlZnJlc2hJbnRlcnZhbCwKICAgICAgb25UaW1lQ2hhbmdlOiBvblRpbWVDaGFuZ2UsCiAgICAgIG9uUmVmcmVzaDogb25SZWZyZXNoLAogICAgICBvblJlZnJlc2hDaGFuZ2U6IHByb3BzLm9uUmVmcmVzaENoYW5nZSwKICAgICAgc2hvd1VwZGF0ZUJ1dHRvbjogZmFsc2UsCiAgICAgIHJlY2VudGx5VXNlZFJhbmdlczogcmVjZW50bHlVc2VkUmFuZ2VzLAogICAgICBjb21tb25seVVzZWRSYW5nZXM6IGNvbW1vbmx5VXNlZFJhbmdlcywKICAgICAgZGF0ZUZvcm1hdDogdWlTZXR0aW5ncy5nZXQoJ2RhdGVGb3JtYXQnKSwKICAgICAgaXNBdXRvUmVmcmVzaE9ubHk6IHByb3BzLnNob3dBdXRvUmVmcmVzaE9ubHkKICAgIH0pKTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZUx1Y2VuZVN5bnRheFdhcm5pbmcoKSB7CiAgICBpZiAoIXByb3BzLnF1ZXJ5KSByZXR1cm47CiAgICB2YXIgaW50bCA9IHByb3BzLmludGw7CiAgICB2YXIgX3Byb3BzJHF1ZXJ5ID0gcHJvcHMucXVlcnksCiAgICAgICAgcXVlcnkgPSBfcHJvcHMkcXVlcnkucXVlcnksCiAgICAgICAgbGFuZ3VhZ2UgPSBfcHJvcHMkcXVlcnkubGFuZ3VhZ2U7CgogICAgaWYgKGxhbmd1YWdlID09PSAna3VlcnknICYmIHR5cGVvZiBxdWVyeSA9PT0gJ3N0cmluZycgJiYgKCFzdG9yYWdlIHx8ICFzdG9yYWdlLmdldCgna2liYW5hLmx1Y2VuZVN5bnRheFdhcm5pbmdPcHRPdXQnKSkgJiYgXy5lc0t1ZXJ5LmRvZXNLdWVyeUV4cHJlc3Npb25IYXZlTHVjZW5lU3ludGF4RXJyb3IocXVlcnkpKSB7CiAgICAgIHZhciB0b2FzdCA9IG5vdGlmaWNhdGlvbnMudG9hc3RzLmFkZFdhcm5pbmcoewogICAgICAgIHRpdGxlOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgaWQ6ICdkYXRhLnF1ZXJ5LnF1ZXJ5QmFyLmx1Y2VuZVN5bnRheFdhcm5pbmdUaXRsZScsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0x1Y2VuZSBzeW50YXggd2FybmluZycKICAgICAgICB9KSwKICAgICAgICB0ZXh0OiAoMCwgX3B1YmxpYy50b01vdW50UG9pbnQpKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJkYXRhLnF1ZXJ5LnF1ZXJ5QmFyLmx1Y2VuZVN5bnRheFdhcm5pbmdNZXNzYWdlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSXQgbG9va3MgbGlrZSB5b3UgbWF5IGJlIHRyeWluZyB0byB1c2UgTHVjZW5lIHF1ZXJ5IHN5bnRheCwgYWx0aG91Z2ggeW91IGhhdmUgS2liYW5hIFF1ZXJ5IExhbmd1YWdlIChLUUwpIHNlbGVjdGVkLiBQbGVhc2UgcmV2aWV3IHRoZSBLUUwgZG9jcyB7bGlua30uIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBsaW5rOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgICAgICAgIGhyZWY6IGt1ZXJ5UXVlcnlTeW50YXhMaW5rLAogICAgICAgICAgICAgIHRhcmdldDogIl9ibGFuayIKICAgICAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICBpZDogImRhdGEucXVlcnkucXVlcnlCYXIuc3ludGF4T3B0aW9uc0Rlc2NyaXB0aW9uLmRvY3NMaW5rVGV4dCIsCiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJoZXJlIgogICAgICAgICAgICB9KSkKICAgICAgICAgIH0KICAgICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAiZmxleEVuZCIsCiAgICAgICAgICBndXR0ZXJTaXplOiAicyIKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICAgIGdyb3c6IGZhbHNlCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbiwgewogICAgICAgICAgc2l6ZTogInMiLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgcmV0dXJuIG9uTHVjZW5lU3ludGF4V2FybmluZ09wdE91dCh0b2FzdCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAiZGF0YS5xdWVyeS5xdWVyeUJhci5sdWNlbmVTeW50YXhXYXJuaW5nT3B0T3V0VGV4dCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRvbid0IHNob3cgYWdhaW4iCiAgICAgICAgfSkpKSkpKQogICAgICB9KTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG9uTHVjZW5lU3ludGF4V2FybmluZ09wdE91dCh0b2FzdCkgewogICAgaWYgKCFzdG9yYWdlKSByZXR1cm47CiAgICBzdG9yYWdlLnNldCgna2liYW5hLmx1Y2VuZVN5bnRheFdhcm5pbmdPcHRPdXQnLCB0cnVlKTsKICAgIG5vdGlmaWNhdGlvbnMudG9hc3RzLnJlbW92ZSh0b2FzdCk7CiAgfQoKICB2YXIgY2xhc3NlcyA9ICgwLCBfY2xhc3NuYW1lcy5kZWZhdWx0KSgna2JuUXVlcnlCYXInLCB7CiAgICAna2JuUXVlcnlCYXItLXdpdGhEYXRlUGlja2VyJzogcHJvcHMuc2hvd0RhdGVQaWNrZXIKICB9KTsKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgY2xhc3NOYW1lOiBjbGFzc2VzLAogICAgcmVzcG9uc2l2ZTogISFwcm9wcy5zaG93RGF0ZVBpY2tlciwKICAgIGd1dHRlclNpemU6ICJzIiwKICAgIGp1c3RpZnlDb250ZW50OiAiZmxleEVuZCIKICB9LCByZW5kZXJRdWVyeUlucHV0KCksIHJlbmRlclNoYXJpbmdNZXRhRmllbGRzKCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgZ3JvdzogZmFsc2UKICB9LCByZW5kZXJVcGRhdGVCdXR0b24oKSkpOwp9CgpRdWVyeUJhclRvcFJvd1VJLmRlZmF1bHRQcm9wcyA9IHsKICBzaG93UXVlcnlJbnB1dDogdHJ1ZSwKICBzaG93RGF0ZVBpY2tlcjogdHJ1ZSwKICBzaG93QXV0b1JlZnJlc2hPbmx5OiBmYWxzZQp9Owp2YXIgUXVlcnlCYXJUb3BSb3cgPSAoMCwgX3JlYWN0Mi5pbmplY3RJMThuKShRdWVyeUJhclRvcFJvd1VJKTsKZXhwb3J0cy5RdWVyeUJhclRvcFJvdyA9IFF1ZXJ5QmFyVG9wUm93Ow=="},null]}