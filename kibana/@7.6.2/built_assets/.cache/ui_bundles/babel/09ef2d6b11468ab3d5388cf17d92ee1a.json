{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/embeddable/map_embeddable.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/embeddable/map_embeddable.js","mtime":1585205045301},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLk1hcEVtYmVkZGFibGUgPSB2b2lkIDA7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0UmVkdXggPSByZXF1aXJlKCJyZWFjdC1yZWR1eCIpOwoKdmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoInJlYWN0LWRvbSIpOwoKcmVxdWlyZSgibWFwYm94LWdsL2Rpc3QvbWFwYm94LWdsLmNzcyIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvbGVnYWN5L2NvcmVfcGx1Z2lucy9lbWJlZGRhYmxlX2FwaS9wdWJsaWMvbnBfcmVhZHkvcHVibGljIik7Cgp2YXIgX3B1YmxpYzIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvcGx1Z2lucy9kYXRhL3B1YmxpYyIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgidWkvaTE4biIpOwoKdmFyIF9naXNfbWFwID0gcmVxdWlyZSgiLi4vY29ubmVjdGVkX2NvbXBvbmVudHMvZ2lzX21hcCIpOwoKdmFyIF9zdG9yZSA9IHJlcXVpcmUoIi4uL3JlZHVjZXJzL3N0b3JlIik7Cgp2YXIgX25ld19wbGF0Zm9ybSA9IHJlcXVpcmUoInVpL25ld19wbGF0Zm9ybSIpOwoKdmFyIF9tYXBfYWN0aW9ucyA9IHJlcXVpcmUoIi4uL2FjdGlvbnMvbWFwX2FjdGlvbnMiKTsKCnZhciBfdWlfYWN0aW9ucyA9IHJlcXVpcmUoIi4uL2FjdGlvbnMvdWlfYWN0aW9ucyIpOwoKdmFyIF91aV9zZWxlY3RvcnMgPSByZXF1aXJlKCIuLi9zZWxlY3RvcnMvdWlfc2VsZWN0b3JzIik7Cgp2YXIgX25vbl9zZXJpYWxpemFibGVfaW5zdGFuY2VzID0gcmVxdWlyZSgiLi4vcmVkdWNlcnMvbm9uX3NlcmlhbGl6YWJsZV9pbnN0YW5jZXMiKTsKCnZhciBfbWFwX3NlbGVjdG9ycyA9IHJlcXVpcmUoIi4uL3NlbGVjdG9ycy9tYXBfc2VsZWN0b3JzIik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uL2NvbW1vbi9jb25zdGFudHMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSAidW5kZWZpbmVkIiAmJiBSZWZsZWN0LmdldCkgeyBfZ2V0ID0gUmVmbGVjdC5nZXQ7IH0gZWxzZSB7IF9nZXQgPSBmdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKSB7IHZhciBiYXNlID0gX3N1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7IGlmICghYmFzZSkgcmV0dXJuOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZSwgcHJvcGVydHkpOyBpZiAoZGVzYy5nZXQpIHsgcmV0dXJuIGRlc2MuZ2V0LmNhbGwocmVjZWl2ZXIpOyB9IHJldHVybiBkZXNjLnZhbHVlOyB9OyB9IHJldHVybiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyIHx8IHRhcmdldCk7IH0KCmZ1bmN0aW9uIF9zdXBlclByb3BCYXNlKG9iamVjdCwgcHJvcGVydHkpIHsgd2hpbGUgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHsgb2JqZWN0ID0gX2dldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChvYmplY3QgPT09IG51bGwpIGJyZWFrOyB9IHJldHVybiBvYmplY3Q7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIE1hcEVtYmVkZGFibGUgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfRW1iZWRkYWJsZSkgewogIF9pbmhlcml0cyhNYXBFbWJlZGRhYmxlLCBfRW1iZWRkYWJsZSk7CgogIGZ1bmN0aW9uIE1hcEVtYmVkZGFibGUoY29uZmlnLCBpbml0aWFsSW5wdXQsIHBhcmVudCwgcmVuZGVyVG9vbHRpcENvbnRlbnQsIGV2ZW50SGFuZGxlcnMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWFwRW1iZWRkYWJsZSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoTWFwRW1iZWRkYWJsZSkuY2FsbCh0aGlzLCBpbml0aWFsSW5wdXQsIHsKICAgICAgZWRpdFVybDogY29uZmlnLmVkaXRVcmwsCiAgICAgIGluZGV4UGF0dGVybnM6IGNvbmZpZy5pbmRleFBhdHRlcm5zLAogICAgICBlZGl0YWJsZTogY29uZmlnLmVkaXRhYmxlLAogICAgICBkZWZhdWx0VGl0bGU6IGNvbmZpZy50aXRsZQogICAgfSwgcGFyZW50KSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidHlwZSIsIF9jb25zdGFudHMuTUFQX1NBVkVEX09CSkVDVF9UWVBFKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJhZGRGaWx0ZXJzIiwgZnVuY3Rpb24gKGZpbHRlcnMpIHsKICAgICAgX25ld19wbGF0Zm9ybS5ucFN0YXJ0LnBsdWdpbnMudWlBY3Rpb25zLmV4ZWN1dGVUcmlnZ2VyQWN0aW9ucyhfcHVibGljLkFQUExZX0ZJTFRFUl9UUklHR0VSLCB7CiAgICAgICAgZW1iZWRkYWJsZTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksCiAgICAgICAgZmlsdGVyczogZmlsdGVycwogICAgICB9KTsKICAgIH0pOwoKICAgIF90aGlzLl9yZW5kZXJUb29sdGlwQ29udGVudCA9IHJlbmRlclRvb2x0aXBDb250ZW50OwogICAgX3RoaXMuX2V2ZW50SGFuZGxlcnMgPSBldmVudEhhbmRsZXJzOwogICAgX3RoaXMuX2xheWVyTGlzdCA9IGNvbmZpZy5sYXllckxpc3Q7CiAgICBfdGhpcy5fc3RvcmUgPSAoMCwgX3N0b3JlLmNyZWF0ZU1hcFN0b3JlKSgpOwogICAgX3RoaXMuX3N1YnNjcmlwdGlvbiA9IF90aGlzLmdldElucHV0JCgpLnN1YnNjcmliZShmdW5jdGlvbiAoaW5wdXQpIHsKICAgICAgcmV0dXJuIF90aGlzLm9uQ29udGFpbmVyU3RhdGVDaGFuZ2VkKGlucHV0KTsKICAgIH0pOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKE1hcEVtYmVkZGFibGUsIFt7CiAgICBrZXk6ICJnZXRJbnNwZWN0b3JBZGFwdGVycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zcGVjdG9yQWRhcHRlcnMoKSB7CiAgICAgIHJldHVybiAoMCwgX25vbl9zZXJpYWxpemFibGVfaW5zdGFuY2VzLmdldEluc3BlY3RvckFkYXB0ZXJzKSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbkNvbnRhaW5lclN0YXRlQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Db250YWluZXJTdGF0ZUNoYW5nZWQoY29udGFpbmVyU3RhdGUpIHsKICAgICAgaWYgKCFfbG9kYXNoLmRlZmF1bHQuaXNFcXVhbChjb250YWluZXJTdGF0ZS50aW1lUmFuZ2UsIHRoaXMuX3ByZXZUaW1lUmFuZ2UpIHx8ICFfbG9kYXNoLmRlZmF1bHQuaXNFcXVhbChjb250YWluZXJTdGF0ZS5xdWVyeSwgdGhpcy5fcHJldlF1ZXJ5KSB8fCAhKDAsIF9wdWJsaWMyLm9ubHlEaXNhYmxlZEZpbHRlcnNDaGFuZ2VkKShjb250YWluZXJTdGF0ZS5maWx0ZXJzLCB0aGlzLl9wcmV2RmlsdGVycykpIHsKICAgICAgICB0aGlzLl9kaXNwYXRjaFNldFF1ZXJ5KGNvbnRhaW5lclN0YXRlKTsKICAgICAgfQoKICAgICAgaWYgKCFfbG9kYXNoLmRlZmF1bHQuaXNFcXVhbChjb250YWluZXJTdGF0ZS5yZWZyZXNoQ29uZmlnLCB0aGlzLl9wcmV2UmVmcmVzaENvbmZpZykpIHsKICAgICAgICB0aGlzLl9kaXNwYXRjaFNldFJlZnJlc2hDb25maWcoY29udGFpbmVyU3RhdGUpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiX2Rpc3BhdGNoU2V0UXVlcnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kaXNwYXRjaFNldFF1ZXJ5KF9yZWYpIHsKICAgICAgdmFyIHF1ZXJ5ID0gX3JlZi5xdWVyeSwKICAgICAgICAgIHRpbWVSYW5nZSA9IF9yZWYudGltZVJhbmdlLAogICAgICAgICAgZmlsdGVycyA9IF9yZWYuZmlsdGVycywKICAgICAgICAgIHJlZnJlc2ggPSBfcmVmLnJlZnJlc2g7CiAgICAgIHRoaXMuX3ByZXZUaW1lUmFuZ2UgPSB0aW1lUmFuZ2U7CiAgICAgIHRoaXMuX3ByZXZRdWVyeSA9IHF1ZXJ5OwogICAgICB0aGlzLl9wcmV2RmlsdGVycyA9IGZpbHRlcnM7CgogICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX21hcF9hY3Rpb25zLnNldFF1ZXJ5KSh7CiAgICAgICAgZmlsdGVyczogZmlsdGVycy5maWx0ZXIoZnVuY3Rpb24gKGZpbHRlcikgewogICAgICAgICAgcmV0dXJuICFmaWx0ZXIubWV0YS5kaXNhYmxlZDsKICAgICAgICB9KSwKICAgICAgICBxdWVyeTogcXVlcnksCiAgICAgICAgdGltZUZpbHRlcnM6IHRpbWVSYW5nZSwKICAgICAgICByZWZyZXNoOiByZWZyZXNoCiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZGlzcGF0Y2hTZXRSZWZyZXNoQ29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGlzcGF0Y2hTZXRSZWZyZXNoQ29uZmlnKF9yZWYyKSB7CiAgICAgIHZhciByZWZyZXNoQ29uZmlnID0gX3JlZjIucmVmcmVzaENvbmZpZzsKICAgICAgdGhpcy5fcHJldlJlZnJlc2hDb25maWcgPSByZWZyZXNoQ29uZmlnOwoKICAgICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2goKDAsIF9tYXBfYWN0aW9ucy5zZXRSZWZyZXNoQ29uZmlnKSh7CiAgICAgICAgaXNQYXVzZWQ6IHJlZnJlc2hDb25maWcucGF1c2UsCiAgICAgICAgaW50ZXJ2YWw6IHJlZnJlc2hDb25maWcudmFsdWUKICAgICAgfSkpOwogICAgfQogICAgLyoqCiAgICAgKgogICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZG9tTm9kZQogICAgICogQHBhcmFtIHtDb250YWluZXJTdGF0ZX0gY29udGFpbmVyU3RhdGUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcihkb21Ob2RlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2goKDAsIF9ub25fc2VyaWFsaXphYmxlX2luc3RhbmNlcy5zZXRFdmVudEhhbmRsZXJzKSh0aGlzLl9ldmVudEhhbmRsZXJzKSk7CgogICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX3VpX2FjdGlvbnMuc2V0UmVhZE9ubHkpKHRydWUpKTsKCiAgICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKCgwLCBfbWFwX2FjdGlvbnMuZGlzYWJsZVNjcm9sbFpvb20pKCkpOwoKICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5oYXModGhpcy5pbnB1dCwgJ2lzTGF5ZXJUT0NPcGVuJykpIHsKICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX3VpX2FjdGlvbnMuc2V0SXNMYXllclRPQ09wZW4pKHRoaXMuaW5wdXQuaXNMYXllclRPQ09wZW4pKTsKICAgICAgfQoKICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5oYXModGhpcy5pbnB1dCwgJ29wZW5UT0NEZXRhaWxzJykpIHsKICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX3VpX2FjdGlvbnMuc2V0T3BlblRPQ0RldGFpbHMpKHRoaXMuaW5wdXQub3BlblRPQ0RldGFpbHMpKTsKICAgICAgfQoKICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5oYXModGhpcy5pbnB1dCwgJ2Rpc2FibGVJbnRlcmFjdGl2ZScpICYmIHRoaXMuaW5wdXQuZGlzYWJsZUludGVyYWN0aXZlKSB7CiAgICAgICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2goKDAsIF9tYXBfYWN0aW9ucy5kaXNhYmxlSW50ZXJhY3RpdmUpKHRoaXMuaW5wdXQuZGlzYWJsZUludGVyYWN0aXZlKSk7CiAgICAgIH0KCiAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHQuaGFzKHRoaXMuaW5wdXQsICdkaXNhYmxlVG9vbHRpcENvbnRyb2wnKSAmJiB0aGlzLmlucHV0LmRpc2FibGVUb29sdGlwQ29udHJvbCkgewogICAgICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKCgwLCBfbWFwX2FjdGlvbnMuZGlzYWJsZVRvb2x0aXBDb250cm9sKSh0aGlzLmlucHV0LmRpc2FibGVUb29sdGlwQ29udHJvbCkpOwogICAgICB9CgogICAgICBpZiAoX2xvZGFzaC5kZWZhdWx0Lmhhcyh0aGlzLmlucHV0LCAnaGlkZVRvb2xiYXJPdmVybGF5JykgJiYgdGhpcy5pbnB1dC5oaWRlVG9vbGJhck92ZXJsYXkpIHsKICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX21hcF9hY3Rpb25zLmhpZGVUb29sYmFyT3ZlcmxheSkodGhpcy5pbnB1dC5oaWRlVG9vbGJhck92ZXJsYXkpKTsKICAgICAgfQoKICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5oYXModGhpcy5pbnB1dCwgJ2hpZGVMYXllckNvbnRyb2wnKSAmJiB0aGlzLmlucHV0LmhpZGVMYXllckNvbnRyb2wpIHsKICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX21hcF9hY3Rpb25zLmhpZGVMYXllckNvbnRyb2wpKHRoaXMuaW5wdXQuaGlkZUxheWVyQ29udHJvbCkpOwogICAgICB9CgogICAgICBpZiAoX2xvZGFzaC5kZWZhdWx0Lmhhcyh0aGlzLmlucHV0LCAnaGlkZVZpZXdDb250cm9sJykgJiYgdGhpcy5pbnB1dC5oaWRlVmlld0NvbnRyb2wpIHsKICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX21hcF9hY3Rpb25zLmhpZGVWaWV3Q29udHJvbCkodGhpcy5pbnB1dC5oaWRlVmlld0NvbnRyb2wpKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaW5wdXQubWFwQ2VudGVyKSB7CiAgICAgICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2goKDAsIF9tYXBfYWN0aW9ucy5zZXRHb3RvV2l0aENlbnRlcikoewogICAgICAgICAgbGF0OiB0aGlzLmlucHV0Lm1hcENlbnRlci5sYXQsCiAgICAgICAgICBsb246IHRoaXMuaW5wdXQubWFwQ2VudGVyLmxvbiwKICAgICAgICAgIHpvb206IHRoaXMuaW5wdXQubWFwQ2VudGVyLnpvb20KICAgICAgICB9KSk7CiAgICAgIH0KCiAgICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKCgwLCBfbWFwX2FjdGlvbnMucmVwbGFjZUxheWVyTGlzdCkodGhpcy5fbGF5ZXJMaXN0KSk7CgogICAgICBpZiAodGhpcy5pbnB1dC5oaWRkZW5MYXllcnMpIHsKICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX21hcF9hY3Rpb25zLnNldEhpZGRlbkxheWVycykodGhpcy5pbnB1dC5oaWRkZW5MYXllcnMpKTsKICAgICAgfQoKICAgICAgdGhpcy5fZGlzcGF0Y2hTZXRRdWVyeSh0aGlzLmlucHV0KTsKCiAgICAgIHRoaXMuX2Rpc3BhdGNoU2V0UmVmcmVzaENvbmZpZyh0aGlzLmlucHV0KTsKCiAgICAgIHRoaXMuX2RvbU5vZGUgPSBkb21Ob2RlOwogICAgICAoMCwgX3JlYWN0RG9tLnJlbmRlcikoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSZWR1eC5Qcm92aWRlciwgewogICAgICAgIHN0b3JlOiB0aGlzLl9zdG9yZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9pMThuLkkxOG5Db250ZXh0LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9naXNfbWFwLkdpc01hcCwgewogICAgICAgIGFkZEZpbHRlcnM6IHRoaXMuaW5wdXQuaGlkZUZpbHRlckFjdGlvbnMgPyBudWxsIDogdGhpcy5hZGRGaWx0ZXJzLAogICAgICAgIHJlbmRlclRvb2x0aXBDb250ZW50OiB0aGlzLl9yZW5kZXJUb29sdGlwQ29udGVudAogICAgICB9KSkpLCB0aGlzLl9kb21Ob2RlKTsKICAgICAgdGhpcy5fdW5zdWJzY3JpYmVGcm9tU3RvcmUgPSB0aGlzLl9zdG9yZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5faGFuZGxlU3RvcmVDaGFuZ2VzKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldExheWVyTGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TGF5ZXJMaXN0KGxheWVyTGlzdCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHNldExheWVyTGlzdCQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdGhpcy5fbGF5ZXJMaXN0ID0gbGF5ZXJMaXN0OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fc3RvcmUuZGlzcGF0Y2goKDAsIF9tYXBfYWN0aW9ucy5yZXBsYWNlTGF5ZXJMaXN0KSh0aGlzLl9sYXllckxpc3QpKSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQuc2VudCk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImRlc3Ryb3kiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKE1hcEVtYmVkZGFibGUucHJvdG90eXBlKSwgImRlc3Ryb3kiLCB0aGlzKS5jYWxsKHRoaXMpOwoKICAgICAgaWYgKHRoaXMuX3Vuc3Vic2NyaWJlRnJvbVN0b3JlKSB7CiAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmVGcm9tU3RvcmUoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX2RvbU5vZGUpIHsKICAgICAgICAoMCwgX3JlYWN0RG9tLnVubW91bnRDb21wb25lbnRBdE5vZGUpKHRoaXMuX2RvbU5vZGUpOwogICAgICB9CgogICAgICBpZiAodGhpcy5fc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbG9hZCgpIHsKICAgICAgdGhpcy5fZGlzcGF0Y2hTZXRRdWVyeSh7CiAgICAgICAgcXVlcnk6IHRoaXMuX3ByZXZRdWVyeSwKICAgICAgICB0aW1lUmFuZ2U6IHRoaXMuX3ByZXZUaW1lUmFuZ2UsCiAgICAgICAgZmlsdGVyczogdGhpcy5fcHJldkZpbHRlcnMsCiAgICAgICAgcmVmcmVzaDogdHJ1ZQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaGFuZGxlU3RvcmVDaGFuZ2VzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlU3RvcmVDaGFuZ2VzKCkgewogICAgICB2YXIgY2VudGVyID0gKDAsIF9tYXBfc2VsZWN0b3JzLmdldE1hcENlbnRlcikodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSk7CiAgICAgIHZhciB6b29tID0gKDAsIF9tYXBfc2VsZWN0b3JzLmdldE1hcFpvb20pKHRoaXMuX3N0b3JlLmdldFN0YXRlKCkpOwogICAgICB2YXIgbWFwQ2VudGVyID0gdGhpcy5pbnB1dC5tYXBDZW50ZXIgfHwge307CgogICAgICBpZiAoIW1hcENlbnRlciB8fCBtYXBDZW50ZXIubGF0ICE9PSBjZW50ZXIubGF0IHx8IG1hcENlbnRlci5sb24gIT09IGNlbnRlci5sb24gfHwgbWFwQ2VudGVyLnpvb20gIT09IHpvb20pIHsKICAgICAgICB0aGlzLnVwZGF0ZUlucHV0KHsKICAgICAgICAgIG1hcENlbnRlcjogewogICAgICAgICAgICBsYXQ6IGNlbnRlci5sYXQsCiAgICAgICAgICAgIGxvbjogY2VudGVyLmxvbiwKICAgICAgICAgICAgem9vbTogem9vbQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgaXNMYXllclRPQ09wZW4gPSAoMCwgX3VpX3NlbGVjdG9ycy5nZXRJc0xheWVyVE9DT3BlbikodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSk7CgogICAgICBpZiAodGhpcy5pbnB1dC5pc0xheWVyVE9DT3BlbiAhPT0gaXNMYXllclRPQ09wZW4pIHsKICAgICAgICB0aGlzLnVwZGF0ZUlucHV0KHsKICAgICAgICAgIGlzTGF5ZXJUT0NPcGVuOiBpc0xheWVyVE9DT3BlbgogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgb3BlblRPQ0RldGFpbHMgPSAoMCwgX3VpX3NlbGVjdG9ycy5nZXRPcGVuVE9DRGV0YWlscykodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSk7CgogICAgICBpZiAoIV9sb2Rhc2guZGVmYXVsdC5pc0VxdWFsKHRoaXMuaW5wdXQub3BlblRPQ0RldGFpbHMsIG9wZW5UT0NEZXRhaWxzKSkgewogICAgICAgIHRoaXMudXBkYXRlSW5wdXQoewogICAgICAgICAgb3BlblRPQ0RldGFpbHM6IG9wZW5UT0NEZXRhaWxzCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBoaWRkZW5MYXllcklkcyA9ICgwLCBfbWFwX3NlbGVjdG9ycy5nZXRIaWRkZW5MYXllcklkcykodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSk7CgogICAgICBpZiAoIV9sb2Rhc2guZGVmYXVsdC5pc0VxdWFsKHRoaXMuaW5wdXQuaGlkZGVuTGF5ZXJzLCBoaWRkZW5MYXllcklkcykpIHsKICAgICAgICB0aGlzLnVwZGF0ZUlucHV0KHsKICAgICAgICAgIGhpZGRlbkxheWVyczogaGlkZGVuTGF5ZXJJZHMKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIE1hcEVtYmVkZGFibGU7Cn0oX3B1YmxpYy5FbWJlZGRhYmxlKTsKCmV4cG9ydHMuTWFwRW1iZWRkYWJsZSA9IE1hcEVtYmVkZGFibGU7"},null]}