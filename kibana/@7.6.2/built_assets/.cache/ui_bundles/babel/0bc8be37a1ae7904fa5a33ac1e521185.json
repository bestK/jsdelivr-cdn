{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/graph/public/services/persistence/deserialize.js","dependencies":[{"path":"x-pack/legacy/plugins/graph/public/services/persistence/deserialize.js","mtime":1585205044245},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmxvb2t1cEluZGV4UGF0dGVybiA9IGxvb2t1cEluZGV4UGF0dGVybjsKZXhwb3J0cy5tYXBGaWVsZHMgPSBtYXBGaWVsZHM7CmV4cG9ydHMubWFrZU5vZGVJZCA9IG1ha2VOb2RlSWQ7CmV4cG9ydHMuc2F2ZWRXb3Jrc3BhY2VUb0FwcFN0YXRlID0gc2F2ZWRXb3Jrc3BhY2VUb0FwcFN0YXRlOwoKdmFyIF9vdXRsaW5rX2VuY29kZXJzID0gcmVxdWlyZSgiLi4vLi4vaGVscGVycy9vdXRsaW5rX2VuY29kZXJzIik7Cgp2YXIgX3N0eWxlX2Nob2ljZXMgPSByZXF1aXJlKCIuLi8uLi9oZWxwZXJzL3N0eWxlX2Nob2ljZXMiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3BsdWdpbnMvZGF0YS9wdWJsaWMiKTsKCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7CiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307CgogIHZhciB0YXJnZXQgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKTsKCiAgdmFyIGtleSwgaTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOwoKICAgIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGtleSA9IHNvdXJjZVN5bWJvbEtleXNbaV07CiAgICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7CiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7CiAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7CiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307CiAgdmFyIHRhcmdldCA9IHt9OwogIHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsKICB2YXIga2V5LCBpOwoKICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykgewogICAga2V5ID0gc291cmNlS2V5c1tpXTsKICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7CiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKdmFyIGRlZmF1bHRBZHZhbmNlZFNldHRpbmdzID0gewogIHVzZVNpZ25pZmljYW5jZTogdHJ1ZSwKICBzYW1wbGVTaXplOiAyMDAwLAogIHRpbWVvdXRNaWxsaXM6IDUwMDAsCiAgbWF4VmFsdWVzUGVyRG9jOiAxLAogIG1pbkRvY0NvdW50OiAzCn07CgpmdW5jdGlvbiBkZXNlcmlhbGl6ZVVybFRlbXBsYXRlKF9yZWYpIHsKICB2YXIgZW5jb2RlcklEID0gX3JlZi5lbmNvZGVySUQsCiAgICAgIGljb25DbGFzcyA9IF9yZWYuaWNvbkNsYXNzLAogICAgICBzZXJpYWxpemFibGVQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbImVuY29kZXJJRCIsICJpY29uQ2xhc3MiXSk7CgogIHZhciBlbmNvZGVyID0gX291dGxpbmtfZW5jb2RlcnMub3V0bGlua0VuY29kZXJzLmZpbmQoZnVuY3Rpb24gKG91dGxpbmtFbmNvZGVyKSB7CiAgICByZXR1cm4gb3V0bGlua0VuY29kZXIuaWQgPT09IGVuY29kZXJJRDsKICB9KTsKCiAgaWYgKCFlbmNvZGVyKSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgdGVtcGxhdGUgPSBfb2JqZWN0U3ByZWFkKHt9LCBzZXJpYWxpemFibGVQcm9wcywgewogICAgZW5jb2RlcjogZW5jb2RlciwKICAgIGljb246IG51bGwKICB9KTsKCiAgaWYgKGljb25DbGFzcykgewogICAgdmFyIGljb25DYW5kaWRhdGUgPSBfc3R5bGVfY2hvaWNlcy51cmxUZW1wbGF0ZUljb25DaG9pY2VzQnlDbGFzc1tpY29uQ2xhc3NdOwogICAgdGVtcGxhdGUuaWNvbiA9IGljb25DYW5kaWRhdGUgPyBpY29uQ2FuZGlkYXRlIDogbnVsbDsKICB9CgogIHJldHVybiB0ZW1wbGF0ZTsKfSAvLyByZXR1cm5zIHRoZSBpZCBvZiB0aGUgaW5kZXggcGF0dGVybiwgbG9va3VwIGlzIGRvbmUgaW4gYXBwLmpzCgoKZnVuY3Rpb24gbG9va3VwSW5kZXhQYXR0ZXJuKHNhdmVkV29ya3NwYWNlLCBpbmRleFBhdHRlcm5zKSB7CiAgdmFyIHNlcmlhbGl6ZWRXb3Jrc3BhY2VTdGF0ZSA9IEpTT04ucGFyc2Uoc2F2ZWRXb3Jrc3BhY2Uud3NTdGF0ZSk7CiAgdmFyIGluZGV4UGF0dGVybiA9IGluZGV4UGF0dGVybnMuZmluZChmdW5jdGlvbiAocGF0dGVybikgewogICAgcmV0dXJuIHBhdHRlcm4uYXR0cmlidXRlcy50aXRsZSA9PT0gc2VyaWFsaXplZFdvcmtzcGFjZVN0YXRlLmluZGV4UGF0dGVybjsKICB9KTsKCiAgaWYgKGluZGV4UGF0dGVybikgewogICAgcmV0dXJuIGluZGV4UGF0dGVybjsKICB9Cn0gLy8gcmV0dXJucyBhbGwgZ3JhcGggZmllbGRzIG1hcHBlZCBvdXQgb2YgdGhlIGluZGV4IHBhdHRlcm4KCgpmdW5jdGlvbiBtYXBGaWVsZHMoaW5kZXhQYXR0ZXJuKSB7CiAgdmFyIGJsb2NrZWRGaWVsZE5hbWVzID0gWydfaWQnLCAnX2luZGV4JywgJ19zY29yZScsICdfc291cmNlJywgJ190eXBlJ107CiAgdmFyIGRlZmF1bHRIb3BTaXplID0gNTsKICByZXR1cm4gaW5kZXhQYXR0ZXJuLmdldE5vblNjcmlwdGVkRmllbGRzKCkuZmlsdGVyKGZ1bmN0aW9uIChmaWVsZCkgewogICAgcmV0dXJuICFibG9ja2VkRmllbGROYW1lcy5pbmNsdWRlcyhmaWVsZC5uYW1lKSAmJiAhKDAsIF9wdWJsaWMuaXNOZXN0ZWRGaWVsZCkoZmllbGQpOwogIH0pLm1hcChmdW5jdGlvbiAoZmllbGQsIGluZGV4KSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiBmaWVsZC5uYW1lLAogICAgICBob3BTaXplOiBkZWZhdWx0SG9wU2l6ZSwKICAgICAgbGFzdFZhbGlkSG9wU2l6ZTogZGVmYXVsdEhvcFNpemUsCiAgICAgIGljb246ICgwLCBfc3R5bGVfY2hvaWNlcy5nZXRTdWl0YWJsZUljb24pKGZpZWxkLm5hbWUpLAogICAgICBjb2xvcjogX3N0eWxlX2Nob2ljZXMuY29sb3JDaG9pY2VzW2luZGV4ICUgX3N0eWxlX2Nob2ljZXMuY29sb3JDaG9pY2VzLmxlbmd0aF0sCiAgICAgIHNlbGVjdGVkOiBmYWxzZSwKICAgICAgdHlwZTogZmllbGQudHlwZSwKICAgICAgYWdncmVnYXRhYmxlOiBCb29sZWFuKGZpZWxkLmFnZ3JlZ2F0YWJsZSkKICAgIH07CiAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgaWYgKGEubmFtZSA8IGIubmFtZSkgewogICAgICByZXR1cm4gLTE7CiAgICB9IGVsc2UgaWYgKGEubmFtZSA+IGIubmFtZSkgewogICAgICByZXR1cm4gMTsKICAgIH0KCiAgICByZXR1cm4gMDsKICB9KTsKfQoKZnVuY3Rpb24gZ2V0RmllbGRzV2l0aFdvcmtzcGFjZVNldHRpbmdzKGluZGV4UGF0dGVybiwgc2VsZWN0ZWRGaWVsZHMpIHsKICB2YXIgYWxsRmllbGRzID0gbWFwRmllbGRzKGluZGV4UGF0dGVybik7IC8vIG1lcmdlIGluIHNlbGVjdGVkIGluZm9ybWF0aW9uIGludG8gYWxsIGZpZWxkcwoKICBzZWxlY3RlZEZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChzZXJpYWxpemVkRmllbGQpIHsKICAgIHZhciB3b3Jrc3BhY2VGaWVsZCA9IGFsbEZpZWxkcy5maW5kKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICByZXR1cm4gZmllbGQubmFtZSA9PT0gc2VyaWFsaXplZEZpZWxkLm5hbWU7CiAgICB9KTsKCiAgICBpZiAoIXdvcmtzcGFjZUZpZWxkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB3b3Jrc3BhY2VGaWVsZC5ob3BTaXplID0gc2VyaWFsaXplZEZpZWxkLmhvcFNpemU7CiAgICB3b3Jrc3BhY2VGaWVsZC5sYXN0VmFsaWRIb3BTaXplID0gc2VyaWFsaXplZEZpZWxkLmxhc3RWYWxpZEhvcFNpemU7CiAgICB3b3Jrc3BhY2VGaWVsZC5jb2xvciA9IHNlcmlhbGl6ZWRGaWVsZC5jb2xvcjsKICAgIHdvcmtzcGFjZUZpZWxkLmljb24gPSBfc3R5bGVfY2hvaWNlcy5pY29uQ2hvaWNlc0J5Q2xhc3Nbc2VyaWFsaXplZEZpZWxkLmljb25DbGFzc107CiAgICB3b3Jrc3BhY2VGaWVsZC5zZWxlY3RlZCA9IHRydWU7CiAgfSk7CiAgcmV0dXJuIGFsbEZpZWxkczsKfQoKZnVuY3Rpb24gZ2V0QmxhY2tsaXN0ZWROb2RlcyhzZXJpYWxpemVkV29ya3NwYWNlU3RhdGUsIGFsbEZpZWxkcykgewogIHJldHVybiBzZXJpYWxpemVkV29ya3NwYWNlU3RhdGUuYmxhY2tsaXN0Lm1hcChmdW5jdGlvbiAoc2VyaWFsaXplZE5vZGUpIHsKICAgIHZhciBjdXJyZW50RmllbGQgPSBhbGxGaWVsZHMuZmluZChmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgcmV0dXJuIGZpZWxkLm5hbWUgPT09IHNlcmlhbGl6ZWROb2RlLmZpZWxkOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICB4OiAwLAogICAgICB5OiAwLAogICAgICBsYWJlbDogc2VyaWFsaXplZE5vZGUubGFiZWwsCiAgICAgIGNvbG9yOiBzZXJpYWxpemVkTm9kZS5jb2xvciwKICAgICAgaWNvbjogY3VycmVudEZpZWxkLmljb24sCiAgICAgIHBhcmVudDogbnVsbCwKICAgICAgc2NhbGVkU2l6ZTogMCwKICAgICAgZGF0YTogewogICAgICAgIGZpZWxkOiBzZXJpYWxpemVkTm9kZS5maWVsZCwKICAgICAgICB0ZXJtOiBzZXJpYWxpemVkTm9kZS50ZXJtCiAgICAgIH0KICAgIH07CiAgfSk7Cn0KCmZ1bmN0aW9uIHJlc29sdmVHcm91cHMobm9kZXMsIHdvcmtzcGFjZUluc3RhbmNlKSB7CiAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjIpIHsKICAgIHZhciBmaWVsZCA9IF9yZWYyLmZpZWxkLAogICAgICAgIHRlcm0gPSBfcmVmMi50ZXJtLAogICAgICAgIHggPSBfcmVmMi54LAogICAgICAgIHkgPSBfcmVmMi55LAogICAgICAgIHBhcmVudCA9IF9yZWYyLnBhcmVudDsKICAgIHZhciBub2RlSWQgPSBtYWtlTm9kZUlkKGZpZWxkLCB0ZXJtKTsKICAgIHZhciB3b3Jrc3BhY2VOb2RlID0gd29ya3NwYWNlSW5zdGFuY2Uubm9kZXNNYXBbbm9kZUlkXTsKICAgIHdvcmtzcGFjZU5vZGUueCA9IHg7CiAgICB3b3Jrc3BhY2VOb2RlLnkgPSB5OwoKICAgIGlmIChwYXJlbnQgIT09IG51bGwpIHsKICAgICAgdmFyIF9ub2RlcyRwYXJlbnQgPSBub2Rlc1twYXJlbnRdLAogICAgICAgICAgcGFyZW50RmllbGQgPSBfbm9kZXMkcGFyZW50LmZpZWxkLAogICAgICAgICAgcGFyZW50VGVybSA9IF9ub2RlcyRwYXJlbnQudGVybTsKICAgICAgdmFyIHBhcmVudElkID0gbWFrZU5vZGVJZChwYXJlbnRGaWVsZCwgcGFyZW50VGVybSk7CiAgICAgIHdvcmtzcGFjZU5vZGUucGFyZW50ID0gd29ya3NwYWNlSW5zdGFuY2Uubm9kZXNNYXBbcGFyZW50SWRdOwogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBnZXROb2Rlc0FuZEVkZ2VzKHBlcnNpc3RlZFdvcmtzcGFjZVN0YXRlLCBhbGxGaWVsZHMpIHsKICByZXR1cm4gewogICAgbm9kZXM6IHBlcnNpc3RlZFdvcmtzcGFjZVN0YXRlLnZlcnRpY2VzLm1hcChmdW5jdGlvbiAoc2VyaWFsaXplZE5vZGUpIHsKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHNlcmlhbGl6ZWROb2RlLCB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIGljb246IGFsbEZpZWxkcy5maW5kKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgICAgcmV0dXJuIGZpZWxkLm5hbWUgPT09IHNlcmlhbGl6ZWROb2RlLmZpZWxkOwogICAgICAgIH0pLmljb24sCiAgICAgICAgZGF0YTogewogICAgICAgICAgZmllbGQ6IHNlcmlhbGl6ZWROb2RlLmZpZWxkLAogICAgICAgICAgdGVybTogc2VyaWFsaXplZE5vZGUudGVybQogICAgICAgIH0KICAgICAgfSk7CiAgICB9KSwKICAgIGVkZ2VzOiBwZXJzaXN0ZWRXb3Jrc3BhY2VTdGF0ZS5saW5rcy5tYXAoZnVuY3Rpb24gKHNlcmlhbGl6ZWRFZGdlKSB7CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzZXJpYWxpemVkRWRnZSwgewogICAgICAgIGlkOiAnJwogICAgICB9KTsKICAgIH0pCiAgfTsKfQoKZnVuY3Rpb24gbWFrZU5vZGVJZChmaWVsZCwgdGVybSkgewogIHJldHVybiBmaWVsZCArICcuLicgKyB0ZXJtOwp9CgpmdW5jdGlvbiBzYXZlZFdvcmtzcGFjZVRvQXBwU3RhdGUoc2F2ZWRXb3Jrc3BhY2UsIGluZGV4UGF0dGVybiwgd29ya3NwYWNlSW5zdGFuY2UpIHsKICB2YXIgX3dvcmtzcGFjZUluc3RhbmNlJGJsOwoKICB2YXIgcGVyc2lzdGVkV29ya3NwYWNlU3RhdGUgPSBKU09OLnBhcnNlKHNhdmVkV29ya3NwYWNlLndzU3RhdGUpOyAvLyA9PT09PT09PT09PT09PT09PT0gdXJsIHRlbXBsYXRlcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKICB2YXIgdXJsVGVtcGxhdGVzID0gcGVyc2lzdGVkV29ya3NwYWNlU3RhdGUudXJsVGVtcGxhdGVzLm1hcChkZXNlcmlhbGl6ZVVybFRlbXBsYXRlKS5maWx0ZXIoZnVuY3Rpb24gKHRlbXBsYXRlKSB7CiAgICByZXR1cm4gQm9vbGVhbih0ZW1wbGF0ZSk7CiAgfSk7IC8vID09PT09PT09PT09PT09PT09PSBmaWVsZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgdmFyIGFsbEZpZWxkcyA9IGdldEZpZWxkc1dpdGhXb3Jrc3BhY2VTZXR0aW5ncyhpbmRleFBhdHRlcm4sIHBlcnNpc3RlZFdvcmtzcGFjZVN0YXRlLnNlbGVjdGVkRmllbGRzKTsKICB2YXIgc2VsZWN0ZWRGaWVsZHMgPSBhbGxGaWVsZHMuZmlsdGVyKGZ1bmN0aW9uIChmaWVsZCkgewogICAgcmV0dXJuIGZpZWxkLnNlbGVjdGVkOwogIH0pOwogIHdvcmtzcGFjZUluc3RhbmNlLm9wdGlvbnMudmVydGV4X2ZpZWxkcyA9IHNlbGVjdGVkRmllbGRzOyAvLyA9PT09PT09PT09PT09PT09PT0gYWR2YW5jZWQgc2V0dGluZ3MgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgdmFyIGFkdmFuY2VkU2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0QWR2YW5jZWRTZXR0aW5ncywgcGVyc2lzdGVkV29ya3NwYWNlU3RhdGUuZXhwbG9yZUNvbnRyb2xzKTsKCiAgaWYgKGFkdmFuY2VkU2V0dGluZ3Muc2FtcGxlRGl2ZXJzaXR5RmllbGQpIHsKICAgIC8vIHJlc3RvcmUgcmVmZXJlbmNlIHRvIHNhbXBsZSBkaXZlcnNpdHkgZmllbGQKICAgIHZhciBzZXJpYWxpemVkRmllbGQgPSBhZHZhbmNlZFNldHRpbmdzLnNhbXBsZURpdmVyc2l0eUZpZWxkOwogICAgYWR2YW5jZWRTZXR0aW5ncy5zYW1wbGVEaXZlcnNpdHlGaWVsZCA9IGFsbEZpZWxkcy5maW5kKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICByZXR1cm4gZmllbGQubmFtZSA9PT0gc2VyaWFsaXplZEZpZWxkLm5hbWU7CiAgICB9KTsKICB9CgogIHdvcmtzcGFjZUluc3RhbmNlLm9wdGlvbnMuZXhwbG9yZUNvbnRyb2xzID0gYWR2YW5jZWRTZXR0aW5nczsgLy8gPT09PT09PT09PT09PT09PT09IG5vZGVzIGFuZCBlZGdlcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKICB2YXIgZ3JhcGggPSBnZXROb2Rlc0FuZEVkZ2VzKHBlcnNpc3RlZFdvcmtzcGFjZVN0YXRlLCBhbGxGaWVsZHMpOwogIHdvcmtzcGFjZUluc3RhbmNlLm1lcmdlR3JhcGgoZ3JhcGgpOwogIHJlc29sdmVHcm91cHMocGVyc2lzdGVkV29ya3NwYWNlU3RhdGUudmVydGljZXMsIHdvcmtzcGFjZUluc3RhbmNlKTsgLy8gPT09PT09PT09PT09PT09PT09IGJsYWNrbGlzdCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKICB2YXIgYmxhY2tsaXN0ZWROb2RlcyA9IGdldEJsYWNrbGlzdGVkTm9kZXMocGVyc2lzdGVkV29ya3NwYWNlU3RhdGUsIGFsbEZpZWxkcyk7CgogIChfd29ya3NwYWNlSW5zdGFuY2UkYmwgPSB3b3Jrc3BhY2VJbnN0YW5jZS5ibGFja2xpc3RlZE5vZGVzKS5wdXNoLmFwcGx5KF93b3Jrc3BhY2VJbnN0YW5jZSRibCwgX3RvQ29uc3VtYWJsZUFycmF5KGJsYWNrbGlzdGVkTm9kZXMpKTsKCiAgcmV0dXJuIHsKICAgIHVybFRlbXBsYXRlczogdXJsVGVtcGxhdGVzLAogICAgYWR2YW5jZWRTZXR0aW5nczogYWR2YW5jZWRTZXR0aW5ncywKICAgIGFsbEZpZWxkczogYWxsRmllbGRzCiAgfTsKfQ=="},null]}