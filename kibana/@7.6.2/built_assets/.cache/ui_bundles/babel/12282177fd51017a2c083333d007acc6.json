{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/embeddable/map_embeddable_factory.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/embeddable/map_embeddable_factory.js","mtime":1585205045301},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLk1hcEVtYmVkZGFibGVGYWN0b3J5ID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfY2hyb21lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJ1aS9jaHJvbWUiKSk7Cgp2YXIgX2NhcGFiaWxpdGllcyA9IHJlcXVpcmUoInVpL2NhcGFiaWxpdGllcyIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX3B1YmxpYyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9sZWdhY3kvY29yZV9wbHVnaW5zL2VtYmVkZGFibGVfYXBpL3B1YmxpYy9ucF9yZWFkeS9wdWJsaWMiKTsKCnZhciBfbGVnYWN5ID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xlZ2FjeS9jb3JlX3BsdWdpbnMvZW1iZWRkYWJsZV9hcGkvcHVibGljL25wX3JlYWR5L3B1YmxpYy9sZWdhY3kiKTsKCnZhciBfbWFwX2VtYmVkZGFibGUgPSByZXF1aXJlKCIuL21hcF9lbWJlZGRhYmxlIik7Cgp2YXIgX2tpYmFuYV9zZXJ2aWNlcyA9IHJlcXVpcmUoIi4uL2tpYmFuYV9zZXJ2aWNlcyIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX3N0b3JlID0gcmVxdWlyZSgiLi4vcmVkdWNlcnMvc3RvcmUiKTsKCnZhciBfbWFwX2FjdGlvbnMgPSByZXF1aXJlKCIuLi9hY3Rpb25zL21hcF9hY3Rpb25zIik7Cgp2YXIgX21hcF9zZWxlY3RvcnMgPSByZXF1aXJlKCIuLi9zZWxlY3RvcnMvbWFwX3NlbGVjdG9ycyIpOwoKdmFyIF9nZXRfaW5pdGlhbF9sYXllcnMgPSByZXF1aXJlKCIuLi9hbmd1bGFyL2dldF9pbml0aWFsX2xheWVycyIpOwoKdmFyIF9tZXJnZV9pbnB1dF93aXRoX3NhdmVkX21hcCA9IHJlcXVpcmUoIi4vbWVyZ2VfaW5wdXRfd2l0aF9zYXZlZF9tYXAiKTsKCnJlcXVpcmUoIi4uL2FuZ3VsYXIvc2VydmljZXMvZ2lzX21hcF9zYXZlZF9vYmplY3RfbG9hZGVyIik7CgpyZXF1aXJlKCJ1aS92aXMvbWFwL3NlcnZpY2Vfc2V0dGluZ3MiKTsKCnZhciBfcGx1Z2luID0gcmVxdWlyZSgiLi4vcGx1Z2luIik7Cgp2YXIgX25ld19wbGF0Zm9ybSA9IHJlcXVpcmUoInVpL25ld19wbGF0Zm9ybSIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9Cgp2YXIgTWFwRW1iZWRkYWJsZUZhY3RvcnkgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfRW1iZWRkYWJsZUZhY3RvcnkpIHsKICBfaW5oZXJpdHMoTWFwRW1iZWRkYWJsZUZhY3RvcnksIF9FbWJlZGRhYmxlRmFjdG9yeSk7CgogIGZ1bmN0aW9uIE1hcEVtYmVkZGFibGVGYWN0b3J5KCkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNYXBFbWJlZGRhYmxlRmFjdG9yeSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoTWFwRW1iZWRkYWJsZUZhY3RvcnkpLmNhbGwodGhpcywgewogICAgICBzYXZlZE9iamVjdE1ldGFEYXRhOiB7CiAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMubWFwU2F2ZWRPYmplY3RMYWJlbCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTWFwJwogICAgICAgIH0pLAogICAgICAgIHR5cGU6IF9jb25zdGFudHMuTUFQX1NBVkVEX09CSkVDVF9UWVBFLAogICAgICAgIGdldEljb25Gb3JTYXZlZE9iamVjdDogZnVuY3Rpb24gZ2V0SWNvbkZvclNhdmVkT2JqZWN0KCkgewogICAgICAgICAgcmV0dXJuIF9jb25zdGFudHMuQVBQX0lDT047CiAgICAgICAgfQogICAgICB9CiAgICB9KSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidHlwZSIsIF9jb25zdGFudHMuTUFQX1NBVkVEX09CSkVDVF9UWVBFKTsKCiAgICAoMCwgX3BsdWdpbi5iaW5kU2V0dXBDb3JlQW5kUGx1Z2lucykoX25ld19wbGF0Zm9ybS5ucFNldHVwLmNvcmUsIF9uZXdfcGxhdGZvcm0ubnBTZXR1cC5wbHVnaW5zKTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhNYXBFbWJlZGRhYmxlRmFjdG9yeSwgW3sKICAgIGtleTogImlzRWRpdGFibGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzRWRpdGFibGUoKSB7CiAgICAgIHJldHVybiBfY2FwYWJpbGl0aWVzLmNhcGFiaWxpdGllcy5nZXQoKS5tYXBzLnNhdmU7CiAgICB9IC8vIE5vdCBzdXBwb3J0ZWQgeWV0IGZvciBtYXBzIHR5cGVzLgoKICB9LCB7CiAgICBrZXk6ICJjYW5DcmVhdGVOZXciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhbkNyZWF0ZU5ldygpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogImdldERpc3BsYXlOYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREaXNwbGF5TmFtZSgpIHsKICAgICAgcmV0dXJuIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLmVtYmVkZGFibGVEaXNwbGF5TmFtZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ21hcCcKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2dldEluZGV4UGF0dGVybnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRJbmRleFBhdHRlcm5zKGxheWVyTGlzdCkgewogICAgICB2YXIgc3RvcmUsIHF1ZXJ5YWJsZUluZGV4UGF0dGVybklkcywgcHJvbWlzZXMsIGluZGV4UGF0dGVybnM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2dldEluZGV4UGF0dGVybnMkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIC8vIE5lZWQgdG8gZXh0cmFjdCBsYXllckxpc3QgZnJvbSBzdG9yZSB0byBnZXQgcXVlcnlhYmxlIGluZGV4IHBhdHRlcm4gaWRzCiAgICAgICAgICAgICAgc3RvcmUgPSAoMCwgX3N0b3JlLmNyZWF0ZU1hcFN0b3JlKSgpOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTsKICAgICAgICAgICAgICBsYXllckxpc3QuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXJEZXNjcmlwdG9yKSB7CiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgX21hcF9hY3Rpb25zLmFkZExheWVyV2l0aG91dERhdGFTeW5jKShsYXllckRlc2NyaXB0b3IpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBxdWVyeWFibGVJbmRleFBhdHRlcm5JZHMgPSAoMCwgX21hcF9zZWxlY3RvcnMuZ2V0UXVlcnlhYmxlVW5pcXVlSW5kZXhQYXR0ZXJuSWRzKShzdG9yZS5nZXRTdGF0ZSgpKTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMubWFwRW1iZWRkYWJsZUZhY3RvcnkuaW52YWxpZExheWVyTGlzdCcsIHsKICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVW5hYmxlIHRvIGxvYWQgbWFwLCBtYWxmb3JtZWQgbGF5ZXIgbGlzdCcKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgcHJvbWlzZXMgPSBxdWVyeWFibGVJbmRleFBhdHRlcm5JZHMubWFwKGZ1bmN0aW9uIF9jYWxsZWUoaW5kZXhQYXR0ZXJuSWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfa2liYW5hX3NlcnZpY2VzLmluZGV4UGF0dGVyblNlcnZpY2UuZ2V0KGluZGV4UGF0dGVybklkKSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgW1swLCA2XV0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChQcm9taXNlLmFsbChwcm9taXNlcykpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBpbmRleFBhdHRlcm5zID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF9sb2Rhc2guZGVmYXVsdC5jb21wYWN0KGluZGV4UGF0dGVybnMpKTsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCBudWxsLCBbWzEsIDZdXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2ZldGNoU2F2ZWRNYXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9mZXRjaFNhdmVkTWFwKHNhdmVkT2JqZWN0SWQpIHsKICAgICAgdmFyICRpbmplY3Rvciwgc2F2ZWRPYmplY3RMb2FkZXI7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2ZldGNoU2F2ZWRNYXAkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKF9jaHJvbWUuZGVmYXVsdC5kYW5nZXJvdXNseUdldEFjdGl2ZUluamVjdG9yKCkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICRpbmplY3RvciA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgIHNhdmVkT2JqZWN0TG9hZGVyID0gJGluamVjdG9yLmdldCgnZ2lzTWFwU2F2ZWRPYmplY3RMb2FkZXInKTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzYXZlZE9iamVjdExvYWRlci5nZXQoc2F2ZWRPYmplY3RJZCkpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDMuc2VudCk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVGcm9tU2F2ZWRPYmplY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUZyb21TYXZlZE9iamVjdChzYXZlZE9iamVjdElkLCBpbnB1dCwgcGFyZW50KSB7CiAgICAgIHZhciBzYXZlZE1hcCwgbGF5ZXJMaXN0LCBpbmRleFBhdHRlcm5zLCBlbWJlZGRhYmxlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGNyZWF0ZUZyb21TYXZlZE9iamVjdCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fZmV0Y2hTYXZlZE1hcChzYXZlZE9iamVjdElkKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgc2F2ZWRNYXAgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICBsYXllckxpc3QgPSAoMCwgX2dldF9pbml0aWFsX2xheWVycy5nZXRJbml0aWFsTGF5ZXJzKShzYXZlZE1hcC5sYXllckxpc3RKU09OKTsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLl9nZXRJbmRleFBhdHRlcm5zKGxheWVyTGlzdCkpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGluZGV4UGF0dGVybnMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICBlbWJlZGRhYmxlID0gbmV3IF9tYXBfZW1iZWRkYWJsZS5NYXBFbWJlZGRhYmxlKHsKICAgICAgICAgICAgICAgIGxheWVyTGlzdDogbGF5ZXJMaXN0LAogICAgICAgICAgICAgICAgdGl0bGU6IHNhdmVkTWFwLnRpdGxlLAogICAgICAgICAgICAgICAgZWRpdFVybDogX2Nocm9tZS5kZWZhdWx0LmFkZEJhc2VQYXRoKCgwLCBfY29uc3RhbnRzLmNyZWF0ZU1hcFBhdGgpKHNhdmVkT2JqZWN0SWQpKSwKICAgICAgICAgICAgICAgIGluZGV4UGF0dGVybnM6IGluZGV4UGF0dGVybnMsCiAgICAgICAgICAgICAgICBlZGl0YWJsZTogdGhpcy5pc0VkaXRhYmxlKCkKICAgICAgICAgICAgICB9LCBpbnB1dCwgcGFyZW50KTsKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDg7CiAgICAgICAgICAgICAgZW1iZWRkYWJsZS51cGRhdGVJbnB1dCgoMCwgX21lcmdlX2lucHV0X3dpdGhfc2F2ZWRfbWFwLm1lcmdlSW5wdXRXaXRoU2F2ZWRNYXApKGlucHV0LCBzYXZlZE1hcCkpOwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnQwID0gX2NvbnRleHQ0WyJjYXRjaCJdKDgpOwogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5tYXBFbWJlZGRhYmxlRmFjdG9yeS5pbnZhbGlkU2F2ZWRPYmplY3QnLCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1VuYWJsZSB0byBsb2FkIG1hcCwgbWFsZm9ybWVkIHNhdmVkIG9iamVjdCcKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBlbWJlZGRhYmxlKTsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzLCBbWzgsIDEyXV0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZUZyb21TdGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRnJvbVN0YXRlKHN0YXRlLCBpbnB1dCwgcGFyZW50LCByZW5kZXJUb29sdGlwQ29udGVudCwgZXZlbnRIYW5kbGVycykgewogICAgICB2YXIgbGF5ZXJMaXN0LCBpbmRleFBhdHRlcm5zOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGNyZWF0ZUZyb21TdGF0ZSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgbGF5ZXJMaXN0ID0gc3RhdGUgJiYgc3RhdGUubGF5ZXJMaXN0ID8gc3RhdGUubGF5ZXJMaXN0IDogKDAsIF9nZXRfaW5pdGlhbF9sYXllcnMuZ2V0SW5pdGlhbExheWVycykoKTsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLl9nZXRJbmRleFBhdHRlcm5zKGxheWVyTGlzdCkpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGluZGV4UGF0dGVybnMgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgbmV3IF9tYXBfZW1iZWRkYWJsZS5NYXBFbWJlZGRhYmxlKHsKICAgICAgICAgICAgICAgIGxheWVyTGlzdDogbGF5ZXJMaXN0LAogICAgICAgICAgICAgICAgdGl0bGU6IHN0YXRlICYmIHN0YXRlLnRpdGxlID8gc3RhdGUudGl0bGUgOiAnJywKICAgICAgICAgICAgICAgIGVkaXRVcmw6IG51bGwsCiAgICAgICAgICAgICAgICBpbmRleFBhdHRlcm5zOiBpbmRleFBhdHRlcm5zLAogICAgICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlCiAgICAgICAgICAgICAgfSwgaW5wdXQsIHBhcmVudCwgcmVuZGVyVG9vbHRpcENvbnRlbnQsIGV2ZW50SGFuZGxlcnMpKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKGlucHV0KSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gY3JlYXRlJChfY29udGV4dDYpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IF9jaHJvbWUuZGVmYXVsdC5hZGRCYXNlUGF0aCgoMCwgX2NvbnN0YW50cy5jcmVhdGVNYXBQYXRoKSgnJykpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBuZXcgX3B1YmxpYy5FcnJvckVtYmVkZGFibGUoJ01hcHMgY2FuIG9ubHkgYmUgY3JlYXRlZCB3aXRoIGNyZWF0ZUZyb21TYXZlZE9iamVjdCBvciBjcmVhdGVGcm9tU3RhdGUnLCBpbnB1dCkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTWFwRW1iZWRkYWJsZUZhY3Rvcnk7Cn0oX3B1YmxpYy5FbWJlZGRhYmxlRmFjdG9yeSk7CgpleHBvcnRzLk1hcEVtYmVkZGFibGVGYWN0b3J5ID0gTWFwRW1iZWRkYWJsZUZhY3Rvcnk7CgpfbGVnYWN5LnNldHVwLnJlZ2lzdGVyRW1iZWRkYWJsZUZhY3RvcnkoX2NvbnN0YW50cy5NQVBfU0FWRURfT0JKRUNUX1RZUEUsIG5ldyBNYXBFbWJlZGRhYmxlRmFjdG9yeSgpKTs="},null]}