{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/data_frame_analytics/pages/analytics_exploration/components/classification_exploration/results_table.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/data_frame_analytics/pages/analytics_exploration/components/classification_exploration/results_table.js","mtime":1585205045545},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlJlc3VsdHNUYWJsZSA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfbW9tZW50VGltZXpvbmUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm1vbWVudC10aW1lem9uZSIpKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3BsdWdpbnMvZGF0YS9wdWJsaWMiKTsKCnZhciBfbWxfaW5fbWVtb3J5X3RhYmxlID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vY29tcG9uZW50cy9tbF9pbl9tZW1vcnlfdGFibGUiKTsKCnZhciBfZGF0ZV91dGlscyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uL3V0aWwvZGF0ZV91dGlscyIpOwoKdmFyIF9maWVsZHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vZmllbGRzIik7Cgp2YXIgX2NvbW1vbiA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbiIpOwoKdmFyIF9jb2x1bW5zID0gcmVxdWlyZSgiLi4vLi4vLi4vYW5hbHl0aWNzX21hbmFnZW1lbnQvY29tcG9uZW50cy9hbmFseXRpY3NfbGlzdC9jb2x1bW5zIik7Cgp2YXIgX3VzZV9leHBsb3JlX2RhdGEgPSByZXF1aXJlKCIuL3VzZV9leHBsb3JlX2RhdGEiKTsKCnZhciBfY2xhc3NpZmljYXRpb25fZXhwbG9yYXRpb24gPSByZXF1aXJlKCIuL2NsYXNzaWZpY2F0aW9uX2V4cGxvcmF0aW9uIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCnZhciBQQUdFX1NJWkVfT1BUSU9OUyA9IFs1LCAxMCwgMjUsIDUwXTsKdmFyIE1sSW5NZW1vcnlUYWJsZUJhc2ljID0gKDAsIF9tbF9pbl9tZW1vcnlfdGFibGUubWxJbk1lbW9yeVRhYmxlQmFzaWNGYWN0b3J5KSgpOwoKdmFyIHNob3dpbmdEb2NzID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLmRhdGFmcmFtZS5hbmFseXRpY3MuY2xhc3NpZmljYXRpb25FeHBsb3JhdGlvbi5kb2N1bWVudHNTaG93bkhlbHBUZXh0JywgewogIGRlZmF1bHRNZXNzYWdlOiAnU2hvd2luZyBkb2N1bWVudHMgZm9yIHdoaWNoIHByZWRpY3Rpb25zIGV4aXN0Jwp9KTsKCnZhciBzaG93aW5nRmlyc3REb2NzID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLmRhdGFmcmFtZS5hbmFseXRpY3MuY2xhc3NpZmljYXRpb25FeHBsb3JhdGlvbi5maXJzdERvY3VtZW50c1Nob3duSGVscFRleHQnLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdTaG93aW5nIGZpcnN0IHtzZWFyY2hTaXplfSBkb2N1bWVudHMgZm9yIHdoaWNoIHByZWRpY3Rpb25zIGV4aXN0JywKICB2YWx1ZXM6IHsKICAgIHNlYXJjaFNpemU6IF9jb21tb24uU0VBUkNIX1NJWkUKICB9Cn0pOwoKdmFyIFJlc3VsdHNUYWJsZSA9IF9yZWFjdC5kZWZhdWx0Lm1lbW8oZnVuY3Rpb24gKF9yZWYpIHsKICB2YXIgam9iQ29uZmlnID0gX3JlZi5qb2JDb25maWcsCiAgICAgIGpvYlN0YXR1cyA9IF9yZWYuam9iU3RhdHVzLAogICAgICBzZXRFdmFsdWF0ZVNlYXJjaFF1ZXJ5ID0gX3JlZi5zZXRFdmFsdWF0ZVNlYXJjaFF1ZXJ5OwoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoMCksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBwYWdlSW5kZXggPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRQYWdlSW5kZXggPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZVN0YXRlMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKDI1KSwKICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLAogICAgICBwYWdlU2l6ZSA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldFBhZ2VTaXplID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIF91c2VTdGF0ZTUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShbXSksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgc2VsZWN0ZWRGaWVsZHMgPSBfdXNlU3RhdGU2WzBdLAogICAgICBzZXRTZWxlY3RlZEZpZWxkcyA9IF91c2VTdGF0ZTZbMV07CgogIHZhciBfdXNlU3RhdGU3ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoW10pLAogICAgICBfdXNlU3RhdGU4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNywgMiksCiAgICAgIGRvY0ZpZWxkcyA9IF91c2VTdGF0ZThbMF0sCiAgICAgIHNldERvY0ZpZWxkcyA9IF91c2VTdGF0ZThbMV07CgogIHZhciBfdXNlU3RhdGU5ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkodW5kZWZpbmVkKSwKICAgICAgX3VzZVN0YXRlMTAgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU5LCAyKSwKICAgICAgZGVwVmFyVHlwZSA9IF91c2VTdGF0ZTEwWzBdLAogICAgICBzZXREZXBWYXJUeXBlID0gX3VzZVN0YXRlMTBbMV07CgogIHZhciBfdXNlU3RhdGUxMSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3VzZVN0YXRlMTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxMSwgMiksCiAgICAgIGlzQ29sdW1uc1BvcG92ZXJWaXNpYmxlID0gX3VzZVN0YXRlMTJbMF0sCiAgICAgIHNldENvbHVtbnNQb3BvdmVyVmlzaWJsZSA9IF91c2VTdGF0ZTEyWzFdOwoKICB2YXIgX3VzZVN0YXRlMTMgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShfY29tbW9uLmRlZmF1bHRTZWFyY2hRdWVyeSksCiAgICAgIF91c2VTdGF0ZTE0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTMsIDIpLAogICAgICBzZWFyY2hRdWVyeSA9IF91c2VTdGF0ZTE0WzBdLAogICAgICBzZXRTZWFyY2hRdWVyeSA9IF91c2VTdGF0ZTE0WzFdOwoKICB2YXIgX3VzZVN0YXRlMTUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh1bmRlZmluZWQpLAogICAgICBfdXNlU3RhdGUxNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTE1LCAyKSwKICAgICAgc2VhcmNoRXJyb3IgPSBfdXNlU3RhdGUxNlswXSwKICAgICAgc2V0U2VhcmNoRXJyb3IgPSBfdXNlU3RhdGUxNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTE3ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkodW5kZWZpbmVkKSwKICAgICAgX3VzZVN0YXRlMTggPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxNywgMiksCiAgICAgIHNlYXJjaFN0cmluZyA9IF91c2VTdGF0ZTE4WzBdLAogICAgICBzZXRTZWFyY2hTdHJpbmcgPSBfdXNlU3RhdGUxOFsxXTsKCiAgdmFyIHByZWRpY3RlZEZpZWxkTmFtZSA9ICgwLCBfY29tbW9uLmdldFByZWRpY3RlZEZpZWxkTmFtZSkoam9iQ29uZmlnLmRlc3QucmVzdWx0c19maWVsZCwgam9iQ29uZmlnLmFuYWx5c2lzKTsKICB2YXIgZGVwZW5kZW50VmFyaWFibGUgPSAoMCwgX2NvbW1vbi5nZXREZXBlbmRlbnRWYXIpKGpvYkNvbmZpZy5hbmFseXNpcyk7CgogIGZ1bmN0aW9uIHRvZ2dsZUNvbHVtbnNQb3BvdmVyKCkgewogICAgc2V0Q29sdW1uc1BvcG92ZXJWaXNpYmxlKCFpc0NvbHVtbnNQb3BvdmVyVmlzaWJsZSk7CiAgfQoKICBmdW5jdGlvbiBjbG9zZUNvbHVtbnNQb3BvdmVyKCkgewogICAgc2V0Q29sdW1uc1BvcG92ZXJWaXNpYmxlKGZhbHNlKTsKICB9CgogIGZ1bmN0aW9uIHRvZ2dsZUNvbHVtbihjb2x1bW4pIHsKICAgIGlmICh0YWJsZUl0ZW1zLmxlbmd0aCA+IDAgJiYgam9iQ29uZmlnICE9PSB1bmRlZmluZWQpIHsKICAgICAgLy8gc3ByZWFkIHRvIGEgbmV3IGFycmF5IG90aGVyd2lzZSB0aGUgY29tcG9uZW50IHdvdWxkbid0IHJlLXJlbmRlcgogICAgICBzZXRTZWxlY3RlZEZpZWxkcyhfdG9Db25zdW1hYmxlQXJyYXkoKDAsIF9jb21tb24udG9nZ2xlU2VsZWN0ZWRGaWVsZCkoc2VsZWN0ZWRGaWVsZHMsIGNvbHVtbiwgam9iQ29uZmlnLmRlc3QucmVzdWx0c19maWVsZCwgZGVwVmFyVHlwZSkpKTsKICAgIH0KICB9CgogIHZhciBfdXNlRXhwbG9yZURhdGEgPSAoMCwgX3VzZV9leHBsb3JlX2RhdGEudXNlRXhwbG9yZURhdGEpKGpvYkNvbmZpZywgc2VsZWN0ZWRGaWVsZHMsIHNldFNlbGVjdGVkRmllbGRzLCBzZXREb2NGaWVsZHMsIHNldERlcFZhclR5cGUpLAogICAgICBlcnJvck1lc3NhZ2UgPSBfdXNlRXhwbG9yZURhdGEuZXJyb3JNZXNzYWdlLAogICAgICBsb2FkRXhwbG9yZURhdGEgPSBfdXNlRXhwbG9yZURhdGEubG9hZEV4cGxvcmVEYXRhLAogICAgICBzb3J0RmllbGQgPSBfdXNlRXhwbG9yZURhdGEuc29ydEZpZWxkLAogICAgICBzb3J0RGlyZWN0aW9uID0gX3VzZUV4cGxvcmVEYXRhLnNvcnREaXJlY3Rpb24sCiAgICAgIHN0YXR1cyA9IF91c2VFeHBsb3JlRGF0YS5zdGF0dXMsCiAgICAgIHRhYmxlSXRlbXMgPSBfdXNlRXhwbG9yZURhdGEudGFibGVJdGVtczsKCiAgdmFyIGNvbHVtbnMgPSBzZWxlY3RlZEZpZWxkcy5tYXAoZnVuY3Rpb24gKGZpZWxkKSB7CiAgICB2YXIgdHlwZSA9IGZpZWxkLnR5cGU7CgogICAgdmFyIGlzTnVtYmVyID0gdHlwZSAhPT0gdW5kZWZpbmVkICYmIChfZmllbGRzLkJBU0lDX05VTUVSSUNBTF9UWVBFUy5oYXModHlwZSkgfHwgX2ZpZWxkcy5FWFRFTkRFRF9OVU1FUklDQUxfVFlQRVMuaGFzKHR5cGUpKTsKCiAgICB2YXIgY29sdW1uID0gewogICAgICBmaWVsZDogZmllbGQubmFtZSwKICAgICAgbmFtZTogZmllbGQubmFtZSwKICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgIHRydW5jYXRlVGV4dDogdHJ1ZQogICAgfTsKCiAgICB2YXIgcmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKGQsIGZ1bGxJdGVtKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGQpICYmIGQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnOwogICAgICB9KSkgewogICAgICAgIC8vIElmIHRoZSBjZWxscyBkYXRhIGlzIGFuIGFycmF5IG9mIHN0cmluZ3MsIHJldHVybiBhcyBhIGNvbW1hIHNlcGFyYXRlZCBsaXN0LgogICAgICAgIC8vIFRoZSBsaXN0IHdpbGwgZ2V0IGxpbWl0ZWQgdG8gNSBpdGVtcyB3aXRoIGDigKZgIGF0IHRoZSBlbmQgaWYgdGhlcmUncyBtb3JlIGluIHRoZSBvcmlnaW5hbCBhcnJheS4KICAgICAgICByZXR1cm4gIiIuY29uY2F0KGQuc2xpY2UoMCwgNSkuam9pbignLCAnKSkuY29uY2F0KGQubGVuZ3RoID4gNSA/ICcsIOKApicgOiAnJyk7CiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkKSkgewogICAgICAgIC8vIElmIHRoZSBjZWxscyBkYXRhIGlzIGFuIGFycmF5IG9mIGUuZy4gb2JqZWN0cywgZGlzcGxheSBhICdhcnJheScgYmFkZ2Ugd2l0aCBhCiAgICAgICAgLy8gdG9vbHRpcCB0aGF0IGV4cGxhaW5zIHRoYXQgdGhpcyB0eXBlIG9mIGZpZWxkIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyB0YWJsZS4KICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRvb2xUaXAsIHsKICAgICAgICAgIGNvbnRlbnQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5kYXRhZnJhbWUuYW5hbHl0aWNzLmNsYXNzaWZpY2F0aW9uRXhwbG9yYXRpb24uaW5kZXhBcnJheVRvb2xUaXBDb250ZW50JywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1RoZSBmdWxsIGNvbnRlbnQgb2YgdGhpcyBhcnJheSBiYXNlZCBjb2x1bW4gY2Fubm90IGJlIGRpc3BsYXllZC4nCiAgICAgICAgICB9KQogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCYWRnZSwgbnVsbCwgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLmRhdGFmcmFtZS5hbmFseXRpY3MuY2xhc3NpZmljYXRpb25FeHBsb3JhdGlvbi5pbmRleEFycmF5QmFkZ2VDb250ZW50JywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdhcnJheScKICAgICAgICB9KSkpOwogICAgICB9CgogICAgICByZXR1cm4gZDsKICAgIH07CgogICAgaWYgKGlzTnVtYmVyKSB7CiAgICAgIGNvbHVtbi5kYXRhVHlwZSA9ICdudW1iZXInOwogICAgICBjb2x1bW4ucmVuZGVyID0gcmVuZGVyOwogICAgfSBlbHNlIGlmICh0eXBlb2YgdHlwZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSBfcHVibGljLkVTX0ZJRUxEX1RZUEVTLkJPT0xFQU46CiAgICAgICAgICBjb2x1bW4uZGF0YVR5cGUgPSBfcHVibGljLkVTX0ZJRUxEX1RZUEVTLkJPT0xFQU47CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBfcHVibGljLkVTX0ZJRUxEX1RZUEVTLkRBVEU6CiAgICAgICAgICBjb2x1bW4uYWxpZ24gPSAncmlnaHQnOwoKICAgICAgICAgIGNvbHVtbi5yZW5kZXIgPSBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICBpZiAoZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBfZGF0ZV91dGlscy5mb3JtYXRIdW1hblJlYWRhYmxlRGF0ZVRpbWVTZWNvbmRzKSgoMCwgX21vbWVudFRpbWV6b25lLmRlZmF1bHQpKGQpLnVuaXgoKSAqIDEwMDApOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZDsKICAgICAgICAgIH07CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBjb2x1bW4ucmVuZGVyID0gcmVuZGVyOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGNvbHVtbi5yZW5kZXIgPSByZW5kZXI7CiAgICB9CgogICAgcmV0dXJuIGNvbHVtbjsKICB9KTsKICB2YXIgZG9jRmllbGRzQ291bnQgPSBkb2NGaWVsZHMubGVuZ3RoOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBpZiAoam9iQ29uZmlnICE9PSB1bmRlZmluZWQgJiYgY29sdW1ucy5sZW5ndGggPiAwICYmIHNlbGVjdGVkRmllbGRzLmxlbmd0aCA+IDAgJiYgc29ydEZpZWxkICE9PSB1bmRlZmluZWQgJiYgc29ydERpcmVjdGlvbiAhPT0gdW5kZWZpbmVkICYmIHNlbGVjdGVkRmllbGRzLnNvbWUoZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgIHJldHVybiBmaWVsZC5uYW1lID09PSBzb3J0RmllbGQ7CiAgICB9KSkgewogICAgICB2YXIgZmllbGQgPSBzb3J0RmllbGQ7IC8vIElmIHNvcnRpbmcgYnkgcHJlZGljdGVkRmllbGQgdXNlIGRlcGVuZGVudFZhciB0eXBlCgogICAgICBpZiAocHJlZGljdGVkRmllbGROYW1lID09PSBzb3J0RmllbGQpIHsKICAgICAgICBmaWVsZCA9IGRlcGVuZGVudFZhcmlhYmxlOwogICAgICB9CgogICAgICB2YXIgcmVxdWlyZXNLZXl3b3JkID0gKDAsIF9maWVsZHMuaXNLZXl3b3JkQW5kVGV4dFR5cGUpKGZpZWxkKTsKICAgICAgbG9hZEV4cGxvcmVEYXRhKHsKICAgICAgICBmaWVsZDogc29ydEZpZWxkLAogICAgICAgIGRpcmVjdGlvbjogc29ydERpcmVjdGlvbiwKICAgICAgICBzZWFyY2hRdWVyeTogc2VhcmNoUXVlcnksCiAgICAgICAgcmVxdWlyZXNLZXl3b3JkOiByZXF1aXJlc0tleXdvcmQKICAgICAgfSk7CiAgICB9CiAgfSwgW0pTT04uc3RyaW5naWZ5KHNlYXJjaFF1ZXJ5KV0pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICAvLyBCeSBkZWZhdWx0IHNldCBzb3J0aW5nIHRvIGRlc2NlbmRpbmcgb24gdGhlIHByZWRpY3Rpb24gZmllbGQgKGA8ZGVwZW5kZW50X3ZhcmlibGUgb3IgcHJlZGljdGlvbl9maWVsZF9uYW1lPl9wcmVkaWN0aW9uYCkuCiAgICAvLyBpZiB0aGF0J3Mgbm90IGF2YWlsYWJsZSBzb3J0IGFzY2VuZGluZyBvbiB0aGUgZmlyc3QgY29sdW1uLiBDaGVjayBpZiB0aGUgY3VycmVudCBzb3J0aW5nIGZpZWxkIGlzIHN0aWxsIGF2YWlsYWJsZS4KICAgIGlmIChqb2JDb25maWcgIT09IHVuZGVmaW5lZCAmJiBjb2x1bW5zLmxlbmd0aCA+IDAgJiYgc2VsZWN0ZWRGaWVsZHMubGVuZ3RoID4gMCAmJiAhc2VsZWN0ZWRGaWVsZHMuc29tZShmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgcmV0dXJuIGZpZWxkLm5hbWUgPT09IHNvcnRGaWVsZDsKICAgIH0pKSB7CiAgICAgIHZhciBwcmVkaWN0ZWRGaWVsZFNlbGVjdGVkID0gc2VsZWN0ZWRGaWVsZHMuc29tZShmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgICByZXR1cm4gZmllbGQubmFtZSA9PT0gcHJlZGljdGVkRmllbGROYW1lOwogICAgICB9KTsgLy8gQ0hFQ0sgSUYga2V5d29yZCBzdWZmaXggaXMgbmVlZGVkIChpZiBwcmVkaWN0ZWQgZmllbGQgaXMgc2VsZWN0ZWQgd2UgaGF2ZSB0byBjaGVjayB0aGUgZGVwZW5kZW50IHZhcmlhYmxlIHR5cGUpCgogICAgICB2YXIgc29ydEJ5RmllbGQgPSBwcmVkaWN0ZWRGaWVsZFNlbGVjdGVkID8gZGVwZW5kZW50VmFyaWFibGUgOiBzZWxlY3RlZEZpZWxkc1swXS5uYW1lOwogICAgICB2YXIgcmVxdWlyZXNLZXl3b3JkID0gKDAsIF9maWVsZHMuaXNLZXl3b3JkQW5kVGV4dFR5cGUpKHNvcnRCeUZpZWxkKTsKICAgICAgc29ydEJ5RmllbGQgPSBwcmVkaWN0ZWRGaWVsZFNlbGVjdGVkID8gcHJlZGljdGVkRmllbGROYW1lIDogc29ydEJ5RmllbGQ7CiAgICAgIHZhciBkaXJlY3Rpb24gPSBwcmVkaWN0ZWRGaWVsZFNlbGVjdGVkID8gX21sX2luX21lbW9yeV90YWJsZS5TT1JUX0RJUkVDVElPTi5ERVNDIDogX21sX2luX21lbW9yeV90YWJsZS5TT1JUX0RJUkVDVElPTi5BU0M7CiAgICAgIGxvYWRFeHBsb3JlRGF0YSh7CiAgICAgICAgZmllbGQ6IHNvcnRCeUZpZWxkLAogICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uLAogICAgICAgIHNlYXJjaFF1ZXJ5OiBzZWFyY2hRdWVyeSwKICAgICAgICByZXF1aXJlc0tleXdvcmQ6IHJlcXVpcmVzS2V5d29yZAogICAgICB9KTsKICAgIH0KICB9LCBbam9iQ29uZmlnLCBjb2x1bW5zLmxlbmd0aCwgc2VsZWN0ZWRGaWVsZHMubGVuZ3RoLCBzb3J0RmllbGQsIHNvcnREaXJlY3Rpb24sIHRhYmxlSXRlbXMubGVuZ3RoXSk7CiAgdmFyIHNvcnRpbmcgPSBmYWxzZTsKICB2YXIgb25UYWJsZUNoYW5nZTsKCiAgaWYgKGNvbHVtbnMubGVuZ3RoID4gMCAmJiBzb3J0RmllbGQgIT09ICcnICYmIHNvcnRGaWVsZCAhPT0gdW5kZWZpbmVkKSB7CiAgICBzb3J0aW5nID0gewogICAgICBzb3J0OiB7CiAgICAgICAgZmllbGQ6IHNvcnRGaWVsZCwKICAgICAgICBkaXJlY3Rpb246IHNvcnREaXJlY3Rpb24KICAgICAgfQogICAgfTsKCiAgICBvblRhYmxlQ2hhbmdlID0gZnVuY3Rpb24gb25UYWJsZUNoYW5nZShfcmVmMikgewogICAgICB2YXIgX3JlZjIkcGFnZSA9IF9yZWYyLnBhZ2UsCiAgICAgICAgICBwYWdlID0gX3JlZjIkcGFnZSA9PT0gdm9pZCAwID8gewogICAgICAgIGluZGV4OiAwLAogICAgICAgIHNpemU6IDEwCiAgICAgIH0gOiBfcmVmMiRwYWdlLAogICAgICAgICAgX3JlZjIkc29ydCA9IF9yZWYyLnNvcnQsCiAgICAgICAgICBzb3J0ID0gX3JlZjIkc29ydCA9PT0gdm9pZCAwID8gewogICAgICAgIGZpZWxkOiBzb3J0RmllbGQsCiAgICAgICAgZGlyZWN0aW9uOiBzb3J0RGlyZWN0aW9uCiAgICAgIH0gOiBfcmVmMiRzb3J0OwogICAgICB2YXIgaW5kZXggPSBwYWdlLmluZGV4LAogICAgICAgICAgc2l6ZSA9IHBhZ2Uuc2l6ZTsKICAgICAgc2V0UGFnZUluZGV4KGluZGV4KTsKICAgICAgc2V0UGFnZVNpemUoc2l6ZSk7CgogICAgICBpZiAoc29ydC5maWVsZCAhPT0gc29ydEZpZWxkIHx8IHNvcnQuZGlyZWN0aW9uICE9PSBzb3J0RGlyZWN0aW9uKSB7CiAgICAgICAgdmFyIGZpZWxkID0gc29ydC5maWVsZDsgLy8gSWYgc29ydGluZyBieSBwcmVkaWN0ZWRGaWVsZCB1c2UgZGVwVmFyIGZvciB0eXBlIGNoZWNrCgogICAgICAgIGlmIChwcmVkaWN0ZWRGaWVsZE5hbWUgPT09IHNvcnQuZmllbGQpIHsKICAgICAgICAgIGZpZWxkID0gZGVwZW5kZW50VmFyaWFibGU7CiAgICAgICAgfQoKICAgICAgICBsb2FkRXhwbG9yZURhdGEoX29iamVjdFNwcmVhZCh7fSwgc29ydCwgewogICAgICAgICAgc2VhcmNoUXVlcnk6IHNlYXJjaFF1ZXJ5LAogICAgICAgICAgcmVxdWlyZXNLZXl3b3JkOiAoMCwgX2ZpZWxkcy5pc0tleXdvcmRBbmRUZXh0VHlwZSkoZmllbGQpCiAgICAgICAgfSkpOwogICAgICB9CiAgICB9OwogIH0KCiAgdmFyIHBhZ2luYXRpb24gPSB7CiAgICBpbml0aWFsUGFnZUluZGV4OiBwYWdlSW5kZXgsCiAgICBpbml0aWFsUGFnZVNpemU6IHBhZ2VTaXplLAogICAgdG90YWxJdGVtQ291bnQ6IHRhYmxlSXRlbXMubGVuZ3RoLAogICAgcGFnZVNpemVPcHRpb25zOiBQQUdFX1NJWkVfT1BUSU9OUywKICAgIGhpZGVQZXJQYWdlT3B0aW9uczogZmFsc2UKICB9OwoKICB2YXIgb25RdWVyeUNoYW5nZSA9IGZ1bmN0aW9uIG9uUXVlcnlDaGFuZ2UoX3JlZjMpIHsKICAgIHZhciBxdWVyeSA9IF9yZWYzLnF1ZXJ5LAogICAgICAgIGVycm9yID0gX3JlZjMuZXJyb3I7CgogICAgaWYgKGVycm9yKSB7CiAgICAgIHNldFNlYXJjaEVycm9yKGVycm9yLm1lc3NhZ2UpOwogICAgfSBlbHNlIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgZXNRdWVyeURzbCA9IF9ldWkuUXVlcnkudG9FU1F1ZXJ5KHF1ZXJ5KTsKCiAgICAgICAgc2V0U2VhcmNoUXVlcnkoZXNRdWVyeURzbCk7CiAgICAgICAgc2V0U2VhcmNoU3RyaW5nKHF1ZXJ5LnRleHQpOwogICAgICAgIHNldFNlYXJjaEVycm9yKHVuZGVmaW5lZCk7IC8vIHNldCBxdWVyeSBmb3IgdXNlIGluIGV2YWx1YXRlIHBhbmVsCgogICAgICAgIHNldEV2YWx1YXRlU2VhcmNoUXVlcnkoZXNRdWVyeURzbCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBzZXRTZWFyY2hFcnJvcihlLnRvU3RyaW5nKCkpOwogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIHNlYXJjaCA9IHsKICAgIG9uQ2hhbmdlOiBvblF1ZXJ5Q2hhbmdlLAogICAgZGVmYXVsdFF1ZXJ5OiBzZWFyY2hTdHJpbmcsCiAgICBib3g6IHsKICAgICAgaW5jcmVtZW50YWw6IGZhbHNlLAogICAgICBwbGFjZWhvbGRlcjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLmRhdGFmcmFtZS5hbmFseXRpY3MucmVncmVzc2lvbkV4cGxvcmF0aW9uLnNlYXJjaEJveFBsYWNlaG9sZGVyJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRS5nLiBhdmc+MC41JwogICAgICB9KQogICAgfSwKICAgIGZpbHRlcnM6IFt7CiAgICAgIHR5cGU6ICdmaWVsZF92YWx1ZV90b2dnbGVfZ3JvdXAnLAogICAgICBmaWVsZDogIiIuY29uY2F0KGpvYkNvbmZpZy5kZXN0LnJlc3VsdHNfZmllbGQsICIuaXNfdHJhaW5pbmciKSwKICAgICAgaXRlbXM6IFt7CiAgICAgICAgdmFsdWU6IGZhbHNlLAogICAgICAgIG5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5kYXRhZnJhbWUuYW5hbHl0aWNzLnJlZ3Jlc3Npb25FeHBsb3JhdGlvbi5pc1Rlc3RpbmdMYWJlbCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVGVzdGluZycKICAgICAgICB9KQogICAgICB9LCB7CiAgICAgICAgdmFsdWU6IHRydWUsCiAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLmRhdGFmcmFtZS5hbmFseXRpY3MucmVncmVzc2lvbkV4cGxvcmF0aW9uLmlzVHJhaW5pbmdMYWJlbCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVHJhaW5pbmcnCiAgICAgICAgfSkKICAgICAgfV0KICAgIH1dCiAgfTsKCiAgaWYgKGpvYkNvbmZpZyA9PT0gdW5kZWZpbmVkKSB7CiAgICByZXR1cm4gbnVsbDsKICB9IC8vIGlmIGl0J3MgYSBzZWFyY2hCYXIgc3ludGF4IGVycm9yIGxlYXZlIHRoZSB0YWJsZSB2aXNpYmxlIHNvIHRoZXkgY2FuIHRyeSBhZ2FpbgoKCiAgaWYgKHN0YXR1cyA9PT0gX2NvbW1vbi5JTkRFWF9TVEFUVVMuRVJST1IgJiYgIWVycm9yTWVzc2FnZS5pbmNsdWRlcygncGFyc2luZ19leGNlcHRpb24nKSkgewogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQYW5lbCwgewogICAgICBncm93OiBmYWxzZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICBndXR0ZXJTaXplOiAicyIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICBncm93OiBmYWxzZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2xhc3NpZmljYXRpb25fZXhwbG9yYXRpb24uRXhwbG9yYXRpb25UaXRsZSwgewogICAgICBqb2JJZDogam9iQ29uZmlnLmlkCiAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICBncm93OiBmYWxzZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsICgwLCBfY29sdW1ucy5nZXRUYXNrU3RhdGVCYWRnZSkoam9iU3RhdHVzKSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5kYXRhZnJhbWUuYW5hbHl0aWNzLnJlZ3Jlc3Npb25FeHBsb3JhdGlvbi5pbmRleEVycm9yJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQW4gZXJyb3Igb2NjdXJyZWQgbG9hZGluZyB0aGUgaW5kZXggZGF0YS4nCiAgICAgIH0pLAogICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgIGljb25UeXBlOiAiY3Jvc3MiCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgZXJyb3JNZXNzYWdlKSkpOwogIH0KCiAgdmFyIHRhYmxlRXJyb3IgPSBzdGF0dXMgPT09IF9jb21tb24uSU5ERVhfU1RBVFVTLkVSUk9SICYmIGVycm9yTWVzc2FnZS5pbmNsdWRlcygncGFyc2luZ19leGNlcHRpb24nKSA/IGVycm9yTWVzc2FnZSA6IHNlYXJjaEVycm9yOwogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFuZWwsIHsKICAgIGdyb3c6IGZhbHNlLAogICAgaWQ6ICJtbERhdGFGcmFtZUFuYWx5dGljc1RhYmxlUmVzdWx0c1BhbmVsIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiLAogICAganVzdGlmeUNvbnRlbnQ6ICJzcGFjZUJldHdlZW4iLAogICAgcmVzcG9uc2l2ZTogZmFsc2UKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgIGdyb3c6IGZhbHNlCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgZ3V0dGVyU2l6ZTogInMiCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICBncm93OiBmYWxzZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NsYXNzaWZpY2F0aW9uX2V4cGxvcmF0aW9uLkV4cGxvcmF0aW9uVGl0bGUsIHsKICAgIGpvYklkOiBqb2JDb25maWcuaWQKICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgZ3JvdzogZmFsc2UKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgKDAsIF9jb2x1bW5zLmdldFRhc2tTdGF0ZUJhZGdlKShqb2JTdGF0dXMpKSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICBhbGlnbkl0ZW1zOiAiY2VudGVyIiwKICAgIGd1dHRlclNpemU6ICJ4cyIsCiAgICByZXNwb25zaXZlOiBmYWxzZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgc3R5bGU6IHsKICAgICAgdGV4dEFsaWduOiAncmlnaHQnCiAgICB9CiAgfSwgZG9jRmllbGRzQ291bnQgPiBfY29tbW9uLk1BWF9DT0xVTU5TICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCB7CiAgICBzaXplOiAicyIKICB9LCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwuZGF0YWZyYW1lLmFuYWx5dGljcy5yZWdyZXNzaW9uRXhwbG9yYXRpb24uZmllbGRTZWxlY3Rpb24nLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ3tzZWxlY3RlZEZpZWxkc0xlbmd0aCwgbnVtYmVyfSBvZiB7ZG9jRmllbGRzQ291bnQsIG51bWJlcn0ge2RvY0ZpZWxkc0NvdW50LCBwbHVyYWwsIG9uZSB7ZmllbGR9IG90aGVyIHtmaWVsZHN9fSBzZWxlY3RlZCcsCiAgICB2YWx1ZXM6IHsKICAgICAgc2VsZWN0ZWRGaWVsZHNMZW5ndGg6IHNlbGVjdGVkRmllbGRzLmxlbmd0aCwKICAgICAgZG9jRmllbGRzQ291bnQ6IGRvY0ZpZWxkc0NvdW50CiAgICB9CiAgfSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICBncm93OiBmYWxzZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCB7CiAgICBzaXplOiAicyIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUG9wb3ZlciwgewogICAgaWQ6ICJwb3BvdmVyIiwKICAgIGJ1dHRvbjogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkljb24sIHsKICAgICAgaWNvblR5cGU6ICJnZWFyIiwKICAgICAgb25DbGljazogdG9nZ2xlQ29sdW1uc1BvcG92ZXIsCiAgICAgICJhcmlhLWxhYmVsIjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLmRhdGFmcmFtZS5hbmFseXRpY3MucmVncmVzc2lvbkV4cGxvcmF0aW9uLnNlbGVjdENvbHVtbnNBcmlhTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZWxlY3QgY29sdW1ucycKICAgICAgfSkKICAgIH0pLAogICAgaXNPcGVuOiBpc0NvbHVtbnNQb3BvdmVyVmlzaWJsZSwKICAgIGNsb3NlUG9wb3ZlcjogY2xvc2VDb2x1bW5zUG9wb3ZlciwKICAgIG93bkZvY3VzOiB0cnVlCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBvcG92ZXJUaXRsZSwgbnVsbCwgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLmRhdGFmcmFtZS5hbmFseXRpY3MucmVncmVzc2lvbkV4cGxvcmF0aW9uLnNlbGVjdEZpZWxkc1BvcG92ZXJUaXRsZScsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VsZWN0IGZpZWxkcycKICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgIHN0eWxlOiB7CiAgICAgIG1heEhlaWdodDogJzQwMHB4JywKICAgICAgb3ZlcmZsb3dZOiAnc2Nyb2xsJwogICAgfQogIH0sIGRvY0ZpZWxkcy5tYXAoZnVuY3Rpb24gKF9yZWY0KSB7CiAgICB2YXIgbmFtZSA9IF9yZWY0Lm5hbWU7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNoZWNrYm94LCB7CiAgICAgIGtleTogbmFtZSwKICAgICAgaWQ6IG5hbWUsCiAgICAgIGxhYmVsOiBuYW1lLAogICAgICBjaGVja2VkOiBzZWxlY3RlZEZpZWxkcy5zb21lKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgIHJldHVybiBmaWVsZC5uYW1lID09PSBuYW1lOwogICAgICB9KSwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkgewogICAgICAgIHJldHVybiB0b2dnbGVDb2x1bW4obmFtZSk7CiAgICAgIH0sCiAgICAgIGRpc2FibGVkOiBzZWxlY3RlZEZpZWxkcy5zb21lKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgIHJldHVybiBmaWVsZC5uYW1lID09PSBuYW1lOwogICAgICB9KSAmJiBzZWxlY3RlZEZpZWxkcy5sZW5ndGggPT09IDEKICAgIH0pOwogIH0pKSkpKSkpKSwgc3RhdHVzID09PSBfY29tbW9uLklOREVYX1NUQVRVUy5MT0FESU5HICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQcm9ncmVzcywgewogICAgc2l6ZTogInhzIiwKICAgIGNvbG9yOiAiYWNjZW50IgogIH0pLCBzdGF0dXMgIT09IF9jb21tb24uSU5ERVhfU1RBVFVTLkxPQURJTkcgJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVByb2dyZXNzLCB7CiAgICBzaXplOiAieHMiLAogICAgY29sb3I6ICJhY2NlbnQiLAogICAgbWF4OiAxLAogICAgdmFsdWU6IDAKICB9KSwgKGNvbHVtbnMubGVuZ3RoID4gMCB8fCBzZWFyY2hRdWVyeSAhPT0gX2NvbW1vbi5kZWZhdWx0U2VhcmNoUXVlcnkpICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgaGVscFRleHQ6IHRhYmxlSXRlbXMubGVuZ3RoID09PSBfY29tbW9uLlNFQVJDSF9TSVpFID8gc2hvd2luZ0ZpcnN0RG9jcyA6IHNob3dpbmdEb2NzCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgbnVsbCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoTWxJbk1lbW9yeVRhYmxlQmFzaWMsIHsKICAgIGFsbG93TmV1dHJhbFNvcnQ6IGZhbHNlLAogICAgY29sdW1uczogY29sdW1ucywKICAgIGNvbXByZXNzZWQ6IHRydWUsCiAgICBoYXNBY3Rpb25zOiBmYWxzZSwKICAgIGlzU2VsZWN0YWJsZTogZmFsc2UsCiAgICBpdGVtczogdGFibGVJdGVtcywKICAgIG9uVGFibGVDaGFuZ2U6IG9uVGFibGVDaGFuZ2UsCiAgICBwYWdpbmF0aW9uOiBwYWdpbmF0aW9uLAogICAgcmVzcG9uc2l2ZTogZmFsc2UsCiAgICBzZWFyY2g6IHNlYXJjaCwKICAgIGVycm9yOiB0YWJsZUVycm9yLAogICAgc29ydGluZzogc29ydGluZwogIH0pKSk7Cn0pOwoKZXhwb3J0cy5SZXN1bHRzVGFibGUgPSBSZXN1bHRzVGFibGU7"},null]}