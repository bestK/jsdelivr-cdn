{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/jobs/new_job/common/results_loader/results_loader.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/jobs/new_job/common/results_loader/results_loader.js","mtime":1585205045856},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlJlc3VsdHNMb2FkZXIgPSB2b2lkIDA7Cgp2YXIgX3J4anMgPSByZXF1aXJlKCJyeGpzIik7Cgp2YXIgX2pvYl9jcmVhdG9yID0gcmVxdWlyZSgiLi4vam9iX2NyZWF0b3IiKTsKCnZhciBfcmVzdWx0c19zZXJ2aWNlID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vc2VydmljZXMvcmVzdWx0c19zZXJ2aWNlIik7Cgp2YXIgX2Fub21hbHlfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi9jb21tb24vdXRpbC9hbm9tYWx5X3V0aWxzIik7Cgp2YXIgX3BhcnNlX2ludGVydmFsID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vY29tbW9uL3V0aWwvcGFyc2VfaW50ZXJ2YWwiKTsKCnZhciBfc2VhcmNoZXMgPSByZXF1aXJlKCIuL3NlYXJjaGVzIik7Cgp2YXIgX25ld19qb2IgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi9jb21tb24vY29uc3RhbnRzL25ld19qb2IiKTsKCnZhciBfYWdncmVnYXRpb25fdHlwZXMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi9jb21tb24vY29uc3RhbnRzL2FnZ3JlZ2F0aW9uX3R5cGVzIik7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIGVtcHR5TW9kZWxJdGVtID0gewogIHRpbWU6IDAsCiAgYWN0dWFsOiAwLAogIG1vZGVsVXBwZXI6IDAsCiAgbW9kZWxMb3dlcjogMAp9Owp2YXIgTEFTVF9VUERBVEVfREVMQVlfTVMgPSA1MDA7Cgp2YXIgUmVzdWx0c0xvYWRlciA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFJlc3VsdHNMb2FkZXIoam9iQ3JlYXRvciwgY2hhcnRJbnRlcnZhbCwgY2hhcnRMb2FkZXIpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc3VsdHNMb2FkZXIpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiX3Jlc3VsdHMkIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIl9yZXN1bHRzU2VhcmNoUnVubmluZyIsIGZhbHNlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIl9qb2JDcmVhdG9yIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIl9jaGFydEludGVydmFsIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIl9sYXN0TW9kZWxUaW1lU3RhbXAiLCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIl9sYXN0UmVzdWx0c1RpbWVvdXQiLCBudWxsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIl9jaGFydExvYWRlciIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJfcmVzdWx0cyIsIHsKICAgICAgcHJvZ3Jlc3M6IDAsCiAgICAgIG1vZGVsOiBbXSwKICAgICAgYW5vbWFsaWVzOiBbXQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJfZGV0ZWN0b3JTcGxpdEZpZWxkRmlsdGVycyIsIG51bGwpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiX3NwbGl0RmllbGRGaWx0ZXJzTG9hZGVkIiwgZmFsc2UpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicHJvZ3Jlc3NTdWJzY3JpYmVyIiwgZnVuY3Rpb24gX2NhbGxlZShwcm9ncmVzcykgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghKF90aGlzLl9yZXN1bHRzU2VhcmNoUnVubmluZyA9PT0gZmFsc2UgJiYgKHByb2dyZXNzIC0gX3RoaXMuX3Jlc3VsdHMucHJvZ3Jlc3MgPiA1IHx8IHByb2dyZXNzID09PSAxMDApKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICghKF90aGlzLl9zcGxpdEZpZWxkRmlsdGVyc0xvYWRlZCA9PT0gZmFsc2UpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX3RoaXMuX3NwbGl0RmllbGRGaWx0ZXJzTG9hZGVkID0gdHJ1ZTsgLy8gbG9hZCBkZXRlY3RvciBmaWVsZCBmaWx0ZXJzIGlmIHRoaXMgaXMgdGhlIGZpcnN0IHJ1bi4KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfdGhpcy5fcG9wdWxhdGVEZXRlY3RvclNwbGl0RmllbGRGaWx0ZXJzKCkpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIF90aGlzLl91cGRhdGVEYXRhKHByb2dyZXNzLCBmYWxzZSk7CgogICAgICAgICAgICAgIGlmIChwcm9ncmVzcyA9PT0gMTAwKSB7CiAgICAgICAgICAgICAgICAvLyBhZnRlciB0aGUgam9iIGhhcyBmaW5pc2hlZCwgZG8gb25lIGZpbmFsIHVwZGF0ZQogICAgICAgICAgICAgICAgLy8gYSB3aGlsZSBhZnRlciB0aGUgbGFzdCAxMDAlIGhhcyBiZWVuIHJlY2VpdmVkLgogICAgICAgICAgICAgICAgLy8gbm90ZSwgdGhlcmUgbWF5IGJlIG11bHRpcGxlIDEwMCUgcHJvZ3Jlc3NlcyBzZW50IGFzIHRoZXkgd2lsbCBvbmx5IHN0b3Agb25jZSB0aGUKICAgICAgICAgICAgICAgIC8vIGRhdGFmZWVkIGhhcyBzdG9wcGVkLgogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLl9sYXN0UmVzdWx0c1RpbWVvdXQpOwogICAgICAgICAgICAgICAgX3RoaXMuX2xhc3RSZXN1bHRzVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5fdXBkYXRlRGF0YShwcm9ncmVzcywgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9LCBMQVNUX1VQREFURV9ERUxBWV9NUyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwoKICAgIHRoaXMuX2pvYkNyZWF0b3IgPSBqb2JDcmVhdG9yOwogICAgdGhpcy5fY2hhcnRJbnRlcnZhbCA9IGNoYXJ0SW50ZXJ2YWw7CiAgICB0aGlzLl9yZXN1bHRzJCA9IG5ldyBfcnhqcy5CZWhhdmlvclN1YmplY3QodGhpcy5fcmVzdWx0cyk7CiAgICB0aGlzLl9jaGFydExvYWRlciA9IGNoYXJ0TG9hZGVyOwogICAgam9iQ3JlYXRvci5zdWJzY3JpYmVUb1Byb2dyZXNzKHRoaXMucHJvZ3Jlc3NTdWJzY3JpYmVyKTsKICB9CgogIF9jcmVhdGVDbGFzcyhSZXN1bHRzTG9hZGVyLCBbewogICAga2V5OiAiX3VwZGF0ZURhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVEYXRhKHByb2dyZXNzLCBmdWxsUmVmcmVzaCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBnZXRBbm9tYWx5RGF0YSwgX3JlZiwgX3JlZjIsIG1vZGVsLCBhbm9tYWxpZXM7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF91cGRhdGVEYXRhJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB0aGlzLl9yZXN1bHRzU2VhcmNoUnVubmluZyA9IHRydWU7CgogICAgICAgICAgICAgIGlmIChmdWxsUmVmcmVzaCA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgdGhpcy5fY2xlYXJSZXN1bHRzKCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLl9yZXN1bHRzLnByb2dyZXNzID0gcHJvZ3Jlc3M7CiAgICAgICAgICAgICAgZ2V0QW5vbWFseURhdGEgPSB0aGlzLl9qb2JDcmVhdG9yLnR5cGUgPT09IF9uZXdfam9iLkpPQl9UWVBFLlNJTkdMRV9NRVRSSUMgPyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLl9sb2FkSm9iQW5vbWFseURhdGEoMCk7CiAgICAgICAgICAgICAgfSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuX2xvYWREZXRlY3RvcnNBbm9tYWx5RGF0YSgpOwogICAgICAgICAgICAgIH07IC8vIFRPRE8gLSBsb2FkIG1vcmUgdGhhdCBvbmUgbW9kZWwKCiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoUHJvbWlzZS5hbGwoW3RoaXMuX2xvYWRNb2RlbERhdGEoMCksIGdldEFub21hbHlEYXRhKCldKSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX3JlZiA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMik7CiAgICAgICAgICAgICAgbW9kZWwgPSBfcmVmMlswXTsKICAgICAgICAgICAgICBhbm9tYWxpZXMgPSBfcmVmMlsxXTsKICAgICAgICAgICAgICB0aGlzLl9yZXN1bHRzLm1vZGVsID0gbW9kZWw7CiAgICAgICAgICAgICAgdGhpcy5fcmVzdWx0cy5hbm9tYWxpZXMgPSBhbm9tYWxpZXM7CiAgICAgICAgICAgICAgdGhpcy5fcmVzdWx0c1NlYXJjaFJ1bm5pbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgdGhpcy5fcmVzdWx0cyQubmV4dCh0aGlzLl9yZXN1bHRzKTsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdWJzY3JpYmVUb1Jlc3VsdHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN1YnNjcmliZVRvUmVzdWx0cyhmdW5jKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRzJC5zdWJzY3JpYmUoZnVuYyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2NsZWFyUmVzdWx0cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NsZWFyUmVzdWx0cygpIHsKICAgICAgdGhpcy5fcmVzdWx0cy5tb2RlbCA9IHt9OwogICAgICB0aGlzLl9yZXN1bHRzLmFub21hbGllcyA9IHt9OwogICAgICB0aGlzLl9yZXN1bHRzLnByb2dyZXNzID0gMDsKICAgICAgdGhpcy5fbGFzdE1vZGVsVGltZVN0YW1wID0gMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbG9hZE1vZGVsRGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2xvYWRNb2RlbERhdGEoZHRySW5kZXgpIHsKICAgICAgdmFyIGFnZywgcmVzcDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfbG9hZE1vZGVsRGF0YSQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCEodGhpcy5fam9iQ3JlYXRvci5tb2RlbFBsb3QgPT09IGZhbHNlKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgW10pOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGFnZyA9IHRoaXMuX2pvYkNyZWF0b3IuZ2V0QWdncmVnYXRpb24oZHRySW5kZXgpOwoKICAgICAgICAgICAgICBpZiAoIShhZ2cgPT09IG51bGwpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfZGVmaW5lUHJvcGVydHkoe30sIGR0ckluZGV4LCBbZW1wdHlNb2RlbEl0ZW1dKSk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX3Jlc3VsdHNfc2VydmljZS5tbFJlc3VsdHNTZXJ2aWNlLmdldE1vZGVsUGxvdE91dHB1dCh0aGlzLl9qb2JDcmVhdG9yLmpvYklkLCBkdHJJbmRleCwgW10sIHRoaXMuX2xhc3RNb2RlbFRpbWVTdGFtcCwgdGhpcy5fam9iQ3JlYXRvci5lbmQsICIiLmNvbmNhdCh0aGlzLl9jaGFydEludGVydmFsLmdldEludGVydmFsKCkuYXNNaWxsaXNlY29uZHMoKSwgIm1zIiksIGFnZy5tbE1vZGVsUGxvdEFnZykudG9Qcm9taXNlKCkpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgdGhpcy5fY3JlYXRlTW9kZWwocmVzcCwgZHRySW5kZXgpKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9jcmVhdGVNb2RlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZU1vZGVsKF9yZWY0LCBkdHJJbmRleCkgewogICAgICB2YXIgcmVzdWx0cyA9IF9yZWY0LnJlc3VsdHM7CgogICAgICBpZiAodGhpcy5fcmVzdWx0cy5tb2RlbFtkdHJJbmRleF0gPT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuX3Jlc3VsdHMubW9kZWxbZHRySW5kZXhdID0gW107CiAgICAgIH0KCiAgICAgIHZhciBkc2xOYW1lID0gdGhpcy5fam9iQ3JlYXRvci5hZ2dyZWdhdGlvbnNbZHRySW5kZXhdLmRzbE5hbWU7CiAgICAgIHZhciBpc0NvdW50QWdnID0gZHNsTmFtZSA9PT0gX2FnZ3JlZ2F0aW9uX3R5cGVzLkVTX0FHR1JFR0FUSU9OLkNPVU5UIHx8IGRzbE5hbWUgPT09IF9hZ2dyZWdhdGlvbl90eXBlcy5FU19BR0dSRUdBVElPTi5DQVJESU5BTElUWTsgLy8gaWYgYWdncmVnYXRpb24gaXMgY291bnQgb3IgZGlzdGluY3QgY291bnQsIHNjYWxlIHRoZSBtb2RlbCBwbG90IHRvIG1hdGNoIHRoZSByZWFsIGRhdGEuCgogICAgICB2YXIgbW9kZWxTY2FsZSA9IGlzQ291bnRBZ2cgPyB0aGlzLl9jYWxjdWxhdGVNb2RlbFNjYWxlKCkgOiAxOyAvLyBjcmVhdGUgTW9kZWxJdGVtIGxpc3QgZnJvbSBzZWFyY2ggcmVzdWx0cwoKICAgICAgdmFyIG1vZGVsID0gT2JqZWN0LmVudHJpZXMocmVzdWx0cykubWFwKGZ1bmN0aW9uIChfcmVmNSkgewogICAgICAgIHZhciBfcmVmNiA9IF9zbGljZWRUb0FycmF5KF9yZWY1LCAyKSwKICAgICAgICAgICAgdGltZSA9IF9yZWY2WzBdLAogICAgICAgICAgICBfcmVmNiQgPSBfcmVmNlsxXSwKICAgICAgICAgICAgYWN0dWFsID0gX3JlZjYkLmFjdHVhbCwKICAgICAgICAgICAgbW9kZWxMb3dlciA9IF9yZWY2JC5tb2RlbExvd2VyLAogICAgICAgICAgICBtb2RlbFVwcGVyID0gX3JlZjYkLm1vZGVsVXBwZXI7CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0aW1lOiArdGltZSwKICAgICAgICAgIGFjdHVhbDogYWN0dWFsLAogICAgICAgICAgbW9kZWxVcHBlcjogKG1vZGVsVXBwZXIgPT09IG51bGwgPyAwIDogbW9kZWxVcHBlcikgKiBtb2RlbFNjYWxlLAogICAgICAgICAgbW9kZWxMb3dlcjogKG1vZGVsTG93ZXIgPT09IG51bGwgPyAwIDogbW9kZWxMb3dlcikgKiBtb2RlbFNjYWxlCiAgICAgICAgfTsKICAgICAgfSk7CgogICAgICBpZiAobW9kZWwubGVuZ3RoID4gMTApIHsKICAgICAgICAvLyBkaXNjYXJkIHRoZSBsYXN0IDUgYnVja2V0cyBpbiB0aGUgcHJldmlvdXNseSBsb2FkZWQgbW9kZWwgdG8gYXZvaWQgcGFydGlhbCByZXN1bHRzCiAgICAgICAgLy8gc2V0IHRoZSBfbGFzdE1vZGVsVGltZVN0YW1wIHRvIGJlIDUgYnVja2V0cyBiZWhpbmQgc28gd2UgbG9hZCB0aGUgY29ycmVjdAogICAgICAgIC8vIHNlY3Rpb24gb2YgcmVzdWx0cyBuZXh0IHRpbWUuCiAgICAgICAgdGhpcy5fbGFzdE1vZGVsVGltZVN0YW1wID0gbW9kZWxbbW9kZWwubGVuZ3RoIC0gNV0udGltZTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgIHRoaXMuX3Jlc3VsdHMubW9kZWxbZHRySW5kZXhdLnBvcCgpOwogICAgICAgIH0KICAgICAgfSAvLyByZXR1cm4gYSBuZXcgYXJyYXkgZnJvbSB0aGUgb2xkIGFuZCBuZXcgbW9kZWwKCgogICAgICByZXR1cm4gX2RlZmluZVByb3BlcnR5KHt9LCBkdHJJbmRleCwgdGhpcy5fcmVzdWx0cy5tb2RlbFtkdHJJbmRleF0uY29uY2F0KG1vZGVsKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2xvYWRKb2JBbm9tYWx5RGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2xvYWRKb2JBbm9tYWx5RGF0YShkdHJJbmRleCkgewogICAgICB2YXIgcmVzcCwgcmVzdWx0cywgYW5vbWFsaWVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9sb2FkSm9iQW5vbWFseURhdGEkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKF9yZXN1bHRzX3NlcnZpY2UubWxSZXN1bHRzU2VydmljZS5nZXRTY29yZXNCeUJ1Y2tldChbdGhpcy5fam9iQ3JlYXRvci5qb2JJZF0sIHRoaXMuX2pvYkNyZWF0b3Iuc3RhcnQsIHRoaXMuX2pvYkNyZWF0b3IuZW5kLCAiIi5jb25jYXQodGhpcy5fY2hhcnRJbnRlcnZhbC5nZXRJbnRlcnZhbCgpLmFzTWlsbGlzZWNvbmRzKCksICJtcyIpLCAxKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgIHJlc3VsdHMgPSByZXNwLnJlc3VsdHNbdGhpcy5fam9iQ3JlYXRvci5qb2JJZF07CgogICAgICAgICAgICAgIGlmICghKHJlc3VsdHMgPT09IHVuZGVmaW5lZCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIFtdKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBhbm9tYWxpZXMgPSB7fTsKICAgICAgICAgICAgICBhbm9tYWxpZXNbMF0gPSBPYmplY3QuZW50cmllcyhyZXN1bHRzKS5tYXAoZnVuY3Rpb24gKF9yZWY4KSB7CiAgICAgICAgICAgICAgICB2YXIgX3JlZjkgPSBfc2xpY2VkVG9BcnJheShfcmVmOCwgMiksCiAgICAgICAgICAgICAgICAgICAgdGltZSA9IF9yZWY5WzBdLAogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX3JlZjlbMV07CgogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgdGltZTogK3RpbWUsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICgwLCBfYW5vbWFseV91dGlscy5nZXRTZXZlcml0eVR5cGUpKHZhbHVlKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgYW5vbWFsaWVzKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9sb2FkRGV0ZWN0b3JzQW5vbWFseURhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9sb2FkRGV0ZWN0b3JzQW5vbWFseURhdGEoKSB7CiAgICAgIHZhciByZXNwLCBhbm9tYWxpZXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2xvYWREZXRlY3RvcnNBbm9tYWx5RGF0YSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoKDAsIF9zZWFyY2hlcy5nZXRTY29yZXNCeVJlY29yZCkodGhpcy5fam9iQ3JlYXRvci5qb2JJZCwgdGhpcy5fam9iQ3JlYXRvci5zdGFydCwgdGhpcy5fam9iQ3JlYXRvci5lbmQsICIiLmNvbmNhdCh0aGlzLl9jaGFydEludGVydmFsLmdldEludGVydmFsKCkuYXNNaWxsaXNlY29uZHMoKSwgIm1zIiksIHRoaXMuX2RldGVjdG9yU3BsaXRGaWVsZEZpbHRlcnMpKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgYW5vbWFsaWVzID0ge307CiAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMocmVzcC5yZXN1bHRzKS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMTApIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMTEgPSBfc2xpY2VkVG9BcnJheShfcmVmMTAsIDIpLAogICAgICAgICAgICAgICAgICAgIGR0cklkeCA9IF9yZWYxMVswXSwKICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gX3JlZjExWzFdOwoKICAgICAgICAgICAgICAgIGFub21hbGllc1srZHRySWR4XSA9IHJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCByLCB7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICgwLCBfYW5vbWFseV91dGlscy5nZXRTZXZlcml0eVR5cGUpKHIudmFsdWUpCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIGFub21hbGllcyk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfcG9wdWxhdGVEZXRlY3RvclNwbGl0RmllbGRGaWx0ZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcG9wdWxhdGVEZXRlY3RvclNwbGl0RmllbGRGaWx0ZXJzKCkgewogICAgICB2YXIgZmllbGRWYWx1ZXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX3BvcHVsYXRlRGV0ZWN0b3JTcGxpdEZpZWxkRmlsdGVycyQoX2NvbnRleHQ2KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCEoMCwgX2pvYl9jcmVhdG9yLmlzTXVsdGlNZXRyaWNKb2JDcmVhdG9yKSh0aGlzLl9qb2JDcmVhdG9yKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoISh0aGlzLl9qb2JDcmVhdG9yLnNwbGl0RmllbGQgIT09IG51bGwpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuX2NoYXJ0TG9hZGVyLmxvYWRGaWVsZEV4YW1wbGVWYWx1ZXModGhpcy5fam9iQ3JlYXRvci5zcGxpdEZpZWxkKSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgZmllbGRWYWx1ZXMgPSBfY29udGV4dDYuc2VudDsKCiAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuX2RldGVjdG9yU3BsaXRGaWVsZEZpbHRlcnMgPSB7CiAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX2pvYkNyZWF0b3Iuc3BsaXRGaWVsZC5uYW1lLAogICAgICAgICAgICAgICAgICB2YWx1ZTogZmllbGRWYWx1ZXNbMF0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgdGhpcy5fZGV0ZWN0b3JTcGxpdEZpZWxkRmlsdGVycyA9IG51bGw7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0gLy8gY2FsY3VsYXRlIGEgc2NhbGUgZm9yIHRoZSBtb2RlbCB1cHBlciBhbmQgbG93ZXIgYnkgdGhlIHJhdGlvIG9mIGNoYXJ0IGludGVydmFsIHRvIGJ1Y2tldHNwYW4uCiAgICAvLyB0aGlzIHdpbGwgZm9yY2UgdGhlIG1vZGVsIGJvdW5kcyB0byBiZSBkcmF3biBpbiB0aGUgY29ycmVjdCBsb2NhdGlvbgoKICB9LCB7CiAgICBrZXk6ICJfY2FsY3VsYXRlTW9kZWxTY2FsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NhbGN1bGF0ZU1vZGVsU2NhbGUoKSB7CiAgICAgIHZhciBkdXJhdGlvbiA9ICgwLCBfcGFyc2VfaW50ZXJ2YWwucGFyc2VJbnRlcnZhbCkodGhpcy5fam9iQ3JlYXRvci5idWNrZXRTcGFuKTsKICAgICAgdmFyIGJ1Y2tldFNwYW5NcyA9IGR1cmF0aW9uICE9PSBudWxsID8gZHVyYXRpb24uYXNNaWxsaXNlY29uZHMoKSA6IDA7CgogICAgICB2YXIgY2hhcnRJbnRlcnZhbE1zID0gdGhpcy5fY2hhcnRJbnRlcnZhbC5nZXRJbnRlcnZhbCgpLmFzTWlsbGlzZWNvbmRzKCk7CgogICAgICByZXR1cm4gY2hhcnRJbnRlcnZhbE1zIC8gYnVja2V0U3Bhbk1zOwogICAgfQogIH0sIHsKICAgIGtleTogInByb2dyZXNzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcmVzdWx0cy5wcm9ncmVzczsKICAgIH0KICB9XSk7CgogIHJldHVybiBSZXN1bHRzTG9hZGVyOwp9KCk7CgpleHBvcnRzLlJlc3VsdHNMb2FkZXIgPSBSZXN1bHRzTG9hZGVyOw=="},null]}