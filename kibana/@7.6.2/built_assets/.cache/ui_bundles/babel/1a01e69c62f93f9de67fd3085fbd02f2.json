{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/share/public/components/share_context_menu.js","dependencies":[{"path":"src/plugins/share/public/components/share_context_menu.js","mtime":1585205041902},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuU2hhcmVDb250ZXh0TWVudSA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3VybF9wYW5lbF9jb250ZW50ID0gcmVxdWlyZSgiLi91cmxfcGFuZWxfY29udGVudCIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogIGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiKSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0gZWxzZSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfQoKICByZXR1cm4gX3R5cGVvZihvYmopOwp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7CiAgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgewogICAgcmV0dXJuIGNhbGw7CiAgfQoKICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsKfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsKICB9OwogIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7Cn0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgewogIGlmIChzZWxmID09PSB2b2lkIDApIHsKICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7CiAgfQoKICByZXR1cm4gc2VsZjsKfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7CiAgfQoKICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgIHZhbHVlOiBzdWJDbGFzcywKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgfQogIH0pOwogIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOwp9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogICAgby5fX3Byb3RvX18gPSBwOwogICAgcmV0dXJuIG87CiAgfTsKCiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCnZhciBTaGFyZUNvbnRleHRNZW51ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhTaGFyZUNvbnRleHRNZW51LCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gU2hhcmVDb250ZXh0TWVudSgpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2hhcmVDb250ZXh0TWVudSk7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX2dldFByb3RvdHlwZU9mMiA9IF9nZXRQcm90b3R5cGVPZihTaGFyZUNvbnRleHRNZW51KSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0UGFuZWxzIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgcGFuZWxzID0gW107CiAgICAgIHZhciBtZW51SXRlbXMgPSBbXTsKICAgICAgdmFyIHBlcm1hbGlua1BhbmVsID0gewogICAgICAgIGlkOiBwYW5lbHMubGVuZ3RoICsgMSwKICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3NoYXJlLmNvbnRleHRNZW51LnBlcm1hbGlua1BhbmVsVGl0bGUnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1Blcm1hbGluaycKICAgICAgICB9KSwKICAgICAgICBjb250ZW50OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF91cmxfcGFuZWxfY29udGVudC5VcmxQYW5lbENvbnRlbnQsIHsKICAgICAgICAgIGFsbG93U2hvcnRVcmw6IF90aGlzLnByb3BzLmFsbG93U2hvcnRVcmwsCiAgICAgICAgICBvYmplY3RJZDogX3RoaXMucHJvcHMub2JqZWN0SWQsCiAgICAgICAgICBvYmplY3RUeXBlOiBfdGhpcy5wcm9wcy5vYmplY3RUeXBlLAogICAgICAgICAgYmFzZVBhdGg6IF90aGlzLnByb3BzLmJhc2VQYXRoLAogICAgICAgICAgcG9zdDogX3RoaXMucHJvcHMucG9zdCwKICAgICAgICAgIHNoYXJlYWJsZVVybDogX3RoaXMucHJvcHMuc2hhcmVhYmxlVXJsCiAgICAgICAgfSkKICAgICAgfTsKICAgICAgbWVudUl0ZW1zLnB1c2goewogICAgICAgIG5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdzaGFyZS5jb250ZXh0TWVudS5wZXJtYWxpbmtzTGFiZWwnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1Blcm1hbGlua3MnCiAgICAgICAgfSksCiAgICAgICAgaWNvbjogJ2xpbmsnLAogICAgICAgIHBhbmVsOiBwZXJtYWxpbmtQYW5lbC5pZCwKICAgICAgICBzb3J0T3JkZXI6IDAKICAgICAgfSk7CiAgICAgIHBhbmVscy5wdXNoKHBlcm1hbGlua1BhbmVsKTsKCiAgICAgIGlmIChfdGhpcy5wcm9wcy5hbGxvd0VtYmVkKSB7CiAgICAgICAgdmFyIGVtYmVkUGFuZWwgPSB7CiAgICAgICAgICBpZDogcGFuZWxzLmxlbmd0aCArIDEsCiAgICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3NoYXJlLmNvbnRleHRNZW51LmVtYmVkQ29kZVBhbmVsVGl0bGUnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRW1iZWQgQ29kZScKICAgICAgICAgIH0pLAogICAgICAgICAgY29udGVudDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdXJsX3BhbmVsX2NvbnRlbnQuVXJsUGFuZWxDb250ZW50LCB7CiAgICAgICAgICAgIGFsbG93U2hvcnRVcmw6IF90aGlzLnByb3BzLmFsbG93U2hvcnRVcmwsCiAgICAgICAgICAgIGlzRW1iZWRkZWQ6IHRydWUsCiAgICAgICAgICAgIG9iamVjdElkOiBfdGhpcy5wcm9wcy5vYmplY3RJZCwKICAgICAgICAgICAgb2JqZWN0VHlwZTogX3RoaXMucHJvcHMub2JqZWN0VHlwZSwKICAgICAgICAgICAgYmFzZVBhdGg6IF90aGlzLnByb3BzLmJhc2VQYXRoLAogICAgICAgICAgICBwb3N0OiBfdGhpcy5wcm9wcy5wb3N0LAogICAgICAgICAgICBzaGFyZWFibGVVcmw6IF90aGlzLnByb3BzLnNoYXJlYWJsZVVybAogICAgICAgICAgfSkKICAgICAgICB9OwogICAgICAgIHBhbmVscy5wdXNoKGVtYmVkUGFuZWwpOwogICAgICAgIG1lbnVJdGVtcy5wdXNoKHsKICAgICAgICAgIG5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdzaGFyZS5jb250ZXh0TWVudS5lbWJlZENvZGVMYWJlbCcsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFbWJlZCBjb2RlJwogICAgICAgICAgfSksCiAgICAgICAgICBpY29uOiAnY29uc29sZScsCiAgICAgICAgICBwYW5lbDogZW1iZWRQYW5lbC5pZCwKICAgICAgICAgIHNvcnRPcmRlcjogMAogICAgICAgIH0pOwogICAgICB9CgogICAgICBfdGhpcy5wcm9wcy5zaGFyZU1lbnVJdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIHNoYXJlTWVudUl0ZW0gPSBfcmVmLnNoYXJlTWVudUl0ZW0sCiAgICAgICAgICAgIHBhbmVsID0gX3JlZi5wYW5lbDsKICAgICAgICB2YXIgcGFuZWxJZCA9IHBhbmVscy5sZW5ndGggKyAxOwogICAgICAgIHBhbmVscy5wdXNoKF9vYmplY3RTcHJlYWQoe30sIHBhbmVsLCB7CiAgICAgICAgICBpZDogcGFuZWxJZAogICAgICAgIH0pKTsKICAgICAgICBtZW51SXRlbXMucHVzaChfb2JqZWN0U3ByZWFkKHt9LCBzaGFyZU1lbnVJdGVtLCB7CiAgICAgICAgICBwYW5lbDogcGFuZWxJZAogICAgICAgIH0pKTsKICAgICAgfSk7CgogICAgICBpZiAobWVudUl0ZW1zLmxlbmd0aCA+IDEpIHsKICAgICAgICB2YXIgdG9wTGV2ZWxNZW51UGFuZWwgPSB7CiAgICAgICAgICBpZDogcGFuZWxzLmxlbmd0aCArIDEsCiAgICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3NoYXJlLmNvbnRleHRNZW51VGl0bGUnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2hhcmUgdGhpcyB7b2JqZWN0VHlwZX0nLAogICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICBvYmplY3RUeXBlOiBfdGhpcy5wcm9wcy5vYmplY3RUeXBlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgaXRlbXM6IG1lbnVJdGVtcyAvLyBTb3J0cyBhc2NlbmRpbmcgb24gc29ydCBvcmRlciBmaXJzdCBhbmQgdGhlbiBhc2NlbmRpbmcgb24gbmFtZQogICAgICAgICAgLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgdmFyIGFTb3J0T3JkZXIgPSBhLnNvcnRPcmRlciB8fCAwOwogICAgICAgICAgICB2YXIgYlNvcnRPcmRlciA9IGIuc29ydE9yZGVyIHx8IDA7CgogICAgICAgICAgICBpZiAoYVNvcnRPcmRlciA+IGJTb3J0T3JkZXIpIHsKICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGFTb3J0T3JkZXIgPCBiU29ydE9yZGVyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoYS5uYW1lLnRvTG93ZXJDYXNlKCkubG9jYWxlQ29tcGFyZShiLm5hbWUudG9Mb3dlckNhc2UoKSkgPiAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgIH0pLm1hcChmdW5jdGlvbiAobWVudUl0ZW0pIHsKICAgICAgICAgICAgbWVudUl0ZW1bJ2RhdGEtdGVzdC1zdWJqJ10gPSAic2hhcmVQYW5lbC0iLmNvbmNhdChtZW51SXRlbS5uYW1lLnJlcGxhY2UoJyAnLCAnJykpOwogICAgICAgICAgICBkZWxldGUgbWVudUl0ZW0uc29ydE9yZGVyOwogICAgICAgICAgICByZXR1cm4gbWVudUl0ZW07CiAgICAgICAgICB9KQogICAgICAgIH07CiAgICAgICAgcGFuZWxzLnB1c2godG9wTGV2ZWxNZW51UGFuZWwpOwogICAgICB9CgogICAgICB2YXIgbGFzdFBhbmVsSW5kZXggPSBwYW5lbHMubGVuZ3RoIC0gMTsKICAgICAgdmFyIGluaXRpYWxQYW5lbElkID0gcGFuZWxzW2xhc3RQYW5lbEluZGV4XS5pZDsKICAgICAgcmV0dXJuIHsKICAgICAgICBwYW5lbHM6IHBhbmVscywKICAgICAgICBpbml0aWFsUGFuZWxJZDogaW5pdGlhbFBhbmVsSWQKICAgICAgfTsKICAgIH0pOwoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhTaGFyZUNvbnRleHRNZW51LCBbewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRnZXRQYW5lbHMgPSB0aGlzLmdldFBhbmVscygpLAogICAgICAgICAgcGFuZWxzID0gX3RoaXMkZ2V0UGFuZWxzLnBhbmVscywKICAgICAgICAgIGluaXRpYWxQYW5lbElkID0gX3RoaXMkZ2V0UGFuZWxzLmluaXRpYWxQYW5lbElkOwoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5JMThuUHJvdmlkZXIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb250ZXh0TWVudSwgewogICAgICAgIGluaXRpYWxQYW5lbElkOiBpbml0aWFsUGFuZWxJZCwKICAgICAgICBwYW5lbHM6IHBhbmVscywKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAic2hhcmVDb250ZXh0TWVudSIKICAgICAgfSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFNoYXJlQ29udGV4dE1lbnU7Cn0oX3JlYWN0LkNvbXBvbmVudCk7CgpleHBvcnRzLlNoYXJlQ29udGV4dE1lbnUgPSBTaGFyZUNvbnRleHRNZW51Ow=="},null]}