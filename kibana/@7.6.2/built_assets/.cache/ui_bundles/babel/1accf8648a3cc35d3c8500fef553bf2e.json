{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/security/public/views/management/role_mappings/model/rule_builder.js","dependencies":[{"path":"x-pack/legacy/plugins/security/public/views/management/role_mappings/model/rule_builder.js","mtime":1585205047264},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZ2VuZXJhdGVSdWxlc0Zyb21SYXcgPSBnZW5lcmF0ZVJ1bGVzRnJvbVJhdzsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9maWVsZF9ydWxlID0gcmVxdWlyZSgiLi9maWVsZF9ydWxlIik7Cgp2YXIgX2FsbF9ydWxlID0gcmVxdWlyZSgiLi9hbGxfcnVsZSIpOwoKdmFyIF9hbnlfcnVsZSA9IHJlcXVpcmUoIi4vYW55X3J1bGUiKTsKCnZhciBfZXhjZXB0X2FsbF9ydWxlID0gcmVxdWlyZSgiLi9leGNlcHRfYWxsX3J1bGUiKTsKCnZhciBfZXhjZXB0X2FueV9ydWxlID0gcmVxdWlyZSgiLi9leGNlcHRfYW55X3J1bGUiKTsKCnZhciBfID0gcmVxdWlyZSgiLiIpOwoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9Ci8qKgogKiBHaXZlbiBhIHNldCBvZiByYXcgcnVsZXMsIHRoaXMgY29uc3RydWN0cyBhIGNsYXNzIGJhc2VkIHRyZWUgZm9yIGNvbnN1bXB0aW9uIGJ5IHRoZSBSb2xlIE1hbmFnZW1lbnQgVUkuCiAqIFRoaXMgYWxzbyBwZXJmb3JtcyB2YWxpZGF0aW9uIG9uIHRoZSByYXcgcnVsZSBzZXQsIGFzIGl0IGlzIHBvc3NpYmxlIHRvIGVudGVyIHJhdyBKU09OIGluIHRoZSBKU09OUnVsZUVkaXRvciwKICogc28gd2UgaGF2ZSBubyBndWFyYW50ZWVzIHRoYXQgdGhlIHJ1bGUgc2V0IGlzIHZhbGlkIGFoZWFkIG9mIHRpbWUuCiAqCiAqIEBwYXJhbSByYXdSdWxlcyB0aGUgcmF3IHJ1bGVzIHRvIHRyYW5zbGF0ZS4KICovCgoKZnVuY3Rpb24gZ2VuZXJhdGVSdWxlc0Zyb21SYXcoKSB7CiAgdmFyIHJhd1J1bGVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICByZXR1cm4gcGFyc2VSYXdSdWxlcyhyYXdSdWxlcywgbnVsbCwgW10sIDApOwp9CgpmdW5jdGlvbiBwYXJzZVJhd1J1bGVzKHJhd1J1bGVzLCBwYXJlbnRSdWxlVHlwZSwgcnVsZVRyYWNlLCBkZXB0aCkgewogIHZhciBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocmF3UnVsZXMpOwoKICBpZiAoIWVudHJpZXMubGVuZ3RoKSB7CiAgICByZXR1cm4gewogICAgICBydWxlczogbnVsbCwKICAgICAgbWF4RGVwdGg6IDAKICAgIH07CiAgfQoKICBpZiAoZW50cmllcy5sZW5ndGggPiAxKSB7CiAgICB0aHJvdyBuZXcgXy5SdWxlQnVpbGRlckVycm9yKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LmVkaXRSb2xlTWFwcGluZy5ydWxlQnVpbGRlci5leHBlY3RTaW5nbGVSdWxlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogIkV4cGVjdGVkIGEgc2luZ2xlIHJ1bGUgZGVmaW5pdGlvbiwgYnV0IGZvdW5kIHtudW1iZXJPZlJ1bGVzfS4iLAogICAgICB2YWx1ZXM6IHsKICAgICAgICBudW1iZXJPZlJ1bGVzOiBlbnRyaWVzLmxlbmd0aAogICAgICB9CiAgICB9KSwgcnVsZVRyYWNlKTsKICB9CgogIHZhciBydWxlID0gZW50cmllc1swXTsKCiAgdmFyIF9ydWxlID0gX3NsaWNlZFRvQXJyYXkocnVsZSwgMiksCiAgICAgIHJ1bGVUeXBlID0gX3J1bGVbMF0sCiAgICAgIHJ1bGVEZWZpbml0aW9uID0gX3J1bGVbMV07CgogIHJldHVybiBjcmVhdGVSdWxlRm9yVHlwZShydWxlVHlwZSwgcnVsZURlZmluaXRpb24sIHBhcmVudFJ1bGVUeXBlLCBydWxlVHJhY2UsIGRlcHRoICsgMSk7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVJ1bGVGb3JUeXBlKHJ1bGVUeXBlLCBydWxlRGVmaW5pdGlvbiwgcGFyZW50UnVsZVR5cGUpIHsKICB2YXIgcnVsZVRyYWNlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBbXTsKICB2YXIgZGVwdGggPSBhcmd1bWVudHMubGVuZ3RoID4gNCA/IGFyZ3VtZW50c1s0XSA6IHVuZGVmaW5lZDsKICB2YXIgaXNSdWxlTmVnYXRlZCA9IHBhcmVudFJ1bGVUeXBlID09PSAnZXhjZXB0JzsKICB2YXIgY3VycmVudFJ1bGVUcmFjZSA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocnVsZVRyYWNlKSwgW3J1bGVUeXBlXSk7CgogIHN3aXRjaCAocnVsZVR5cGUpIHsKICAgIGNhc2UgJ2ZpZWxkJzoKICAgICAgewogICAgICAgIGFzc2VydElzT2JqZWN0KHJ1bGVEZWZpbml0aW9uLCBjdXJyZW50UnVsZVRyYWNlKTsKICAgICAgICB2YXIgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHJ1bGVEZWZpbml0aW9uKTsKCiAgICAgICAgaWYgKGVudHJpZXMubGVuZ3RoICE9PSAxKSB7CiAgICAgICAgICB0aHJvdyBuZXcgXy5SdWxlQnVpbGRlckVycm9yKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LmVkaXRSb2xlTWFwcGluZy5ydWxlQnVpbGRlci5leHBlY3RlZFNpbmdsZUZpZWxkUnVsZScsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFeHBlY3RlZCBhIHNpbmdsZSBmaWVsZCwgYnV0IGZvdW5kIHtjb3VudH0uIiwKICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgY291bnQ6IGVudHJpZXMubGVuZ3RoCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLCBjdXJyZW50UnVsZVRyYWNlKTsKICAgICAgICB9CgogICAgICAgIHZhciBfcmVmID0gZW50cmllc1swXSwKICAgICAgICAgICAgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSwKICAgICAgICAgICAgZmllbGQgPSBfcmVmMlswXSwKICAgICAgICAgICAgdmFsdWUgPSBfcmVmMlsxXTsKCiAgICAgICAgdmFyIHZhbHVlcyA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdOwogICAgICAgIHZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZFZhbHVlKSB7CiAgICAgICAgICB2YXIgdmFsdWVUeXBlID0gX3R5cGVvZihmaWVsZFZhbHVlKTsKCiAgICAgICAgICBpZiAoZmllbGRWYWx1ZSAhPT0gbnVsbCAmJiAhWydzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nXS5pbmNsdWRlcyh2YWx1ZVR5cGUpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBfLlJ1bGVCdWlsZGVyRXJyb3IoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGVNYXBwaW5nLnJ1bGVCdWlsZGVyLmludmFsaWRGaWVsZFZhbHVlVHlwZScsIHsKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkludmFsaWQgdmFsdWUgdHlwZSBmb3IgZmllbGQuIEV4cGVjdGVkIG9uZSBvZiBudWxsLCBzdHJpbmcsIG51bWJlciwgb3IgYm9vbGVhbiwgYnV0IGZvdW5kIHt2YWx1ZVR5cGV9ICh7dmFsdWV9KS4iLAogICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgdmFsdWVUeXBlOiB2YWx1ZVR5cGUsCiAgICAgICAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkodmFsdWUpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgY3VycmVudFJ1bGVUcmFjZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGZpZWxkUnVsZSA9IG5ldyBfZmllbGRfcnVsZS5GaWVsZFJ1bGUoZmllbGQsIHZhbHVlKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcnVsZXM6IGlzUnVsZU5lZ2F0ZWQgPyBuZXcgX2V4Y2VwdF9hbGxfcnVsZS5FeGNlcHRBbGxSdWxlKFtmaWVsZFJ1bGVdKSA6IGZpZWxkUnVsZSwKICAgICAgICAgIG1heERlcHRoOiBkZXB0aAogICAgICAgIH07CiAgICAgIH0KCiAgICBjYXNlICdhbnknOiAvLyBpbnRlbnRpb25hbCBmYWxsLXRocm91Z2ggdG8gJ2FsbCcsIGFzIHZhbGlkYXRpb24gbG9naWMgaXMgaWRlbnRpY2FsCgogICAgY2FzZSAnYWxsJzoKICAgICAgewogICAgICAgIGlmIChydWxlRGVmaW5pdGlvbiAhPSBudWxsICYmICFBcnJheS5pc0FycmF5KHJ1bGVEZWZpbml0aW9uKSkgewogICAgICAgICAgdGhyb3cgbmV3IF8uUnVsZUJ1aWxkZXJFcnJvcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZU1hcHBpbmcucnVsZUJ1aWxkZXIuZXhwZWN0ZWRBcnJheUZvckdyb3VwUnVsZScsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFeHBlY3RlZCBhbiBhcnJheSBvZiBydWxlcywgYnV0IGZvdW5kIHt0eXBlfS4iLAogICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICB0eXBlOiBfdHlwZW9mKHJ1bGVEZWZpbml0aW9uKQogICAgICAgICAgICB9CiAgICAgICAgICB9KSwgY3VycmVudFJ1bGVUcmFjZSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgc3ViUnVsZXNSZXN1bHRzID0gKHJ1bGVEZWZpbml0aW9uIHx8IFtdKS5tYXAoZnVuY3Rpb24gKGRlZmluaXRpb24sIGluZGV4KSB7CiAgICAgICAgICByZXR1cm4gcGFyc2VSYXdSdWxlcyhkZWZpbml0aW9uLCBydWxlVHlwZSwgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShjdXJyZW50UnVsZVRyYWNlKSwgWyJbIi5jb25jYXQoaW5kZXgsICJdIildKSwgZGVwdGgpOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgX3N1YlJ1bGVzUmVzdWx0cyRyZWR1ID0gc3ViUnVsZXNSZXN1bHRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCByZXN1bHQpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHN1YlJ1bGVzOiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFjYy5zdWJSdWxlcyksIFtyZXN1bHQucnVsZXNdKSwKICAgICAgICAgICAgbWF4RGVwdGg6IE1hdGgubWF4KGFjYy5tYXhEZXB0aCwgcmVzdWx0Lm1heERlcHRoKQogICAgICAgICAgfTsKICAgICAgICB9LCB7CiAgICAgICAgICBzdWJSdWxlczogW10sCiAgICAgICAgICBtYXhEZXB0aDogMAogICAgICAgIH0pLAogICAgICAgICAgICBzdWJSdWxlcyA9IF9zdWJSdWxlc1Jlc3VsdHMkcmVkdS5zdWJSdWxlcywKICAgICAgICAgICAgbWF4RGVwdGggPSBfc3ViUnVsZXNSZXN1bHRzJHJlZHUubWF4RGVwdGg7CgogICAgICAgIGlmIChydWxlVHlwZSA9PT0gJ2FsbCcpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHJ1bGVzOiBpc1J1bGVOZWdhdGVkID8gbmV3IF9leGNlcHRfYWxsX3J1bGUuRXhjZXB0QWxsUnVsZShzdWJSdWxlcykgOiBuZXcgX2FsbF9ydWxlLkFsbFJ1bGUoc3ViUnVsZXMpLAogICAgICAgICAgICBtYXhEZXB0aDogbWF4RGVwdGgKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHJ1bGVzOiBpc1J1bGVOZWdhdGVkID8gbmV3IF9leGNlcHRfYW55X3J1bGUuRXhjZXB0QW55UnVsZShzdWJSdWxlcykgOiBuZXcgX2FueV9ydWxlLkFueVJ1bGUoc3ViUnVsZXMpLAogICAgICAgICAgICBtYXhEZXB0aDogbWF4RGVwdGgKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9CgogICAgY2FzZSAnZXhjZXB0JzoKICAgICAgewogICAgICAgIGFzc2VydElzT2JqZWN0KHJ1bGVEZWZpbml0aW9uLCBjdXJyZW50UnVsZVRyYWNlKTsKCiAgICAgICAgaWYgKHBhcmVudFJ1bGVUeXBlICE9PSAnYWxsJykgewogICAgICAgICAgdGhyb3cgbmV3IF8uUnVsZUJ1aWxkZXJFcnJvcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZU1hcHBpbmcucnVsZUJ1aWxkZXIuZXhjZXB0T25seUluQWxsUnVsZScsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcImV4Y2VwdFwiIHJ1bGUgY2FuIG9ubHkgZXhpc3Qgd2l0aGluIGFuIFwiYWxsXCIgcnVsZS4iCiAgICAgICAgICB9KSwgY3VycmVudFJ1bGVUcmFjZSk7CiAgICAgICAgfSAvLyBzdWJ0cmFjdGluZyAxIGZyb20gZGVwdGggYmVjYXVzZSB3ZSBkb24ndCBjdXJyZW50bHkgY291bnQgdGhlICJleGNlcHQiIGxldmVsIGl0c2VsZiBhcyBwYXJ0IG9mIHRoZSBkZXB0aCBjYWxjdWxhdGlvbgogICAgICAgIC8vIGZvciB0aGUgcHVycG9zZSBvZiBkZXRlcm1pbmluZyBpZiB0aGUgcnVsZSBzZXQgaXMgInRvbyBjb21wbGV4IiBmb3IgdGhlIHZpc3VhbCBydWxlIGVkaXRvci4KICAgICAgICAvLyBUaGUgImV4Y2VwdCIgcnVsZSBNVVNUIGJlIG5lc3RlZCB3aXRoaW4gYW4gImFsbCIgcnVsZSB0eXBlIChzZWUgdmFsaWRhdGlvbiBhYm92ZSksIHNvIHRoZSBkZXB0aCBpdHNlbGYgd2lsbCBhbHdheXMgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLgoKCiAgICAgICAgcmV0dXJuIHBhcnNlUmF3UnVsZXMocnVsZURlZmluaXRpb24gfHwge30sIHJ1bGVUeXBlLCBjdXJyZW50UnVsZVRyYWNlLCBkZXB0aCAtIDEpOwogICAgICB9CgogICAgZGVmYXVsdDoKICAgICAgdGhyb3cgbmV3IF8uUnVsZUJ1aWxkZXJFcnJvcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZU1hcHBpbmcucnVsZUJ1aWxkZXIudW5rbm93blJ1bGVUeXBlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVW5rbm93biBydWxlIHR5cGU6IHtydWxlVHlwZX0uIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIHJ1bGVUeXBlOiBydWxlVHlwZQogICAgICAgIH0KICAgICAgfSksIGN1cnJlbnRSdWxlVHJhY2UpOwogIH0KfQoKZnVuY3Rpb24gYXNzZXJ0SXNPYmplY3QocnVsZURlZmluaXRpb24sIHJ1bGVUcmFjZSkgewogIHZhciBmaWVsZFR5cGUgPSBfdHlwZW9mKHJ1bGVEZWZpbml0aW9uKTsKCiAgaWYgKEFycmF5LmlzQXJyYXkocnVsZURlZmluaXRpb24pKSB7CiAgICBmaWVsZFR5cGUgPSAnYXJyYXknOwogIH0KCiAgaWYgKHJ1bGVEZWZpbml0aW9uICYmIGZpZWxkVHlwZSAhPT0gJ29iamVjdCcpIHsKICAgIHRocm93IG5ldyBfLlJ1bGVCdWlsZGVyRXJyb3IoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGVNYXBwaW5nLnJ1bGVCdWlsZGVyLmV4cGVjdGVkT2JqZWN0RXJyb3InLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRXhwZWN0ZWQgYW4gb2JqZWN0LCBidXQgZm91bmQge3R5cGV9LiIsCiAgICAgIHZhbHVlczogewogICAgICAgIHR5cGU6IGZpZWxkVHlwZQogICAgICB9CiAgICB9KSwgcnVsZVRyYWNlKTsKICB9Cn0="},null]}