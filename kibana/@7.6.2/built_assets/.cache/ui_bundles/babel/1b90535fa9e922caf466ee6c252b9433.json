{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/security/public/views/management/role_mappings/edit_role_mapping/components/edit_role_mapping_page.js","dependencies":[{"path":"x-pack/legacy/plugins/security/public/views/management/role_mappings/edit_role_mapping/components/edit_role_mapping_page.js","mtime":1585205047240},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuRWRpdFJvbGVNYXBwaW5nUGFnZSA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX25vdGlmeSA9IHJlcXVpcmUoInVpL25vdGlmeSIpOwoKdmFyIF9ydWxlX2VkaXRvcl9wYW5lbCA9IHJlcXVpcmUoIi4vcnVsZV9lZGl0b3JfcGFuZWwiKTsKCnZhciBfY29tcG9uZW50cyA9IHJlcXVpcmUoIi4uLy4uL2NvbXBvbmVudHMiKTsKCnZhciBfbWFuYWdlbWVudF91cmxzID0gcmVxdWlyZSgiLi4vLi4vLi4vbWFuYWdlbWVudF91cmxzIik7Cgp2YXIgX3JvbGVfbWFwcGluZ192YWxpZGF0aW9uID0gcmVxdWlyZSgiLi4vc2VydmljZXMvcm9sZV9tYXBwaW5nX3ZhbGlkYXRpb24iKTsKCnZhciBfbWFwcGluZ19pbmZvX3BhbmVsID0gcmVxdWlyZSgiLi9tYXBwaW5nX2luZm9fcGFuZWwiKTsKCnZhciBfZG9jdW1lbnRhdGlvbl9saW5rcyA9IHJlcXVpcmUoIi4uLy4uL3NlcnZpY2VzL2RvY3VtZW50YXRpb25fbGlua3MiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgRWRpdFJvbGVNYXBwaW5nUGFnZSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoRWRpdFJvbGVNYXBwaW5nUGFnZSwgX0NvbXBvbmVudCk7CgogIGZ1bmN0aW9uIEVkaXRSb2xlTWFwcGluZ1BhZ2UocHJvcHMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRWRpdFJvbGVNYXBwaW5nUGFnZSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoRWRpdFJvbGVNYXBwaW5nUGFnZSkuY2FsbCh0aGlzLCBwcm9wcykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdldEZvcm1UaXRsZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGl0bGUsIHsKICAgICAgICBzaXplOiAibCIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiaDEiLCBudWxsLCBfdGhpcy5lZGl0aW5nRXhpc3RpbmdSb2xlTWFwcGluZygpID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGVNYXBwaW5nLmVkaXRSb2xlTWFwcGluZ1RpdGxlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkVkaXQgcm9sZSBtYXBwaW5nIgogICAgICB9KSA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LmVkaXRSb2xlTWFwcGluZy5jcmVhdGVSb2xlTWFwcGluZ1RpdGxlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNyZWF0ZSByb2xlIG1hcHBpbmciCiAgICAgIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCB7CiAgICAgICAgY29sb3I6ICJzdWJkdWVkIiwKICAgICAgICBzaXplOiAicyIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LmVkaXRSb2xlTWFwcGluZy5yb2xlTWFwcGluZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlVzZSByb2xlIG1hcHBpbmdzIHRvIGNvbnRyb2wgd2hpY2ggcm9sZXMgYXJlIGFzc2lnbmVkIHRvIHlvdXIgdXNlcnMuIHtsZWFybk1vcmVMaW5rfSIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBsZWFybk1vcmVMaW5rOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgICAgICBocmVmOiBfZG9jdW1lbnRhdGlvbl9saW5rcy5kb2N1bWVudGF0aW9uTGlua3MuZ2V0Um9sZU1hcHBpbmdEb2NVcmwoKSwKICAgICAgICAgICAgZXh0ZXJuYWw6IHRydWUsCiAgICAgICAgICAgIHRhcmdldDogIl9ibGFuayIKICAgICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAieHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZU1hcHBpbmcubGVhcm5Nb3JlTGlua1RleHQiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkxlYXJuIG1vcmUuIgogICAgICAgICAgfSkpCiAgICAgICAgfQogICAgICB9KSkpLCAhX3RoaXMuc3RhdGUuaGFzQ29tcGF0aWJsZVJlYWxtcyAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5kZWZhdWx0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgICAgc2l6ZTogInMiCiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21wb25lbnRzLk5vQ29tcGF0aWJsZVJlYWxtcywgbnVsbCkpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdldEZvcm1CdXR0b25zIiwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogZmFsc2UKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbiwgewogICAgICAgIGZpbGw6IHRydWUsCiAgICAgICAgb25DbGljazogX3RoaXMuc2F2ZVJvbGVNYXBwaW5nLAogICAgICAgIGlzTG9hZGluZzogX3RoaXMuc3RhdGUubG9hZFN0YXRlID09PSAnc2F2ZUluUHJvZ3Jlc3MnLAogICAgICAgIGRpc2FibGVkOiAhX3RoaXMuc3RhdGUucnVsZXNWYWxpZCB8fCBfdGhpcy5zdGF0ZS5sb2FkU3RhdGUgPT09ICdzYXZlSW5Qcm9ncmVzcycsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInNhdmVSb2xlTWFwcGluZ0J1dHRvbiIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGVNYXBwaW5nLnNhdmVSb2xlTWFwcGluZ0J1dHRvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTYXZlIHJvbGUgbWFwcGluZyIKICAgICAgfSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogZmFsc2UsCiAgICAgICAgb25DbGljazogX3RoaXMuYmFja1RvUm9sZU1hcHBpbmdzTGlzdAogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZU1hcHBpbmcuY2FuY2VsQnV0dG9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNhbmNlbCIKICAgICAgfSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogdHJ1ZQogICAgICB9KSwgX3RoaXMuZWRpdGluZ0V4aXN0aW5nUm9sZU1hcHBpbmcoKSAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21wb25lbnRzLkRlbGV0ZVByb3ZpZGVyLCB7CiAgICAgICAgcm9sZU1hcHBpbmdzQVBJOiBfdGhpcy5wcm9wcy5yb2xlTWFwcGluZ3NBUEkKICAgICAgfSwgZnVuY3Rpb24gKGRlbGV0ZVJvbGVNYXBwaW5nc1Byb21wdCkgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uRW1wdHksIHsKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgIHJldHVybiBkZWxldGVSb2xlTWFwcGluZ3NQcm9tcHQoW190aGlzLnN0YXRlLnJvbGVNYXBwaW5nXSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5iYWNrVG9Sb2xlTWFwcGluZ3NMaXN0KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSwKICAgICAgICAgIGNvbG9yOiAiZGFuZ2VyIgogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGVNYXBwaW5nLmRlbGV0ZVJvbGVNYXBwaW5nQnV0dG9uIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRGVsZXRlIHJvbGUgbWFwcGluZyIKICAgICAgICB9KSk7CiAgICAgIH0pKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvblJ1bGVWYWxpZGl0eUNoYW5nZSIsIGZ1bmN0aW9uIChydWxlc1ZhbGlkKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBydWxlc1ZhbGlkOiBydWxlc1ZhbGlkCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic2F2ZVJvbGVNYXBwaW5nIiwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoIV90aGlzLnN0YXRlLnJvbGVNYXBwaW5nKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgX3ZhbGlkYXRlUm9sZU1hcHBpbmdGID0gKDAsIF9yb2xlX21hcHBpbmdfdmFsaWRhdGlvbi52YWxpZGF0ZVJvbGVNYXBwaW5nRm9yU2F2ZSkoX3RoaXMuc3RhdGUucm9sZU1hcHBpbmcpLAogICAgICAgICAgaXNJbnZhbGlkID0gX3ZhbGlkYXRlUm9sZU1hcHBpbmdGLmlzSW52YWxpZDsKCiAgICAgIGlmIChpc0ludmFsaWQpIHsKICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICB2YWxpZGF0ZUZvcm06IHRydWUKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgcm9sZU1hcHBpbmdOYW1lID0gX3RoaXMuc3RhdGUucm9sZU1hcHBpbmcubmFtZTsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBsb2FkU3RhdGU6ICdzYXZlSW5Qcm9ncmVzcycKICAgICAgfSk7CgogICAgICBfdGhpcy5wcm9wcy5yb2xlTWFwcGluZ3NBUEkuc2F2ZVJvbGVNYXBwaW5nKF90aGlzLnN0YXRlLnJvbGVNYXBwaW5nKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGRTdWNjZXNzKHsKICAgICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZU1hcHBpbmcuc2F2ZVN1Y2Nlc3MnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2F2ZWQgcm9sZSBtYXBwaW5nICd7cm9sZU1hcHBpbmdOYW1lfSciLAogICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICByb2xlTWFwcGluZ05hbWU6IHJvbGVNYXBwaW5nTmFtZQogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgICdkYXRhLXRlc3Qtc3Viaic6ICdzYXZlZFJvbGVNYXBwaW5nU3VjY2Vzc1RvYXN0JwogICAgICAgIH0pOwoKICAgICAgICBfdGhpcy5iYWNrVG9Sb2xlTWFwcGluZ3NMaXN0KCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIF9lJGJvZHk7CgogICAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZEVycm9yKGUsIHsKICAgICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZU1hcHBpbmcuc2F2ZUVycm9yJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkVycm9yIHNhdmluZyByb2xlIG1hcHBpbmciCiAgICAgICAgICB9KSwKICAgICAgICAgIHRvYXN0TWVzc2FnZTogZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2UkYm9keSA9IGUuYm9keSkgPT09IG51bGwgfHwgX2UkYm9keSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UkYm9keS5tZXNzYWdlCiAgICAgICAgfSk7CgogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGxvYWRTdGF0ZTogJ3NhdmVJblByb2dyZXNzJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImVkaXRpbmdFeGlzdGluZ1JvbGVNYXBwaW5nIiwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdHlwZW9mIF90aGlzLnByb3BzLm5hbWUgPT09ICdzdHJpbmcnOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiYmFja1RvUm9sZU1hcHBpbmdzTGlzdCIsIGZ1bmN0aW9uICgpIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBfbWFuYWdlbWVudF91cmxzLlJPTEVfTUFQUElOR1NfUEFUSDsKICAgIH0pOwoKICAgIF90aGlzLnN0YXRlID0gewogICAgICBsb2FkU3RhdGU6ICdsb2FkaW5nJywKICAgICAgcm9sZU1hcHBpbmc6IG51bGwsCiAgICAgIGhhc0NvbXBhdGlibGVSZWFsbXM6IHRydWUsCiAgICAgIGNhblVzZVN0b3JlZFNjcmlwdHM6IHRydWUsCiAgICAgIGNhblVzZUlubGluZVNjcmlwdHM6IHRydWUsCiAgICAgIHJ1bGVzVmFsaWQ6IHRydWUsCiAgICAgIHZhbGlkYXRlRm9ybTogZmFsc2UsCiAgICAgIGZvcm1FcnJvcjogewogICAgICAgIGlzSW52YWxpZDogZmFsc2UKICAgICAgfQogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhFZGl0Um9sZU1hcHBpbmdQYWdlLCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLmxvYWRBcHBEYXRhKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGxvYWRTdGF0ZSA9IHRoaXMuc3RhdGUubG9hZFN0YXRlOwoKICAgICAgaWYgKGxvYWRTdGF0ZSA9PT0gJ3Blcm1pc3Npb25EZW5pZWQnKSB7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbXBvbmVudHMuUGVybWlzc2lvbkRlbmllZCwgbnVsbCk7CiAgICAgIH0KCiAgICAgIGlmIChsb2FkU3RhdGUgPT09ICdsb2FkaW5nJykgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFnZUNvbnRlbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbXBvbmVudHMuU2VjdGlvbkxvYWRpbmcsIG51bGwpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtLCB7CiAgICAgICAgaXNJbnZhbGlkOiB0aGlzLnN0YXRlLmZvcm1FcnJvci5pc0ludmFsaWQsCiAgICAgICAgZXJyb3I6IHRoaXMuc3RhdGUuZm9ybUVycm9yLmVycm9yCiAgICAgIH0sIHRoaXMuZ2V0Rm9ybVRpdGxlKCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIG51bGwpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9tYXBwaW5nX2luZm9fcGFuZWwuTWFwcGluZ0luZm9QYW5lbCwgewogICAgICAgIHJvbGVNYXBwaW5nOiB0aGlzLnN0YXRlLnJvbGVNYXBwaW5nLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShyb2xlTWFwcGluZykgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICAgIHJvbGVNYXBwaW5nOiByb2xlTWFwcGluZwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBtb2RlOiB0aGlzLmVkaXRpbmdFeGlzdGluZ1JvbGVNYXBwaW5nKCkgPyAnZWRpdCcgOiAnY3JlYXRlJywKICAgICAgICB2YWxpZGF0ZUZvcm06IHRoaXMuc3RhdGUudmFsaWRhdGVGb3JtLAogICAgICAgIGNhblVzZUlubGluZVNjcmlwdHM6IHRoaXMuc3RhdGUuY2FuVXNlSW5saW5lU2NyaXB0cywKICAgICAgICBjYW5Vc2VTdG9yZWRTY3JpcHRzOiB0aGlzLnN0YXRlLmNhblVzZVN0b3JlZFNjcmlwdHMKICAgICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIG51bGwpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ydWxlX2VkaXRvcl9wYW5lbC5SdWxlRWRpdG9yUGFuZWwsIHsKICAgICAgICByYXdSdWxlczogdGhpcy5zdGF0ZS5yb2xlTWFwcGluZy5ydWxlcywKICAgICAgICB2YWxpZGF0ZUZvcm06IHRoaXMuc3RhdGUudmFsaWRhdGVGb3JtLAogICAgICAgIG9uVmFsaWRpdHlDaGFuZ2U6IHRoaXMub25SdWxlVmFsaWRpdHlDaGFuZ2UsCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHJ1bGVzKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMyLnNldFN0YXRlKHsKICAgICAgICAgICAgcm9sZU1hcHBpbmc6IF9vYmplY3RTcHJlYWQoe30sIF90aGlzMi5zdGF0ZS5yb2xlTWFwcGluZywgewogICAgICAgICAgICAgIHJ1bGVzOiBydWxlcwogICAgICAgICAgICB9KQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgbnVsbCksIHRoaXMuZ2V0Rm9ybUJ1dHRvbnMoKSkpOwogICAgfQogIH0sIHsKICAgIGtleTogImxvYWRBcHBEYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkQXBwRGF0YSgpIHsKICAgICAgdmFyIF9yZWYsIF9yZWYyLCBmZWF0dXJlcywgcm9sZU1hcHBpbmcsIGNhbk1hbmFnZVJvbGVNYXBwaW5ncywgY2FuVXNlU3RvcmVkU2NyaXB0cywgY2FuVXNlSW5saW5lU2NyaXB0cywgaGFzQ29tcGF0aWJsZVJlYWxtcywgbG9hZFN0YXRlLCBfcmVmMywgX2UkYm9keTI7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGxvYWRBcHBEYXRhJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKFByb21pc2UuYWxsKFt0aGlzLnByb3BzLnJvbGVNYXBwaW5nc0FQSS5jaGVja1JvbGVNYXBwaW5nRmVhdHVyZXMoKSwgdGhpcy5lZGl0aW5nRXhpc3RpbmdSb2xlTWFwcGluZygpID8gdGhpcy5wcm9wcy5yb2xlTWFwcGluZ3NBUEkuZ2V0Um9sZU1hcHBpbmcodGhpcy5wcm9wcy5uYW1lKSA6IFByb21pc2UucmVzb2x2ZSh7CiAgICAgICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsCiAgICAgICAgICAgICAgICBtZXRhZGF0YToge30sCiAgICAgICAgICAgICAgICByb2xlX3RlbXBsYXRlczogW10sCiAgICAgICAgICAgICAgICByb2xlczogW10sCiAgICAgICAgICAgICAgICBydWxlczoge30KICAgICAgICAgICAgICB9KV0pKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBfcmVmID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpOwogICAgICAgICAgICAgIGZlYXR1cmVzID0gX3JlZjJbMF07CiAgICAgICAgICAgICAgcm9sZU1hcHBpbmcgPSBfcmVmMlsxXTsKICAgICAgICAgICAgICBjYW5NYW5hZ2VSb2xlTWFwcGluZ3MgPSBmZWF0dXJlcy5jYW5NYW5hZ2VSb2xlTWFwcGluZ3MsIGNhblVzZVN0b3JlZFNjcmlwdHMgPSBmZWF0dXJlcy5jYW5Vc2VTdG9yZWRTY3JpcHRzLCBjYW5Vc2VJbmxpbmVTY3JpcHRzID0gZmVhdHVyZXMuY2FuVXNlSW5saW5lU2NyaXB0cywgaGFzQ29tcGF0aWJsZVJlYWxtcyA9IGZlYXR1cmVzLmhhc0NvbXBhdGlibGVSZWFsbXM7CiAgICAgICAgICAgICAgbG9hZFN0YXRlID0gY2FuTWFuYWdlUm9sZU1hcHBpbmdzID8gJ3JlYWR5JyA6ICdwZXJtaXNzaW9uRGVuaWVkJzsKICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGxvYWRTdGF0ZTogbG9hZFN0YXRlLAogICAgICAgICAgICAgICAgaGFzQ29tcGF0aWJsZVJlYWxtczogaGFzQ29tcGF0aWJsZVJlYWxtcywKICAgICAgICAgICAgICAgIGNhblVzZVN0b3JlZFNjcmlwdHM6IGNhblVzZVN0b3JlZFNjcmlwdHMsCiAgICAgICAgICAgICAgICBjYW5Vc2VJbmxpbmVTY3JpcHRzOiBjYW5Vc2VJbmxpbmVTY3JpcHRzLAogICAgICAgICAgICAgICAgcm9sZU1hcHBpbmc6IHJvbGVNYXBwaW5nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkRGFuZ2VyKHsKICAgICAgICAgICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZU1hcHBpbmcudGFibGUuZmV0Y2hpbmdSb2xlTWFwcGluZ3NFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRXJyb3IgbG9hZGluZyByb2xlIG1hcHBpbmcgZWRpdG9yOiB7bWVzc2FnZX0nLAogICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAoX3JlZjMgPSBfY29udGV4dC50MCA9PT0gbnVsbCB8fCBfY29udGV4dC50MCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lJGJvZHkyID0gX2NvbnRleHQudDAuYm9keSkgPT09IG51bGwgfHwgX2UkYm9keTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lJGJvZHkyLm1lc3NhZ2UpICE9PSBudWxsICYmIF9yZWYzICE9PSB2b2lkIDAgPyBfcmVmMyA6ICcnCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgJ2RhdGEtdGVzdC1zdWJqJzogJ2Vycm9yTG9hZGluZ1JvbGVNYXBwaW5nRWRpdG9yVG9hc3QnCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHRoaXMuYmFja1RvUm9sZU1hcHBpbmdzTGlzdCgpOwoKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcywgW1swLCAxMl1dKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBFZGl0Um9sZU1hcHBpbmdQYWdlOwp9KF9yZWFjdC5Db21wb25lbnQpOwoKZXhwb3J0cy5FZGl0Um9sZU1hcHBpbmdQYWdlID0gRWRpdFJvbGVNYXBwaW5nUGFnZTs="},null]}