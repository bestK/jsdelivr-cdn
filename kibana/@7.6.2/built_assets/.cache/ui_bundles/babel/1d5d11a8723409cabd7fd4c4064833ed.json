{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/management/sections/index_patterns/edit_index_pattern/source_filters_table/source_filters_table.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/management/sections/index_patterns/edit_index_pattern/source_filters_table/source_filters_table.js","mtime":1585205039831},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlNvdXJjZUZpbHRlcnNUYWJsZSA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcHJvcFR5cGVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJwcm9wLXR5cGVzIikpOwoKdmFyIF9yZXNlbGVjdCA9IHJlcXVpcmUoInJlc2VsZWN0Iik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF90YWJsZSA9IHJlcXVpcmUoIi4vY29tcG9uZW50cy90YWJsZSIpOwoKdmFyIF9oZWFkZXIgPSByZXF1aXJlKCIuL2NvbXBvbmVudHMvaGVhZGVyIik7Cgp2YXIgX2FkZF9maWx0ZXIgPSByZXF1aXJlKCIuL2NvbXBvbmVudHMvYWRkX2ZpbHRlciIpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OyBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9Cgp2YXIgU291cmNlRmlsdGVyc1RhYmxlID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhTb3VyY2VGaWx0ZXJzVGFibGUsIF9Db21wb25lbnQpOwoKICBmdW5jdGlvbiBTb3VyY2VGaWx0ZXJzVGFibGUoX3Byb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNvdXJjZUZpbHRlcnNUYWJsZSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoU291cmNlRmlsdGVyc1RhYmxlKS5jYWxsKHRoaXMsIF9wcm9wcykpOyAvLyBTb3VyY2UgZmlsdGVycyBkbyBub3QgaGF2ZSBhbnkgdW5pcXVlIGlkcywgb25seSB0aGUgdmFsdWUgaXMgc3RvcmVkLgogICAgLy8gVG8gZW5zdXJlIHdlIGNhbiBjcmVhdGUgYSBjb25zaXN0ZW50IGFuZCBleHBlY3RlZCBVWCB3aGVuIG1hbmFnaW5nCiAgICAvLyBzb3VyY2UgZmlsdGVycywgd2UgYXJlIGFzc2lnbmluZyBhIHVuaXF1ZSBpZCB0byBlYWNoIGZpbHRlciBvbiB0aGUKICAgIC8vIGNsaWVudCBzaWRlIG9ubHkKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ1cGRhdGVGaWx0ZXJzIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgc291cmNlRmlsdGVycyA9IF90aGlzLnByb3BzLmluZGV4UGF0dGVybi5zb3VyY2VGaWx0ZXJzIHx8IFtdOwogICAgICB2YXIgZmlsdGVycyA9IHNvdXJjZUZpbHRlcnMubWFwKGZ1bmN0aW9uIChmaWx0ZXIpIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgZmlsdGVyLCB7CiAgICAgICAgICBjbGllbnRJZDogKytfdGhpcy5jbGllbnRTaWRlSWQKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZmlsdGVyczogZmlsdGVycwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdldEZpbHRlcmVkRmlsdGVycyIsICgwLCBfcmVzZWxlY3QuY3JlYXRlU2VsZWN0b3IpKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuZmlsdGVyczsKICAgIH0sIGZ1bmN0aW9uIChzdGF0ZSwgcHJvcHMpIHsKICAgICAgcmV0dXJuIHByb3BzLmZpbHRlckZpbHRlcjsKICAgIH0sIGZ1bmN0aW9uIChmaWx0ZXJzLCBmaWx0ZXJGaWx0ZXIpIHsKICAgICAgaWYgKGZpbHRlckZpbHRlcikgewogICAgICAgIHZhciBmaWx0ZXJGaWx0ZXJUb0xvd2VyY2FzZSA9IGZpbHRlckZpbHRlci50b0xvd2VyQ2FzZSgpOwogICAgICAgIHJldHVybiBmaWx0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZmlsdGVyKSB7CiAgICAgICAgICByZXR1cm4gZmlsdGVyLnZhbHVlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZmlsdGVyRmlsdGVyVG9Mb3dlcmNhc2UpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gZmlsdGVyczsKICAgIH0pKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzdGFydERlbGV0ZUZpbHRlciIsIGZ1bmN0aW9uIChmaWx0ZXIpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGZpbHRlclRvRGVsZXRlOiBmaWx0ZXIsCiAgICAgICAgaXNEZWxldGVDb25maXJtYXRpb25Nb2RhbFZpc2libGU6IHRydWUKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoaWRlRGVsZXRlQ29uZmlybWF0aW9uTW9kYWwiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBmaWx0ZXJUb0RlbGV0ZTogdW5kZWZpbmVkLAogICAgICAgIGlzRGVsZXRlQ29uZmlybWF0aW9uTW9kYWxWaXNpYmxlOiBmYWxzZQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImRlbGV0ZUZpbHRlciIsIGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcywgaW5kZXhQYXR0ZXJuLCBvbkFkZE9yUmVtb3ZlRmlsdGVyLCBfdGhpcyRzdGF0ZSwgZmlsdGVyVG9EZWxldGUsIGZpbHRlcnM7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsIGluZGV4UGF0dGVybiA9IF90aGlzJHByb3BzLmluZGV4UGF0dGVybiwgb25BZGRPclJlbW92ZUZpbHRlciA9IF90aGlzJHByb3BzLm9uQWRkT3JSZW1vdmVGaWx0ZXI7CiAgICAgICAgICAgICAgX3RoaXMkc3RhdGUgPSBfdGhpcy5zdGF0ZSwgZmlsdGVyVG9EZWxldGUgPSBfdGhpcyRzdGF0ZS5maWx0ZXJUb0RlbGV0ZSwgZmlsdGVycyA9IF90aGlzJHN0YXRlLmZpbHRlcnM7CiAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJuLnNvdXJjZUZpbHRlcnMgPSBmaWx0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZmlsdGVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyLmNsaWVudElkICE9PSBmaWx0ZXJUb0RlbGV0ZS5jbGllbnRJZDsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNTYXZpbmc6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChpbmRleFBhdHRlcm4uc2F2ZSgpKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBvbkFkZE9yUmVtb3ZlRmlsdGVyICYmIG9uQWRkT3JSZW1vdmVGaWx0ZXIoKTsKCiAgICAgICAgICAgICAgX3RoaXMudXBkYXRlRmlsdGVycygpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc1NhdmluZzogZmFsc2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXMuaGlkZURlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsKCk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uQWRkRmlsdGVyIiwgZnVuY3Rpb24gX2NhbGxlZTIodmFsdWUpIHsKICAgICAgdmFyIF90aGlzJHByb3BzMiwgaW5kZXhQYXR0ZXJuLCBvbkFkZE9yUmVtb3ZlRmlsdGVyOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXMkcHJvcHMyID0gX3RoaXMucHJvcHMsIGluZGV4UGF0dGVybiA9IF90aGlzJHByb3BzMi5pbmRleFBhdHRlcm4sIG9uQWRkT3JSZW1vdmVGaWx0ZXIgPSBfdGhpcyRwcm9wczIub25BZGRPclJlbW92ZUZpbHRlcjsKICAgICAgICAgICAgICBpbmRleFBhdHRlcm4uc291cmNlRmlsdGVycyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoaW5kZXhQYXR0ZXJuLnNvdXJjZUZpbHRlcnMgfHwgW10pLCBbewogICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgICAgICAgfV0pOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc1NhdmluZzogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChpbmRleFBhdHRlcm4uc2F2ZSgpKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBvbkFkZE9yUmVtb3ZlRmlsdGVyICYmIG9uQWRkT3JSZW1vdmVGaWx0ZXIoKTsKCiAgICAgICAgICAgICAgX3RoaXMudXBkYXRlRmlsdGVycygpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc1NhdmluZzogZmFsc2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic2F2ZUZpbHRlciIsIGZ1bmN0aW9uIF9jYWxsZWUzKF9yZWYpIHsKICAgICAgdmFyIGZpbHRlcklkLCBuZXdGaWx0ZXJWYWx1ZSwgaW5kZXhQYXR0ZXJuLCBmaWx0ZXJzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBmaWx0ZXJJZCA9IF9yZWYuZmlsdGVySWQsIG5ld0ZpbHRlclZhbHVlID0gX3JlZi5uZXdGaWx0ZXJWYWx1ZTsKICAgICAgICAgICAgICBpbmRleFBhdHRlcm4gPSBfdGhpcy5wcm9wcy5pbmRleFBhdHRlcm47CiAgICAgICAgICAgICAgZmlsdGVycyA9IF90aGlzLnN0YXRlLmZpbHRlcnM7CiAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJuLnNvdXJjZUZpbHRlcnMgPSBmaWx0ZXJzLm1hcChmdW5jdGlvbiAoZmlsdGVyKSB7CiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmNsaWVudElkID09PSBmaWx0ZXJJZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXdGaWx0ZXJWYWx1ZSwKICAgICAgICAgICAgICAgICAgICBjbGllbnRJZDogZmlsdGVyLmNsaWVudElkCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcjsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNTYXZpbmc6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoaW5kZXhQYXR0ZXJuLnNhdmUoKSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX3RoaXMudXBkYXRlRmlsdGVycygpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc1NhdmluZzogZmFsc2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CgogICAgX3RoaXMuY2xpZW50U2lkZUlkID0gMDsKICAgIF90aGlzLnN0YXRlID0gewogICAgICBmaWx0ZXJUb0RlbGV0ZTogdW5kZWZpbmVkLAogICAgICBpc0RlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsVmlzaWJsZTogZmFsc2UsCiAgICAgIGlzU2F2aW5nOiBmYWxzZSwKICAgICAgZmlsdGVyczogW10KICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoU291cmNlRmlsdGVyc1RhYmxlLCBbewogICAga2V5OiAiVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCgpIHsKICAgICAgdGhpcy51cGRhdGVGaWx0ZXJzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyRGVsZXRlQ29uZmlybWF0aW9uTW9kYWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsKCkgewogICAgICB2YXIgZmlsdGVyVG9EZWxldGUgPSB0aGlzLnN0YXRlLmZpbHRlclRvRGVsZXRlOwoKICAgICAgaWYgKCFmaWx0ZXJUb0RlbGV0ZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aU92ZXJsYXlNYXNrLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29uZmlybU1vZGFsLCB7CiAgICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogImtibi5tYW5hZ2VtZW50LmVkaXRJbmRleFBhdHRlcm4uc291cmNlLmRlbGV0ZVNvdXJjZUZpbHRlckxhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRGVsZXRlIHNvdXJjZSBmaWx0ZXIgJ3t2YWx1ZX0nPyIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgdmFsdWU6IGZpbHRlclRvRGVsZXRlLnZhbHVlCiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgb25DYW5jZWw6IHRoaXMuaGlkZURlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsLAogICAgICAgIG9uQ29uZmlybTogdGhpcy5kZWxldGVGaWx0ZXIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAia2JuLm1hbmFnZW1lbnQuZWRpdEluZGV4UGF0dGVybi5zb3VyY2UuZGVsZXRlRmlsdGVyLmNhbmNlbEJ1dHRvbkxhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ2FuY2VsIgogICAgICAgIH0pLAogICAgICAgIGJ1dHRvbkNvbG9yOiAiZGFuZ2VyIiwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAia2JuLm1hbmFnZW1lbnQuZWRpdEluZGV4UGF0dGVybi5zb3VyY2UuZGVsZXRlRmlsdGVyLmRlbGV0ZUJ1dHRvbkxhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRGVsZXRlIgogICAgICAgIH0pLAogICAgICAgIGRlZmF1bHRGb2N1c2VkQnV0dG9uOiBfZXVpLkVVSV9NT0RBTF9DT05GSVJNX0JVVFRPTgogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczMgPSB0aGlzLnByb3BzLAogICAgICAgICAgaW5kZXhQYXR0ZXJuID0gX3RoaXMkcHJvcHMzLmluZGV4UGF0dGVybiwKICAgICAgICAgIGZpZWxkV2lsZGNhcmRNYXRjaGVyID0gX3RoaXMkcHJvcHMzLmZpZWxkV2lsZGNhcmRNYXRjaGVyOwogICAgICB2YXIgaXNTYXZpbmcgPSB0aGlzLnN0YXRlLmlzU2F2aW5nOwogICAgICB2YXIgZmlsdGVyZWRGaWx0ZXJzID0gdGhpcy5nZXRGaWx0ZXJlZEZpbHRlcnModGhpcy5zdGF0ZSwgdGhpcy5wcm9wcyk7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9oZWFkZXIuSGVhZGVyLCBudWxsKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfYWRkX2ZpbHRlci5BZGRGaWx0ZXIsIHsKICAgICAgICBvbkFkZEZpbHRlcjogdGhpcy5vbkFkZEZpbHRlcgogICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICAgIHNpemU6ICJsIgogICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdGFibGUuVGFibGUsIHsKICAgICAgICBpc1NhdmluZzogaXNTYXZpbmcsCiAgICAgICAgaW5kZXhQYXR0ZXJuOiBpbmRleFBhdHRlcm4sCiAgICAgICAgaXRlbXM6IGZpbHRlcmVkRmlsdGVycywKICAgICAgICBmaWVsZFdpbGRjYXJkTWF0Y2hlcjogZmllbGRXaWxkY2FyZE1hdGNoZXIsCiAgICAgICAgZGVsZXRlRmlsdGVyOiB0aGlzLnN0YXJ0RGVsZXRlRmlsdGVyLAogICAgICAgIHNhdmVGaWx0ZXI6IHRoaXMuc2F2ZUZpbHRlcgogICAgICB9KSwgdGhpcy5yZW5kZXJEZWxldGVDb25maXJtYXRpb25Nb2RhbCgpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBTb3VyY2VGaWx0ZXJzVGFibGU7Cn0oX3JlYWN0LkNvbXBvbmVudCk7CgpleHBvcnRzLlNvdXJjZUZpbHRlcnNUYWJsZSA9IFNvdXJjZUZpbHRlcnNUYWJsZTsKCl9kZWZpbmVQcm9wZXJ0eShTb3VyY2VGaWx0ZXJzVGFibGUsICJwcm9wVHlwZXMiLCB7CiAgaW5kZXhQYXR0ZXJuOiBfcHJvcFR5cGVzLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWQsCiAgZmlsdGVyRmlsdGVyOiBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nLAogIGZpZWxkV2lsZGNhcmRNYXRjaGVyOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIG9uQWRkT3JSZW1vdmVGaWx0ZXI6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jCn0pOw=="},null]}