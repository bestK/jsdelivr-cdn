{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/upgrade_assistant/public/np_ready/application/components/tabs/checkup/deprecations/reindex/flyout/progress.js","dependencies":[{"path":"x-pack/legacy/plugins/upgrade_assistant/public/np_ready/application/components/tabs/checkup/deprecations/reindex/flyout/progress.js","mtime":1585205048659},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlJlaW5kZXhQcm9ncmVzcyA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX3R5cGVzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vY29tbW9uL3R5cGVzIik7Cgp2YXIgX3R5cGVzMiA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uL3R5cGVzIik7Cgp2YXIgX3N0ZXBfcHJvZ3Jlc3MgPSByZXF1aXJlKCIuL3N0ZXBfcHJvZ3Jlc3MiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgRXJyb3JDYWxsb3V0ID0gZnVuY3Rpb24gRXJyb3JDYWxsb3V0KF9yZWYpIHsKICB2YXIgZXJyb3JNZXNzYWdlID0gX3JlZi5lcnJvck1lc3NhZ2U7CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDYWxsT3V0LCB7CiAgICBjb2xvcjogImRhbmdlciIsCiAgICB0aXRsZTogIlRoZXJlIHdhcyBhbiBlcnJvciIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIGVycm9yTWVzc2FnZSkpKTsKfTsKCnZhciBQYXVzZWRDYWxsb3V0ID0gZnVuY3Rpb24gUGF1c2VkQ2FsbG91dCgpIHsKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgIGNvbG9yOiAid2FybmluZyIsCiAgICB0aXRsZTogIlRoaXMgc3RlcCB3YXMgcGF1c2VkIGR1ZSB0byBhIEtpYmFuYSByZXN0YXJ0LiBDbGljayAnUmVzdW1lJyBiZWxvdyB0byBjb250aW51ZS4iCiAgfSk7Cn07Cgp2YXIgUmVpbmRleFByb2dyZXNzQmFyID0gZnVuY3Rpb24gUmVpbmRleFByb2dyZXNzQmFyKF9yZWYyKSB7CiAgdmFyIF9yZWYyJHJlaW5kZXhTdGF0ZSA9IF9yZWYyLnJlaW5kZXhTdGF0ZSwKICAgICAgbGFzdENvbXBsZXRlZFN0ZXAgPSBfcmVmMiRyZWluZGV4U3RhdGUubGFzdENvbXBsZXRlZFN0ZXAsCiAgICAgIHN0YXR1cyA9IF9yZWYyJHJlaW5kZXhTdGF0ZS5zdGF0dXMsCiAgICAgIHJlaW5kZXhUYXNrUGVyY0NvbXBsZXRlID0gX3JlZjIkcmVpbmRleFN0YXRlLnJlaW5kZXhUYXNrUGVyY0NvbXBsZXRlLAogICAgICBjYW5jZWxMb2FkaW5nU3RhdGUgPSBfcmVmMiRyZWluZGV4U3RhdGUuY2FuY2VsTG9hZGluZ1N0YXRlLAogICAgICBjYW5jZWxSZWluZGV4ID0gX3JlZjIuY2FuY2VsUmVpbmRleDsKICB2YXIgcHJvZ3Jlc3NCYXIgPSByZWluZGV4VGFza1BlcmNDb21wbGV0ZSA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQcm9ncmVzcywgewogICAgc2l6ZTogInMiLAogICAgdmFsdWU6IHJlaW5kZXhUYXNrUGVyY0NvbXBsZXRlLAogICAgbWF4OiAxCiAgfSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUHJvZ3Jlc3MsIHsKICAgIHNpemU6ICJzIgogIH0pOwogIHZhciBjYW5jZWxUZXh0OwoKICBzd2l0Y2ggKGNhbmNlbExvYWRpbmdTdGF0ZSkgewogICAgY2FzZSBfdHlwZXMyLkxvYWRpbmdTdGF0ZS5Mb2FkaW5nOgogICAgICBjYW5jZWxUZXh0ID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnVwZ3JhZGVBc3Npc3RhbnQuY2hlY2t1cFRhYi5yZWluZGV4aW5nLmZseW91dC5jaGVja2xpc3RTdGVwLnJlaW5kZXhpbmdDaGVja2xpc3QuY2FuY2VsQnV0dG9uLmNhbmNlbGxpbmdMYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDYW5jZWxsaW5nXHUyMDI2IgogICAgICB9KTsKICAgICAgYnJlYWs7CgogICAgY2FzZSBfdHlwZXMyLkxvYWRpbmdTdGF0ZS5TdWNjZXNzOgogICAgICBjYW5jZWxUZXh0ID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnVwZ3JhZGVBc3Npc3RhbnQuY2hlY2t1cFRhYi5yZWluZGV4aW5nLmZseW91dC5jaGVja2xpc3RTdGVwLnJlaW5kZXhpbmdDaGVja2xpc3QuY2FuY2VsQnV0dG9uLmNhbmNlbGxlZExhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNhbmNlbGxlZCIKICAgICAgfSk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgX3R5cGVzMi5Mb2FkaW5nU3RhdGUuRXJyb3I6CiAgICAgIGNhbmNlbFRleHQgPSAnQ291bGQgbm90IGNhbmNlbCc7CiAgICAgIGNhbmNlbFRleHQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2sudXBncmFkZUFzc2lzdGFudC5jaGVja3VwVGFiLnJlaW5kZXhpbmcuZmx5b3V0LmNoZWNrbGlzdFN0ZXAucmVpbmRleGluZ0NoZWNrbGlzdC5jYW5jZWxCdXR0b24uZXJyb3JMYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDb3VsZCBub3QgY2FuY2VsIgogICAgICB9KTsKICAgICAgYnJlYWs7CgogICAgZGVmYXVsdDoKICAgICAgY2FuY2VsVGV4dCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay51cGdyYWRlQXNzaXN0YW50LmNoZWNrdXBUYWIucmVpbmRleGluZy5mbHlvdXQuY2hlY2tsaXN0U3RlcC5yZWluZGV4aW5nQ2hlY2tsaXN0LmNhbmNlbEJ1dHRvbi5jYW5jZWxMYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDYW5jZWwiCiAgICAgIH0pOwogIH0KCiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIGFsaWduSXRlbXM6ICdjZW50ZXInCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCBwcm9ncmVzc0JhciksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgZ3JvdzogZmFsc2UKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uRW1wdHksIHsKICAgIG9uQ2xpY2s6IGNhbmNlbFJlaW5kZXgsCiAgICBkaXNhYmxlZDogY2FuY2VsTG9hZGluZ1N0YXRlID09PSBfdHlwZXMyLkxvYWRpbmdTdGF0ZS5Mb2FkaW5nIHx8IHN0YXR1cyAhPT0gX3R5cGVzLlJlaW5kZXhTdGF0dXMuaW5Qcm9ncmVzcyB8fCBsYXN0Q29tcGxldGVkU3RlcCAhPT0gX3R5cGVzLlJlaW5kZXhTdGVwLnJlaW5kZXhTdGFydGVkLAogICAgaXNMb2FkaW5nOiBjYW5jZWxMb2FkaW5nU3RhdGUgPT09IF90eXBlczIuTG9hZGluZ1N0YXRlLkxvYWRpbmcKICB9LCBjYW5jZWxUZXh0KSkpOwp9OwoKdmFyIG9yZGVyZWRTdGVwcyA9IE9iamVjdC52YWx1ZXMoX3R5cGVzLlJlaW5kZXhTdGVwKS5zb3J0KCk7Ci8qKgogKiBEaXNwbGF5cyBhIGxpc3Qgb2Ygc3RlcHMgaW4gdGhlIHJlaW5kZXggb3BlcmF0aW9uLCB0aGUgY3VycmVudCBzdGF0dXMsIGEgcHJvZ3Jlc3MgYmFyLAogKiBhbmQgYW55IGVycm9yIG1lc3NhZ2VzIHRoYXQgYXJlIGVuY291bnRlcmVkLgogKi8KCnZhciBSZWluZGV4UHJvZ3Jlc3MgPSBmdW5jdGlvbiBSZWluZGV4UHJvZ3Jlc3MocHJvcHMpIHsKICB2YXIgX3Byb3BzJHJlaW5kZXhTdGF0ZSA9IHByb3BzLnJlaW5kZXhTdGF0ZSwKICAgICAgZXJyb3JNZXNzYWdlID0gX3Byb3BzJHJlaW5kZXhTdGF0ZS5lcnJvck1lc3NhZ2UsCiAgICAgIGluZGV4R3JvdXAgPSBfcHJvcHMkcmVpbmRleFN0YXRlLmluZGV4R3JvdXAsCiAgICAgIF9wcm9wcyRyZWluZGV4U3RhdGUkbCA9IF9wcm9wcyRyZWluZGV4U3RhdGUubGFzdENvbXBsZXRlZFN0ZXAsCiAgICAgIGxhc3RDb21wbGV0ZWRTdGVwID0gX3Byb3BzJHJlaW5kZXhTdGF0ZSRsID09PSB2b2lkIDAgPyAtMSA6IF9wcm9wcyRyZWluZGV4U3RhdGUkbCwKICAgICAgc3RhdHVzID0gX3Byb3BzJHJlaW5kZXhTdGF0ZS5zdGF0dXM7CgogIHZhciBzdGVwRGV0YWlscyA9IGZ1bmN0aW9uIHN0ZXBEZXRhaWxzKHRoaXNTdGVwKSB7CiAgICB2YXIgcHJldmlvdXNTdGVwID0gb3JkZXJlZFN0ZXBzW29yZGVyZWRTdGVwcy5pbmRleE9mKHRoaXNTdGVwKSAtIDFdOwoKICAgIGlmIChzdGF0dXMgPT09IF90eXBlcy5SZWluZGV4U3RhdHVzLmZhaWxlZCAmJiBsYXN0Q29tcGxldGVkU3RlcCA9PT0gcHJldmlvdXNTdGVwKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgc3RhdHVzOiAnZmFpbGVkJywKICAgICAgICBjaGlsZHJlbjogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChFcnJvckNhbGxvdXQsIHsKICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3JNZXNzYWdlCiAgICAgICAgfSkKICAgICAgfTsKICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSBfdHlwZXMuUmVpbmRleFN0YXR1cy5wYXVzZWQgJiYgbGFzdENvbXBsZXRlZFN0ZXAgPT09IHByZXZpb3VzU3RlcCkgewogICAgICByZXR1cm4gewogICAgICAgIHN0YXR1czogJ3BhdXNlZCcsCiAgICAgICAgY2hpbGRyZW46IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoUGF1c2VkQ2FsbG91dCwgbnVsbCkKICAgICAgfTsKICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSBfdHlwZXMuUmVpbmRleFN0YXR1cy5jYW5jZWxsZWQgJiYgbGFzdENvbXBsZXRlZFN0ZXAgPT09IHByZXZpb3VzU3RlcCkgewogICAgICByZXR1cm4gewogICAgICAgIHN0YXR1czogJ2NhbmNlbGxlZCcKICAgICAgfTsKICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSB1bmRlZmluZWQgfHwgbGFzdENvbXBsZXRlZFN0ZXAgPCBwcmV2aW91c1N0ZXApIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBzdGF0dXM6ICdpbmNvbXBsZXRlJwogICAgICB9OwogICAgfSBlbHNlIGlmIChsYXN0Q29tcGxldGVkU3RlcCA9PT0gcHJldmlvdXNTdGVwKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgc3RhdHVzOiAnaW5Qcm9ncmVzcycKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgc3RhdHVzOiAnY29tcGxldGUnCiAgICAgIH07CiAgICB9CiAgfTsgLy8gVGhlIHJlaW5kZXhpbmcgc3RlcCBpcyBzcGVjaWFsIGJlY2F1c2UgaXQgY29tYmluZXMgdGhlIHN0YXJ0aW5nIGFuZCBjb21wbGV0ZSBzdGF0dXNlcyBpbnRvIGEgc2luZ2xlIFVJCiAgLy8gd2l0aCBhIHByb2dyZXNzIGJhci4KCgogIHZhciByZWluZGV4aW5nRG9jc1N0ZXAgPSB7CiAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay51cGdyYWRlQXNzaXN0YW50LmNoZWNrdXBUYWIucmVpbmRleGluZy5mbHlvdXQuY2hlY2tsaXN0U3RlcC5yZWluZGV4aW5nQ2hlY2tsaXN0LnJlaW5kZXhpbmdEb2N1bWVudHNTdGVwVGl0bGUiLAogICAgICBkZWZhdWx0TWVzc2FnZTogIlJlaW5kZXhpbmcgZG9jdW1lbnRzIgogICAgfSkKICB9OwoKICBpZiAoc3RhdHVzID09PSBfdHlwZXMuUmVpbmRleFN0YXR1cy5mYWlsZWQgJiYgKGxhc3RDb21wbGV0ZWRTdGVwID09PSBfdHlwZXMuUmVpbmRleFN0ZXAubmV3SW5kZXhDcmVhdGVkIHx8IGxhc3RDb21wbGV0ZWRTdGVwID09PSBfdHlwZXMuUmVpbmRleFN0ZXAucmVpbmRleFN0YXJ0ZWQpKSB7CiAgICByZWluZGV4aW5nRG9jc1N0ZXAuc3RhdHVzID0gJ2ZhaWxlZCc7CiAgICByZWluZGV4aW5nRG9jc1N0ZXAuY2hpbGRyZW4gPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEVycm9yQ2FsbG91dCwgewogICAgICBlcnJvck1lc3NhZ2U6IGVycm9yTWVzc2FnZQogICAgfSk7CiAgfSBlbHNlIGlmIChzdGF0dXMgPT09IF90eXBlcy5SZWluZGV4U3RhdHVzLnBhdXNlZCAmJiAobGFzdENvbXBsZXRlZFN0ZXAgPT09IF90eXBlcy5SZWluZGV4U3RlcC5uZXdJbmRleENyZWF0ZWQgfHwgbGFzdENvbXBsZXRlZFN0ZXAgPT09IF90eXBlcy5SZWluZGV4U3RlcC5yZWluZGV4U3RhcnRlZCkpIHsKICAgIHJlaW5kZXhpbmdEb2NzU3RlcC5zdGF0dXMgPSAncGF1c2VkJzsKICAgIHJlaW5kZXhpbmdEb2NzU3RlcC5jaGlsZHJlbiA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoUGF1c2VkQ2FsbG91dCwgbnVsbCk7CiAgfSBlbHNlIGlmIChzdGF0dXMgPT09IF90eXBlcy5SZWluZGV4U3RhdHVzLmNhbmNlbGxlZCAmJiAobGFzdENvbXBsZXRlZFN0ZXAgPT09IF90eXBlcy5SZWluZGV4U3RlcC5uZXdJbmRleENyZWF0ZWQgfHwgbGFzdENvbXBsZXRlZFN0ZXAgPT09IF90eXBlcy5SZWluZGV4U3RlcC5yZWluZGV4U3RhcnRlZCkpIHsKICAgIHJlaW5kZXhpbmdEb2NzU3RlcC5zdGF0dXMgPSAnY2FuY2VsbGVkJzsKICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gdW5kZWZpbmVkIHx8IGxhc3RDb21wbGV0ZWRTdGVwIDwgX3R5cGVzLlJlaW5kZXhTdGVwLm5ld0luZGV4Q3JlYXRlZCkgewogICAgcmVpbmRleGluZ0RvY3NTdGVwLnN0YXR1cyA9ICdpbmNvbXBsZXRlJzsKICB9IGVsc2UgaWYgKGxhc3RDb21wbGV0ZWRTdGVwID09PSBfdHlwZXMuUmVpbmRleFN0ZXAubmV3SW5kZXhDcmVhdGVkIHx8IGxhc3RDb21wbGV0ZWRTdGVwID09PSBfdHlwZXMuUmVpbmRleFN0ZXAucmVpbmRleFN0YXJ0ZWQpIHsKICAgIHJlaW5kZXhpbmdEb2NzU3RlcC5zdGF0dXMgPSAnaW5Qcm9ncmVzcyc7CiAgICByZWluZGV4aW5nRG9jc1N0ZXAuY2hpbGRyZW4gPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFJlaW5kZXhQcm9ncmVzc0JhciwgcHJvcHMpOwogIH0gZWxzZSB7CiAgICByZWluZGV4aW5nRG9jc1N0ZXAuc3RhdHVzID0gJ2NvbXBsZXRlJzsKICB9CgogIHZhciBzdGVwcyA9IFtfb2JqZWN0U3ByZWFkKHsKICAgIHRpdGxlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICBpZDogInhwYWNrLnVwZ3JhZGVBc3Npc3RhbnQuY2hlY2t1cFRhYi5yZWluZGV4aW5nLmZseW91dC5jaGVja2xpc3RTdGVwLnJlaW5kZXhpbmdDaGVja2xpc3QucmVhZG9ubHlTdGVwVGl0bGUiLAogICAgICBkZWZhdWx0TWVzc2FnZTogIlNldHRpbmcgb2xkIGluZGV4IHRvIHJlYWQtb25seSIKICAgIH0pCiAgfSwgc3RlcERldGFpbHMoX3R5cGVzLlJlaW5kZXhTdGVwLnJlYWRvbmx5KSksIF9vYmplY3RTcHJlYWQoewogICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2sudXBncmFkZUFzc2lzdGFudC5jaGVja3VwVGFiLnJlaW5kZXhpbmcuZmx5b3V0LmNoZWNrbGlzdFN0ZXAucmVpbmRleGluZ0NoZWNrbGlzdC5jcmVhdGVJbmRleFN0ZXBUaXRsZSIsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ3JlYXRpbmcgbmV3IGluZGV4IgogICAgfSkKICB9LCBzdGVwRGV0YWlscyhfdHlwZXMuUmVpbmRleFN0ZXAubmV3SW5kZXhDcmVhdGVkKSksIHJlaW5kZXhpbmdEb2NzU3RlcCwgX29iamVjdFNwcmVhZCh7CiAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay51cGdyYWRlQXNzaXN0YW50LmNoZWNrdXBUYWIucmVpbmRleGluZy5mbHlvdXQuY2hlY2tsaXN0U3RlcC5yZWluZGV4aW5nQ2hlY2tsaXN0LmFsaWFzU3dhcFN0ZXBUaXRsZSIsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU3dhcHBpbmcgb3JpZ2luYWwgaW5kZXggd2l0aCBhbGlhcyIKICAgIH0pCiAgfSwgc3RlcERldGFpbHMoX3R5cGVzLlJlaW5kZXhTdGVwLmFsaWFzQ3JlYXRlZCkpXTsgLy8gSWYgdGhpcyBpbmRleCBpcyBwYXJ0IG9mIGFuIGluZGV4IGdyb3VwLCBhZGQgdGhlIGFwcHJvcmlhdGUgZ3JvdXAgc2VydmljZXMgc3RlcHMuCgogIGlmIChpbmRleEdyb3VwID09PSBfdHlwZXMuSW5kZXhHcm91cC5tbCkgewogICAgc3RlcHMudW5zaGlmdChfb2JqZWN0U3ByZWFkKHsKICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay51cGdyYWRlQXNzaXN0YW50LmNoZWNrdXBUYWIucmVpbmRleGluZy5mbHlvdXQuY2hlY2tsaXN0U3RlcC5yZWluZGV4aW5nQ2hlY2tsaXN0LnBhdXNlTWxTdGVwVGl0bGUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUGF1c2luZyBNYWNoaW5lIExlYXJuaW5nIGpvYnMiCiAgICAgIH0pCiAgICB9LCBzdGVwRGV0YWlscyhfdHlwZXMuUmVpbmRleFN0ZXAuaW5kZXhHcm91cFNlcnZpY2VzU3RvcHBlZCkpKTsKICAgIHN0ZXBzLnB1c2goX29iamVjdFNwcmVhZCh7CiAgICAgIHRpdGxlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2sudXBncmFkZUFzc2lzdGFudC5jaGVja3VwVGFiLnJlaW5kZXhpbmcuZmx5b3V0LmNoZWNrbGlzdFN0ZXAucmVpbmRleGluZ0NoZWNrbGlzdC5yZXN1bWVNbFN0ZXBUaXRsZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZXN1bWluZyBNYWNoaW5lIExlYXJuaW5nIGpvYnMiCiAgICAgIH0pCiAgICB9LCBzdGVwRGV0YWlscyhfdHlwZXMuUmVpbmRleFN0ZXAuaW5kZXhHcm91cFNlcnZpY2VzU3RhcnRlZCkpKTsKICB9IGVsc2UgaWYgKGluZGV4R3JvdXAgPT09IF90eXBlcy5JbmRleEdyb3VwLndhdGNoZXIpIHsKICAgIHN0ZXBzLnVuc2hpZnQoX29iamVjdFNwcmVhZCh7CiAgICAgIHRpdGxlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2sudXBncmFkZUFzc2lzdGFudC5jaGVja3VwVGFiLnJlaW5kZXhpbmcuZmx5b3V0LmNoZWNrbGlzdFN0ZXAucmVpbmRleGluZ0NoZWNrbGlzdC5zdG9wV2F0Y2hlclN0ZXBUaXRsZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTdG9wcGluZyBXYXRjaGVyIgogICAgICB9KQogICAgfSwgc3RlcERldGFpbHMoX3R5cGVzLlJlaW5kZXhTdGVwLmluZGV4R3JvdXBTZXJ2aWNlc1N0b3BwZWQpKSk7CiAgICBzdGVwcy5wdXNoKF9vYmplY3RTcHJlYWQoewogICAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnVwZ3JhZGVBc3Npc3RhbnQuY2hlY2t1cFRhYi5yZWluZGV4aW5nLmZseW91dC5jaGVja2xpc3RTdGVwLnJlaW5kZXhpbmdDaGVja2xpc3QucmVzdW1lV2F0Y2hlclN0ZXBUaXRsZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZXN1bWluZyBXYXRjaGVyIgogICAgICB9KQogICAgfSwgc3RlcERldGFpbHMoX3R5cGVzLlJlaW5kZXhTdGVwLmluZGV4R3JvdXBTZXJ2aWNlc1N0YXJ0ZWQpKSk7CiAgfQoKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc3RlcF9wcm9ncmVzcy5TdGVwUHJvZ3Jlc3MsIHsKICAgIHN0ZXBzOiBzdGVwcwogIH0pOwp9OwoKZXhwb3J0cy5SZWluZGV4UHJvZ3Jlc3MgPSBSZWluZGV4UHJvZ3Jlc3M7"},null]}