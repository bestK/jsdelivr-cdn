{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/common/util/job_utils.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/common/util/job_utils.js","mtime":1585205045413},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmNhbGN1bGF0ZURhdGFmZWVkRnJlcXVlbmN5RGVmYXVsdFNlY29uZHMgPSBjYWxjdWxhdGVEYXRhZmVlZEZyZXF1ZW5jeURlZmF1bHRTZWNvbmRzOwpleHBvcnRzLmlzVGltZVNlcmllc1ZpZXdKb2IgPSBpc1RpbWVTZXJpZXNWaWV3Sm9iOwpleHBvcnRzLmlzVGltZVNlcmllc1ZpZXdEZXRlY3RvciA9IGlzVGltZVNlcmllc1ZpZXdEZXRlY3RvcjsKZXhwb3J0cy5pc1NvdXJjZURhdGFDaGFydGFibGVGb3JEZXRlY3RvciA9IGlzU291cmNlRGF0YUNoYXJ0YWJsZUZvckRldGVjdG9yOwpleHBvcnRzLmlzTW9kZWxQbG90Q2hhcnRhYmxlRm9yRGV0ZWN0b3IgPSBpc01vZGVsUGxvdENoYXJ0YWJsZUZvckRldGVjdG9yOwpleHBvcnRzLmdldFBhcnRpdGlvbmluZ0ZpZWxkTmFtZXMgPSBnZXRQYXJ0aXRpb25pbmdGaWVsZE5hbWVzOwpleHBvcnRzLmlzTW9kZWxQbG90RW5hYmxlZCA9IGlzTW9kZWxQbG90RW5hYmxlZDsKZXhwb3J0cy5pc0pvYlZlcnNpb25HdGUgPSBpc0pvYlZlcnNpb25HdGU7CmV4cG9ydHMubWxGdW5jdGlvblRvRVNBZ2dyZWdhdGlvbiA9IG1sRnVuY3Rpb25Ub0VTQWdncmVnYXRpb247CmV4cG9ydHMuaXNKb2JJZFZhbGlkID0gaXNKb2JJZFZhbGlkOwpleHBvcnRzLnByZWZpeERhdGFmZWVkSWQgPSBwcmVmaXhEYXRhZmVlZElkOwpleHBvcnRzLmdldFNhZmVBZ2dyZWdhdGlvbk5hbWUgPSBnZXRTYWZlQWdncmVnYXRpb25OYW1lOwpleHBvcnRzLnVuaXFXaXRoSXNFcXVhbCA9IHVuaXFXaXRoSXNFcXVhbDsKZXhwb3J0cy5iYXNpY0pvYlZhbGlkYXRpb24gPSBiYXNpY0pvYlZhbGlkYXRpb247CmV4cG9ydHMuYmFzaWNEYXRhZmVlZFZhbGlkYXRpb24gPSBiYXNpY0RhdGFmZWVkVmFsaWRhdGlvbjsKZXhwb3J0cy52YWxpZGF0ZU1vZGVsTWVtb3J5TGltaXQgPSB2YWxpZGF0ZU1vZGVsTWVtb3J5TGltaXQ7CmV4cG9ydHMudmFsaWRhdGVNb2RlbE1lbW9yeUxpbWl0VW5pdHMgPSB2YWxpZGF0ZU1vZGVsTWVtb3J5TGltaXRVbml0czsKZXhwb3J0cy52YWxpZGF0ZUdyb3VwTmFtZXMgPSB2YWxpZGF0ZUdyb3VwTmFtZXM7CmV4cG9ydHMuZ2V0TGF0ZXN0RGF0YU9yQnVja2V0VGltZXN0YW1wID0gZ2V0TGF0ZXN0RGF0YU9yQnVja2V0VGltZXN0YW1wOwpleHBvcnRzLnByb2Nlc3NDcmVhdGVkQnkgPSBwcm9jZXNzQ3JlYXRlZEJ5OwpleHBvcnRzLk1MX0RBVEFfUFJFVklFV19DT1VOVCA9IGV4cG9ydHMuTUxfTUVESUFOX1BFUkNFTlRTID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfc2VtdmVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJzZW12ZXIiKSk7Cgp2YXIgX251bWVyYWwgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBlbGFzdGljL251bWVyYWwiKSk7Cgp2YXIgX3ZhbGlkYXRpb24gPSByZXF1aXJlKCIuLi9jb25zdGFudHMvdmFsaWRhdGlvbiIpOwoKdmFyIF9wYXJzZV9pbnRlcnZhbCA9IHJlcXVpcmUoIi4vcGFyc2VfaW50ZXJ2YWwiKTsKCnZhciBfdmFsaWRhdG9ycyA9IHJlcXVpcmUoIi4vdmFsaWRhdG9ycyIpOwoKdmFyIF9uZXdfam9iID0gcmVxdWlyZSgiLi4vLi4vY29tbW9uL2NvbnN0YW50cy9uZXdfam9iIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSB9CgovLyB3b3JrIG91dCB0aGUgZGVmYXVsdCBmcmVxdWVuY3kgYmFzZWQgb24gdGhlIGJ1Y2tldF9zcGFuIGluIHNlY29uZHMKZnVuY3Rpb24gY2FsY3VsYXRlRGF0YWZlZWRGcmVxdWVuY3lEZWZhdWx0U2Vjb25kcyhidWNrZXRTcGFuU2Vjb25kcykgewogIHZhciBmcmVxID0gMzYwMDsKCiAgaWYgKGJ1Y2tldFNwYW5TZWNvbmRzIDw9IDEyMCkgewogICAgZnJlcSA9IDYwOwogIH0gZWxzZSBpZiAoYnVja2V0U3BhblNlY29uZHMgPD0gMTIwMCkgewogICAgZnJlcSA9IE1hdGguZmxvb3IoYnVja2V0U3BhblNlY29uZHMgLyAyKTsKICB9IGVsc2UgaWYgKGJ1Y2tldFNwYW5TZWNvbmRzIDw9IDQzMjAwKSB7CiAgICBmcmVxID0gNjAwOwogIH0KCiAgcmV0dXJuIGZyZXE7Cn0gLy8gUmV0dXJucyBhIGZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciB0aGUgam9iIGlzIHN1aXRhYmxlIGZvciB2aWV3aW5nCi8vIGluIHRoZSBUaW1lIFNlcmllcyBkYXNoYm9hcmQuCgoKZnVuY3Rpb24gaXNUaW1lU2VyaWVzVmlld0pvYihqb2IpIHsKICAvLyBvbmx5IGFsbG93IGpvYnMgd2l0aCBhdCBsZWFzdCBvbmUgZGV0ZWN0b3Igd2hvc2UgZnVuY3Rpb24gY29ycmVzcG9uZHMgdG8KICAvLyBhbiBFUyBhZ2dyZWdhdGlvbiB3aGljaCBjYW4gYmUgdmlld2VkIGluIHRoZSBzaW5nbGUgbWV0cmljIHZpZXcgYW5kIHdoaWNoCiAgLy8gZG9lc24ndCB1c2UgYSBzY3JpcHRlZCBmaWVsZCB3aGljaCBjYW4gYmUgdmVyeSBkaWZmaWN1bHQgb3IgaW1wb3NzaWJsZSB0bwogIC8vIGludmVydCB0byBhIHJldmVyc2Ugc2VhcmNoLCBvciB3aGVuIG1vZGVsIHBsb3QgaGFzIGJlZW4gZW5hYmxlZC4KICB2YXIgaXNWaWV3YWJsZSA9IGZhbHNlOwogIHZhciBkdHJzID0gam9iLmFuYWx5c2lzX2NvbmZpZy5kZXRlY3RvcnM7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgZHRycy5sZW5ndGg7IGkrKykgewogICAgaXNWaWV3YWJsZSA9IGlzVGltZVNlcmllc1ZpZXdEZXRlY3Rvcihqb2IsIGkpOwoKICAgIGlmIChpc1ZpZXdhYmxlID09PSB0cnVlKSB7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIGlzVmlld2FibGU7Cn0gLy8gUmV0dXJucyBhIGZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciB0aGUgZGV0ZWN0b3IgYXQgdGhlIGluZGV4IGluIHRoZSBzcGVjaWZpZWQgam9iCi8vIGlzIHN1aXRhYmxlIGZvciB2aWV3aW5nIGluIHRoZSBUaW1lIFNlcmllcyBkYXNoYm9hcmQuCgoKZnVuY3Rpb24gaXNUaW1lU2VyaWVzVmlld0RldGVjdG9yKGpvYiwgZHRySW5kZXgpIHsKICByZXR1cm4gaXNTb3VyY2VEYXRhQ2hhcnRhYmxlRm9yRGV0ZWN0b3Ioam9iLCBkdHJJbmRleCkgfHwgaXNNb2RlbFBsb3RDaGFydGFibGVGb3JEZXRlY3Rvcihqb2IsIGR0ckluZGV4KTsKfSAvLyBSZXR1cm5zIGEgZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoZSBzb3VyY2UgZGF0YSBjYW4gYmUgcGxvdHRlZCBpbiBhIHRpbWUKLy8gc2VyaWVzIGNoYXJ0IGZvciB0aGUgc3BlY2lmaWVkIGRldGVjdG9yLgoKCmZ1bmN0aW9uIGlzU291cmNlRGF0YUNoYXJ0YWJsZUZvckRldGVjdG9yKGpvYiwgZGV0ZWN0b3JJbmRleCkgewogIHZhciBpc1NvdXJjZURhdGFDaGFydGFibGUgPSBmYWxzZTsKICB2YXIgZHRycyA9IGpvYi5hbmFseXNpc19jb25maWcuZGV0ZWN0b3JzOwoKICBpZiAoZGV0ZWN0b3JJbmRleCA+PSAwICYmIGRldGVjdG9ySW5kZXggPCBkdHJzLmxlbmd0aCkgewogICAgdmFyIGR0ciA9IGR0cnNbZGV0ZWN0b3JJbmRleF07CiAgICB2YXIgZnVuY3Rpb25OYW1lID0gZHRyLmZ1bmN0aW9uOyAvLyBDaGVjayB0aGF0IHRoZSBmdW5jdGlvbiBtYXBzIHRvIGFuIEVTIGFnZ3JlZ2F0aW9uLAogICAgLy8gYW5kIHRoYXQgdGhlIHBhcnRpdGlvbmluZyBmaWVsZCBpc24ndCBtbGNhdGVnb3J5CiAgICAvLyAoc2luY2UgbWxjYXRlZ29yeSBpcyBhIGRlcml2ZWQgZmllbGQgd2hpY2ggd29uJ3QgZXhpc3QgaW4gdGhlIHNvdXJjZSBkYXRhKS4KICAgIC8vIE5vdGUgdGhhdCB0aGUgJ2Z1bmN0aW9uJyBmaWVsZCBpbiBhIHJlY29yZCBjb250YWlucyB3aGF0IHRoZSB1c2VyIGVudGVyZWQgZS5nLiAnaGlnaF9jb3VudCcsCiAgICAvLyB3aGVyZWFzIHRoZSAnZnVuY3Rpb25fZGVzY3JpcHRpb24nIGZpZWxkIGhvbGRzIGFuIE1MLWJ1aWx0IGRpc3BsYXkgaGludCBmb3IgZnVuY3Rpb24gZS5nLiAnY291bnQnLgoKICAgIGlzU291cmNlRGF0YUNoYXJ0YWJsZSA9IG1sRnVuY3Rpb25Ub0VTQWdncmVnYXRpb24oZnVuY3Rpb25OYW1lKSAhPT0gbnVsbCAmJiBkdHIuYnlfZmllbGRfbmFtZSAhPT0gJ21sY2F0ZWdvcnknICYmIGR0ci5wYXJ0aXRpb25fZmllbGRfbmFtZSAhPT0gJ21sY2F0ZWdvcnknICYmIGR0ci5vdmVyX2ZpZWxkX25hbWUgIT09ICdtbGNhdGVnb3J5JzsgLy8gSWYgdGhlIGRhdGFmZWVkIHVzZXMgc2NyaXB0IGZpZWxkcywgd2UgY2FuIG9ubHkgcGxvdCB0aGUgdGltZSBzZXJpZXMgaWYKICAgIC8vIG1vZGVsIHBsb3QgaXMgZW5hYmxlZC4gV2l0aG91dCBtb2RlbCBwbG90IGl0IHdpbGwgYmUgdmVyeSBkaWZmaWN1bHQgb3IgaW1wb3NzaWJsZQogICAgLy8gdG8gaW52ZXJ0IHRvIGEgcmV2ZXJzZSBzZWFyY2ggb2YgdGhlIHVuZGVybHlpbmcgbWV0cmljIGRhdGEuCgogICAgdmFyIHVzZXNTY3JpcHRGaWVsZHMgPSBfbG9kYXNoLmRlZmF1bHQuaGFzKGpvYiwgJ2RhdGFmZWVkX2NvbmZpZy5zY3JpcHRfZmllbGRzJyk7CgogICAgaWYgKGlzU291cmNlRGF0YUNoYXJ0YWJsZSA9PT0gdHJ1ZSAmJiB1c2VzU2NyaXB0RmllbGRzID09PSB0cnVlKSB7CiAgICAgIC8vIFBlcmZvcm0gZXh0cmEgY2hlY2sgdG8gc2VlIGlmIHRoZSBkZXRlY3RvciBpcyB1c2luZyBhIHNjcmlwdGVkIGZpZWxkLgogICAgICB2YXIgc2NyaXB0RmllbGRzID0gdXNlc1NjcmlwdEZpZWxkcyA/IF9sb2Rhc2guZGVmYXVsdC5rZXlzKGpvYi5kYXRhZmVlZF9jb25maWcuc2NyaXB0X2ZpZWxkcykgOiBbXTsKICAgICAgaXNTb3VyY2VEYXRhQ2hhcnRhYmxlID0gc2NyaXB0RmllbGRzLmluZGV4T2YoZHRyLmZpZWxkX25hbWUpID09PSAtMSAmJiBzY3JpcHRGaWVsZHMuaW5kZXhPZihkdHIucGFydGl0aW9uX2ZpZWxkX25hbWUpID09PSAtMSAmJiBzY3JpcHRGaWVsZHMuaW5kZXhPZihkdHIuYnlfZmllbGRfbmFtZSkgPT09IC0xICYmIHNjcmlwdEZpZWxkcy5pbmRleE9mKGR0ci5vdmVyX2ZpZWxkX25hbWUpID09PSAtMTsKICAgIH0KICB9CgogIHJldHVybiBpc1NvdXJjZURhdGFDaGFydGFibGU7Cn0gLy8gUmV0dXJucyBhIGZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciBtb2RlbCBwbG90IGRhdGEgY2FuIGJlIHBsb3R0ZWQgaW4gYSB0aW1lCi8vIHNlcmllcyBjaGFydCBmb3IgdGhlIHNwZWNpZmllZCBkZXRlY3Rvci4KCgpmdW5jdGlvbiBpc01vZGVsUGxvdENoYXJ0YWJsZUZvckRldGVjdG9yKGpvYiwgZGV0ZWN0b3JJbmRleCkgewogIHZhciBpc01vZGVsUGxvdENoYXJ0YWJsZSA9IGZhbHNlOwoKICB2YXIgbW9kZWxQbG90RW5hYmxlZCA9IF9sb2Rhc2guZGVmYXVsdC5nZXQoam9iLCBbJ21vZGVsX3Bsb3RfY29uZmlnJywgJ2VuYWJsZWQnXSwgZmFsc2UpOwoKICB2YXIgZHRycyA9IGpvYi5hbmFseXNpc19jb25maWcuZGV0ZWN0b3JzOwoKICBpZiAoZGV0ZWN0b3JJbmRleCA+PSAwICYmIGRldGVjdG9ySW5kZXggPCBkdHJzLmxlbmd0aCAmJiBtb2RlbFBsb3RFbmFibGVkID09PSB0cnVlKSB7CiAgICB2YXIgZHRyID0gZHRyc1tkZXRlY3RvckluZGV4XTsKICAgIHZhciBmdW5jdGlvbk5hbWUgPSBkdHIuZnVuY3Rpb247IC8vIE1vZGVsIHBsb3QgY2FuIGJlIGNoYXJ0ZWQgZm9yIGFueSBvZiB0aGUgZnVuY3Rpb25zIHdoaWNoIG1hcCB0byBFUyBhZ2dyZWdhdGlvbnMsCiAgICAvLyBwbHVzIHZhcnAgYW5kIGluZm9fY29udGVudCBmdW5jdGlvbnMuCgogICAgaXNNb2RlbFBsb3RDaGFydGFibGUgPSBtbEZ1bmN0aW9uVG9FU0FnZ3JlZ2F0aW9uKGZ1bmN0aW9uTmFtZSkgIT09IG51bGwgfHwgWyd2YXJwJywgJ2hpZ2hfdmFycCcsICdsb3dfdmFycCcsICdpbmZvX2NvbnRlbnQnLCAnaGlnaF9pbmZvX2NvbnRlbnQnLCAnbG93X2luZm9fY29udGVudCddLmluY2x1ZGVzKGZ1bmN0aW9uTmFtZSkgPT09IHRydWU7CiAgfQoKICByZXR1cm4gaXNNb2RlbFBsb3RDaGFydGFibGU7Cn0gLy8gUmV0dXJucyB0aGUgbmFtZXMgb2YgdGhlIHBhcnRpdGlvbiwgYnksIGFuZCBvdmVyIGZpZWxkcyBmb3IgdGhlIGRldGVjdG9yIHdpdGggdGhlCi8vIHNwZWNpZmllZCBpbmRleCBmcm9tIHRoZSBzdXBwbGllZCBNTCBqb2IgY29uZmlndXJhdGlvbi4KCgpmdW5jdGlvbiBnZXRQYXJ0aXRpb25pbmdGaWVsZE5hbWVzKGpvYiwgZGV0ZWN0b3JJbmRleCkgewogIHZhciBmaWVsZE5hbWVzID0gW107CiAgdmFyIGRldGVjdG9yID0gam9iLmFuYWx5c2lzX2NvbmZpZy5kZXRlY3RvcnNbZGV0ZWN0b3JJbmRleF07CgogIGlmIChfbG9kYXNoLmRlZmF1bHQuaGFzKGRldGVjdG9yLCAncGFydGl0aW9uX2ZpZWxkX25hbWUnKSkgewogICAgZmllbGROYW1lcy5wdXNoKGRldGVjdG9yLnBhcnRpdGlvbl9maWVsZF9uYW1lKTsKICB9CgogIGlmIChfbG9kYXNoLmRlZmF1bHQuaGFzKGRldGVjdG9yLCAnYnlfZmllbGRfbmFtZScpKSB7CiAgICBmaWVsZE5hbWVzLnB1c2goZGV0ZWN0b3IuYnlfZmllbGRfbmFtZSk7CiAgfQoKICBpZiAoX2xvZGFzaC5kZWZhdWx0LmhhcyhkZXRlY3RvciwgJ292ZXJfZmllbGRfbmFtZScpKSB7CiAgICBmaWVsZE5hbWVzLnB1c2goZGV0ZWN0b3Iub3Zlcl9maWVsZF9uYW1lKTsKICB9CgogIHJldHVybiBmaWVsZE5hbWVzOwp9IC8vIFJldHVybnMgYSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgbW9kZWwgcGxvdCBoYXMgYmVlbiBlbmFibGVkIGZvciBhIGpvYi4KLy8gSWYgbW9kZWwgcGxvdCBpcyBlbmFibGVkIGZvciBhIGpvYiB3aXRoIGEgdGVybXMgZmlsdGVyIChjb21tYSBzZXBhcmF0ZWQKLy8gbGlzdCBvZiBwYXJ0aXRpb24gb3IgYnkgZmllbGQgbmFtZXMpLCBwZXJmb3JtcyBhZGRpdGlvbmFsIGNoZWNrcyB0aGF0Ci8vIHRoZSBzdXBwbGllZCBlbnRpdGllcyBjb250YWlucyAnYnknIGFuZCAncGFydGl0aW9uJyBmaWVsZHMgaW4gdGhlIGRldGVjdG9yLAovLyBpZiBjb25maWd1cmVkLCB3aG9zZSB2YWx1ZXMgYXJlIGluIHRoZSBjb25maWd1cmVkIG1vZGVsX3Bsb3RfY29uZmlnIHRlcm1zLAovLyB3aGVyZSBlbnRpdHlGaWVsZHMgaXMgaW4gdGhlIGZvcm1hdCBbe2ZpZWxkTmFtZTpzdGF0dXMsIGZpZWxkVmFsdWU6NDA0fV0uCgoKZnVuY3Rpb24gaXNNb2RlbFBsb3RFbmFibGVkKGpvYiwgZGV0ZWN0b3JJbmRleCwgZW50aXR5RmllbGRzKSB7CiAgLy8gQ2hlY2sgaWYgbW9kZWxfcGxvdF9jb25maWcgaXMgZW5hYmxlZC4KICB2YXIgaXNFbmFibGVkID0gX2xvZGFzaC5kZWZhdWx0LmdldChqb2IsIFsnbW9kZWxfcGxvdF9jb25maWcnLCAnZW5hYmxlZCddLCBmYWxzZSk7CgogIGlmIChpc0VuYWJsZWQgPT09IHRydWUgJiYgZW50aXR5RmllbGRzICE9PSB1bmRlZmluZWQgJiYgZW50aXR5RmllbGRzLmxlbmd0aCA+IDApIHsKICAgIC8vIElmIHRlcm1zIGZpbHRlciBpcyBjb25maWd1cmVkIGluIG1vZGVsX3Bsb3RfY29uZmlnLCBjaGVjayBzdXBwbGllZCBlbnRpdGllcy4KICAgIHZhciB0ZXJtc1N0ciA9IF9sb2Rhc2guZGVmYXVsdC5nZXQoam9iLCBbJ21vZGVsX3Bsb3RfY29uZmlnJywgJ3Rlcm1zJ10sICcnKTsKCiAgICBpZiAodGVybXNTdHIgIT09ICcnKSB7CiAgICAgIC8vIE5CLiBEbyBub3QgY3VycmVudGx5IHN1cHBvcnQgZW1wdHkgc3RyaW5nIHZhbHVlcyBhcyBiZWluZyB2YWxpZCAnYnknIG9yCiAgICAgIC8vICdwYXJ0aXRpb24nIGZpZWxkIHZhbHVlcyBldmVuIHRob3VnaCB0aGlzIGlzIHN1cHBvcnRlZCBvbiB0aGUgYmFjay1lbmQuCiAgICAgIC8vIElmIHN1cHBsaWVkLCBjaGVjayBib3RoIHRoZSBieSBhbmQgcGFydGl0aW9uIGVudGl0aWVzIGFyZSBpbiB0aGUgdGVybXMuCiAgICAgIHZhciBkZXRlY3RvciA9IGpvYi5hbmFseXNpc19jb25maWcuZGV0ZWN0b3JzW2RldGVjdG9ySW5kZXhdOwoKICAgICAgdmFyIGRldGVjdG9ySGFzUGFydGl0aW9uRmllbGQgPSBfbG9kYXNoLmRlZmF1bHQuaGFzKGRldGVjdG9yLCAncGFydGl0aW9uX2ZpZWxkX25hbWUnKTsKCiAgICAgIHZhciBkZXRlY3Rvckhhc0J5RmllbGQgPSBfbG9kYXNoLmRlZmF1bHQuaGFzKGRldGVjdG9yLCAnYnlfZmllbGRfbmFtZScpOwoKICAgICAgdmFyIHRlcm1zID0gdGVybXNTdHIuc3BsaXQoJywnKTsKCiAgICAgIGlmIChkZXRlY3Rvckhhc1BhcnRpdGlvbkZpZWxkID09PSB0cnVlKSB7CiAgICAgICAgdmFyIHBhcnRpdGlvbkVudGl0eSA9IF9sb2Rhc2guZGVmYXVsdC5maW5kKGVudGl0eUZpZWxkcywgewogICAgICAgICAgZmllbGROYW1lOiBkZXRlY3Rvci5wYXJ0aXRpb25fZmllbGRfbmFtZQogICAgICAgIH0pOwoKICAgICAgICBpc0VuYWJsZWQgPSBwYXJ0aXRpb25FbnRpdHkgIT09IHVuZGVmaW5lZCAmJiB0ZXJtcy5pbmRleE9mKHBhcnRpdGlvbkVudGl0eS5maWVsZFZhbHVlKSAhPT0gLTE7CiAgICAgIH0KCiAgICAgIGlmIChpc0VuYWJsZWQgPT09IHRydWUgJiYgZGV0ZWN0b3JIYXNCeUZpZWxkID09PSB0cnVlKSB7CiAgICAgICAgdmFyIGJ5RW50aXR5ID0gX2xvZGFzaC5kZWZhdWx0LmZpbmQoZW50aXR5RmllbGRzLCB7CiAgICAgICAgICBmaWVsZE5hbWU6IGRldGVjdG9yLmJ5X2ZpZWxkX25hbWUKICAgICAgICB9KTsKCiAgICAgICAgaXNFbmFibGVkID0gYnlFbnRpdHkgIT09IHVuZGVmaW5lZCAmJiB0ZXJtcy5pbmRleE9mKGJ5RW50aXR5LmZpZWxkVmFsdWUpICE9PSAtMTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIGlzRW5hYmxlZDsKfSAvLyBSZXR1cm5zIHdoZXRoZXIgdGhlIHZlcnNpb24gb2YgdGhlIGpvYiAodGhlIHZlcnNpb24gbnVtYmVyIG9mIHRoZSBlbGFzdGljIHN0YWNrIHRoYXQgdGhlIGpvYiB3YXMKLy8gY3JlYXRlZCB3aXRoKSBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHN1cHBsaWVkIHZlcnNpb24gKGUuZy4gJzYuMS4wJykuCgoKZnVuY3Rpb24gaXNKb2JWZXJzaW9uR3RlKGpvYiwgdmVyc2lvbikgewogIHZhciBqb2JWZXJzaW9uID0gX2xvZGFzaC5kZWZhdWx0LmdldChqb2IsICdqb2JfdmVyc2lvbicsICcwLjAuMCcpOwoKICByZXR1cm4gX3NlbXZlci5kZWZhdWx0Lmd0ZShqb2JWZXJzaW9uLCB2ZXJzaW9uKTsKfSAvLyBUYWtlcyBhbiBNTCBkZXRlY3RvciAnZnVuY3Rpb24nIGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIEVTIGFnZ3JlZ2F0aW9uIG5hbWUKLy8gZm9yIHF1ZXJ5aW5nIG1ldHJpYyBkYXRhLiBSZXR1cm5zIG51bGwgaWYgdGhlcmUgaXMgbm8gc3VpdGFibGUgRVMgYWdncmVnYXRpb24uCi8vIE5vdGUgdGhhdCB0aGUgJ2Z1bmN0aW9uJyBmaWVsZCBpbiBhIHJlY29yZCBjb250YWlucyB3aGF0IHRoZSB1c2VyIGVudGVyZWQgZS5nLiAnaGlnaF9jb3VudCcsCi8vIHdoZXJlYXMgdGhlICdmdW5jdGlvbl9kZXNjcmlwdGlvbicgZmllbGQgaG9sZHMgYW4gTUwtYnVpbHQgZGlzcGxheSBoaW50IGZvciBmdW5jdGlvbiBlLmcuICdjb3VudCcuCgoKZnVuY3Rpb24gbWxGdW5jdGlvblRvRVNBZ2dyZWdhdGlvbihmdW5jdGlvbk5hbWUpIHsKICBpZiAoZnVuY3Rpb25OYW1lID09PSAnbWVhbicgfHwgZnVuY3Rpb25OYW1lID09PSAnaGlnaF9tZWFuJyB8fCBmdW5jdGlvbk5hbWUgPT09ICdsb3dfbWVhbicgfHwgZnVuY3Rpb25OYW1lID09PSAnbWV0cmljJykgewogICAgcmV0dXJuICdhdmcnOwogIH0KCiAgaWYgKGZ1bmN0aW9uTmFtZSA9PT0gJ3N1bScgfHwgZnVuY3Rpb25OYW1lID09PSAnaGlnaF9zdW0nIHx8IGZ1bmN0aW9uTmFtZSA9PT0gJ2xvd19zdW0nIHx8IGZ1bmN0aW9uTmFtZSA9PT0gJ25vbl9udWxsX3N1bScgfHwgZnVuY3Rpb25OYW1lID09PSAnbG93X25vbl9udWxsX3N1bScgfHwgZnVuY3Rpb25OYW1lID09PSAnaGlnaF9ub25fbnVsbF9zdW0nKSB7CiAgICByZXR1cm4gJ3N1bSc7CiAgfQoKICBpZiAoZnVuY3Rpb25OYW1lID09PSAnY291bnQnIHx8IGZ1bmN0aW9uTmFtZSA9PT0gJ2hpZ2hfY291bnQnIHx8IGZ1bmN0aW9uTmFtZSA9PT0gJ2xvd19jb3VudCcgfHwgZnVuY3Rpb25OYW1lID09PSAnbm9uX3plcm9fY291bnQnIHx8IGZ1bmN0aW9uTmFtZSA9PT0gJ2xvd19ub25femVyb19jb3VudCcgfHwgZnVuY3Rpb25OYW1lID09PSAnaGlnaF9ub25femVyb19jb3VudCcpIHsKICAgIHJldHVybiAnY291bnQnOwogIH0KCiAgaWYgKGZ1bmN0aW9uTmFtZSA9PT0gJ2Rpc3RpbmN0X2NvdW50JyB8fCBmdW5jdGlvbk5hbWUgPT09ICdsb3dfZGlzdGluY3RfY291bnQnIHx8IGZ1bmN0aW9uTmFtZSA9PT0gJ2hpZ2hfZGlzdGluY3RfY291bnQnKSB7CiAgICByZXR1cm4gJ2NhcmRpbmFsaXR5JzsKICB9CgogIGlmIChmdW5jdGlvbk5hbWUgPT09ICdtZWRpYW4nIHx8IGZ1bmN0aW9uTmFtZSA9PT0gJ2hpZ2hfbWVkaWFuJyB8fCBmdW5jdGlvbk5hbWUgPT09ICdsb3dfbWVkaWFuJykgewogICAgcmV0dXJuICdwZXJjZW50aWxlcyc7CiAgfQoKICBpZiAoZnVuY3Rpb25OYW1lID09PSAnbWluJyB8fCBmdW5jdGlvbk5hbWUgPT09ICdtYXgnKSB7CiAgICByZXR1cm4gZnVuY3Rpb25OYW1lOwogIH0KCiAgaWYgKGZ1bmN0aW9uTmFtZSA9PT0gJ3JhcmUnKSB7CiAgICByZXR1cm4gJ2NvdW50JzsKICB9IC8vIFJldHVybiBudWxsIGlmIE1MIGZ1bmN0aW9uIGRvZXMgbm90IG1hcCB0byBhbiBFUyBhZ2dyZWdhdGlvbi4KICAvLyBpLmUuIG1lZGlhbiwgbG93X21lZGlhbiwgaGlnaF9tZWRpYW4sIGZyZXFfcmFyZSwKICAvLyB2YXJwLCBsb3dfdmFycCwgaGlnaF92YXJwLCB0aW1lX29mX2RheSwgdGltZV9vZl93ZWVrLCBsYXRfbG9uZywKICAvLyBpbmZvX2NvbnRlbnQsIGxvd19pbmZvX2NvbnRlbnQsIGhpZ2hfaW5mb19jb250ZW50CgoKICByZXR1cm4gbnVsbDsKfSAvLyBKb2IgbmFtZSBtdXN0IGNvbnRhaW4gbG93ZXJjYXNlIGFscGhhbnVtZXJpYyAoYS16IGFuZCAwLTkpLCBoeXBoZW5zIG9yIHVuZGVyc2NvcmVzOwovLyBpdCBtdXN0IGFsc28gc3RhcnQgYW5kIGVuZCB3aXRoIGFuIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXInCgoKZnVuY3Rpb24gaXNKb2JJZFZhbGlkKGpvYklkKSB7CiAgcmV0dXJuIC9eW2EtejAtOVwtXF9dKyQvZy50ZXN0KGpvYklkKSAmJiAhL14oW18tXS4qKT8oLipbXy1dKT8kL2cudGVzdChqb2JJZCk7Cn0gLy8gVG8gZ2V0IG1lZGlhbiBkYXRhIGZvciBqb2JzIGFuZCBjaGFydHMgd2UgbmVlZCB0byB1c2UgRWxhc3RpY3NlYXJjaCdzCi8vIHBlcmNlbnRpbGVzIGFnZ3JlZ2F0aW9uLiBUaGlzIHNldHRpbmcgaXMgdXNlZCB3aXRoIHRoZSBgcGVyY2VudHNgIGZpZWxkCi8vIG9mIHRoZSBwZXJjZW50aWxlcyBhZ2dyZWdhdGlvbiB0byBnZXQgdGhlIGNvcnJlY3QgZGF0YS4KCgp2YXIgTUxfTUVESUFOX1BFUkNFTlRTID0gJzUwLjAnOyAvLyBUaGUgbnVtYmVyIG9mIHByZXZpZXcgaXRlbXMgdG8gc2hvdyB1cCBpbgovLyB0aGUgQWR2YW5jZWQgSm9iIENvbmZpZ3VyYXRpb24gZGF0YS9kYXRhZmVlZCBwcmV2aWV3IHRhYgoKZXhwb3J0cy5NTF9NRURJQU5fUEVSQ0VOVFMgPSBNTF9NRURJQU5fUEVSQ0VOVFM7CnZhciBNTF9EQVRBX1BSRVZJRVdfQ09VTlQgPSAxMDsgLy8gYWRkIGEgcHJlZml4IHRvIGEgZGF0YWZlZWQgaWQgYmVmb3JlIHRoZSAiZGF0YWZlZWQtIiBwYXJ0IG9mIHRoZSBuYW1lCgpleHBvcnRzLk1MX0RBVEFfUFJFVklFV19DT1VOVCA9IE1MX0RBVEFfUFJFVklFV19DT1VOVDsKCmZ1bmN0aW9uIHByZWZpeERhdGFmZWVkSWQoZGF0YWZlZWRJZCwgcHJlZml4KSB7CiAgcmV0dXJuIGRhdGFmZWVkSWQubWF0Y2goL15kYXRhZmVlZC0vKSA/IGRhdGFmZWVkSWQucmVwbGFjZSgvXmRhdGFmZWVkLS8sICJkYXRhZmVlZC0iLmNvbmNhdChwcmVmaXgpKSA6ICJkYXRhZmVlZC0iLmNvbmNhdChwcmVmaXgpLmNvbmNhdChkYXRhZmVlZElkKTsKfSAvLyBSZXR1cm5zIGEgbmFtZSB3aGljaCBpcyBzYWZlIHRvIHVzZSBpbiBlbGFzdGljc2VhcmNoIGFnZ3JlZ2F0aW9ucyBmb3IgdGhlIHN1cHBsaWVkCi8vIGZpZWxkIG5hbWUuIEFnZ3JlZ2F0aW9uIG5hbWVzIG11c3QgYmUgYWxwaGEtbnVtZXJpYyBhbmQgY2FuIG9ubHkgY29udGFpbiAnXycgYW5kICctJyBjaGFyYWN0ZXJzLAovLyBzbyBpZiB0aGUgc3VwcGxpZWQgZmllbGQgbmFtZXMgY29udGFpbnMgZGlzYWxsb3dlZCBjaGFyYWN0ZXJzLCB0aGUgcHJvdmlkZWQgaW5kZXgKLy8gaWRlbnRpZmllciBpcyB1c2VkIHRvIHJldHVybiBhIHNhZmUgJ2R1bW15JyBuYW1lIGluIHRoZSBmb3JtYXQgJ2ZpZWxkX2luZGV4JyBlLmcuIGZpZWxkXzAsIGZpZWxkXzEKCgpmdW5jdGlvbiBnZXRTYWZlQWdncmVnYXRpb25OYW1lKGZpZWxkTmFtZSwgaW5kZXgpIHsKICByZXR1cm4gZmllbGROYW1lLm1hdGNoKC9eW2EtekEtWjAtOS1fLl0rJC8pID8gZmllbGROYW1lIDogImZpZWxkXyIuY29uY2F0KGluZGV4KTsKfQoKZnVuY3Rpb24gdW5pcVdpdGhJc0VxdWFsKGFycikgewogIHJldHVybiBhcnIucmVkdWNlKGZ1bmN0aW9uIChkZWR1cGVkQXJyYXksIHZhbHVlKSB7CiAgICBpZiAoZGVkdXBlZEFycmF5LmZpbHRlcihmdW5jdGlvbiAoY29tcGFyZVZhbHVlKSB7CiAgICAgIHJldHVybiBfbG9kYXNoLmRlZmF1bHQuaXNFcXVhbChjb21wYXJlVmFsdWUsIHZhbHVlKTsKICAgIH0pLmxlbmd0aCA9PT0gMCkgewogICAgICBkZWR1cGVkQXJyYXkucHVzaCh2YWx1ZSk7CiAgICB9CgogICAgcmV0dXJuIGRlZHVwZWRBcnJheTsKICB9LCBbXSk7Cn0gLy8gY2hlY2sgam9iIHdpdGhvdXQgbWFuaXB1bGF0aW5nIFVJIGFuZCByZXR1cm4gYSBsaXN0IG9mIG1lc3NhZ2VzCi8vIGpvYiBhbmQgZmllbGRzIGdldCBwYXNzZWQgYXMgYXJndW1lbnRzIGFuZCBhcmUgbm90IGFjY2Vzc2VkIGFzICRzY29wZS4qIHZpYSB0aGUgb3V0ZXIgc2NvcGUKLy8gYmVjYXVzZSB0aGUgcGxhbiBpcyB0byBtb3ZlIHRoaXMgZnVuY3Rpb24gdG8gdGhlIGNvbW1vbiBjb2RlIGFyZWEgc28gdGhhdCBpdCBjYW4gYmUgdXNlZCBvbiB0aGUgc2VydmVyIHNpZGUgdG9vLgoKCmZ1bmN0aW9uIGJhc2ljSm9iVmFsaWRhdGlvbihqb2IsIGZpZWxkcywgbGltaXRzKSB7CiAgdmFyIHNraXBNbWxDaGVja3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogIHZhciBtZXNzYWdlcyA9IFtdOwogIHZhciB2YWxpZCA9IHRydWU7CgogIGlmIChqb2IpIHsKICAgIC8vIEpvYiBkZXRhaWxzCiAgICBpZiAoX2xvZGFzaC5kZWZhdWx0LmlzRW1wdHkoam9iLmpvYl9pZCkpIHsKICAgICAgbWVzc2FnZXMucHVzaCh7CiAgICAgICAgaWQ6ICdqb2JfaWRfZW1wdHknCiAgICAgIH0pOwogICAgICB2YWxpZCA9IGZhbHNlOwogICAgfSBlbHNlIGlmIChpc0pvYklkVmFsaWQoam9iLmpvYl9pZCkgPT09IGZhbHNlKSB7CiAgICAgIG1lc3NhZ2VzLnB1c2goewogICAgICAgIGlkOiAnam9iX2lkX2ludmFsaWQnCiAgICAgIH0pOwogICAgICB2YWxpZCA9IGZhbHNlOwogICAgfSBlbHNlIGlmICgoMCwgX3ZhbGlkYXRvcnMubWF4TGVuZ3RoVmFsaWRhdG9yKShfdmFsaWRhdGlvbi5KT0JfSURfTUFYX0xFTkdUSCkoam9iLmpvYl9pZCkpIHsKICAgICAgbWVzc2FnZXMucHVzaCh7CiAgICAgICAgaWQ6ICdqb2JfaWRfaW52YWxpZF9tYXhfbGVuZ3RoJywKICAgICAgICBtYXhMZW5ndGg6IF92YWxpZGF0aW9uLkpPQl9JRF9NQVhfTEVOR1RICiAgICAgIH0pOwogICAgICB2YWxpZCA9IGZhbHNlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZXMucHVzaCh7CiAgICAgICAgaWQ6ICdqb2JfaWRfdmFsaWQnCiAgICAgIH0pOwogICAgfSAvLyBncm91cCBuYW1lcwoKCiAgICB2YXIgX3ZhbGlkYXRlR3JvdXBOYW1lcyA9IHZhbGlkYXRlR3JvdXBOYW1lcyhqb2IpLAogICAgICAgIGdyb3Vwc01lc3NhZ2VzID0gX3ZhbGlkYXRlR3JvdXBOYW1lcy5tZXNzYWdlcywKICAgICAgICBncm91cHNWYWxpZCA9IF92YWxpZGF0ZUdyb3VwTmFtZXMudmFsaWQ7CgogICAgbWVzc2FnZXMucHVzaC5hcHBseShtZXNzYWdlcywgX3RvQ29uc3VtYWJsZUFycmF5KGdyb3Vwc01lc3NhZ2VzKSk7CiAgICB2YWxpZCA9IHZhbGlkICYmIGdyb3Vwc1ZhbGlkOyAvLyBBbmFseXNpcyBDb25maWd1cmF0aW9uCgogICAgaWYgKGpvYi5hbmFseXNpc19jb25maWcuY2F0ZWdvcml6YXRpb25fZmlsdGVycykgewogICAgICB2YXIgdiA9IHRydWU7CgogICAgICBfbG9kYXNoLmRlZmF1bHQuZWFjaChqb2IuYW5hbHlzaXNfY29uZmlnLmNhdGVnb3JpemF0aW9uX2ZpbHRlcnMsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIG5ldyBSZWdFeHAoZCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgdiA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGpvYi5hbmFseXNpc19jb25maWcuY2F0ZWdvcml6YXRpb25fZmllbGRfbmFtZSA9PT0gdW5kZWZpbmVkIHx8IGpvYi5hbmFseXNpc19jb25maWcuY2F0ZWdvcml6YXRpb25fZmllbGRfbmFtZSA9PT0gJycpIHsKICAgICAgICAgIHYgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmIChkID09PSAnJykgewogICAgICAgICAgdiA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAodikgewogICAgICAgIG1lc3NhZ2VzLnB1c2goewogICAgICAgICAgaWQ6ICdjYXRlZ29yaXphdGlvbl9maWx0ZXJzX3ZhbGlkJwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIG1lc3NhZ2VzLnB1c2goewogICAgICAgICAgaWQ6ICdjYXRlZ29yaXphdGlvbl9maWx0ZXJzX2ludmFsaWQnCiAgICAgICAgfSk7CiAgICAgICAgdmFsaWQgPSBmYWxzZTsKICAgICAgfQogICAgfQoKICAgIGlmIChqb2IuYW5hbHlzaXNfY29uZmlnLmRldGVjdG9ycy5sZW5ndGggPT09IDApIHsKICAgICAgbWVzc2FnZXMucHVzaCh7CiAgICAgICAgaWQ6ICdkZXRlY3RvcnNfZW1wdHknCiAgICAgIH0pOwogICAgICB2YWxpZCA9IGZhbHNlOwogICAgfSBlbHNlIHsKICAgICAgdmFyIF92ID0gdHJ1ZTsKCiAgICAgIF9sb2Rhc2guZGVmYXVsdC5lYWNoKGpvYi5hbmFseXNpc19jb25maWcuZGV0ZWN0b3JzLCBmdW5jdGlvbiAoZCkgewogICAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHQuaXNFbXB0eShkLmZ1bmN0aW9uKSkgewogICAgICAgICAgX3YgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKF92KSB7CiAgICAgICAgbWVzc2FnZXMucHVzaCh7CiAgICAgICAgICBpZDogJ2RldGVjdG9yc19mdW5jdGlvbl9ub3RfZW1wdHknCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWVzc2FnZXMucHVzaCh7CiAgICAgICAgICBpZDogJ2RldGVjdG9yc19mdW5jdGlvbl9lbXB0eScKICAgICAgICB9KTsKICAgICAgICB2YWxpZCA9IGZhbHNlOwogICAgICB9CiAgICB9IC8vIGNoZWNrIGZvciBkdXBsaWNhdGUgZGV0ZWN0b3JzCgoKICAgIGlmIChqb2IuYW5hbHlzaXNfY29uZmlnLmRldGVjdG9ycy5sZW5ndGggPj0gMikgewogICAgICAvLyBjcmVhdGUgYW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoIGEgc3Vic2V0IG9mIHRoZSBhdHRyaWJ1dGVzCiAgICAgIC8vIHdoZXJlIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHRoZXkgYXJlIG5vdCBiZSB0aGUgc2FtZSBhY3Jvc3MgZGV0ZWN0b3JzCiAgICAgIHZhciBjb21wYXJlU3ViU2V0ID0gam9iLmFuYWx5c2lzX2NvbmZpZy5kZXRlY3RvcnMubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5waWNrKGQsIFsnZnVuY3Rpb24nLCAnZmllbGRfbmFtZScsICdieV9maWVsZF9uYW1lJywgJ292ZXJfZmllbGRfbmFtZScsICdwYXJ0aXRpb25fZmllbGRfbmFtZSddKTsKICAgICAgfSk7CiAgICAgIHZhciBkZWR1cGVkU3ViU2V0ID0gdW5pcVdpdGhJc0VxdWFsKGNvbXBhcmVTdWJTZXQpOwoKICAgICAgaWYgKGNvbXBhcmVTdWJTZXQubGVuZ3RoICE9PSBkZWR1cGVkU3ViU2V0Lmxlbmd0aCkgewogICAgICAgIG1lc3NhZ2VzLnB1c2goewogICAgICAgICAgaWQ6ICdkZXRlY3RvcnNfZHVwbGljYXRlcycKICAgICAgICB9KTsKICAgICAgICB2YWxpZCA9IGZhbHNlOwogICAgICB9CiAgICB9IC8vIHdlIHNraXAgdGhpcyBpbmZsdWVuY2VyIHRlc3QgYmVjYXVzZSB0aGUgY2xpZW50IHNpZGUgZm9ybSBjaGVjayBpcyBpZ25vcmluZyBpdAogICAgLy8gYW5kIHRoZSBzZXJ2ZXIgc2lkZSB0ZXN0cyBoYXZlIHRoZWlyIG93biBpbmZsdWVuY2VyIHRlc3QKICAgIC8vIFRPRE86IGNsYXJpZnkgaWYgdGhpcyBpcyBzdGlsbCBuZWVkZWQgb3IgY2FuIGJlIGRlbGV0ZWQKCiAgICAvKgogICAgaWYgKGpvYi5hbmFseXNpc19jb25maWcuaW5mbHVlbmNlcnMgJiYKICAgICAgam9iLmFuYWx5c2lzX2NvbmZpZy5pbmZsdWVuY2Vycy5sZW5ndGggPT09IDApIHsKICAgICAgbWVzc2FnZXMucHVzaCh7IGlkOiAnaW5mbHVlbmNlcnNfbG93JyB9KTsKICAgICAgdmFsaWQgPSBmYWxzZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2VzLnB1c2goeyBpZDogJ3N1Y2Nlc3NfaW5mbHVlbmNlcnMnIH0pOwogICAgfQogICAgKi8KCgogICAgaWYgKGpvYi5hbmFseXNpc19jb25maWcuYnVja2V0X3NwYW4gPT09ICcnIHx8IGpvYi5hbmFseXNpc19jb25maWcuYnVja2V0X3NwYW4gPT09IHVuZGVmaW5lZCkgewogICAgICBtZXNzYWdlcy5wdXNoKHsKICAgICAgICBpZDogJ2J1Y2tldF9zcGFuX2VtcHR5JwogICAgICB9KTsKICAgICAgdmFsaWQgPSBmYWxzZTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChpc1ZhbGlkVGltZUZvcm1hdChqb2IuYW5hbHlzaXNfY29uZmlnLmJ1Y2tldF9zcGFuKSkgewogICAgICAgIG1lc3NhZ2VzLnB1c2goewogICAgICAgICAgaWQ6ICdidWNrZXRfc3Bhbl92YWxpZCcsCiAgICAgICAgICBidWNrZXRTcGFuOiBqb2IuYW5hbHlzaXNfY29uZmlnLmJ1Y2tldF9zcGFuCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWVzc2FnZXMucHVzaCh7CiAgICAgICAgICBpZDogJ2J1Y2tldF9zcGFuX2ludmFsaWQnCiAgICAgICAgfSk7CiAgICAgICAgdmFsaWQgPSBmYWxzZTsKICAgICAgfQogICAgfSAvLyBEYXRhZmVlZAoKCiAgICBpZiAodHlwZW9mIGZpZWxkcyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgdmFyIGxvYWRlZEZpZWxkcyA9IE9iamVjdC5rZXlzKGZpZWxkcyk7CgogICAgICBpZiAobG9hZGVkRmllbGRzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIG1lc3NhZ2VzLnB1c2goewogICAgICAgICAgaWQ6ICdpbmRleF9maWVsZHNfaW52YWxpZCcKICAgICAgICB9KTsKICAgICAgICB2YWxpZCA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIG1lc3NhZ2VzLnB1c2goewogICAgICAgICAgaWQ6ICdpbmRleF9maWVsZHNfdmFsaWQnCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc2tpcE1tbENoZWNrcyA9PT0gZmFsc2UpIHsKICAgICAgLy8gbW9kZWwgbWVtb3J5IGxpbWl0CiAgICAgIHZhciBtbWwgPSBqb2IuYW5hbHlzaXNfbGltaXRzICYmIGpvYi5hbmFseXNpc19saW1pdHMubW9kZWxfbWVtb3J5X2xpbWl0OwoKICAgICAgdmFyIF92YWxpZGF0ZU1vZGVsTWVtb3J5TCA9IHZhbGlkYXRlTW9kZWxNZW1vcnlMaW1pdFVuaXRzKG1tbCksCiAgICAgICAgICBtbWxVbml0TWVzc2FnZXMgPSBfdmFsaWRhdGVNb2RlbE1lbW9yeUwubWVzc2FnZXMsCiAgICAgICAgICBtbWxVbml0VmFsaWQgPSBfdmFsaWRhdGVNb2RlbE1lbW9yeUwudmFsaWQ7CgogICAgICBtZXNzYWdlcy5wdXNoLmFwcGx5KG1lc3NhZ2VzLCBfdG9Db25zdW1hYmxlQXJyYXkobW1sVW5pdE1lc3NhZ2VzKSk7CiAgICAgIHZhbGlkID0gdmFsaWQgJiYgbW1sVW5pdFZhbGlkOwoKICAgICAgaWYgKG1tbFVuaXRWYWxpZCkgewogICAgICAgIC8vIGlmIG1tbCBpcyBhIHZhbGlkIGZvcm1hdCwKICAgICAgICAvLyBydW4gdGhlIHZhbGlkYXRpb24gYWdhaW5zdCBtYXggbW1sCiAgICAgICAgdmFyIF92YWxpZGF0ZU1vZGVsTWVtb3J5TDIgPSB2YWxpZGF0ZU1vZGVsTWVtb3J5TGltaXQoam9iLCBsaW1pdHMpLAogICAgICAgICAgICBtbWxNZXNzYWdlcyA9IF92YWxpZGF0ZU1vZGVsTWVtb3J5TDIubWVzc2FnZXMsCiAgICAgICAgICAgIG1tbFZhbGlkID0gX3ZhbGlkYXRlTW9kZWxNZW1vcnlMMi52YWxpZDsKCiAgICAgICAgbWVzc2FnZXMucHVzaC5hcHBseShtZXNzYWdlcywgX3RvQ29uc3VtYWJsZUFycmF5KG1tbE1lc3NhZ2VzKSk7CiAgICAgICAgdmFsaWQgPSB2YWxpZCAmJiBtbWxWYWxpZDsKICAgICAgfQogICAgfQogIH0gZWxzZSB7CiAgICB2YWxpZCA9IGZhbHNlOwogIH0KCiAgcmV0dXJuIHsKICAgIG1lc3NhZ2VzOiBtZXNzYWdlcywKICAgIHZhbGlkOiB2YWxpZCwKICAgIGNvbnRhaW5zOiBmdW5jdGlvbiBjb250YWlucyhpZCkgewogICAgICByZXR1cm4gbWVzc2FnZXMuc29tZShmdW5jdGlvbiAobSkgewogICAgICAgIHJldHVybiBpZCA9PT0gbS5pZDsKICAgICAgfSk7CiAgICB9LAogICAgZmluZDogZnVuY3Rpb24gZmluZChpZCkgewogICAgICByZXR1cm4gbWVzc2FnZXMuZmluZChmdW5jdGlvbiAobSkgewogICAgICAgIHJldHVybiBpZCA9PT0gbS5pZDsKICAgICAgfSk7CiAgICB9CiAgfTsKfQoKZnVuY3Rpb24gYmFzaWNEYXRhZmVlZFZhbGlkYXRpb24oZGF0YWZlZWQpIHsKICB2YXIgbWVzc2FnZXMgPSBbXTsKICB2YXIgdmFsaWQgPSB0cnVlOwoKICBpZiAoZGF0YWZlZWQpIHsKICAgIHZhciBxdWVyeURlbGF5TWVzc2FnZSA9IHsKICAgICAgaWQ6ICdxdWVyeV9kZWxheV92YWxpZCcKICAgIH07CgogICAgaWYgKGlzVmFsaWRUaW1lRm9ybWF0KGRhdGFmZWVkLnF1ZXJ5X2RlbGF5KSA9PT0gZmFsc2UpIHsKICAgICAgcXVlcnlEZWxheU1lc3NhZ2UgPSB7CiAgICAgICAgaWQ6ICdxdWVyeV9kZWxheV9pbnZhbGlkJwogICAgICB9OwogICAgICB2YWxpZCA9IGZhbHNlOwogICAgfQoKICAgIG1lc3NhZ2VzLnB1c2gocXVlcnlEZWxheU1lc3NhZ2UpOwogICAgdmFyIGZyZXF1ZW5jeU1lc3NhZ2UgPSB7CiAgICAgIGlkOiAnZnJlcXVlbmN5X3ZhbGlkJwogICAgfTsKCiAgICBpZiAoaXNWYWxpZFRpbWVGb3JtYXQoZGF0YWZlZWQuZnJlcXVlbmN5KSA9PT0gZmFsc2UpIHsKICAgICAgZnJlcXVlbmN5TWVzc2FnZSA9IHsKICAgICAgICBpZDogJ2ZyZXF1ZW5jeV9pbnZhbGlkJwogICAgICB9OwogICAgICB2YWxpZCA9IGZhbHNlOwogICAgfQoKICAgIG1lc3NhZ2VzLnB1c2goZnJlcXVlbmN5TWVzc2FnZSk7CiAgfQoKICByZXR1cm4gewogICAgbWVzc2FnZXM6IG1lc3NhZ2VzLAogICAgdmFsaWQ6IHZhbGlkLAogICAgY29udGFpbnM6IGZ1bmN0aW9uIGNvbnRhaW5zKGlkKSB7CiAgICAgIHJldHVybiBtZXNzYWdlcy5zb21lKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgcmV0dXJuIGlkID09PSBtLmlkOwogICAgICB9KTsKICAgIH0sCiAgICBmaW5kOiBmdW5jdGlvbiBmaW5kKGlkKSB7CiAgICAgIHJldHVybiBtZXNzYWdlcy5maW5kKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgcmV0dXJuIGlkID09PSBtLmlkOwogICAgICB9KTsKICAgIH0KICB9Owp9CgpmdW5jdGlvbiB2YWxpZGF0ZU1vZGVsTWVtb3J5TGltaXQoam9iLCBsaW1pdHMpIHsKICB2YXIgbWVzc2FnZXMgPSBbXTsKICB2YXIgdmFsaWQgPSB0cnVlOyAvLyBtb2RlbCBtZW1vcnkgbGltaXQKCiAgaWYgKHR5cGVvZiBqb2IuYW5hbHlzaXNfbGltaXRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygam9iLmFuYWx5c2lzX2xpbWl0cy5tb2RlbF9tZW1vcnlfbGltaXQgIT09ICd1bmRlZmluZWQnKSB7CiAgICBpZiAoX3R5cGVvZihsaW1pdHMpID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbGltaXRzLm1heF9tb2RlbF9tZW1vcnlfbGltaXQgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgIHZhciBtYXggPSBsaW1pdHMubWF4X21vZGVsX21lbW9yeV9saW1pdC50b1VwcGVyQ2FzZSgpOwogICAgICB2YXIgbW1sID0gam9iLmFuYWx5c2lzX2xpbWl0cy5tb2RlbF9tZW1vcnlfbGltaXQudG9VcHBlckNhc2UoKTsKICAgICAgdmFyIG1tbEJ5dGVzID0gKDAsIF9udW1lcmFsLmRlZmF1bHQpKG1tbCkudmFsdWUoKTsKICAgICAgdmFyIG1heEJ5dGVzID0gKDAsIF9udW1lcmFsLmRlZmF1bHQpKG1heCkudmFsdWUoKTsKCiAgICAgIGlmIChtbWxCeXRlcyA+IG1heEJ5dGVzKSB7CiAgICAgICAgbWVzc2FnZXMucHVzaCh7CiAgICAgICAgICBpZDogJ21vZGVsX21lbW9yeV9saW1pdF9pbnZhbGlkJwogICAgICAgIH0pOwogICAgICAgIHZhbGlkID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWVzc2FnZXMucHVzaCh7CiAgICAgICAgICBpZDogJ21vZGVsX21lbW9yeV9saW1pdF92YWxpZCcKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB2YWxpZCwKICAgIG1lc3NhZ2VzOiBtZXNzYWdlcywKICAgIGNvbnRhaW5zOiBmdW5jdGlvbiBjb250YWlucyhpZCkgewogICAgICByZXR1cm4gbWVzc2FnZXMuc29tZShmdW5jdGlvbiAobSkgewogICAgICAgIHJldHVybiBpZCA9PT0gbS5pZDsKICAgICAgfSk7CiAgICB9LAogICAgZmluZDogZnVuY3Rpb24gZmluZChpZCkgewogICAgICByZXR1cm4gbWVzc2FnZXMuZmluZChmdW5jdGlvbiAobSkgewogICAgICAgIHJldHVybiBpZCA9PT0gbS5pZDsKICAgICAgfSk7CiAgICB9CiAgfTsKfQoKZnVuY3Rpb24gdmFsaWRhdGVNb2RlbE1lbW9yeUxpbWl0VW5pdHMobW9kZWxNZW1vcnlMaW1pdCkgewogIHZhciBtZXNzYWdlcyA9IFtdOwogIHZhciB2YWxpZCA9IHRydWU7CgogIGlmIChtb2RlbE1lbW9yeUxpbWl0ICE9PSB1bmRlZmluZWQpIHsKICAgIHZhciBtbWwgPSBTdHJpbmcobW9kZWxNZW1vcnlMaW1pdCkudG9VcHBlckNhc2UoKTsKICAgIHZhciBtbWxTcGxpdCA9IG1tbC5tYXRjaCgvXGQrKFx3KykkLyk7CiAgICB2YXIgdW5pdCA9IG1tbFNwbGl0ICYmIG1tbFNwbGl0Lmxlbmd0aCA9PT0gMiA/IG1tbFNwbGl0WzFdIDogbnVsbDsKCiAgICBpZiAoX3ZhbGlkYXRpb24uQUxMT1dFRF9EQVRBX1VOSVRTLmluZGV4T2YodW5pdCkgPT09IC0xKSB7CiAgICAgIG1lc3NhZ2VzLnB1c2goewogICAgICAgIGlkOiAnbW9kZWxfbWVtb3J5X2xpbWl0X3VuaXRzX2ludmFsaWQnCiAgICAgIH0pOwogICAgICB2YWxpZCA9IGZhbHNlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZXMucHVzaCh7CiAgICAgICAgaWQ6ICdtb2RlbF9tZW1vcnlfbGltaXRfdW5pdHNfdmFsaWQnCiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB2YWxpZCwKICAgIG1lc3NhZ2VzOiBtZXNzYWdlcywKICAgIGNvbnRhaW5zOiBmdW5jdGlvbiBjb250YWlucyhpZCkgewogICAgICByZXR1cm4gbWVzc2FnZXMuc29tZShmdW5jdGlvbiAobSkgewogICAgICAgIHJldHVybiBpZCA9PT0gbS5pZDsKICAgICAgfSk7CiAgICB9LAogICAgZmluZDogZnVuY3Rpb24gZmluZChpZCkgewogICAgICByZXR1cm4gbWVzc2FnZXMuZmluZChmdW5jdGlvbiAobSkgewogICAgICAgIHJldHVybiBpZCA9PT0gbS5pZDsKICAgICAgfSk7CiAgICB9CiAgfTsKfQoKZnVuY3Rpb24gdmFsaWRhdGVHcm91cE5hbWVzKGpvYikgewogIHZhciBfam9iJGdyb3VwcyA9IGpvYi5ncm91cHMsCiAgICAgIGdyb3VwcyA9IF9qb2IkZ3JvdXBzID09PSB2b2lkIDAgPyBbXSA6IF9qb2IkZ3JvdXBzOwogIHZhciBlcnJvck1lc3NhZ2VzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShncm91cHMuc29tZShmdW5jdGlvbiAoZ3JvdXApIHsKICAgIHJldHVybiAhaXNKb2JJZFZhbGlkKGdyb3VwKTsKICB9KSA/IFt7CiAgICBpZDogJ2pvYl9ncm91cF9pZF9pbnZhbGlkJwogIH1dIDogW10pLCBfdG9Db25zdW1hYmxlQXJyYXkoZ3JvdXBzLnNvbWUoZnVuY3Rpb24gKGdyb3VwKSB7CiAgICByZXR1cm4gKDAsIF92YWxpZGF0b3JzLm1heExlbmd0aFZhbGlkYXRvcikoX3ZhbGlkYXRpb24uSk9CX0lEX01BWF9MRU5HVEgpKGdyb3VwKTsKICB9KSA/IFt7CiAgICBpZDogJ2pvYl9ncm91cF9pZF9pbnZhbGlkX21heF9sZW5ndGgnCiAgfV0gOiBbXSkpOwogIHZhciB2YWxpZCA9IGVycm9yTWVzc2FnZXMubGVuZ3RoID09PSAwOwogIHZhciBtZXNzYWdlcyA9IHZhbGlkICYmIGdyb3Vwcy5sZW5ndGggPyBbewogICAgaWQ6ICdqb2JfZ3JvdXBfaWRfdmFsaWQnCiAgfV0gOiBlcnJvck1lc3NhZ2VzOwogIHJldHVybiB7CiAgICB2YWxpZDogdmFsaWQsCiAgICBtZXNzYWdlczogbWVzc2FnZXMsCiAgICBjb250YWluczogZnVuY3Rpb24gY29udGFpbnMoaWQpIHsKICAgICAgcmV0dXJuIG1lc3NhZ2VzLnNvbWUoZnVuY3Rpb24gKG0pIHsKICAgICAgICByZXR1cm4gaWQgPT09IG0uaWQ7CiAgICAgIH0pOwogICAgfSwKICAgIGZpbmQ6IGZ1bmN0aW9uIGZpbmQoaWQpIHsKICAgICAgcmV0dXJuIG1lc3NhZ2VzLmZpbmQoZnVuY3Rpb24gKG0pIHsKICAgICAgICByZXR1cm4gaWQgPT09IG0uaWQ7CiAgICAgIH0pOwogICAgfQogIH07Cn0KCmZ1bmN0aW9uIGlzVmFsaWRUaW1lRm9ybWF0KHZhbHVlKSB7CiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgdmFyIGludGVydmFsID0gKDAsIF9wYXJzZV9pbnRlcnZhbC5wYXJzZUludGVydmFsKSh2YWx1ZSwgZmFsc2UpOwogIHJldHVybiBpbnRlcnZhbCAhPT0gbnVsbCAmJiBpbnRlcnZhbC5hc01pbGxpc2Vjb25kcygpICE9PSAwOwp9IC8vIFJldHVybnMgdGhlIGxhdGVzdCBvZiB0aGUgbGFzdCBzb3VyY2UgZGF0YSBhbmQgbGFzdCBwcm9jZXNzZWQgYnVja2V0IHRpbWVzdGFtcCwKLy8gYXMgdXNlZCBmb3IgZXhhbXBsZSBpbiBzZXR0aW5nIHRoZSBlbmQgdGltZSBvZiByZXN1bHRzIHZpZXdzIGZvciBjYXNlcyB3aGVyZQovLyBhbm9tYWxpZXMgbWlnaHQgaGF2ZSBiZWVuIHJhaXNlZCBhZnRlciB0aGUgcG9pbnQgYXQgd2hpY2ggZGF0YSBpbmdlc3QgaGFzIHN0b3BwZWQuCgoKZnVuY3Rpb24gZ2V0TGF0ZXN0RGF0YU9yQnVja2V0VGltZXN0YW1wKGxhdGVzdERhdGFUaW1lc3RhbXAsIGxhdGVzdEJ1Y2tldFRpbWVzdGFtcCkgewogIGlmIChsYXRlc3REYXRhVGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgbGF0ZXN0QnVja2V0VGltZXN0YW1wICE9PSB1bmRlZmluZWQpIHsKICAgIHJldHVybiBNYXRoLm1heChsYXRlc3REYXRhVGltZXN0YW1wLCBsYXRlc3RCdWNrZXRUaW1lc3RhbXApOwogIH0gZWxzZSB7CiAgICByZXR1cm4gbGF0ZXN0RGF0YVRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkID8gbGF0ZXN0RGF0YVRpbWVzdGFtcCA6IGxhdGVzdEJ1Y2tldFRpbWVzdGFtcDsKICB9Cn0KLyoqCiAqIElmIGNyZWF0ZWRfYnkgaXMgc2V0IGluIHRoZSBqb2IncyBjdXN0b21fc2V0dGluZ3MsIHJlbW92ZSBpdCBpbiBjYXNlCiAqIGl0IHdhcyBjcmVhdGVkIGJ5IGEgam9iIHdpemFyZCBhcyB0aGUgcnVsZXMgY2Fubm90IGN1cnJlbnRseSBiZSBlZGl0ZWQKICogaW4gdGhlIGpvYiB3aXphcmRzIGFuZCBzbyB3b3VsZCBiZSBsb3N0IGluIGEgY2xvbmUuCiAqLwoKCmZ1bmN0aW9uIHByb2Nlc3NDcmVhdGVkQnkoY3VzdG9tU2V0dGluZ3MpIHsKICBpZiAoT2JqZWN0LnZhbHVlcyhfbmV3X2pvYi5DUkVBVEVEX0JZX0xBQkVMKS5pbmNsdWRlcyhjdXN0b21TZXR0aW5ncy5jcmVhdGVkX2J5KSkgewogICAgZGVsZXRlIGN1c3RvbVNldHRpbmdzLmNyZWF0ZWRfYnk7CiAgfQp9"},null]}