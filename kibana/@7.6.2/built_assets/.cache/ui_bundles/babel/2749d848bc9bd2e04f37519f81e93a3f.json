{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/time_buckets/time_buckets.js","dependencies":[{"path":"src/legacy/ui/public/time_buckets/time_buckets.js","mtime":1585205041219},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRpbWVCdWNrZXRzID0gVGltZUJ1Y2tldHM7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9tb21lbnQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm1vbWVudCIpKTsKCnZhciBfbmV3X3BsYXRmb3JtID0gcmVxdWlyZSgidWkvbmV3X3BsYXRmb3JtIik7Cgp2YXIgX2NhbGNfYXV0b19pbnRlcnZhbCA9IHJlcXVpcmUoIi4vY2FsY19hdXRvX2ludGVydmFsIik7Cgp2YXIgX2NhbGNfZXNfaW50ZXJ2YWwgPSByZXF1aXJlKCIuL2NhbGNfZXNfaW50ZXJ2YWwiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vcGx1Z2lucy9kYXRhL3B1YmxpYyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qCiAqIExpY2Vuc2VkIHRvIEVsYXN0aWNzZWFyY2ggQi5WLiB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvcgogKiBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodAogKiBvd25lcnNoaXAuIEVsYXN0aWNzZWFyY2ggQi5WLiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyCiAqIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5CiAqIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwp2YXIgZ2V0Q29uZmlnID0gZnVuY3Rpb24gZ2V0Q29uZmlnKCkgewogIHZhciBfbnBTdGFydCRjb3JlJHVpU2V0dGk7CgogIHJldHVybiAoX25wU3RhcnQkY29yZSR1aVNldHRpID0gX25ld19wbGF0Zm9ybS5ucFN0YXJ0LmNvcmUudWlTZXR0aW5ncykuZ2V0LmFwcGx5KF9ucFN0YXJ0JGNvcmUkdWlTZXR0aSwgYXJndW1lbnRzKTsKfTsKCmZ1bmN0aW9uIGlzVmFsaWRNb21lbnQobSkgewogIHJldHVybiBtICYmICdpc1ZhbGlkJyBpbiBtICYmIG0uaXNWYWxpZCgpOwp9Ci8qKgogKiBIZWxwZXIgY2xhc3MgZm9yIHdyYXBwaW5nIHRoZSBjb25jZXB0IG9mIGFuICJJbnRlcnZhbCIsCiAqIHdoaWNoIGRlc2NyaWJlcyBhIHRpbWVzcGFuIHRoYXQgd2lsbCBzZXBhcmF0ZSBtb21lbnRzLgogKgogKiBAcGFyYW0ge3N0YXRlfSBvYmplY3QgLSBvbmUgb2YgIiIKICogQHBhcmFtIHtbdHlwZV19IGRpc3BsYXkgW2Rlc2NyaXB0aW9uXQogKi8KCgpmdW5jdGlvbiBUaW1lQnVja2V0cygpIHsKICByZXR1cm4gVGltZUJ1Y2tldHMuX19jYWNoZWRfXyh0aGlzKTsKfQovKioqKgogKiAgUFVCTElDIEFQSQogKioqKi8KCi8qKgogKiBTZXQgdGhlIGJvdW5kcyB0aGF0IHRoZXNlIGJ1Y2tldHMgYXJlIGV4cGVjdGVkIHRvIGNvdmVyLgogKiBUaGlzIGlzIHJlcXVpcmVkIHRvIHN1cHBvcnQgaW50ZXJ2YWwgImF1dG8iIGFzIHdlbGwKICogYXMgaW50ZXJ2YWwgc2NhbGluZy4KICoKICogQHBhcmFtIHtvYmplY3R9IGlucHV0IC0gYW4gb2JqZWN0IHdpdGggcHJvcGVydGllcyBtaW4gYW5kIG1heCwKICogICAgICAgICAgICAgICAgICAgICAgIHJlcHJlc2VudGluZyB0aGUgZWRnZXMgZm9yIHRoZSB0aW1lIHNwYW4KICogICAgICAgICAgICAgICAgICAgICAgIHdlIHNob3VsZCBjb3ZlcgogKgogKiBAcmV0dXJucyB7dW5kZWZpbmVkfQogKi8KCgpUaW1lQnVja2V0cy5wcm90b3R5cGUuc2V0Qm91bmRzID0gZnVuY3Rpb24gKGlucHV0KSB7CiAgaWYgKCFpbnB1dCkgcmV0dXJuIHRoaXMuY2xlYXJCb3VuZHMoKTsKICB2YXIgYm91bmRzOwoKICBpZiAoX2xvZGFzaC5kZWZhdWx0LmlzUGxhaW5PYmplY3QoaW5wdXQpKSB7CiAgICAvLyBhY2NlcHQgdGhlIHJlc3BvbnNlIGZyb20gdGltZWZpbHRlci5nZXRBY3RpdmVCb3VuZHMoKQogICAgYm91bmRzID0gW2lucHV0Lm1pbiwgaW5wdXQubWF4XTsKICB9IGVsc2UgewogICAgYm91bmRzID0gQXJyYXkuaXNBcnJheShpbnB1dCkgPyBpbnB1dCA6IFtdOwogIH0KCiAgdmFyIG1vbWVudHMgPSAoMCwgX2xvZGFzaC5kZWZhdWx0KShib3VuZHMpLm1hcChfbG9kYXNoLmRlZmF1bHQuYXJ5KF9tb21lbnQuZGVmYXVsdCwgMSkpLnNvcnRCeShOdW1iZXIpOwogIHZhciB2YWxpZCA9IG1vbWVudHMuc2l6ZSgpID09PSAyICYmIG1vbWVudHMuZXZlcnkoaXNWYWxpZE1vbWVudCk7CgogIGlmICghdmFsaWQpIHsKICAgIHRoaXMuY2xlYXJCb3VuZHMoKTsKICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBib3VuZHMgc2V0OiAnICsgaW5wdXQpOwogIH0KCiAgdGhpcy5fbGIgPSBtb21lbnRzLnNoaWZ0KCk7CiAgdGhpcy5fdWIgPSBtb21lbnRzLnBvcCgpOwoKICBpZiAodGhpcy5nZXREdXJhdGlvbigpLmFzU2Vjb25kcygpIDwgMCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW50ZXJ2YWxzIG11c3QgYmUgcG9zaXRpdmUnKTsKICB9Cn07Ci8qKgogKiBDbGVhciB0aGUgc3RvcmVkIGJvdW5kcwogKgogKiBAcmV0dXJuIHt1bmRlZmluZWR9CiAqLwoKClRpbWVCdWNrZXRzLnByb3RvdHlwZS5jbGVhckJvdW5kcyA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLl9sYiA9IHRoaXMuX3ViID0gbnVsbDsKfTsKLyoqCiAqIENoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIHJlY2VpdmVkIGJvdW5kcyB5ZXQKICoKICogQHJldHVybiB7Qm9vbGVhbn0KICovCgoKVGltZUJ1Y2tldHMucHJvdG90eXBlLmhhc0JvdW5kcyA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gaXNWYWxpZE1vbWVudCh0aGlzLl91YikgJiYgaXNWYWxpZE1vbWVudCh0aGlzLl9sYik7Cn07Ci8qKgogKiBSZXR1cm4gdGhlIGN1cnJlbnQgYm91bmRzLCBpZiB3ZSBoYXZlIGFueS4KICoKICogVEhJUyBET0VTIE5PVCBDTE9ORSBUSEUgQk9VTkRTLCBzbyBlZGl0aW5nIHRoZW0KICogbWF5IGhhdmUgdW5leHBlY3RlZCBzaWRlLWVmZmVjdHMuIEFsd2F5cwogKiBjYWxsIGJvdW5kcy5taW4uY2xvbmUoKSBiZWZvcmUgZWRpdGluZwogKgogKiBAcmV0dXJuIHtvYmplY3R8dW5kZWZpbmVkfSAtIElmIGJvdW5kcyBhcmUgbm90IGRlZmluZWQsIHRoaXMKICogICAgICAgICAgICAgICAgICAgICAgcmV0dXJucyB1bmRlZmluZWQsIGVsc2UgaXQgcmV0dXJucyB0aGUgYm91bmRzCiAqICAgICAgICAgICAgICAgICAgICAgIGZvciB0aGVzZSBidWNrZXRzLiBUaGlzIG9iamVjdCBoYXMgdHdvIHByb3BzLAogKiAgICAgICAgICAgICAgICAgICAgICBtaW4gYW5kIG1heC4gRWFjaCBwcm9wZXJ0eSB3aWxsIGJlIGEgbW9tZW50KCkKICogICAgICAgICAgICAgICAgICAgICAgb2JqZWN0CiAqCiAqLwoKClRpbWVCdWNrZXRzLnByb3RvdHlwZS5nZXRCb3VuZHMgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKCF0aGlzLmhhc0JvdW5kcygpKSByZXR1cm47CiAgcmV0dXJuIHsKICAgIG1pbjogdGhpcy5fbGIsCiAgICBtYXg6IHRoaXMuX3ViCiAgfTsKfTsKLyoqCiAqIEdldCBhIG1vbWVudCBkdXJhdGlvbiBvYmplY3QgcmVwcmVzZW50aW5nCiAqIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBib3VuZHMsIGlmIHRoZSBib3VuZHMKICogYXJlIHNldC4KICoKICogQHJldHVybiB7bW9tZW50LmR1cmF0aW9ufHVuZGVmaW5lZH0KICovCgoKVGltZUJ1Y2tldHMucHJvdG90eXBlLmdldER1cmF0aW9uID0gZnVuY3Rpb24gKCkgewogIGlmICghdGhpcy5oYXNCb3VuZHMoKSkgcmV0dXJuOwogIHJldHVybiBfbW9tZW50LmRlZmF1bHQuZHVyYXRpb24odGhpcy5fdWIgLSB0aGlzLl9sYiwgJ21zJyk7Cn07Ci8qKgogKiBVcGRhdGUgdGhlIGludGVydmFsIGF0IHdoaWNoIGJ1Y2tldHMgc2hvdWxkIGJlCiAqIGdlbmVyYXRlZC4KICoKICogSW5wdXQgY2FuIGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nOgogKiAgLSBBbnkgb2JqZWN0IGZyb20gc3JjL2xlZ2FjeS91aS9hZ2dfdHlwZXMvYnVja2V0cy9faW50ZXJ2YWxfb3B0aW9ucy5qcwogKiAgLSAiYXV0byIKICogIC0gUGFzcyBhIHZhbGlkIG1vbWVudCB1bml0CiAqICAtIGEgbW9tZW50LmR1cmF0aW9uIG9iamVjdC4KICoKICogQHBhcmFtIHtvYmplY3R8c3RyaW5nfG1vbWVudC5kdXJhdGlvbn0gaW5wdXQgLSBzZWUgZGVzYwogKi8KCgpUaW1lQnVja2V0cy5wcm90b3R5cGUuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbiAoaW5wdXQpIHsKICAvLyBQcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgdW5pdHMgYmVjYXVzZSB0aGV5J3JlIGxvc3Qgd2hlbiB0aGUgaW50ZXJ2YWwgaXMgY29udmVydGVkIHRvIGEKICAvLyBtb21lbnQgZHVyYXRpb24gb2JqZWN0LgogIHRoaXMub3JpZ2luYWxJbnRlcnZhbCA9IGlucHV0OwogIHZhciBpbnRlcnZhbCA9IGlucHV0OyAvLyBzZWxlY3Rpb24gb2JqZWN0IC0+IHZhbAoKICBpZiAoX2xvZGFzaC5kZWZhdWx0LmlzT2JqZWN0KGlucHV0KSkgewogICAgaW50ZXJ2YWwgPSBpbnB1dC52YWw7CiAgfQoKICBpZiAoIWludGVydmFsIHx8IGludGVydmFsID09PSAnYXV0bycpIHsKICAgIHRoaXMuX2kgPSAnYXV0byc7CiAgICByZXR1cm47CiAgfQoKICBpZiAoX2xvZGFzaC5kZWZhdWx0LmlzU3RyaW5nKGludGVydmFsKSkgewogICAgaW5wdXQgPSBpbnRlcnZhbDsKICAgIGludGVydmFsID0gKDAsIF9wdWJsaWMucGFyc2VJbnRlcnZhbCkoaW50ZXJ2YWwpOwoKICAgIGlmICgraW50ZXJ2YWwgPT09IDApIHsKICAgICAgaW50ZXJ2YWwgPSBudWxsOwogICAgfQogIH0gLy8gaWYgdGhlIHZhbHVlIHdhc24ndCBjb252ZXJ0ZWQgdG8gYSBkdXJhdGlvbiwgYW5kIGlzbid0CiAgLy8gYWxyZWFkeSBhIGR1cmF0aW9uLCB3ZSBoYXZlIGEgcHJvYmxlbQoKCiAgaWYgKCFfbW9tZW50LmRlZmF1bHQuaXNEdXJhdGlvbihpbnRlcnZhbCkpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyInICsgaW5wdXQgKyAnIiBpcyBub3QgYSB2YWxpZCBpbnRlcnZhbC4nKTsKICB9CgogIHRoaXMuX2kgPSBpbnRlcnZhbDsKfTsKLyoqCiAqIEdldCB0aGUgaW50ZXJ2YWwgZm9yIHRoZSBidWNrZXRzLiBJZiB0aGUKICogbnVtYmVyIG9mIGJ1Y2tldHMgY3JlYXRlZCBieSB0aGUgaW50ZXJ2YWwgc2V0CiAqIGlzIGxhcmdlciB0aGFuIGNvbmZpZzpoaXN0b2dyYW06bWF4QmFycyB0aGVuIHRoZQogKiBpbnRlcnZhbCB3aWxsIGJlIHNjYWxlZCB1cC4gSWYgdGhlIG51bWJlciBvZiBidWNrZXRzCiAqIGNyZWF0ZWQgaXMgbGVzcyB0aGFuIG9uZSwgdGhlIGludGVydmFsIGlzIHNjYWxlZCBiYWNrLgogKgogKiBUaGUgaW50ZXJ2YWwgb2JqZWN0IHJldHVybmVkIGlzIGEgbW9tZW50LmR1cmF0aW9uCiAqIG9iamVjdCB0aGF0IGhhcyBiZWVuIGRlY29yYXRlZCB3aXRoIHRoZSBmb2xsb3dpbmcKICogcHJvcGVydGllcy4KICoKICogaW50ZXJ2YWwuZGVzY3JpcHRpb246IGEgdGV4dCBkZXNjcmlwdGlvbiBvZiB0aGUgaW50ZXJ2YWwuCiAqICAgZGVzaWduZWQgdG8gYmUgdXNlZCBsaXN0ICJmaWVsZCBwZXIge3sgZGVzYyB9fSIuCiAqICAgICAtICJtaW51dGUiCiAqICAgICAtICIxMCBkYXlzIgogKiAgICAgLSAiMyB5ZWFycyIKICoKICogaW50ZXJ2YWwuZXhwcjogdGhlIGVsYXN0aWNzZWFyY2ggZXhwcmVzc2lvbiB0aGF0IGNyZWF0ZXMgdGhpcwogKiAgIGludGVydmFsLiBJZiB0aGUgaW50ZXJ2YWwgZG9lcyBub3QgcHJvcGVybHkgZm9ybSBhbiBlbGFzdGljc2VhcmNoCiAqICAgZXhwcmVzc2lvbiBpdCB3aWxsIGJlIGZvcmNlZCBpbnRvIG9uZS4KICoKICogaW50ZXJ2YWwuc2NhbGVkOiB0aGUgaW50ZXJ2YWwgd2FzIGFkanVzdGVkIHRvCiAqICAgYWNjb21tb2RhdGUgdGhlIG1heEJhcnMgc2V0dGluZy4KICoKICogaW50ZXJ2YWwuc2NhbGU6IHRoZSBudW1iZXIgdGhhdCB5LXZhbHVlcyBzaG91bGQgYmUKICogICBtdWx0aXBsaWVkIGJ5CiAqCiAqIGludGVydmFsLnNjYWxlRGVzY3JpcHRpb246IGEgZGVzY3JpcHRpb24gdGhhdCByZWZsZWN0cwogKiAgIHRoZSB2YWx1ZXMgd2hpY2ggd2lsbCBiZSBwcm9kdWNlZCBieSB1c2luZyB0aGUKICogICBpbnRlcnZhbC5zY2FsZS4KICoKICoKICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dCiAqLwoKClRpbWVCdWNrZXRzLnByb3RvdHlwZS5nZXRJbnRlcnZhbCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgdXNlTm9ybWFsaXplZEVzSW50ZXJ2YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRydWU7CiAgdmFyIHNlbGYgPSB0aGlzOwogIHZhciBkdXJhdGlvbiA9IHNlbGYuZ2V0RHVyYXRpb24oKTsKICB2YXIgcGFyc2VkSW50ZXJ2YWwgPSByZWFkSW50ZXJ2YWwoKTsKCiAgaWYgKHVzZU5vcm1hbGl6ZWRFc0ludGVydmFsKSB7CiAgICByZXR1cm4gZGVjb3JhdGVJbnRlcnZhbChtYXliZVNjYWxlSW50ZXJ2YWwocGFyc2VkSW50ZXJ2YWwpKTsKICB9IGVsc2UgewogICAgcmV0dXJuIGRlY29yYXRlSW50ZXJ2YWwocGFyc2VkSW50ZXJ2YWwpOwogIH0gLy8gZWl0aGVyIHB1bGwgdGhlIGludGVydmFsIGZyb20gc3RhdGUgb3IgY2FsY3VsYXRlIHRoZSBhdXRvLWludGVydmFsCgoKICBmdW5jdGlvbiByZWFkSW50ZXJ2YWwoKSB7CiAgICB2YXIgaW50ZXJ2YWwgPSBzZWxmLl9pOwogICAgaWYgKF9tb21lbnQuZGVmYXVsdC5pc0R1cmF0aW9uKGludGVydmFsKSkgcmV0dXJuIGludGVydmFsOwogICAgcmV0dXJuICgwLCBfY2FsY19hdXRvX2ludGVydmFsLmNhbGNBdXRvSW50ZXJ2YWxOZWFyKShnZXRDb25maWcoJ2hpc3RvZ3JhbTpiYXJUYXJnZXQnKSwgTnVtYmVyKGR1cmF0aW9uKSk7CiAgfSAvLyBjaGVjayB0byBzZWUgaWYgdGhlIGludGVydmFsIHNob3VsZCBiZSBzY2FsZWQsIGFuZCBzY2FsZSBpdCBpZiBzbwoKCiAgZnVuY3Rpb24gbWF5YmVTY2FsZUludGVydmFsKGludGVydmFsKSB7CiAgICBpZiAoIXNlbGYuaGFzQm91bmRzKCkpIHJldHVybiBpbnRlcnZhbDsKICAgIHZhciBtYXhMZW5ndGggPSBnZXRDb25maWcoJ2hpc3RvZ3JhbTptYXhCYXJzJyk7CiAgICB2YXIgYXBwcm94TGVuID0gZHVyYXRpb24gLyBpbnRlcnZhbDsKICAgIHZhciBzY2FsZWQ7CgogICAgaWYgKGFwcHJveExlbiA+IG1heExlbmd0aCkgewogICAgICBzY2FsZWQgPSAoMCwgX2NhbGNfYXV0b19pbnRlcnZhbC5jYWxjQXV0b0ludGVydmFsTGVzc1RoYW4pKG1heExlbmd0aCwgTnVtYmVyKGR1cmF0aW9uKSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gaW50ZXJ2YWw7CiAgICB9CgogICAgaWYgKCtzY2FsZWQgPT09ICtpbnRlcnZhbCkgcmV0dXJuIGludGVydmFsOwogICAgZGVjb3JhdGVJbnRlcnZhbChpbnRlcnZhbCk7CiAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmFzc2lnbihzY2FsZWQsIHsKICAgICAgcHJlU2NhbGVkOiBpbnRlcnZhbCwKICAgICAgc2NhbGU6IGludGVydmFsIC8gc2NhbGVkLAogICAgICBzY2FsZWQ6IHRydWUKICAgIH0pOwogIH0gLy8gYXBwZW5kIHNvbWUgVGltZUJ1Y2tldHMgc3BlY2lmaWMgcHJvcHMgdG8gdGhlIGludGVydmFsCgoKICBmdW5jdGlvbiBkZWNvcmF0ZUludGVydmFsKGludGVydmFsKSB7CiAgICB2YXIgZXNJbnRlcnZhbCA9IHVzZU5vcm1hbGl6ZWRFc0ludGVydmFsID8gKDAsIF9jYWxjX2VzX2ludGVydmFsLmNvbnZlcnREdXJhdGlvblRvTm9ybWFsaXplZEVzSW50ZXJ2YWwpKGludGVydmFsKSA6ICgwLCBfY2FsY19lc19pbnRlcnZhbC5jb252ZXJ0SW50ZXJ2YWxUb0VzSW50ZXJ2YWwpKHNlbGYub3JpZ2luYWxJbnRlcnZhbCk7CiAgICBpbnRlcnZhbC5lc1ZhbHVlID0gZXNJbnRlcnZhbC52YWx1ZTsKICAgIGludGVydmFsLmVzVW5pdCA9IGVzSW50ZXJ2YWwudW5pdDsKICAgIGludGVydmFsLmV4cHJlc3Npb24gPSBlc0ludGVydmFsLmV4cHJlc3Npb247CiAgICBpbnRlcnZhbC5vdmVyZmxvdyA9IGR1cmF0aW9uID4gaW50ZXJ2YWwgPyBfbW9tZW50LmRlZmF1bHQuZHVyYXRpb24oaW50ZXJ2YWwgLSBkdXJhdGlvbikgOiBmYWxzZTsKCiAgICB2YXIgcHJldHR5VW5pdHMgPSBfbW9tZW50LmRlZmF1bHQubm9ybWFsaXplVW5pdHMoZXNJbnRlcnZhbC51bml0KTsKCiAgICBpZiAoZXNJbnRlcnZhbC52YWx1ZSA9PT0gMSkgewogICAgICBpbnRlcnZhbC5kZXNjcmlwdGlvbiA9IHByZXR0eVVuaXRzOwogICAgfSBlbHNlIHsKICAgICAgaW50ZXJ2YWwuZGVzY3JpcHRpb24gPSBlc0ludGVydmFsLnZhbHVlICsgJyAnICsgcHJldHR5VW5pdHMgKyAncyc7CiAgICB9CgogICAgcmV0dXJuIGludGVydmFsOwogIH0KfTsKLyoqCiAqIEdldCBhIGRhdGUgZm9ybWF0IHN0cmluZyB0aGF0IHdpbGwgcmVwcmVzZW50IGRhdGVzIHRoYXQKICogcHJvZ3Jlc3MgYXQgb3VyIGludGVydmFsLgogKgogKiBTaW5jZSBvdXIgaW50ZXJ2YWwgY2FuIGJlIGFzIHNtYWxsIGFzIDFtcywgdGhlIGRlZmF1bHQKICogZGF0ZSBmb3JtYXQgaXMgdXN1YWxseSB3YXkgdG9vIG11Y2guIHdpdGggYGRhdGVGb3JtYXQ6c2NhbGVkYAogKiB1c2VycyBjYW4gbW9kaWZ5IGhvdyBkYXRlcyBhcmUgZm9ybWF0dGVkIHdpdGhpbiBzZXJpZXMKICogcHJvZHVjZWQgYnkgVGltZUJ1Y2tldHMKICoKICogQHJldHVybiB7c3RyaW5nfQogKi8KCgpUaW1lQnVja2V0cy5wcm90b3R5cGUuZ2V0U2NhbGVkRGF0ZUZvcm1hdCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgaW50ZXJ2YWwgPSB0aGlzLmdldEludGVydmFsKCk7CiAgdmFyIHJ1bGVzID0gZ2V0Q29uZmlnKCdkYXRlRm9ybWF0OnNjYWxlZCcpOwoKICBmb3IgKHZhciBpID0gcnVsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIHZhciBydWxlID0gcnVsZXNbaV07CgogICAgaWYgKCFydWxlWzBdIHx8IGludGVydmFsID49IF9tb21lbnQuZGVmYXVsdC5kdXJhdGlvbihydWxlWzBdKSkgewogICAgICByZXR1cm4gcnVsZVsxXTsKICAgIH0KICB9CgogIHJldHVybiBnZXRDb25maWcoJ2RhdGVGb3JtYXQnKTsKfTsKClRpbWVCdWNrZXRzLnByb3RvdHlwZS5nZXRTY2FsZWREYXRlRm9ybWF0dGVyID0gZnVuY3Rpb24gKCkgewogIHZhciBmaWVsZEZvcm1hdHMgPSBfbmV3X3BsYXRmb3JtLm5wU3RhcnQucGx1Z2lucy5kYXRhLmZpZWxkRm9ybWF0czsKICB2YXIgRGF0ZUZpZWxkRm9ybWF0ID0gZmllbGRGb3JtYXRzLmdldFR5cGUoX3B1YmxpYy5GSUVMRF9GT1JNQVRfSURTLkRBVEUpOwogIHJldHVybiBuZXcgRGF0ZUZpZWxkRm9ybWF0KHsKICAgIHBhdHRlcm46IHRoaXMuZ2V0U2NhbGVkRGF0ZUZvcm1hdCgpCiAgfSwgZ2V0Q29uZmlnKTsKfTsKClRpbWVCdWNrZXRzLl9fY2FjaGVkX18gPSBmdW5jdGlvbiAoc2VsZikgewogIHZhciBjYWNoZSA9IHt9OwogIHZhciBzYW1lTW9tZW50ID0gc2FtZShfbW9tZW50LmRlZmF1bHQuaXNNb21lbnQpOwogIHZhciBzYW1lRHVyYXRpb24gPSBzYW1lKF9tb21lbnQuZGVmYXVsdC5pc0R1cmF0aW9uKTsKICB2YXIgZGVzYyA9IHsKICAgIF9fY2FjaGVkX186IHsKICAgICAgdmFsdWU6IHNlbGYKICAgIH0KICB9OwogIHZhciBicmVha2VycyA9IHsKICAgIHNldEJvdW5kczogJ2JvdW5kcycsCiAgICBjbGVhckJvdW5kczogJ2JvdW5kcycsCiAgICBzZXRJbnRlcnZhbDogJ2ludGVydmFsJwogIH07CiAgdmFyIHJlc291cmNlcyA9IHsKICAgIGJvdW5kczogewogICAgICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICAgICAgcmV0dXJuIFtzZWxmLl9sYiwgc2VsZi5fdWJdOwogICAgICB9LAogICAgICBjaGFuZ2VzOiBmdW5jdGlvbiBjaGFuZ2VzKHByZXYpIHsKICAgICAgICByZXR1cm4gIXNhbWVNb21lbnQocHJldlswXSwgc2VsZi5fbGIpIHx8ICFzYW1lTW9tZW50KHByZXZbMV0sIHNlbGYuX3ViKTsKICAgICAgfQogICAgfSwKICAgIGludGVydmFsOiB7CiAgICAgIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgICAgICByZXR1cm4gc2VsZi5faTsKICAgICAgfSwKICAgICAgY2hhbmdlczogZnVuY3Rpb24gY2hhbmdlcyhwcmV2KSB7CiAgICAgICAgcmV0dXJuICFzYW1lRHVyYXRpb24ocHJldiwgdGhpcy5faSk7CiAgICAgIH0KICAgIH0KICB9OwoKICBmdW5jdGlvbiBjYWNoZWRHZXR0ZXIocHJvcCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhY2hlZEdldHRlcigpIHsKICAgICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkocHJvcCkpIHsKICAgICAgICAgIHJldHVybiBjYWNoZVtwcm9wXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBjYWNoZVtwcm9wXSA9IHNlbGZbcHJvcF0uYXBwbHkoc2VsZiwgYXJndW1lbnRzKTsKICAgICAgfQogICAgfTsKICB9CgogIGZ1bmN0aW9uIGNhY2hlQnJlYWtlcihwcm9wKSB7CiAgICB2YXIgcmVzb3VyY2UgPSByZXNvdXJjZXNbYnJlYWtlcnNbcHJvcF1dOwogICAgdmFyIHNldHVwID0gcmVzb3VyY2Uuc2V0dXA7CiAgICB2YXIgY2hhbmdlcyA9IHJlc291cmNlLmNoYW5nZXM7CiAgICB2YXIgZm4gPSBzZWxmW3Byb3BdOwogICAgcmV0dXJuIHsKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhY2hlQnJlYWtlcigpIHsKICAgICAgICB2YXIgcHJldiA9IHNldHVwLmNhbGwoc2VsZik7CiAgICAgICAgdmFyIHJldCA9IGZuLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7CgogICAgICAgIGlmIChjaGFuZ2VzLmNhbGwoc2VsZiwgcHJldikpIHsKICAgICAgICAgIGNhY2hlID0ge307CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmV0OwogICAgICB9CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gc2FtZShjaGVja1R5cGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikgewogICAgICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7CiAgICAgIGlmIChjaGVja1R5cGUoYSkgPT09IGNoZWNrVHlwZShiKSkgcmV0dXJuICthID09PSArYjsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICB9CgogIF9sb2Rhc2guZGVmYXVsdC5mb3JPd24oVGltZUJ1Y2tldHMucHJvdG90eXBlLCBmdW5jdGlvbiAoZm4sIHByb3ApIHsKICAgIGlmIChwcm9wWzBdID09PSAnXycpIHJldHVybjsKCiAgICBpZiAoYnJlYWtlcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHsKICAgICAgZGVzY1twcm9wXSA9IGNhY2hlQnJlYWtlcihwcm9wKTsKICAgIH0gZWxzZSB7CiAgICAgIGRlc2NbcHJvcF0gPSBjYWNoZWRHZXR0ZXIocHJvcCk7CiAgICB9CiAgfSk7CgogIHJldHVybiBPYmplY3QuY3JlYXRlKHNlbGYsIGRlc2MpOwp9Ow=="},null]}