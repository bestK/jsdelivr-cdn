{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/index_management/public/app/sections/home/index_list/index_actions_context_menu/index_actions_context_menu.js","dependencies":[{"path":"x-pack/legacy/plugins/index_management/public/app/sections/home/index_list/index_actions_context_menu/index_actions_context_menu.js","mtime":1585205044457},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkluZGV4QWN0aW9uc0NvbnRleHRNZW51ID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2ZsYXR0ZW5fcGFuZWxfdHJlZSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2xpYi9mbGF0dGVuX3BhbmVsX3RyZWUiKTsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vY29tbW9uL2NvbnN0YW50cyIpOwoKdmFyIF9pbmRleF9tYW5hZ2VtZW50X2V4dGVuc2lvbnMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi9pbmRleF9tYW5hZ2VtZW50X2V4dGVuc2lvbnMiKTsKCnZhciBfYXBpID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vc2VydmljZXMvYXBpIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OyBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIEluZGV4QWN0aW9uc0NvbnRleHRNZW51ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhJbmRleEFjdGlvbnNDb250ZXh0TWVudSwgX0NvbXBvbmVudCk7CgogIGZ1bmN0aW9uIEluZGV4QWN0aW9uc0NvbnRleHRNZW51KHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEluZGV4QWN0aW9uc0NvbnRleHRNZW51KTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihJbmRleEFjdGlvbnNDb250ZXh0TWVudSkuY2FsbCh0aGlzLCBwcm9wcykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNsb3NlQ29uZmlybU1vZGFsIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgcmVuZGVyQ29uZmlybU1vZGFsOiBudWxsCiAgICAgIH0pOwoKICAgICAgX3RoaXMucHJvcHMucmVzZXRTZWxlY3Rpb24gJiYgX3RoaXMucHJvcHMucmVzZXRTZWxlY3Rpb24oKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNvbmZpcm1BY3Rpb24iLCBmdW5jdGlvbiAoaXNBY3Rpb25Db25maXJtZWQpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGlzQWN0aW9uQ29uZmlybWVkOiBpc0FjdGlvbkNvbmZpcm1lZAogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uQnV0dG9uQ2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaXNQb3BvdmVyT3BlbjogIXByZXZTdGF0ZS5pc1BvcG92ZXJPcGVuCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJjbG9zZVBvcG92ZXJBbmRFeGVjdXRlIiwgZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGlzUG9wb3Zlck9wZW46IGZhbHNlLAogICAgICAgIHJlbmRlckNvbmZpcm1Nb2RhbDogZmFsc2UKICAgICAgfSk7CgogICAgICBmdW5jKCk7CiAgICAgIF90aGlzLnByb3BzLnJlc2V0U2VsZWN0aW9uICYmIF90aGlzLnByb3BzLnJlc2V0U2VsZWN0aW9uKCk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJjbG9zZVBvcG92ZXIiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBpc1BvcG92ZXJPcGVuOiBmYWxzZQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImZvcmNlbWVyZ2VTZWdtZW50c0Vycm9yIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgZm9yY2VtZXJnZVNlZ21lbnRzID0gX3RoaXMuc3RhdGUuZm9yY2VtZXJnZVNlZ21lbnRzOwoKICAgICAgaWYgKCFmb3JjZW1lcmdlU2VnbWVudHMgfHwgZm9yY2VtZXJnZVNlZ21lbnRzLm1hdGNoKC9eKFsxLTldWzAtOV0qKT8kLykpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuc2VnbWVudHNOdW1iZXJFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1RoZSBudW1iZXIgb2Ygc2VnbWVudHMgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVyby4nCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbmRlckZvcmNlbWVyZ2VTZWdtZW50c01vZGFsIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIGZvcmNlbWVyZ2VJbmRpY2VzID0gX3RoaXMkcHJvcHMuZm9yY2VtZXJnZUluZGljZXMsCiAgICAgICAgICBpbmRleE5hbWVzID0gX3RoaXMkcHJvcHMuaW5kZXhOYW1lczsKCiAgICAgIHZhciBoZWxwVGV4dCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuZm9yY2VNZXJnZS5mb3JjZU1lcmdlU2VnbWVudHNIZWxwVGV4dCcsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ01lcmdlIHRoZSBzZWdtZW50cyBpbiBhbiBpbmRleCB1bnRpbCB0aGUgbnVtYmVyIGlzIHJlZHVjZWQgdG8gdGhpcyBvciBmZXdlciBzZWdtZW50cy4gVGhlIGRlZmF1bHQgaXMgMS4nCiAgICAgIH0pOwoKICAgICAgdmFyIHNlbGVjdGVkSW5kZXhDb3VudCA9IGluZGV4TmFtZXMubGVuZ3RoOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aU92ZXJsYXlNYXNrLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29uZmlybU1vZGFsLCB7CiAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuZm9yY2VNZXJnZS5jb25maXJtTW9kYWwubW9kYWxUaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRm9yY2UgbWVyZ2UnCiAgICAgICAgfSksCiAgICAgICAgb25DYW5jZWw6IF90aGlzLmNsb3NlQ29uZmlybU1vZGFsLAogICAgICAgIG9uQ29uZmlybTogZnVuY3Rpb24gb25Db25maXJtKCkgewogICAgICAgICAgaWYgKCFfdGhpcy5mb3JjZW1lcmdlU2VnbWVudHNFcnJvcigpKSB7CiAgICAgICAgICAgIF90aGlzLmNsb3NlUG9wb3ZlckFuZEV4ZWN1dGUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGZvcmNlbWVyZ2VJbmRpY2VzKF90aGlzLnN0YXRlLmZvcmNlbWVyZ2VTZWdtZW50cyk7CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGZvcmNlbWVyZ2VTZWdtZW50czogbnVsbCwKICAgICAgICAgICAgICAgIHNob3dGb3JjZW1lcmdlU2VnbWVudHNNb2RhbDogbnVsbAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuZm9yY2VNZXJnZS5jb25maXJtTW9kYWwuY2FuY2VsQnV0dG9uVGV4dCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ2FuY2VsJwogICAgICAgIH0pLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmZvcmNlTWVyZ2UuY29uZmlybU1vZGFsLmNvbmZpcm1CdXR0b25UZXh0JywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdGb3JjZSBtZXJnZScKICAgICAgICB9KQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5mb3JjZU1lcmdlLmZvcmNlTWVyZ2VEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJZb3UgYXJlIGFib3V0IHRvIGZvcmNlIG1lcmdlIHtzZWxlY3RlZEluZGV4Q291bnQsIHBsdXJhbCwgb25lIHt0aGlzIGluZGV4fSBvdGhlciB7dGhlc2UgaW5kaWNlc30gfToiLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgc2VsZWN0ZWRJbmRleENvdW50OiBzZWxlY3RlZEluZGV4Q291bnQKICAgICAgICB9CiAgICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgidWwiLCBudWxsLCBpbmRleE5hbWVzLm1hcChmdW5jdGlvbiAoaW5kZXhOYW1lKSB7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImxpIiwgewogICAgICAgICAga2V5OiBpbmRleE5hbWUKICAgICAgICB9LCBpbmRleE5hbWUpOwogICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDYWxsT3V0LCB7CiAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuZm9yY2VNZXJnZS5wcm9jZWVkV2l0aENhdXRpb25DYWxsT3V0VGl0bGUnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1Byb2NlZWQgd2l0aCBjYXV0aW9uIScKICAgICAgICB9KSwKICAgICAgICBjb2xvcjogIndhcm5pbmciLAogICAgICAgIGljb25UeXBlOiAiaGVscCIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuZm9yY2VNZXJnZS5mb3JjZU1lcmdlV2FybmluZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIiBGb3JjZSBtZXJnaW5nIGEgbGFyZ2UgaW5kZXggb3IgYW4gaW5kZXggdGhhdCBpcyBub3QgcmVhZC1vbmx5IGNhbiBwb3RlbnRpYWxseSBjYXVzZSBwZXJmb3JtYW5jZSBhbmQgc3RhYmlsaXR5IGlzc3VlcyBpbiB0aGUgY2x1c3RlciBpZiBpdCBpcyBub3QgcnVuIHByb3Blcmx5IChydW4gYWdhaW5zdCBub24tcmVhZC1vbmx5IGluZGljZXMpIG9yIHJ1biBkdXJpbmcgcGVhayBob3Vycy4gIgogICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgICAgc2l6ZTogIm0iCiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybSwgewogICAgICAgIGlzSW52YWxpZDogX3RoaXMuZm9yY2VtZXJnZVNlZ21lbnRzRXJyb3IoKSwKICAgICAgICBlcnJvcjogX3RoaXMuZm9yY2VtZXJnZVNlZ21lbnRzRXJyb3IoKQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmZvcmNlTWVyZ2UubWF4aW11bU51bWJlck9mU2VnbWVudHNGb3JtUm93TGFiZWwnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ01heGltdW0gbnVtYmVyIG9mIHNlZ21lbnRzIHBlciBzaGFyZCcKICAgICAgICB9KSwKICAgICAgICBoZWxwVGV4dDogaGVscFRleHQKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkVGV4dCwgewogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICBmb3JjZW1lcmdlU2VnbWVudHM6IGV2ZW50LnRhcmdldC52YWx1ZQogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBuYW1lOiAibWF4TnVtYmVyU2VnbWVudHMiCiAgICAgIH0pKSkpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbmRlckNvbmZpcm1EZWxldGVNb2RhbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLAogICAgICAgICAgZGVsZXRlSW5kaWNlcyA9IF90aGlzJHByb3BzMi5kZWxldGVJbmRpY2VzLAogICAgICAgICAgaW5kZXhOYW1lcyA9IF90aGlzJHByb3BzMi5pbmRleE5hbWVzLAogICAgICAgICAgaGFzU3lzdGVtSW5kZXggPSBfdGhpcyRwcm9wczIuaGFzU3lzdGVtSW5kZXgsCiAgICAgICAgICBpc1N5c3RlbUluZGV4QnlOYW1lID0gX3RoaXMkcHJvcHMyLmlzU3lzdGVtSW5kZXhCeU5hbWU7CiAgICAgIHZhciBpc0FjdGlvbkNvbmZpcm1lZCA9IF90aGlzLnN0YXRlLmlzQWN0aW9uQ29uZmlybWVkOwogICAgICB2YXIgc2VsZWN0ZWRJbmRleENvdW50ID0gaW5kZXhOYW1lcy5sZW5ndGg7CgogICAgICB2YXIgc3RhbmRhcmRJbmRleE1vZGFsQm9keSA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5kZWxldGVJbmRleC5kZWxldGVEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJZb3UgYXJlIGFib3V0IHRvIGRlbGV0ZSB7c2VsZWN0ZWRJbmRleENvdW50LCBwbHVyYWwsIG9uZSB7dGhpcyBpbmRleH0gb3RoZXIge3RoZXNlIGluZGljZXN9IH06IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIHNlbGVjdGVkSW5kZXhDb3VudDogc2VsZWN0ZWRJbmRleENvdW50CiAgICAgICAgfQogICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInVsIiwgbnVsbCwgaW5kZXhOYW1lcy5tYXAoZnVuY3Rpb24gKGluZGV4TmFtZSkgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJsaSIsIHsKICAgICAgICAgIGtleTogaW5kZXhOYW1lCiAgICAgICAgfSwgaW5kZXhOYW1lKTsKICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5kZWxldGVJbmRleC5kZWxldGVXYXJuaW5nRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiWW91IGNhbid0IHJlY292ZXIgYSBkZWxldGVkIGluZGV4LiBNYWtlIHN1cmUgeW91IGhhdmUgYXBwcm9wcmlhdGUgYmFja3Vwcy4iCiAgICAgIH0pKSk7CgogICAgICB2YXIgc3lzdGVtSW5kZXhNb2RhbEJvZHkgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuZGVsZXRlSW5kZXguZGVsZXRlRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiWW91IGFyZSBhYm91dCB0byBkZWxldGUge3NlbGVjdGVkSW5kZXhDb3VudCwgcGx1cmFsLCBvbmUge3RoaXMgaW5kZXh9IG90aGVyIHt0aGVzZSBpbmRpY2VzfSB9OiIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBzZWxlY3RlZEluZGV4Q291bnQ6IHNlbGVjdGVkSW5kZXhDb3VudAogICAgICAgIH0KICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ1bCIsIG51bGwsIGluZGV4TmFtZXMubWFwKGZ1bmN0aW9uIChpbmRleE5hbWUpIHsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgibGkiLCB7CiAgICAgICAgICBrZXk6IGluZGV4TmFtZQogICAgICAgIH0sIGluZGV4TmFtZSwgaXNTeXN0ZW1JbmRleEJ5TmFtZVtpbmRleE5hbWVdID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsICcgJywgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJhZGdlLCB7CiAgICAgICAgICBpY29uVHlwZTogImFsZXJ0IiwKICAgICAgICAgIGNvbG9yOiAiaG9sbG93IgogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5kZWxldGVJbmRleC5zeXN0ZW1JbmRleExhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU3lzdGVtIGluZGV4IgogICAgICAgIH0pKSkgOiAnJyk7CiAgICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5kZWxldGVJbmRleC5wcm9jZWVkV2l0aENhdXRpb25DYWxsT3V0VGl0bGUnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0RlbGV0aW5nIGEgc3lzdGVtIGluZGV4IGNhbiBicmVhayBLaWJhbmEnCiAgICAgICAgfSksCiAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgIGljb25UeXBlOiAiYWxlcnQiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmRlbGV0ZUluZGV4LnByb2NlZWRXaXRoQ2F1dGlvbkNhbGxPdXREZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTeXN0ZW0gaW5kaWNlcyBhcmUgY3JpdGljYWwgZm9yIGludGVybmFsIG9wZXJhdGlvbnMuIElmIHlvdSBkZWxldGUgYSBzeXN0ZW0gaW5kZXgsIHlvdSBjYW4ndCByZWNvdmVyIGl0LiBNYWtlIHN1cmUgeW91IGhhdmUgYXBwcm9wcmlhdGUgYmFja3Vwcy4iCiAgICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNoZWNrYm94LCB7CiAgICAgICAgaWQ6ICJjb25maXJtRGVsZXRlSW5kaWNlc0NoZWNrYm94IiwKICAgICAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmRlbGV0ZUluZGV4LmNoZWNrYm94TGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJJIHVuZGVyc3RhbmQgdGhlIGNvbnNlcXVlbmNlcyBvZiBkZWxldGluZyBhIHN5c3RlbSBpbmRleCIKICAgICAgICB9KSwKICAgICAgICBjaGVja2VkOiBpc0FjdGlvbkNvbmZpcm1lZCwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgICAgcmV0dXJuIF90aGlzLmNvbmZpcm1BY3Rpb24oZS50YXJnZXQuY2hlY2tlZCk7CiAgICAgICAgfQogICAgICB9KSkpOwoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlPdmVybGF5TWFzaywgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvbmZpcm1Nb2RhbCwgewogICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmRlbGV0ZUluZGV4LmNvbmZpcm1Nb2RhbC5tb2RhbFRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEZWxldGUge3NlbGVjdGVkSW5kZXhDb3VudCwgcGx1cmFsLCBvbmUge2luZGV4fSBvdGhlciB7IyBpbmRpY2VzfSB9JywKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBzZWxlY3RlZEluZGV4Q291bnQ6IHNlbGVjdGVkSW5kZXhDb3VudAogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiBvbkNhbmNlbCgpIHsKICAgICAgICAgIF90aGlzLmNvbmZpcm1BY3Rpb24oZmFsc2UpOwoKICAgICAgICAgIF90aGlzLmNsb3NlQ29uZmlybU1vZGFsKCk7CiAgICAgICAgfSwKICAgICAgICBvbkNvbmZpcm06IGZ1bmN0aW9uIG9uQ29uZmlybSgpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5jbG9zZVBvcG92ZXJBbmRFeGVjdXRlKGRlbGV0ZUluZGljZXMpOwogICAgICAgIH0sCiAgICAgICAgYnV0dG9uQ29sb3I6ICJkYW5nZXIiLAogICAgICAgIGNvbmZpcm1CdXR0b25EaXNhYmxlZDogaGFzU3lzdGVtSW5kZXggPyAhaXNBY3Rpb25Db25maXJtZWQgOiBmYWxzZSwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmRlbGV0ZUluZGV4LmNvbmZpcm1Nb2RhbC5jYW5jZWxCdXR0b25UZXh0JywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDYW5jZWwnCiAgICAgICAgfSksCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuZGVsZXRlSW5kZXguY29uZmlybU1vZGFsLmNvbmZpcm1CdXR0b25UZXh0JywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEZWxldGUge3NlbGVjdGVkSW5kZXhDb3VudCwgcGx1cmFsLCBvbmUge2luZGV4fSBvdGhlciB7aW5kaWNlc30gfScsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgc2VsZWN0ZWRJbmRleENvdW50OiBzZWxlY3RlZEluZGV4Q291bnQKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9LCBoYXNTeXN0ZW1JbmRleCA/IHN5c3RlbUluZGV4TW9kYWxCb2R5IDogc3RhbmRhcmRJbmRleE1vZGFsQm9keSkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVuZGVyQ29uZmlybUNsb3NlTW9kYWwiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczMgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIGNsb3NlSW5kaWNlcyA9IF90aGlzJHByb3BzMy5jbG9zZUluZGljZXMsCiAgICAgICAgICBpbmRleE5hbWVzID0gX3RoaXMkcHJvcHMzLmluZGV4TmFtZXMsCiAgICAgICAgICBpc1N5c3RlbUluZGV4QnlOYW1lID0gX3RoaXMkcHJvcHMzLmlzU3lzdGVtSW5kZXhCeU5hbWU7CiAgICAgIHZhciBpc0FjdGlvbkNvbmZpcm1lZCA9IF90aGlzLnN0YXRlLmlzQWN0aW9uQ29uZmlybWVkOwogICAgICB2YXIgc2VsZWN0ZWRJbmRleENvdW50ID0gaW5kZXhOYW1lcy5sZW5ndGg7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpT3ZlcmxheU1hc2ssIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb25maXJtTW9kYWwsIHsKICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5jbG9zZUluZGV4LmNvbmZpcm1Nb2RhbC5tb2RhbFRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDbG9zZSB7c2VsZWN0ZWRJbmRleENvdW50LCBwbHVyYWwsIG9uZSB7aW5kZXh9IG90aGVyIHsjIGluZGljZXN9IH0nLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIHNlbGVjdGVkSW5kZXhDb3VudDogc2VsZWN0ZWRJbmRleENvdW50CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uIG9uQ2FuY2VsKCkgewogICAgICAgICAgX3RoaXMuY29uZmlybUFjdGlvbihmYWxzZSk7CgogICAgICAgICAgX3RoaXMuY2xvc2VDb25maXJtTW9kYWwoKTsKICAgICAgICB9LAogICAgICAgIG9uQ29uZmlybTogZnVuY3Rpb24gb25Db25maXJtKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzLmNsb3NlUG9wb3ZlckFuZEV4ZWN1dGUoY2xvc2VJbmRpY2VzKTsKICAgICAgICB9LAogICAgICAgIGJ1dHRvbkNvbG9yOiAiZGFuZ2VyIiwKICAgICAgICBjb25maXJtQnV0dG9uRGlzYWJsZWQ6ICFpc0FjdGlvbkNvbmZpcm1lZCwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmRlbGV0ZUluZGV4LmNvbmZpcm1Nb2RhbC5jYW5jZWxCdXR0b25UZXh0JywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDYW5jZWwnCiAgICAgICAgfSksCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuY2xvc2VJbmRleC5jb25maXJtTW9kYWwuY29uZmlybUJ1dHRvblRleHQnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0Nsb3NlIHtzZWxlY3RlZEluZGV4Q291bnQsIHBsdXJhbCwgb25lIHtpbmRleH0gb3RoZXIge2luZGljZXN9IH0nLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIHNlbGVjdGVkSW5kZXhDb3VudDogc2VsZWN0ZWRJbmRleENvdW50CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuY2xvc2VJbmRleC5jbG9zZURlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIllvdSBhcmUgYWJvdXQgdG8gY2xvc2Uge3NlbGVjdGVkSW5kZXhDb3VudCwgcGx1cmFsLCBvbmUge3RoaXMgaW5kZXh9IG90aGVyIHt0aGVzZSBpbmRpY2VzfSB9OiIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBzZWxlY3RlZEluZGV4Q291bnQ6IHNlbGVjdGVkSW5kZXhDb3VudAogICAgICAgIH0KICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ1bCIsIG51bGwsIGluZGV4TmFtZXMubWFwKGZ1bmN0aW9uIChpbmRleE5hbWUpIHsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgibGkiLCB7CiAgICAgICAgICBrZXk6IGluZGV4TmFtZQogICAgICAgIH0sIGluZGV4TmFtZSwgaXNTeXN0ZW1JbmRleEJ5TmFtZVtpbmRleE5hbWVdID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsICcgJywgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJhZGdlLCB7CiAgICAgICAgICBpY29uVHlwZTogImFsZXJ0IiwKICAgICAgICAgIGNvbG9yOiAiaG9sbG93IgogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5jbG9zZUluZGV4LnN5c3RlbUluZGV4TGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTeXN0ZW0gaW5kZXgiCiAgICAgICAgfSkpKSA6ICcnKTsKICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ2FsbE91dCwgewogICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmNsb3NlSW5kZXgucHJvY2VlZFdpdGhDYXV0aW9uQ2FsbE91dFRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDbG9zaW5nIGEgc3lzdGVtIGluZGV4IGNhbiBicmVhayBLaWJhbmEnCiAgICAgICAgfSksCiAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgIGljb25UeXBlOiAiYWxlcnQiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmNsb3NlSW5kZXgucHJvY2VlZFdpdGhDYXV0aW9uQ2FsbE91dERlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlN5c3RlbSBpbmRpY2VzIGFyZSBjcml0aWNhbCBmb3IgaW50ZXJuYWwgb3BlcmF0aW9ucy4gWW91IGNhbiByZW9wZW4gdGhlIGluZGV4IHVzaW5nIHRoZSBPcGVuIEluZGV4IEFQSS4iCiAgICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNoZWNrYm94LCB7CiAgICAgICAgaWQ6ICJjb25maXJtQ2xvc2VJbmRpY2VzQ2hlY2tib3giLAogICAgICAgIGxhYmVsOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuY2xvc2VJbmRleC5jaGVja2JveExhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSSB1bmRlcnN0YW5kIHRoZSBjb25zZXF1ZW5jZXMgb2YgY2xvc2luZyBhIHN5c3RlbSBpbmRleCIKICAgICAgICB9KSwKICAgICAgICBjaGVja2VkOiBpc0FjdGlvbkNvbmZpcm1lZCwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgICAgcmV0dXJuIF90aGlzLmNvbmZpcm1BY3Rpb24oZS50YXJnZXQuY2hlY2tlZCk7CiAgICAgICAgfQogICAgICB9KSkpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbmRlckNvbmZpcm1GcmVlemVNb2RhbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9uZUluZGV4U2VsZWN0ZWQgPSBfdGhpcy5vbmVJbmRleFNlbGVjdGVkKCk7CgogICAgICB2YXIgZW50aXR5ID0gX3RoaXMuZ2V0RW50aXR5KG9uZUluZGV4U2VsZWN0ZWQpOwoKICAgICAgdmFyIF90aGlzJHByb3BzNCA9IF90aGlzLnByb3BzLAogICAgICAgICAgZnJlZXplSW5kaWNlcyA9IF90aGlzJHByb3BzNC5mcmVlemVJbmRpY2VzLAogICAgICAgICAgaW5kZXhOYW1lcyA9IF90aGlzJHByb3BzNC5pbmRleE5hbWVzOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aU92ZXJsYXlNYXNrLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29uZmlybU1vZGFsLCB7CiAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuZnJlZXplRW50aXR5LmNvbmZpcm1Nb2RhbC5tb2RhbFRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDb25maXJtIEZyZWV6ZSB7ZW50aXR5fScsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgZW50aXR5OiBlbnRpdHkKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICBvbkNhbmNlbDogX3RoaXMuY2xvc2VDb25maXJtTW9kYWwsCiAgICAgICAgb25Db25maXJtOiBmdW5jdGlvbiBvbkNvbmZpcm0oKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMuY2xvc2VQb3BvdmVyQW5kRXhlY3V0ZShmcmVlemVJbmRpY2VzKTsKICAgICAgICB9LAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuZnJlZXplRW50aXR5LmNvbmZpcm1Nb2RhbC5jYW5jZWxCdXR0b25UZXh0JywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDYW5jZWwnCiAgICAgICAgfSksCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuZnJlZXplRW50aXR5LmNvbmZpcm1Nb2RhbC5jb25maXJtQnV0dG9uVGV4dCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRnJlZXplIHtlbnRpdHl9JywKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBlbnRpdHk6IGVudGl0eQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmZyZWV6ZUVudGl0eS5mcmVlemVEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJZb3UgYXJlIGFib3V0IHRvIGZyZWV6ZSB7Y291bnQsIHBsdXJhbCwgb25lIHt0aGlzIGluZGV4fSBvdGhlciB7dGhlc2UgaW5kaWNlc319OiIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBjb3VudDogaW5kZXhOYW1lcy5sZW5ndGgKICAgICAgICB9CiAgICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgidWwiLCBudWxsLCBpbmRleE5hbWVzLm1hcChmdW5jdGlvbiAoaW5kZXhOYW1lKSB7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImxpIiwgewogICAgICAgICAga2V5OiBpbmRleE5hbWUKICAgICAgICB9LCBpbmRleE5hbWUpOwogICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDYWxsT3V0LCB7CiAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuZnJlZXplRW50aXR5LnByb2NlZWRXaXRoQ2F1dGlvbkNhbGxPdXRUaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUHJvY2VlZCB3aXRoIGNhdXRpb24nCiAgICAgICAgfSksCiAgICAgICAgY29sb3I6ICJ3YXJuaW5nIiwKICAgICAgICBpY29uVHlwZTogImhlbHAiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmZyZWV6ZUVudGl0eS5mcmVlemVFbnRpdHlXYXJuaW5nRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiIEEgZnJvemVuIGluZGV4IGhhcyBsaXR0bGUgb3ZlcmhlYWQgb24gdGhlIGNsdXN0ZXIgYW5kIGlzIGJsb2NrZWQgZm9yIHdyaXRlIG9wZXJhdGlvbnMuIFlvdSBjYW4gc2VhcmNoIGEgZnJvemVuIGluZGV4LCBidXQgZXhwZWN0IHF1ZXJpZXMgdG8gYmUgc2xvd2VyLiAiCiAgICAgIH0pKSkpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uZUluZGV4U2VsZWN0ZWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5pbmRleE5hbWVzLmxlbmd0aCA9PT0gMTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdldEVudGl0eSIsIGZ1bmN0aW9uIChvbmVJbmRleFNlbGVjdGVkKSB7CiAgICAgIHJldHVybiBvbmVJbmRleFNlbGVjdGVkID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5pbmRleE1lc3NhZ2UnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdpbmRleCcKICAgICAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmluZGljZXNNZXNzYWdlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnaW5kaWNlcycKICAgICAgfSk7CiAgICB9KTsKCiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgaXNQb3BvdmVyT3BlbjogZmFsc2UsCiAgICAgIHJlbmRlckNvbmZpcm1Nb2RhbDogbnVsbCwKICAgICAgaXNBY3Rpb25Db25maXJtZWQ6IGZhbHNlCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEluZGV4QWN0aW9uc0NvbnRleHRNZW51LCBbewogICAga2V5OiAicGFuZWxzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwYW5lbHMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHByb3BzNSA9IHRoaXMucHJvcHMsCiAgICAgICAgICBjbG9zZUluZGljZXMgPSBfdGhpcyRwcm9wczUuY2xvc2VJbmRpY2VzLAogICAgICAgICAgb3BlbkluZGljZXMgPSBfdGhpcyRwcm9wczUub3BlbkluZGljZXMsCiAgICAgICAgICBmbHVzaEluZGljZXMgPSBfdGhpcyRwcm9wczUuZmx1c2hJbmRpY2VzLAogICAgICAgICAgcmVmcmVzaEluZGljZXMgPSBfdGhpcyRwcm9wczUucmVmcmVzaEluZGljZXMsCiAgICAgICAgICBjbGVhckNhY2hlSW5kaWNlcyA9IF90aGlzJHByb3BzNS5jbGVhckNhY2hlSW5kaWNlcywKICAgICAgICAgIGVkaXRJbmRleCA9IF90aGlzJHByb3BzNS5lZGl0SW5kZXgsCiAgICAgICAgICBzaG93TWFwcGluZyA9IF90aGlzJHByb3BzNS5zaG93TWFwcGluZywKICAgICAgICAgIHNob3dTdGF0cyA9IF90aGlzJHByb3BzNS5zaG93U3RhdHMsCiAgICAgICAgICBzaG93U2V0dGluZ3MgPSBfdGhpcyRwcm9wczUuc2hvd1NldHRpbmdzLAogICAgICAgICAgZGV0YWlsUGFuZWwgPSBfdGhpcyRwcm9wczUuZGV0YWlsUGFuZWwsCiAgICAgICAgICBpbmRleE5hbWVzID0gX3RoaXMkcHJvcHM1LmluZGV4TmFtZXMsCiAgICAgICAgICBpbmRleFN0YXR1c0J5TmFtZSA9IF90aGlzJHByb3BzNS5pbmRleFN0YXR1c0J5TmFtZSwKICAgICAgICAgIHBlcmZvcm1FeHRlbnNpb25BY3Rpb24gPSBfdGhpcyRwcm9wczUucGVyZm9ybUV4dGVuc2lvbkFjdGlvbiwKICAgICAgICAgIGluZGljZXMgPSBfdGhpcyRwcm9wczUuaW5kaWNlcywKICAgICAgICAgIHJlbG9hZEluZGljZXMgPSBfdGhpcyRwcm9wczUucmVsb2FkSW5kaWNlcywKICAgICAgICAgIHVuZnJlZXplSW5kaWNlcyA9IF90aGlzJHByb3BzNS51bmZyZWV6ZUluZGljZXMsCiAgICAgICAgICBoYXNTeXN0ZW1JbmRleCA9IF90aGlzJHByb3BzNS5oYXNTeXN0ZW1JbmRleDsKICAgICAgdmFyIGFsbE9wZW4gPSAoMCwgX2xvZGFzaC5hbGwpKGluZGV4TmFtZXMsIGZ1bmN0aW9uIChpbmRleE5hbWUpIHsKICAgICAgICByZXR1cm4gaW5kZXhTdGF0dXNCeU5hbWVbaW5kZXhOYW1lXSA9PT0gX2NvbnN0YW50cy5JTkRFWF9PUEVOOwogICAgICB9KTsKICAgICAgdmFyIGFsbEZyb3plbiA9ICgwLCBfbG9kYXNoLmFsbCkoaW5kaWNlcywgZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgcmV0dXJuIGluZGV4LmlzRnJvemVuOwogICAgICB9KTsKICAgICAgdmFyIGFsbFVuZnJvemVuID0gKDAsIF9sb2Rhc2guYWxsKShpbmRpY2VzLCBmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICByZXR1cm4gIWluZGV4LmlzRnJvemVuOwogICAgICB9KTsKICAgICAgdmFyIHNlbGVjdGVkSW5kZXhDb3VudCA9IGluZGV4TmFtZXMubGVuZ3RoOwogICAgICB2YXIgaXRlbXMgPSBbXTsKCiAgICAgIGlmICghZGV0YWlsUGFuZWwgJiYgc2VsZWN0ZWRJbmRleENvdW50ID09PSAxKSB7CiAgICAgICAgaXRlbXMucHVzaCh7CiAgICAgICAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LnNob3dJbmRleFNldHRpbmdzTGFiZWwnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2hvdyB7c2VsZWN0ZWRJbmRleENvdW50LCBwbHVyYWwsIG9uZSB7aW5kZXh9IG90aGVyIHtpbmRpY2VzfSB9IHNldHRpbmdzJywKICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleENvdW50OiBzZWxlY3RlZEluZGV4Q291bnQKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBfdGhpczIuY2xvc2VQb3BvdmVyQW5kRXhlY3V0ZShzaG93U2V0dGluZ3MpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGl0ZW1zLnB1c2goewogICAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5zaG93SW5kZXhNYXBwaW5nTGFiZWwnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2hvdyB7c2VsZWN0ZWRJbmRleENvdW50LCBwbHVyYWwsIG9uZSB7aW5kZXh9IG90aGVyIHtpbmRpY2VzfSB9IG1hcHBpbmcnLAogICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4Q291bnQ6IHNlbGVjdGVkSW5kZXhDb3VudAogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgIF90aGlzMi5jbG9zZVBvcG92ZXJBbmRFeGVjdXRlKHNob3dNYXBwaW5nKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgaWYgKGFsbE9wZW4pIHsKICAgICAgICAgIGl0ZW1zLnB1c2goewogICAgICAgICAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LnNob3dJbmRleFN0YXRzTGFiZWwnLCB7CiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaG93IHtzZWxlY3RlZEluZGV4Q291bnQsIHBsdXJhbCwgb25lIHtpbmRleH0gb3RoZXIge2luZGljZXN9IH0gc3RhdHMnLAogICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleENvdW50OiBzZWxlY3RlZEluZGV4Q291bnQKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIF90aGlzMi5jbG9zZVBvcG92ZXJBbmRFeGVjdXRlKHNob3dTdGF0cyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaXRlbXMucHVzaCh7CiAgICAgICAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51LmVkaXRJbmRleFNldHRpbmdzTGFiZWwnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRWRpdCB7c2VsZWN0ZWRJbmRleENvdW50LCBwbHVyYWwsIG9uZSB7aW5kZXh9IG90aGVyIHtpbmRpY2VzfSB9IHNldHRpbmdzJywKICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleENvdW50OiBzZWxlY3RlZEluZGV4Q291bnQKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBfdGhpczIuY2xvc2VQb3BvdmVyQW5kRXhlY3V0ZShlZGl0SW5kZXgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoYWxsT3BlbikgewogICAgICAgIGl0ZW1zLnB1c2goewogICAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5jbG9zZUluZGV4TGFiZWwnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ2xvc2Uge3NlbGVjdGVkSW5kZXhDb3VudCwgcGx1cmFsLCBvbmUge2luZGV4fSBvdGhlciB7aW5kaWNlc30gfScsCiAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXhDb3VudDogc2VsZWN0ZWRJbmRleENvdW50CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgaWYgKGhhc1N5c3RlbUluZGV4KSB7CiAgICAgICAgICAgICAgX3RoaXMyLmNsb3NlUG9wb3ZlcigpOwoKICAgICAgICAgICAgICBfdGhpczIuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgcmVuZGVyQ29uZmlybU1vZGFsOiBfdGhpczIucmVuZGVyQ29uZmlybUNsb3NlTW9kYWwKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpczIuY2xvc2VQb3BvdmVyQW5kRXhlY3V0ZShjbG9zZUluZGljZXMpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGl0ZW1zLnB1c2goewogICAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5mb3JjZU1lcmdlSW5kZXhMYWJlbCcsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdGb3JjZSBtZXJnZSB7c2VsZWN0ZWRJbmRleENvdW50LCBwbHVyYWwsIG9uZSB7aW5kZXh9IG90aGVyIHtpbmRpY2VzfSB9JywKICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleENvdW50OiBzZWxlY3RlZEluZGV4Q291bnQKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBfdGhpczIuY2xvc2VQb3BvdmVyKCk7CgogICAgICAgICAgICBfdGhpczIuc2V0U3RhdGUoewogICAgICAgICAgICAgIHJlbmRlckNvbmZpcm1Nb2RhbDogX3RoaXMyLnJlbmRlckZvcmNlbWVyZ2VTZWdtZW50c01vZGFsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGl0ZW1zLnB1c2goewogICAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5yZWZyZXNoSW5kZXhMYWJlbCcsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZWZyZXNoIHtzZWxlY3RlZEluZGV4Q291bnQsIHBsdXJhbCwgb25lIHtpbmRleH0gb3RoZXIge2luZGljZXN9IH0nLAogICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4Q291bnQ6IHNlbGVjdGVkSW5kZXhDb3VudAogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgIF90aGlzMi5jbG9zZVBvcG92ZXJBbmRFeGVjdXRlKHJlZnJlc2hJbmRpY2VzKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpdGVtcy5wdXNoKHsKICAgICAgICAgIG5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuY2xlYXJJbmRleENhY2hlTGFiZWwnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ2xlYXIge3NlbGVjdGVkSW5kZXhDb3VudCwgcGx1cmFsLCBvbmUge2luZGV4fSBvdGhlciB7aW5kaWNlc30gfSBjYWNoZScsCiAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXhDb3VudDogc2VsZWN0ZWRJbmRleENvdW50CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgX3RoaXMyLmNsb3NlUG9wb3ZlckFuZEV4ZWN1dGUoY2xlYXJDYWNoZUluZGljZXMpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGl0ZW1zLnB1c2goewogICAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5mbHVzaEluZGV4TGFiZWwnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRmx1c2gge3NlbGVjdGVkSW5kZXhDb3VudCwgcGx1cmFsLCBvbmUge2luZGV4fSBvdGhlciB7aW5kaWNlc30gfScsCiAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXhDb3VudDogc2VsZWN0ZWRJbmRleENvdW50CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgX3RoaXMyLmNsb3NlUG9wb3ZlckFuZEV4ZWN1dGUoZmx1c2hJbmRpY2VzKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgaWYgKGFsbEZyb3plbikgewogICAgICAgICAgaXRlbXMucHVzaCh7CiAgICAgICAgICAgIG5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUudW5mcmVlemVJbmRleExhYmVsJywgewogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVW5mcmVlemUge3NlbGVjdGVkSW5kZXhDb3VudCwgcGx1cmFsLCBvbmUge2luZGV4fSBvdGhlciB7aW5kaWNlc30gfScsCiAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4Q291bnQ6IHNlbGVjdGVkSW5kZXhDb3VudAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgX3RoaXMyLmNsb3NlUG9wb3ZlckFuZEV4ZWN1dGUodW5mcmVlemVJbmRpY2VzKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChhbGxVbmZyb3plbikgewogICAgICAgICAgaXRlbXMucHVzaCh7CiAgICAgICAgICAgIG5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUuZnJlZXplSW5kZXhMYWJlbCcsIHsKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ZyZWV6ZSB7c2VsZWN0ZWRJbmRleENvdW50LCBwbHVyYWwsIG9uZSB7aW5kZXh9IG90aGVyIHtpbmRpY2VzfSB9JywKICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXhDb3VudDogc2VsZWN0ZWRJbmRleENvdW50CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICBfdGhpczIuY2xvc2VQb3BvdmVyKCk7CgogICAgICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICByZW5kZXJDb25maXJtTW9kYWw6IF90aGlzMi5yZW5kZXJDb25maXJtRnJlZXplTW9kYWwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGl0ZW1zLnB1c2goewogICAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5vcGVuSW5kZXhMYWJlbCcsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdPcGVuIHtzZWxlY3RlZEluZGV4Q291bnQsIHBsdXJhbCwgb25lIHtpbmRleH0gb3RoZXIge2luZGljZXN9IH0nLAogICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4Q291bnQ6IHNlbGVjdGVkSW5kZXhDb3VudAogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgIF90aGlzMi5jbG9zZVBvcG92ZXJBbmRFeGVjdXRlKG9wZW5JbmRpY2VzKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaXRlbXMucHVzaCh7CiAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5kZWxldGVJbmRleExhYmVsJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEZWxldGUge3NlbGVjdGVkSW5kZXhDb3VudCwgcGx1cmFsLCBvbmUge2luZGV4fSBvdGhlciB7aW5kaWNlc30gfScsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgc2VsZWN0ZWRJbmRleENvdW50OiBzZWxlY3RlZEluZGV4Q291bnQKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgX3RoaXMyLmNsb3NlUG9wb3ZlcigpOwoKICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICAgIHJlbmRlckNvbmZpcm1Nb2RhbDogX3RoaXMyLnJlbmRlckNvbmZpcm1EZWxldGVNb2RhbAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgKDAsIF9pbmRleF9tYW5hZ2VtZW50X2V4dGVuc2lvbnMuZ2V0QWN0aW9uRXh0ZW5zaW9ucykoKS5mb3JFYWNoKGZ1bmN0aW9uIChhY3Rpb25FeHRlbnNpb24pIHsKICAgICAgICB2YXIgYWN0aW9uRXh0ZW5zaW9uRGVmaW5pdGlvbiA9IGFjdGlvbkV4dGVuc2lvbihpbmRpY2VzLCByZWxvYWRJbmRpY2VzKTsKCiAgICAgICAgaWYgKGFjdGlvbkV4dGVuc2lvbkRlZmluaXRpb24pIHsKICAgICAgICAgIHZhciBidXR0b25MYWJlbCA9IGFjdGlvbkV4dGVuc2lvbkRlZmluaXRpb24uYnV0dG9uTGFiZWwsCiAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IGFjdGlvbkV4dGVuc2lvbkRlZmluaXRpb24ucmVxdWVzdE1ldGhvZCwKICAgICAgICAgICAgICBzdWNjZXNzTWVzc2FnZSA9IGFjdGlvbkV4dGVuc2lvbkRlZmluaXRpb24uc3VjY2Vzc01lc3NhZ2UsCiAgICAgICAgICAgICAgcmVuZGVyQ29uZmlybU1vZGFsID0gYWN0aW9uRXh0ZW5zaW9uRGVmaW5pdGlvbi5yZW5kZXJDb25maXJtTW9kYWw7CgogICAgICAgICAgaWYgKHJlcXVlc3RNZXRob2QpIHsKICAgICAgICAgICAgaXRlbXMucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogYnV0dG9uTGFiZWwsCiAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICAgIF90aGlzMi5jbG9zZVBvcG92ZXJBbmRFeGVjdXRlKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChwZXJmb3JtRXh0ZW5zaW9uQWN0aW9uKHJlcXVlc3RNZXRob2QsIHN1Y2Nlc3NNZXNzYWdlKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGl0ZW1zLnB1c2goewogICAgICAgICAgICAgIG5hbWU6IGJ1dHRvbkxhYmVsLAogICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgICBfdGhpczIuY2xvc2VQb3BvdmVyKCk7CgogICAgICAgICAgICAgICAgX3RoaXMyLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgcmVuZGVyQ29uZmlybU1vZGFsOiByZW5kZXJDb25maXJtTW9kYWwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGl0ZW1bJ2RhdGEtdGVzdC1zdWJqJ10gPSAnaW5kZXhUYWJsZUNvbnRleHRNZW51QnV0dG9uJzsKICAgICAgfSk7CiAgICAgIHZhciBwYW5lbFRyZWUgPSB7CiAgICAgICAgaWQ6IDAsCiAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4QWN0aW9uc01lbnUucGFuZWxUaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAne3NlbGVjdGVkSW5kZXhDb3VudCwgcGx1cmFsLCBvbmUge0luZGV4fSBvdGhlciB7SW5kaWNlc30gfSBvcHRpb25zJywKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBzZWxlY3RlZEluZGV4Q291bnQ6IHNlbGVjdGVkSW5kZXhDb3VudAogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgIGl0ZW1zOiBpdGVtcwogICAgICB9OwogICAgICByZXR1cm4gKDAsIF9mbGF0dGVuX3BhbmVsX3RyZWUuZmxhdHRlblBhbmVsVHJlZSkocGFuZWxUcmVlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIGluZGV4TmFtZXMgPSB0aGlzLnByb3BzLmluZGV4TmFtZXM7CiAgICAgIHZhciBzZWxlY3RlZEluZGV4Q291bnQgPSBpbmRleE5hbWVzLmxlbmd0aDsKICAgICAgdmFyIF90aGlzJHByb3BzNiA9IHRoaXMucHJvcHMsCiAgICAgICAgICBfdGhpcyRwcm9wczYkaWNvblNpZGUgPSBfdGhpcyRwcm9wczYuaWNvblNpZGUsCiAgICAgICAgICBpY29uU2lkZSA9IF90aGlzJHByb3BzNiRpY29uU2lkZSA9PT0gdm9pZCAwID8gJ3JpZ2h0JyA6IF90aGlzJHByb3BzNiRpY29uU2lkZSwKICAgICAgICAgIF90aGlzJHByb3BzNiRhbmNob3JQbyA9IF90aGlzJHByb3BzNi5hbmNob3JQb3NpdGlvbiwKICAgICAgICAgIGFuY2hvclBvc2l0aW9uID0gX3RoaXMkcHJvcHM2JGFuY2hvclBvID09PSB2b2lkIDAgPyAncmlnaHRVcCcgOiBfdGhpcyRwcm9wczYkYW5jaG9yUG8sCiAgICAgICAgICBfdGhpcyRwcm9wczYkbGFiZWwgPSBfdGhpcyRwcm9wczYubGFiZWwsCiAgICAgICAgICBsYWJlbCA9IF90aGlzJHByb3BzNiRsYWJlbCA9PT0gdm9pZCAwID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhBY3Rpb25zTWVudS5tYW5hZ2VCdXR0b25MYWJlbCcsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ01hbmFnZSB7c2VsZWN0ZWRJbmRleENvdW50LCBwbHVyYWwsIG9uZSB7aW5kZXh9IG90aGVyIHtpbmRpY2VzfX0nLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgc2VsZWN0ZWRJbmRleENvdW50OiBzZWxlY3RlZEluZGV4Q291bnQKICAgICAgICB9CiAgICAgIH0pIDogX3RoaXMkcHJvcHM2JGxhYmVsLAogICAgICAgICAgX3RoaXMkcHJvcHM2JGljb25UeXBlID0gX3RoaXMkcHJvcHM2Lmljb25UeXBlLAogICAgICAgICAgaWNvblR5cGUgPSBfdGhpcyRwcm9wczYkaWNvblR5cGUgPT09IHZvaWQgMCA/ICdhcnJvd0Rvd24nIDogX3RoaXMkcHJvcHM2JGljb25UeXBlOwogICAgICB2YXIgcGFuZWxzID0gdGhpcy5wYW5lbHMoKTsKCiAgICAgIHZhciBidXR0b24gPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uLCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImluZGV4QWN0aW9uc0NvbnRleHRNZW51QnV0dG9uIiwKICAgICAgICBpY29uU2lkZTogaWNvblNpZGUsCiAgICAgICAgImFyaWEtbGFiZWwiOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleEFjdGlvbnNNZW51Lm1hbmFnZUJ1dHRvbkFyaWFMYWJlbCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAne3NlbGVjdGVkSW5kZXhDb3VudCwgcGx1cmFsLCBvbmUge2luZGV4fSBvdGhlciB7aW5kaWNlc30gfSBvcHRpb25zJywKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBzZWxlY3RlZEluZGV4Q291bnQ6IHNlbGVjdGVkSW5kZXhDb3VudAogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgIG9uQ2xpY2s6IHRoaXMub25CdXR0b25DbGljaywKICAgICAgICBpY29uVHlwZTogaWNvblR5cGUsCiAgICAgICAgZmlsbDogdHJ1ZQogICAgICB9LCBsYWJlbCk7CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgdGhpcy5zdGF0ZS5yZW5kZXJDb25maXJtTW9kYWwgPyB0aGlzLnN0YXRlLnJlbmRlckNvbmZpcm1Nb2RhbCh0aGlzLmNsb3NlQ29uZmlybU1vZGFsLCAoMCwgX2FwaS5nZXRIdHRwQ2xpZW50KSgpKSA6IG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQb3BvdmVyLCB7CiAgICAgICAgaWQ6ICJjb250ZXh0TWVudUluZGljZXMiLAogICAgICAgIGJ1dHRvbjogYnV0dG9uLAogICAgICAgIGlzT3BlbjogdGhpcy5zdGF0ZS5pc1BvcG92ZXJPcGVuLAogICAgICAgIGNsb3NlUG9wb3ZlcjogdGhpcy5jbG9zZVBvcG92ZXIsCiAgICAgICAgcGFuZWxQYWRkaW5nU2l6ZTogIm5vbmUiLAogICAgICAgIHdpdGhUaXRsZTogdHJ1ZSwKICAgICAgICBhbmNob3JQb3NpdGlvbjogYW5jaG9yUG9zaXRpb24sCiAgICAgICAgcmVwb3NpdGlvbk9uU2Nyb2xsOiB0cnVlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb250ZXh0TWVudSwgewogICAgICAgIGluaXRpYWxQYW5lbElkOiAwLAogICAgICAgIHBhbmVsczogcGFuZWxzCiAgICAgIH0pKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSW5kZXhBY3Rpb25zQ29udGV4dE1lbnU7Cn0oX3JlYWN0LkNvbXBvbmVudCk7CgpleHBvcnRzLkluZGV4QWN0aW9uc0NvbnRleHRNZW51ID0gSW5kZXhBY3Rpb25zQ29udGV4dE1lbnU7"},null]}