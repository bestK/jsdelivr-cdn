{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/components/open_timeline/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/components/open_timeline/index.js","mtime":1585205047552},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlN0YXRlZnVsT3BlblRpbWVsaW5lID0gZXhwb3J0cy5TdGF0ZWZ1bE9wZW5UaW1lbGluZUNvbXBvbmVudCA9IGV4cG9ydHMuZ2V0U2VsZWN0ZWRUaW1lbGluZUlkcyA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcmVhY3RSZWR1eCA9IHJlcXVpcmUoInJlYWN0LXJlZHV4Iik7Cgp2YXIgX2RlZmF1bHRfaGVhZGVycyA9IHJlcXVpcmUoIi4uLy4uL2NvbXBvbmVudHMvdGltZWxpbmUvYm9keS9jb2x1bW5faGVhZGVycy9kZWZhdWx0X2hlYWRlcnMiKTsKCnZhciBfcGVyc2lzdCA9IHJlcXVpcmUoIi4uLy4uL2NvbnRhaW5lcnMvdGltZWxpbmUvZGVsZXRlL3BlcnNpc3QuZ3FsX3F1ZXJ5Iik7Cgp2YXIgX2FsbCA9IHJlcXVpcmUoIi4uLy4uL2NvbnRhaW5lcnMvdGltZWxpbmUvYWxsIik7Cgp2YXIgX2luZGV4ID0gcmVxdWlyZSgiLi4vLi4vY29udGFpbmVycy90aW1lbGluZS9hbGwvaW5kZXguZ3FsX3F1ZXJ5Iik7Cgp2YXIgX3N0b3JlID0gcmVxdWlyZSgiLi4vLi4vc3RvcmUiKTsKCnZhciBfZGVmYXVsdHMgPSByZXF1aXJlKCIuLi8uLi9zdG9yZS90aW1lbGluZS9kZWZhdWx0cyIpOwoKdmFyIF9hY3Rpb25zID0gcmVxdWlyZSgiLi4vLi4vc3RvcmUvdGltZWxpbmUvYWN0aW9ucyIpOwoKdmFyIF9vcGVuX3RpbWVsaW5lID0gcmVxdWlyZSgiLi9vcGVuX3RpbWVsaW5lIik7Cgp2YXIgX2hlbHBlcnMgPSByZXF1aXJlKCIuL2hlbHBlcnMiKTsKCnZhciBfb3Blbl90aW1lbGluZV9tb2RhbF9ib2R5ID0gcmVxdWlyZSgiLi9vcGVuX3RpbWVsaW5lX21vZGFsL29wZW5fdGltZWxpbmVfbW9kYWxfYm9keSIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuL2NvbnN0YW50cyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KLyoqIFJldHVybnMgYSBjb2xsZWN0aW9uIG9mIHNlbGVjdGVkIHRpbWVsaW5lIGlkcyAqLwoKCnZhciBnZXRTZWxlY3RlZFRpbWVsaW5lSWRzID0gZnVuY3Rpb24gZ2V0U2VsZWN0ZWRUaW1lbGluZUlkcyhzZWxlY3RlZEl0ZW1zKSB7CiAgcmV0dXJuIHNlbGVjdGVkSXRlbXMucmVkdWNlKGZ1bmN0aW9uICh2YWxpZFNlbGVjdGlvbnMsIHRpbWVsaW5lUmVzdWx0KSB7CiAgICByZXR1cm4gdGltZWxpbmVSZXN1bHQuc2F2ZWRPYmplY3RJZCAhPSBudWxsID8gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh2YWxpZFNlbGVjdGlvbnMpLCBbdGltZWxpbmVSZXN1bHQuc2F2ZWRPYmplY3RJZF0pIDogdmFsaWRTZWxlY3Rpb25zOwogIH0sIFtdKTsKfTsKLyoqIE1hbmFnZXMgdGhlIHN0YXRlIChlLmcgdGFibGUgc2VsZWN0aW9uKSBvZiB0aGUgKHB1cmUpIGBPcGVuVGltZWxpbmVgIGNvbXBvbmVudCAqLwoKCmV4cG9ydHMuZ2V0U2VsZWN0ZWRUaW1lbGluZUlkcyA9IGdldFNlbGVjdGVkVGltZWxpbmVJZHM7Cgp2YXIgU3RhdGVmdWxPcGVuVGltZWxpbmVDb21wb25lbnQgPSBfcmVhY3QuZGVmYXVsdC5tZW1vKGZ1bmN0aW9uIChfcmVmKSB7CiAgdmFyIGFwb2xsb0NsaWVudCA9IF9yZWYuYXBvbGxvQ2xpZW50LAogICAgICBjbG9zZU1vZGFsVGltZWxpbmUgPSBfcmVmLmNsb3NlTW9kYWxUaW1lbGluZSwKICAgICAgY3JlYXRlTmV3VGltZWxpbmUgPSBfcmVmLmNyZWF0ZU5ld1RpbWVsaW5lLAogICAgICBkZWZhdWx0UGFnZVNpemUgPSBfcmVmLmRlZmF1bHRQYWdlU2l6ZSwKICAgICAgX3JlZiRoaWRlQWN0aW9ucyA9IF9yZWYuaGlkZUFjdGlvbnMsCiAgICAgIGhpZGVBY3Rpb25zID0gX3JlZiRoaWRlQWN0aW9ucyA9PT0gdm9pZCAwID8gW10gOiBfcmVmJGhpZGVBY3Rpb25zLAogICAgICBfcmVmJGlzTW9kYWwgPSBfcmVmLmlzTW9kYWwsCiAgICAgIGlzTW9kYWwgPSBfcmVmJGlzTW9kYWwgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRpc01vZGFsLAogICAgICBvbk9wZW5UaW1lbGluZSA9IF9yZWYub25PcGVuVGltZWxpbmUsCiAgICAgIHRpbWVsaW5lID0gX3JlZi50aW1lbGluZSwKICAgICAgdGl0bGUgPSBfcmVmLnRpdGxlLAogICAgICB1cGRhdGVUaW1lbGluZSA9IF9yZWYudXBkYXRlVGltZWxpbmUsCiAgICAgIHVwZGF0ZUlzTG9hZGluZyA9IF9yZWYudXBkYXRlSXNMb2FkaW5nOwogIC8qKiBSZXF1aXJlZCBieSBFdWlUYWJsZSBmb3IgZXhwYW5kYWJsZSByb3dzOiBhIG1hcCBvZiBgVGltZWxpbmVSZXN1bHQuc2F2ZWRPYmplY3RJZGAgdG8gcmVuZGVyZWQgbm90ZXMgKi8KCiAgdmFyIF91c2VTdGF0ZSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHt9KSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGl0ZW1JZFRvRXhwYW5kZWROb3Rlc1Jvd01hcCA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldEl0ZW1JZFRvRXhwYW5kZWROb3Rlc1Jvd01hcCA9IF91c2VTdGF0ZTJbMV07CiAgLyoqIE9ubHkgcXVlcnkgZm9yIGZhdm9yaXRlIHRpbWVsaW5lcyB3aGVuIHRydWUgKi8KCgogIHZhciBfdXNlU3RhdGUzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIG9ubHlGYXZvcml0ZXMgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRPbmx5RmF2b3JpdGVzID0gX3VzZVN0YXRlNFsxXTsKICAvKiogVGhlIHJlcXVlc3RlZCBwYWdlIG9mIHJlc3VsdHMgKi8KCgogIHZhciBfdXNlU3RhdGU1ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoMCksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgcGFnZUluZGV4ID0gX3VzZVN0YXRlNlswXSwKICAgICAgc2V0UGFnZUluZGV4ID0gX3VzZVN0YXRlNlsxXTsKICAvKiogVGhlIHJlcXVlc3RlZCBzaXplIG9mIGVhY2ggcGFnZSBvZiBzZWFyY2ggcmVzdWx0cyAqLwoKCiAgdmFyIF91c2VTdGF0ZTcgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShkZWZhdWx0UGFnZVNpemUpLAogICAgICBfdXNlU3RhdGU4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNywgMiksCiAgICAgIHBhZ2VTaXplID0gX3VzZVN0YXRlOFswXSwKICAgICAgc2V0UGFnZVNpemUgPSBfdXNlU3RhdGU4WzFdOwogIC8qKiBUaGUgY3VycmVudCBzZWFyY2ggY3JpdGVyaWEgKi8KCgogIHZhciBfdXNlU3RhdGU5ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoJycpLAogICAgICBfdXNlU3RhdGUxMCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTksIDIpLAogICAgICBzZWFyY2ggPSBfdXNlU3RhdGUxMFswXSwKICAgICAgc2V0U2VhcmNoID0gX3VzZVN0YXRlMTBbMV07CiAgLyoqIFRoZSBjdXJyZW50bHktc2VsZWN0ZWQgdGltZWxpbmVzIGluIHRoZSB0YWJsZSAqLwoKCiAgdmFyIF91c2VTdGF0ZTExID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoW10pLAogICAgICBfdXNlU3RhdGUxMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTExLCAyKSwKICAgICAgc2VsZWN0ZWRJdGVtcyA9IF91c2VTdGF0ZTEyWzBdLAogICAgICBzZXRTZWxlY3RlZEl0ZW1zID0gX3VzZVN0YXRlMTJbMV07CiAgLyoqIFRoZSByZXF1ZXN0ZWQgc29ydCBkaXJlY3Rpb24gb2YgdGhlIHF1ZXJ5IHJlc3VsdHMgKi8KCgogIHZhciBfdXNlU3RhdGUxMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKF9jb25zdGFudHMuREVGQVVMVF9TT1JUX0RJUkVDVElPTiksCiAgICAgIF91c2VTdGF0ZTE0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTMsIDIpLAogICAgICBzb3J0RGlyZWN0aW9uID0gX3VzZVN0YXRlMTRbMF0sCiAgICAgIHNldFNvcnREaXJlY3Rpb24gPSBfdXNlU3RhdGUxNFsxXTsKICAvKiogVGhlIHJlcXVlc3RlZCBmaWVsZCB0byBzb3J0IG9uICovCgoKICB2YXIgX3VzZVN0YXRlMTUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShfY29uc3RhbnRzLkRFRkFVTFRfU09SVF9GSUVMRCksCiAgICAgIF91c2VTdGF0ZTE2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTUsIDIpLAogICAgICBzb3J0RmllbGQgPSBfdXNlU3RhdGUxNlswXSwKICAgICAgc2V0U29ydEZpZWxkID0gX3VzZVN0YXRlMTZbMV07CiAgLyoqIEludm9rZWQgd2hlbiB0aGUgdXNlciBwcmVzc2VzIGVudGVycyB0byBzdWJtaXQgdGhlIHRleHQgaW4gdGhlIHNlYXJjaCBpbnB1dCAqLwoKCiAgdmFyIG9uUXVlcnlDaGFuZ2UgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAocXVlcnkpIHsKICAgIHNldFNlYXJjaChxdWVyeS5xdWVyeVRleHQudHJpbSgpKTsKICB9LCBbXSk7CiAgLyoqIEZvY3VzZXMgdGhlIGlucHV0IHRoYXQgZmlsdGVycyB0aGUgZmllbGQgYnJvd3NlciAqLwoKICB2YXIgZm9jdXNJbnB1dCA9IGZ1bmN0aW9uIGZvY3VzSW5wdXQoKSB7CiAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuIi5jb25jYXQoX2hlbHBlcnMuT1BFTl9USU1FTElORV9DTEFTU19OQU1FLCAiIGlucHV0IikpOwoKICAgIGlmIChlbGVtZW50cyAhPSBudWxsKSB7CiAgICAgIGVsZW1lbnRzLmZvY3VzKCk7CiAgICB9CiAgfTsKICAvKiBUaGlzIGZlYXR1cmUgd2lsbCBiZSBpbXBsZW1lbnRlZCBpbiB0aGUgbmVhciBmdXR1cmUsIHNvIHdlIGFyZSBrZWVwaW5nIGl0IHRvIGtub3cgd2hhdCB0byBkbyAqLwoKICAvKiogSW52b2tlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgYWN0aW9uIHRvIGFkZCB0aGUgc2VsZWN0ZWQgdGltZWxpbmVzIHRvIGZhdm9yaXRlcyAqLwogIC8vIGNvbnN0IG9uQWRkVGltZWxpbmVzVG9GYXZvcml0ZXM6IE9uQWRkVGltZWxpbmVzVG9GYXZvcml0ZXMgPSAoKSA9PiB7CiAgLy8gY29uc3QgeyBhZGRUaW1lbGluZXNUb0Zhdm9yaXRlcyB9ID0gdGhpcy5wcm9wczsKICAvLyBjb25zdCB7IHNlbGVjdGVkSXRlbXMgfSA9IHRoaXMuc3RhdGU7CiAgLy8gaWYgKGFkZFRpbWVsaW5lc1RvRmF2b3JpdGVzICE9IG51bGwpIHsKICAvLyAgIGFkZFRpbWVsaW5lc1RvRmF2b3JpdGVzKGdldFNlbGVjdGVkVGltZWxpbmVJZHMoc2VsZWN0ZWRJdGVtcykpOwogIC8vIFRPRE86IGl0J3Mgbm90IHBvc3NpYmxlIHRvIGNsZWFyIHRoZSBzZWxlY3Rpb24gc3RhdGUgb2YgdGhlIG5ld2x5LWZhdm9yaXRlZAogIC8vIGl0ZW1zLCBiZWNhdXNlIHdlIGNhbid0IHBhc3MgdGhlIHNlbGVjdGlvbiBzdGF0ZSBhcyBwcm9wcyB0byB0aGUgdGFibGUuCiAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZWxhc3RpYy9ldWkvaXNzdWVzLzEwNzcKICAvLyBUT0RPOiB0aGUgcXVlcnkgbXVzdCByZS1leGVjdXRlIHRvIHNob3cgdGhlIHJlc3VsdHMgb2YgdGhlIG11dGF0aW9uCiAgLy8gfQogIC8vIH07CgoKICB2YXIgb25EZWxldGVPbmVUaW1lbGluZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICh0aW1lbGluZUlkcykgewogICAgZGVsZXRlVGltZWxpbmVzKHRpbWVsaW5lSWRzLCB7CiAgICAgIHNlYXJjaDogc2VhcmNoLAogICAgICBwYWdlSW5mbzogewogICAgICAgIHBhZ2VJbmRleDogcGFnZUluZGV4ICsgMSwKICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemUKICAgICAgfSwKICAgICAgc29ydDogewogICAgICAgIHNvcnRGaWVsZDogc29ydEZpZWxkLAogICAgICAgIHNvcnRPcmRlcjogc29ydERpcmVjdGlvbgogICAgICB9LAogICAgICBvbmx5VXNlckZhdm9yaXRlOiBvbmx5RmF2b3JpdGVzCiAgICB9KTsKICB9LCBbc2VhcmNoLCBwYWdlSW5kZXgsIHBhZ2VTaXplLCBzb3J0RmllbGQsIHNvcnREaXJlY3Rpb24sIG9ubHlGYXZvcml0ZXNdKTsKICAvKiogSW52b2tlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgYWN0aW9uIHRvIGRlbGV0ZSB0aGUgc2VsZWN0ZWQgdGltZWxpbmVzICovCgogIHZhciBvbkRlbGV0ZVNlbGVjdGVkID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKCkgewogICAgZGVsZXRlVGltZWxpbmVzKGdldFNlbGVjdGVkVGltZWxpbmVJZHMoc2VsZWN0ZWRJdGVtcyksIHsKICAgICAgc2VhcmNoOiBzZWFyY2gsCiAgICAgIHBhZ2VJbmZvOiB7CiAgICAgICAgcGFnZUluZGV4OiBwYWdlSW5kZXggKyAxLAogICAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZQogICAgICB9LAogICAgICBzb3J0OiB7CiAgICAgICAgc29ydEZpZWxkOiBzb3J0RmllbGQsCiAgICAgICAgc29ydE9yZGVyOiBzb3J0RGlyZWN0aW9uCiAgICAgIH0sCiAgICAgIG9ubHlVc2VyRmF2b3JpdGU6IG9ubHlGYXZvcml0ZXMKICAgIH0pOyAvLyBOT1RFOiB3ZSBjbGVhciB0aGUgc2VsZWN0aW9uIHN0YXRlIGJlbG93LCBidXQgaWYgdGhlIHNlcnZlciBmYWlscyB0bwogICAgLy8gZGVsZXRlIGEgdGltZWxpbmUsIGl0IHdpbGwgcmVtYWluIHNlbGVjdGVkIGluIHRoZSB0YWJsZToKCiAgICByZXNldFNlbGVjdGlvblN0YXRlKCk7IC8vIFRPRE86IHRoZSBxdWVyeSBtdXN0IHJlLWV4ZWN1dGUgdG8gc2hvdyB0aGUgcmVzdWx0cyBvZiB0aGUgZGVsZXRpb24KICB9LCBbc2VsZWN0ZWRJdGVtcywgc2VhcmNoLCBwYWdlSW5kZXgsIHBhZ2VTaXplLCBzb3J0RmllbGQsIHNvcnREaXJlY3Rpb24sIG9ubHlGYXZvcml0ZXNdKTsKICAvKiogSW52b2tlZCB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgKG9yIGRlLXNlbGVjdHMpIHRpbWVsaW5lcyAqLwoKICB2YXIgb25TZWxlY3Rpb25DaGFuZ2UgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAobmV3U2VsZWN0ZWRJdGVtcykgewogICAgc2V0U2VsZWN0ZWRJdGVtcyhuZXdTZWxlY3RlZEl0ZW1zKTsgLy8gPC0tIHRoaXMgaXMgTk9UIHBhc3NlZCBkb3duIGFzIHByb3BzIHRvIHRoZSB0YWJsZTogaHR0cHM6Ly9naXRodWIuY29tL2VsYXN0aWMvZXVpL2lzc3Vlcy8xMDc3CiAgfSwgW10pOwogIC8qKiBJbnZva2VkIGJ5IHRoZSBFVUkgdGFibGUgaW1wbGVtZW50YXRpb24gd2hlbiB0aGUgdXNlciBpbnRlcmFjdHMgd2l0aCB0aGUgdGFibGUgKGkuZS4gdG8gdXBkYXRlIHNvcnRpbmcpICovCgogIHZhciBvblRhYmxlQ2hhbmdlID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICB2YXIgcGFnZSA9IF9yZWYyLnBhZ2UsCiAgICAgICAgc29ydCA9IF9yZWYyLnNvcnQ7CiAgICB2YXIgaW5kZXggPSBwYWdlLmluZGV4LAogICAgICAgIHNpemUgPSBwYWdlLnNpemU7CiAgICB2YXIgZmllbGQgPSBzb3J0LmZpZWxkLAogICAgICAgIGRpcmVjdGlvbiA9IHNvcnQuZGlyZWN0aW9uOwogICAgc2V0UGFnZUluZGV4KGluZGV4KTsKICAgIHNldFBhZ2VTaXplKHNpemUpOwogICAgc2V0U29ydERpcmVjdGlvbihkaXJlY3Rpb24pOwogICAgc2V0U29ydEZpZWxkKGZpZWxkKTsKICB9LCBbXSk7CiAgLyoqIEludm9rZWQgd2hlbiB0aGUgdXNlciB0b2dnbGVzIHRoZSBvcHRpb24gdG8gb25seSB2aWV3IGZhdm9yaXRlIHRpbWVsaW5lcyAqLwoKICB2YXIgb25Ub2dnbGVPbmx5RmF2b3JpdGVzID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKCkgewogICAgc2V0T25seUZhdm9yaXRlcyghb25seUZhdm9yaXRlcyk7CiAgfSwgW29ubHlGYXZvcml0ZXNdKTsKICAvKiogSW52b2tlZCB3aGVuIHRoZSB1c2VyIHRvZ2dsZXMgdGhlIGV4cGFuc2lvbiBvciBjb2xsYXBzZSBvZiBpbmxpbmUgbm90ZXMgaW4gYSB0YWJsZSByb3cgKi8KCiAgdmFyIG9uVG9nZ2xlU2hvd05vdGVzID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKG5ld0l0ZW1JZFRvRXhwYW5kZWROb3Rlc1Jvd01hcCkgewogICAgc2V0SXRlbUlkVG9FeHBhbmRlZE5vdGVzUm93TWFwKG5ld0l0ZW1JZFRvRXhwYW5kZWROb3Rlc1Jvd01hcCk7CiAgfSwgW10pOwogIC8qKiBSZXNldHMgdGhlIHNlbGVjdGlvbiBzdGF0ZSBzdWNoIHRoYXQgYWxsIHRpbWVsaW5lcyBhcmUgdW5zZWxlY3RlZCAqLwoKICB2YXIgcmVzZXRTZWxlY3Rpb25TdGF0ZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICgpIHsKICAgIHNldFNlbGVjdGVkSXRlbXMoW10pOwogIH0sIFtdKTsKICB2YXIgb3BlblRpbWVsaW5lID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKF9yZWYzKSB7CiAgICB2YXIgZHVwbGljYXRlID0gX3JlZjMuZHVwbGljYXRlLAogICAgICAgIHRpbWVsaW5lSWQgPSBfcmVmMy50aW1lbGluZUlkOwoKICAgIGlmIChpc01vZGFsICYmIGNsb3NlTW9kYWxUaW1lbGluZSAhPSBudWxsKSB7CiAgICAgIGNsb3NlTW9kYWxUaW1lbGluZSgpOwogICAgfQoKICAgICgwLCBfaGVscGVycy5xdWVyeVRpbWVsaW5lQnlJZCkoewogICAgICBhcG9sbG9DbGllbnQ6IGFwb2xsb0NsaWVudCwKICAgICAgZHVwbGljYXRlOiBkdXBsaWNhdGUsCiAgICAgIG9uT3BlblRpbWVsaW5lOiBvbk9wZW5UaW1lbGluZSwKICAgICAgdGltZWxpbmVJZDogdGltZWxpbmVJZCwKICAgICAgdXBkYXRlSXNMb2FkaW5nOiB1cGRhdGVJc0xvYWRpbmcsCiAgICAgIHVwZGF0ZVRpbWVsaW5lOiB1cGRhdGVUaW1lbGluZQogICAgfSk7CiAgfSwgW2Fwb2xsb0NsaWVudCwgdXBkYXRlSXNMb2FkaW5nLCB1cGRhdGVUaW1lbGluZV0pOwogIHZhciBkZWxldGVUaW1lbGluZXMgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAodGltZWxpbmVJZHMsIHZhcmlhYmxlcykgewogICAgaWYgKHRpbWVsaW5lSWRzLmluY2x1ZGVzKHRpbWVsaW5lLnNhdmVkT2JqZWN0SWQgfHwgJycpKSB7CiAgICAgIGNyZWF0ZU5ld1RpbWVsaW5lKHsKICAgICAgICBpZDogJ3RpbWVsaW5lLTEnLAogICAgICAgIGNvbHVtbnM6IF9kZWZhdWx0X2hlYWRlcnMuZGVmYXVsdEhlYWRlcnMsCiAgICAgICAgc2hvdzogZmFsc2UKICAgICAgfSk7CiAgICB9CgogICAgYXBvbGxvQ2xpZW50Lm11dGF0ZSh7CiAgICAgIG11dGF0aW9uOiBfcGVyc2lzdC5kZWxldGVUaW1lbGluZU11dGF0aW9uLAogICAgICBmZXRjaFBvbGljeTogJ25vLWNhY2hlJywKICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgaWQ6IHRpbWVsaW5lSWRzCiAgICAgIH0sCiAgICAgIHJlZmV0Y2hRdWVyaWVzOiBbewogICAgICAgIHF1ZXJ5OiBfaW5kZXguYWxsVGltZWxpbmVzUXVlcnksCiAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMKICAgICAgfV0KICAgIH0pOwogIH0sIFthcG9sbG9DbGllbnQsIGNyZWF0ZU5ld1RpbWVsaW5lLCB0aW1lbGluZV0pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBmb2N1c0lucHV0KCk7CiAgfSwgW10pOwogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hbGwuQWxsVGltZWxpbmVzUXVlcnksIHsKICAgIHBhZ2VJbmZvOiB7CiAgICAgIHBhZ2VJbmRleDogcGFnZUluZGV4ICsgMSwKICAgICAgcGFnZVNpemU6IHBhZ2VTaXplCiAgICB9LAogICAgc2VhcmNoOiBzZWFyY2gsCiAgICBzb3J0OiB7CiAgICAgIHNvcnRGaWVsZDogc29ydEZpZWxkLAogICAgICBzb3J0T3JkZXI6IHNvcnREaXJlY3Rpb24KICAgIH0sCiAgICBvbmx5VXNlckZhdm9yaXRlOiBvbmx5RmF2b3JpdGVzCiAgfSwgZnVuY3Rpb24gKF9yZWY0KSB7CiAgICB2YXIgdGltZWxpbmVzID0gX3JlZjQudGltZWxpbmVzLAogICAgICAgIGxvYWRpbmcgPSBfcmVmNC5sb2FkaW5nLAogICAgICAgIHRvdGFsQ291bnQgPSBfcmVmNC50b3RhbENvdW50OwogICAgcmV0dXJuICFpc01vZGFsID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfb3Blbl90aW1lbGluZS5PcGVuVGltZWxpbmUsIHsKICAgICAgImRhdGEtdGVzdC1zdWJqIjogJ29wZW4tdGltZWxpbmUnLAogICAgICBkZWxldGVUaW1lbGluZXM6IG9uRGVsZXRlT25lVGltZWxpbmUsCiAgICAgIGRlZmF1bHRQYWdlU2l6ZTogZGVmYXVsdFBhZ2VTaXplLAogICAgICBpc0xvYWRpbmc6IGxvYWRpbmcsCiAgICAgIGl0ZW1JZFRvRXhwYW5kZWROb3Rlc1Jvd01hcDogaXRlbUlkVG9FeHBhbmRlZE5vdGVzUm93TWFwLAogICAgICBvbkFkZFRpbWVsaW5lc1RvRmF2b3JpdGVzOiB1bmRlZmluZWQsCiAgICAgIG9uRGVsZXRlU2VsZWN0ZWQ6IG9uRGVsZXRlU2VsZWN0ZWQsCiAgICAgIG9ubHlGYXZvcml0ZXM6IG9ubHlGYXZvcml0ZXMsCiAgICAgIG9uT3BlblRpbWVsaW5lOiBvcGVuVGltZWxpbmUsCiAgICAgIG9uUXVlcnlDaGFuZ2U6IG9uUXVlcnlDaGFuZ2UsCiAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlOiBvblNlbGVjdGlvbkNoYW5nZSwKICAgICAgb25UYWJsZUNoYW5nZTogb25UYWJsZUNoYW5nZSwKICAgICAgb25Ub2dnbGVPbmx5RmF2b3JpdGVzOiBvblRvZ2dsZU9ubHlGYXZvcml0ZXMsCiAgICAgIG9uVG9nZ2xlU2hvd05vdGVzOiBvblRvZ2dsZVNob3dOb3RlcywKICAgICAgcGFnZUluZGV4OiBwYWdlSW5kZXgsCiAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZSwKICAgICAgcXVlcnk6IHNlYXJjaCwKICAgICAgc2VhcmNoUmVzdWx0czogdGltZWxpbmVzLAogICAgICBzZWxlY3RlZEl0ZW1zOiBzZWxlY3RlZEl0ZW1zLAogICAgICBzb3J0RGlyZWN0aW9uOiBzb3J0RGlyZWN0aW9uLAogICAgICBzb3J0RmllbGQ6IHNvcnRGaWVsZCwKICAgICAgdGl0bGU6IHRpdGxlLAogICAgICB0b3RhbFNlYXJjaFJlc3VsdHNDb3VudDogdG90YWxDb3VudAogICAgfSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9vcGVuX3RpbWVsaW5lX21vZGFsX2JvZHkuT3BlblRpbWVsaW5lTW9kYWxCb2R5LCB7CiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICdvcGVuLXRpbWVsaW5lLW1vZGFsJywKICAgICAgZGVsZXRlVGltZWxpbmVzOiBvbkRlbGV0ZU9uZVRpbWVsaW5lLAogICAgICBkZWZhdWx0UGFnZVNpemU6IGRlZmF1bHRQYWdlU2l6ZSwKICAgICAgaGlkZUFjdGlvbnM6IGhpZGVBY3Rpb25zLAogICAgICBpc0xvYWRpbmc6IGxvYWRpbmcsCiAgICAgIGl0ZW1JZFRvRXhwYW5kZWROb3Rlc1Jvd01hcDogaXRlbUlkVG9FeHBhbmRlZE5vdGVzUm93TWFwLAogICAgICBvbkFkZFRpbWVsaW5lc1RvRmF2b3JpdGVzOiB1bmRlZmluZWQsCiAgICAgIG9ubHlGYXZvcml0ZXM6IG9ubHlGYXZvcml0ZXMsCiAgICAgIG9uT3BlblRpbWVsaW5lOiBvcGVuVGltZWxpbmUsCiAgICAgIG9uUXVlcnlDaGFuZ2U6IG9uUXVlcnlDaGFuZ2UsCiAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlOiBvblNlbGVjdGlvbkNoYW5nZSwKICAgICAgb25UYWJsZUNoYW5nZTogb25UYWJsZUNoYW5nZSwKICAgICAgb25Ub2dnbGVPbmx5RmF2b3JpdGVzOiBvblRvZ2dsZU9ubHlGYXZvcml0ZXMsCiAgICAgIG9uVG9nZ2xlU2hvd05vdGVzOiBvblRvZ2dsZVNob3dOb3RlcywKICAgICAgcGFnZUluZGV4OiBwYWdlSW5kZXgsCiAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZSwKICAgICAgcXVlcnk6IHNlYXJjaCwKICAgICAgc2VhcmNoUmVzdWx0czogdGltZWxpbmVzLAogICAgICBzZWxlY3RlZEl0ZW1zOiBzZWxlY3RlZEl0ZW1zLAogICAgICBzb3J0RGlyZWN0aW9uOiBzb3J0RGlyZWN0aW9uLAogICAgICBzb3J0RmllbGQ6IHNvcnRGaWVsZCwKICAgICAgdGl0bGU6IHRpdGxlLAogICAgICB0b3RhbFNlYXJjaFJlc3VsdHNDb3VudDogdG90YWxDb3VudAogICAgfSk7CiAgfSk7Cn0pOwoKZXhwb3J0cy5TdGF0ZWZ1bE9wZW5UaW1lbGluZUNvbXBvbmVudCA9IFN0YXRlZnVsT3BlblRpbWVsaW5lQ29tcG9uZW50OwoKdmFyIG1ha2VNYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiBtYWtlTWFwU3RhdGVUb1Byb3BzKCkgewogIHZhciBnZXRUaW1lbGluZSA9IF9zdG9yZS50aW1lbGluZVNlbGVjdG9ycy5nZXRUaW1lbGluZUJ5SWRTZWxlY3RvcigpOwoKICB2YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlKSB7CiAgICB2YXIgX2dldFRpbWVsaW5lOwoKICAgIHZhciB0aW1lbGluZSA9IChfZ2V0VGltZWxpbmUgPSBnZXRUaW1lbGluZShzdGF0ZSwgJ3RpbWVsaW5lLTEnKSkgIT09IG51bGwgJiYgX2dldFRpbWVsaW5lICE9PSB2b2lkIDAgPyBfZ2V0VGltZWxpbmUgOiBfZGVmYXVsdHMudGltZWxpbmVEZWZhdWx0czsKICAgIHJldHVybiB7CiAgICAgIHRpbWVsaW5lOiB0aW1lbGluZQogICAgfTsKICB9OwoKICByZXR1cm4gbWFwU3RhdGVUb1Byb3BzOwp9OwoKdmFyIG1hcERpc3BhdGNoVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCkgewogIHJldHVybiB7CiAgICBjcmVhdGVOZXdUaW1lbGluZTogZnVuY3Rpb24gY3JlYXRlTmV3VGltZWxpbmUoX3JlZjUpIHsKICAgICAgdmFyIGlkID0gX3JlZjUuaWQsCiAgICAgICAgICBjb2x1bW5zID0gX3JlZjUuY29sdW1ucywKICAgICAgICAgIHNob3cgPSBfcmVmNS5zaG93OwogICAgICByZXR1cm4gZGlzcGF0Y2goKDAsIF9hY3Rpb25zLmNyZWF0ZVRpbWVsaW5lKSh7CiAgICAgICAgaWQ6IGlkLAogICAgICAgIGNvbHVtbnM6IGNvbHVtbnMsCiAgICAgICAgc2hvdzogc2hvdwogICAgICB9KSk7CiAgICB9LAogICAgdXBkYXRlSXNMb2FkaW5nOiBmdW5jdGlvbiB1cGRhdGVJc0xvYWRpbmcoX3JlZjYpIHsKICAgICAgdmFyIGlkID0gX3JlZjYuaWQsCiAgICAgICAgICBpc0xvYWRpbmcgPSBfcmVmNi5pc0xvYWRpbmc7CiAgICAgIHJldHVybiBkaXNwYXRjaCgoMCwgX2FjdGlvbnMudXBkYXRlSXNMb2FkaW5nKSh7CiAgICAgICAgaWQ6IGlkLAogICAgICAgIGlzTG9hZGluZzogaXNMb2FkaW5nCiAgICAgIH0pKTsKICAgIH0sCiAgICB1cGRhdGVUaW1lbGluZTogKDAsIF9oZWxwZXJzLmRpc3BhdGNoVXBkYXRlVGltZWxpbmUpKGRpc3BhdGNoKQogIH07Cn07Cgp2YXIgU3RhdGVmdWxPcGVuVGltZWxpbmUgPSAoMCwgX3JlYWN0UmVkdXguY29ubmVjdCkobWFrZU1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShTdGF0ZWZ1bE9wZW5UaW1lbGluZUNvbXBvbmVudCk7CmV4cG9ydHMuU3RhdGVmdWxPcGVuVGltZWxpbmUgPSBTdGF0ZWZ1bE9wZW5UaW1lbGluZTs="},null]}