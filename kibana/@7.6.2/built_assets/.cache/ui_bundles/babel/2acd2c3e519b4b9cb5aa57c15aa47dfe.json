{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/components/job_selector/job_selector.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/components/job_selector/job_selector.js","mtime":1585205045477},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkpvYlNlbGVjdG9yID0gSm9iU2VsZWN0b3I7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3Byb3BUeXBlcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicHJvcC10eXBlcyIpKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfbm90aWZ5ID0gcmVxdWlyZSgidWkvbm90aWZ5Iik7Cgp2YXIgX21sX2FwaV9zZXJ2aWNlID0gcmVxdWlyZSgiLi4vLi4vc2VydmljZXMvbWxfYXBpX3NlcnZpY2UiKTsKCnZhciBfdXJsX3N0YXRlID0gcmVxdWlyZSgiLi4vLi4vdXRpbC91cmxfc3RhdGUiKTsKCnZhciBfam9iX3NlbGVjdG9yX3RhYmxlID0gcmVxdWlyZSgiLi9qb2Jfc2VsZWN0b3JfdGFibGUiKTsKCnZhciBfaWRfYmFkZ2VzID0gcmVxdWlyZSgiLi9pZF9iYWRnZXMiKTsKCnZhciBfbmV3X3NlbGVjdGlvbl9pZF9iYWRnZXMgPSByZXF1aXJlKCIuL25ld19zZWxlY3Rpb25faWRfYmFkZ2VzIik7Cgp2YXIgX2pvYl9zZWxlY3Rfc2VydmljZV91dGlscyA9IHJlcXVpcmUoIi4vam9iX3NlbGVjdF9zZXJ2aWNlX3V0aWxzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIG1lcmdlU2VsZWN0aW9uKGpvYklkcywgZ3JvdXBPYmpzLCBzaW5nbGVTZWxlY3Rpb24pIHsKICBpZiAoc2luZ2xlU2VsZWN0aW9uKSB7CiAgICByZXR1cm4gam9iSWRzOwogIH0KCiAgdmFyIHNlbGVjdGVkSWRzID0gW107CiAgdmFyIGFscmVhZHlTZWxlY3RlZCA9IFtdOwogIGdyb3VwT2Jqcy5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCkgewogICAgc2VsZWN0ZWRJZHMucHVzaChncm91cC5ncm91cElkKTsKICAgIGFscmVhZHlTZWxlY3RlZC5wdXNoLmFwcGx5KGFscmVhZHlTZWxlY3RlZCwgX3RvQ29uc3VtYWJsZUFycmF5KGdyb3VwLmpvYklkcykpOwogIH0pOwogIGpvYklkcy5mb3JFYWNoKGZ1bmN0aW9uIChqb2JJZCkgewogICAgLy8gQWRkIGpvYklkIGlmIG5vdCBhbHJlYWR5IGluY2x1ZGVkIGluIGdyb3VwIHNlbGVjdGlvbgogICAgaWYgKGFscmVhZHlTZWxlY3RlZC5pbmNsdWRlcyhqb2JJZCkgPT09IGZhbHNlKSB7CiAgICAgIHNlbGVjdGVkSWRzLnB1c2goam9iSWQpOwogICAgfQogIH0pOwogIHJldHVybiBzZWxlY3RlZElkczsKfQoKZnVuY3Rpb24gZ2V0SW5pdGlhbEdyb3Vwc01hcChzZWxlY3RlZEdyb3VwcykgewogIHZhciBtYXAgPSB7fTsKCiAgaWYgKHNlbGVjdGVkR3JvdXBzLmxlbmd0aCkgewogICAgc2VsZWN0ZWRHcm91cHMuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgbWFwW2dyb3VwLmdyb3VwSWRdID0gZ3JvdXAuam9iSWRzOwogICAgfSk7CiAgfQoKICByZXR1cm4gbWFwOwp9Cgp2YXIgQkFER0VfTElNSVQgPSAxMDsKdmFyIERFRkFVTFRfR0FOVFRfQkFSX1dJRFRIID0gMjk5OyAvLyBwaXhlbHMKCmZ1bmN0aW9uIEpvYlNlbGVjdG9yKF9yZWYpIHsKICB2YXIgX3JlZjIsIF9nbG9iYWxTdGF0ZSRtbCwgX3JlZjMsIF9nbG9iYWxTdGF0ZSRtbDI7CgogIHZhciBkYXRlRm9ybWF0VHogPSBfcmVmLmRhdGVGb3JtYXRUeiwKICAgICAgc2luZ2xlU2VsZWN0aW9uID0gX3JlZi5zaW5nbGVTZWxlY3Rpb24sCiAgICAgIHRpbWVzZXJpZXNPbmx5ID0gX3JlZi50aW1lc2VyaWVzT25seTsKCiAgdmFyIF91c2VVcmxTdGF0ZSA9ICgwLCBfdXJsX3N0YXRlLnVzZVVybFN0YXRlKSgnX2cnKSwKICAgICAgX3VzZVVybFN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VVcmxTdGF0ZSwgMiksCiAgICAgIGdsb2JhbFN0YXRlID0gX3VzZVVybFN0YXRlMlswXSwKICAgICAgc2V0R2xvYmFsU3RhdGUgPSBfdXNlVXJsU3RhdGUyWzFdOwoKICB2YXIgc2VsZWN0ZWRKb2JJZHMgPSAoX3JlZjIgPSBnbG9iYWxTdGF0ZSA9PT0gbnVsbCB8fCBnbG9iYWxTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9nbG9iYWxTdGF0ZSRtbCA9IGdsb2JhbFN0YXRlLm1sKSA9PT0gbnVsbCB8fCBfZ2xvYmFsU3RhdGUkbWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nbG9iYWxTdGF0ZSRtbC5qb2JJZHMpICE9PSBudWxsICYmIF9yZWYyICE9PSB2b2lkIDAgPyBfcmVmMiA6IFtdOwogIHZhciBzZWxlY3RlZEdyb3VwcyA9IChfcmVmMyA9IGdsb2JhbFN0YXRlID09PSBudWxsIHx8IGdsb2JhbFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2dsb2JhbFN0YXRlJG1sMiA9IGdsb2JhbFN0YXRlLm1sKSA9PT0gbnVsbCB8fCBfZ2xvYmFsU3RhdGUkbWwyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2xvYmFsU3RhdGUkbWwyLmdyb3VwcykgIT09IG51bGwgJiYgX3JlZjMgIT09IHZvaWQgMCA/IF9yZWYzIDogW107CgogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShbXSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBqb2JzID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0Sm9icyA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoW10pLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIGdyb3VwcyA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldEdyb3VwcyA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBfdXNlU3RhdGU1ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoewogICAgZ3JvdXBzTWFwOiBnZXRJbml0aWFsR3JvdXBzTWFwKHNlbGVjdGVkR3JvdXBzKSwKICAgIGpvYnNNYXA6IHt9CiAgfSksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgbWFwcyA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldE1hcHMgPSBfdXNlU3RhdGU2WzFdOwoKICB2YXIgX3VzZVN0YXRlNyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKG1lcmdlU2VsZWN0aW9uKHNlbGVjdGVkSm9iSWRzLCBzZWxlY3RlZEdyb3Vwcywgc2luZ2xlU2VsZWN0aW9uKSksCiAgICAgIF91c2VTdGF0ZTggPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU3LCAyKSwKICAgICAgc2VsZWN0ZWRJZHMgPSBfdXNlU3RhdGU4WzBdLAogICAgICBzZXRTZWxlY3RlZElkcyA9IF91c2VTdGF0ZThbMV07CgogIHZhciBfdXNlU3RhdGU5ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkobWVyZ2VTZWxlY3Rpb24oc2VsZWN0ZWRKb2JJZHMsIHNlbGVjdGVkR3JvdXBzLCBzaW5nbGVTZWxlY3Rpb24pKSwKICAgICAgX3VzZVN0YXRlMTAgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU5LCAyKSwKICAgICAgbmV3U2VsZWN0aW9uID0gX3VzZVN0YXRlMTBbMF0sCiAgICAgIHNldE5ld1NlbGVjdGlvbiA9IF91c2VTdGF0ZTEwWzFdOwoKICB2YXIgX3VzZVN0YXRlMTEgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTEyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTEsIDIpLAogICAgICBzaG93QWxsQmFkZ2VzID0gX3VzZVN0YXRlMTJbMF0sCiAgICAgIHNldFNob3dBbGxCYWRnZXMgPSBfdXNlU3RhdGUxMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTEzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLAogICAgICBfdXNlU3RhdGUxNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTEzLCAyKSwKICAgICAgc2hvd0FsbEJhckJhZGdlcyA9IF91c2VTdGF0ZTE0WzBdLAogICAgICBzZXRTaG93QWxsQmFyQmFkZ2VzID0gX3VzZVN0YXRlMTRbMV07CgogIHZhciBfdXNlU3RhdGUxNSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHRydWUpLAogICAgICBfdXNlU3RhdGUxNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTE1LCAyKSwKICAgICAgYXBwbHlUaW1lUmFuZ2UgPSBfdXNlU3RhdGUxNlswXSwKICAgICAgc2V0QXBwbHlUaW1lUmFuZ2UgPSBfdXNlU3RhdGUxNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTE3ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLAogICAgICBfdXNlU3RhdGUxOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTE3LCAyKSwKICAgICAgaXNGbHlvdXRWaXNpYmxlID0gX3VzZVN0YXRlMThbMF0sCiAgICAgIHNldElzRmx5b3V0VmlzaWJsZSA9IF91c2VTdGF0ZTE4WzFdOwoKICB2YXIgX3VzZVN0YXRlMTkgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShERUZBVUxUX0dBTlRUX0JBUl9XSURUSCksCiAgICAgIF91c2VTdGF0ZTIwID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTksIDIpLAogICAgICBnYW50dEJhcldpZHRoID0gX3VzZVN0YXRlMjBbMF0sCiAgICAgIHNldEdhbnR0QmFyV2lkdGggPSBfdXNlU3RhdGUyMFsxXTsKCiAgdmFyIGZseW91dEVsID0gKDAsIF9yZWFjdC51c2VSZWYpKG51bGwpOyAvLyBFbnN1cmUgSm9iU2VsZWN0aW9uQmFyIGdldHMgdXBkYXRlZCB3aGVuIHNlbGVjdGlvbiB2aWEgZ2xvYmFsU3RhdGUgY2hhbmdlcy4KCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIHNldFNlbGVjdGVkSWRzKG1lcmdlU2VsZWN0aW9uKHNlbGVjdGVkSm9iSWRzLCBzZWxlY3RlZEdyb3Vwcywgc2luZ2xlU2VsZWN0aW9uKSk7CiAgfSwgW0pTT04uc3RyaW5naWZ5KFtzZWxlY3RlZEpvYklkcywgc2VsZWN0ZWRHcm91cHNdKV0pOyAvLyBFbnN1cmUgY3VycmVudCBzZWxlY3RlZCBpZHMgYWx3YXlzIHNob3cgdXAgaW4gZmx5b3V0CgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBzZXROZXdTZWxlY3Rpb24oc2VsZWN0ZWRJZHMpOwogIH0sIFtpc0ZseW91dFZpc2libGVdKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQogIC8vIFdyYXAgaGFuZGxlUmVzaXplIGluIHVzZUNhbGxiYWNrIGFzIGl0IGlzIGEgZGVwZW5kZW5jeSBmb3IgdXNlRWZmZWN0IG9uIGxpbmUgMTMxIGJlbG93LgogIC8vIE5vdCB3cmFwcGluZyBpdCB3b3VsZCBjYXVzZSB0aGlzIGRlcGVuZGVuY3kgdG8gY2hhbmdlIG9uIGV2ZXJ5IHJlbmRlcgoKICB2YXIgaGFuZGxlUmVzaXplID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKCkgewogICAgaWYgKGpvYnMubGVuZ3RoID4gMCAmJiBmbHlvdXRFbCAmJiBmbHlvdXRFbC5jdXJyZW50ICYmIGZseW91dEVsLmN1cnJlbnQuZmx5b3V0KSB7CiAgICAgIC8vIGdldCBhbGwgY29scyBpbiBmbHlvdXQgdGFibGUKICAgICAgdmFyIHRhYmxlSGVhZGVyQ29scyA9IGZseW91dEVsLmN1cnJlbnQuZmx5b3V0LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlIHRoZWFkIHRoJyk7IC8vIGdldCB0aGUgd2lkdGggb2YgdGhlIGxhc3QgY29sCgogICAgICB2YXIgZGVyaXZlZFdpZHRoID0gdGFibGVIZWFkZXJDb2xzW3RhYmxlSGVhZGVyQ29scy5sZW5ndGggLSAxXS5vZmZzZXRXaWR0aCAtIDE2OwogICAgICB2YXIgbm9ybWFsaXplZEpvYnMgPSAoMCwgX2pvYl9zZWxlY3Rfc2VydmljZV91dGlscy5ub3JtYWxpemVUaW1lcykoam9icywgZGF0ZUZvcm1hdFR6LCBkZXJpdmVkV2lkdGgpOwogICAgICBzZXRKb2JzKG5vcm1hbGl6ZWRKb2JzKTsKCiAgICAgIHZhciBfZ2V0R3JvdXBzRnJvbUpvYnMgPSAoMCwgX2pvYl9zZWxlY3Rfc2VydmljZV91dGlscy5nZXRHcm91cHNGcm9tSm9icykobm9ybWFsaXplZEpvYnMpLAogICAgICAgICAgdXBkYXRlZEdyb3VwcyA9IF9nZXRHcm91cHNGcm9tSm9icy5ncm91cHM7CgogICAgICBzZXRHcm91cHModXBkYXRlZEdyb3Vwcyk7CiAgICAgIHNldEdhbnR0QmFyV2lkdGgoZGVyaXZlZFdpZHRoKTsKICAgIH0KICB9LCBbZGF0ZUZvcm1hdFR6LCBqb2JzXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIC8vIEVuc3VyZSBnYW50dEJhciB3aWR0aCBnZXRzIGNhbGN1bGF0ZWQgb24gcmVzaXplCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlUmVzaXplKTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBoYW5kbGVSZXNpemUpOwogICAgfTsKICB9LCBbaGFuZGxlUmVzaXplXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGhhbmRsZVJlc2l6ZSgpOwogIH0sIFtoYW5kbGVSZXNpemUsIGpvYnNdKTsKCiAgZnVuY3Rpb24gY2xvc2VGbHlvdXQoKSB7CiAgICBzZXRJc0ZseW91dFZpc2libGUoZmFsc2UpOwogIH0KCiAgZnVuY3Rpb24gc2hvd0ZseW91dCgpIHsKICAgIHNldElzRmx5b3V0VmlzaWJsZSh0cnVlKTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZUpvYlNlbGVjdGlvbkNsaWNrKCkgewogICAgc2hvd0ZseW91dCgpOwoKICAgIF9tbF9hcGlfc2VydmljZS5tbC5qb2JzLmpvYnNXaXRoVGltZXJhbmdlKGRhdGVGb3JtYXRUeikudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICB2YXIgbm9ybWFsaXplZEpvYnMgPSAoMCwgX2pvYl9zZWxlY3Rfc2VydmljZV91dGlscy5ub3JtYWxpemVUaW1lcykocmVzcC5qb2JzLCBkYXRlRm9ybWF0VHosIERFRkFVTFRfR0FOVFRfQkFSX1dJRFRIKTsKCiAgICAgIHZhciBfZ2V0R3JvdXBzRnJvbUpvYnMyID0gKDAsIF9qb2Jfc2VsZWN0X3NlcnZpY2VfdXRpbHMuZ2V0R3JvdXBzRnJvbUpvYnMpKG5vcm1hbGl6ZWRKb2JzKSwKICAgICAgICAgIGdyb3Vwc1dpdGhUaW1lcmFuZ2UgPSBfZ2V0R3JvdXBzRnJvbUpvYnMyLmdyb3VwcywKICAgICAgICAgIGdyb3Vwc01hcCA9IF9nZXRHcm91cHNGcm9tSm9iczIuZ3JvdXBzTWFwOwoKICAgICAgc2V0Sm9icyhub3JtYWxpemVkSm9icyk7CiAgICAgIHNldEdyb3Vwcyhncm91cHNXaXRoVGltZXJhbmdlKTsKICAgICAgc2V0TWFwcyh7CiAgICAgICAgZ3JvdXBzTWFwOiBncm91cHNNYXAsCiAgICAgICAgam9ic01hcDogcmVzcC5qb2JzTWFwCiAgICAgIH0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBqb2JzIHdpdGggdGltZSByYW5nZScsIGVycik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcih7CiAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5qb2JTZWxlY3Rvci5qb2JGZXRjaEVycm9yTWVzc2FnZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQW4gZXJyb3Igb2NjdXJyZWQgZmV0Y2hpbmcgam9icy4gUmVmcmVzaCBhbmQgdHJ5IGFnYWluLicKICAgICAgICB9KQogICAgICB9KTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlTmV3U2VsZWN0aW9uKF9yZWY0KSB7CiAgICB2YXIgc2VsZWN0aW9uRnJvbVRhYmxlID0gX3JlZjQuc2VsZWN0aW9uRnJvbVRhYmxlOwogICAgc2V0TmV3U2VsZWN0aW9uKHNlbGVjdGlvbkZyb21UYWJsZSk7CiAgfQoKICBmdW5jdGlvbiBhcHBseVNlbGVjdGlvbigpIHsKICAgIC8vIGFsbE5ld1NlbGVjdGlvbiB3aWxsIGJlIGEgbGlzdCBvZiBhbGwgam9iIGlkcyAoaW5jbHVkaW5nIHRob3NlIGZyb20gZ3JvdXBzKSBzZWxlY3RlZCBmcm9tIHRoZSB0YWJsZQogICAgdmFyIGFsbE5ld1NlbGVjdGlvbiA9IFtdOwogICAgdmFyIGdyb3VwU2VsZWN0aW9uID0gW107CiAgICBuZXdTZWxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAoaWQpIHsKICAgICAgaWYgKG1hcHMuZ3JvdXBzTWFwW2lkXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy8gUHVzaCBhbGwgam9icyBmcm9tIHNlbGVjdGVkIGdyb3VwcyBpbnRvIHRoZSBuZXdTZWxlY3Rpb24gbGlzdAogICAgICAgIGFsbE5ld1NlbGVjdGlvbi5wdXNoLmFwcGx5KGFsbE5ld1NlbGVjdGlvbiwgX3RvQ29uc3VtYWJsZUFycmF5KG1hcHMuZ3JvdXBzTWFwW2lkXSkpOyAvLyBpZiBpdCdzIGEgZ3JvdXAgLSBwdXNoIGdyb3VwIG9iaiB0byBzZXQgaW4gZ2xvYmFsIHN0YXRlCgogICAgICAgIGdyb3VwU2VsZWN0aW9uLnB1c2goewogICAgICAgICAgZ3JvdXBJZDogaWQsCiAgICAgICAgICBqb2JJZHM6IG1hcHMuZ3JvdXBzTWFwW2lkXQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGFsbE5ld1NlbGVjdGlvbi5wdXNoKGlkKTsKICAgICAgfQogICAgfSk7IC8vIGNyZWF0ZSBhIFNldCB0byByZW1vdmUgZHVwbGljYXRlIHZhbHVlcwoKICAgIHZhciBhbGxOZXdTZWxlY3Rpb25VbmlxdWUgPSBBcnJheS5mcm9tKG5ldyBTZXQoYWxsTmV3U2VsZWN0aW9uKSk7CiAgICBzZXRTZWxlY3RlZElkcyhuZXdTZWxlY3Rpb24pOwogICAgc2V0TmV3U2VsZWN0aW9uKFtdKTsKICAgIGNsb3NlRmx5b3V0KCk7CiAgICB2YXIgdGltZSA9IGFwcGx5VGltZVJhbmdlID8gKDAsIF9qb2Jfc2VsZWN0X3NlcnZpY2VfdXRpbHMuZ2V0VGltZVJhbmdlRnJvbVNlbGVjdGlvbikoam9icywgYWxsTmV3U2VsZWN0aW9uVW5pcXVlKSA6IHVuZGVmaW5lZDsKICAgIHNldEdsb2JhbFN0YXRlKF9vYmplY3RTcHJlYWQoewogICAgICBtbDogewogICAgICAgIGpvYklkczogYWxsTmV3U2VsZWN0aW9uVW5pcXVlLAogICAgICAgIGdyb3VwczogZ3JvdXBTZWxlY3Rpb24KICAgICAgfQogICAgfSwgdGltZSAhPT0gdW5kZWZpbmVkID8gewogICAgICB0aW1lOiB0aW1lCiAgICB9IDoge30pKTsKICB9CgogIGZ1bmN0aW9uIHRvZ2dsZVRpbWVyYW5nZVN3aXRjaCgpIHsKICAgIHNldEFwcGx5VGltZVJhbmdlKCFhcHBseVRpbWVSYW5nZSk7CiAgfQoKICBmdW5jdGlvbiByZW1vdmVJZChpZCkgewogICAgc2V0TmV3U2VsZWN0aW9uKG5ld1NlbGVjdGlvbi5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW0gIT09IGlkOwogICAgfSkpOwogIH0KCiAgZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb24oKSB7CiAgICBzZXROZXdTZWxlY3Rpb24oW10pOwogIH0KCiAgZnVuY3Rpb24gcmVuZGVySm9iU2VsZWN0aW9uQmFyKCkgewogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgICAgcmVzcG9uc2l2ZTogZmFsc2UsCiAgICAgIGd1dHRlclNpemU6ICJ4cyIsCiAgICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgZ3JvdzogZmFsc2UKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgICAgd3JhcDogdHJ1ZSwKICAgICAgcmVzcG9uc2l2ZTogZmFsc2UsCiAgICAgIGd1dHRlclNpemU6ICJ4cyIsCiAgICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiLAogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAibWxKb2JTZWxlY3Rpb25CYWRnZXMiCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9pZF9iYWRnZXMuSWRCYWRnZXMsIHsKICAgICAgbGltaXQ6IEJBREdFX0xJTUlULAogICAgICBtYXBzOiBtYXBzLAogICAgICBvbkxpbmtDbGljazogZnVuY3Rpb24gb25MaW5rQ2xpY2soKSB7CiAgICAgICAgcmV0dXJuIHNldFNob3dBbGxCYXJCYWRnZXMoIXNob3dBbGxCYXJCYWRnZXMpOwogICAgICB9LAogICAgICBzZWxlY3RlZElkczogc2VsZWN0ZWRJZHMsCiAgICAgIHNob3dBbGxCYXJCYWRnZXM6IHNob3dBbGxCYXJCYWRnZXMKICAgIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICBncm93OiBmYWxzZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkVtcHR5LCB7CiAgICAgIHNpemU6ICJ4cyIsCiAgICAgIGljb25UeXBlOiAicGVuY2lsIiwKICAgICAgb25DbGljazogaGFuZGxlSm9iU2VsZWN0aW9uQ2xpY2ssCiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJtbEJ1dHRvbkVkaXRKb2JTZWxlY3Rpb24iCiAgICB9LCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwuam9iU2VsZWN0b3Iuam9iU2VsZWN0aW9uQnV0dG9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0VkaXQgam9iIHNlbGVjdGlvbicKICAgIH0pKSkpOwogIH0KCiAgZnVuY3Rpb24gcmVuZGVyRmx5b3V0KCkgewogICAgaWYgKGlzRmx5b3V0VmlzaWJsZSkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZseW91dCAvLyBAdHMtaWdub3JlCiAgICAgICwgewogICAgICAgIHJlZjogZmx5b3V0RWwsCiAgICAgICAgb25DbG9zZTogY2xvc2VGbHlvdXQsCiAgICAgICAgImFyaWEtbGFiZWxsZWRieSI6ICJqb2JTZWxlY3RvckZseW91dCIsCiAgICAgICAgc2l6ZTogImwiLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJtbEZseW91dEpvYlNlbGVjdG9yIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmx5b3V0SGVhZGVyLCB7CiAgICAgICAgaGFzQm9yZGVyOiB0cnVlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUaXRsZSwgewogICAgICAgIHNpemU6ICJtIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoMiIsIHsKICAgICAgICBpZDogImZseW91dFRpdGxlIgogICAgICB9LCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwuam9iU2VsZWN0b3IuZmx5b3V0VGl0bGUnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdKb2Igc2VsZWN0aW9uJwogICAgICB9KSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZseW91dEJvZHksIHsKICAgICAgICBjbGFzc05hbWU6ICJtbEpvYlNlbGVjdG9yRmx5b3V0Qm9keSIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICAgIGRpcmVjdGlvbjogImNvbHVtbiIsCiAgICAgICAgcmVzcG9uc2l2ZTogZmFsc2UKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogZmFsc2UKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICAgIHdyYXA6IHRydWUsCiAgICAgICAgcmVzcG9uc2l2ZTogZmFsc2UsCiAgICAgICAgZ3V0dGVyU2l6ZTogInhzIiwKICAgICAgICBhbGlnbkl0ZW1zOiAiY2VudGVyIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9uZXdfc2VsZWN0aW9uX2lkX2JhZGdlcy5OZXdTZWxlY3Rpb25JZEJhZGdlcywgewogICAgICAgIGxpbWl0OiBCQURHRV9MSU1JVCwKICAgICAgICBtYXBzOiBtYXBzLAogICAgICAgIG5ld1NlbGVjdGlvbjogbmV3U2VsZWN0aW9uLAogICAgICAgIG9uRGVsZXRlQ2xpY2s6IHJlbW92ZUlkLAogICAgICAgIG9uTGlua0NsaWNrOiBmdW5jdGlvbiBvbkxpbmtDbGljaygpIHsKICAgICAgICAgIHJldHVybiBzZXRTaG93QWxsQmFkZ2VzKCFzaG93QWxsQmFkZ2VzKTsKICAgICAgICB9LAogICAgICAgIHNob3dBbGxCYWRnZXM6IHNob3dBbGxCYWRnZXMKICAgICAgfSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogZmFsc2UKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICAgIGRpcmVjdGlvbjogInJvdyIsCiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICJzcGFjZUJldHdlZW4iLAogICAgICAgIHJlc3BvbnNpdmU6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sICFzaW5nbGVTZWxlY3Rpb24gJiYgbmV3U2VsZWN0aW9uLmxlbmd0aCA+IDAgJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkVtcHR5LCB7CiAgICAgICAgb25DbGljazogY2xlYXJTZWxlY3Rpb24sCiAgICAgICAgc2l6ZTogInhzIiwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAibWxGbHlvdXRKb2JTZWxlY3RvckJ1dHRvbkNsZWFyU2VsZWN0aW9uIgogICAgICB9LCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwuam9iU2VsZWN0b3IuY2xlYXJBbGxGbHlvdXRCdXR0b24nLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDbGVhciBhbGwnCiAgICAgIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTd2l0Y2gsIHsKICAgICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLmpvYlNlbGVjdG9yLmFwcGx5VGltZXJhbmdlU3dpdGNoTGFiZWwnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0FwcGx5IHRpbWVyYW5nZScKICAgICAgICB9KSwKICAgICAgICBjaGVja2VkOiBhcHBseVRpbWVSYW5nZSwKICAgICAgICBvbkNoYW5nZTogdG9nZ2xlVGltZXJhbmdlU3dpdGNoLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJtbEZseW91dEpvYlNlbGVjdG9yU3dpdGNoQXBwbHlUaW1lUmFuZ2UiCiAgICAgIH0pKSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfam9iX3NlbGVjdG9yX3RhYmxlLkpvYlNlbGVjdG9yVGFibGUsIHsKICAgICAgICBqb2JzOiBqb2JzLAogICAgICAgIGdhbnR0QmFyV2lkdGg6IGdhbnR0QmFyV2lkdGgsCiAgICAgICAgZ3JvdXBzTGlzdDogZ3JvdXBzLAogICAgICAgIG9uU2VsZWN0aW9uOiBoYW5kbGVOZXdTZWxlY3Rpb24sCiAgICAgICAgc2VsZWN0ZWRJZHM6IG5ld1NlbGVjdGlvbiwKICAgICAgICBzaW5nbGVTZWxlY3Rpb246IHNpbmdsZVNlbGVjdGlvbiwKICAgICAgICB0aW1lc2VyaWVzT25seTogdGltZXNlcmllc09ubHkKICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmx5b3V0Rm9vdGVyLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uLCB7CiAgICAgICAgb25DbGljazogYXBwbHlTZWxlY3Rpb24sCiAgICAgICAgZmlsbDogdHJ1ZSwKICAgICAgICBpc0Rpc2FibGVkOiBuZXdTZWxlY3Rpb24ubGVuZ3RoID09PSAwLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJtbEZseW91dEpvYlNlbGVjdG9yQnV0dG9uQXBwbHkiCiAgICAgIH0sIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5qb2JTZWxlY3Rvci5hcHBseUZseW91dEJ1dHRvbicsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0FwcGx5JwogICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uRW1wdHksIHsKICAgICAgICBpY29uVHlwZTogImNyb3NzIiwKICAgICAgICBvbkNsaWNrOiBjbG9zZUZseW91dCwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAibWxGbHlvdXRKb2JTZWxlY3RvckJ1dHRvbkNsb3NlIgogICAgICB9LCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwuam9iU2VsZWN0b3IuY2xvc2VGbHlvdXRCdXR0b24nLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDbG9zZScKICAgICAgfSkpKSkpKTsKICAgIH0KICB9CgogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6ICJtbEpvYlNlbGVjdG9yQmFyIgogIH0sIHNlbGVjdGVkSWRzLmxlbmd0aCA+IDAgJiYgcmVuZGVySm9iU2VsZWN0aW9uQmFyKCksIHJlbmRlckZseW91dCgpKTsKfQoKSm9iU2VsZWN0b3IucHJvcFR5cGVzID0gewogIHNlbGVjdGVkSm9iSWRzOiBfcHJvcFR5cGVzLmRlZmF1bHQuYXJyYXksCiAgc2luZ2xlU2VsZWN0aW9uOiBfcHJvcFR5cGVzLmRlZmF1bHQuYm9vbCwKICB0aW1lc2VyaWVzT25seTogX3Byb3BUeXBlcy5kZWZhdWx0LmJvb2wKfTs="},null]}