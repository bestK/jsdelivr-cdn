{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/upgrade_assistant/public/np_ready/application/components/tabs/checkup/deprecations/reindex/button.js","dependencies":[{"path":"x-pack/legacy/plugins/upgrade_assistant/public/np_ready/application/components/tabs/checkup/deprecations/reindex/button.js","mtime":1585205048659},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuUmVpbmRleEJ1dHRvbiA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfdHlwZXMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9jb21tb24vdHlwZXMiKTsKCnZhciBfdHlwZXMyID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vdHlwZXMiKTsKCnZhciBfZmx5b3V0ID0gcmVxdWlyZSgiLi9mbHlvdXQiKTsKCnZhciBfcG9sbGluZ19zZXJ2aWNlID0gcmVxdWlyZSgiLi9wb2xsaW5nX3NlcnZpY2UiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Ci8qKgogKiBEaXNwbGF5cyBhIGJ1dHRvbiB0aGF0IHdpbGwgZGlzcGxheSBhIGZseW91dCB3aGVuIGNsaWNrZWQgd2l0aCB0aGUgcmVpbmRleGluZyBzdGF0dXMgZm9yCiAqIHRoZSBnaXZlbiBgaW5kZXhOYW1lYC4KICovCgoKdmFyIFJlaW5kZXhCdXR0b24gPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKFJlaW5kZXhCdXR0b24sIF9SZWFjdCRDb21wb25lbnQpOwoKICBmdW5jdGlvbiBSZWluZGV4QnV0dG9uKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlaW5kZXhCdXR0b24pOwoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFJlaW5kZXhCdXR0b24pLmNhbGwodGhpcywgcHJvcHMpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzZXJ2aWNlIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzdWJzY3JpcHRpb24iLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInN0YXJ0UmVpbmRleCIsIGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCFfdGhpcy5zdGF0ZS5yZWluZGV4U3RhdGUuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAvLyBpZiBzdGF0dXMgZGlkbid0IGV4aXN0IHdlIGFyZSBzdGFydGluZyBhIHJlaW5kZXggYWN0aW9uCiAgICAgICAgICAgICAgICBfdGhpcy5zZW5kVUlSZWluZGV4VGVsZW1ldHJ5SW5mbygnc3RhcnQnKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX3RoaXMuc2VydmljZS5zdGFydFJlaW5kZXgoKSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY2FuY2VsUmVpbmRleCIsIGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcy5zZW5kVUlSZWluZGV4VGVsZW1ldHJ5SW5mbygnc3RvcCcpOwoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfdGhpcy5zZXJ2aWNlLmNhbmNlbFJlaW5kZXgoKSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNob3dGbHlvdXQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNlbmRVSVJlaW5kZXhUZWxlbWV0cnlJbmZvKCdvcGVuJyk7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZmx5b3V0VmlzaWJsZTogdHJ1ZQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNsb3NlRmx5b3V0IiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZW5kVUlSZWluZGV4VGVsZW1ldHJ5SW5mbygnY2xvc2UnKTsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBmbHlvdXRWaXNpYmxlOiBmYWxzZQogICAgICB9KTsKICAgIH0pOwoKICAgIF90aGlzLnNlcnZpY2UgPSBfdGhpcy5uZXdTZXJ2aWNlKCk7CiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgZmx5b3V0VmlzaWJsZTogZmFsc2UsCiAgICAgIHJlaW5kZXhTdGF0ZTogX3RoaXMuc2VydmljZS5zdGF0dXMkLnZhbHVlCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFJlaW5kZXhCdXR0b24sIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlVG9VcGRhdGVzKCk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnRXaWxsVW5tb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVUb1VwZGF0ZXMoKTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudERpZFVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykgewogICAgICBpZiAocHJldlByb3BzLmluZGV4TmFtZSAhPT0gdGhpcy5wcm9wcy5pbmRleE5hbWUpIHsKICAgICAgICB0aGlzLnVuc3Vic2NyaWJlVG9VcGRhdGVzKCk7CiAgICAgICAgdGhpcy5zZXJ2aWNlID0gdGhpcy5uZXdTZXJ2aWNlKCk7CiAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1VwZGF0ZXMoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgaW5kZXhOYW1lID0gdGhpcy5wcm9wcy5pbmRleE5hbWU7CiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IHRoaXMuc3RhdGUsCiAgICAgICAgICBmbHlvdXRWaXNpYmxlID0gX3RoaXMkc3RhdGUuZmx5b3V0VmlzaWJsZSwKICAgICAgICAgIHJlaW5kZXhTdGF0ZSA9IF90aGlzJHN0YXRlLnJlaW5kZXhTdGF0ZTsKICAgICAgdmFyIGJ1dHRvblByb3BzID0gewogICAgICAgIHNpemU6ICdzJywKICAgICAgICBvbkNsaWNrOiB0aGlzLnNob3dGbHlvdXQKICAgICAgfTsKCiAgICAgIHZhciBidXR0b25Db250ZW50ID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnVwZ3JhZGVBc3Npc3RhbnQuY2hlY2t1cFRhYi5yZWluZGV4aW5nLnJlaW5kZXhCdXR0b24ucmVpbmRleExhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlJlaW5kZXgiCiAgICAgIH0pOwoKICAgICAgaWYgKHJlaW5kZXhTdGF0ZS5sb2FkaW5nU3RhdGUgPT09IF90eXBlczIuTG9hZGluZ1N0YXRlLkxvYWRpbmcpIHsKICAgICAgICBidXR0b25Qcm9wcy5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgYnV0dG9uQ29udGVudCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLnVwZ3JhZGVBc3Npc3RhbnQuY2hlY2t1cFRhYi5yZWluZGV4aW5nLnJlaW5kZXhCdXR0b24ubG9hZGluZ0xhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTG9hZGluZ1x1MjAyNiIKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzd2l0Y2ggKHJlaW5kZXhTdGF0ZS5zdGF0dXMpIHsKICAgICAgICAgIGNhc2UgX3R5cGVzLlJlaW5kZXhTdGF0dXMuaW5Qcm9ncmVzczoKICAgICAgICAgICAgYnV0dG9uQ29udGVudCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTG9hZGluZ1NwaW5uZXIsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICJ1cGdSZWluZGV4QnV0dG9uX19zcGlubmVyIiwKICAgICAgICAgICAgICBzaXplOiAibSIKICAgICAgICAgICAgfSksICIgUmVpbmRleGluZ1x1MjAyNiIpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIF90eXBlcy5SZWluZGV4U3RhdHVzLmNvbXBsZXRlZDoKICAgICAgICAgICAgYnV0dG9uUHJvcHMuY29sb3IgPSAnc2Vjb25kYXJ5JzsKICAgICAgICAgICAgYnV0dG9uUHJvcHMuaWNvblNpZGUgPSAnbGVmdCc7CiAgICAgICAgICAgIGJ1dHRvblByb3BzLmljb25UeXBlID0gJ2NoZWNrJzsKICAgICAgICAgICAgYnV0dG9uQ29udGVudCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgaWQ6ICJ4cGFjay51cGdyYWRlQXNzaXN0YW50LmNoZWNrdXBUYWIucmVpbmRleGluZy5yZWluZGV4QnV0dG9uLmRvbmVMYWJlbCIsCiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJEb25lIgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSBfdHlwZXMuUmVpbmRleFN0YXR1cy5mYWlsZWQ6CiAgICAgICAgICAgIGJ1dHRvblByb3BzLmNvbG9yID0gJ2Rhbmdlcic7CiAgICAgICAgICAgIGJ1dHRvblByb3BzLmljb25TaWRlID0gJ2xlZnQnOwogICAgICAgICAgICBidXR0b25Qcm9wcy5pY29uVHlwZSA9ICdjcm9zcyc7CiAgICAgICAgICAgIGJ1dHRvbkNvbnRlbnQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgIGlkOiAieHBhY2sudXBncmFkZUFzc2lzdGFudC5jaGVja3VwVGFiLnJlaW5kZXhpbmcucmVpbmRleEJ1dHRvbi5mYWlsZWRMYWJlbCIsCiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJGYWlsZWQiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIF90eXBlcy5SZWluZGV4U3RhdHVzLnBhdXNlZDoKICAgICAgICAgICAgYnV0dG9uUHJvcHMuY29sb3IgPSAnd2FybmluZyc7CiAgICAgICAgICAgIGJ1dHRvblByb3BzLmljb25TaWRlID0gJ2xlZnQnOwogICAgICAgICAgICBidXR0b25Qcm9wcy5pY29uVHlwZSA9ICdwYXVzZSc7CiAgICAgICAgICAgIGJ1dHRvbkNvbnRlbnQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgIGlkOiAieHBhY2sudXBncmFkZUFzc2lzdGFudC5jaGVja3VwVGFiLnJlaW5kZXhpbmcucmVpbmRleEJ1dHRvbi5wYXVzZWRMYWJlbCIsCiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJQYXVzZWQiCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgX3R5cGVzLlJlaW5kZXhTdGF0dXMuY2FuY2VsbGVkOgogICAgICAgICAgICBidXR0b25Qcm9wcy5jb2xvciA9ICdkYW5nZXInOwogICAgICAgICAgICBidXR0b25Qcm9wcy5pY29uU2lkZSA9ICdsZWZ0JzsKICAgICAgICAgICAgYnV0dG9uUHJvcHMuaWNvblR5cGUgPSAnY3Jvc3MnOwogICAgICAgICAgICBidXR0b25Db250ZW50ID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICBpZDogInhwYWNrLnVwZ3JhZGVBc3Npc3RhbnQuY2hlY2t1cFRhYi5yZWluZGV4aW5nLnJlaW5kZXhCdXR0b24uY2FuY2VsbGVkTGFiZWwiLAogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ2FuY2VsbGVkIgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIGJ1dHRvblByb3BzLCBidXR0b25Db250ZW50KSwgZmx5b3V0VmlzaWJsZSAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9mbHlvdXQuUmVpbmRleEZseW91dCwgewogICAgICAgIGh0dHA6IHRoaXMucHJvcHMuaHR0cCwKICAgICAgICBpbmRleE5hbWU6IGluZGV4TmFtZSwKICAgICAgICBjbG9zZUZseW91dDogdGhpcy5jbG9zZUZseW91dCwKICAgICAgICByZWluZGV4U3RhdGU6IHJlaW5kZXhTdGF0ZSwKICAgICAgICBzdGFydFJlaW5kZXg6IHRoaXMuc3RhcnRSZWluZGV4LAogICAgICAgIGNhbmNlbFJlaW5kZXg6IHRoaXMuY2FuY2VsUmVpbmRleAogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibmV3U2VydmljZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbmV3U2VydmljZSgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcywKICAgICAgICAgIGluZGV4TmFtZSA9IF90aGlzJHByb3BzLmluZGV4TmFtZSwKICAgICAgICAgIHhzcmYgPSBfdGhpcyRwcm9wcy54c3JmLAogICAgICAgICAgaHR0cCA9IF90aGlzJHByb3BzLmh0dHA7CiAgICAgIHJldHVybiBuZXcgX3BvbGxpbmdfc2VydmljZS5SZWluZGV4UG9sbGluZ1NlcnZpY2UoaW5kZXhOYW1lLCB4c3JmLCBodHRwKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdWJzY3JpYmVUb1VwZGF0ZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN1YnNjcmliZVRvVXBkYXRlcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnNlcnZpY2UudXBkYXRlU3RhdHVzKCk7CiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy5zZXJ2aWNlLnN0YXR1cyQuc3Vic2NyaWJlKGZ1bmN0aW9uIChyZWluZGV4U3RhdGUpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLnNldFN0YXRlKHsKICAgICAgICAgIHJlaW5kZXhTdGF0ZTogcmVpbmRleFN0YXRlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInVuc3Vic2NyaWJlVG9VcGRhdGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1bnN1YnNjcmliZVRvVXBkYXRlcygpIHsKICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICBkZWxldGUgdGhpcy5zdWJzY3JpcHRpb247CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlcnZpY2UpIHsKICAgICAgICB0aGlzLnNlcnZpY2Uuc3RvcFBvbGxpbmcoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNlbmRVSVJlaW5kZXhUZWxlbWV0cnlJbmZvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kVUlSZWluZGV4VGVsZW1ldHJ5SW5mbyh1aVJlaW5kZXhBY3Rpb24pIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzZW5kVUlSZWluZGV4VGVsZW1ldHJ5SW5mbyQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5wcm9wcy5odHRwLmZldGNoKCcvYXBpL3VwZ3JhZGVfYXNzaXN0YW50L3RlbGVtZXRyeS91aV9yZWluZGV4JywgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJywKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KCgwLCBfbG9kYXNoLnNldCkoe30sIHVpUmVpbmRleEFjdGlvbiwgdHJ1ZSkpCiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUmVpbmRleEJ1dHRvbjsKfShfcmVhY3QuZGVmYXVsdC5Db21wb25lbnQpOwoKZXhwb3J0cy5SZWluZGV4QnV0dG9uID0gUmVpbmRleEJ1dHRvbjs="},null]}