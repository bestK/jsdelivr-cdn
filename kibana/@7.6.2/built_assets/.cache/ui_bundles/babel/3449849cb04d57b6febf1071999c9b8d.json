{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/pages/detection_engine/rules/components/step_schedule_rule/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/pages/detection_engine/rules/components/step_schedule_rule/index.js","mtime":1585205047887},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlN0ZXBTY2hlZHVsZVJ1bGUgPSB2b2lkIDA7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9mcCA9IHJlcXVpcmUoImxvZGFzaC9mcCIpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9oZWxwZXJzID0gcmVxdWlyZSgiLi4vLi4vaGVscGVycyIpOwoKdmFyIF90eXBlcyA9IHJlcXVpcmUoIi4uLy4uL3R5cGVzIik7Cgp2YXIgX2Rlc2NyaXB0aW9uX3N0ZXAgPSByZXF1aXJlKCIuLi9kZXNjcmlwdGlvbl9zdGVwIik7Cgp2YXIgX3NjaGVkdWxlX2l0ZW1fZm9ybSA9IHJlcXVpcmUoIi4uL3NjaGVkdWxlX2l0ZW1fZm9ybSIpOwoKdmFyIF9zaGFyZWRfaW1wb3J0cyA9IHJlcXVpcmUoIi4uL3NoYXJlZF9pbXBvcnRzIik7Cgp2YXIgX3N0ZXBfY29udGVudF93cmFwcGVyID0gcmVxdWlyZSgiLi4vc3RlcF9jb250ZW50X3dyYXBwZXIiKTsKCnZhciBfc2NoZW1hID0gcmVxdWlyZSgiLi9zY2hlbWEiKTsKCnZhciBJMThuID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgiLi90cmFuc2xhdGlvbnMiKSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7CiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307CgogIHZhciB0YXJnZXQgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKTsKCiAgdmFyIGtleSwgaTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOwoKICAgIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGtleSA9IHNvdXJjZVN5bWJvbEtleXNbaV07CiAgICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7CiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7CiAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7CiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307CiAgdmFyIHRhcmdldCA9IHt9OwogIHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsKICB2YXIga2V5LCBpOwoKICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykgewogICAga2V5ID0gc291cmNlS2V5c1tpXTsKICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7CiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCnZhciBzdGVwU2NoZWR1bGVEZWZhdWx0VmFsdWUgPSB7CiAgZW5hYmxlZDogdHJ1ZSwKICBpbnRlcnZhbDogJzVtJywKICBpc05ldzogdHJ1ZSwKICBmcm9tOiAnMW0nCn07Cgp2YXIgU3RlcFNjaGVkdWxlUnVsZUNvbXBvbmVudCA9IGZ1bmN0aW9uIFN0ZXBTY2hlZHVsZVJ1bGVDb21wb25lbnQoX3JlZikgewogIHZhciBfcmVmJGFkZFBhZGRpbmcgPSBfcmVmLmFkZFBhZGRpbmcsCiAgICAgIGFkZFBhZGRpbmcgPSBfcmVmJGFkZFBhZGRpbmcgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRhZGRQYWRkaW5nLAogICAgICBkZWZhdWx0VmFsdWVzID0gX3JlZi5kZWZhdWx0VmFsdWVzLAogICAgICBfcmVmJGRlc2NyaXB0aW9uRGlyZWMgPSBfcmVmLmRlc2NyaXB0aW9uRGlyZWN0aW9uLAogICAgICBkZXNjcmlwdGlvbkRpcmVjdGlvbiA9IF9yZWYkZGVzY3JpcHRpb25EaXJlYyA9PT0gdm9pZCAwID8gJ3JvdycgOiBfcmVmJGRlc2NyaXB0aW9uRGlyZWMsCiAgICAgIGlzUmVhZE9ubHlWaWV3ID0gX3JlZi5pc1JlYWRPbmx5VmlldywKICAgICAgaXNMb2FkaW5nID0gX3JlZi5pc0xvYWRpbmcsCiAgICAgIF9yZWYkaXNVcGRhdGVWaWV3ID0gX3JlZi5pc1VwZGF0ZVZpZXcsCiAgICAgIGlzVXBkYXRlVmlldyA9IF9yZWYkaXNVcGRhdGVWaWV3ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkaXNVcGRhdGVWaWV3LAogICAgICBzZXRTdGVwRGF0YSA9IF9yZWYuc2V0U3RlcERhdGEsCiAgICAgIHNldEZvcm0gPSBfcmVmLnNldEZvcm07CgogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShzdGVwU2NoZWR1bGVEZWZhdWx0VmFsdWUpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgbXlTdGVwRGF0YSA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldE15U3RlcERhdGEgPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZUZvcm0gPSAoMCwgX3NoYXJlZF9pbXBvcnRzLnVzZUZvcm0pKHsKICAgIGRlZmF1bHRWYWx1ZTogbXlTdGVwRGF0YSwKICAgIG9wdGlvbnM6IHsKICAgICAgc3RyaXBFbXB0eUZpZWxkczogZmFsc2UKICAgIH0sCiAgICBzY2hlbWE6IF9zY2hlbWEuc2NoZW1hCiAgfSksCiAgICAgIGZvcm0gPSBfdXNlRm9ybS5mb3JtOwoKICB2YXIgb25TdWJtaXQgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiBfY2FsbGVlKGVuYWJsZWQpIHsKICAgIHZhciBfcmVmMiwgbmV3SXNWYWxpZCwgZGF0YTsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoIXNldFN0ZXBEYXRhKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNldFN0ZXBEYXRhKF90eXBlcy5SdWxlU3RlcC5zY2hlZHVsZVJ1bGUsIG51bGwsIGZhbHNlKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoZm9ybS5zdWJtaXQoKSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBfcmVmMiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIG5ld0lzVmFsaWQgPSBfcmVmMi5pc1ZhbGlkOwogICAgICAgICAgICBkYXRhID0gX3JlZjIuZGF0YTsKCiAgICAgICAgICAgIGlmIChuZXdJc1ZhbGlkKSB7CiAgICAgICAgICAgICAgc2V0U3RlcERhdGEoX3R5cGVzLlJ1bGVTdGVwLnNjaGVkdWxlUnVsZSwgX29iamVjdFNwcmVhZCh7fSwgZGF0YSwgewogICAgICAgICAgICAgICAgZW5hYmxlZDogZW5hYmxlZAogICAgICAgICAgICAgIH0pLCBuZXdJc1ZhbGlkKTsKICAgICAgICAgICAgICBzZXRNeVN0ZXBEYXRhKF9vYmplY3RTcHJlYWQoe30sIGRhdGEsIHsKICAgICAgICAgICAgICAgIGlzTmV3OiBmYWxzZQogICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LCBbZm9ybV0pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICB2YXIgaXNOZXcgPSBteVN0ZXBEYXRhLmlzTmV3LAogICAgICAgIGluaXREZWZhdWx0VmFsdWUgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMobXlTdGVwRGF0YSwgWyJpc05ldyJdKTsKCiAgICBpZiAoZGVmYXVsdFZhbHVlcyAhPSBudWxsICYmICEoMCwgX2ZwLmlzRXF1YWwpKGluaXREZWZhdWx0VmFsdWUsIGRlZmF1bHRWYWx1ZXMpKSB7CiAgICAgIHZhciBteURlZmF1bHRWYWx1ZXMgPSBfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0VmFsdWVzLCB7CiAgICAgICAgaXNOZXc6IGZhbHNlCiAgICAgIH0pOwoKICAgICAgc2V0TXlTdGVwRGF0YShteURlZmF1bHRWYWx1ZXMpOwogICAgICAoMCwgX2hlbHBlcnMuc2V0RmllbGRWYWx1ZSkoZm9ybSwgX3NjaGVtYS5zY2hlbWEsIG15RGVmYXVsdFZhbHVlcyk7CiAgICB9CiAgfSwgW2RlZmF1bHRWYWx1ZXNdKTsKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgaWYgKHNldEZvcm0gIT0gbnVsbCkgewogICAgICBzZXRGb3JtKF90eXBlcy5SdWxlU3RlcC5zY2hlZHVsZVJ1bGUsIGZvcm0pOwogICAgfQogIH0sIFtmb3JtXSk7CiAgcmV0dXJuIGlzUmVhZE9ubHlWaWV3ICYmIG15U3RlcERhdGEgIT0gbnVsbCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3N0ZXBfY29udGVudF93cmFwcGVyLlN0ZXBDb250ZW50V3JhcHBlciwgewogICAgYWRkUGFkZGluZzogYWRkUGFkZGluZwogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2Rlc2NyaXB0aW9uX3N0ZXAuU3RlcFJ1bGVEZXNjcmlwdGlvbiwgewogICAgZGlyZWN0aW9uOiBkZXNjcmlwdGlvbkRpcmVjdGlvbiwKICAgIHNjaGVtYTogX3NjaGVtYS5zY2hlbWEsCiAgICBkYXRhOiBteVN0ZXBEYXRhCiAgfSkpIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc3RlcF9jb250ZW50X3dyYXBwZXIuU3RlcENvbnRlbnRXcmFwcGVyLCB7CiAgICBhZGRQYWRkaW5nOiAhaXNVcGRhdGVWaWV3CiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2hhcmVkX2ltcG9ydHMuRm9ybSwgewogICAgZm9ybTogZm9ybSwKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJzdGVwU2NoZWR1bGVSdWxlIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3NoYXJlZF9pbXBvcnRzLlVzZUZpZWxkLCB7CiAgICBwYXRoOiAiaW50ZXJ2YWwiLAogICAgY29tcG9uZW50OiBfc2NoZWR1bGVfaXRlbV9mb3JtLlNjaGVkdWxlSXRlbSwKICAgIGNvbXBvbmVudFByb3BzOiB7CiAgICAgIGlkQXJpYTogJ2RldGVjdGlvbkVuZ2luZVN0ZXBTY2hlZHVsZVJ1bGVJbnRlcnZhbCcsCiAgICAgIGlzRGlzYWJsZWQ6IGlzTG9hZGluZywKICAgICAgZGF0YVRlc3RTdWJqOiAnZGV0ZWN0aW9uRW5naW5lU3RlcFNjaGVkdWxlUnVsZUludGVydmFsJwogICAgfQogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zaGFyZWRfaW1wb3J0cy5Vc2VGaWVsZCwgewogICAgcGF0aDogImZyb20iLAogICAgY29tcG9uZW50OiBfc2NoZWR1bGVfaXRlbV9mb3JtLlNjaGVkdWxlSXRlbSwKICAgIGNvbXBvbmVudFByb3BzOiB7CiAgICAgIGlkQXJpYTogJ2RldGVjdGlvbkVuZ2luZVN0ZXBTY2hlZHVsZVJ1bGVGcm9tJywKICAgICAgaXNEaXNhYmxlZDogaXNMb2FkaW5nLAogICAgICBkYXRhVGVzdFN1Ymo6ICdkZXRlY3Rpb25FbmdpbmVTdGVwU2NoZWR1bGVSdWxlRnJvbScsCiAgICAgIG1pbmltdW1WYWx1ZTogMQogICAgfQogIH0pKSksICFpc1VwZGF0ZVZpZXcgJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUhvcml6b250YWxSdWxlLCB7CiAgICBtYXJnaW46ICJtIgogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICBhbGlnbkl0ZW1zOiAiY2VudGVyIiwKICAgIGp1c3RpZnlDb250ZW50OiAiZmxleEVuZCIsCiAgICBndXR0ZXJTaXplOiAieHMiLAogICAgcmVzcG9uc2l2ZTogZmFsc2UKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgIGdyb3c6IGZhbHNlCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbiwgewogICAgZmlsbDogZmFsc2UsCiAgICBpc0Rpc2FibGVkOiBpc0xvYWRpbmcsCiAgICBpc0xvYWRpbmc6IGlzTG9hZGluZywKICAgIG9uQ2xpY2s6IG9uU3VibWl0LmJpbmQobnVsbCwgZmFsc2UpCiAgfSwgSTE4bi5DT01QTEVURV9XSVRIT1VUX0FDVElWQVRJTkcpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICBncm93OiBmYWxzZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgIGZpbGw6IHRydWUsCiAgICBpc0Rpc2FibGVkOiBpc0xvYWRpbmcsCiAgICBpc0xvYWRpbmc6IGlzTG9hZGluZywKICAgIG9uQ2xpY2s6IG9uU3VibWl0LmJpbmQobnVsbCwgdHJ1ZSkKICB9LCBJMThuLkNPTVBMRVRFX1dJVEhfQUNUSVZBVElORykpKSkpOwp9OwoKdmFyIFN0ZXBTY2hlZHVsZVJ1bGUgPSAoMCwgX3JlYWN0Lm1lbW8pKFN0ZXBTY2hlZHVsZVJ1bGVDb21wb25lbnQpOwpleHBvcnRzLlN0ZXBTY2hlZHVsZVJ1bGUgPSBTdGVwU2NoZWR1bGVSdWxlOw=="},null]}