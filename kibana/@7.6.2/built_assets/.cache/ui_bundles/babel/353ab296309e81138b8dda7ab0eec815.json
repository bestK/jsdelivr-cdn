{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/vis/map/service_settings.js","dependencies":[{"path":"src/legacy/ui/public/vis/map/service_settings.js","mtime":1585205041307},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9tb2R1bGVzID0gcmVxdWlyZSgiLi4vLi4vbW9kdWxlcyIpOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfbWFya2Rvd25JdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibWFya2Rvd24taXQiKSk7Cgp2YXIgX29yaWdpbiA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvcmVfcGx1Z2lucy90aWxlX21hcC9jb21tb24vb3JpZ2luIik7Cgp2YXIgX2Vtc0NsaWVudCA9IHJlcXVpcmUoIkBlbGFzdGljL2Vtcy1jbGllbnQiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKcmVxdWlyZSgiYW5ndWxhci1zYW5pdGl6ZSIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9Cgp2YXIgbWFya2Rvd25JdCA9IG5ldyBfbWFya2Rvd25JdC5kZWZhdWx0KHsKICBodG1sOiBmYWxzZSwKICBsaW5raWZ5OiB0cnVlCn0pOwp2YXIgVE1TX0lOX1lNTF9JRCA9ICdUTVMgaW4gY29uZmlnL2tpYmFuYS55bWwnOwoKX21vZHVsZXMudWlNb2R1bGVzLmdldCgna2liYW5hJywgWyduZ1Nhbml0aXplJ10pLnNlcnZpY2UoJ3NlcnZpY2VTZXR0aW5ncycsIGZ1bmN0aW9uICgkc2FuaXRpemUsIG1hcENvbmZpZywgdGlsZW1hcHNDb25maWcsIGtiblZlcnNpb24pIHsKICB2YXIgYXR0cmlidXRpb25Gcm9tQ29uZmlnID0gJHNhbml0aXplKG1hcmtkb3duSXQucmVuZGVyKHRpbGVtYXBzQ29uZmlnLmRlcHJlY2F0ZWQuY29uZmlnLm9wdGlvbnMuYXR0cmlidXRpb24gfHwgJycpKTsKCiAgdmFyIHRtc09wdGlvbnNGcm9tQ29uZmlnID0gX2xvZGFzaC5kZWZhdWx0LmFzc2lnbih7fSwgdGlsZW1hcHNDb25maWcuZGVwcmVjYXRlZC5jb25maWcub3B0aW9ucywgewogICAgYXR0cmlidXRpb246IGF0dHJpYnV0aW9uRnJvbUNvbmZpZwogIH0pOwoKICB2YXIgU2VydmljZVNldHRpbmdzID0KICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gU2VydmljZVNldHRpbmdzKCkgewogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VydmljZVNldHRpbmdzKTsKCiAgICAgIHRoaXMuX3Nob3dab29tTWVzc2FnZSA9IHRydWU7CiAgICAgIHRoaXMuX2Vtc0NsaWVudCA9IG5ldyBfZW1zQ2xpZW50LkVNU0NsaWVudCh7CiAgICAgICAgbGFuZ3VhZ2U6IF9pMThuLmkxOG4uZ2V0TG9jYWxlKCksCiAgICAgICAga2JuVmVyc2lvbjoga2JuVmVyc2lvbiwKICAgICAgICBmaWxlQXBpVXJsOiBtYXBDb25maWcuZW1zRmlsZUFwaVVybCwKICAgICAgICB0aWxlQXBpVXJsOiBtYXBDb25maWcuZW1zVGlsZUFwaVVybCwKICAgICAgICBodG1sU2FuaXRpemVyOiAkc2FuaXRpemUsCiAgICAgICAgbGFuZGluZ1BhZ2VVcmw6IG1hcENvbmZpZy5lbXNMYW5kaW5nUGFnZVVybAogICAgICB9KTsKICAgIH0KCiAgICBfY3JlYXRlQ2xhc3MoU2VydmljZVNldHRpbmdzLCBbewogICAgICBrZXk6ICJzaG91bGRTaG93Wm9vbU1lc3NhZ2UiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdWxkU2hvd1pvb21NZXNzYWdlKF9yZWYpIHsKICAgICAgICB2YXIgb3JpZ2luID0gX3JlZi5vcmlnaW47CiAgICAgICAgcmV0dXJuIG9yaWdpbiA9PT0gX29yaWdpbi5PUklHSU4uRU1TICYmIHRoaXMuX3Nob3dab29tTWVzc2FnZTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJkaXNhYmxlWm9vbU1lc3NhZ2UiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzYWJsZVpvb21NZXNzYWdlKCkgewogICAgICAgIHRoaXMuX3Nob3dab29tTWVzc2FnZSA9IGZhbHNlOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIl9fZGVidWdTdHViTWFuaWZlc3RDYWxscyIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfX2RlYnVnU3R1Yk1hbmlmZXN0Q2FsbHMobWFuaWZlc3RSZXRyaWV2YWwpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB2YXIgb2xkR2V0TWFuaWZlc3QgPSB0aGlzLl9lbXNDbGllbnQuZ2V0TWFuaWZlc3Q7CiAgICAgICAgdGhpcy5fZW1zQ2xpZW50LmdldE1hbmlmZXN0ID0gbWFuaWZlc3RSZXRyaWV2YWw7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHJlbW92ZVN0dWI6IGZ1bmN0aW9uIHJlbW92ZVN0dWIoKSB7CiAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fZW1zQ2xpZW50LmdldE1hbmlmZXN0OyAvL25vdCBzdHJpY3RseSBuZWNlc3Nhcnkgc2luY2UgdGhpcyBpcyBwcm90b3R5cGUgbWV0aG9kCgogICAgICAgICAgICBpZiAoX3RoaXMuX2Vtc0NsaWVudC5nZXRNYW5pZmVzdCAhPT0gb2xkR2V0TWFuaWZlc3QpIHsKICAgICAgICAgICAgICBfdGhpcy5fZW1zQ2xpZW50LmdldE1hbmlmZXN0ID0gb2xkR2V0TWFuaWZlc3Q7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogImdldEZpbGVMYXllcnMiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmlsZUxheWVycygpIHsKICAgICAgICB2YXIgZmlsZUxheWVyczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEZpbGVMYXllcnMkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKG1hcENvbmZpZy5pbmNsdWRlRWxhc3RpY01hcHNTZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBbXSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLl9lbXNDbGllbnQuZ2V0RmlsZUxheWVycygpKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgZmlsZUxheWVycyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmaWxlTGF5ZXJzLm1hcChmdW5jdGlvbiAoZmlsZUxheWVyKSB7CiAgICAgICAgICAgICAgICAgIC8vYmFja2ZpbGwgdG8gb2xkZXIgc2V0dGluZ3MKICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IGZpbGVMYXllci5nZXREZWZhdWx0Rm9ybWF0VHlwZSgpOwogICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGZpbGVMYXllci5nZXREZWZhdWx0Rm9ybWF0TWV0YSgpOwogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIG5hbWU6IGZpbGVMYXllci5nZXREaXNwbGF5TmFtZSgpLAogICAgICAgICAgICAgICAgICAgIG9yaWdpbjogZmlsZUxheWVyLmdldE9yaWdpbigpLAogICAgICAgICAgICAgICAgICAgIGlkOiBmaWxlTGF5ZXIuZ2V0SWQoKSwKICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBmaWxlTGF5ZXIuZ2V0Q3JlYXRlZEF0KCksCiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRpb246IGZpbGVMYXllci5nZXRIVE1MQXR0cmlidXRpb24oKSwKICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IGZpbGVMYXllci5nZXRGaWVsZHNJbkxhbmd1YWdlKCksCiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXQsCiAgICAgICAgICAgICAgICAgICAgLy9sZWdhY3k6IGZvcm1hdCBhbmQgbWV0YSBhcmUgc3BsaXQgdXAKICAgICAgICAgICAgICAgICAgICBtZXRhOiBtZXRhIC8vbGVnYWN5LCBmb3JtYXQgYW5kIG1ldGEgYXJlIHNwbGl0IHVwCgogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBudWxsLCB0aGlzKTsKICAgICAgfQogICAgICAvKioKICAgICAgICogUmV0dXJucyBhbGwgdGhlIHNlcnZpY2VzIHB1Ymxpc2hlZCBieSBFTVMgKGlmIGNvbmZpZ3VyZXMpCiAgICAgICAqIEl0IGFsc28gaW5jbHVkZXMgdGhlIHNlcnZpY2UgY29uZmlndXJlZCBpbiB0aWxlbWFwIChvdmVycmlkZSkKICAgICAgICovCgogICAgfSwgewogICAgICBrZXk6ICJnZXRUTVNTZXJ2aWNlcyIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUTVNTZXJ2aWNlcygpIHsKICAgICAgICB2YXIgYWxsU2VydmljZXMsIHRtc1NlcnZpY2UsIHNlcnZpY2VzRnJvbU1hbmlmZXN0LCBzdHJpcHBlZFNlcnZpY2VGcm9tTWFuaWZlc3Q7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRUTVNTZXJ2aWNlcyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBhbGxTZXJ2aWNlcyA9IFtdOwoKICAgICAgICAgICAgICAgIGlmICh0aWxlbWFwc0NvbmZpZy5kZXByZWNhdGVkLmlzT3ZlcnJpZGRlbikgewogICAgICAgICAgICAgICAgICAvL3VzZSB0aWxlbWFwLiogc2V0dGluZ3MgZnJvbSB5bWwKICAgICAgICAgICAgICAgICAgdG1zU2VydmljZSA9IF9sb2Rhc2guZGVmYXVsdC5jbG9uZURlZXAodG1zT3B0aW9uc0Zyb21Db25maWcpOwogICAgICAgICAgICAgICAgICB0bXNTZXJ2aWNlLmlkID0gVE1TX0lOX1lNTF9JRDsKICAgICAgICAgICAgICAgICAgdG1zU2VydmljZS5vcmlnaW4gPSBfb3JpZ2luLk9SSUdJTi5LSUJBTkFfWU1MOwogICAgICAgICAgICAgICAgICBhbGxTZXJ2aWNlcy5wdXNoKHRtc1NlcnZpY2UpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghbWFwQ29uZmlnLmluY2x1ZGVFbGFzdGljTWFwc1NlcnZpY2UpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLl9lbXNDbGllbnQuZ2V0VE1TU2VydmljZXMoKSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHNlcnZpY2VzRnJvbU1hbmlmZXN0ID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKFByb21pc2UuYWxsKHNlcnZpY2VzRnJvbU1hbmlmZXN0LmZpbHRlcihmdW5jdGlvbiAodG1zU2VydmljZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdG1zU2VydmljZS5nZXRJZCgpID09PSBtYXBDb25maWcuZW1zVGlsZUxheWVySWQuYnJpZ2h0OwogICAgICAgICAgICAgICAgfSkubWFwKGZ1bmN0aW9uIF9jYWxsZWUodG1zU2VydmljZSkgewogICAgICAgICAgICAgICAgICB2YXIgc2hpbTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSB0bXNTZXJ2aWNlLmdldE9yaWdpbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MSA9IHRtc1NlcnZpY2UuZ2V0SWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0bXNTZXJ2aWNlLmdldE1pblpvb20oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQyID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodG1zU2VydmljZS5nZXRNYXhab29tKCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50NCA9IHRtc1NlcnZpY2UuZ2V0SFRNTEF0dHJpYnV0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpbSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjogX2NvbnRleHQyLnQwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IF9jb250ZXh0Mi50MSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblpvb206IF9jb250ZXh0Mi50MiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFpvb206IF9jb250ZXh0Mi50MywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uOiBfY29udGV4dDIudDQKICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBzaGltKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIHN0cmlwcGVkU2VydmljZUZyb21NYW5pZmVzdCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgYWxsU2VydmljZXMgPSBhbGxTZXJ2aWNlcy5jb25jYXQoc3RyaXBwZWRTZXJ2aWNlRnJvbU1hbmlmZXN0KTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBhbGxTZXJ2aWNlcyk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIEFkZCBvcHRpb25hbCBxdWVyeS1wYXJhbWV0ZXJzIHRvIGFsbCByZXF1ZXN0cwogICAgICAgKgogICAgICAgKiBAcGFyYW0gYWRkaXRpb25hbFF1ZXJ5UGFyYW1zCiAgICAgICAqLwoKICAgIH0sIHsKICAgICAga2V5OiAiYWRkUXVlcnlQYXJhbXMiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkUXVlcnlQYXJhbXMoYWRkaXRpb25hbFF1ZXJ5UGFyYW1zKSB7CiAgICAgICAgdGhpcy5fZW1zQ2xpZW50LmFkZFF1ZXJ5UGFyYW1zKGFkZGl0aW9uYWxRdWVyeVBhcmFtcyk7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiZ2V0RU1TSG90TGluayIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFTVNIb3RMaW5rKGZpbGVMYXllckNvbmZpZykgewogICAgICAgIHZhciBmaWxlTGF5ZXJzLCBsYXllcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEVNU0hvdExpbmskKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLl9lbXNDbGllbnQuZ2V0RmlsZUxheWVycygpKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZmlsZUxheWVycyA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgbGF5ZXIgPSBmaWxlTGF5ZXJzLmZpbmQoZnVuY3Rpb24gKGZpbGVMYXllcikgewogICAgICAgICAgICAgICAgICB2YXIgaGFzSWRCeU5hbWUgPSBmaWxlTGF5ZXIuaGFzSWQoZmlsZUxheWVyQ29uZmlnLm5hbWUpOyAvL2xlZ2FjeQoKICAgICAgICAgICAgICAgICAgdmFyIGhhc0lkQnlJZCA9IGZpbGVMYXllci5oYXNJZChmaWxlTGF5ZXJDb25maWcuaWQpOwogICAgICAgICAgICAgICAgICByZXR1cm4gaGFzSWRCeU5hbWUgfHwgaGFzSWRCeUlkOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgbGF5ZXIgPyBsYXllci5nZXRFTVNIb3RMaW5rKCkgOiBudWxsKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIl9nZXRBdHRyaWJ1dGVzRm9yRU1TVE1TTGF5ZXIiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldEF0dHJpYnV0ZXNGb3JFTVNUTVNMYXllcihpc0Rlc2F0dXJhdGVkLCBpc0RhcmtNb2RlKSB7CiAgICAgICAgdmFyIHRtc1NlcnZpY2VzLCBlbXNUaWxlTGF5ZXJJZCwgc2VydmljZUlkLCB0bXNTZXJ2aWNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2dldEF0dHJpYnV0ZXNGb3JFTVNUTVNMYXllciQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuX2Vtc0NsaWVudC5nZXRUTVNTZXJ2aWNlcygpKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdG1zU2VydmljZXMgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICAgIGVtc1RpbGVMYXllcklkID0gbWFwQ29uZmlnLmVtc1RpbGVMYXllcklkOwoKICAgICAgICAgICAgICAgIGlmIChpc0RhcmtNb2RlKSB7CiAgICAgICAgICAgICAgICAgIHNlcnZpY2VJZCA9IGVtc1RpbGVMYXllcklkLmRhcms7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAoaXNEZXNhdHVyYXRlZCkgewogICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJZCA9IGVtc1RpbGVMYXllcklkLmRlc2F0dXJhdGVkOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJZCA9IGVtc1RpbGVMYXllcklkLmJyaWdodDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRtc1NlcnZpY2UgPSB0bXNTZXJ2aWNlcy5maW5kKGZ1bmN0aW9uIChzZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLmdldElkKCkgPT09IHNlcnZpY2VJZDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0bXNTZXJ2aWNlLmdldFVybFRlbXBsYXRlKCkpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRtc1NlcnZpY2UuZ2V0TWluWm9vbSgpKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodG1zU2VydmljZS5nZXRNYXhab29tKCkpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnQyID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0bXNTZXJ2aWNlLmdldEhUTUxBdHRyaWJ1dGlvbigpKTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MyA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnQ0ID0gX29yaWdpbi5PUklHSU4uRU1TOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgdXJsOiBfY29udGV4dDUudDAsCiAgICAgICAgICAgICAgICAgIG1pblpvb206IF9jb250ZXh0NS50MSwKICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogX2NvbnRleHQ1LnQyLAogICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogX2NvbnRleHQ1LnQzLAogICAgICAgICAgICAgICAgICBvcmlnaW46IF9jb250ZXh0NS50NAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiZ2V0QXR0cmlidXRlc0ZvclRNU0xheWVyIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEF0dHJpYnV0ZXNGb3JUTVNMYXllcih0bXNTZXJ2aWNlQ29uZmlnLCBpc0Rlc2F0dXJhdGVkLCBpc0RhcmtNb2RlKSB7CiAgICAgICAgdmFyIGNvbmZpZywgYXR0cnMsIF9jb25maWcsIF9hdHRyczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRBdHRyaWJ1dGVzRm9yVE1TTGF5ZXIkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEodG1zU2VydmljZUNvbmZpZy5vcmlnaW4gPT09IF9vcmlnaW4uT1JJR0lOLkVNUykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgdGhpcy5fZ2V0QXR0cmlidXRlc0ZvckVNU1RNU0xheWVyKGlzRGVzYXR1cmF0ZWQsIGlzRGFya01vZGUpKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgaWYgKCEodG1zU2VydmljZUNvbmZpZy5vcmlnaW4gPT09IF9vcmlnaW4uT1JJR0lOLktJQkFOQV9ZTUwpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbmZpZyA9IHRpbGVtYXBzQ29uZmlnLmRlcHJlY2F0ZWQuY29uZmlnOwogICAgICAgICAgICAgICAgYXR0cnMgPSBfbG9kYXNoLmRlZmF1bHQucGljayhjb25maWcsIFsndXJsJywgJ21pbnpvb20nLCAnbWF4em9vbScsICdhdHRyaWJ1dGlvbiddKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBfb2JqZWN0U3ByZWFkKHt9LCBhdHRycywge30sIHsKICAgICAgICAgICAgICAgICAgb3JpZ2luOiBfb3JpZ2luLk9SSUdJTi5LSUJBTkFfWU1MCiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBpZiAoISh0bXNTZXJ2aWNlQ29uZmlnLmlkID09PSBUTVNfSU5fWU1MX0lEKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29uZmlnID0gdGlsZW1hcHNDb25maWcuZGVwcmVjYXRlZC5jb25maWc7CiAgICAgICAgICAgICAgICBfYXR0cnMgPSBfbG9kYXNoLmRlZmF1bHQucGljayhfY29uZmlnLCBbJ3VybCcsICdtaW56b29tJywgJ21heHpvb20nLCAnYXR0cmlidXRpb24nXSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgX29iamVjdFNwcmVhZCh7fSwgX2F0dHJzLCB7fSwgewogICAgICAgICAgICAgICAgICBvcmlnaW46IF9vcmlnaW4uT1JJR0lOLktJQkFOQV9ZTUwKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCB0aGlzLl9nZXRBdHRyaWJ1dGVzRm9yRU1TVE1TTGF5ZXIoaXNEZXNhdHVyYXRlZCwgaXNEYXJrTW9kZSkpOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIl9nZXRGaWxlVXJsRnJvbUVNUyIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0RmlsZVVybEZyb21FTVMoZmlsZUxheWVyQ29uZmlnKSB7CiAgICAgICAgdmFyIGZpbGVMYXllcnMsIGxheWVyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2dldEZpbGVVcmxGcm9tRU1TJChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fZW1zQ2xpZW50LmdldEZpbGVMYXllcnMoKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGZpbGVMYXllcnMgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgICAgICAgIGxheWVyID0gZmlsZUxheWVycy5maW5kKGZ1bmN0aW9uIChmaWxlTGF5ZXIpIHsKICAgICAgICAgICAgICAgICAgdmFyIGhhc0lkQnlOYW1lID0gZmlsZUxheWVyLmhhc0lkKGZpbGVMYXllckNvbmZpZy5uYW1lKTsgLy9sZWdhY3kKCiAgICAgICAgICAgICAgICAgIHZhciBoYXNJZEJ5SWQgPSBmaWxlTGF5ZXIuaGFzSWQoZmlsZUxheWVyQ29uZmlnLmlkKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc0lkQnlOYW1lIHx8IGhhc0lkQnlJZDsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICghbGF5ZXIpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgbGF5ZXIuZ2V0RGVmYXVsdEZvcm1hdFVybCgpKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJGaWxlICAiLmNvbmNhdChmaWxlTGF5ZXJDb25maWcubmFtZSwgIiBub3QgcmVjb2duaXplZCIpKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogImdldFVybEZvclJlZ2lvbkxheWVyIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVybEZvclJlZ2lvbkxheWVyKGZpbGVMYXllckNvbmZpZykgewogICAgICAgIHZhciB1cmw7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRVcmxGb3JSZWdpb25MYXllciQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoZmlsZUxheWVyQ29uZmlnLm9yaWdpbiA9PT0gX29yaWdpbi5PUklHSU4uRU1TKSB7CiAgICAgICAgICAgICAgICAgIHVybCA9IHRoaXMuX2dldEZpbGVVcmxGcm9tRU1TKGZpbGVMYXllckNvbmZpZyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVMYXllckNvbmZpZy5sYXllcklkICYmIGZpbGVMYXllckNvbmZpZy5sYXllcklkLnN0YXJ0c1dpdGgoIiIuY29uY2F0KF9vcmlnaW4uT1JJR0lOLkVNUywgIi4iKSkpIHsKICAgICAgICAgICAgICAgICAgLy9mYWxsYmFjayBmb3Igb2xkZXIgc2F2ZWQgb2JqZWN0cwogICAgICAgICAgICAgICAgICB1cmwgPSB0aGlzLl9nZXRGaWxlVXJsRnJvbUVNUyhmaWxlTGF5ZXJDb25maWcpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlTGF5ZXJDb25maWcubGF5ZXJJZCAmJiBmaWxlTGF5ZXJDb25maWcubGF5ZXJJZC5zdGFydHNXaXRoKCIiLmNvbmNhdChfb3JpZ2luLk9SSUdJTi5LSUJBTkFfWU1MLCAiLiIpKSkgewogICAgICAgICAgICAgICAgICAvL2ZhbGxiYWNrIGZvciBvbGRlciBzYXZlZCBvYmplY3RzCiAgICAgICAgICAgICAgICAgIHVybCA9IGZpbGVMYXllckNvbmZpZy51cmw7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvL2dlbmVyaWMgZmFsbGJhY2sKICAgICAgICAgICAgICAgICAgdXJsID0gZmlsZUxheWVyQ29uZmlnLnVybDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgdXJsKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogImdldEpzb25Gb3JSZWdpb25MYXllciIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRKc29uRm9yUmVnaW9uTGF5ZXIoZmlsZUxheWVyQ29uZmlnKSB7CiAgICAgICAgdmFyIHVybCwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRKc29uRm9yUmVnaW9uTGF5ZXIkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLmdldFVybEZvclJlZ2lvbkxheWVyKGZpbGVMYXllckNvbmZpZykpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICB1cmwgPSBfY29udGV4dDkuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoZmV0Y2godXJsKSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ5LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHJlc3BvbnNlLmpzb24oKSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDkuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBudWxsLCB0aGlzKTsKICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBTZXJ2aWNlU2V0dGluZ3M7CiAgfSgpOwoKICByZXR1cm4gbmV3IFNlcnZpY2VTZXR0aW5ncygpOwp9KTs="},null]}