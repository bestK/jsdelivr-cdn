{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/index_lifecycle_management/public/sections/policy_table/components/policy_table/add_policy_to_template_confirm_modal.js","dependencies":[{"path":"x-pack/legacy/plugins/index_lifecycle_management/public/sections/policy_table/components/policy_table/add_policy_to_template_confirm_modal.js","mtime":1585205044321},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkFkZFBvbGljeVRvVGVtcGxhdGVDb25maXJtTW9kYWwgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfbm90aWZ5ID0gcmVxdWlyZSgidWkvbm90aWZ5Iik7Cgp2YXIgX2FwaSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL3NlcnZpY2VzL2FwaSIpOwoKdmFyIF9hcGlfZXJyb3JzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vc2VydmljZXMvYXBpX2Vycm9ycyIpOwoKdmFyIF9sZWFybl9tb3JlX2xpbmsgPSByZXF1aXJlKCIuLi8uLi8uLi9jb21wb25lbnRzL2xlYXJuX21vcmVfbGluayIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBBZGRQb2xpY3lUb1RlbXBsYXRlQ29uZmlybU1vZGFsID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhBZGRQb2xpY3lUb1RlbXBsYXRlQ29uZmlybU1vZGFsLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gQWRkUG9saWN5VG9UZW1wbGF0ZUNvbmZpcm1Nb2RhbCgpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWRkUG9saWN5VG9UZW1wbGF0ZUNvbmZpcm1Nb2RhbCk7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX2dldFByb3RvdHlwZU9mMiA9IF9nZXRQcm90b3R5cGVPZihBZGRQb2xpY3lUb1RlbXBsYXRlQ29uZmlybU1vZGFsKSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB7CiAgICAgIHRlbXBsYXRlczogW10KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImFkZFBvbGljeVRvVGVtcGxhdGUiLCBmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMsIHBvbGljeSwgY2FsbGJhY2ssIG9uQ2FuY2VsLCBfdGhpcyRzdGF0ZSwgdGVtcGxhdGVOYW1lLCBhbGlhc05hbWUsIHBvbGljeU5hbWUsIG1lc3NhZ2UsIHRpdGxlOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLCBwb2xpY3kgPSBfdGhpcyRwcm9wcy5wb2xpY3ksIGNhbGxiYWNrID0gX3RoaXMkcHJvcHMuY2FsbGJhY2ssIG9uQ2FuY2VsID0gX3RoaXMkcHJvcHMub25DYW5jZWw7CiAgICAgICAgICAgICAgX3RoaXMkc3RhdGUgPSBfdGhpcy5zdGF0ZSwgdGVtcGxhdGVOYW1lID0gX3RoaXMkc3RhdGUudGVtcGxhdGVOYW1lLCBhbGlhc05hbWUgPSBfdGhpcyRzdGF0ZS5hbGlhc05hbWU7CiAgICAgICAgICAgICAgcG9saWN5TmFtZSA9IHBvbGljeS5uYW1lOwoKICAgICAgICAgICAgICBpZiAodGVtcGxhdGVOYW1lKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgdGVtcGxhdGVFcnJvcjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmluZGV4TGlmZWN5Y2xlTWdtdC5wb2xpY3lUYWJsZS5hZGRMaWZlY3ljbGVQb2xpY3lUb1RlbXBsYXRlQ29uZmlybU1vZGFsLm5vVGVtcGxhdGVTZWxlY3RlZEVycm9yTWVzc2FnZScsIHsKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdZb3UgbXVzdCBzZWxlY3QgYW4gaW5kZXggdGVtcGxhdGUuJwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCgoMCwgX2FwaS5hZGRMaWZlY3ljbGVQb2xpY3lUb1RlbXBsYXRlKSh7CiAgICAgICAgICAgICAgICBwb2xpY3lOYW1lOiBwb2xpY3lOYW1lLAogICAgICAgICAgICAgICAgdGVtcGxhdGVOYW1lOiB0ZW1wbGF0ZU5hbWUsCiAgICAgICAgICAgICAgICBhbGlhc05hbWU6IGFsaWFzTmFtZQogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBtZXNzYWdlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmluZGV4TGlmZWN5Y2xlTWdtdC5wb2xpY3lUYWJsZS5hZGRMaWZlY3ljbGVQb2xpY3lUb1RlbXBsYXRlQ29uZmlybU1vZGFsLnN1Y2Nlc3NNZXNzYWdlJywgewogICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBZGRlZCBwb2xpY3kge3BvbGljeU5hbWV9IHRvIGluZGV4IHRlbXBsYXRlIHt0ZW1wbGF0ZU5hbWV9JywKICAgICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgICBwb2xpY3lOYW1lOiBwb2xpY3lOYW1lLAogICAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWU6IHRlbXBsYXRlTmFtZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGRTdWNjZXNzKG1lc3NhZ2UpOwoKICAgICAgICAgICAgICBvbkNhbmNlbCgpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE0OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oNik7CiAgICAgICAgICAgICAgdGl0bGUgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaW5kZXhMaWZlY3ljbGVNZ210LnBvbGljeVRhYmxlLmFkZExpZmVjeWNsZVBvbGljeVRvVGVtcGxhdGVDb25maXJtTW9kYWwuZXJyb3JNZXNzYWdlJywgewogICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFcnJvciBhZGRpbmcgcG9saWN5ICJ7cG9saWN5TmFtZX0iIHRvIGluZGV4IHRlbXBsYXRlIHt0ZW1wbGF0ZU5hbWV9JywKICAgICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgICBwb2xpY3lOYW1lOiBwb2xpY3lOYW1lLAogICAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWU6IHRlbXBsYXRlTmFtZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICgwLCBfYXBpX2Vycm9ycy5zaG93QXBpRXJyb3IpKF9jb250ZXh0LnQwLCB0aXRsZSk7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCBudWxsLCBbWzYsIDE0XV0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVuZGVyQWxpYXNGb3JtRWxlbWVudCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGFsaWFzTmFtZSA9IF90aGlzLnN0YXRlLmFsaWFzTmFtZTsKICAgICAgdmFyIHBvbGljeSA9IF90aGlzLnByb3BzLnBvbGljeTsKICAgICAgdmFyIHNob3dBbGlhc1RleHRJbnB1dCA9IHBvbGljeSAmJiAoMCwgX2xvZGFzaC5nZXQpKHBvbGljeSwgJ3BvbGljeS5waGFzZXMuaG90LmFjdGlvbnMucm9sbG92ZXInKTsKCiAgICAgIGlmICghc2hvd0FsaWFzVGV4dElucHV0KSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICAgIGxhYmVsOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5pbmRleExpZmVjeWNsZU1nbXQucG9saWN5VGFibGUuYWRkTGlmZWN5Y2xlUG9saWN5VG9UZW1wbGF0ZUNvbmZpcm1Nb2RhbC5yb2xsb3ZlckFsaWFzTGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBbGlhcyBmb3Igcm9sbG92ZXIgaW5kZXgiCiAgICAgICAgfSkKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkVGV4dCwgewogICAgICAgIHZhbHVlOiBhbGlhc05hbWUsCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgYWxpYXNOYW1lOiBlLnRhcmdldC52YWx1ZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KSk7CiAgICB9KTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQWRkUG9saWN5VG9UZW1wbGF0ZUNvbmZpcm1Nb2RhbCwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgdmFyIHRlbXBsYXRlczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoKDAsIF9hcGkubG9hZEluZGV4VGVtcGxhdGVzKSgpKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICB0ZW1wbGF0ZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHRlbXBsYXRlczogdGVtcGxhdGVzCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJUZW1wbGF0ZUhhc1BvbGljeVdhcm5pbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclRlbXBsYXRlSGFzUG9saWN5V2FybmluZygpIHsKICAgICAgdmFyIHNlbGVjdGVkVGVtcGxhdGUgPSB0aGlzLmdldFNlbGVjdGVkVGVtcGxhdGUoKTsKICAgICAgdmFyIGV4aXN0aW5nUG9saWN5TmFtZSA9ICgwLCBfbG9kYXNoLmdldCkoc2VsZWN0ZWRUZW1wbGF0ZSwgJ3NldHRpbmdzLmluZGV4LmxpZmVjeWNsZS5uYW1lJyk7CgogICAgICBpZiAoIWV4aXN0aW5nUG9saWN5TmFtZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ2FsbE91dCwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBtYXhXaWR0aDogNDAwCiAgICAgICAgfSwKICAgICAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suaW5kZXhMaWZlY3ljbGVNZ210LnBvbGljeVRhYmxlLmFkZExpZmVjeWNsZVBvbGljeVRvVGVtcGxhdGVDb25maXJtTW9kYWwudGVtcGxhdGVIYXNQb2xpY3lXYXJuaW5nVGl0bGUiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJUZW1wbGF0ZSBhbHJlYWR5IGhhcyBwb2xpY3kiCiAgICAgICAgfSksCiAgICAgICAgY29sb3I6ICJ3YXJuaW5nIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaW5kZXhMaWZlY3ljbGVNZ210LmluZGV4TWFuYWdlbWVudFRhYmxlLmFkZExpZmVjeWNsZVBvbGljeVRvVGVtcGxhdGVDb25maXJtTW9kYWwuaW5kZXhIYXNOb0FsaWFzZXNXYXJuaW5nTWVzc2FnZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJUaGlzIGluZGV4IHRlbXBsYXRlIGFscmVhZHkgaGFzIHRoZSBwb2xpY3kge2V4aXN0aW5nUG9saWN5TmFtZX0gYXR0YWNoZWQgdG8gaXQuIEFkZGluZyB0aGlzIHBvbGljeSB3aWxsIG92ZXJ3cml0ZSB0aGF0IGNvbmZpZ3VyYXRpb24uIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGV4aXN0aW5nUG9saWN5TmFtZTogZXhpc3RpbmdQb2xpY3lOYW1lCiAgICAgICAgfQogICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgICAgICBzaXplOiAicyIKICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFNlbGVjdGVkVGVtcGxhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNlbGVjdGVkVGVtcGxhdGUoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZTIgPSB0aGlzLnN0YXRlLAogICAgICAgICAgdGVtcGxhdGVzID0gX3RoaXMkc3RhdGUyLnRlbXBsYXRlcywKICAgICAgICAgIHRlbXBsYXRlTmFtZSA9IF90aGlzJHN0YXRlMi50ZW1wbGF0ZU5hbWU7CiAgICAgIHJldHVybiAoMCwgX2xvZGFzaC5maW5kKSh0ZW1wbGF0ZXMsIGZ1bmN0aW9uICh0ZW1wbGF0ZSkgewogICAgICAgIHJldHVybiB0ZW1wbGF0ZS5uYW1lID09PSB0ZW1wbGF0ZU5hbWU7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlckZvcm0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckZvcm0oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHN0YXRlMyA9IHRoaXMuc3RhdGUsCiAgICAgICAgICB0ZW1wbGF0ZXMgPSBfdGhpcyRzdGF0ZTMudGVtcGxhdGVzLAogICAgICAgICAgdGVtcGxhdGVOYW1lID0gX3RoaXMkc3RhdGUzLnRlbXBsYXRlTmFtZSwKICAgICAgICAgIHRlbXBsYXRlRXJyb3IgPSBfdGhpcyRzdGF0ZTMudGVtcGxhdGVFcnJvcjsKICAgICAgdmFyIG9wdGlvbnMgPSB0ZW1wbGF0ZXMubWFwKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIG5hbWUgPSBfcmVmLm5hbWU7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiBuYW1lLAogICAgICAgICAgdGV4dDogbmFtZQogICAgICAgIH07CiAgICAgIH0pOwogICAgICBvcHRpb25zLnVuc2hpZnQoewogICAgICAgIHZhbHVlOiAnJywKICAgICAgICB0ZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaW5kZXhMaWZlY3ljbGVNZ210LnBvbGljeVRhYmxlLmFkZExpZmVjeWNsZVBvbGljeVRvVGVtcGxhdGVDb25maXJtTW9kYWwuY2hvb3NlVGVtcGxhdGVNZXNzYWdlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZWxlY3QgYW4gaW5kZXggdGVtcGxhdGUnCiAgICAgICAgfSkKICAgICAgfSk7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybSwgbnVsbCwgdGhpcy5yZW5kZXJUZW1wbGF0ZUhhc1BvbGljeVdhcm5pbmcoKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgICAgICBpc0ludmFsaWQ6ICEhdGVtcGxhdGVFcnJvciwKICAgICAgICBlcnJvcjogdGVtcGxhdGVFcnJvciwKICAgICAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suaW5kZXhMaWZlY3ljbGVNZ210LnBvbGljeVRhYmxlLmFkZExpZmVjeWNsZVBvbGljeVRvVGVtcGxhdGVDb25maXJtTW9kYWwuY2hvb3NlVGVtcGxhdGVMYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkluZGV4IHRlbXBsYXRlIgogICAgICAgIH0pCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTZWxlY3QsIHsKICAgICAgICBvcHRpb25zOiBvcHRpb25zLAogICAgICAgIHZhbHVlOiB0ZW1wbGF0ZU5hbWUsCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICAgIHRlbXBsYXRlRXJyb3I6IG51bGwsCiAgICAgICAgICAgIHRlbXBsYXRlTmFtZTogZS50YXJnZXQudmFsdWUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkpLCB0aGlzLnJlbmRlckFsaWFzRm9ybUVsZW1lbnQoKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLAogICAgICAgICAgcG9saWN5ID0gX3RoaXMkcHJvcHMyLnBvbGljeSwKICAgICAgICAgIG9uQ2FuY2VsID0gX3RoaXMkcHJvcHMyLm9uQ2FuY2VsOwoKICAgICAgdmFyIHRpdGxlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmluZGV4TGlmZWN5Y2xlTWdtdC5wb2xpY3lUYWJsZS5hZGRMaWZlY3ljbGVQb2xpY3lUb1RlbXBsYXRlQ29uZmlybU1vZGFsLnRpdGxlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWRkIHBvbGljeSAie25hbWV9IiB0byBpbmRleCB0ZW1wbGF0ZScsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBuYW1lOiBwb2xpY3kubmFtZQogICAgICAgIH0KICAgICAgfSk7CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aU92ZXJsYXlNYXNrLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29uZmlybU1vZGFsLCB7CiAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgIG9uQ2FuY2VsOiBvbkNhbmNlbCwKICAgICAgICBvbkNvbmZpcm06IHRoaXMuYWRkUG9saWN5VG9UZW1wbGF0ZSwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaW5kZXhMaWZlY3ljbGVNZ210LnBvbGljeVRhYmxlLmFkZExpZmVjeWNsZVBvbGljeVRvVGVtcGxhdGVDb25maXJtTW9kYWwuY2FuY2VsQnV0dG9uJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDYW5jZWwnCiAgICAgICAgfSksCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pbmRleExpZmVjeWNsZU1nbXQucG9saWN5VGFibGUuYWRkTGlmZWN5Y2xlUG9saWN5VG9UZW1wbGF0ZUNvbmZpcm1Nb2RhbC5jb25maXJtQnV0dG9uJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBZGQgcG9saWN5JwogICAgICAgIH0pLAogICAgICAgIG9uQ2xvc2U6IG9uQ2FuY2VsCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmluZGV4TGlmZWN5Y2xlTWdtdC5wb2xpY3lUYWJsZS5hZGRMaWZlY3ljbGVQb2xpY3lUb1RlbXBsYXRlQ29uZmlybU1vZGFsLmV4cGxhbmF0aW9uVGV4dCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJUaGlzIHdpbGwgYXBwbHkgdGhlIGxpZmVjeWNsZSBwb2xpY3kgdG8gYWxsIGluZGljZXMgd2hpY2ggbWF0Y2ggdGhlIGluZGV4IHRlbXBsYXRlLiIKICAgICAgfSksICcgJywgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbGVhcm5fbW9yZV9saW5rLkxlYXJuTW9yZUxpbmssIHsKICAgICAgICBkb2NQYXRoOiAiaW5kaWNlcy10ZW1wbGF0ZXMuaHRtbCIsCiAgICAgICAgdGV4dDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suaW5kZXhMaWZlY3ljbGVNZ210LmVkaXRQb2xpY3kubGVhcm5BYm91dEluZGV4VGVtcGxhdGVzTGluayIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkxlYXJuIGFib3V0IGluZGV4IHRlbXBsYXRlcyIKICAgICAgICB9KQogICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgICAgc2l6ZTogIm0iCiAgICAgIH0pLCB0aGlzLnJlbmRlckZvcm0oKSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEFkZFBvbGljeVRvVGVtcGxhdGVDb25maXJtTW9kYWw7Cn0oX3JlYWN0LkNvbXBvbmVudCk7CgpleHBvcnRzLkFkZFBvbGljeVRvVGVtcGxhdGVDb25maXJtTW9kYWwgPSBBZGRQb2xpY3lUb1RlbXBsYXRlQ29uZmlybU1vZGFsOw=="},null]}