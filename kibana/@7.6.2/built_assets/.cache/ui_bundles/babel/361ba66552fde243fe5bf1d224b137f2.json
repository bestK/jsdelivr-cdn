{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/components/drag_and_drop/draggable_wrapper.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/components/drag_and_drop/draggable_wrapper.js","mtime":1585205047400},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuRHJhZ2dhYmxlV3JhcHBlciA9IGV4cG9ydHMudXNlRHJhZ2dhYmxlUG9ydGFsQ29udGV4dCA9IGV4cG9ydHMuRHJhZ2dhYmxlUG9ydGFsQ29udGV4dCA9IGV4cG9ydHMuRHJhZ0VmZmVjdHMgPSB2b2lkIDA7Cgp2YXIgX2ZwID0gcmVxdWlyZSgibG9kYXNoL2ZwIik7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0QmVhdXRpZnVsRG5kID0gcmVxdWlyZSgicmVhY3QtYmVhdXRpZnVsLWRuZCIpOwoKdmFyIF9yZWFjdFJlZHV4ID0gcmVxdWlyZSgicmVhY3QtcmVkdXgiKTsKCnZhciBfc3R5bGVkQ29tcG9uZW50cyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgic3R5bGVkLWNvbXBvbmVudHMiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9kcmFnX2FuZF9kcm9wID0gcmVxdWlyZSgiLi4vLi4vc3RvcmUvZHJhZ19hbmRfZHJvcCIpOwoKdmFyIF90cnVuY2F0YWJsZV90ZXh0ID0gcmVxdWlyZSgiLi4vdHJ1bmNhdGFibGVfdGV4dCIpOwoKdmFyIF9oZWxwZXJzID0gcmVxdWlyZSgiLi9oZWxwZXJzIik7Cgp2YXIgX3Byb3ZpZGVyX2NvbnRhaW5lciA9IHJlcXVpcmUoIi4vcHJvdmlkZXJfY29udGFpbmVyIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF9leHRlbmRzKCkgewogIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOwoKICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7CiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiB0YXJnZXQ7CiAgfTsKCiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogIGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiKSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0gZWxzZSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfQoKICByZXR1cm4gX3R5cGVvZihvYmopOwp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7CiAgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgewogICAgcmV0dXJuIGNhbGw7CiAgfQoKICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsKfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7CiAgaWYgKHNlbGYgPT09IHZvaWQgMCkgewogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICB9CgogIHJldHVybiBzZWxmOwp9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogIF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOwogIH07CiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsKfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7CiAgfQoKICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgIHZhbHVlOiBzdWJDbGFzcywKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgfQogIH0pOwogIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOwp9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogICAgby5fX3Byb3RvX18gPSBwOwogICAgcmV0dXJuIG87CiAgfTsKCiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsKfSAvLyBBcyByaWdodCBub3csIHdlIGRvIG5vdCBrbm93IHdoYXQgd2Ugd2FudCB0aGVyZSwgd2Ugd2lsbCBrZWVwIGl0IGFzIGEgcGxhY2Vob2xkZXIKCgp2YXIgRHJhZ0VmZmVjdHMgPSBfc3R5bGVkQ29tcG9uZW50cy5kZWZhdWx0LmRpdi53aXRoQ29uZmlnKHsKICBkaXNwbGF5TmFtZTogIkRyYWdFZmZlY3RzIiwKICBjb21wb25lbnRJZDogImxmM2Noci0wIgp9KShbIiJdKTsKCmV4cG9ydHMuRHJhZ0VmZmVjdHMgPSBEcmFnRWZmZWN0czsKRHJhZ0VmZmVjdHMuZGlzcGxheU5hbWUgPSAnRHJhZ0VmZmVjdHMnOwp2YXIgRHJhZ2dhYmxlUG9ydGFsQ29udGV4dCA9ICgwLCBfcmVhY3QuY3JlYXRlQ29udGV4dCkoZmFsc2UpOwpleHBvcnRzLkRyYWdnYWJsZVBvcnRhbENvbnRleHQgPSBEcmFnZ2FibGVQb3J0YWxDb250ZXh0OwoKdmFyIHVzZURyYWdnYWJsZVBvcnRhbENvbnRleHQgPSBmdW5jdGlvbiB1c2VEcmFnZ2FibGVQb3J0YWxDb250ZXh0KCkgewogIHJldHVybiAoMCwgX3JlYWN0LnVzZUNvbnRleHQpKERyYWdnYWJsZVBvcnRhbENvbnRleHQpOwp9OwovKioKICogV3JhcHMgdGhlIGByZWFjdC1iZWF1dGlmdWwtZG5kYCBlcnJvciBib3VuZGFyeS4gU2VlIGFsc286CiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hdGxhc3NpYW4vcmVhY3QtYmVhdXRpZnVsLWRuZC9ibG9iL3YxMi4wLjAvZG9jcy9ndWlkZXMvc2V0dXAtcHJvYmxlbS1kZXRlY3Rpb24tYW5kLWVycm9yLXJlY292ZXJ5Lm1kCiAqCiAqIE5PVEU6IFRoaXMgZXh0ZW5kcyBmcm9tIGBQdXJlQ29tcG9uZW50YCBiZWNhdXNlLCBhdCB0aGUgdGltZSBvZiB0aGlzCiAqIHdyaXRpbmcsIHRoZXJlJ3Mgbm8gaG9vayBlcXVpdmFsZW50IGZvciBgY29tcG9uZW50RGlkQ2F0Y2hgLCBwZXIKICogaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL2hvb2tzLWZhcS5odG1sI2RvLWhvb2tzLWNvdmVyLWFsbC11c2UtY2FzZXMtZm9yLWNsYXNzZXMKICovCgoKZXhwb3J0cy51c2VEcmFnZ2FibGVQb3J0YWxDb250ZXh0ID0gdXNlRHJhZ2dhYmxlUG9ydGFsQ29udGV4dDsKCnZhciBEcmFnRHJvcEVycm9yQm91bmRhcnkgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkgewogIF9pbmhlcml0cyhEcmFnRHJvcEVycm9yQm91bmRhcnksIF9SZWFjdCRQdXJlQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gRHJhZ0Ryb3BFcnJvckJvdW5kYXJ5KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYWdEcm9wRXJyb3JCb3VuZGFyeSk7CgogICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihEcmFnRHJvcEVycm9yQm91bmRhcnkpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKERyYWdEcm9wRXJyb3JCb3VuZGFyeSwgW3sKICAgIGtleTogImNvbXBvbmVudERpZENhdGNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRDYXRjaCgpIHsKICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpOyAvLyByZXF1aXJlZCBmb3IgcmVjb3ZlcnkKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY2hpbGRyZW47CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRHJhZ0Ryb3BFcnJvckJvdW5kYXJ5Owp9KF9yZWFjdC5kZWZhdWx0LlB1cmVDb21wb25lbnQpOwoKdmFyIFdyYXBwZXIgPSBfc3R5bGVkQ29tcG9uZW50cy5kZWZhdWx0LmRpdi53aXRoQ29uZmlnKHsKICBkaXNwbGF5TmFtZTogIldyYXBwZXIiLAogIGNvbXBvbmVudElkOiAibGYzY2hyLTEiCn0pKFsiZGlzcGxheTppbmxpbmUtYmxvY2s7bWF4LXdpZHRoOjEwMCU7W2RhdGEtcmJkLXBsYWNlaG9sZGVyLWNvbnRleHQtaWRde2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30iXSk7CgpXcmFwcGVyLmRpc3BsYXlOYW1lID0gJ1dyYXBwZXInOwoKdmFyIFByb3ZpZGVyQ29udGVudFdyYXBwZXIgPSBfc3R5bGVkQ29tcG9uZW50cy5kZWZhdWx0LnNwYW4ud2l0aENvbmZpZyh7CiAgZGlzcGxheU5hbWU6ICJQcm92aWRlckNvbnRlbnRXcmFwcGVyIiwKICBjb21wb25lbnRJZDogImxmM2Noci0yIgp9KShbIj4gc3Bhbi5ldWlUb29sVGlwQW5jaG9ye2Rpc3BsYXk6YmxvY2s7fSJdKTsKLyoqCiAqIFdyYXBzIGEgZHJhZ2dhYmxlIGNvbXBvbmVudCB0byBoYW5kbGUgcmVnaXN0cmF0aW9uIC8gdW5yZWdpc3RyYXRpb24gb2YgdGhlCiAqIGRhdGEgcHJvdmlkZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBpdGVtIGJlaW5nIGRyb3BwZWQKICovCgoKdmFyIERyYWdnYWJsZVdyYXBwZXJDb21wb25lbnQgPSBfcmVhY3QuZGVmYXVsdC5tZW1vKGZ1bmN0aW9uIChfcmVmKSB7CiAgdmFyIGRhdGFQcm92aWRlciA9IF9yZWYuZGF0YVByb3ZpZGVyLAogICAgICByZWdpc3RlclByb3ZpZGVyID0gX3JlZi5yZWdpc3RlclByb3ZpZGVyLAogICAgICByZW5kZXIgPSBfcmVmLnJlbmRlciwKICAgICAgdHJ1bmNhdGUgPSBfcmVmLnRydW5jYXRlLAogICAgICB1blJlZ2lzdGVyUHJvdmlkZXIgPSBfcmVmLnVuUmVnaXN0ZXJQcm92aWRlcjsKICB2YXIgdXNlUG9ydGFsID0gdXNlRHJhZ2dhYmxlUG9ydGFsQ29udGV4dCgpOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICByZWdpc3RlclByb3ZpZGVyKHsKICAgICAgcHJvdmlkZXI6IGRhdGFQcm92aWRlcgogICAgfSk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB1blJlZ2lzdGVyUHJvdmlkZXIoewogICAgICAgIGlkOiBkYXRhUHJvdmlkZXIuaWQKICAgICAgfSk7CiAgICB9OwogIH0sIFtdKTsKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChXcmFwcGVyLCB7CiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZHJhZ2dhYmxlV3JhcHBlckRpdiIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KERyYWdEcm9wRXJyb3JCb3VuZGFyeSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RCZWF1dGlmdWxEbmQuRHJvcHBhYmxlLCB7CiAgICBpc0Ryb3BEaXNhYmxlZDogdHJ1ZSwKICAgIGRyb3BwYWJsZUlkOiAoMCwgX2hlbHBlcnMuZ2V0RHJvcHBhYmxlSWQpKGRhdGFQcm92aWRlci5pZCkKICB9LCBmdW5jdGlvbiAoZHJvcHBhYmxlUHJvdmlkZWQpIHsKICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBfZXh0ZW5kcyh7CiAgICAgIHJlZjogZHJvcHBhYmxlUHJvdmlkZWQuaW5uZXJSZWYKICAgIH0sIGRyb3BwYWJsZVByb3ZpZGVkLmRyb3BwYWJsZVByb3BzKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RCZWF1dGlmdWxEbmQuRHJhZ2dhYmxlLCB7CiAgICAgIGRyYWdnYWJsZUlkOiAoMCwgX2hlbHBlcnMuZ2V0RHJhZ2dhYmxlSWQpKGRhdGFQcm92aWRlci5pZCksCiAgICAgIGluZGV4OiAwLAogICAgICBrZXk6ICgwLCBfaGVscGVycy5nZXREcmFnZ2FibGVJZCkoZGF0YVByb3ZpZGVyLmlkKQogICAgfSwgZnVuY3Rpb24gKHByb3ZpZGVkLCBzbmFwc2hvdCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChDb25kaXRpb25hbFBvcnRhbCwgewogICAgICAgIHVzZVBvcnRhbDogc25hcHNob3QuaXNEcmFnZ2luZyAmJiB1c2VQb3J0YWwKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcHJvdmlkZXJfY29udGFpbmVyLlByb3ZpZGVyQ29udGFpbmVyLCBfZXh0ZW5kcyh7fSwgcHJvdmlkZWQuZHJhZ2dhYmxlUHJvcHMsIHByb3ZpZGVkLmRyYWdIYW5kbGVQcm9wcywgewogICAgICAgIHJlZjogcHJvdmlkZWQuaW5uZXJSZWYsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInByb3ZpZGVyQ29udGFpbmVyIiwKICAgICAgICBpc0RyYWdnaW5nOiBzbmFwc2hvdC5pc0RyYWdnaW5nLAogICAgICAgIHN0eWxlOiBfb2JqZWN0U3ByZWFkKHt9LCBwcm92aWRlZC5kcmFnZ2FibGVQcm9wcy5zdHlsZSkKICAgICAgfSksIHRydW5jYXRlICYmICFzbmFwc2hvdC5pc0RyYWdnaW5nID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdHJ1bmNhdGFibGVfdGV4dC5UcnVuY2F0YWJsZVRleHQsIHsKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZHJhZ2dhYmxlLXRydW5jYXRhYmxlLWNvbnRlbnQiCiAgICAgIH0sIHJlbmRlcihkYXRhUHJvdmlkZXIsIHByb3ZpZGVkLCBzbmFwc2hvdCkpIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChQcm92aWRlckNvbnRlbnRXcmFwcGVyLCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImRyYWdnYWJsZS1jb250ZW50LSIuY29uY2F0KGRhdGFQcm92aWRlci5xdWVyeU1hdGNoLmZpZWxkKQogICAgICB9LCByZW5kZXIoZGF0YVByb3ZpZGVyLCBwcm92aWRlZCwgc25hcHNob3QpKSkpOwogICAgfSksIGRyb3BwYWJsZVByb3ZpZGVkLnBsYWNlaG9sZGVyKTsKICB9KSkpOwp9LCBmdW5jdGlvbiAocHJldlByb3BzLCBuZXh0UHJvcHMpIHsKICByZXR1cm4gKDAsIF9mcC5pc0VxdWFsKShwcmV2UHJvcHMuZGF0YVByb3ZpZGVyLCBuZXh0UHJvcHMuZGF0YVByb3ZpZGVyKSAmJiBwcmV2UHJvcHMucmVuZGVyICE9PSBuZXh0UHJvcHMucmVuZGVyICYmIHByZXZQcm9wcy50cnVuY2F0ZSA9PT0gbmV4dFByb3BzLnRydW5jYXRlOwp9KTsKCkRyYWdnYWJsZVdyYXBwZXJDb21wb25lbnQuZGlzcGxheU5hbWUgPSAnRHJhZ2dhYmxlV3JhcHBlckNvbXBvbmVudCc7CnZhciBEcmFnZ2FibGVXcmFwcGVyID0gKDAsIF9yZWFjdFJlZHV4LmNvbm5lY3QpKG51bGwsIHsKICByZWdpc3RlclByb3ZpZGVyOiBfZHJhZ19hbmRfZHJvcC5kcmFnQW5kRHJvcEFjdGlvbnMucmVnaXN0ZXJQcm92aWRlciwKICB1blJlZ2lzdGVyUHJvdmlkZXI6IF9kcmFnX2FuZF9kcm9wLmRyYWdBbmREcm9wQWN0aW9ucy51blJlZ2lzdGVyUHJvdmlkZXIKfSkoRHJhZ2dhYmxlV3JhcHBlckNvbXBvbmVudCk7CmV4cG9ydHMuRHJhZ2dhYmxlV3JhcHBlciA9IERyYWdnYWJsZVdyYXBwZXI7CkRyYWdnYWJsZVdyYXBwZXIuZGlzcGxheU5hbWUgPSAnRHJhZ2dhYmxlV3JhcHBlcic7Ci8qKgogKiBDb25kaXRpb25hbGx5IHdyYXBzIGNoaWxkcmVuIGluIGFuIEV1aVBvcnRhbCB0byBlbnN1cmUgZHJhZyBvZmZzZXRzIGFyZSBjb3JyZWN0IHdoZW4gZHJhZ2dpbmcKICogZnJvbSBjb250YWluZXJzIHRoYXQgaGF2ZSBjc3MgdHJhbnNmb3JtcwogKgogKiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9hdGxhc3NpYW4vcmVhY3QtYmVhdXRpZnVsLWRuZC9pc3N1ZXMvNDk5CiAqLwoKdmFyIENvbmRpdGlvbmFsUG9ydGFsID0gX3JlYWN0LmRlZmF1bHQubWVtbyhmdW5jdGlvbiAoX3JlZjIpIHsKICB2YXIgY2hpbGRyZW4gPSBfcmVmMi5jaGlsZHJlbiwKICAgICAgdXNlUG9ydGFsID0gX3JlZjIudXNlUG9ydGFsOwogIHJldHVybiB1c2VQb3J0YWwgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUG9ydGFsLCBudWxsLCBjaGlsZHJlbikgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5kZWZhdWx0LkZyYWdtZW50LCBudWxsLCBjaGlsZHJlbik7Cn0pOwoKQ29uZGl0aW9uYWxQb3J0YWwuZGlzcGxheU5hbWUgPSAnQ29uZGl0aW9uYWxQb3J0YWwnOw=="},null]}