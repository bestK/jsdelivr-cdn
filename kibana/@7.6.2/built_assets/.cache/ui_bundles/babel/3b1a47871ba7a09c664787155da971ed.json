{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/graph/public/state_management/persistence.js","dependencies":[{"path":"x-pack/legacy/plugins/graph/public/state_management/persistence.js","mtime":1585205044281},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnNhdmluZ1NhZ2EgPSBleHBvcnRzLmxvYWRpbmdTYWdhID0gZXhwb3J0cy5zYXZlV29ya3NwYWNlID0gZXhwb3J0cy5sb2FkU2F2ZWRXb3Jrc3BhY2UgPSB2b2lkIDA7Cgp2YXIgX3R5cGVzY3JpcHRGc2EgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInR5cGVzY3JpcHQtZnNhIikpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2VmZmVjdHMgPSByZXF1aXJlKCJyZWR1eC1zYWdhL2VmZmVjdHMiKTsKCnZhciBfZGF0YXNvdXJjZSA9IHJlcXVpcmUoIi4vZGF0YXNvdXJjZSIpOwoKdmFyIF9maWVsZHMgPSByZXF1aXJlKCIuL2ZpZWxkcyIpOwoKdmFyIF9hZHZhbmNlZF9zZXR0aW5ncyA9IHJlcXVpcmUoIi4vYWR2YW5jZWRfc2V0dGluZ3MiKTsKCnZhciBfdXJsX3RlbXBsYXRlcyA9IHJlcXVpcmUoIi4vdXJsX3RlbXBsYXRlcyIpOwoKdmFyIF9wZXJzaXN0ZW5jZSA9IHJlcXVpcmUoIi4uL3NlcnZpY2VzL3BlcnNpc3RlbmNlIik7Cgp2YXIgX21ldGFfZGF0YSA9IHJlcXVpcmUoIi4vbWV0YV9kYXRhIik7Cgp2YXIgX3NhdmVfbW9kYWwgPSByZXF1aXJlKCIuLi9zZXJ2aWNlcy9zYXZlX21vZGFsIik7Cgp2YXIgX3VybCA9IHJlcXVpcmUoIi4uL3NlcnZpY2VzL3VybCIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQovKgogKiBDb3B5cmlnaHQgRWxhc3RpY3NlYXJjaCBCLlYuIGFuZC9vciBsaWNlbnNlZCB0byBFbGFzdGljc2VhcmNoIEIuVi4gdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiBMaWNlbnNlZCB1bmRlciB0aGUgRWxhc3RpYyBMaWNlbnNlOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIEVsYXN0aWMgTGljZW5zZS4KICovCgoKdmFyIGFjdGlvbkNyZWF0b3IgPSAoMCwgX3R5cGVzY3JpcHRGc2EuZGVmYXVsdCkoJ3gtcGFjay9ncmFwaCcpOwp2YXIgbG9hZFNhdmVkV29ya3NwYWNlID0gYWN0aW9uQ3JlYXRvcignTE9BRF9XT1JLU1BBQ0UnKTsKZXhwb3J0cy5sb2FkU2F2ZWRXb3Jrc3BhY2UgPSBsb2FkU2F2ZWRXb3Jrc3BhY2U7CnZhciBzYXZlV29ya3NwYWNlID0gYWN0aW9uQ3JlYXRvcignU0FWRV9XT1JLU1BBQ0UnKTsKLyoqCiAqIFNhZ2EgaGFuZGxpbmcgbG9hZGluZyBvZiBhIHNhdmVkIHdvcmtzcGFjZS4KICoKICogSXQgd2lsbCBsb2FkIHRoZSBpbmRleCBwYXR0ZXJuIGFzc29jaWF0ZWQgd2l0aCB0aGUgc2F2ZWQgb2JqZWN0IGFuZCBkZXNlcmlhbGl6ZSBhbGwgcHJvcGVydGllcwogKiBpbnRvIHRoZSBzdG9yZS4gRXhpc3Rpbmcgc3RhdGUgd2lsbCBiZSBvdmVyd3JpdHRlbi4KICovCgpleHBvcnRzLnNhdmVXb3Jrc3BhY2UgPSBzYXZlV29ya3NwYWNlOwoKdmFyIGxvYWRpbmdTYWdhID0gZnVuY3Rpb24gbG9hZGluZ1NhZ2EoX3JlZikgewogIHZhciBfbWFya2VkID0KICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZGVzZXJpYWxpemVXb3Jrc3BhY2UpOwoKICB2YXIgY3JlYXRlV29ya3NwYWNlID0gX3JlZi5jcmVhdGVXb3Jrc3BhY2UsCiAgICAgIGdldFdvcmtzcGFjZSA9IF9yZWYuZ2V0V29ya3NwYWNlLAogICAgICBpbmRleFBhdHRlcm5zID0gX3JlZi5pbmRleFBhdHRlcm5zLAogICAgICBub3RpZmljYXRpb25zID0gX3JlZi5ub3RpZmljYXRpb25zLAogICAgICBpbmRleFBhdHRlcm5Qcm92aWRlciA9IF9yZWYuaW5kZXhQYXR0ZXJuUHJvdmlkZXI7CgogIGZ1bmN0aW9uIGRlc2VyaWFsaXplV29ya3NwYWNlKGFjdGlvbikgewogICAgdmFyIHNlbGVjdGVkSW5kZXgsIGluZGV4UGF0dGVybiwgaW5pdGlhbFNldHRpbmdzLCBfc2F2ZWRXb3Jrc3BhY2VUb0FwcFMsIHVybFRlbXBsYXRlcywgYWR2YW5jZWRTZXR0aW5ncywgYWxsRmllbGRzOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBkZXNlcmlhbGl6ZVdvcmtzcGFjZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHNlbGVjdGVkSW5kZXggPSAoMCwgX3BlcnNpc3RlbmNlLmxvb2t1cEluZGV4UGF0dGVybikoYWN0aW9uLnBheWxvYWQsIGluZGV4UGF0dGVybnMpOwoKICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXgpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbm90aWZpY2F0aW9ucy50b2FzdHMuYWRkRGFuZ2VyKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5ncmFwaC5sb2FkV29ya3NwYWNlLm1pc3NpbmdJbmRleFBhdHRlcm5FcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdJbmRleCBwYXR0ZXJuIG5vdCBmb3VuZCcKICAgICAgICAgICAgfSkpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICByZXR1cm4gKDAsIF9lZmZlY3RzLmNhbGwpKGluZGV4UGF0dGVyblByb3ZpZGVyLmdldCwgc2VsZWN0ZWRJbmRleC5pZCk7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBpbmRleFBhdHRlcm4gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9hZHZhbmNlZF9zZXR0aW5ncy5zZXR0aW5nc1NlbGVjdG9yOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgIHJldHVybiAoMCwgX2VmZmVjdHMuc2VsZWN0KSgpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIF9jb250ZXh0LnQxID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgaW5pdGlhbFNldHRpbmdzID0gKDAsIF9jb250ZXh0LnQwKShfY29udGV4dC50MSk7CiAgICAgICAgICAgIGNyZWF0ZVdvcmtzcGFjZShzZWxlY3RlZEluZGV4LmF0dHJpYnV0ZXMudGl0bGUsIGluaXRpYWxTZXR0aW5ncyk7CiAgICAgICAgICAgIF9zYXZlZFdvcmtzcGFjZVRvQXBwUyA9ICgwLCBfcGVyc2lzdGVuY2Uuc2F2ZWRXb3Jrc3BhY2VUb0FwcFN0YXRlKShhY3Rpb24ucGF5bG9hZCwgaW5kZXhQYXR0ZXJuLCAvLyB3b3Jrc3BhY2Ugd29uJ3QgYmUgbnVsbCBiZWNhdXNlIGl0J3MgY3JlYXRlZCBpbiB0aGUgc2FtZSBjYWxsIHN0YWNrCiAgICAgICAgICAgIGdldFdvcmtzcGFjZSgpKSwgdXJsVGVtcGxhdGVzID0gX3NhdmVkV29ya3NwYWNlVG9BcHBTLnVybFRlbXBsYXRlcywgYWR2YW5jZWRTZXR0aW5ncyA9IF9zYXZlZFdvcmtzcGFjZVRvQXBwUy5hZHZhbmNlZFNldHRpbmdzLCBhbGxGaWVsZHMgPSBfc2F2ZWRXb3Jrc3BhY2VUb0FwcFMuYWxsRmllbGRzOyAvLyBwdXQgZXZlcnl0aGluZyBpbiB0aGUgc3RvcmUKCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgcmV0dXJuICgwLCBfZWZmZWN0cy5wdXQpKCgwLCBfbWV0YV9kYXRhLnVwZGF0ZU1ldGFEYXRhKSh7CiAgICAgICAgICAgICAgdGl0bGU6IGFjdGlvbi5wYXlsb2FkLnRpdGxlLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBhY3Rpb24ucGF5bG9hZC5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICBzYXZlZE9iamVjdElkOiBhY3Rpb24ucGF5bG9hZC5pZAogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICByZXR1cm4gKDAsIF9lZmZlY3RzLnB1dCkoKDAsIF9kYXRhc291cmNlLnNldERhdGFzb3VyY2UpKHsKICAgICAgICAgICAgICB0eXBlOiAnaW5kZXhwYXR0ZXJuJywKICAgICAgICAgICAgICBpZDogc2VsZWN0ZWRJbmRleC5pZCwKICAgICAgICAgICAgICB0aXRsZTogc2VsZWN0ZWRJbmRleC5hdHRyaWJ1dGVzLnRpdGxlCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgIHJldHVybiAoMCwgX2VmZmVjdHMucHV0KSgoMCwgX2ZpZWxkcy5sb2FkRmllbGRzKShhbGxGaWVsZHMpKTsKCiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgIHJldHVybiAoMCwgX2VmZmVjdHMucHV0KSgoMCwgX2FkdmFuY2VkX3NldHRpbmdzLnVwZGF0ZVNldHRpbmdzKShhZHZhbmNlZFNldHRpbmdzKSk7CgogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI0OwogICAgICAgICAgICByZXR1cm4gKDAsIF9lZmZlY3RzLnB1dCkoKDAsIF91cmxfdGVtcGxhdGVzLmxvYWRUZW1wbGF0ZXMpKHVybFRlbXBsYXRlcykpOwoKICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgIGdldFdvcmtzcGFjZSgpLnJ1bkxheW91dCgpOwoKICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX21hcmtlZCk7CiAgfQoKICByZXR1cm4gKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gKDAsIF9lZmZlY3RzLnRha2VMYXRlc3QpKGxvYWRTYXZlZFdvcmtzcGFjZS5tYXRjaCwgZGVzZXJpYWxpemVXb3Jrc3BhY2UpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KQogICk7Cn07Ci8qKgogKiBTYWdhIGhhbmRsaW5nIHNhdmluZyBvZiBjdXJyZW50IHN0YXRlLgogKgogKiBJdCB3aWxsIHNlcmlhbGl6ZSBldmVyeXRoaW5nIGFuZCBzYXZlIGl0IHVzaW5nIHRoZSBzYXZlZCBvYmplY3RzIGNsaWVudAogKi8KCgpleHBvcnRzLmxvYWRpbmdTYWdhID0gbG9hZGluZ1NhZ2E7Cgp2YXIgc2F2aW5nU2FnYSA9IGZ1bmN0aW9uIHNhdmluZ1NhZ2EoZGVwcykgewogIHZhciBfbWFya2VkMiA9CiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKHBlcnNpc3RXb3Jrc3BhY2UpOwoKICBmdW5jdGlvbiBwZXJzaXN0V29ya3NwYWNlKCkgewogICAgdmFyIHNhdmVkV29ya3NwYWNlLCBzdGF0ZSwgd29ya3NwYWNlLCBzZWxlY3RlZERhdGFzb3VyY2UsIHNhdmVkT2JqZWN0SWQ7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gcGVyc2lzdFdvcmtzcGFjZSQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHNhdmVkV29ya3NwYWNlID0gZGVwcy5nZXRTYXZlZFdvcmtzcGFjZSgpOwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiAoMCwgX2VmZmVjdHMuc2VsZWN0KSgpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgc3RhdGUgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgd29ya3NwYWNlID0gZGVwcy5nZXRXb3Jrc3BhY2UoKTsKICAgICAgICAgICAgc2VsZWN0ZWREYXRhc291cmNlID0gKDAsIF9kYXRhc291cmNlLmRhdGFzb3VyY2VTZWxlY3Rvcikoc3RhdGUpLmN1cnJlbnQ7CgogICAgICAgICAgICBpZiAoISghd29ya3NwYWNlIHx8IHNlbGVjdGVkRGF0YXNvdXJjZS50eXBlID09PSAnbm9uZScpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwOwogICAgICAgICAgICByZXR1cm4gKDAsIF9lZmZlY3RzLmNwcykoc2hvd01vZGFsLCB7CiAgICAgICAgICAgICAgZGVwczogZGVwcywKICAgICAgICAgICAgICB3b3Jrc3BhY2U6IHdvcmtzcGFjZSwKICAgICAgICAgICAgICBzYXZlZFdvcmtzcGFjZTogc2F2ZWRXb3Jrc3BhY2UsCiAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlLAogICAgICAgICAgICAgIHNlbGVjdGVkRGF0YXNvdXJjZTogc2VsZWN0ZWREYXRhc291cmNlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIHNhdmVkT2JqZWN0SWQgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgIGlmICghc2F2ZWRPYmplY3RJZCkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTQ7CiAgICAgICAgICAgIHJldHVybiAoMCwgX2VmZmVjdHMucHV0KSgoMCwgX21ldGFfZGF0YS51cGRhdGVNZXRhRGF0YSkoewogICAgICAgICAgICAgIHNhdmVkT2JqZWN0SWQ6IHNhdmVkT2JqZWN0SWQKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9tYXJrZWQyKTsKICB9CgogIHJldHVybiAoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBfZWZmZWN0cy50YWtlTGF0ZXN0KShzYXZlV29ya3NwYWNlLm1hdGNoLCBwZXJzaXN0V29ya3NwYWNlKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pCiAgKTsKfTsKCmV4cG9ydHMuc2F2aW5nU2FnYSA9IHNhdmluZ1NhZ2E7CgpmdW5jdGlvbiBzaG93TW9kYWwoX3JlZjIsIHNhdmluZ0NhbGxiYWNrKSB7CiAgdmFyIGRlcHMgPSBfcmVmMi5kZXBzLAogICAgICB3b3Jrc3BhY2UgPSBfcmVmMi53b3Jrc3BhY2UsCiAgICAgIHNhdmVkV29ya3NwYWNlID0gX3JlZjIuc2F2ZWRXb3Jrc3BhY2UsCiAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGUsCiAgICAgIHNlbGVjdGVkRGF0YXNvdXJjZSA9IF9yZWYyLnNlbGVjdGVkRGF0YXNvdXJjZTsKCiAgdmFyIHNhdmVXb3Jrc3BhY2VIYW5kbGVyID0gZnVuY3Rpb24gc2F2ZVdvcmtzcGFjZUhhbmRsZXIoc2F2ZU9wdGlvbnMsIHVzZXJIYXNDb25maXJtZWRTYXZlV29ya3NwYWNlRGF0YSkgewogICAgdmFyIGNhblNhdmVEYXRhLCBfaWQsIHRpdGxlLCB0ZXh0OwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc2F2ZVdvcmtzcGFjZUhhbmRsZXIkKF9jb250ZXh0NSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBjYW5TYXZlRGF0YSA9IGRlcHMuc2F2ZVBvbGljeSA9PT0gJ2NvbmZpZ0FuZERhdGEnIHx8IGRlcHMuc2F2ZVBvbGljeSA9PT0gJ2NvbmZpZ0FuZERhdGFXaXRoQ29uc2VudCcgJiYgdXNlckhhc0NvbmZpcm1lZFNhdmVXb3Jrc3BhY2VEYXRhOwogICAgICAgICAgICAoMCwgX3BlcnNpc3RlbmNlLmFwcFN0YXRlVG9TYXZlZFdvcmtzcGFjZSkoc2F2ZWRXb3Jrc3BhY2UsIHsKICAgICAgICAgICAgICB3b3Jrc3BhY2U6IHdvcmtzcGFjZSwKICAgICAgICAgICAgICB1cmxUZW1wbGF0ZXM6ICgwLCBfdXJsX3RlbXBsYXRlcy50ZW1wbGF0ZXNTZWxlY3Rvcikoc3RhdGUpLAogICAgICAgICAgICAgIGFkdmFuY2VkU2V0dGluZ3M6ICgwLCBfYWR2YW5jZWRfc2V0dGluZ3Muc2V0dGluZ3NTZWxlY3Rvcikoc3RhdGUpLAogICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXg6IHNlbGVjdGVkRGF0YXNvdXJjZSwKICAgICAgICAgICAgICBzZWxlY3RlZEZpZWxkczogKDAsIF9maWVsZHMuc2VsZWN0ZWRGaWVsZHNTZWxlY3Rvcikoc3RhdGUpCiAgICAgICAgICAgIH0sIGNhblNhdmVEYXRhKTsKICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAyOwogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2F2ZWRXb3Jrc3BhY2Uuc2F2ZShzYXZlT3B0aW9ucykpOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgX2lkID0gX2NvbnRleHQ1LnNlbnQ7CgogICAgICAgICAgICBpZiAoX2lkKSB7CiAgICAgICAgICAgICAgdGl0bGUgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suZ3JhcGguc2F2ZVdvcmtzcGFjZS5zdWNjZXNzTm90aWZpY2F0aW9uVGl0bGUnLCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NhdmVkICJ7d29ya3NwYWNlVGl0bGV9IicsCiAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgd29ya3NwYWNlVGl0bGU6IHNhdmVkV29ya3NwYWNlLnRpdGxlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGlmICghY2FuU2F2ZURhdGEgJiYgd29ya3NwYWNlLm5vZGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHRleHQgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suZ3JhcGguc2F2ZVdvcmtzcGFjZS5zdWNjZXNzTm90aWZpY2F0aW9uLm5vRGF0YVNhdmVkVGV4dCcsIHsKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUaGUgY29uZmlndXJhdGlvbiB3YXMgc2F2ZWQsIGJ1dCB0aGUgZGF0YSB3YXMgbm90IHNhdmVkJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBkZXBzLm5vdGlmaWNhdGlvbnMudG9hc3RzLmFkZFN1Y2Nlc3MoewogICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgICAgICAgdGV4dDogdGV4dCwKICAgICAgICAgICAgICAgICdkYXRhLXRlc3Qtc3Viaic6ICdzYXZlR3JhcGhTdWNjZXNzJwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBpZiAoc2F2ZWRXb3Jrc3BhY2UuaWQgIT09ICgwLCBfbWV0YV9kYXRhLm1ldGFEYXRhU2VsZWN0b3IpKHN0YXRlKS5zYXZlZE9iamVjdElkKSB7CiAgICAgICAgICAgICAgICBkZXBzLmNoYW5nZVVybCgoMCwgX3VybC5nZXRFZGl0UGF0aCkoc2F2ZWRXb3Jrc3BhY2UpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNhdmluZ0NhbGxiYWNrKG51bGwsIF9pZCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgaWQ6IF9pZAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDExOwogICAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDVbImNhdGNoIl0oMik7CiAgICAgICAgICAgIGRlcHMubm90aWZpY2F0aW9ucy50b2FzdHMuYWRkRGFuZ2VyKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5ncmFwaC5zYXZlV29ya3NwYWNlLnNhdmluZ0Vycm9yTWVzc2FnZScsIHsKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ZhaWxlZCB0byBzYXZlIHdvcmtzcGFjZToge21lc3NhZ2V9JywKICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IF9jb250ZXh0NS50MAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDUudDAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgbnVsbCwgbnVsbCwgW1syLCAxMV1dKTsKICB9OwoKICAoMCwgX3NhdmVfbW9kYWwub3BlblNhdmVNb2RhbCkoewogICAgc2F2ZVBvbGljeTogZGVwcy5zYXZlUG9saWN5LAogICAgaGFzRGF0YTogd29ya3NwYWNlLm5vZGVzLmxlbmd0aCA+IDAgfHwgd29ya3NwYWNlLmJsYWNrbGlzdGVkTm9kZXMubGVuZ3RoID4gMCwKICAgIHdvcmtzcGFjZTogc2F2ZWRXb3Jrc3BhY2UsCiAgICBzaG93U2F2ZU1vZGFsOiBkZXBzLnNob3dTYXZlTW9kYWwsCiAgICBzYXZlV29ya3NwYWNlOiBzYXZlV29ya3NwYWNlSGFuZGxlcgogIH0pOwp9"},null]}