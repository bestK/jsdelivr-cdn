{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/lens/public/xy_visualization_plugin/xy_suggestions.js","dependencies":[{"path":"x-pack/legacy/plugins/lens/public/xy_visualization_plugin/xy_suggestions.js","mtime":1585205045061},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmdldFN1Z2dlc3Rpb25zID0gZ2V0U3VnZ2VzdGlvbnM7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2NoYXJ0cyA9IHJlcXVpcmUoIkBlbGFzdGljL2NoYXJ0cyIpOwoKdmFyIF9pZF9nZW5lcmF0b3IgPSByZXF1aXJlKCIuLi9pZF9nZW5lcmF0b3IiKTsKCnZhciBfc3RhdGVfaGVscGVycyA9IHJlcXVpcmUoIi4vc3RhdGVfaGVscGVycyIpOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBfdG9BcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCnZhciBjb2x1bW5Tb3J0T3JkZXIgPSB7CiAgZG9jdW1lbnQ6IDAsCiAgZGF0ZTogMSwKICBzdHJpbmc6IDIsCiAgaXA6IDMsCiAgYm9vbGVhbjogNCwKICBudW1iZXI6IDUKfTsKLyoqCiAqIEdlbmVyYXRlIHN1Z2dlc3Rpb25zIGZvciB0aGUgeHkgY2hhcnQuCiAqCiAqIEBwYXJhbSBvcHRzCiAqLwoKZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbnMoX3JlZikgewogIHZhciB0YWJsZSA9IF9yZWYudGFibGUsCiAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZSwKICAgICAga2VwdExheWVySWRzID0gX3JlZi5rZXB0TGF5ZXJJZHM7CgogIGlmICggLy8gV2Ugb25seSByZW5kZXIgbGluZSBjaGFydHMgZm9yIG11bHRpLXJvdyBxdWVyaWVzLiBXZSByZXF1aXJlIGF0IGxlYXN0CiAgLy8gdHdvIGNvbHVtbnM6IG9uZSBmb3IgeCBhbmQgYXQgbGVhc3Qgb25lIGZvciB5LCBhbmQgeSBjb2x1bW5zIG11c3QgYmUgbnVtZXJpYy4KICAvLyBXZSByZWplY3QgYW55IGRhdGFzb3VyY2Ugc3VnZ2VzdGlvbnMgd2hpY2ggaGF2ZSBhIGNvbHVtbiBvZiBhbiB1bmtub3duIHR5cGUuCiAgIXRhYmxlLmlzTXVsdGlSb3cgfHwgdGFibGUuY29sdW1ucy5sZW5ndGggPD0gMSB8fCB0YWJsZS5jb2x1bW5zLmV2ZXJ5KGZ1bmN0aW9uIChjb2wpIHsKICAgIHJldHVybiBjb2wub3BlcmF0aW9uLmRhdGFUeXBlICE9PSAnbnVtYmVyJzsKICB9KSB8fCB0YWJsZS5jb2x1bW5zLnNvbWUoZnVuY3Rpb24gKGNvbCkgewogICAgcmV0dXJuICFjb2x1bW5Tb3J0T3JkZXIuaGFzT3duUHJvcGVydHkoY29sLm9wZXJhdGlvbi5kYXRhVHlwZSk7CiAgfSkpIHsKICAgIHJldHVybiBbXTsKICB9CgogIHZhciBzdWdnZXN0aW9ucyA9IGdldFN1Z2dlc3Rpb25Gb3JDb2x1bW5zKHRhYmxlLCBrZXB0TGF5ZXJJZHMsIHN0YXRlKTsKCiAgaWYgKHN1Z2dlc3Rpb25zICYmIHN1Z2dlc3Rpb25zIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgIHJldHVybiBzdWdnZXN0aW9uczsKICB9CgogIHJldHVybiBzdWdnZXN0aW9ucyA/IFtzdWdnZXN0aW9uc10gOiBbXTsKfQoKZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbkZvckNvbHVtbnModGFibGUsIGtlcHRMYXllcklkcywgY3VycmVudFN0YXRlKSB7CiAgdmFyIF9wYXJ0aXRpb24gPSAoMCwgX2xvZGFzaC5wYXJ0aXRpb24pKHRhYmxlLmNvbHVtbnMsIGZ1bmN0aW9uIChjb2wpIHsKICAgIHJldHVybiBjb2wub3BlcmF0aW9uLmlzQnVja2V0ZWQ7CiAgfSksCiAgICAgIF9wYXJ0aXRpb24yID0gX3NsaWNlZFRvQXJyYXkoX3BhcnRpdGlvbiwgMiksCiAgICAgIGJ1Y2tldHMgPSBfcGFydGl0aW9uMlswXSwKICAgICAgdmFsdWVzID0gX3BhcnRpdGlvbjJbMV07CgogIGlmIChidWNrZXRzLmxlbmd0aCA9PT0gMSB8fCBidWNrZXRzLmxlbmd0aCA9PT0gMikgewogICAgdmFyIF9nZXRCdWNrZXRNYXBwaW5ncyA9IGdldEJ1Y2tldE1hcHBpbmdzKHRhYmxlLCBjdXJyZW50U3RhdGUpLAogICAgICAgIF9nZXRCdWNrZXRNYXBwaW5nczIgPSBfc2xpY2VkVG9BcnJheShfZ2V0QnVja2V0TWFwcGluZ3MsIDIpLAogICAgICAgIHggPSBfZ2V0QnVja2V0TWFwcGluZ3MyWzBdLAogICAgICAgIHNwbGl0QnkgPSBfZ2V0QnVja2V0TWFwcGluZ3MyWzFdOwoKICAgIHJldHVybiBnZXRTdWdnZXN0aW9uc0ZvckxheWVyKHsKICAgICAgbGF5ZXJJZDogdGFibGUubGF5ZXJJZCwKICAgICAgY2hhbmdlVHlwZTogdGFibGUuY2hhbmdlVHlwZSwKICAgICAgeFZhbHVlOiB4LAogICAgICB5VmFsdWVzOiB2YWx1ZXMsCiAgICAgIHNwbGl0Qnk6IHNwbGl0QnksCiAgICAgIGN1cnJlbnRTdGF0ZTogY3VycmVudFN0YXRlLAogICAgICB0YWJsZUxhYmVsOiB0YWJsZS5sYWJlbCwKICAgICAga2VwdExheWVySWRzOiBrZXB0TGF5ZXJJZHMKICAgIH0pOwogIH0gZWxzZSBpZiAoYnVja2V0cy5sZW5ndGggPT09IDApIHsKICAgIHZhciBfcHJpb3JpdGl6ZUNvbHVtbnMgPSBwcmlvcml0aXplQ29sdW1ucyh2YWx1ZXMpLAogICAgICAgIF9wcmlvcml0aXplQ29sdW1uczIgPSBfdG9BcnJheShfcHJpb3JpdGl6ZUNvbHVtbnMpLAogICAgICAgIF94ID0gX3ByaW9yaXRpemVDb2x1bW5zMlswXSwKICAgICAgICB5VmFsdWVzID0gX3ByaW9yaXRpemVDb2x1bW5zMi5zbGljZSgxKTsKCiAgICByZXR1cm4gZ2V0U3VnZ2VzdGlvbnNGb3JMYXllcih7CiAgICAgIGxheWVySWQ6IHRhYmxlLmxheWVySWQsCiAgICAgIGNoYW5nZVR5cGU6IHRhYmxlLmNoYW5nZVR5cGUsCiAgICAgIHhWYWx1ZTogX3gsCiAgICAgIHlWYWx1ZXM6IHlWYWx1ZXMsCiAgICAgIHNwbGl0Qnk6IHVuZGVmaW5lZCwKICAgICAgY3VycmVudFN0YXRlOiBjdXJyZW50U3RhdGUsCiAgICAgIHRhYmxlTGFiZWw6IHRhYmxlLmxhYmVsLAogICAgICBrZXB0TGF5ZXJJZHM6IGtlcHRMYXllcklkcwogICAgfSk7CiAgfQp9CgpmdW5jdGlvbiBnZXRCdWNrZXRNYXBwaW5ncyh0YWJsZSwgY3VycmVudFN0YXRlKSB7CiAgdmFyIGN1cnJlbnRMYXllciA9IGN1cnJlbnRTdGF0ZSAmJiBjdXJyZW50U3RhdGUubGF5ZXJzLmZpbmQoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICB2YXIgbGF5ZXJJZCA9IF9yZWYyLmxheWVySWQ7CiAgICByZXR1cm4gbGF5ZXJJZCA9PT0gdGFibGUubGF5ZXJJZDsKICB9KTsKICB2YXIgYnVja2V0cyA9IHRhYmxlLmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChjb2wpIHsKICAgIHJldHVybiBjb2wub3BlcmF0aW9uLmlzQnVja2V0ZWQ7CiAgfSk7IC8vIHJldmVyc2UgdGhlIGJ1Y2tldHMgYmVmb3JlIHByaW9yaXRpemF0aW9uIHRvIGFsd2F5cyB1c2UgdGhlIG1vc3QgaW5uZXIKICAvLyBidWNrZXQgb2YgdGhlIGhpZ2hlc3QtcHJpb3JpdGl6ZWQgZ3JvdXAgYXMgeCB2YWx1ZSAoZG9uJ3QgdXNlIG5lc3RlZAogIC8vIGJ1Y2tldHMgYXMgc3BsaXQgc2VyaWVzKQoKICB2YXIgcHJpb3JpdGl6ZWRCdWNrZXRzID0gcHJpb3JpdGl6ZUNvbHVtbnMoYnVja2V0cy5yZXZlcnNlKCkpOwoKICBpZiAoIWN1cnJlbnRMYXllciB8fCB0YWJsZS5jaGFuZ2VUeXBlID09PSAnaW5pdGlhbCcpIHsKICAgIHJldHVybiBwcmlvcml0aXplZEJ1Y2tldHM7CiAgfSAvLyBpZiBleGlzdGluZyB0YWJsZSBpcyBqdXN0IG1vZGlmaWVkLCB0cnkgdG8gbWFwIGJ1Y2tldHMgdG8gdGhlIGN1cnJlbnQgZGltZW5zaW9ucwoKCiAgdmFyIGN1cnJlbnRYQ29sdW1uSW5kZXggPSBwcmlvcml0aXplZEJ1Y2tldHMuZmluZEluZGV4KGZ1bmN0aW9uIChfcmVmMykgewogICAgdmFyIGNvbHVtbklkID0gX3JlZjMuY29sdW1uSWQ7CiAgICByZXR1cm4gY29sdW1uSWQgPT09IGN1cnJlbnRMYXllci54QWNjZXNzb3I7CiAgfSk7CiAgdmFyIGN1cnJlbnRYRGF0YVR5cGUgPSBjdXJyZW50WENvbHVtbkluZGV4ID4gLTEgJiYgcHJpb3JpdGl6ZWRCdWNrZXRzW2N1cnJlbnRYQ29sdW1uSW5kZXhdLm9wZXJhdGlvbi5kYXRhVHlwZTsKCiAgaWYgKGN1cnJlbnRYRGF0YVR5cGUgJiYgKCAvLyBtYWtlIHN1cmUgdGltZSBnZXRzIG1hcHBlZCB0byB4IGRpbWVuc2lvbiBldmVuIHdoZW4gY2hhbmdpbmcgY3VycmVudCBidWNrZXQvZGltZW5zaW9uIG1hcHBpbmcKICBjdXJyZW50WERhdGFUeXBlID09PSAnZGF0ZScgfHwgcHJpb3JpdGl6ZWRCdWNrZXRzWzBdLm9wZXJhdGlvbi5kYXRhVHlwZSAhPT0gJ2RhdGUnKSkgewogICAgdmFyIF9wcmlvcml0aXplZEJ1Y2tldHMkcyA9IHByaW9yaXRpemVkQnVja2V0cy5zcGxpY2UoY3VycmVudFhDb2x1bW5JbmRleCwgMSksCiAgICAgICAgX3ByaW9yaXRpemVkQnVja2V0cyRzMiA9IF9zbGljZWRUb0FycmF5KF9wcmlvcml0aXplZEJ1Y2tldHMkcywgMSksCiAgICAgICAgeCA9IF9wcmlvcml0aXplZEJ1Y2tldHMkczJbMF07CgogICAgcHJpb3JpdGl6ZWRCdWNrZXRzLnVuc2hpZnQoeCk7CiAgfQoKICB2YXIgY3VycmVudFNwbGl0Q29sdW1uSW5kZXggPSBwcmlvcml0aXplZEJ1Y2tldHMuZmluZEluZGV4KGZ1bmN0aW9uIChfcmVmNCkgewogICAgdmFyIGNvbHVtbklkID0gX3JlZjQuY29sdW1uSWQ7CiAgICByZXR1cm4gY29sdW1uSWQgPT09IGN1cnJlbnRMYXllci5zcGxpdEFjY2Vzc29yOwogIH0pOwoKICBpZiAoY3VycmVudFNwbGl0Q29sdW1uSW5kZXggPiAtMSkgewogICAgdmFyIF9wcmlvcml0aXplZEJ1Y2tldHMkczMgPSBwcmlvcml0aXplZEJ1Y2tldHMuc3BsaWNlKGN1cnJlbnRTcGxpdENvbHVtbkluZGV4LCAxKSwKICAgICAgICBfcHJpb3JpdGl6ZWRCdWNrZXRzJHM0ID0gX3NsaWNlZFRvQXJyYXkoX3ByaW9yaXRpemVkQnVja2V0cyRzMywgMSksCiAgICAgICAgc3BsaXRCeSA9IF9wcmlvcml0aXplZEJ1Y2tldHMkczRbMF07CgogICAgcHJpb3JpdGl6ZWRCdWNrZXRzLnB1c2goc3BsaXRCeSk7CiAgfQoKICByZXR1cm4gcHJpb3JpdGl6ZWRCdWNrZXRzOwp9IC8vIFRoaXMgc2h1ZmZsZXMgY29sdW1ucyBhcm91bmQgc28gdGhhdCB0aGUgbGVmdC1tb3N0IGNvbHVtbiBkZWZ1YWx0cyB0bzoKLy8gZGF0ZSwgc3RyaW5nLCBib29sZWFuLCB0aGVuIG51bWJlciwgaW4gdGhhdCBwcmlvcml0eS4gV2UgdGhlbiB1c2UgdGhpcwovLyBvcmRlciB0byBwbHVjayBvdXQgdGhlIHggY29sdW1uLCBhbmQgdGhlIHNwbGl0IC8gc3RhY2sgY29sdW1uLgoKCmZ1bmN0aW9uIHByaW9yaXRpemVDb2x1bW5zKGNvbHVtbnMpIHsKICByZXR1cm4gX3RvQ29uc3VtYWJsZUFycmF5KGNvbHVtbnMpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgIHJldHVybiBjb2x1bW5Tb3J0T3JkZXJbYS5vcGVyYXRpb24uZGF0YVR5cGVdIC0gY29sdW1uU29ydE9yZGVyW2Iub3BlcmF0aW9uLmRhdGFUeXBlXTsKICB9KTsKfQoKZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbnNGb3JMYXllcihfcmVmNSkgewogIHZhciBsYXllcklkID0gX3JlZjUubGF5ZXJJZCwKICAgICAgY2hhbmdlVHlwZSA9IF9yZWY1LmNoYW5nZVR5cGUsCiAgICAgIHhWYWx1ZSA9IF9yZWY1LnhWYWx1ZSwKICAgICAgeVZhbHVlcyA9IF9yZWY1LnlWYWx1ZXMsCiAgICAgIHNwbGl0QnkgPSBfcmVmNS5zcGxpdEJ5LAogICAgICBjdXJyZW50U3RhdGUgPSBfcmVmNS5jdXJyZW50U3RhdGUsCiAgICAgIHRhYmxlTGFiZWwgPSBfcmVmNS50YWJsZUxhYmVsLAogICAgICBrZXB0TGF5ZXJJZHMgPSBfcmVmNS5rZXB0TGF5ZXJJZHM7CiAgdmFyIHRpdGxlID0gZ2V0U3VnZ2VzdGlvblRpdGxlKHlWYWx1ZXMsIHhWYWx1ZSwgdGFibGVMYWJlbCk7CiAgdmFyIHNlcmllc1R5cGUgPSBnZXRTZXJpZXNUeXBlKGN1cnJlbnRTdGF0ZSwgbGF5ZXJJZCwgeFZhbHVlLCBjaGFuZ2VUeXBlKTsKICB2YXIgb3B0aW9ucyA9IHsKICAgIGN1cnJlbnRTdGF0ZTogY3VycmVudFN0YXRlLAogICAgc2VyaWVzVHlwZTogc2VyaWVzVHlwZSwKICAgIGxheWVySWQ6IGxheWVySWQsCiAgICB0aXRsZTogdGl0bGUsCiAgICB5VmFsdWVzOiB5VmFsdWVzLAogICAgc3BsaXRCeTogc3BsaXRCeSwKICAgIGNoYW5nZVR5cGU6IGNoYW5nZVR5cGUsCiAgICB4VmFsdWU6IHhWYWx1ZSwKICAgIGtlcHRMYXllcklkczoga2VwdExheWVySWRzCiAgfTsKICB2YXIgaXNTYW1lU3RhdGUgPSBjdXJyZW50U3RhdGUgJiYgY2hhbmdlVHlwZSA9PT0gJ3VuY2hhbmdlZCc7CgogIGlmICghaXNTYW1lU3RhdGUpIHsKICAgIHJldHVybiBidWlsZFN1Z2dlc3Rpb24ob3B0aW9ucyk7CiAgfQoKICB2YXIgc2FtZVN0YXRlU3VnZ2VzdGlvbnMgPSBbXTsgLy8gaWYgY3VycmVudCBzdGF0ZSBpcyB1c2luZyB0aGUgc2FtZSBkYXRhLCBzdWdnZXN0IHNhbWUgY2hhcnQgd2l0aCBkaWZmZXJlbnQgcHJlc2VudGF0aW9uYWwgY29uZmlndXJhdGlvbgoKICBpZiAoc2VyaWVzVHlwZSAhPT0gJ2xpbmUnICYmIHhWYWx1ZS5vcGVyYXRpb24uc2NhbGUgPT09ICdvcmRpbmFsJykgewogICAgLy8gZmxpcCBiZXR3ZWVuIGhvcml6b250YWwvdmVydGljYWwgZm9yIG9yZGluYWwgc2NhbGVzCiAgICBzYW1lU3RhdGVTdWdnZXN0aW9ucy5wdXNoKGJ1aWxkU3VnZ2VzdGlvbihfb2JqZWN0U3ByZWFkKHt9LCBvcHRpb25zLCB7CiAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy54eVN1Z2dlc3Rpb25zLmZsaXBUaXRsZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ZsaXAnCiAgICAgIH0pLAogICAgICBzZXJpZXNUeXBlOiBzZXJpZXNUeXBlID09PSAnYmFyX2hvcml6b250YWwnID8gJ2JhcicgOiBzZXJpZXNUeXBlID09PSAnYmFyX2hvcml6b250YWxfc3RhY2tlZCcgPyAnYmFyX3N0YWNrZWQnIDogJ2Jhcl9ob3Jpem9udGFsJwogICAgfSkpKTsKICB9IGVsc2UgewogICAgLy8gY2hhbmdlIGNoYXJ0IHR5cGUgZm9yIGludGVydmFsIG9yIHJhdGlvIHNjYWxlcyBvbiB4IGF4aXMKICAgIHZhciBuZXdTZXJpZXNUeXBlID0gYWx0U2VyaWVzVHlwZShzZXJpZXNUeXBlKTsKICAgIHNhbWVTdGF0ZVN1Z2dlc3Rpb25zLnB1c2goYnVpbGRTdWdnZXN0aW9uKF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMsIHsKICAgICAgc2VyaWVzVHlwZTogbmV3U2VyaWVzVHlwZSwKICAgICAgdGl0bGU6IG5ld1Nlcmllc1R5cGUuc3RhcnRzV2l0aCgnYmFyJykgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy54eVN1Z2dlc3Rpb25zLmJhckNoYXJ0VGl0bGUnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdCYXIgY2hhcnQnCiAgICAgIH0pIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMueHlTdWdnZXN0aW9ucy5saW5lQ2hhcnRUaXRsZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0xpbmUgY2hhcnQnCiAgICAgIH0pCiAgICB9KSkpOwogIH0KCiAgaWYgKHNlcmllc1R5cGUgIT09ICdsaW5lJyAmJiBzcGxpdEJ5KSB7CiAgICAvLyBmbGlwIGJldHdlZW4gc3RhY2tlZC91bnN0YWNrZWQKICAgIHNhbWVTdGF0ZVN1Z2dlc3Rpb25zLnB1c2goYnVpbGRTdWdnZXN0aW9uKF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMsIHsKICAgICAgc2VyaWVzVHlwZTogdG9nZ2xlU3RhY2tTZXJpZXNUeXBlKHNlcmllc1R5cGUpLAogICAgICB0aXRsZTogc2VyaWVzVHlwZS5lbmRzV2l0aCgnc3RhY2tlZCcpID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMueHlTdWdnZXN0aW9ucy51bnN0YWNrZWRDaGFydFRpdGxlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVW5zdGFja2VkJwogICAgICB9KSA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLnh5U3VnZ2VzdGlvbnMuc3RhY2tlZENoYXJ0VGl0bGUnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTdGFja2VkJwogICAgICB9KQogICAgfSkpKTsKICB9CgogIHJldHVybiBzYW1lU3RhdGVTdWdnZXN0aW9uczsKfQoKZnVuY3Rpb24gdG9nZ2xlU3RhY2tTZXJpZXNUeXBlKG9sZFNlcmllc1R5cGUpIHsKICBzd2l0Y2ggKG9sZFNlcmllc1R5cGUpIHsKICAgIGNhc2UgJ2FyZWEnOgogICAgICByZXR1cm4gJ2FyZWFfc3RhY2tlZCc7CgogICAgY2FzZSAnYXJlYV9zdGFja2VkJzoKICAgICAgcmV0dXJuICdhcmVhJzsKCiAgICBjYXNlICdiYXInOgogICAgICByZXR1cm4gJ2Jhcl9zdGFja2VkJzsKCiAgICBjYXNlICdiYXJfc3RhY2tlZCc6CiAgICAgIHJldHVybiAnYmFyJzsKCiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gb2xkU2VyaWVzVHlwZTsKICB9Cn0gLy8gVW50aWwgdGhlIGFyZWEgY2hhcnQgcmVuZGVyaW5nIGJ1ZyBpcyBmaXhlZCwgYXZvaWQgc3VnZ2VzdGluZyBhcmVhIGNoYXJ0cwovLyBodHRwczovL2dpdGh1Yi5jb20vZWxhc3RpYy9lbGFzdGljLWNoYXJ0cy9pc3N1ZXMvMzg4CgoKZnVuY3Rpb24gYWx0U2VyaWVzVHlwZShvbGRTZXJpZXNUeXBlKSB7CiAgc3dpdGNoIChvbGRTZXJpZXNUeXBlKSB7CiAgICBjYXNlICdhcmVhJzoKICAgICAgcmV0dXJuICdsaW5lJzsKCiAgICBjYXNlICdhcmVhX3N0YWNrZWQnOgogICAgICByZXR1cm4gJ2Jhcl9zdGFja2VkJzsKCiAgICBjYXNlICdiYXInOgogICAgICByZXR1cm4gJ2xpbmUnOwoKICAgIGNhc2UgJ2Jhcl9zdGFja2VkJzoKICAgICAgcmV0dXJuICdsaW5lJzsKCiAgICBjYXNlICdsaW5lJzoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiAnYmFyX3N0YWNrZWQnOwogIH0KfQoKZnVuY3Rpb24gZ2V0U2VyaWVzVHlwZShjdXJyZW50U3RhdGUsIGxheWVySWQsIHhWYWx1ZSwgY2hhbmdlVHlwZSkgewogIHZhciBkZWZhdWx0VHlwZSA9ICdiYXJfc3RhY2tlZCc7CiAgdmFyIG9sZExheWVyID0gZ2V0RXhpc3RpbmdMYXllcihjdXJyZW50U3RhdGUsIGxheWVySWQpOwogIHZhciBvbGRMYXllclNlcmllc1R5cGUgPSBvbGRMYXllciA/IG9sZExheWVyLnNlcmllc1R5cGUgOiBmYWxzZTsKICB2YXIgY2xvc2VzdFNlcmllc1R5cGUgPSBvbGRMYXllclNlcmllc1R5cGUgfHwgY3VycmVudFN0YXRlICYmIGN1cnJlbnRTdGF0ZS5wcmVmZXJyZWRTZXJpZXNUeXBlIHx8IGRlZmF1bHRUeXBlOyAvLyBBdHRlbXB0IHRvIGtlZXAgdGhlIHNlcmllc1R5cGUgY29uc2lzdGVudCBvbiBpbml0aWFsIGFkZCBvZiBhIGxheWVyCiAgLy8gT3JkaW5hbCBzY2FsZXMgc2hvdWxkIGFsd2F5cyB1c2UgYSBiYXIgYmVjYXVzZSB0aGVyZSBpcyBubyBpbnRlcnBvbGF0aW9uIGJldHdlZW4gYnVja2V0cwoKICBpZiAoeFZhbHVlLm9wZXJhdGlvbi5zY2FsZSAmJiB4VmFsdWUub3BlcmF0aW9uLnNjYWxlID09PSAnb3JkaW5hbCcpIHsKICAgIHJldHVybiBjbG9zZXN0U2VyaWVzVHlwZS5zdGFydHNXaXRoKCdiYXInKSA/IGNsb3Nlc3RTZXJpZXNUeXBlIDogZGVmYXVsdFR5cGU7CiAgfQoKICBpZiAoY2hhbmdlVHlwZSA9PT0gJ2luaXRpYWwnKSB7CiAgICByZXR1cm4gZGVmYXVsdFR5cGU7CiAgfQoKICByZXR1cm4gY2xvc2VzdFNlcmllc1R5cGUgIT09IGRlZmF1bHRUeXBlID8gY2xvc2VzdFNlcmllc1R5cGUgOiBkZWZhdWx0VHlwZTsKfQoKZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvblRpdGxlKHlWYWx1ZXMsIHhWYWx1ZSwgdGFibGVMYWJlbCkgewogIHZhciB5VGl0bGUgPSB5VmFsdWVzLm1hcChmdW5jdGlvbiAoY29sKSB7CiAgICByZXR1cm4gY29sLm9wZXJhdGlvbi5sYWJlbDsKICB9KS5qb2luKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLnh5U3VnZ2VzdGlvbnMueUF4aXhDb25qdW5jdGlvblNpZ24nLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJyAmICcsCiAgICBkZXNjcmlwdGlvbjogJ0EgY2hhcmFjdGVyIHRoYXQgY2FuIGJlIHVzZWQgZm9yIGNvbmp1bmN0aW9uIG9mIG11bHRpcGxlIGVudW1hcmF0ZWQgaXRlbXMuIE1ha2Ugc3VyZSB0byBpbmNsdWRlIHNwYWNlcyBhcm91bmQgaXQgaWYgbmVlZGVkLicKICB9KSk7CiAgdmFyIHhUaXRsZSA9IHhWYWx1ZS5vcGVyYXRpb24ubGFiZWw7CiAgdmFyIHRpdGxlID0gdGFibGVMYWJlbCB8fCAoeFZhbHVlLm9wZXJhdGlvbi5kYXRhVHlwZSA9PT0gJ2RhdGUnID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMueHlTdWdnZXN0aW9ucy5kYXRlU3VnZ2VzdGlvbicsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAne3lUaXRsZX0gb3ZlciB7eFRpdGxlfScsCiAgICBkZXNjcmlwdGlvbjogJ0NoYXJ0IGRlc2NyaXB0aW9uIGZvciBjaGFydHMgb3ZlciB0aW1lLCBsaWtlICJUcmFuc2ZlcmVkIGJ5dGVzIG92ZXIgbG9nLnRpbWVzdGFtcCInLAogICAgdmFsdWVzOiB7CiAgICAgIHhUaXRsZTogeFRpdGxlLAogICAgICB5VGl0bGU6IHlUaXRsZQogICAgfQogIH0pIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMueHlTdWdnZXN0aW9ucy5ub25EYXRlU3VnZ2VzdGlvbicsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAne3lUaXRsZX0gb2Yge3hUaXRsZX0nLAogICAgZGVzY3JpcHRpb246ICdDaGFydCBkZXNjcmlwdGlvbiBmb3IgYSB2YWx1ZSBvZiBzb21lIGdyb3VwcywgbGlrZSAiVG9wIFVSTHMgb2YgdG9wIDUgY291bnRyaWVzIicsCiAgICB2YWx1ZXM6IHsKICAgICAgeFRpdGxlOiB4VGl0bGUsCiAgICAgIHlUaXRsZTogeVRpdGxlCiAgICB9CiAgfSkpOwogIHJldHVybiB0aXRsZTsKfQoKZnVuY3Rpb24gYnVpbGRTdWdnZXN0aW9uKF9yZWY2KSB7CiAgdmFyIGN1cnJlbnRTdGF0ZSA9IF9yZWY2LmN1cnJlbnRTdGF0ZSwKICAgICAgc2VyaWVzVHlwZSA9IF9yZWY2LnNlcmllc1R5cGUsCiAgICAgIGxheWVySWQgPSBfcmVmNi5sYXllcklkLAogICAgICB0aXRsZSA9IF9yZWY2LnRpdGxlLAogICAgICB5VmFsdWVzID0gX3JlZjYueVZhbHVlcywKICAgICAgc3BsaXRCeSA9IF9yZWY2LnNwbGl0QnksCiAgICAgIGNoYW5nZVR5cGUgPSBfcmVmNi5jaGFuZ2VUeXBlLAogICAgICB4VmFsdWUgPSBfcmVmNi54VmFsdWUsCiAgICAgIGtlcHRMYXllcklkcyA9IF9yZWY2LmtlcHRMYXllcklkczsKCiAgdmFyIG5ld0xheWVyID0gX29iamVjdFNwcmVhZCh7fSwgZ2V0RXhpc3RpbmdMYXllcihjdXJyZW50U3RhdGUsIGxheWVySWQpIHx8IHt9LCB7CiAgICBsYXllcklkOiBsYXllcklkLAogICAgc2VyaWVzVHlwZTogc2VyaWVzVHlwZSwKICAgIHhBY2Nlc3NvcjogeFZhbHVlLmNvbHVtbklkLAogICAgc3BsaXRBY2Nlc3Nvcjogc3BsaXRCeSA/IHNwbGl0QnkuY29sdW1uSWQgOiAoMCwgX2lkX2dlbmVyYXRvci5nZW5lcmF0ZUlkKSgpLAogICAgYWNjZXNzb3JzOiB5VmFsdWVzLm1hcChmdW5jdGlvbiAoY29sKSB7CiAgICAgIHJldHVybiBjb2wuY29sdW1uSWQ7CiAgICB9KQogIH0pOwoKICB2YXIga2VwdExheWVycyA9IGN1cnJlbnRTdGF0ZSA/IGN1cnJlbnRTdGF0ZS5sYXllcnMuZmlsdGVyKGZ1bmN0aW9uIChsYXllcikgewogICAgcmV0dXJuIGxheWVyLmxheWVySWQgIT09IGxheWVySWQgJiYga2VwdExheWVySWRzLmluY2x1ZGVzKGxheWVyLmxheWVySWQpOwogIH0pIDogW107CiAgdmFyIHN0YXRlID0gewogICAgbGVnZW5kOiBjdXJyZW50U3RhdGUgPyBjdXJyZW50U3RhdGUubGVnZW5kIDogewogICAgICBpc1Zpc2libGU6IHRydWUsCiAgICAgIHBvc2l0aW9uOiBfY2hhcnRzLlBvc2l0aW9uLlJpZ2h0CiAgICB9LAogICAgcHJlZmVycmVkU2VyaWVzVHlwZTogc2VyaWVzVHlwZSwKICAgIGxheWVyczogW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShrZXB0TGF5ZXJzKSwgW25ld0xheWVyXSkKICB9OwogIHJldHVybiB7CiAgICB0aXRsZTogdGl0bGUsCiAgICBzY29yZTogZ2V0U2NvcmUoeVZhbHVlcywgc3BsaXRCeSwgY2hhbmdlVHlwZSksCiAgICAvLyBkb24ndCBhZHZlcnRpc2UgY2hhcnQgb2Ygc2FtZSB0eXBlIGJ1dCB3aXRoIGxlc3MgZGF0YQogICAgaGlkZTogY3VycmVudFN0YXRlICYmIGNoYW5nZVR5cGUgPT09ICdyZWR1Y2VkJywKICAgIHN0YXRlOiBzdGF0ZSwKICAgIHByZXZpZXdJY29uOiAoMCwgX3N0YXRlX2hlbHBlcnMuZ2V0SWNvbkZvclNlcmllcykoc2VyaWVzVHlwZSkKICB9Owp9CgpmdW5jdGlvbiBnZXRTY29yZSh5VmFsdWVzLCBzcGxpdEJ5LCBjaGFuZ2VUeXBlKSB7CiAgLy8gVW5jaGFuZ2VkIHRhYmxlIHN1Z2dlc3Rpb25zIGhhbGYgdGhlIHNjb3JlIGJlY2F1c2UgdGhlIHVuZGVybHlpbmcgZGF0YSBkb2Vzbid0IGNoYW5nZQogIHZhciBjaGFuZ2VGYWN0b3IgPSBjaGFuZ2VUeXBlID09PSAndW5jaGFuZ2VkJyA/IDAuNSA6IDE7IC8vIGNoYXJ0IHdpdGggbXVsdGlwbGUgeSB2YWx1ZXMgYW5kIHNwbGl0IHNlcmllcyB3aWxsIGhhdmUgYSBzY29yZSBvZiAxLCBzaW5nbGUgeSB2YWx1ZSBhbmQgbm8gc3BsaXQgc2VyaWVzIHJlZHVjZSBzY29yZQoKICByZXR1cm4gKCh5VmFsdWVzLmxlbmd0aCA+IDEgPyAyIDogMSkgKyAoc3BsaXRCeSA/IDEgOiAwKSkgLyAzICogY2hhbmdlRmFjdG9yOwp9CgpmdW5jdGlvbiBnZXRFeGlzdGluZ0xheWVyKGN1cnJlbnRTdGF0ZSwgbGF5ZXJJZCkgewogIHJldHVybiBjdXJyZW50U3RhdGUgJiYgY3VycmVudFN0YXRlLmxheWVycy5maW5kKGZ1bmN0aW9uIChsYXllcikgewogICAgcmV0dXJuIGxheWVyLmxheWVySWQgPT09IGxheWVySWQ7CiAgfSk7Cn0="},null]}