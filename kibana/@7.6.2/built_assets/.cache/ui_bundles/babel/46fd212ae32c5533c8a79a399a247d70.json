{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/jobs/new_job/pages/components/pick_fields_step/components/population_view/metric_selection_summary.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/jobs/new_job/pages/components/pick_fields_step/components/population_view/metric_selection_summary.js","mtime":1585205045908},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlBvcHVsYXRpb25EZXRlY3RvcnNTdW1tYXJ5ID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX2pvYl9jcmVhdG9yX2NvbnRleHQgPSByZXF1aXJlKCIuLi8uLi8uLi9qb2JfY3JlYXRvcl9jb250ZXh0Iik7Cgp2YXIgX3NldHRpbmdzID0gcmVxdWlyZSgiLi4vLi4vLi4vY2hhcnRzL2NvbW1vbi9zZXR0aW5ncyIpOwoKdmFyIF9jaGFydF9ncmlkID0gcmVxdWlyZSgiLi9jaGFydF9ncmlkIik7Cgp2YXIgX21lc3NhZ2ViYXIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9jb21wb25lbnRzL21lc3NhZ2ViYXIiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIFBvcHVsYXRpb25EZXRlY3RvcnNTdW1tYXJ5ID0gZnVuY3Rpb24gUG9wdWxhdGlvbkRldGVjdG9yc1N1bW1hcnkoKSB7CiAgdmFyIF91c2VDb250ZXh0ID0gKDAsIF9yZWFjdC51c2VDb250ZXh0KShfam9iX2NyZWF0b3JfY29udGV4dC5Kb2JDcmVhdG9yQ29udGV4dCksCiAgICAgIGpjID0gX3VzZUNvbnRleHQuam9iQ3JlYXRvciwKICAgICAgY2hhcnRMb2FkZXIgPSBfdXNlQ29udGV4dC5jaGFydExvYWRlciwKICAgICAgcmVzdWx0c0xvYWRlciA9IF91c2VDb250ZXh0LnJlc3VsdHNMb2FkZXIsCiAgICAgIGNoYXJ0SW50ZXJ2YWwgPSBfdXNlQ29udGV4dC5jaGFydEludGVydmFsOwoKICB2YXIgam9iQ3JlYXRvciA9IGpjOwoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoam9iQ3JlYXRvci5hZ2dGaWVsZFBhaXJzKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGFnZ0ZpZWxkUGFpckxpc3QgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRBZ2dGaWVsZFBhaXJMaXN0ID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTMgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh7fSksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgbGluZUNoYXJ0c0RhdGEgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRMaW5lQ2hhcnRzRGF0YSA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBfdXNlU3RhdGU1ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLAogICAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksCiAgICAgIGxvYWRpbmdEYXRhID0gX3VzZVN0YXRlNlswXSwKICAgICAgc2V0TG9hZGluZ0RhdGEgPSBfdXNlU3RhdGU2WzFdOwoKICB2YXIgX3VzZVN0YXRlNyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKFtdKSwKICAgICAgX3VzZVN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTcsIDIpLAogICAgICBtb2RlbERhdGEgPSBfdXNlU3RhdGU4WzBdLAogICAgICBzZXRNb2RlbERhdGEgPSBfdXNlU3RhdGU4WzFdOwoKICB2YXIgX3VzZVN0YXRlOSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKFtdKSwKICAgICAgX3VzZVN0YXRlMTAgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU5LCAyKSwKICAgICAgYW5vbWFseURhdGEgPSBfdXNlU3RhdGUxMFswXSwKICAgICAgc2V0QW5vbWFseURhdGEgPSBfdXNlU3RhdGUxMFsxXTsKCiAgdmFyIF91c2VTdGF0ZTExID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoX3NldHRpbmdzLmRlZmF1bHRDaGFydFNldHRpbmdzKSwKICAgICAgX3VzZVN0YXRlMTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxMSwgMiksCiAgICAgIGNoYXJ0U2V0dGluZ3MgPSBfdXNlU3RhdGUxMlswXSwKICAgICAgc2V0Q2hhcnRTZXR0aW5ncyA9IF91c2VTdGF0ZTEyWzFdOwoKICB2YXIgX3VzZVN0YXRlMTMgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh7fSksCiAgICAgIF91c2VTdGF0ZTE0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTMsIDIpLAogICAgICBmaWVsZFZhbHVlc1BlckRldGVjdG9yID0gX3VzZVN0YXRlMTRbMF0sCiAgICAgIHNldEZpZWxkVmFsdWVzUGVyRGV0ZWN0b3IgPSBfdXNlU3RhdGUxNFsxXTsKCiAgZnVuY3Rpb24gc2V0UmVzdWx0c1dyYXBwZXIocmVzdWx0cykgewogICAgc2V0TW9kZWxEYXRhKHJlc3VsdHMubW9kZWwpOwogICAgc2V0QW5vbWFseURhdGEocmVzdWx0cy5hbm9tYWxpZXMpOwogIH0KCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIC8vIHN1YnNjcmliZSB0byBwcm9ncmVzcyBhbmQgcmVzdWx0cwogICAgdmFyIHN1YnNjcmlwdGlvbiA9IHJlc3VsdHNMb2FkZXIuc3Vic2NyaWJlVG9SZXN1bHRzKHNldFJlc3VsdHNXcmFwcGVyKTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgfTsKICB9LCBbXSk7IC8vIHdhdGNoIGZvciBjaGFuZ2VzIGluIGJ5IGZpZWxkIHZhbHVlcwogIC8vIHJlZHJhdyB0aGUgY2hhcnRzIGlmIHRoZXkgY2hhbmdlLgogIC8vIHRyaWdnZXJlZCB3aGVuIGV4YW1wbGUgZmllbGRzIGhhdmUgYmVlbiBsb2FkZWQKICAvLyBpZiB0aGUgc3BsaXQgZmllbGQgb3IgYnkgZmllbGRzIGhhdmUgY2hhbmdlZAoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgaWYgKGFsbERhdGFSZWFkeSgpKSB7CiAgICAgIGxvYWRDaGFydHMoKTsKICAgIH0KICB9LCBbSlNPTi5zdHJpbmdpZnkoZmllbGRWYWx1ZXNQZXJEZXRlY3RvciksIGpvYkNyZWF0b3Iuc3BsaXRGaWVsZF0pOyAvLyB3YXRjaCBmb3IgY2hhbmdlcyBpbiBzcGxpdCBmaWVsZCBvciBieSBmaWVsZHMuCiAgLy8gbG9hZCBleGFtcGxlIGZpZWxkIHZhbHVlcwogIC8vIGNoYW5nZXMgdG8gZmllbGRWYWx1ZXMgaGVyZSB3aWxsIHRyaWdnZXIgdGhlIGNhcmQgZWZmZWN0IHZpYSBzZXRGaWVsZFZhbHVlc1BlckRldGVjdG9yCgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBsb2FkRmllbGRFeGFtcGxlcygpOwogIH0sIFtqb2JDcmVhdG9yLnNwbGl0RmllbGRdKTsKCiAgZnVuY3Rpb24gbG9hZENoYXJ0cygpIHsKICAgIHZhciBjcywgcmVzcDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbG9hZENoYXJ0cyQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmICghYWxsRGF0YVJlYWR5KCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNldExvYWRpbmdEYXRhKHRydWUpOwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjsKICAgICAgICAgICAgY3MgPSAoMCwgX3NldHRpbmdzLmdldENoYXJ0U2V0dGluZ3MpKGpvYkNyZWF0b3IsIGNoYXJ0SW50ZXJ2YWwpOwogICAgICAgICAgICBzZXRDaGFydFNldHRpbmdzKGNzKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY2hhcnRMb2FkZXIubG9hZFBvcHVsYXRpb25DaGFydHMoam9iQ3JlYXRvci5zdGFydCwgam9iQ3JlYXRvci5lbmQsIGFnZ0ZpZWxkUGFpckxpc3QsIGpvYkNyZWF0b3Iuc3BsaXRGaWVsZCwgY3MuaW50ZXJ2YWxNcykpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIHNldExpbmVDaGFydHNEYXRhKHJlc3ApOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgyKTsKCiAgICAgICAgICAgIF9tZXNzYWdlYmFyLm1sTWVzc2FnZUJhclNlcnZpY2Uubm90aWZ5LmVycm9yKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgIHNldExpbmVDaGFydHNEYXRhKHt9KTsKCiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBzZXRMb2FkaW5nRGF0YShmYWxzZSk7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBudWxsLCBudWxsLCBbWzIsIDExXV0pOwogIH0KCiAgZnVuY3Rpb24gbG9hZEZpZWxkRXhhbXBsZXMoKSB7CiAgICB2YXIgcHJvbWlzZXMsIHJlc3VsdHMsIGZpZWxkVmFsdWVzLCBuZXdQYWlyczsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbG9hZEZpZWxkRXhhbXBsZXMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBwcm9taXNlcyA9IFtdOwogICAgICAgICAgICBhZ2dGaWVsZFBhaXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGFmLCBpKSB7CiAgICAgICAgICAgICAgaWYgKGFmLmJ5ICE9PSB1bmRlZmluZWQgJiYgYWYuYnkuZmllbGQgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goZnVuY3Rpb24gX2NhbGxlZShpbmRleCwgZmllbGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBpbmRleDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjaGFydExvYWRlci5sb2FkRmllbGRFeGFtcGxlVmFsdWVzKGZpZWxkKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQxID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBfY29udGV4dDIudDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IF9jb250ZXh0Mi50MQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KGksIGFmLmJ5LmZpZWxkKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKFByb21pc2UuYWxsKHByb21pc2VzKSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICByZXN1bHRzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIGZpZWxkVmFsdWVzID0gcmVzdWx0cy5yZWR1Y2UoZnVuY3Rpb24gKHAsIGMpIHsKICAgICAgICAgICAgICBwW2MuaW5kZXhdID0gYy5maWVsZHM7CiAgICAgICAgICAgICAgcmV0dXJuIHA7CiAgICAgICAgICAgIH0sIHt9KTsKICAgICAgICAgICAgbmV3UGFpcnMgPSBhZ2dGaWVsZFBhaXJMaXN0Lm1hcChmdW5jdGlvbiAocGFpciwgaSkgewogICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBwYWlyLCB7fSwgcGFpci5ieSA9PT0gdW5kZWZpbmVkIHx8IHBhaXIuYnkuZmllbGQgPT09IG51bGwgPyB7fSA6IHsKICAgICAgICAgICAgICAgIGJ5OiBfb2JqZWN0U3ByZWFkKHt9LCBwYWlyLmJ5LCB7CiAgICAgICAgICAgICAgICAgIHZhbHVlOiBmaWVsZFZhbHVlc1tpXVswXQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHNldEFnZ0ZpZWxkUGFpckxpc3QoX3RvQ29uc3VtYWJsZUFycmF5KG5ld1BhaXJzKSk7CiAgICAgICAgICAgIHNldEZpZWxkVmFsdWVzUGVyRGV0ZWN0b3IoZmllbGRWYWx1ZXMpOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBhbGxEYXRhUmVhZHkoKSB7CiAgICB2YXIgcmVhZHkgPSBhZ2dGaWVsZFBhaXJMaXN0Lmxlbmd0aCA+IDA7CiAgICBhZ2dGaWVsZFBhaXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGFmKSB7CiAgICAgIGlmIChhZi5ieSAhPT0gdW5kZWZpbmVkICYmIGFmLmJ5LmZpZWxkICE9PSBudWxsKSB7CiAgICAgICAgLy8gaWYgYSBieSBmaWVsZCBpcyBzZXQsIGl0J3Mgb25seSByZWFkeSB3aGVuIHRoZSB2YWx1ZSBpcyBsb2FkZWQKICAgICAgICByZWFkeSA9IHJlYWR5ICYmIGFmLmJ5LnZhbHVlICE9PSBudWxsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiByZWFkeTsKICB9CgogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgam9iQ3JlYXRvci5zcGxpdEZpZWxkICE9PSBudWxsICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgaWQ6ICJ4cGFjay5tbC5uZXdKb2Iud2l6YXJkLnBpY2tGaWVsZHNTdGVwLnBvcHVsYXRpb25WaWV3LnNwbGl0RmllbGRUaXRsZSIsCiAgICBkZWZhdWx0TWVzc2FnZTogIlBvcHVsYXRpb24gc3BsaXQgYnkge2ZpZWxkfSIsCiAgICB2YWx1ZXM6IHsKICAgICAgZmllbGQ6IGpvYkNyZWF0b3Iuc3BsaXRGaWVsZC5uYW1lCiAgICB9CiAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIG51bGwpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jaGFydF9ncmlkLkNoYXJ0R3JpZCwgewogICAgYWdnRmllbGRQYWlyTGlzdDogam9iQ3JlYXRvci5hZ2dGaWVsZFBhaXJzLAogICAgY2hhcnRTZXR0aW5nczogY2hhcnRTZXR0aW5ncywKICAgIHNwbGl0RmllbGQ6IGpvYkNyZWF0b3Iuc3BsaXRGaWVsZCwKICAgIGxpbmVDaGFydHNEYXRhOiBsaW5lQ2hhcnRzRGF0YSwKICAgIG1vZGVsRGF0YTogbW9kZWxEYXRhLAogICAgYW5vbWFseURhdGE6IGFub21hbHlEYXRhLAogICAgam9iVHlwZTogam9iQ3JlYXRvci50eXBlLAogICAgZmllbGRWYWx1ZXNQZXJEZXRlY3RvcjogZmllbGRWYWx1ZXNQZXJEZXRlY3RvciwKICAgIGxvYWRpbmc6IGxvYWRpbmdEYXRhCiAgfSkpKTsKfTsKCmV4cG9ydHMuUG9wdWxhdGlvbkRldGVjdG9yc1N1bW1hcnkgPSBQb3B1bGF0aW9uRGV0ZWN0b3JzU3VtbWFyeTs="},null]}