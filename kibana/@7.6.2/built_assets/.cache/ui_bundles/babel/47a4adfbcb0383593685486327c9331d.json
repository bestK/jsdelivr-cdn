{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/layers/sources/ems_tms_source/ems_tms_source.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/layers/sources/ems_tms_source/ems_tms_source.js","mtime":1585205045325},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkVNU1RNU1NvdXJjZSA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX2Nocm9tZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgidWkvY2hyb21lIikpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3Rtc19zb3VyY2UgPSByZXF1aXJlKCIuLi90bXNfc291cmNlIik7Cgp2YXIgX3ZlY3Rvcl90aWxlX2xheWVyID0gcmVxdWlyZSgiLi4vLi4vdmVjdG9yX3RpbGVfbGF5ZXIiKTsKCnZhciBfbWV0YSA9IHJlcXVpcmUoIi4uLy4uLy4uL21ldGEiKTsKCnZhciBfdGlsZV9zZXJ2aWNlX3NlbGVjdCA9IHJlcXVpcmUoIi4vdGlsZV9zZXJ2aWNlX3NlbGVjdCIpOwoKdmFyIF91cGRhdGVfc291cmNlX2VkaXRvciA9IHJlcXVpcmUoIi4vdXBkYXRlX3NvdXJjZV9lZGl0b3IiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9pMThuX2dldHRlcnMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vaTE4bl9nZXR0ZXJzIik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9Cgp2YXIgRU1TVE1TU291cmNlID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0Fic3RyYWN0VE1TU291cmNlKSB7CiAgX2luaGVyaXRzKEVNU1RNU1NvdXJjZSwgX0Fic3RyYWN0VE1TU291cmNlKTsKCiAgX2NyZWF0ZUNsYXNzKEVNU1RNU1NvdXJjZSwgbnVsbCwgW3sKICAgIGtleTogImNyZWF0ZURlc2NyaXB0b3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZURlc2NyaXB0b3Ioc291cmNlQ29uZmlnKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogRU1TVE1TU291cmNlLnR5cGUsCiAgICAgICAgaWQ6IHNvdXJjZUNvbmZpZy5pZCwKICAgICAgICBpc0F1dG9TZWxlY3Q6IHNvdXJjZUNvbmZpZy5pc0F1dG9TZWxlY3QKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJFZGl0b3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckVkaXRvcihfcmVmKSB7CiAgICAgIHZhciBvblByZXZpZXdTb3VyY2UgPSBfcmVmLm9uUHJldmlld1NvdXJjZSwKICAgICAgICAgIGluc3BlY3RvckFkYXB0ZXJzID0gX3JlZi5pbnNwZWN0b3JBZGFwdGVyczsKCiAgICAgIHZhciBvblNvdXJjZUNvbmZpZ0NoYW5nZSA9IGZ1bmN0aW9uIG9uU291cmNlQ29uZmlnQ2hhbmdlKHNvdXJjZUNvbmZpZykgewogICAgICAgIHZhciBkZXNjcmlwdG9yID0gRU1TVE1TU291cmNlLmNyZWF0ZURlc2NyaXB0b3Ioc291cmNlQ29uZmlnKTsKICAgICAgICB2YXIgc291cmNlID0gbmV3IEVNU1RNU1NvdXJjZShkZXNjcmlwdG9yLCBpbnNwZWN0b3JBZGFwdGVycyk7CiAgICAgICAgb25QcmV2aWV3U291cmNlKHNvdXJjZSk7CiAgICAgIH07CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdGlsZV9zZXJ2aWNlX3NlbGVjdC5UaWxlU2VydmljZVNlbGVjdCwgewogICAgICAgIG9uVGlsZVNlbGVjdDogb25Tb3VyY2VDb25maWdDaGFuZ2UKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICBmdW5jdGlvbiBFTVNUTVNTb3VyY2UoZGVzY3JpcHRvciwgaW5zcGVjdG9yQWRhcHRlcnMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFTVNUTVNTb3VyY2UpOwoKICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoRU1TVE1TU291cmNlKS5jYWxsKHRoaXMsIHsKICAgICAgaWQ6IGRlc2NyaXB0b3IuaWQsCiAgICAgIHR5cGU6IEVNU1RNU1NvdXJjZS50eXBlLAogICAgICBpc0F1dG9TZWxlY3Q6IF9sb2Rhc2guZGVmYXVsdC5nZXQoZGVzY3JpcHRvciwgJ2lzQXV0b1NlbGVjdCcsIGZhbHNlKQogICAgfSwgaW5zcGVjdG9yQWRhcHRlcnMpKTsKICB9CgogIF9jcmVhdGVDbGFzcyhFTVNUTVNTb3VyY2UsIFt7CiAgICBrZXk6ICJyZW5kZXJTb3VyY2VTZXR0aW5nc0VkaXRvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyU291cmNlU2V0dGluZ3NFZGl0b3IoX3JlZjIpIHsKICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZjIub25DaGFuZ2U7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF91cGRhdGVfc291cmNlX2VkaXRvci5VcGRhdGVTb3VyY2VFZGl0b3IsIHsKICAgICAgICBvbkNoYW5nZTogb25DaGFuZ2UsCiAgICAgICAgY29uZmlnOiB0aGlzLl9kZXNjcmlwdG9yCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEltbXV0YWJsZVByb3BlcnRpZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEltbXV0YWJsZVByb3BlcnRpZXMoKSB7CiAgICAgIHZhciBkaXNwbGF5TmFtZSwgYXV0b1NlbGVjdE1zZzsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRJbW11dGFibGVQcm9wZXJ0aWVzJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuZ2V0RGlzcGxheU5hbWUoKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgZGlzcGxheU5hbWUgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGF1dG9TZWxlY3RNc2cgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5zb3VyY2UuZW1zVGlsZS5pc0F1dG9TZWxlY3RMYWJlbCcsIHsKICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnYXV0b3NlbGVjdCBiYXNlZCBvbiBLaWJhbmEgdGhlbWUnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgW3sKICAgICAgICAgICAgICAgIGxhYmVsOiAoMCwgX2kxOG5fZ2V0dGVycy5nZXREYXRhU291cmNlTGFiZWwpKCksCiAgICAgICAgICAgICAgICB2YWx1ZTogRU1TVE1TU291cmNlLnRpdGxlCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLnNvdXJjZS5lbXNUaWxlLnNlcnZpY2VJZCcsIHsKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJUaWxlIHNlcnZpY2UiCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLl9kZXNjcmlwdG9yLmlzQXV0b1NlbGVjdCA/ICIiLmNvbmNhdChkaXNwbGF5TmFtZSwgIiAtICIpLmNvbmNhdChhdXRvU2VsZWN0TXNnKSA6IGRpc3BsYXlOYW1lCiAgICAgICAgICAgICAgfV0pOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZ2V0RU1TVE1TU2VydmljZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2dldEVNU1RNU1NlcnZpY2UoKSB7CiAgICAgIHZhciBlbXNDbGllbnQsIGVtc1RNU1NlcnZpY2VzLCBlbXNUaWxlTGF5ZXJJZCwgdG1zU2VydmljZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfZ2V0RU1TVE1TU2VydmljZSQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgZW1zQ2xpZW50ID0gKDAsIF9tZXRhLmdldEVNU0NsaWVudCkoKTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChlbXNDbGllbnQuZ2V0VE1TU2VydmljZXMoKSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgZW1zVE1TU2VydmljZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBlbXNUaWxlTGF5ZXJJZCA9IHRoaXMuZ2V0VGlsZUxheWVySWQoKTsKICAgICAgICAgICAgICB0bXNTZXJ2aWNlID0gZW1zVE1TU2VydmljZXMuZmluZChmdW5jdGlvbiAodG1zU2VydmljZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRtc1NlcnZpY2UuZ2V0SWQoKSA9PT0gZW1zVGlsZUxheWVySWQ7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGlmICh0bXNTZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5zb3VyY2UuZW1zVGlsZS5lcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlVuYWJsZSB0byBmaW5kIEVNUyB0aWxlIGNvbmZpZ3VyYXRpb24gZm9yIGlkOiB7aWR9IiwKICAgICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgICBpZDogZW1zVGlsZUxheWVySWQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHRtc1NlcnZpY2UpOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2NyZWF0ZURlZmF1bHRMYXllckRlc2NyaXB0b3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVEZWZhdWx0TGF5ZXJEZXNjcmlwdG9yKG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIF92ZWN0b3JfdGlsZV9sYXllci5WZWN0b3JUaWxlTGF5ZXIuY3JlYXRlRGVzY3JpcHRvcihfb2JqZWN0U3ByZWFkKHsKICAgICAgICBzb3VyY2VEZXNjcmlwdG9yOiB0aGlzLl9kZXNjcmlwdG9yCiAgICAgIH0sIG9wdGlvbnMpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVEZWZhdWx0TGF5ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRMYXllcihvcHRpb25zKSB7CiAgICAgIHJldHVybiBuZXcgX3ZlY3Rvcl90aWxlX2xheWVyLlZlY3RvclRpbGVMYXllcih7CiAgICAgICAgbGF5ZXJEZXNjcmlwdG9yOiB0aGlzLl9jcmVhdGVEZWZhdWx0TGF5ZXJEZXNjcmlwdG9yKG9wdGlvbnMpLAogICAgICAgIHNvdXJjZTogdGhpcwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXREaXNwbGF5TmFtZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGlzcGxheU5hbWUoKSB7CiAgICAgIHZhciBlbXNUTVNTZXJ2aWNlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldERpc3BsYXlOYW1lJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDA7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fZ2V0RU1TVE1TU2VydmljZSgpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBlbXNUTVNTZXJ2aWNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGVtc1RNU1NlcnZpY2UuZ2V0RGlzcGxheU5hbWUoKSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA3OwogICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgwKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgdGhpcy5nZXRUaWxlTGF5ZXJJZCgpKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzLCBbWzAsIDddXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0QXR0cmlidXRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBdHRyaWJ1dGlvbnMoKSB7CiAgICAgIHZhciBlbXNUTVNTZXJ2aWNlLCBtYXJrZG93bjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRBdHRyaWJ1dGlvbnMkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuX2dldEVNU1RNU1NlcnZpY2UoKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgZW1zVE1TU2VydmljZSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgIG1hcmtkb3duID0gZW1zVE1TU2VydmljZS5nZXRNYXJrZG93bkF0dHJpYnV0aW9uKCk7CgogICAgICAgICAgICAgIGlmIChtYXJrZG93bikgewogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgW10pOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCB0aGlzLmNvbnZlcnRNYXJrZG93bkxpbmtUb09iamVjdEFycihtYXJrZG93bikpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VXJsVGVtcGxhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVybFRlbXBsYXRlKCkgewogICAgICB2YXIgZW1zVE1TU2VydmljZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRVcmxUZW1wbGF0ZSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fZ2V0RU1TVE1TU2VydmljZSgpKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBlbXNUTVNTZXJ2aWNlID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoZW1zVE1TU2VydmljZS5nZXRVcmxUZW1wbGF0ZSgpKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ1LnNlbnQpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U3ByaXRlTmFtZXNwYWNlUHJlZml4IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTcHJpdGVOYW1lc3BhY2VQcmVmaXgoKSB7CiAgICAgIHJldHVybiAnZW1zLycgKyB0aGlzLmdldFRpbGVMYXllcklkKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VmVjdG9yU3R5bGVTaGVldEFuZFNwcml0ZU1ldGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZlY3RvclN0eWxlU2hlZXRBbmRTcHJpdGVNZXRhKGlzUmV0aW5hKSB7CiAgICAgIHZhciBlbXNUTVNTZXJ2aWNlLCBzdHlsZVNoZWV0LCBzcHJpdGVNZXRhOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldFZlY3RvclN0eWxlU2hlZXRBbmRTcHJpdGVNZXRhJChfY29udGV4dDYpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLl9nZXRFTVNUTVNTZXJ2aWNlKCkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGVtc1RNU1NlcnZpY2UgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChlbXNUTVNTZXJ2aWNlLmdldFZlY3RvclN0eWxlU2hlZXQoKSk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgc3R5bGVTaGVldCA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGVtc1RNU1NlcnZpY2UuZ2V0U3ByaXRlU2hlZXRNZXRhKGlzUmV0aW5hKSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgc3ByaXRlTWV0YSA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICB2ZWN0b3JTdHlsZVNoZWV0OiBzdHlsZVNoZWV0LAogICAgICAgICAgICAgICAgc3ByaXRlTWV0YTogc3ByaXRlTWV0YQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFRpbGVMYXllcklkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaWxlTGF5ZXJJZCgpIHsKICAgICAgaWYgKCF0aGlzLl9kZXNjcmlwdG9yLmlzQXV0b1NlbGVjdCkgewogICAgICAgIHJldHVybiB0aGlzLl9kZXNjcmlwdG9yLmlkOwogICAgICB9CgogICAgICB2YXIgaXNEYXJrTW9kZSA9IF9jaHJvbWUuZGVmYXVsdC5nZXRVaVNldHRpbmdzQ2xpZW50KCkuZ2V0KCd0aGVtZTpkYXJrTW9kZScsIGZhbHNlKTsKCiAgICAgIHZhciBlbXNUaWxlTGF5ZXJJZCA9IF9jaHJvbWUuZGVmYXVsdC5nZXRJbmplY3RlZCgnZW1zVGlsZUxheWVySWQnKTsKCiAgICAgIHJldHVybiBpc0RhcmtNb2RlID8gZW1zVGlsZUxheWVySWQuZGFyayA6IGVtc1RpbGVMYXllcklkLmJyaWdodDsKICAgIH0KICB9XSk7CgogIHJldHVybiBFTVNUTVNTb3VyY2U7Cn0oX3Rtc19zb3VyY2UuQWJzdHJhY3RUTVNTb3VyY2UpOwoKZXhwb3J0cy5FTVNUTVNTb3VyY2UgPSBFTVNUTVNTb3VyY2U7CgpfZGVmaW5lUHJvcGVydHkoRU1TVE1TU291cmNlLCAidHlwZSIsIF9jb25zdGFudHMuRU1TX1RNUyk7CgpfZGVmaW5lUHJvcGVydHkoRU1TVE1TU291cmNlLCAidGl0bGUiLCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5zb3VyY2UuZW1zVGlsZVRpdGxlJywgewogIGRlZmF1bHRNZXNzYWdlOiAnRU1TIEJhc2VtYXBzJwp9KSk7CgpfZGVmaW5lUHJvcGVydHkoRU1TVE1TU291cmNlLCAiZGVzY3JpcHRpb24iLCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5zb3VyY2UuZW1zVGlsZURlc2NyaXB0aW9uJywgewogIGRlZmF1bHRNZXNzYWdlOiAnVGlsZSBtYXAgc2VydmljZSBmcm9tIEVsYXN0aWMgTWFwcyBTZXJ2aWNlJwp9KSk7CgpfZGVmaW5lUHJvcGVydHkoRU1TVE1TU291cmNlLCAiaWNvbiIsICdlbXNBcHAnKTs="},null]}