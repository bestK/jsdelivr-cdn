{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/core/utils/context.js","dependencies":[{"path":"src/core/utils/context.js","mtime":1585205038968},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkyKHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5MihvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuQ29udGV4dENvbnRhaW5lciA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgXyA9IHJlcXVpcmUoIi4iKTsKCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Ci8qKiBAaW50ZXJuYWwgKi8KCgp2YXIgQ29udGV4dENvbnRhaW5lciA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIC8qKgogICAqIFVzZWQgdG8gbWFwIGNvbnRleHRzIHRvIHRoZWlyIHByb3ZpZGVycyBhbmQgYXNzb2NpYXRlZCBwbHVnaW4uIEluIHJlZ2lzdHJhdGlvbiBvcmRlciB3aGljaCBpcyB0aWdodGx5IGNvdXBsZWQgdG8KICAgKiBwbHVnaW4gbG9hZCBvcmRlci4KICAgKi8KCiAgLyoqIFVzZWQgdG8ga2VlcCB0cmFjayBvZiB3aGljaCBwbHVnaW5zIHJlZ2lzdGVyZWQgd2hpY2ggY29udGV4dHMgZm9yIGRlcGVuZGVuY3kgcmVzb2x1dGlvbi4gKi8KCiAgLyoqCiAgICogQHBhcmFtIHBsdWdpbkRlcGVuZGVuY2llcyAtIEEgbWFwIG9mIHBsdWdpbnMgdG8gYW4gYXJyYXkgb2YgdGhlaXIgZGVwZW5kZW5jaWVzLgogICAqLwogIGZ1bmN0aW9uIENvbnRleHRDb250YWluZXIocGx1Z2luRGVwZW5kZW5jaWVzLCBjb3JlSWQpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRleHRDb250YWluZXIpOwoKICAgIHRoaXMucGx1Z2luRGVwZW5kZW5jaWVzID0gcGx1Z2luRGVwZW5kZW5jaWVzOwogICAgdGhpcy5jb3JlSWQgPSBjb3JlSWQ7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjb250ZXh0UHJvdmlkZXJzIiwgbmV3IE1hcCgpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNvbnRleHROYW1lc0J5U291cmNlIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInJlZ2lzdGVyQ29udGV4dCIsIGZ1bmN0aW9uIChzb3VyY2UsIGNvbnRleHROYW1lLCBwcm92aWRlcikgewogICAgICBpZiAoX3RoaXMuY29udGV4dFByb3ZpZGVycy5oYXMoY29udGV4dE5hbWUpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDb250ZXh0IHByb3ZpZGVyIGZvciAiLmNvbmNhdChjb250ZXh0TmFtZSwgIiBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQuIikpOwogICAgICB9CgogICAgICBpZiAoc291cmNlICE9PSBfdGhpcy5jb3JlSWQgJiYgIV90aGlzLnBsdWdpbkRlcGVuZGVuY2llcy5oYXMoc291cmNlKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2Fubm90IHJlZ2lzdGVyIGNvbnRleHQgZm9yIHVua25vd24gcGx1Z2luOiAiLmNvbmNhdChzb3VyY2UudG9TdHJpbmcoKSkpOwogICAgICB9CgogICAgICBfdGhpcy5jb250ZXh0UHJvdmlkZXJzLnNldChjb250ZXh0TmFtZSwgewogICAgICAgIHByb3ZpZGVyOiBwcm92aWRlciwKICAgICAgICBzb3VyY2U6IHNvdXJjZQogICAgICB9KTsKCiAgICAgIF90aGlzLmNvbnRleHROYW1lc0J5U291cmNlLnNldChzb3VyY2UsIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoX3RoaXMuY29udGV4dE5hbWVzQnlTb3VyY2UuZ2V0KHNvdXJjZSkgfHwgW10pLCBbY29udGV4dE5hbWVdKSk7CgogICAgICByZXR1cm4gX3RoaXM7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNyZWF0ZUhhbmRsZXIiLCBmdW5jdGlvbiAoc291cmNlLCBoYW5kbGVyKSB7CiAgICAgIGlmIChzb3VyY2UgIT09IF90aGlzLmNvcmVJZCAmJiAhX3RoaXMucGx1Z2luRGVwZW5kZW5jaWVzLmhhcyhzb3VyY2UpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgY3JlYXRlIGhhbmRsZXIgZm9yIHVua25vd24gcGx1Z2luOiAiLmNvbmNhdChzb3VyY2UudG9TdHJpbmcoKSkpOwogICAgICB9CgogICAgICByZXR1cm4gZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX2xlbiwKICAgICAgICAgICAgYXJncywKICAgICAgICAgICAgX2tleSwKICAgICAgICAgICAgY29udGV4dCwKICAgICAgICAgICAgX2FyZ3MgPSBhcmd1bWVudHM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBmb3IgKF9sZW4gPSBfYXJncy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgICAgICAgICAgIGFyZ3NbX2tleV0gPSBfYXJnc1tfa2V5XTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX3RoaXMuYnVpbGRDb250ZXh0LmFwcGx5KF90aGlzLCBbc291cmNlXS5jb25jYXQoYXJncykpKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgY29udGV4dCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBoYW5kbGVyLmFwcGx5KHZvaWQgMCwgW2NvbnRleHRdLmNvbmNhdChhcmdzKSkpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKICAgIH0pOwoKICAgIHRoaXMuY29udGV4dE5hbWVzQnlTb3VyY2UgPSBuZXcgTWFwKFtbY29yZUlkLCBbXV1dKTsKICB9CgogIF9jcmVhdGVDbGFzcyhDb250ZXh0Q29udGFpbmVyLCBbewogICAga2V5OiAiYnVpbGRDb250ZXh0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZENvbnRleHQoc291cmNlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF9sZW4yLAogICAgICAgICAgY29udGV4dEFyZ3MsCiAgICAgICAgICBfa2V5MiwKICAgICAgICAgIGNvbnRleHRzVG9CdWlsZCwKICAgICAgICAgIF9hcmdzMyA9IGFyZ3VtZW50czsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gYnVpbGRDb250ZXh0JChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBmb3IgKF9sZW4yID0gX2FyZ3MzLmxlbmd0aCwgY29udGV4dEFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIgPiAxID8gX2xlbjIgLSAxIDogMCksIF9rZXkyID0gMTsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykgewogICAgICAgICAgICAgICAgY29udGV4dEFyZ3NbX2tleTIgLSAxXSA9IF9hcmdzM1tfa2V5Ml07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjb250ZXh0c1RvQnVpbGQgPSBuZXcgU2V0KHRoaXMuZ2V0Q29udGV4dE5hbWVzRm9yU291cmNlKHNvdXJjZSkpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5jb250ZXh0UHJvdmlkZXJzKS5zb3J0KHNvcnRCeUNvcmVGaXJzdCh0aGlzLmNvcmVJZCkpLmZpbHRlcihmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMSksCiAgICAgICAgICAgICAgICAgICAgY29udGV4dE5hbWUgPSBfcmVmMlswXTsKCiAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dHNUb0J1aWxkLmhhcyhjb250ZXh0TmFtZSk7CiAgICAgICAgICAgICAgfSkucmVkdWNlKGZ1bmN0aW9uIF9jYWxsZWUyKGNvbnRleHRQcm9taXNlLCBfcmVmMykgewogICAgICAgICAgICAgICAgdmFyIF9yZWY0LCBjb250ZXh0TmFtZSwgX3JlZjQkLCBwcm92aWRlciwgcHJvdmlkZXJTb3VyY2UsIHJlc29sdmVkQ29udGV4dCwgZXhwb3NlZENvbnRleHQ7CgogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWY0ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDIpLCBjb250ZXh0TmFtZSA9IF9yZWY0WzBdLCBfcmVmNCQgPSBfcmVmNFsxXSwgcHJvdmlkZXIgPSBfcmVmNCQucHJvdmlkZXIsIHByb3ZpZGVyU291cmNlID0gX3JlZjQkLnNvdXJjZTsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHRQcm9taXNlKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkQ29udGV4dCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgdGhlIG5leHQgcHJvdmlkZXIsIG9ubHkgZXhwb3NlIHRoZSBjb250ZXh0IGF2YWlsYWJsZSBiYXNlZCBvbiB0aGUgZGVwZW5kZW5jaWVzIG9mIHRoZSBwbHVnaW4gdGhhdAogICAgICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlcmVkIHRoYXQgcHJvdmlkZXIuCiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9zZWRDb250ZXh0ID0gKDAsIF8ucGljaykocmVzb2x2ZWRDb250ZXh0LCBfdG9Db25zdW1hYmxlQXJyYXkoX3RoaXMyLmdldENvbnRleHROYW1lc0ZvclNvdXJjZShwcm92aWRlclNvdXJjZSkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX29iamVjdFNwcmVhZDsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQxID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MiA9IHJlc29sdmVkQ29udGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQzID0gX2RlZmluZVByb3BlcnR5MjsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQ0ID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50NSA9IGNvbnRleHROYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHByb3ZpZGVyLmFwcGx5KHZvaWQgMCwgW2V4cG9zZWRDb250ZXh0XS5jb25jYXQoY29udGV4dEFyZ3MpKSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQ2ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50NyA9ICgwLCBfY29udGV4dDIudDMpKF9jb250ZXh0Mi50NCwgX2NvbnRleHQyLnQ1LCBfY29udGV4dDIudDYpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgKDAsIF9jb250ZXh0Mi50MCkoX2NvbnRleHQyLnQxLCBfY29udGV4dDIudDIsIF9jb250ZXh0Mi50NykpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0sIFByb21pc2UucmVzb2x2ZSh7fSkpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldENvbnRleHROYW1lc0ZvclNvdXJjZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udGV4dE5hbWVzRm9yU291cmNlKHNvdXJjZSkgewogICAgICBpZiAoc291cmNlID09PSB0aGlzLmNvcmVJZCkgewogICAgICAgIHJldHVybiB0aGlzLmdldENvbnRleHROYW1lc0ZvckNvcmUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5nZXRDb250ZXh0TmFtZXNGb3JQbHVnaW5JZChzb3VyY2UpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q29udGV4dE5hbWVzRm9yQ29yZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udGV4dE5hbWVzRm9yQ29yZSgpIHsKICAgICAgcmV0dXJuIG5ldyBTZXQodGhpcy5jb250ZXh0TmFtZXNCeVNvdXJjZS5nZXQodGhpcy5jb3JlSWQpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDb250ZXh0TmFtZXNGb3JQbHVnaW5JZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udGV4dE5hbWVzRm9yUGx1Z2luSWQocGx1Z2luSWQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAvLyBJZiB0aGUgc291cmNlIGlzIGEgcGx1Z2luLi4uCiAgICAgIHZhciBwbHVnaW5EZXBzID0gdGhpcy5wbHVnaW5EZXBlbmRlbmNpZXMuZ2V0KHBsdWdpbklkKTsKCiAgICAgIGlmICghcGx1Z2luRGVwcykgewogICAgICAgIC8vIFRoaXMgY2FzZSBzaG91bGQgbmV2ZXIgYmUgaGl0LCBidXQgbGV0J3MgYmUgc2FmZS4KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjcmVhdGUgY29udGV4dCBmb3IgdW5rbm93biBwbHVnaW46ICIuY29uY2F0KHBsdWdpbklkLnRvU3RyaW5nKCkpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBTZXQoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmNvbnRleHROYW1lc0J5U291cmNlLmdldCh0aGlzLmNvcmVJZCkpLCBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5jb250ZXh0TmFtZXNCeVNvdXJjZS5nZXQocGx1Z2luSWQpIHx8IFtdKSwgX3RvQ29uc3VtYWJsZUFycmF5KCgwLCBfbG9kYXNoLmZsYXR0ZW4pKHBsdWdpbkRlcHMubWFwKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy5jb250ZXh0TmFtZXNCeVNvdXJjZS5nZXQocCkgfHwgW107CiAgICAgIH0pKSkpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBDb250ZXh0Q29udGFpbmVyOwp9KCk7Ci8qKiBTb3J0cyBjb250ZXh0IHByb3ZpZGVyIHBhaXJzIGJ5IGNvcmUgcGFpcnMgZmlyc3QuICovCgoKZXhwb3J0cy5Db250ZXh0Q29udGFpbmVyID0gQ29udGV4dENvbnRhaW5lcjsKCnZhciBzb3J0QnlDb3JlRmlyc3QgPSBmdW5jdGlvbiBzb3J0QnlDb3JlRmlyc3QoY29yZUlkKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmNSwgX3JlZjYpIHsKICAgIHZhciBfcmVmNyA9IF9zbGljZWRUb0FycmF5KF9yZWY1LCAyKSwKICAgICAgICBsZWZ0TmFtZSA9IF9yZWY3WzBdLAogICAgICAgIGxlZnRQcm92aWRlciA9IF9yZWY3WzFdOwoKICAgIHZhciBfcmVmOCA9IF9zbGljZWRUb0FycmF5KF9yZWY2LCAyKSwKICAgICAgICByaWdodE5hbWUgPSBfcmVmOFswXSwKICAgICAgICByaWdodFByb3ZpZGVyID0gX3JlZjhbMV07CgogICAgaWYgKGxlZnRQcm92aWRlci5zb3VyY2UgPT09IGNvcmVJZCkgewogICAgICByZXR1cm4gcmlnaHRQcm92aWRlci5zb3VyY2UgPT09IGNvcmVJZCA/IDAgOiAtMTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiByaWdodFByb3ZpZGVyLnNvdXJjZSA9PT0gY29yZUlkID8gMSA6IDA7CiAgICB9CiAgfTsKfTs="},null]}