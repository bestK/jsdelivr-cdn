{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/components/url_state/helpers.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/components/url_state/helpers.js","mtime":1585205047763},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnJlcGxhY2VTdGF0ZUluTG9jYXRpb24gPSBleHBvcnRzLnVwZGF0ZVVybFN0YXRlU3RyaW5nID0gZXhwb3J0cy51cGRhdGVUaW1lcmFuZ2VVcmwgPSBleHBvcnRzLm1ha2VNYXBTdGF0ZVRvUHJvcHMgPSBleHBvcnRzLmdldEN1cnJlbnRMb2NhdGlvbiA9IGV4cG9ydHMuZ2V0VGl0bGUgPSBleHBvcnRzLmdldFVybFR5cGUgPSBleHBvcnRzLnJlcGxhY2VRdWVyeVN0cmluZ0luTG9jYXRpb24gPSBleHBvcnRzLnJlcGxhY2VTdGF0ZUtleUluUXVlcnlTdHJpbmcgPSBleHBvcnRzLmdldFBhcmFtRnJvbVF1ZXJ5U3RyaW5nID0gZXhwb3J0cy5nZXRRdWVyeVN0cmluZ0Zyb21Mb2NhdGlvbiA9IGV4cG9ydHMuZW5jb2RlUmlzb25VcmxTdGF0ZSA9IGV4cG9ydHMuZGVjb2RlUmlzb25VcmxTdGF0ZSA9IHZvaWQgMDsKCnZhciBfZnAgPSByZXF1aXJlKCJsb2Rhc2gvZnAiKTsKCnZhciBfcmlzb25Ob2RlID0gcmVxdWlyZSgicmlzb24tbm9kZSIpOwoKdmFyIF9xdWVyeV9zdHJpbmcgPSByZXF1aXJlKCJ1aS91dGlscy9xdWVyeV9zdHJpbmciKTsKCnZhciBfdHlwZXMgPSByZXF1aXJlKCIuLi8uLi9wYWdlcy9ob21lL3R5cGVzIik7Cgp2YXIgX3N0b3JlID0gcmVxdWlyZSgiLi4vLi4vc3RvcmUiKTsKCnZhciBfc3VwZXJfZGF0ZV9waWNrZXIgPSByZXF1aXJlKCIuLi9zdXBlcl9kYXRlX3BpY2tlciIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuL2NvbnN0YW50cyIpOwoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCnZhciBkZWNvZGVSaXNvblVybFN0YXRlID0gZnVuY3Rpb24gZGVjb2RlUmlzb25VcmxTdGF0ZSh2YWx1ZSkgewogIHRyeSB7CiAgICByZXR1cm4gdmFsdWUgPyAoMCwgX3Jpc29uTm9kZS5kZWNvZGUpKHZhbHVlKSA6IG51bGw7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aCgncmlzb24gZGVjb2RlciBlcnJvcicpKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHRocm93IGVycm9yOwogIH0KfTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKCgpleHBvcnRzLmRlY29kZVJpc29uVXJsU3RhdGUgPSBkZWNvZGVSaXNvblVybFN0YXRlOwoKdmFyIGVuY29kZVJpc29uVXJsU3RhdGUgPSBmdW5jdGlvbiBlbmNvZGVSaXNvblVybFN0YXRlKHN0YXRlKSB7CiAgcmV0dXJuICgwLCBfcmlzb25Ob2RlLmVuY29kZSkoc3RhdGUpOwp9OwoKZXhwb3J0cy5lbmNvZGVSaXNvblVybFN0YXRlID0gZW5jb2RlUmlzb25VcmxTdGF0ZTsKCnZhciBnZXRRdWVyeVN0cmluZ0Zyb21Mb2NhdGlvbiA9IGZ1bmN0aW9uIGdldFF1ZXJ5U3RyaW5nRnJvbUxvY2F0aW9uKHNlYXJjaCkgewogIHJldHVybiBzZWFyY2guc3Vic3RyaW5nKDEpOwp9OwoKZXhwb3J0cy5nZXRRdWVyeVN0cmluZ0Zyb21Mb2NhdGlvbiA9IGdldFF1ZXJ5U3RyaW5nRnJvbUxvY2F0aW9uOwoKdmFyIGdldFBhcmFtRnJvbVF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gZ2V0UGFyYW1Gcm9tUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcsIGtleSkgewogIHZhciBxdWVyeVBhcmFtID0gX3F1ZXJ5X3N0cmluZy5RdWVyeVN0cmluZy5kZWNvZGUocXVlcnlTdHJpbmcpW2tleV07CgogIHJldHVybiBBcnJheS5pc0FycmF5KHF1ZXJ5UGFyYW0pID8gcXVlcnlQYXJhbVswXSA6IHF1ZXJ5UGFyYW07Cn07CgpleHBvcnRzLmdldFBhcmFtRnJvbVF1ZXJ5U3RyaW5nID0gZ2V0UGFyYW1Gcm9tUXVlcnlTdHJpbmc7Cgp2YXIgcmVwbGFjZVN0YXRlS2V5SW5RdWVyeVN0cmluZyA9IGZ1bmN0aW9uIHJlcGxhY2VTdGF0ZUtleUluUXVlcnlTdHJpbmcoc3RhdGVLZXksIHVybFN0YXRlKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChxdWVyeVN0cmluZykgewogICAgdmFyIHByZXZpb3VzUXVlcnlWYWx1ZXMgPSBfcXVlcnlfc3RyaW5nLlF1ZXJ5U3RyaW5nLmRlY29kZShxdWVyeVN0cmluZyk7CgogICAgaWYgKHVybFN0YXRlID09IG51bGwgfHwgdHlwZW9mIHVybFN0YXRlID09PSAnc3RyaW5nJyAmJiB1cmxTdGF0ZSA9PT0gJycpIHsKICAgICAgZGVsZXRlIHByZXZpb3VzUXVlcnlWYWx1ZXNbc3RhdGVLZXldOwogICAgICByZXR1cm4gX3F1ZXJ5X3N0cmluZy5RdWVyeVN0cmluZy5lbmNvZGUoX29iamVjdFNwcmVhZCh7fSwgcHJldmlvdXNRdWVyeVZhbHVlcykpOwogICAgfSAvLyDgsqBf4LKgIENvZGUgd2FzIGNvcGllZCBmcm9tIHgtcGFjay9sZWdhY3kvcGx1Z2lucy9pbmZyYS9wdWJsaWMvdXRpbHMvdXJsX3N0YXRlLnRzeCDgsqBf4LKgCiAgICAvLyBSZW1vdmUgdGhpcyBpZiB0aGVzZSB1dGlsaXRpZXMgYXJlIHByb21vdGVkIHRvIGtpYmFuYSBjb3JlCgoKICAgIHZhciBlbmNvZGVkVXJsU3RhdGUgPSB0eXBlb2YgdXJsU3RhdGUgIT09ICd1bmRlZmluZWQnID8gZW5jb2RlUmlzb25VcmxTdGF0ZSh1cmxTdGF0ZSkgOiB1bmRlZmluZWQ7CiAgICByZXR1cm4gX3F1ZXJ5X3N0cmluZy5RdWVyeVN0cmluZy5lbmNvZGUoX29iamVjdFNwcmVhZCh7fSwgcHJldmlvdXNRdWVyeVZhbHVlcywgX2RlZmluZVByb3BlcnR5KHt9LCBzdGF0ZUtleSwgZW5jb2RlZFVybFN0YXRlKSkpOwogIH07Cn07CgpleHBvcnRzLnJlcGxhY2VTdGF0ZUtleUluUXVlcnlTdHJpbmcgPSByZXBsYWNlU3RhdGVLZXlJblF1ZXJ5U3RyaW5nOwoKdmFyIHJlcGxhY2VRdWVyeVN0cmluZ0luTG9jYXRpb24gPSBmdW5jdGlvbiByZXBsYWNlUXVlcnlTdHJpbmdJbkxvY2F0aW9uKGxvY2F0aW9uLCBxdWVyeVN0cmluZykgewogIGlmIChxdWVyeVN0cmluZyA9PT0gZ2V0UXVlcnlTdHJpbmdGcm9tTG9jYXRpb24obG9jYXRpb24uc2VhcmNoKSkgewogICAgcmV0dXJuIGxvY2F0aW9uOwogIH0gZWxzZSB7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgbG9jYXRpb24sIHsKICAgICAgc2VhcmNoOiAiPyIuY29uY2F0KHF1ZXJ5U3RyaW5nKQogICAgfSk7CiAgfQp9OwoKZXhwb3J0cy5yZXBsYWNlUXVlcnlTdHJpbmdJbkxvY2F0aW9uID0gcmVwbGFjZVF1ZXJ5U3RyaW5nSW5Mb2NhdGlvbjsKCnZhciBnZXRVcmxUeXBlID0gZnVuY3Rpb24gZ2V0VXJsVHlwZShwYWdlTmFtZSkgewogIGlmIChwYWdlTmFtZSA9PT0gX3R5cGVzLlNpZW1QYWdlTmFtZS5vdmVydmlldykgewogICAgcmV0dXJuICdvdmVydmlldyc7CiAgfSBlbHNlIGlmIChwYWdlTmFtZSA9PT0gX3R5cGVzLlNpZW1QYWdlTmFtZS5ob3N0cykgewogICAgcmV0dXJuICdob3N0JzsKICB9IGVsc2UgaWYgKHBhZ2VOYW1lID09PSBfdHlwZXMuU2llbVBhZ2VOYW1lLm5ldHdvcmspIHsKICAgIHJldHVybiAnbmV0d29yayc7CiAgfSBlbHNlIGlmIChwYWdlTmFtZSA9PT0gX3R5cGVzLlNpZW1QYWdlTmFtZS5kZXRlY3Rpb25zKSB7CiAgICByZXR1cm4gJ2RldGVjdGlvbnMnOwogIH0gZWxzZSBpZiAocGFnZU5hbWUgPT09IF90eXBlcy5TaWVtUGFnZU5hbWUudGltZWxpbmVzKSB7CiAgICByZXR1cm4gJ3RpbWVsaW5lJzsKICB9CgogIHJldHVybiAnb3ZlcnZpZXcnOwp9OwoKZXhwb3J0cy5nZXRVcmxUeXBlID0gZ2V0VXJsVHlwZTsKCnZhciBnZXRUaXRsZSA9IGZ1bmN0aW9uIGdldFRpdGxlKHBhZ2VOYW1lLCBkZXRhaWxOYW1lLCBuYXZUYWJzKSB7CiAgaWYgKGRldGFpbE5hbWUgIT0gbnVsbCkgcmV0dXJuIGRldGFpbE5hbWU7CiAgcmV0dXJuIG5hdlRhYnNbcGFnZU5hbWVdICE9IG51bGwgPyBuYXZUYWJzW3BhZ2VOYW1lXS5uYW1lIDogJyc7Cn07CgpleHBvcnRzLmdldFRpdGxlID0gZ2V0VGl0bGU7Cgp2YXIgZ2V0Q3VycmVudExvY2F0aW9uID0gZnVuY3Rpb24gZ2V0Q3VycmVudExvY2F0aW9uKHBhZ2VOYW1lLCBkZXRhaWxOYW1lKSB7CiAgaWYgKHBhZ2VOYW1lID09PSBfdHlwZXMuU2llbVBhZ2VOYW1lLm92ZXJ2aWV3KSB7CiAgICByZXR1cm4gX2NvbnN0YW50cy5DT05TVEFOVFMub3ZlcnZpZXdQYWdlOwogIH0gZWxzZSBpZiAocGFnZU5hbWUgPT09IF90eXBlcy5TaWVtUGFnZU5hbWUuaG9zdHMpIHsKICAgIGlmIChkZXRhaWxOYW1lICE9IG51bGwpIHsKICAgICAgcmV0dXJuIF9jb25zdGFudHMuQ09OU1RBTlRTLmhvc3RzRGV0YWlsczsKICAgIH0KCiAgICByZXR1cm4gX2NvbnN0YW50cy5DT05TVEFOVFMuaG9zdHNQYWdlOwogIH0gZWxzZSBpZiAocGFnZU5hbWUgPT09IF90eXBlcy5TaWVtUGFnZU5hbWUubmV0d29yaykgewogICAgaWYgKGRldGFpbE5hbWUgIT0gbnVsbCkgewogICAgICByZXR1cm4gX2NvbnN0YW50cy5DT05TVEFOVFMubmV0d29ya0RldGFpbHM7CiAgICB9CgogICAgcmV0dXJuIF9jb25zdGFudHMuQ09OU1RBTlRTLm5ldHdvcmtQYWdlOwogIH0gZWxzZSBpZiAocGFnZU5hbWUgPT09IF90eXBlcy5TaWVtUGFnZU5hbWUuZGV0ZWN0aW9ucykgewogICAgcmV0dXJuIF9jb25zdGFudHMuQ09OU1RBTlRTLmRldGVjdGlvbnNQYWdlOwogIH0gZWxzZSBpZiAocGFnZU5hbWUgPT09IF90eXBlcy5TaWVtUGFnZU5hbWUudGltZWxpbmVzKSB7CiAgICByZXR1cm4gX2NvbnN0YW50cy5DT05TVEFOVFMudGltZWxpbmVQYWdlOwogIH0KCiAgcmV0dXJuIF9jb25zdGFudHMuQ09OU1RBTlRTLnVua25vd247Cn07CgpleHBvcnRzLmdldEN1cnJlbnRMb2NhdGlvbiA9IGdldEN1cnJlbnRMb2NhdGlvbjsKCnZhciBtYWtlTWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFrZU1hcFN0YXRlVG9Qcm9wcygpIHsKICB2YXIgZ2V0SW5wdXRzU2VsZWN0b3IgPSBfc3RvcmUuaW5wdXRzU2VsZWN0b3JzLmlucHV0c1NlbGVjdG9yKCk7CgogIHZhciBnZXRHbG9iYWxRdWVyeVNlbGVjdG9yID0gX3N0b3JlLmlucHV0c1NlbGVjdG9ycy5nbG9iYWxRdWVyeVNlbGVjdG9yKCk7CgogIHZhciBnZXRHbG9iYWxGaWx0ZXJzUXVlcnlTZWxlY3RvciA9IF9zdG9yZS5pbnB1dHNTZWxlY3RvcnMuZ2xvYmFsRmlsdGVyc1F1ZXJ5U2VsZWN0b3IoKTsKCiAgdmFyIGdldEdsb2JhbFNhdmVkUXVlcnlTZWxlY3RvciA9IF9zdG9yZS5pbnB1dHNTZWxlY3RvcnMuZ2xvYmFsU2F2ZWRRdWVyeVNlbGVjdG9yKCk7CgogIHZhciBnZXRUaW1lbGluZXMgPSBfc3RvcmUudGltZWxpbmVTZWxlY3RvcnMuZ2V0VGltZWxpbmVzKCk7CgogIHZhciBtYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUsIF9yZWYpIHsKICAgIHZhciBfc2VhcmNoQXR0ciwgX2dsb2JhbCwgX3RpbWVsaW5lLCBfb2JqZWN0U3ByZWFkMzsKCiAgICB2YXIgcGFnZU5hbWUgPSBfcmVmLnBhZ2VOYW1lLAogICAgICAgIGRldGFpbE5hbWUgPSBfcmVmLmRldGFpbE5hbWU7CiAgICB2YXIgaW5wdXRTdGF0ZSA9IGdldElucHV0c1NlbGVjdG9yKHN0YXRlKTsKICAgIHZhciBfaW5wdXRTdGF0ZSRnbG9iYWwgPSBpbnB1dFN0YXRlLmdsb2JhbCwKICAgICAgICBnbG9iYWxMaW5rVG8gPSBfaW5wdXRTdGF0ZSRnbG9iYWwubGlua1RvLAogICAgICAgIGdsb2JhbFRpbWVyYW5nZSA9IF9pbnB1dFN0YXRlJGdsb2JhbC50aW1lcmFuZ2U7CiAgICB2YXIgX2lucHV0U3RhdGUkdGltZWxpbmUgPSBpbnB1dFN0YXRlLnRpbWVsaW5lLAogICAgICAgIHRpbWVsaW5lTGlua1RvID0gX2lucHV0U3RhdGUkdGltZWxpbmUubGlua1RvLAogICAgICAgIHRpbWVsaW5lVGltZXJhbmdlID0gX2lucHV0U3RhdGUkdGltZWxpbmUudGltZXJhbmdlOwogICAgdmFyIHRpbWVsaW5lID0gT2JqZWN0LmVudHJpZXMoZ2V0VGltZWxpbmVzKHN0YXRlKSkucmVkdWNlKGZ1bmN0aW9uIChvYmosIF9yZWYyKSB7CiAgICAgIHZhciBfcmVmMyA9IF9zbGljZWRUb0FycmF5KF9yZWYyLCAyKSwKICAgICAgICAgIHRpbWVsaW5lSWQgPSBfcmVmM1swXSwKICAgICAgICAgIHRpbWVsaW5lT2JqID0gX3JlZjNbMV07CgogICAgICByZXR1cm4gewogICAgICAgIGlkOiB0aW1lbGluZU9iai5zYXZlZE9iamVjdElkICE9IG51bGwgPyB0aW1lbGluZU9iai5zYXZlZE9iamVjdElkIDogJycsCiAgICAgICAgaXNPcGVuOiB0aW1lbGluZU9iai5zaG93CiAgICAgIH07CiAgICB9LCB7CiAgICAgIGlkOiAnJywKICAgICAgaXNPcGVuOiBmYWxzZQogICAgfSk7CiAgICB2YXIgc2VhcmNoQXR0ciA9IChfc2VhcmNoQXR0ciA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3NlYXJjaEF0dHIsIF9jb25zdGFudHMuQ09OU1RBTlRTLmFwcFF1ZXJ5LCBnZXRHbG9iYWxRdWVyeVNlbGVjdG9yKHN0YXRlKSksIF9kZWZpbmVQcm9wZXJ0eShfc2VhcmNoQXR0ciwgX2NvbnN0YW50cy5DT05TVEFOVFMuZmlsdGVycywgZ2V0R2xvYmFsRmlsdGVyc1F1ZXJ5U2VsZWN0b3Ioc3RhdGUpKSwgX3NlYXJjaEF0dHIpOwogICAgdmFyIHNhdmVkUXVlcnkgPSBnZXRHbG9iYWxTYXZlZFF1ZXJ5U2VsZWN0b3Ioc3RhdGUpOwoKICAgIGlmIChzYXZlZFF1ZXJ5ICE9IG51bGwgJiYgc2F2ZWRRdWVyeS5pZCAhPT0gJycpIHsKICAgICAgc2VhcmNoQXR0ciA9IF9kZWZpbmVQcm9wZXJ0eSh7fSwgX2NvbnN0YW50cy5DT05TVEFOVFMuc2F2ZWRRdWVyeSwgc2F2ZWRRdWVyeS5pZCk7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgdXJsU3RhdGU6IF9vYmplY3RTcHJlYWQoe30sIHNlYXJjaEF0dHIsIChfb2JqZWN0U3ByZWFkMyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX29iamVjdFNwcmVhZDMsIF9jb25zdGFudHMuQ09OU1RBTlRTLnRpbWVyYW5nZSwgewogICAgICAgIGdsb2JhbDogKF9nbG9iYWwgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9nbG9iYWwsIF9jb25zdGFudHMuQ09OU1RBTlRTLnRpbWVyYW5nZSwgZ2xvYmFsVGltZXJhbmdlKSwgX2RlZmluZVByb3BlcnR5KF9nbG9iYWwsICJsaW5rVG8iLCBnbG9iYWxMaW5rVG8pLCBfZ2xvYmFsKSwKICAgICAgICB0aW1lbGluZTogKF90aW1lbGluZSA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3RpbWVsaW5lLCBfY29uc3RhbnRzLkNPTlNUQU5UUy50aW1lcmFuZ2UsIHRpbWVsaW5lVGltZXJhbmdlKSwgX2RlZmluZVByb3BlcnR5KF90aW1lbGluZSwgImxpbmtUbyIsIHRpbWVsaW5lTGlua1RvKSwgX3RpbWVsaW5lKQogICAgICB9KSwgX2RlZmluZVByb3BlcnR5KF9vYmplY3RTcHJlYWQzLCBfY29uc3RhbnRzLkNPTlNUQU5UUy50aW1lbGluZSwgdGltZWxpbmUpLCBfb2JqZWN0U3ByZWFkMykpCiAgICB9OwogIH07CgogIHJldHVybiBtYXBTdGF0ZVRvUHJvcHM7Cn07CgpleHBvcnRzLm1ha2VNYXBTdGF0ZVRvUHJvcHMgPSBtYWtlTWFwU3RhdGVUb1Byb3BzOwoKdmFyIHVwZGF0ZVRpbWVyYW5nZVVybCA9IGZ1bmN0aW9uIHVwZGF0ZVRpbWVyYW5nZVVybCh0aW1lUmFuZ2UsIGlzSW5pdGlhbGl6aW5nKSB7CiAgaWYgKHRpbWVSYW5nZS5nbG9iYWwudGltZXJhbmdlLmtpbmQgPT09ICdyZWxhdGl2ZScpIHsKICAgIHRpbWVSYW5nZS5nbG9iYWwudGltZXJhbmdlLmZyb20gPSAoMCwgX3N1cGVyX2RhdGVfcGlja2VyLmZvcm1hdERhdGUpKHRpbWVSYW5nZS5nbG9iYWwudGltZXJhbmdlLmZyb21TdHIpOwogICAgdGltZVJhbmdlLmdsb2JhbC50aW1lcmFuZ2UudG8gPSAoMCwgX3N1cGVyX2RhdGVfcGlja2VyLmZvcm1hdERhdGUpKHRpbWVSYW5nZS5nbG9iYWwudGltZXJhbmdlLnRvU3RyLCB7CiAgICAgIHJvdW5kVXA6IHRydWUKICAgIH0pOwogIH0KCiAgaWYgKHRpbWVSYW5nZS50aW1lbGluZS50aW1lcmFuZ2Uua2luZCA9PT0gJ3JlbGF0aXZlJyAmJiBpc0luaXRpYWxpemluZykgewogICAgdGltZVJhbmdlLnRpbWVsaW5lLnRpbWVyYW5nZS5mcm9tID0gKDAsIF9zdXBlcl9kYXRlX3BpY2tlci5mb3JtYXREYXRlKSh0aW1lUmFuZ2UudGltZWxpbmUudGltZXJhbmdlLmZyb21TdHIpOwogICAgdGltZVJhbmdlLnRpbWVsaW5lLnRpbWVyYW5nZS50byA9ICgwLCBfc3VwZXJfZGF0ZV9waWNrZXIuZm9ybWF0RGF0ZSkodGltZVJhbmdlLnRpbWVsaW5lLnRpbWVyYW5nZS50b1N0ciwgewogICAgICByb3VuZFVwOiB0cnVlCiAgICB9KTsKICB9CgogIHJldHVybiB0aW1lUmFuZ2U7Cn07CgpleHBvcnRzLnVwZGF0ZVRpbWVyYW5nZVVybCA9IHVwZGF0ZVRpbWVyYW5nZVVybDsKCnZhciB1cGRhdGVVcmxTdGF0ZVN0cmluZyA9IGZ1bmN0aW9uIHVwZGF0ZVVybFN0YXRlU3RyaW5nKF9yZWY0KSB7CiAgdmFyIGlzSW5pdGlhbGl6aW5nID0gX3JlZjQuaXNJbml0aWFsaXppbmcsCiAgICAgIGhpc3RvcnkgPSBfcmVmNC5oaXN0b3J5LAogICAgICBuZXdVcmxTdGF0ZVN0cmluZyA9IF9yZWY0Lm5ld1VybFN0YXRlU3RyaW5nLAogICAgICBwYXRoTmFtZSA9IF9yZWY0LnBhdGhOYW1lLAogICAgICBzZWFyY2ggPSBfcmVmNC5zZWFyY2gsCiAgICAgIHVwZGF0ZVRpbWVyYW5nZSA9IF9yZWY0LnVwZGF0ZVRpbWVyYW5nZSwKICAgICAgdXJsS2V5ID0gX3JlZjQudXJsS2V5OwoKICBpZiAodXJsS2V5ID09PSBfY29uc3RhbnRzLkNPTlNUQU5UUy5hcHBRdWVyeSkgewogICAgdmFyIHF1ZXJ5U3RhdGUgPSBkZWNvZGVSaXNvblVybFN0YXRlKG5ld1VybFN0YXRlU3RyaW5nKTsKCiAgICBpZiAocXVlcnlTdGF0ZSAhPSBudWxsICYmIHF1ZXJ5U3RhdGUucXVlcnkgPT09ICcnKSB7CiAgICAgIHJldHVybiByZXBsYWNlU3RhdGVJbkxvY2F0aW9uKHsKICAgICAgICBoaXN0b3J5OiBoaXN0b3J5LAogICAgICAgIHBhdGhOYW1lOiBwYXRoTmFtZSwKICAgICAgICBzZWFyY2g6IHNlYXJjaCwKICAgICAgICB1cmxTdGF0ZVRvUmVwbGFjZTogJycsCiAgICAgICAgdXJsU3RhdGVLZXk6IHVybEtleQogICAgICB9KTsKICAgIH0KICB9IGVsc2UgaWYgKHVybEtleSA9PT0gX2NvbnN0YW50cy5DT05TVEFOVFMudGltZXJhbmdlICYmIHVwZGF0ZVRpbWVyYW5nZSkgewogICAgdmFyIF9xdWVyeVN0YXRlID0gZGVjb2RlUmlzb25VcmxTdGF0ZShuZXdVcmxTdGF0ZVN0cmluZyk7CgogICAgaWYgKF9xdWVyeVN0YXRlICE9IG51bGwgJiYgX3F1ZXJ5U3RhdGUuZ2xvYmFsICE9IG51bGwpIHsKICAgICAgcmV0dXJuIHJlcGxhY2VTdGF0ZUluTG9jYXRpb24oewogICAgICAgIGhpc3Rvcnk6IGhpc3RvcnksCiAgICAgICAgcGF0aE5hbWU6IHBhdGhOYW1lLAogICAgICAgIHNlYXJjaDogc2VhcmNoLAogICAgICAgIHVybFN0YXRlVG9SZXBsYWNlOiB1cGRhdGVUaW1lcmFuZ2VVcmwoX3F1ZXJ5U3RhdGUsIGlzSW5pdGlhbGl6aW5nKSwKICAgICAgICB1cmxTdGF0ZUtleTogdXJsS2V5CiAgICAgIH0pOwogICAgfQogIH0gZWxzZSBpZiAodXJsS2V5ID09PSBfY29uc3RhbnRzLkNPTlNUQU5UUy5maWx0ZXJzKSB7CiAgICB2YXIgX3F1ZXJ5U3RhdGUyID0gZGVjb2RlUmlzb25VcmxTdGF0ZShuZXdVcmxTdGF0ZVN0cmluZyk7CgogICAgaWYgKCgwLCBfZnAuaXNFbXB0eSkoX3F1ZXJ5U3RhdGUyKSkgewogICAgICByZXR1cm4gcmVwbGFjZVN0YXRlSW5Mb2NhdGlvbih7CiAgICAgICAgaGlzdG9yeTogaGlzdG9yeSwKICAgICAgICBwYXRoTmFtZTogcGF0aE5hbWUsCiAgICAgICAgc2VhcmNoOiBzZWFyY2gsCiAgICAgICAgdXJsU3RhdGVUb1JlcGxhY2U6ICcnLAogICAgICAgIHVybFN0YXRlS2V5OiB1cmxLZXkKICAgICAgfSk7CiAgICB9CiAgfSBlbHNlIGlmICh1cmxLZXkgPT09IF9jb25zdGFudHMuQ09OU1RBTlRTLnRpbWVsaW5lKSB7CiAgICB2YXIgX3F1ZXJ5U3RhdGUzID0gZGVjb2RlUmlzb25VcmxTdGF0ZShuZXdVcmxTdGF0ZVN0cmluZyk7CgogICAgaWYgKF9xdWVyeVN0YXRlMyAhPSBudWxsICYmIF9xdWVyeVN0YXRlMy5pZCA9PT0gJycpIHsKICAgICAgcmV0dXJuIHJlcGxhY2VTdGF0ZUluTG9jYXRpb24oewogICAgICAgIGhpc3Rvcnk6IGhpc3RvcnksCiAgICAgICAgcGF0aE5hbWU6IHBhdGhOYW1lLAogICAgICAgIHNlYXJjaDogc2VhcmNoLAogICAgICAgIHVybFN0YXRlVG9SZXBsYWNlOiAnJywKICAgICAgICB1cmxTdGF0ZUtleTogdXJsS2V5CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHNlYXJjaDsKfTsKCmV4cG9ydHMudXBkYXRlVXJsU3RhdGVTdHJpbmcgPSB1cGRhdGVVcmxTdGF0ZVN0cmluZzsKCnZhciByZXBsYWNlU3RhdGVJbkxvY2F0aW9uID0gZnVuY3Rpb24gcmVwbGFjZVN0YXRlSW5Mb2NhdGlvbihfcmVmNSkgewogIHZhciBoaXN0b3J5ID0gX3JlZjUuaGlzdG9yeSwKICAgICAgdXJsU3RhdGVUb1JlcGxhY2UgPSBfcmVmNS51cmxTdGF0ZVRvUmVwbGFjZSwKICAgICAgdXJsU3RhdGVLZXkgPSBfcmVmNS51cmxTdGF0ZUtleSwKICAgICAgcGF0aE5hbWUgPSBfcmVmNS5wYXRoTmFtZSwKICAgICAgc2VhcmNoID0gX3JlZjUuc2VhcmNoOwogIHZhciBuZXdMb2NhdGlvbiA9IHJlcGxhY2VRdWVyeVN0cmluZ0luTG9jYXRpb24oewogICAgaGFzaDogJycsCiAgICBwYXRobmFtZTogcGF0aE5hbWUsCiAgICBzZWFyY2g6IHNlYXJjaCwKICAgIHN0YXRlOiAnJwogIH0sIHJlcGxhY2VTdGF0ZUtleUluUXVlcnlTdHJpbmcodXJsU3RhdGVLZXksIHVybFN0YXRlVG9SZXBsYWNlKShnZXRRdWVyeVN0cmluZ0Zyb21Mb2NhdGlvbihzZWFyY2gpKSk7CgogIGlmIChoaXN0b3J5KSB7CiAgICBoaXN0b3J5LnJlcGxhY2UobmV3TG9jYXRpb24pOwogIH0KCiAgcmV0dXJuIG5ld0xvY2F0aW9uLnNlYXJjaDsKfTsKCmV4cG9ydHMucmVwbGFjZVN0YXRlSW5Mb2NhdGlvbiA9IHJlcGxhY2VTdGF0ZUluTG9jYXRpb247"},null]}