{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/expressions/public/interpreter_provider.js","dependencies":[{"path":"src/plugins/expressions/public/interpreter_provider.js","mtime":1585205041738},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmludGVycHJldGVyUHJvdmlkZXIgPSBpbnRlcnByZXRlclByb3ZpZGVyOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgImNyZWF0ZUVycm9yIiwgewogIGVudW1lcmFibGU6IHRydWUsCiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICByZXR1cm4gX2NyZWF0ZV9lcnJvci5jcmVhdGVFcnJvcjsKICB9Cn0pOwoKdmFyIF9jb21tb24gPSByZXF1aXJlKCJAa2JuL2ludGVycHJldGVyL2NvbW1vbiIpOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfY3JlYXRlX2Vycm9yID0gcmVxdWlyZSgiLi9jcmVhdGVfZXJyb3IiKTsKCnZhciBfdHlwZSA9IHJlcXVpcmUoIi4uL2NvbW1vbi90eXBlIik7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gaW50ZXJwcmV0ZXJQcm92aWRlcihjb25maWcpIHsKICB2YXIgZnVuY3Rpb25zID0gY29uZmlnLmZ1bmN0aW9ucywKICAgICAgdHlwZXMgPSBjb25maWcudHlwZXM7CgogIHZhciBoYW5kbGVycyA9IF9vYmplY3RTcHJlYWQoe30sIGNvbmZpZy5oYW5kbGVycywgewogICAgdHlwZXM6IHR5cGVzCiAgfSk7CgogIGZ1bmN0aW9uIGNhc3Qobm9kZSwgdG9UeXBlTmFtZXMpIHsKICAgIC8vIElmIHlvdSBkb24ndCBnaXZlIHVzIGFueXRoaW5nIHRvIGNhc3QgdG8sIHlvdSdsbCBnZXQgeW91ciBpbnB1dCBiYWNrCiAgICBpZiAoIXRvVHlwZU5hbWVzIHx8IHRvVHlwZU5hbWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG5vZGU7IC8vIE5vIG5lZWQgdG8gY2FzdCBpZiBub2RlIGlzIGFscmVhZHkgb25lIG9mIHRoZSB2YWxpZCB0eXBlcwoKICAgIHZhciBmcm9tVHlwZU5hbWUgPSAoMCwgX3R5cGUuZ2V0VHlwZSkobm9kZSk7CiAgICBpZiAodG9UeXBlTmFtZXMuaW5jbHVkZXMoZnJvbVR5cGVOYW1lKSkgcmV0dXJuIG5vZGU7CiAgICB2YXIgZnJvbVR5cGVEZWYgPSB0eXBlc1tmcm9tVHlwZU5hbWVdOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9UeXBlTmFtZXMubGVuZ3RoOyBpKyspIHsKICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhlIGN1cnJlbnQgdHlwZSBjYW4gY2FzdCB0byB0aGlzIHR5cGUKICAgICAgaWYgKGZyb21UeXBlRGVmICYmIGZyb21UeXBlRGVmLmNhc3RzVG8odG9UeXBlTmFtZXNbaV0pKSB7CiAgICAgICAgcmV0dXJuIGZyb21UeXBlRGVmLnRvKG5vZGUsIHRvVHlwZU5hbWVzW2ldLCB0eXBlcyk7CiAgICAgIH0gLy8gSWYgdGhhdCBpc24ndCBwb3NzaWJsZSwgY2hlY2sgaWYgdGhpcyB0eXBlIGNhbiBjYXN0IGZyb20gdGhlIGN1cnJlbnQgdHlwZQoKCiAgICAgIHZhciB0b1R5cGVEZWYgPSB0eXBlc1t0b1R5cGVOYW1lc1tpXV07CiAgICAgIGlmICh0b1R5cGVEZWYgJiYgdG9UeXBlRGVmLmNhc3RzRnJvbShmcm9tVHlwZU5hbWUpKSByZXR1cm4gdG9UeXBlRGVmLmZyb20obm9kZSwgdHlwZXMpOwogICAgfQoKICAgIHRocm93IG5ldyBFcnJvcigiQ2FuIG5vdCBjYXN0ICciLmNvbmNhdChmcm9tVHlwZU5hbWUsICInIHRvIGFueSBvZiAnIikuY29uY2F0KHRvVHlwZU5hbWVzLmpvaW4oJywgJyksICInIikpOwogIH0KCiAgZnVuY3Rpb24gaW52b2tlQ2hhaW4oY2hhaW5BcnIsIGNvbnRleHQpIHsKICAgIHZhciBjaGFpbiwgbGluaywgZm5OYW1lLCBmbkFyZ3MsIGZuRGVmLCBfcmVmLCByZXNvbHZlZEFyZ3MsIG5ld0NvbnRleHQ7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBpbnZva2VDaGFpbiQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmIChjaGFpbkFyci5sZW5ndGgpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgY29udGV4dCk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBpZiAoIShoYW5kbGVycy5hYm9ydFNpZ25hbCAmJiBoYW5kbGVycy5hYm9ydFNpZ25hbC5hYm9ydGVkKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCAoMCwgX2NyZWF0ZV9lcnJvci5jcmVhdGVFcnJvcikoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgZXhwcmVzc2lvbiB3YXMgYWJvcnRlZC4nLAogICAgICAgICAgICAgIG5hbWU6ICdBYm9ydEVycm9yJwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjaGFpbiA9ICgwLCBfbG9kYXNoLmNsb25lKShjaGFpbkFycik7CiAgICAgICAgICAgIGxpbmsgPSBjaGFpbi5zaGlmdCgpOyAvLyBFdmVyeSB0aGluZyBpbiB0aGUgY2hhaW4gd2lsbCBhbHdheXMgYmUgYSBmdW5jdGlvbiByaWdodD8KCiAgICAgICAgICAgIGlmIChsaW5rKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRocm93IEVycm9yKCdGdW5jdGlvbiBjaGFpbiBpcyBlbXB0eS4nKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGZuTmFtZSA9IGxpbmsuZnVuY3Rpb24sIGZuQXJncyA9IGxpbmsuYXJndW1lbnRzOwogICAgICAgICAgICBmbkRlZiA9ICgwLCBfY29tbW9uLmdldEJ5QWxpYXMpKGZ1bmN0aW9ucy50b0pTKCksIGZuTmFtZSk7CgogICAgICAgICAgICBpZiAoZm5EZWYpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsICgwLCBfY3JlYXRlX2Vycm9yLmNyZWF0ZUVycm9yKSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogIkZ1bmN0aW9uICIuY29uY2F0KGZuTmFtZSwgIiBjb3VsZCBub3QgYmUgZm91bmQuIikKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMjsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHJlc29sdmVBcmdzKGZuRGVmLCBjb250ZXh0LCBmbkFyZ3MpKTsKCiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBfcmVmID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcmVzb2x2ZWRBcmdzID0gX3JlZi5yZXNvbHZlZEFyZ3M7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChpbnZva2VGdW5jdGlvbihmbkRlZiwgY29udGV4dCwgcmVzb2x2ZWRBcmdzKSk7CgogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgbmV3Q29udGV4dCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICBpZiAoISgoMCwgX3R5cGUuZ2V0VHlwZSkobmV3Q29udGV4dCkgPT09ICdlcnJvcicpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXdDb250ZXh0KTsKCiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBpbnZva2VDaGFpbihjaGFpbiwgbmV3Q29udGV4dCkpOwoKICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyNTsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxMik7IC8vIEV2ZXJ5dGhpbmcgdGhhdCB0aHJvd3MgZnJvbSBhIGZ1bmN0aW9uIHdpbGwgaGl0IHRoaXMKICAgICAgICAgICAgLy8gVGhlIGludGVycHJldGVyIHNob3VsZCAqbmV2ZXIqIGZhaWwuIEl0IHNob3VsZCBhbHdheXMgcmV0dXJuIGEgYHt0eXBlOiBlcnJvcn1gIG9uIGZhaWx1cmUKCiAgICAgICAgICAgIF9jb250ZXh0LnQwLm1lc3NhZ2UgPSAiWyIuY29uY2F0KGZuTmFtZSwgIl0gPiAiKS5jb25jYXQoX2NvbnRleHQudDAubWVzc2FnZSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsICgwLCBfY3JlYXRlX2Vycm9yLmNyZWF0ZUVycm9yKShfY29udGV4dC50MCkpOwoKICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgbnVsbCwgbnVsbCwgW1sxMiwgMjVdXSk7CiAgfQoKICBmdW5jdGlvbiBpbnZva2VGdW5jdGlvbihmbkRlZiwgY29udGV4dCwgYXJncykgewogICAgdmFyIGFjY2VwdGFibGVDb250ZXh0LCBmbk91dHB1dCwgcmV0dXJuVHlwZSwgZXhwZWN0ZWRUeXBlLCB0eXBlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBpbnZva2VGdW5jdGlvbiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIC8vIENoZWNrIGZ1bmN0aW9uIGlucHV0LgogICAgICAgICAgICBhY2NlcHRhYmxlQ29udGV4dCA9IGNhc3QoY29udGV4dCwgZm5EZWYuY29udGV4dCA/IGZuRGVmLmNvbnRleHQudHlwZXMgOiB1bmRlZmluZWQpOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoZm5EZWYuZm4oYWNjZXB0YWJsZUNvbnRleHQsIGFyZ3MsIGhhbmRsZXJzKSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBmbk91dHB1dCA9IF9jb250ZXh0Mi5zZW50OyAvLyBWYWxpZGF0ZSB0aGF0IHRoZSBmdW5jdGlvbiByZXR1cm5lZCB0aGUgdHlwZSBpdCBzYWlkIGl0IHdvdWxkLgogICAgICAgICAgICAvLyBUaGlzIGlzbid0IHJlYWxseSByZXF1aXJlZCwgYnV0IGl0IGtlZXBzIGZ1bmN0aW9uIGRldmVsb3BlcnMgaG9uZXN0LgoKICAgICAgICAgICAgcmV0dXJuVHlwZSA9ICgwLCBfdHlwZS5nZXRUeXBlKShmbk91dHB1dCk7CiAgICAgICAgICAgIGV4cGVjdGVkVHlwZSA9IGZuRGVmLnR5cGU7CgogICAgICAgICAgICBpZiAoIShleHBlY3RlZFR5cGUgJiYgcmV0dXJuVHlwZSAhPT0gZXhwZWN0ZWRUeXBlKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJGdW5jdGlvbiAnIi5jb25jYXQoZm5EZWYubmFtZSwgIicgc2hvdWxkIHJldHVybiAnIikuY29uY2F0KGV4cGVjdGVkVHlwZSwgIicsIikgKyAiIGFjdHVhbGx5IHJldHVybmVkICciLmNvbmNhdChyZXR1cm5UeXBlLCAiJyIpKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIC8vIFZhbGlkYXRlIHRoZSBmdW5jdGlvbiBvdXRwdXQgYWdhaW5zdCB0aGUgdHlwZSBkZWZpbml0aW9uJ3MgdmFsaWRhdGUgZnVuY3Rpb24KICAgICAgICAgICAgdHlwZSA9IGhhbmRsZXJzLnR5cGVzW2ZuRGVmLnR5cGVdOwoKICAgICAgICAgICAgaWYgKCEodHlwZSAmJiB0eXBlLnZhbGlkYXRlKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTA7CiAgICAgICAgICAgIHR5cGUudmFsaWRhdGUoZm5PdXRwdXQpOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE0OwogICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMTApOwogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk91dHB1dCBvZiAnIi5jb25jYXQoZm5EZWYubmFtZSwgIicgaXMgbm90IGEgdmFsaWQgdHlwZSAnIikuY29uY2F0KGZuRGVmLnR5cGUsICInOiAiKS5jb25jYXQoX2NvbnRleHQyLnQwKSk7CgogICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGZuT3V0cHV0KTsKCiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBudWxsLCBudWxsLCBbWzEwLCAxNF1dKTsKICB9IC8vIFByb2Nlc3NlcyB0aGUgbXVsdGktdmFsdWVkIEFTVCBhcmd1bWVudCB2YWx1ZXMgaW50byBhcmd1bWVudHMgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSBmdW5jdGlvbgoKCiAgZnVuY3Rpb24gcmVzb2x2ZUFyZ3MoZm5EZWYsIGNvbnRleHQsIGFyZ0FzdHMpIHsKICAgIHZhciBhcmdEZWZzLCBkZWFsaWFzZWRBcmdBc3RzLCBhcmdBc3RzV2l0aERlZmF1bHRzLCByZXNvbHZlQXJnRm5zLCBhcmdOYW1lcywgcmVzb2x2ZWRBcmdWYWx1ZXMsIHJlc29sdmVkTXVsdGlBcmdzLCByZXNvbHZlZEFyZ3M7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJlc29sdmVBcmdzJChfY29udGV4dDQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgYXJnRGVmcyA9IGZuRGVmLmFyZ3M7IC8vIFVzZSB0aGUgbm9uLWFsaWFzIG5hbWUgZnJvbSB0aGUgYXJndW1lbnQgZGVmaW5pdGlvbgoKICAgICAgICAgICAgZGVhbGlhc2VkQXJnQXN0cyA9ICgwLCBfbG9kYXNoLnJlZHVjZSkoYXJnQXN0cywgZnVuY3Rpb24gKGFjYywgYXJnQXN0LCBhcmdOYW1lKSB7CiAgICAgICAgICAgICAgdmFyIGFyZ0RlZiA9ICgwLCBfY29tbW9uLmdldEJ5QWxpYXMpKGFyZ0RlZnMsIGFyZ05hbWUpOyAvLyBUT0RPOiBJbXBsZW1lbnQgYSBzeXN0ZW0gdG8gYWxsb3cgZm9yIHVuZGVjbGFyZWQgYXJndW1lbnRzCgogICAgICAgICAgICAgIGlmICghYXJnRGVmKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gYXJndW1lbnQgJyIuY29uY2F0KGFyZ05hbWUsICInIHBhc3NlZCB0byBmdW5jdGlvbiAnIikuY29uY2F0KGZuRGVmLm5hbWUsICInIikpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYWNjW2FyZ0RlZi5uYW1lXSA9IChhY2NbYXJnRGVmLm5hbWVdIHx8IFtdKS5jb25jYXQoYXJnQXN0KTsKICAgICAgICAgICAgICByZXR1cm4gYWNjOwogICAgICAgICAgICB9LCB7fSk7IC8vIENoZWNrIGZvciBtaXNzaW5nIHJlcXVpcmVkIGFyZ3VtZW50cwoKICAgICAgICAgICAgKDAsIF9sb2Rhc2guZWFjaCkoYXJnRGVmcywgZnVuY3Rpb24gKGFyZ0RlZikgewogICAgICAgICAgICAgIHZhciBfcmVmMiA9IGFyZ0RlZiwKICAgICAgICAgICAgICAgICAgYWxpYXNlcyA9IF9yZWYyLmFsaWFzZXMsCiAgICAgICAgICAgICAgICAgIGFyZ0RlZmF1bHQgPSBfcmVmMi5kZWZhdWx0LAogICAgICAgICAgICAgICAgICBhcmdOYW1lID0gX3JlZjIubmFtZSwKICAgICAgICAgICAgICAgICAgcmVxdWlyZWQgPSBfcmVmMi5yZXF1aXJlZDsKCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdEZWZhdWx0ID09PSAndW5kZWZpbmVkJyAmJiByZXF1aXJlZCAmJiB0eXBlb2YgZGVhbGlhc2VkQXJnQXN0c1thcmdOYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIGlmICghYWxpYXNlcyB8fCBhbGlhc2VzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIiIuY29uY2F0KGZuRGVmLm5hbWUsICIgcmVxdWlyZXMgYW4gYXJndW1lbnQiKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB2YXIgZXJyb3JBcmcgPSBhcmdOYW1lID09PSAnXycgPyBhbGlhc2VzWzBdIDogYXJnTmFtZTsgLy8gdXNlIGFuIGFsaWFzIGlmIF8gaXMgdGhlIG1pc3NpbmcgYXJnCgogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIiIuY29uY2F0KGZuRGVmLm5hbWUsICIgcmVxdWlyZXMgYW4gXCIiKS5jb25jYXQoZXJyb3JBcmcsICJcIiBhcmd1bWVudCIpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOyAvLyBGaWxsIGluIGRlZmF1bHQgdmFsdWVzIGZyb20gYXJndW1lbnQgZGVmaW5pdGlvbgoKICAgICAgICAgICAgYXJnQXN0c1dpdGhEZWZhdWx0cyA9ICgwLCBfbG9kYXNoLnJlZHVjZSkoYXJnRGVmcywgZnVuY3Rpb24gKGFjYywgYXJnRGVmLCBhcmdOYW1lKSB7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhY2NbYXJnTmFtZV0gPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBhcmdEZWYuZGVmYXVsdCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIGFjY1thcmdOYW1lXSA9IFsoMCwgX2NvbW1vbi5mcm9tRXhwcmVzc2lvbikoYXJnRGVmLmRlZmF1bHQsICdhcmd1bWVudCcpXTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBhY2M7CiAgICAgICAgICAgIH0sIGRlYWxpYXNlZEFyZ0FzdHMpOyAvLyBDcmVhdGUgdGhlIGZ1bmN0aW9ucyB0byByZXNvbHZlIHRoZSBhcmd1bWVudCBBU1RzIGludG8gdmFsdWVzCiAgICAgICAgICAgIC8vIFRoZXNlIGFyZSB3aGF0IGFyZSBwYXNzZWQgdG8gdGhlIGFjdHVhbCBmdW5jdGlvbnMgaWYgeW91IG9wdCBvdXQgb2YgcmVzb2x2aW5nCgogICAgICAgICAgICByZXNvbHZlQXJnRm5zID0gKDAsIF9sb2Rhc2gubWFwVmFsdWVzKShhcmdBc3RzV2l0aERlZmF1bHRzLCBmdW5jdGlvbiAoYXN0cywgYXJnTmFtZSkgewogICAgICAgICAgICAgIHJldHVybiBhc3RzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBjdHgsCiAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZXh0LAogICAgICAgICAgICAgICAgICAgICAgX2FyZ3MzID0gYXJndW1lbnRzOwogICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0MykgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IF9hcmdzMy5sZW5ndGggPiAwICYmIF9hcmdzM1swXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MzWzBdIDogY29udGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChpbnRlcnByZXQoaXRlbSwgY3R4KSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGV4dCA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISgoMCwgX3R5cGUuZ2V0VHlwZSkobmV3Q29udGV4dCkgPT09ICdlcnJvcicpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ld0NvbnRleHQuZXJyb3I7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGNhc3QobmV3Q29udGV4dCwgYXJnRGVmc1thcmdOYW1lXS50eXBlcykpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYXJnTmFtZXMgPSAoMCwgX2xvZGFzaC5rZXlzKShyZXNvbHZlQXJnRm5zKTsgLy8gQWN0dWFsbHkgcmVzb2x2ZSB1bmxlc3MgdGhlIGFyZ3VtZW50IGRlZmluaXRpb24gc2F5cyBub3QgdG8KCiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gODsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChQcm9taXNlLmFsbChhcmdOYW1lcy5tYXAoZnVuY3Rpb24gKGFyZ05hbWUpIHsKICAgICAgICAgICAgICB2YXIgaW50ZXJwcmV0Rm5zID0gcmVzb2x2ZUFyZ0Zuc1thcmdOYW1lXTsKICAgICAgICAgICAgICBpZiAoIWFyZ0RlZnNbYXJnTmFtZV0ucmVzb2x2ZSkgcmV0dXJuIGludGVycHJldEZuczsKICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaW50ZXJwcmV0Rm5zLm1hcChmdW5jdGlvbiAoZm4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBmbigpOwogICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIHJlc29sdmVkQXJnVmFsdWVzID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgIHJlc29sdmVkTXVsdGlBcmdzID0gKDAsIF9sb2Rhc2guemlwT2JqZWN0KShhcmdOYW1lcywgcmVzb2x2ZWRBcmdWYWx1ZXMpOyAvLyBKdXN0IHJldHVybiB0aGUgbGFzdCB1bmxlc3MgdGhlIGFyZ3VtZW50IGRlZmluaXRpb24gYWxsb3dzIG11bHRpcGxlCgogICAgICAgICAgICByZXNvbHZlZEFyZ3MgPSAoMCwgX2xvZGFzaC5tYXBWYWx1ZXMpKHJlc29sdmVkTXVsdGlBcmdzLCBmdW5jdGlvbiAoYXJnVmFsdWVzLCBhcmdOYW1lKSB7CiAgICAgICAgICAgICAgaWYgKGFyZ0RlZnNbYXJnTmFtZV0ubXVsdGkpIHJldHVybiBhcmdWYWx1ZXM7CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBfbG9kYXNoLmxhc3QpKGFyZ1ZhbHVlcyk7CiAgICAgICAgICAgIH0pOyAvLyBSZXR1cm4gYW4gb2JqZWN0IGhlcmUgYmVjYXVzZSB0aGUgYXJndW1lbnRzIHRoZW1zZWx2ZXMgbWlnaHQgYWN0dWFsbHkgaGF2ZSBhICd0aGVuJwogICAgICAgICAgICAvLyBmdW5jdGlvbiB3aGljaCB3b3VsZCBiZSB0cmVhdGVkIGFzIGEgcHJvbWlzZQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICByZXNvbHZlZEFyZ3M6IHJlc29sdmVkQXJncwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9CgogIHZhciBpbnRlcnByZXQgPSBmdW5jdGlvbiBpbnRlcnByZXQoYXN0KSB7CiAgICB2YXIgY29udGV4dCwKICAgICAgICB0eXBlLAogICAgICAgIF9hcmdzNSA9IGFyZ3VtZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gaW50ZXJwcmV0JChfY29udGV4dDUpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgY29udGV4dCA9IF9hcmdzNS5sZW5ndGggPiAxICYmIF9hcmdzNVsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3M1WzFdIDogbnVsbDsKICAgICAgICAgICAgdHlwZSA9ICgwLCBfdHlwZS5nZXRUeXBlKShhc3QpOwogICAgICAgICAgICBfY29udGV4dDUudDAgPSB0eXBlOwogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IF9jb250ZXh0NS50MCA9PT0gJ2V4cHJlc3Npb24nID8gNSA6IF9jb250ZXh0NS50MCA9PT0gJ3N0cmluZycgPyA2IDogX2NvbnRleHQ1LnQwID09PSAnbnVtYmVyJyA/IDYgOiBfY29udGV4dDUudDAgPT09ICdudWxsJyA/IDYgOiBfY29udGV4dDUudDAgPT09ICdib29sZWFuJyA/IDYgOiA3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCBpbnZva2VDaGFpbihhc3QuY2hhaW4sIGNvbnRleHQpKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCBhc3QpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJVbmtub3duIEFTVCBvYmplY3Q6ICIuY29uY2F0KEpTT04uc3RyaW5naWZ5KGFzdCkpKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH07CgogIHJldHVybiBpbnRlcnByZXQ7Cn0="},null]}