{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/transform/public/app/sections/create_transform/components/step_details/step_details_form.js","dependencies":[{"path":"x-pack/legacy/plugins/transform/public/app/sections/create_transform/components/step_details/step_details_form.js","mtime":1585205048551},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmdldERlZmF1bHRTdGVwRGV0YWlsc1N0YXRlID0gZ2V0RGVmYXVsdFN0ZXBEZXRhaWxzU3RhdGU7CmV4cG9ydHMuU3RlcERldGFpbHNGb3JtID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX21ldGFkYXRhID0gcmVxdWlyZSgidWkvbWV0YWRhdGEiKTsKCnZhciBfbm90aWZ5ID0gcmVxdWlyZSgidWkvbm90aWZ5Iik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvcGx1Z2lucy9raWJhbmFfcmVhY3QvcHVibGljIik7Cgp2YXIgX2tpYmFuYSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2xpYi9raWJhbmEiKTsKCnZhciBfZXNfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi9jb21tb24vdXRpbHMvZXNfdXRpbHMiKTsKCnZhciBfY29tcG9uZW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMiKTsKCnZhciBfdXNlX2FwaSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2hvb2tzL3VzZV9hcGkiKTsKCnZhciBfY29tbW9uID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tbW9uIik7Cgp2YXIgX3ZhbGlkYXRvcnMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vdmFsaWRhdG9ycyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBnZXREZWZhdWx0U3RlcERldGFpbHNTdGF0ZSgpIHsKICByZXR1cm4gewogICAgY29udGludW91c01vZGVEYXRlRmllbGQ6ICcnLAogICAgY29udGludW91c01vZGVEZWxheTogJzYwcycsCiAgICBjcmVhdGVJbmRleFBhdHRlcm46IHRydWUsCiAgICBpc0NvbnRpbnVvdXNNb2RlRW5hYmxlZDogZmFsc2UsCiAgICB0cmFuc2Zvcm1JZDogJycsCiAgICB0cmFuc2Zvcm1EZXNjcmlwdGlvbjogJycsCiAgICBkZXN0aW5hdGlvbkluZGV4OiAnJywKICAgIHRvdWNoZWQ6IGZhbHNlLAogICAgdmFsaWQ6IGZhbHNlCiAgfTsKfQoKdmFyIFN0ZXBEZXRhaWxzRm9ybSA9IF9yZWFjdC5kZWZhdWx0Lm1lbW8oZnVuY3Rpb24gKF9yZWYpIHsKICB2YXIgX3JlZiRvdmVycmlkZXMgPSBfcmVmLm92ZXJyaWRlcywKICAgICAgb3ZlcnJpZGVzID0gX3JlZiRvdmVycmlkZXMgPT09IHZvaWQgMCA/IHt9IDogX3JlZiRvdmVycmlkZXMsCiAgICAgIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTsKICB2YXIga2liYW5hQ29udGV4dCA9ICgwLCBfa2liYW5hLnVzZUtpYmFuYUNvbnRleHQpKCk7CgogIHZhciBkZWZhdWx0cyA9IF9vYmplY3RTcHJlYWQoe30sIGdldERlZmF1bHRTdGVwRGV0YWlsc1N0YXRlKCksIHt9LCBvdmVycmlkZXMpOwoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMudHJhbnNmb3JtSWQpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgdHJhbnNmb3JtSWQgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRUcmFuc2Zvcm1JZCA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMudHJhbnNmb3JtRGVzY3JpcHRpb24pLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIHRyYW5zZm9ybURlc2NyaXB0aW9uID0gX3VzZVN0YXRlNFswXSwKICAgICAgc2V0VHJhbnNmb3JtRGVzY3JpcHRpb24gPSBfdXNlU3RhdGU0WzFdOwoKICB2YXIgX3VzZVN0YXRlNSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGRlZmF1bHRzLmRlc3RpbmF0aW9uSW5kZXgpLAogICAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksCiAgICAgIGRlc3RpbmF0aW9uSW5kZXggPSBfdXNlU3RhdGU2WzBdLAogICAgICBzZXREZXN0aW5hdGlvbkluZGV4ID0gX3VzZVN0YXRlNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTcgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShbXSksCiAgICAgIF91c2VTdGF0ZTggPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU3LCAyKSwKICAgICAgdHJhbnNmb3JtSWRzID0gX3VzZVN0YXRlOFswXSwKICAgICAgc2V0VHJhbnNmb3JtSWRzID0gX3VzZVN0YXRlOFsxXTsKCiAgdmFyIF91c2VTdGF0ZTkgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShbXSksCiAgICAgIF91c2VTdGF0ZTEwID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlOSwgMiksCiAgICAgIGluZGV4TmFtZXMgPSBfdXNlU3RhdGUxMFswXSwKICAgICAgc2V0SW5kZXhOYW1lcyA9IF91c2VTdGF0ZTEwWzFdOwoKICB2YXIgX3VzZVN0YXRlMTEgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShbXSksCiAgICAgIF91c2VTdGF0ZTEyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTEsIDIpLAogICAgICBpbmRleFBhdHRlcm5UaXRsZXMgPSBfdXNlU3RhdGUxMlswXSwKICAgICAgc2V0SW5kZXhQYXR0ZXJuVGl0bGVzID0gX3VzZVN0YXRlMTJbMV07CgogIHZhciBfdXNlU3RhdGUxMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGRlZmF1bHRzLmNyZWF0ZUluZGV4UGF0dGVybiksCiAgICAgIF91c2VTdGF0ZTE0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTMsIDIpLAogICAgICBjcmVhdGVJbmRleFBhdHRlcm4gPSBfdXNlU3RhdGUxNFswXSwKICAgICAgc2V0Q3JlYXRlSW5kZXhQYXR0ZXJuID0gX3VzZVN0YXRlMTRbMV07IC8vIENvbnRpbnVvdXMgbW9kZSBzdGF0ZQoKCiAgdmFyIF91c2VTdGF0ZTE1ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMuaXNDb250aW51b3VzTW9kZUVuYWJsZWQpLAogICAgICBfdXNlU3RhdGUxNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTE1LCAyKSwKICAgICAgaXNDb250aW51b3VzTW9kZUVuYWJsZWQgPSBfdXNlU3RhdGUxNlswXSwKICAgICAgc2V0Q29udGludW91c01vZGVFbmFibGVkID0gX3VzZVN0YXRlMTZbMV07CgogIHZhciBhcGkgPSAoMCwgX3VzZV9hcGkudXNlQXBpKSgpOyAvLyBmZXRjaCBleGlzdGluZyB0cmFuc2Zvcm0gSURzIGFuZCBpbmRpY2VzIG9uY2UgZm9yIGZvcm0gdmFsaWRhdGlvbgoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgLy8gdXNlIGFuIElJRkUgdG8gYXZvaWQgcmV0dXJuaW5nIGEgUHJvbWlzZSB0byB1c2VFZmZlY3QuCiAgICAoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IHNldFRyYW5zZm9ybUlkczsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGFwaS5nZXRUcmFuc2Zvcm1zKCkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF9jb250ZXh0LnQxID0gZnVuY3Rpb24gKHRyYW5zZm9ybSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybS5pZDsKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfY29udGV4dC50MiA9IF9jb250ZXh0LnNlbnQudHJhbnNmb3Jtcy5tYXAoX2NvbnRleHQudDEpOwogICAgICAgICAgICAgICgwLCBfY29udGV4dC50MCkoX2NvbnRleHQudDIpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gOTsKICAgICAgICAgICAgICBfY29udGV4dC50MyA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwoKICAgICAgICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGREYW5nZXIoewogICAgICAgICAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmFuc2Zvcm0uc3RlcERldGFpbHNGb3JtLmVycm9yR2V0dGluZ1RyYW5zZm9ybUxpc3QnLCB7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQW4gZXJyb3Igb2NjdXJyZWQgZ2V0dGluZyB0aGUgZXhpc3RpbmcgdHJhbnNmb3JtIElEczonCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRleHQ6ICgwLCBfcHVibGljLnRvTW91bnRQb2ludCkoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29tcG9uZW50cy5Ub2FzdE5vdGlmaWNhdGlvblRleHQsIHsKICAgICAgICAgICAgICAgICAgdGV4dDogX2NvbnRleHQudDMKICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgX2NvbnRleHQudDQgPSBzZXRJbmRleE5hbWVzOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGFwaS5nZXRJbmRpY2VzKCkpOwoKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBfY29udGV4dC50NSA9IGZ1bmN0aW9uIChpbmRleCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4Lm5hbWU7CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgX2NvbnRleHQudDYgPSBfY29udGV4dC5zZW50Lm1hcChfY29udGV4dC50NSk7CiAgICAgICAgICAgICAgKDAsIF9jb250ZXh0LnQ0KShfY29udGV4dC50Nik7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI0OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjE7CiAgICAgICAgICAgICAgX2NvbnRleHQudDcgPSBfY29udGV4dFsiY2F0Y2giXSgxMik7CgogICAgICAgICAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcih7CiAgICAgICAgICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyYW5zZm9ybS5zdGVwRGV0YWlsc0Zvcm0uZXJyb3JHZXR0aW5nSW5kZXhOYW1lcycsIHsKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBbiBlcnJvciBvY2N1cnJlZCBnZXR0aW5nIHRoZSBleGlzdGluZyBpbmRleCBuYW1lczonCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRleHQ6ICgwLCBfcHVibGljLnRvTW91bnRQb2ludCkoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29tcG9uZW50cy5Ub2FzdE5vdGlmaWNhdGlvblRleHQsIHsKICAgICAgICAgICAgICAgICAgdGV4dDogX2NvbnRleHQudDcKICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjQ7CiAgICAgICAgICAgICAgX2NvbnRleHQudDggPSBzZXRJbmRleFBhdHRlcm5UaXRsZXM7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI4OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoa2liYW5hQ29udGV4dC5pbmRleFBhdHRlcm5zLmdldFRpdGxlcygpKTsKCiAgICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgICAgX2NvbnRleHQudDkgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICgwLCBfY29udGV4dC50OCkoX2NvbnRleHQudDkpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDMyOwogICAgICAgICAgICAgIF9jb250ZXh0LnQxMCA9IF9jb250ZXh0WyJjYXRjaCJdKDI0KTsKCiAgICAgICAgICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkRGFuZ2VyKHsKICAgICAgICAgICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJhbnNmb3JtLnN0ZXBEZXRhaWxzRm9ybS5lcnJvckdldHRpbmdJbmRleFBhdHRlcm5UaXRsZXMnLCB7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQW4gZXJyb3Igb2NjdXJyZWQgZ2V0dGluZyB0aGUgZXhpc3RpbmcgaW5kZXggcGF0dGVybiB0aXRsZXM6JwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB0ZXh0OiAoMCwgX3B1YmxpYy50b01vdW50UG9pbnQpKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbXBvbmVudHMuVG9hc3ROb3RpZmljYXRpb25UZXh0LCB7CiAgICAgICAgICAgICAgICAgIHRleHQ6IF9jb250ZXh0LnQxMAogICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDM1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCBudWxsLCBbWzAsIDldLCBbMTIsIDIxXSwgWzI0LCAzMl1dKTsKICAgIH0pKCk7IC8vIGN1c3RvbSBjb21wYXJpc29uCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzCgogIH0sIFtraWJhbmFDb250ZXh0LmluaXRpYWxpemVkXSk7CiAgdmFyIGRhdGVGaWVsZE5hbWVzID0ga2liYW5hQ29udGV4dC5jdXJyZW50SW5kZXhQYXR0ZXJuLmZpZWxkcy5maWx0ZXIoZnVuY3Rpb24gKGYpIHsKICAgIHJldHVybiBmLnR5cGUgPT09ICdkYXRlJzsKICB9KS5tYXAoZnVuY3Rpb24gKGYpIHsKICAgIHJldHVybiBmLm5hbWU7CiAgfSkuc29ydCgpOwogIHZhciBpc0NvbnRpbnVvdXNNb2RlQXZhaWxhYmxlID0gZGF0ZUZpZWxkTmFtZXMubGVuZ3RoID4gMDsKCiAgdmFyIF91c2VTdGF0ZTE3ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoaXNDb250aW51b3VzTW9kZUF2YWlsYWJsZSA/IGRhdGVGaWVsZE5hbWVzWzBdIDogJycpLAogICAgICBfdXNlU3RhdGUxOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTE3LCAyKSwKICAgICAgY29udGludW91c01vZGVEYXRlRmllbGQgPSBfdXNlU3RhdGUxOFswXSwKICAgICAgc2V0Q29udGludW91c01vZGVEYXRlRmllbGQgPSBfdXNlU3RhdGUxOFsxXTsKCiAgdmFyIF91c2VTdGF0ZTE5ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMuY29udGludW91c01vZGVEZWxheSksCiAgICAgIF91c2VTdGF0ZTIwID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTksIDIpLAogICAgICBjb250aW51b3VzTW9kZURlbGF5ID0gX3VzZVN0YXRlMjBbMF0sCiAgICAgIHNldENvbnRpbnVvdXNNb2RlRGVsYXkgPSBfdXNlU3RhdGUyMFsxXTsKCiAgdmFyIGlzQ29udGludW91c01vZGVEZWxheVZhbGlkID0gKDAsIF92YWxpZGF0b3JzLmRlbGF5VmFsaWRhdG9yKShjb250aW51b3VzTW9kZURlbGF5KTsKICB2YXIgdHJhbnNmb3JtSWRFeGlzdHMgPSB0cmFuc2Zvcm1JZHMuc29tZShmdW5jdGlvbiAoaWQpIHsKICAgIHJldHVybiB0cmFuc2Zvcm1JZCA9PT0gaWQ7CiAgfSk7CiAgdmFyIHRyYW5zZm9ybUlkRW1wdHkgPSB0cmFuc2Zvcm1JZCA9PT0gJyc7CiAgdmFyIHRyYW5zZm9ybUlkVmFsaWQgPSAoMCwgX2NvbW1vbi5pc1RyYW5zZm9ybUlkVmFsaWQpKHRyYW5zZm9ybUlkKTsKICB2YXIgaW5kZXhOYW1lRXhpc3RzID0gaW5kZXhOYW1lcy5zb21lKGZ1bmN0aW9uIChuYW1lKSB7CiAgICByZXR1cm4gZGVzdGluYXRpb25JbmRleCA9PT0gbmFtZTsKICB9KTsKICB2YXIgaW5kZXhOYW1lRW1wdHkgPSBkZXN0aW5hdGlvbkluZGV4ID09PSAnJzsKICB2YXIgaW5kZXhOYW1lVmFsaWQgPSAoMCwgX2VzX3V0aWxzLmlzVmFsaWRJbmRleE5hbWUpKGRlc3RpbmF0aW9uSW5kZXgpOwogIHZhciBpbmRleFBhdHRlcm5UaXRsZUV4aXN0cyA9IGluZGV4UGF0dGVyblRpdGxlcy5zb21lKGZ1bmN0aW9uIChuYW1lKSB7CiAgICByZXR1cm4gZGVzdGluYXRpb25JbmRleCA9PT0gbmFtZTsKICB9KTsKICB2YXIgdmFsaWQgPSAhdHJhbnNmb3JtSWRFbXB0eSAmJiB0cmFuc2Zvcm1JZFZhbGlkICYmICF0cmFuc2Zvcm1JZEV4aXN0cyAmJiAhaW5kZXhOYW1lRW1wdHkgJiYgaW5kZXhOYW1lVmFsaWQgJiYgKCFpbmRleFBhdHRlcm5UaXRsZUV4aXN0cyB8fCAhY3JlYXRlSW5kZXhQYXR0ZXJuKSAmJiAoIWlzQ29udGludW91c01vZGVBdmFpbGFibGUgfHwgaXNDb250aW51b3VzTW9kZUF2YWlsYWJsZSAmJiBpc0NvbnRpbnVvdXNNb2RlRGVsYXlWYWxpZCk7IC8vIGV4cG9zZSBzdGF0ZSB0byB3aXphcmQKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIG9uQ2hhbmdlKHsKICAgICAgY29udGludW91c01vZGVEYXRlRmllbGQ6IGNvbnRpbnVvdXNNb2RlRGF0ZUZpZWxkLAogICAgICBjb250aW51b3VzTW9kZURlbGF5OiBjb250aW51b3VzTW9kZURlbGF5LAogICAgICBjcmVhdGVJbmRleFBhdHRlcm46IGNyZWF0ZUluZGV4UGF0dGVybiwKICAgICAgaXNDb250aW51b3VzTW9kZUVuYWJsZWQ6IGlzQ29udGludW91c01vZGVFbmFibGVkLAogICAgICB0cmFuc2Zvcm1JZDogdHJhbnNmb3JtSWQsCiAgICAgIHRyYW5zZm9ybURlc2NyaXB0aW9uOiB0cmFuc2Zvcm1EZXNjcmlwdGlvbiwKICAgICAgZGVzdGluYXRpb25JbmRleDogZGVzdGluYXRpb25JbmRleCwKICAgICAgdG91Y2hlZDogdHJ1ZSwKICAgICAgdmFsaWQ6IHZhbGlkCiAgICB9KTsgLy8gY3VzdG9tIGNvbXBhcmlzb24KCiAgICAvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMgKi8KICB9LCBbY29udGludW91c01vZGVEYXRlRmllbGQsIGNvbnRpbnVvdXNNb2RlRGVsYXksIGNyZWF0ZUluZGV4UGF0dGVybiwgaXNDb250aW51b3VzTW9kZUVuYWJsZWQsIHRyYW5zZm9ybUlkLCB0cmFuc2Zvcm1EZXNjcmlwdGlvbiwgZGVzdGluYXRpb25JbmRleCwgdmFsaWRdKTsKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgImRhdGEtdGVzdC1zdWJqIjogInRyYW5zZm9ybVN0ZXBEZXRhaWxzRm9ybSIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJhbnNmb3JtLnN0ZXBEZXRhaWxzRm9ybS50cmFuc2Zvcm1JZExhYmVsJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1RyYW5zZm9ybSBJRCcKICAgIH0pLAogICAgaXNJbnZhbGlkOiAhdHJhbnNmb3JtSWRFbXB0eSAmJiAhdHJhbnNmb3JtSWRWYWxpZCB8fCB0cmFuc2Zvcm1JZEV4aXN0cywKICAgIGVycm9yOiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KCF0cmFuc2Zvcm1JZEVtcHR5ICYmICF0cmFuc2Zvcm1JZFZhbGlkID8gW19pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmFuc2Zvcm0uc3RlcERldGFpbHNGb3JtLnRyYW5zZm9ybUlkSW52YWxpZEVycm9yJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ011c3QgY29udGFpbiBsb3dlcmNhc2UgYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgKGEteiBhbmQgMC05KSwgaHlwaGVucywgYW5kIHVuZGVyc2NvcmVzIG9ubHkgYW5kIG11c3Qgc3RhcnQgYW5kIGVuZCB3aXRoIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzLicKICAgIH0pXSA6IFtdKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRyYW5zZm9ybUlkRXhpc3RzID8gW19pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmFuc2Zvcm0uc3RlcERldGFpbHNGb3JtLnRyYW5zZm9ybUlkRXhpc3RzRXJyb3InLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQSB0cmFuc2Zvcm0gd2l0aCB0aGlzIElEIGFscmVhZHkgZXhpc3RzLicKICAgIH0pXSA6IFtdKSkKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmllbGRUZXh0LCB7CiAgICBwbGFjZWhvbGRlcjogInRyYW5zZm9ybSBJRCIsCiAgICB2YWx1ZTogdHJhbnNmb3JtSWQsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICByZXR1cm4gc2V0VHJhbnNmb3JtSWQoZS50YXJnZXQudmFsdWUpOwogICAgfSwKICAgICJhcmlhLWxhYmVsIjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyYW5zZm9ybS5zdGVwRGV0YWlsc0Zvcm0udHJhbnNmb3JtSWRJbnB1dEFyaWFMYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDaG9vc2UgYSB1bmlxdWUgdHJhbnNmb3JtIElELicKICAgIH0pLAogICAgaXNJbnZhbGlkOiAhdHJhbnNmb3JtSWRFbXB0eSAmJiAhdHJhbnNmb3JtSWRWYWxpZCB8fCB0cmFuc2Zvcm1JZEV4aXN0cywKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJ0cmFuc2Zvcm1JZElucHV0IgogIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJhbnNmb3JtLnN0ZXBEZXRhaWxzRm9ybS50cmFuc2Zvcm1EZXNjcmlwdGlvbkxhYmVsJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1RyYW5zZm9ybSBkZXNjcmlwdGlvbicKICAgIH0pLAogICAgaGVscFRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmFuc2Zvcm0uc3RlcERldGFpbHNGb3JtLnRyYW5zZm9ybURlc2NyaXB0aW9uSGVscFRleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnT3B0aW9uYWwgZGVzY3JpcHRpdmUgdGV4dC4nCiAgICB9KQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGaWVsZFRleHQsIHsKICAgIHBsYWNlaG9sZGVyOiAidHJhbnNmb3JtIGRlc2NyaXB0aW9uIiwKICAgIHZhbHVlOiB0cmFuc2Zvcm1EZXNjcmlwdGlvbiwKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgIHJldHVybiBzZXRUcmFuc2Zvcm1EZXNjcmlwdGlvbihlLnRhcmdldC52YWx1ZSk7CiAgICB9LAogICAgImFyaWEtbGFiZWwiOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJhbnNmb3JtLnN0ZXBEZXRhaWxzRm9ybS50cmFuc2Zvcm1EZXNjcmlwdGlvbklucHV0QXJpYUxhYmVsJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0Nob29zZSBhbiBvcHRpb25hbCB0cmFuc2Zvcm0gZGVzY3JpcHRpb24uJwogICAgfSksCiAgICAiZGF0YS10ZXN0LXN1YmoiOiAidHJhbnNmb3JtRGVzY3JpcHRpb25JbnB1dCIKICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyYW5zZm9ybS5zdGVwRGV0YWlsc0Zvcm0uZGVzdGluYXRpb25JbmRleExhYmVsJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0Rlc3RpbmF0aW9uIGluZGV4JwogICAgfSksCiAgICBpc0ludmFsaWQ6ICFpbmRleE5hbWVFbXB0eSAmJiAhaW5kZXhOYW1lVmFsaWQsCiAgICBoZWxwVGV4dDogaW5kZXhOYW1lRXhpc3RzICYmIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmFuc2Zvcm0uc3RlcERldGFpbHNGb3JtLmRlc3RpbmF0aW9uSW5kZXhIZWxwVGV4dCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBbiBpbmRleCB3aXRoIHRoaXMgbmFtZSBhbHJlYWR5IGV4aXN0cy4gQmUgYXdhcmUgdGhhdCBydW5uaW5nIHRoaXMgdHJhbnNmb3JtIHdpbGwgbW9kaWZ5IHRoaXMgZGVzdGluYXRpb24gaW5kZXguJwogICAgfSksCiAgICBlcnJvcjogIWluZGV4TmFtZUVtcHR5ICYmICFpbmRleE5hbWVWYWxpZCAmJiBbX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmFuc2Zvcm0uc3RlcERldGFpbHNGb3JtLmRlc3RpbmF0aW9uSW5kZXhJbnZhbGlkRXJyb3InLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSW52YWxpZCBkZXN0aW5hdGlvbiBpbmRleCBuYW1lLicKICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJiciIsIG51bGwpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICBocmVmOiAiaHR0cHM6Ly93d3cuZWxhc3RpYy5jby9ndWlkZS9lbi9lbGFzdGljc2VhcmNoL3JlZmVyZW5jZS8iLmNvbmNhdChfbWV0YWRhdGEubWV0YWRhdGEuYnJhbmNoLCAiL2luZGljZXMtY3JlYXRlLWluZGV4Lmh0bWwjaW5kaWNlcy1jcmVhdGUtaW5kZXgiKSwKICAgICAgdGFyZ2V0OiAiX2JsYW5rIgogICAgfSwgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyYW5zZm9ybS5zdGVwRGV0YWlsc0Zvcm0uZGVzdGluYXRpb25JbmRleEludmFsaWRFcnJvckxpbmsnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTGVhcm4gbW9yZSBhYm91dCBpbmRleCBuYW1lIGxpbWl0YXRpb25zLicKICAgIH0pKSldCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkVGV4dCwgewogICAgcGxhY2Vob2xkZXI6ICJkZXN0aW5hdGlvbiBpbmRleCIsCiAgICB2YWx1ZTogZGVzdGluYXRpb25JbmRleCwKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgIHJldHVybiBzZXREZXN0aW5hdGlvbkluZGV4KGUudGFyZ2V0LnZhbHVlKTsKICAgIH0sCiAgICAiYXJpYS1sYWJlbCI6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmFuc2Zvcm0uc3RlcERldGFpbHNGb3JtLmRlc3RpbmF0aW9uSW5kZXhJbnB1dEFyaWFMYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDaG9vc2UgYSB1bmlxdWUgZGVzdGluYXRpb24gaW5kZXggbmFtZS4nCiAgICB9KSwKICAgIGlzSW52YWxpZDogIWluZGV4TmFtZUVtcHR5ICYmICFpbmRleE5hbWVWYWxpZCwKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJ0cmFuc2Zvcm1EZXN0aW5hdGlvbkluZGV4SW5wdXQiCiAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgaXNJbnZhbGlkOiBjcmVhdGVJbmRleFBhdHRlcm4gJiYgaW5kZXhQYXR0ZXJuVGl0bGVFeGlzdHMsCiAgICBlcnJvcjogY3JlYXRlSW5kZXhQYXR0ZXJuICYmIGluZGV4UGF0dGVyblRpdGxlRXhpc3RzICYmIFtfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJhbnNmb3JtLnN0ZXBEZXRhaWxzRm9ybS5pbmRleFBhdHRlcm5UaXRsZUVycm9yJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0FuIGluZGV4IHBhdHRlcm4gd2l0aCB0aGlzIHRpdGxlIGFscmVhZHkgZXhpc3RzLicKICAgIH0pXQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTd2l0Y2gsIHsKICAgIG5hbWU6ICJ0cmFuc2Zvcm1DcmVhdGVJbmRleFBhdHRlcm4iLAogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmFuc2Zvcm0uc3RlcENyZWF0ZUZvcm0uY3JlYXRlSW5kZXhQYXR0ZXJuTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ3JlYXRlIGluZGV4IHBhdHRlcm4nCiAgICB9KSwKICAgIGNoZWNrZWQ6IGNyZWF0ZUluZGV4UGF0dGVybiA9PT0gdHJ1ZSwKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHsKICAgICAgcmV0dXJuIHNldENyZWF0ZUluZGV4UGF0dGVybighY3JlYXRlSW5kZXhQYXR0ZXJuKTsKICAgIH0sCiAgICAiZGF0YS10ZXN0LXN1YmoiOiAidHJhbnNmb3JtQ3JlYXRlSW5kZXhQYXR0ZXJuU3dpdGNoIgogIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGhlbHBUZXh0OiBpc0NvbnRpbnVvdXNNb2RlQXZhaWxhYmxlID09PSBmYWxzZSA/IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmFuc2Zvcm0uc3RlcERldGFpbHNGb3JtLmNvbnRpbnVvdXNNb2RlRXJyb3InLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ29udGludW91cyBtb2RlIGlzIG5vdCBhdmFpbGFibGUgZm9yIGluZGljZXMgd2l0aG91dCBkYXRlIGZpZWxkcy4nCiAgICB9KSA6ICcnCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVN3aXRjaCwgewogICAgbmFtZTogInRyYW5zZm9ybUNvbnRpbnVvdXNNb2RlIiwKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJhbnNmb3JtLnN0ZXBDcmVhdGVGb3JtLmNvbnRpbnVvdXNNb2RlTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ29udGludW91cyBtb2RlJwogICAgfSksCiAgICBjaGVja2VkOiBpc0NvbnRpbnVvdXNNb2RlRW5hYmxlZCA9PT0gdHJ1ZSwKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHsKICAgICAgcmV0dXJuIHNldENvbnRpbnVvdXNNb2RlRW5hYmxlZCghaXNDb250aW51b3VzTW9kZUVuYWJsZWQpOwogICAgfSwKICAgIGRpc2FibGVkOiBpc0NvbnRpbnVvdXNNb2RlQXZhaWxhYmxlID09PSBmYWxzZSwKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJ0cmFuc2Zvcm1Db250aW51b3VzTW9kZVN3aXRjaCIKICB9KSksIGlzQ29udGludW91c01vZGVFbmFibGVkICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmFuc2Zvcm0uc3RlcERldGFpbHNGb3JtLmNvbnRpbnVvdXNNb2RlRGF0ZUZpZWxkTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGF0ZSBmaWVsZCcKICAgIH0pLAogICAgaGVscFRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmFuc2Zvcm0uc3RlcERldGFpbHNGb3JtLmNvbnRpbnVvdXNNb2RlRGF0ZUZpZWxkSGVscFRleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VsZWN0IHRoZSBkYXRlIGZpZWxkIHRoYXQgY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgbmV3IGRvY3VtZW50cy4nCiAgICB9KQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTZWxlY3QsIHsKICAgIG9wdGlvbnM6IGRhdGVGaWVsZE5hbWVzLm1hcChmdW5jdGlvbiAodGV4dCkgewogICAgICByZXR1cm4gewogICAgICAgIHRleHQ6IHRleHQKICAgICAgfTsKICAgIH0pLAogICAgdmFsdWU6IGNvbnRpbnVvdXNNb2RlRGF0ZUZpZWxkLAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgcmV0dXJuIHNldENvbnRpbnVvdXNNb2RlRGF0ZUZpZWxkKGUudGFyZ2V0LnZhbHVlKTsKICAgIH0sCiAgICAiZGF0YS10ZXN0LXN1YmoiOiAidHJhbnNmb3JtQ29udGludW91c0RhdGVGaWVsZFNlbGVjdCIKICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyYW5zZm9ybS5zdGVwRGV0YWlsc0Zvcm0uY29udGludW91c01vZGVEZWxheUxhYmVsJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0RlbGF5JwogICAgfSksCiAgICBpc0ludmFsaWQ6ICFpc0NvbnRpbnVvdXNNb2RlRGVsYXlWYWxpZCwKICAgIGVycm9yOiAhaXNDb250aW51b3VzTW9kZURlbGF5VmFsaWQgJiYgW19pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmFuc2Zvcm0uc3RlcERldGFpbHNGb3JtLmNvbnRpbnVvdXNNb2RlRGVsYXlFcnJvcicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdJbnZhbGlkIGRlbGF5IGZvcm1hdCcKICAgIH0pXSwKICAgIGhlbHBUZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJhbnNmb3JtLnN0ZXBEZXRhaWxzRm9ybS5jb250aW51b3VzTW9kZURlbGF5SGVscFRleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVGltZSBkZWxheSBiZXR3ZWVuIGN1cnJlbnQgdGltZSBhbmQgbGF0ZXN0IGlucHV0IGRhdGEgdGltZS4nCiAgICB9KQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGaWVsZFRleHQsIHsKICAgIHBsYWNlaG9sZGVyOiAiZGVsYXkiLAogICAgdmFsdWU6IGNvbnRpbnVvdXNNb2RlRGVsYXksCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICByZXR1cm4gc2V0Q29udGludW91c01vZGVEZWxheShlLnRhcmdldC52YWx1ZSk7CiAgICB9LAogICAgImFyaWEtbGFiZWwiOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJhbnNmb3JtLnN0ZXBEZXRhaWxzRm9ybS5jb250aW51b3VzTW9kZUFyaWFMYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDaG9vc2UgYSBkZWxheS4nCiAgICB9KSwKICAgIGlzSW52YWxpZDogIWlzQ29udGludW91c01vZGVEZWxheVZhbGlkLAogICAgImRhdGEtdGVzdC1zdWJqIjogInRyYW5zZm9ybUNvbnRpbnVvdXNEZWxheUlucHV0IgogIH0pKSkpKTsKfSk7CgpleHBvcnRzLlN0ZXBEZXRhaWxzRm9ybSA9IFN0ZXBEZXRhaWxzRm9ybTs="},null]}