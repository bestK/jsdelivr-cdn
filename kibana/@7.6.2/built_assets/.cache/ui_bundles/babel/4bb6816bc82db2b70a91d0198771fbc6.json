{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/vis_type_timeseries/public/visualizations/views/top_n.js","dependencies":[{"path":"src/legacy/core_plugins/vis_type_timeseries/public/visualizations/views/top_n.js","mtime":1585205040391},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRvcE4gPSB2b2lkIDA7Cgp2YXIgX3Byb3BUeXBlcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicHJvcC10eXBlcyIpKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfZ2V0X2xhc3RfdmFsdWUgPSByZXF1aXJlKCIuLi8uLi8uLi9jb21tb24vZ2V0X2xhc3RfdmFsdWUiKTsKCnZhciBfcmVhY3Rjc3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0Y3NzIikpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBSRU5ERVJfTU9ERVMgPSB7CiAgUE9TSVRJVkU6ICdwb3NpdGl2ZScsCiAgTkVHQVRJVkU6ICduZWdhdGl2ZScsCiAgTUlYRUQ6ICdtaXhlZCcKfTsKCnZhciBUb3BOID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhUb3BOLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gVG9wTihwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUb3BOKTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihUb3BOKS5jYWxsKHRoaXMsIHByb3BzKSk7CiAgICBfdGhpcy50YWJsZVJlZiA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZVJlZigpOwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGxhYmVsTWF4V2lkdGg6IDE1MAogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhUb3BOLCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICBsYWJlbE1heFdpZHRoOiB0aGlzLmxhYmVsTWF4V2lkdGgKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkVXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHsKICAgICAgaWYgKHByZXZTdGF0ZS5sYWJlbE1heFdpZHRoICE9PSB0aGlzLmxhYmVsTWF4V2lkdGgpIHsKICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGxhYmVsTWF4V2lkdGg6IHRoaXMubGFiZWxNYXhXaWR0aAogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlQ2xpY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChfdGhpczIucHJvcHMub25DbGljaykgewogICAgICAgICAgX3RoaXMyLnByb3BzLm9uQ2xpY2soaXRlbSk7CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlclJvdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUm93KF9yZWYpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgbWluID0gX3JlZi5taW4sCiAgICAgICAgICBtYXggPSBfcmVmLm1heDsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgdmFyIHJlbmRlck1vZGUgPSBUb3BOLmdldFJlbmRlck1vZGUobWluLCBtYXgpOwogICAgICAgIHZhciBrZXkgPSAiIi5jb25jYXQoaXRlbS5pZCB8fCBpdGVtLmxhYmVsKTsKICAgICAgICB2YXIgbGFzdFZhbHVlID0gKDAsIF9nZXRfbGFzdF92YWx1ZS5nZXRMYXN0VmFsdWUpKGl0ZW0uZGF0YSk7CiAgICAgICAgdmFyIGZvcm1hdHRlciA9IGl0ZW0udGlja0Zvcm1hdHRlciB8fCBfdGhpczMucHJvcHMudGlja0Zvcm1hdHRlcjsKICAgICAgICB2YXIgaXNQb3NpdGl2ZVZhbHVlID0gbGFzdFZhbHVlID49IDA7CiAgICAgICAgdmFyIGludGVydmFsTGVuZ3RoID0gVG9wTi5jYWxjRG9tYWluKHJlbmRlck1vZGUsIG1pbiwgbWF4KTsKICAgICAgICB2YXIgd2lkdGggPSAxMDAgKiAoTWF0aC5hYnMobGFzdFZhbHVlKSAvIGludGVydmFsTGVuZ3RoKTsKICAgICAgICB2YXIgc3R5bGVzID0gKDAsIF9yZWFjdGNzcy5kZWZhdWx0KSh7CiAgICAgICAgICBkZWZhdWx0OiB7CiAgICAgICAgICAgIGlubmVyQmFyOiBfb2JqZWN0U3ByZWFkKHt9LCBUb3BOLmNhbGNJbm5lckJhclN0eWxlcyhyZW5kZXJNb2RlLCBpc1Bvc2l0aXZlVmFsdWUpKSwKICAgICAgICAgICAgaW5uZXJCYXJWYWx1ZTogX29iamVjdFNwcmVhZCh7fSwgVG9wTi5jYWxjSW5uZXJCYXJEaXZTdHlsZXMoaXRlbSwgd2lkdGgsIGlzUG9zaXRpdmVWYWx1ZSkpLAogICAgICAgICAgICBsYWJlbDogewogICAgICAgICAgICAgIG1heFdpZHRoOiBfdGhpczMuc3RhdGUubGFiZWxNYXhXaWR0aAogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgb25DbGljazogewogICAgICAgICAgICByb3c6IHsKICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX3RoaXMzLnByb3BzKTsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgidHIiLCB7CiAgICAgICAgICBrZXk6IGtleSwKICAgICAgICAgIG9uQ2xpY2s6IF90aGlzMy5oYW5kbGVDbGljayhfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgbGFzdFZhbHVlOiBsYXN0VmFsdWUKICAgICAgICAgIH0sIGl0ZW0pKSwKICAgICAgICAgIHN0eWxlOiBzdHlsZXMucm93CiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgICB0aXRsZTogaXRlbS5sYWJlbCwKICAgICAgICAgIGNsYXNzTmFtZTogInR2YlZpc1RvcE5fX2xhYmVsIiwKICAgICAgICAgIHN0eWxlOiBzdHlsZXMubGFiZWwKICAgICAgICB9LCBpdGVtLmxhYmVsKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgICB3aWR0aDogIjEwMCUiLAogICAgICAgICAgY2xhc3NOYW1lOiAidHZiVmlzVG9wTl9fYmFyIgogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInR2YlZpc1RvcE5fX2lubmVyQmFyIiwKICAgICAgICAgIHN0eWxlOiBzdHlsZXMuaW5uZXJCYXIKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICBzdHlsZTogc3R5bGVzLmlubmVyQmFyVmFsdWUKICAgICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInR2YlZpc1RvcE5fX3ZhbHVlIiwKICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJ0c3ZiVG9wTlZhbHVlIgogICAgICAgIH0sIGZvcm1hdHRlcihsYXN0VmFsdWUpKSk7CiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIGlmICghdGhpcy5wcm9wcy5zZXJpZXMpIHJldHVybiBudWxsOwogICAgICB2YXIgaW50ZXJ2YWxTZXR0aW5ncyA9IHRoaXMucHJvcHMuc2VyaWVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBzZXJpZXMsIGluZGV4KSB7CiAgICAgICAgdmFyIHZhbHVlID0gKDAsIF9nZXRfbGFzdF92YWx1ZS5nZXRMYXN0VmFsdWUpKHNlcmllcy5kYXRhKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbWluOiAhaW5kZXggfHwgdmFsdWUgPCBhY2MubWluID8gdmFsdWUgOiBhY2MubWluLAogICAgICAgICAgbWF4OiAhaW5kZXggfHwgdmFsdWUgPiBhY2MubWF4ID8gdmFsdWUgOiBhY2MubWF4CiAgICAgICAgfTsKICAgICAgfSwgewogICAgICAgIG1pbjogdW5kZWZpbmVkLAogICAgICAgIG1heDogdW5kZWZpbmVkCiAgICAgIH0pOwogICAgICB2YXIgcm93cyA9IHRoaXMucHJvcHMuc2VyaWVzLm1hcCh0aGlzLnJlbmRlclJvdyhpbnRlcnZhbFNldHRpbmdzKSk7CiAgICAgIHZhciBjbGFzc05hbWUgPSAndHZiVmlzVG9wTic7CgogICAgICBpZiAodGhpcy5wcm9wcy5yZXZlcnNlZCkgewogICAgICAgIGNsYXNzTmFtZSArPSAnIHR2YlZpc1RvcE4tLXJldmVyc2VkJzsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIsIHsKICAgICAgICBjbGFzc05hbWU6ICJ0dmJWaXNUb3BOX190YWJsZSIsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInR2YlZpc1RvcE5UYWJsZSIsCiAgICAgICAgcmVmOiB0aGlzLnRhYmxlUmVmCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInRib2R5IiwgbnVsbCwgcm93cykpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsYWJlbE1heFdpZHRoIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAvLyBjYWxjdWxhdGUgbWF4LXdpZHRoIG9mIGEgbGFiZWwgY29sdW1uIGFzIDM1JSBvZiB0aGUgdGFibGUKICAgICAgcmV0dXJuIHRoaXMudGFibGVSZWYuY3VycmVudC5vZmZzZXRXaWR0aCAqIDAuMzU7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVG9wTjsKfShfcmVhY3QuQ29tcG9uZW50KTsKCmV4cG9ydHMuVG9wTiA9IFRvcE47CgpfZGVmaW5lUHJvcGVydHkoVG9wTiwgImdldFJlbmRlck1vZGUiLCBmdW5jdGlvbiAobWluLCBtYXgpIHsKICBpZiAobWluID49IDApIHsKICAgIHJldHVybiBSRU5ERVJfTU9ERVMuUE9TSVRJVkU7CiAgfSBlbHNlIGlmIChtYXggPCAwKSB7CiAgICByZXR1cm4gUkVOREVSX01PREVTLk5FR0FUSVZFOwogIH0KCiAgcmV0dXJuIFJFTkRFUl9NT0RFUy5NSVhFRDsKfSk7CgpfZGVmaW5lUHJvcGVydHkoVG9wTiwgImNhbGNJbm5lckJhclN0eWxlcyIsIGZ1bmN0aW9uIChyZW5kZXJNb2RlLCBpc1Bvc2l0aXZlKSB7CiAgaWYgKHJlbmRlck1vZGUgPT09IFJFTkRFUl9NT0RFUy5NSVhFRCkgewogICAgcmV0dXJuIF9kZWZpbmVQcm9wZXJ0eSh7fSwgaXNQb3NpdGl2ZSA/ICdtYXJnaW5MZWZ0JyA6ICdtYXJnaW5SaWdodCcsICc1MCUnKTsKICB9CgogIHJldHVybiB7fTsKfSk7CgpfZGVmaW5lUHJvcGVydHkoVG9wTiwgImNhbGNJbm5lckJhckRpdlN0eWxlcyIsIGZ1bmN0aW9uIChpdGVtLCB3aWR0aCwgaXNQb3NpdGl2ZSkgewogIHJldHVybiB7CiAgICBiYWNrZ3JvdW5kQ29sb3I6IGl0ZW0uY29sb3IsCiAgICB3aWR0aDogd2lkdGggKyAnJScsCiAgICBmbG9hdDogaXNQb3NpdGl2ZSA/ICdsZWZ0JyA6ICdyaWdodCcKICB9Owp9KTsKCl9kZWZpbmVQcm9wZXJ0eShUb3BOLCAiY2FsY0RvbWFpbiIsIGZ1bmN0aW9uIChyZW5kZXJNb2RlLCBtaW4sIG1heCkgewogIGlmIChyZW5kZXJNb2RlID09PSBSRU5ERVJfTU9ERVMuTUlYRUQpIHsKICAgIHJldHVybiBNYXRoLm1heChtYXgsIE1hdGguYWJzKG1pbikpOwogIH0gZWxzZSBpZiAocmVuZGVyTW9kZSA9PT0gUkVOREVSX01PREVTLk5FR0FUSVZFKSB7CiAgICByZXR1cm4gTWF0aC5hYnMobWluKTsKICB9CgogIHJldHVybiBtYXg7Cn0pOwoKVG9wTi5kZWZhdWx0UHJvcHMgPSB7CiAgdGlja0Zvcm1hdHRlcjogZnVuY3Rpb24gdGlja0Zvcm1hdHRlcihuKSB7CiAgICByZXR1cm4gbjsKICB9LAogIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soaSkgewogICAgcmV0dXJuIGk7CiAgfSwKICBkaXJlY3Rpb246ICdkZXNjJwp9OwpUb3BOLnByb3BUeXBlcyA9IHsKICB0aWNrRm9ybWF0dGVyOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYywKICBvbkNsaWNrOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYywKICBzZXJpZXM6IF9wcm9wVHlwZXMuZGVmYXVsdC5hcnJheSwKICByZXZlcnNlZDogX3Byb3BUeXBlcy5kZWZhdWx0LmJvb2wsCiAgZGlyZWN0aW9uOiBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nCn07"},null]}