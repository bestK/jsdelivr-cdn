{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/infra/public/containers/logs/log_entries/index.js","dependencies":[{"path":"x-pack/legacy/plugins/infra/public/containers/logs/log_entries/index.js","mtime":1585205044677},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkxvZ0VudHJpZXNTdGF0ZSA9IGV4cG9ydHMudXNlTG9nRW50cmllc1N0YXRlID0gZXhwb3J0cy5sb2dFbnRyaWVzSW5pdGlhbFN0YXRlID0gZXhwb3J0cy5sb2dFbnRyaWVzSW5pdGlhbENhbGxiYWNrcyA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSByZXF1aXJlKCJyZWFjdCIpOwoKdmFyIF9jb25zdGF0ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiY29uc3RhdGUiKSk7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIF9ncWxfcXVlcmllcyA9IHJlcXVpcmUoIi4vZ3FsX3F1ZXJpZXMiKTsKCnZhciBfdGltZSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbi90aW1lIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9Cgp2YXIgREVTSVJFRF9CVUZGRVJfUEFHRVMgPSAyOwp2YXIgQWN0aW9uOwoKKGZ1bmN0aW9uIChBY3Rpb24pIHsKICBBY3Rpb25bQWN0aW9uWyJGZXRjaGluZ05ld0VudHJpZXMiXSA9IDBdID0gIkZldGNoaW5nTmV3RW50cmllcyI7CiAgQWN0aW9uW0FjdGlvblsiRmV0Y2hpbmdNb3JlRW50cmllcyJdID0gMV0gPSAiRmV0Y2hpbmdNb3JlRW50cmllcyI7CiAgQWN0aW9uW0FjdGlvblsiUmVjZWl2ZU5ld0VudHJpZXMiXSA9IDJdID0gIlJlY2VpdmVOZXdFbnRyaWVzIjsKICBBY3Rpb25bQWN0aW9uWyJSZWNlaXZlRW50cmllc0JlZm9yZSJdID0gM10gPSAiUmVjZWl2ZUVudHJpZXNCZWZvcmUiOwogIEFjdGlvbltBY3Rpb25bIlJlY2VpdmVFbnRyaWVzQWZ0ZXIiXSA9IDRdID0gIlJlY2VpdmVFbnRyaWVzQWZ0ZXIiOwogIEFjdGlvbltBY3Rpb25bIkVycm9yT25OZXdFbnRyaWVzIl0gPSA1XSA9ICJFcnJvck9uTmV3RW50cmllcyI7CiAgQWN0aW9uW0FjdGlvblsiRXJyb3JPbk1vcmVFbnRyaWVzIl0gPSA2XSA9ICJFcnJvck9uTW9yZUVudHJpZXMiOwp9KShBY3Rpb24gfHwgKEFjdGlvbiA9IHt9KSk7Cgp2YXIgbG9nRW50cmllc0luaXRpYWxDYWxsYmFja3MgPSB7CiAgZmV0Y2hOZXdlckVudHJpZXM6IGZ1bmN0aW9uIGZldGNoTmV3ZXJFbnRyaWVzKCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBmZXRjaE5ld2VyRW50cmllcyQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQp9OwpleHBvcnRzLmxvZ0VudHJpZXNJbml0aWFsQ2FsbGJhY2tzID0gbG9nRW50cmllc0luaXRpYWxDYWxsYmFja3M7CnZhciBsb2dFbnRyaWVzSW5pdGlhbFN0YXRlID0gewogIGVudHJpZXM6IFtdLAogIGVudHJpZXNTdGFydDogbnVsbCwKICBlbnRyaWVzRW5kOiBudWxsLAogIGhhc01vcmVBZnRlckVuZDogZmFsc2UsCiAgaGFzTW9yZUJlZm9yZVN0YXJ0OiBmYWxzZSwKICBpc1JlbG9hZGluZzogdHJ1ZSwKICBpc0xvYWRpbmdNb3JlOiBmYWxzZSwKICBsYXN0TG9hZGVkVGltZTogbnVsbAp9OwpleHBvcnRzLmxvZ0VudHJpZXNJbml0aWFsU3RhdGUgPSBsb2dFbnRyaWVzSW5pdGlhbFN0YXRlOwoKdmFyIGNsZWFuRHVwbGljYXRlSXRlbXMgPSBmdW5jdGlvbiBjbGVhbkR1cGxpY2F0ZUl0ZW1zKGVudHJpZXNBLCBlbnRyaWVzQikgewogIHZhciBnaWRzID0gbmV3IFNldChlbnRyaWVzQi5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLmdpZDsKICB9KSk7CiAgcmV0dXJuIGVudHJpZXNBLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuICFnaWRzLmhhcyhpdGVtLmdpZCk7CiAgfSk7Cn07Cgp2YXIgc2hvdWxkRmV0Y2hOZXdFbnRyaWVzID0gZnVuY3Rpb24gc2hvdWxkRmV0Y2hOZXdFbnRyaWVzKF9yZWYpIHsKICB2YXIgcHJldlBhcmFtcyA9IF9yZWYucHJldlBhcmFtcywKICAgICAgdGltZUtleSA9IF9yZWYudGltZUtleSwKICAgICAgZmlsdGVyUXVlcnkgPSBfcmVmLmZpbHRlclF1ZXJ5LAogICAgICBlbnRyaWVzU3RhcnQgPSBfcmVmLmVudHJpZXNTdGFydCwKICAgICAgZW50cmllc0VuZCA9IF9yZWYuZW50cmllc0VuZDsKICBpZiAoIXRpbWVLZXkpIHJldHVybiBmYWxzZTsKICB2YXIgc2hvdWxkTG9hZFdpdGhOZXdGaWx0ZXIgPSBmaWx0ZXJRdWVyeSAhPT0gcHJldlBhcmFtcy5maWx0ZXJRdWVyeTsKICB2YXIgc2hvdWxkTG9hZEFyb3VuZE5ld1Bvc2l0aW9uID0gIWVudHJpZXNTdGFydCB8fCAhZW50cmllc0VuZCB8fCAhKDAsIF90aW1lLnRpbWVLZXlJc0JldHdlZW4pKGVudHJpZXNTdGFydCwgZW50cmllc0VuZCwgdGltZUtleSk7CiAgcmV0dXJuIHNob3VsZExvYWRXaXRoTmV3RmlsdGVyIHx8IHNob3VsZExvYWRBcm91bmROZXdQb3NpdGlvbjsKfTsKCnZhciBTaG91bGRGZXRjaE1vcmVFbnRyaWVzOwoKKGZ1bmN0aW9uIChTaG91bGRGZXRjaE1vcmVFbnRyaWVzKSB7CiAgU2hvdWxkRmV0Y2hNb3JlRW50cmllc1tTaG91bGRGZXRjaE1vcmVFbnRyaWVzWyJCZWZvcmUiXSA9IDBdID0gIkJlZm9yZSI7CiAgU2hvdWxkRmV0Y2hNb3JlRW50cmllc1tTaG91bGRGZXRjaE1vcmVFbnRyaWVzWyJBZnRlciJdID0gMV0gPSAiQWZ0ZXIiOwp9KShTaG91bGRGZXRjaE1vcmVFbnRyaWVzIHx8IChTaG91bGRGZXRjaE1vcmVFbnRyaWVzID0ge30pKTsKCnZhciBzaG91bGRGZXRjaE1vcmVFbnRyaWVzID0gZnVuY3Rpb24gc2hvdWxkRmV0Y2hNb3JlRW50cmllcyhfcmVmMiwgX3JlZjMpIHsKICB2YXIgcGFnZXNBZnRlckVuZCA9IF9yZWYyLnBhZ2VzQWZ0ZXJFbmQsCiAgICAgIHBhZ2VzQmVmb3JlU3RhcnQgPSBfcmVmMi5wYWdlc0JlZm9yZVN0YXJ0OwogIHZhciBoYXNNb3JlQmVmb3JlU3RhcnQgPSBfcmVmMy5oYXNNb3JlQmVmb3JlU3RhcnQsCiAgICAgIGhhc01vcmVBZnRlckVuZCA9IF9yZWYzLmhhc01vcmVBZnRlckVuZDsKICBpZiAocGFnZXNCZWZvcmVTdGFydCA9PT0gbnVsbCB8fCBwYWdlc0FmdGVyRW5kID09PSBudWxsKSByZXR1cm4gZmFsc2U7CiAgaWYgKHBhZ2VzQmVmb3JlU3RhcnQgPCBERVNJUkVEX0JVRkZFUl9QQUdFUyAmJiBoYXNNb3JlQmVmb3JlU3RhcnQpIHJldHVybiBTaG91bGRGZXRjaE1vcmVFbnRyaWVzLkJlZm9yZTsKICBpZiAocGFnZXNBZnRlckVuZCA8IERFU0lSRURfQlVGRkVSX1BBR0VTICYmIGhhc01vcmVBZnRlckVuZCkgcmV0dXJuIFNob3VsZEZldGNoTW9yZUVudHJpZXMuQWZ0ZXI7CiAgcmV0dXJuIGZhbHNlOwp9OwoKdmFyIHVzZUZldGNoRW50cmllc0VmZmVjdCA9IGZ1bmN0aW9uIHVzZUZldGNoRW50cmllc0VmZmVjdChzdGF0ZSwgZGlzcGF0Y2gsIHByb3BzKSB7CiAgdmFyIF91c2VHcmFwaFFMUXVlcmllcyA9ICgwLCBfZ3FsX3F1ZXJpZXMudXNlR3JhcGhRTFF1ZXJpZXMpKCksCiAgICAgIGdldExvZ0VudHJpZXNBcm91bmQgPSBfdXNlR3JhcGhRTFF1ZXJpZXMuZ2V0TG9nRW50cmllc0Fyb3VuZCwKICAgICAgZ2V0TG9nRW50cmllc0JlZm9yZSA9IF91c2VHcmFwaFFMUXVlcmllcy5nZXRMb2dFbnRyaWVzQmVmb3JlLAogICAgICBnZXRMb2dFbnRyaWVzQWZ0ZXIgPSBfdXNlR3JhcGhRTFF1ZXJpZXMuZ2V0TG9nRW50cmllc0FmdGVyOwoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkocHJvcHMpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgcHJldlBhcmFtcyA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIGNhY2hlUHJldlBhcmFtcyA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIHN0YXJ0ZWRTdHJlYW1pbmcgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRTdGFydGVkU3RyZWFtaW5nID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIHJ1bkZldGNoTmV3RW50cmllc1JlcXVlc3QgPSBmdW5jdGlvbiBydW5GZXRjaE5ld0VudHJpZXNSZXF1ZXN0KCkgewogICAgdmFyIG92ZXJyaWRlLAogICAgICAgIHBheWxvYWQsCiAgICAgICAgX2FyZ3MyID0gYXJndW1lbnRzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBydW5GZXRjaE5ld0VudHJpZXNSZXF1ZXN0JChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgb3ZlcnJpZGUgPSBfYXJnczIubGVuZ3RoID4gMCAmJiBfYXJnczJbMF0gIT09IHVuZGVmaW5lZCA/IF9hcmdzMlswXSA6IHt9OwogICAgICAgICAgICBkaXNwYXRjaCh7CiAgICAgICAgICAgICAgdHlwZTogQWN0aW9uLkZldGNoaW5nTmV3RW50cmllcwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoZ2V0TG9nRW50cmllc0Fyb3VuZChfb2JqZWN0U3ByZWFkKHt9LCAoMCwgX2xvZGFzaC5vbWl0KShwcm9wcywgJ2p1bXBUb1RhcmdldFBvc2l0aW9uJyksIHt9LCBvdmVycmlkZSkpKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHBheWxvYWQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgZGlzcGF0Y2goewogICAgICAgICAgICAgIHR5cGU6IEFjdGlvbi5SZWNlaXZlTmV3RW50cmllcywKICAgICAgICAgICAgICBwYXlsb2FkOiBwYXlsb2FkCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gOTsKICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDIpOwogICAgICAgICAgICBkaXNwYXRjaCh7CiAgICAgICAgICAgICAgdHlwZTogQWN0aW9uLkVycm9yT25OZXdFbnRyaWVzCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIG51bGwsIG51bGwsIFtbMiwgOV1dKTsKICB9OwoKICB2YXIgcnVuRmV0Y2hNb3JlRW50cmllc1JlcXVlc3QgPSBmdW5jdGlvbiBydW5GZXRjaE1vcmVFbnRyaWVzUmVxdWVzdChkaXJlY3Rpb24pIHsKICAgIHZhciBnZXRFbnRyaWVzQmVmb3JlLCB0aW1lS2V5LCBnZXRNb3JlTG9nRW50cmllcywgX3BheWxvYWQ7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBydW5GZXRjaE1vcmVFbnRyaWVzUmVxdWVzdCQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGRpc3BhdGNoKHsKICAgICAgICAgICAgICB0eXBlOiBBY3Rpb24uRmV0Y2hpbmdNb3JlRW50cmllcwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZ2V0RW50cmllc0JlZm9yZSA9IGRpcmVjdGlvbiA9PT0gU2hvdWxkRmV0Y2hNb3JlRW50cmllcy5CZWZvcmU7CiAgICAgICAgICAgIHRpbWVLZXkgPSBnZXRFbnRyaWVzQmVmb3JlID8gc3RhdGUuZW50cmllc1swXS5rZXkgOiBzdGF0ZS5lbnRyaWVzW3N0YXRlLmVudHJpZXMubGVuZ3RoIC0gMV0ua2V5OwogICAgICAgICAgICBnZXRNb3JlTG9nRW50cmllcyA9IGdldEVudHJpZXNCZWZvcmUgPyBnZXRMb2dFbnRyaWVzQmVmb3JlIDogZ2V0TG9nRW50cmllc0FmdGVyOwogICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDQ7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChnZXRNb3JlTG9nRW50cmllcyhfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcywgewogICAgICAgICAgICAgIHRpbWVLZXk6IHRpbWVLZXkKICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9wYXlsb2FkID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIGRpc3BhdGNoKHsKICAgICAgICAgICAgICB0eXBlOiBnZXRFbnRyaWVzQmVmb3JlID8gQWN0aW9uLlJlY2VpdmVFbnRyaWVzQmVmb3JlIDogQWN0aW9uLlJlY2VpdmVFbnRyaWVzQWZ0ZXIsCiAgICAgICAgICAgICAgcGF5bG9hZDogX3BheWxvYWQKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfcGF5bG9hZC5lbnRyaWVzRW5kKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDEyOwogICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oNCk7CiAgICAgICAgICAgIGRpc3BhdGNoKHsKICAgICAgICAgICAgICB0eXBlOiBBY3Rpb24uRXJyb3JPbk1vcmVFbnRyaWVzCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIG51bGwsIG51bGwsIFtbNCwgMTJdXSk7CiAgfTsKCiAgdmFyIGZldGNoTmV3RW50cmllc0VmZmVjdERlcGVuZGVuY2llcyA9IE9iamVjdC52YWx1ZXMoKDAsIF9sb2Rhc2gucGljaykocHJvcHMsIFsnc291cmNlSWQnLCAnZmlsdGVyUXVlcnknLCAndGltZUtleSddKSk7CgogIHZhciBmZXRjaE5ld0VudHJpZXNFZmZlY3QgPSBmdW5jdGlvbiBmZXRjaE5ld0VudHJpZXNFZmZlY3QoKSB7CiAgICBpZiAocHJvcHMuaXNBdXRvUmVsb2FkaW5nKSByZXR1cm47CgogICAgaWYgKHNob3VsZEZldGNoTmV3RW50cmllcyhfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcywge30sIHN0YXRlLCB7CiAgICAgIHByZXZQYXJhbXM6IHByZXZQYXJhbXMKICAgIH0pKSkgewogICAgICBydW5GZXRjaE5ld0VudHJpZXNSZXF1ZXN0KCk7CiAgICB9CgogICAgY2FjaGVQcmV2UGFyYW1zKHByb3BzKTsKICB9OwoKICB2YXIgZmV0Y2hNb3JlRW50cmllc0VmZmVjdERlcGVuZGVuY2llcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoT2JqZWN0LnZhbHVlcygoMCwgX2xvZGFzaC5waWNrKShwcm9wcywgWydwYWdlc0FmdGVyRW5kJywgJ3BhZ2VzQmVmb3JlU3RhcnQnXSkpKSwgW09iamVjdC52YWx1ZXMoKDAsIF9sb2Rhc2gucGljaykoc3RhdGUsIFsnaGFzTW9yZUJlZm9yZVN0YXJ0JywgJ2hhc01vcmVBZnRlckVuZCddKSldKTsKCiAgdmFyIGZldGNoTW9yZUVudHJpZXNFZmZlY3QgPSBmdW5jdGlvbiBmZXRjaE1vcmVFbnRyaWVzRWZmZWN0KCkgewogICAgaWYgKHN0YXRlLmlzTG9hZGluZ01vcmUgfHwgcHJvcHMuaXNBdXRvUmVsb2FkaW5nKSByZXR1cm47CiAgICB2YXIgZGlyZWN0aW9uID0gc2hvdWxkRmV0Y2hNb3JlRW50cmllcyhwcm9wcywgc3RhdGUpOwoKICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7CiAgICAgIGNhc2UgU2hvdWxkRmV0Y2hNb3JlRW50cmllcy5CZWZvcmU6CiAgICAgIGNhc2UgU2hvdWxkRmV0Y2hNb3JlRW50cmllcy5BZnRlcjoKICAgICAgICBydW5GZXRjaE1vcmVFbnRyaWVzUmVxdWVzdChkaXJlY3Rpb24pOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICBicmVhazsKICAgIH0KICB9OwoKICB2YXIgZmV0Y2hOZXdlckVudHJpZXMgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKSgoMCwgX2xvZGFzaC50aHJvdHRsZSkoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHJ1bkZldGNoTW9yZUVudHJpZXNSZXF1ZXN0KFNob3VsZEZldGNoTW9yZUVudHJpZXMuQWZ0ZXIpOwogIH0sIDUwMCksIFtwcm9wcywgc3RhdGUuZW50cmllc0VuZF0pOwogIHZhciBzdHJlYW1FbnRyaWVzRWZmZWN0RGVwZW5kZW5jaWVzID0gW3Byb3BzLmlzQXV0b1JlbG9hZGluZywgc3RhdGUuaXNMb2FkaW5nTW9yZSwgc3RhdGUuaXNSZWxvYWRpbmddOwoKICB2YXIgc3RyZWFtRW50cmllc0VmZmVjdCA9IGZ1bmN0aW9uIHN0cmVhbUVudHJpZXNFZmZlY3QoKSB7CiAgICAoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIG5vd0tleSwgbmV3RW50cmllc0VuZDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIShwcm9wcy5pc0F1dG9SZWxvYWRpbmcgJiYgIXN0YXRlLmlzTG9hZGluZ01vcmUgJiYgIXN0YXRlLmlzUmVsb2FkaW5nKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKCFzdGFydGVkU3RyZWFtaW5nKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KHJlcywgNTAwMCk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgbm93S2V5ID0gewogICAgICAgICAgICAgICAgdGllYnJlYWtlcjogMCwKICAgICAgICAgICAgICAgIHRpbWU6IERhdGUubm93KCkKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHByb3BzLmp1bXBUb1RhcmdldFBvc2l0aW9uKG5vd0tleSk7CiAgICAgICAgICAgICAgc2V0U3RhcnRlZFN0cmVhbWluZyh0cnVlKTsKCiAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5oYXNNb3JlQWZ0ZXJFbmQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJ1bkZldGNoTmV3RW50cmllc1JlcXVlc3QoewogICAgICAgICAgICAgICAgdGltZUtleTogbm93S2V5CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE0OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAocnVuRmV0Y2hNb3JlRW50cmllc1JlcXVlc3QoU2hvdWxkRmV0Y2hNb3JlRW50cmllcy5BZnRlcikpOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBuZXdFbnRyaWVzRW5kID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgICAgIGlmIChuZXdFbnRyaWVzRW5kKSB7CiAgICAgICAgICAgICAgICBwcm9wcy5qdW1wVG9UYXJnZXRQb3NpdGlvbihuZXdFbnRyaWVzRW5kKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIGlmICghcHJvcHMuaXNBdXRvUmVsb2FkaW5nKSB7CiAgICAgICAgICAgICAgICBzZXRTdGFydGVkU3RyZWFtaW5nKGZhbHNlKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9KSgpOwogIH07CgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmZXRjaE5ld0VudHJpZXNFZmZlY3QsIGZldGNoTmV3RW50cmllc0VmZmVjdERlcGVuZGVuY2llcyk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZldGNoTW9yZUVudHJpZXNFZmZlY3QsIGZldGNoTW9yZUVudHJpZXNFZmZlY3REZXBlbmRlbmNpZXMpOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShzdHJlYW1FbnRyaWVzRWZmZWN0LCBzdHJlYW1FbnRyaWVzRWZmZWN0RGVwZW5kZW5jaWVzKTsKICByZXR1cm4gewogICAgZmV0Y2hOZXdlckVudHJpZXM6IGZldGNoTmV3ZXJFbnRyaWVzLAogICAgY2hlY2tGb3JOZXdFbnRyaWVzOiBydW5GZXRjaE5ld0VudHJpZXNSZXF1ZXN0CiAgfTsKfTsKCnZhciB1c2VMb2dFbnRyaWVzU3RhdGUgPSBmdW5jdGlvbiB1c2VMb2dFbnRyaWVzU3RhdGUocHJvcHMpIHsKICB2YXIgX3VzZVJlZHVjZXIgPSAoMCwgX3JlYWN0LnVzZVJlZHVjZXIpKGxvZ0VudHJpZXNTdGF0ZVJlZHVjZXIsIGxvZ0VudHJpZXNJbml0aWFsU3RhdGUpLAogICAgICBfdXNlUmVkdWNlcjIgPSBfc2xpY2VkVG9BcnJheShfdXNlUmVkdWNlciwgMiksCiAgICAgIHN0YXRlID0gX3VzZVJlZHVjZXIyWzBdLAogICAgICBkaXNwYXRjaCA9IF91c2VSZWR1Y2VyMlsxXTsKCiAgdmFyIF91c2VGZXRjaEVudHJpZXNFZmZlYyA9IHVzZUZldGNoRW50cmllc0VmZmVjdChzdGF0ZSwgZGlzcGF0Y2gsIHByb3BzKSwKICAgICAgZmV0Y2hOZXdlckVudHJpZXMgPSBfdXNlRmV0Y2hFbnRyaWVzRWZmZWMuZmV0Y2hOZXdlckVudHJpZXMsCiAgICAgIGNoZWNrRm9yTmV3RW50cmllcyA9IF91c2VGZXRjaEVudHJpZXNFZmZlYy5jaGVja0Zvck5ld0VudHJpZXM7CgogIHZhciBjYWxsYmFja3MgPSB7CiAgICBmZXRjaE5ld2VyRW50cmllczogZmV0Y2hOZXdlckVudHJpZXMsCiAgICBjaGVja0Zvck5ld0VudHJpZXM6IGNoZWNrRm9yTmV3RW50cmllcwogIH07CiAgcmV0dXJuIFtzdGF0ZSwgY2FsbGJhY2tzXTsKfTsKCmV4cG9ydHMudXNlTG9nRW50cmllc1N0YXRlID0gdXNlTG9nRW50cmllc1N0YXRlOwoKdmFyIGxvZ0VudHJpZXNTdGF0ZVJlZHVjZXIgPSBmdW5jdGlvbiBsb2dFbnRyaWVzU3RhdGVSZWR1Y2VyKHByZXZTdGF0ZSwgYWN0aW9uKSB7CiAgc3dpdGNoIChhY3Rpb24udHlwZSkgewogICAgY2FzZSBBY3Rpb24uUmVjZWl2ZU5ld0VudHJpZXM6CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBwcmV2U3RhdGUsIHt9LCBhY3Rpb24ucGF5bG9hZCwgewogICAgICAgIGlzUmVsb2FkaW5nOiBmYWxzZQogICAgICB9KTsKCiAgICBjYXNlIEFjdGlvbi5SZWNlaXZlRW50cmllc0JlZm9yZToKICAgICAgewogICAgICAgIHZhciBwcmV2RW50cmllcyA9IGNsZWFuRHVwbGljYXRlSXRlbXMocHJldlN0YXRlLmVudHJpZXMsIGFjdGlvbi5wYXlsb2FkLmVudHJpZXMpOwogICAgICAgIHZhciBuZXdFbnRyaWVzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhY3Rpb24ucGF5bG9hZC5lbnRyaWVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHByZXZFbnRyaWVzKSk7CiAgICAgICAgdmFyIF9hY3Rpb24kcGF5bG9hZCA9IGFjdGlvbi5wYXlsb2FkLAogICAgICAgICAgICBoYXNNb3JlQmVmb3JlU3RhcnQgPSBfYWN0aW9uJHBheWxvYWQuaGFzTW9yZUJlZm9yZVN0YXJ0LAogICAgICAgICAgICBlbnRyaWVzU3RhcnQgPSBfYWN0aW9uJHBheWxvYWQuZW50cmllc1N0YXJ0LAogICAgICAgICAgICBsYXN0TG9hZGVkVGltZSA9IF9hY3Rpb24kcGF5bG9hZC5sYXN0TG9hZGVkVGltZTsKICAgICAgICB2YXIgdXBkYXRlID0gewogICAgICAgICAgZW50cmllczogbmV3RW50cmllcywKICAgICAgICAgIGlzTG9hZGluZ01vcmU6IGZhbHNlLAogICAgICAgICAgaGFzTW9yZUJlZm9yZVN0YXJ0OiBoYXNNb3JlQmVmb3JlU3RhcnQsCiAgICAgICAgICBlbnRyaWVzU3RhcnQ6IGVudHJpZXNTdGFydCwKICAgICAgICAgIGxhc3RMb2FkZWRUaW1lOiBsYXN0TG9hZGVkVGltZQogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHByZXZTdGF0ZSwge30sIHVwZGF0ZSk7CiAgICAgIH0KCiAgICBjYXNlIEFjdGlvbi5SZWNlaXZlRW50cmllc0FmdGVyOgogICAgICB7CiAgICAgICAgdmFyIF9wcmV2RW50cmllcyA9IGNsZWFuRHVwbGljYXRlSXRlbXMocHJldlN0YXRlLmVudHJpZXMsIGFjdGlvbi5wYXlsb2FkLmVudHJpZXMpOwoKICAgICAgICB2YXIgX25ld0VudHJpZXMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KF9wcmV2RW50cmllcyksIF90b0NvbnN1bWFibGVBcnJheShhY3Rpb24ucGF5bG9hZC5lbnRyaWVzKSk7CgogICAgICAgIHZhciBfYWN0aW9uJHBheWxvYWQyID0gYWN0aW9uLnBheWxvYWQsCiAgICAgICAgICAgIGhhc01vcmVBZnRlckVuZCA9IF9hY3Rpb24kcGF5bG9hZDIuaGFzTW9yZUFmdGVyRW5kLAogICAgICAgICAgICBlbnRyaWVzRW5kID0gX2FjdGlvbiRwYXlsb2FkMi5lbnRyaWVzRW5kLAogICAgICAgICAgICBfbGFzdExvYWRlZFRpbWUgPSBfYWN0aW9uJHBheWxvYWQyLmxhc3RMb2FkZWRUaW1lOwogICAgICAgIHZhciBfdXBkYXRlID0gewogICAgICAgICAgZW50cmllczogX25ld0VudHJpZXMsCiAgICAgICAgICBpc0xvYWRpbmdNb3JlOiBmYWxzZSwKICAgICAgICAgIGhhc01vcmVBZnRlckVuZDogaGFzTW9yZUFmdGVyRW5kLAogICAgICAgICAgZW50cmllc0VuZDogZW50cmllc0VuZCwKICAgICAgICAgIGxhc3RMb2FkZWRUaW1lOiBfbGFzdExvYWRlZFRpbWUKICAgICAgICB9OwogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBwcmV2U3RhdGUsIHt9LCBfdXBkYXRlKTsKICAgICAgfQoKICAgIGNhc2UgQWN0aW9uLkZldGNoaW5nTmV3RW50cmllczoKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHByZXZTdGF0ZSwgewogICAgICAgIGlzUmVsb2FkaW5nOiB0cnVlCiAgICAgIH0pOwoKICAgIGNhc2UgQWN0aW9uLkZldGNoaW5nTW9yZUVudHJpZXM6CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBwcmV2U3RhdGUsIHsKICAgICAgICBpc0xvYWRpbmdNb3JlOiB0cnVlCiAgICAgIH0pOwoKICAgIGNhc2UgQWN0aW9uLkVycm9yT25OZXdFbnRyaWVzOgogICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgcHJldlN0YXRlLCB7CiAgICAgICAgaXNSZWxvYWRpbmc6IGZhbHNlCiAgICAgIH0pOwoKICAgIGNhc2UgQWN0aW9uLkVycm9yT25Nb3JlRW50cmllczoKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHByZXZTdGF0ZSwgewogICAgICAgIGlzTG9hZGluZ01vcmU6IGZhbHNlCiAgICAgIH0pOwoKICAgIGRlZmF1bHQ6CiAgICAgIHRocm93IG5ldyBFcnJvcigpOwogIH0KfTsKCnZhciBMb2dFbnRyaWVzU3RhdGUgPSAoMCwgX2NvbnN0YXRlLmRlZmF1bHQpKHVzZUxvZ0VudHJpZXNTdGF0ZSk7CmV4cG9ydHMuTG9nRW50cmllc1N0YXRlID0gTG9nRW50cmllc1N0YXRlOw=="},null]}