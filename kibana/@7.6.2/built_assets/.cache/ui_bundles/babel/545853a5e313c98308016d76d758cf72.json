{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/lens/public/app_plugin/plugin.js","dependencies":[{"path":"x-pack/legacy/plugins/lens/public/app_plugin/plugin.js","mtime":1585205044961},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkFwcFBsdWdpbiA9IGV4cG9ydHMuaXNSaXNvbk9iamVjdCA9IHZvaWQgMDsKCnJlcXVpcmUoInVpL2F1dG9sb2FkL2FsbCIpOwoKcmVxdWlyZSgidWlFeHBvcnRzL2ZpZWxkRm9ybWF0cyIpOwoKcmVxdWlyZSgidWlFeHBvcnRzL3NlYXJjaCIpOwoKcmVxdWlyZSgidWlFeHBvcnRzL3Zpc1JlcXVlc3RIYW5kbGVycyIpOwoKcmVxdWlyZSgidWlFeHBvcnRzL3Zpc1Jlc3BvbnNlSGFuZGxlcnMiKTsKCnJlcXVpcmUoInVpRXhwb3J0cy9zYXZlZE9iamVjdFR5cGVzIik7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX3JlYWN0Um91dGVyRG9tID0gcmVxdWlyZSgicmVhY3Qtcm91dGVyLWRvbSIpOwoKdmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoInJlYWN0LWRvbSIpOwoKdmFyIF9yaXNvbk5vZGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJpc29uLW5vZGUiKSk7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvcGx1Z2lucy9raWJhbmFfdXRpbHMvcHVibGljIik7Cgp2YXIgX2VkaXRvcl9mcmFtZV9wbHVnaW4gPSByZXF1aXJlKCIuLi9lZGl0b3JfZnJhbWVfcGx1Z2luIik7Cgp2YXIgX2luZGV4cGF0dGVybl9wbHVnaW4gPSByZXF1aXJlKCIuLi9pbmRleHBhdHRlcm5fcGx1Z2luIik7Cgp2YXIgX2hlbHBfbWVudV91dGlsID0gcmVxdWlyZSgiLi4vaGVscF9tZW51X3V0aWwiKTsKCnZhciBfcGVyc2lzdGVuY2UgPSByZXF1aXJlKCIuLi9wZXJzaXN0ZW5jZSIpOwoKdmFyIF94eV92aXN1YWxpemF0aW9uX3BsdWdpbiA9IHJlcXVpcmUoIi4uL3h5X3Zpc3VhbGl6YXRpb25fcGx1Z2luIik7Cgp2YXIgX21ldHJpY192aXN1YWxpemF0aW9uX3BsdWdpbiA9IHJlcXVpcmUoIi4uL21ldHJpY192aXN1YWxpemF0aW9uX3BsdWdpbiIpOwoKdmFyIF9kYXRhdGFibGVfdmlzdWFsaXphdGlvbl9wbHVnaW4gPSByZXF1aXJlKCIuLi9kYXRhdGFibGVfdmlzdWFsaXphdGlvbl9wbHVnaW4iKTsKCnZhciBfYXBwID0gcmVxdWlyZSgiLi9hcHAiKTsKCnZhciBfbGVuc191aV90ZWxlbWV0cnkgPSByZXF1aXJlKCIuLi9sZW5zX3VpX3RlbGVtZXRyeSIpOwoKdmFyIF9jb21tb24gPSByZXF1aXJlKCIuLi8uLi9jb21tb24iKTsKCnZhciBfdXJsX2hlbHBlciA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9sZWdhY3kvY29yZV9wbHVnaW5zL2tpYmFuYS9wdWJsaWMvZGFzaGJvYXJkL25wX3JlYWR5L3VybF9oZWxwZXIiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgaXNSaXNvbk9iamVjdCA9IGZ1bmN0aW9uIGlzUmlzb25PYmplY3QodmFsdWUpIHsKICByZXR1cm4gKDAsIF9sb2Rhc2guaXNPYmplY3QpKHZhbHVlKTsKfTsKCmV4cG9ydHMuaXNSaXNvbk9iamVjdCA9IGlzUmlzb25PYmplY3Q7Cgp2YXIgQXBwUGx1Z2luID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQXBwUGx1Z2luKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFwcFBsdWdpbik7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzdGFydERlcGVuZGVuY2llcyIsIG51bGwpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEFwcFBsdWdpbiwgW3sKICAgIGtleTogInNldHVwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXR1cChjb3JlLCBfcmVmKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIga2liYW5hX2xlZ2FjeSA9IF9yZWYua2liYW5hX2xlZ2FjeTsgLy8gVE9ETzogVGhlc2UgcGx1Z2lucyBzaG91bGQgbm90IGJlIGNhbGxlZCBmcm9tIHRoZSB0b3AgbGV2ZWwsIGJ1dCBzaW5jZSB0aGlzIGlzIHRoZQogICAgICAvLyBlbnRyeSBwb2ludCB0byB0aGUgYXBwIHdlIGhhdmUgbm8gY2hvaWNlIHVudGlsIHRoZSBuZXcgcGxhdGZvcm0gaXMgcmVhZHkKCiAgICAgIHZhciBpbmRleFBhdHRlcm4gPSAoMCwgX2luZGV4cGF0dGVybl9wbHVnaW4uaW5kZXhQYXR0ZXJuRGF0YXNvdXJjZVNldHVwKSgpOwogICAgICB2YXIgZGF0YXRhYmxlVmlzdWFsaXphdGlvbiA9ICgwLCBfZGF0YXRhYmxlX3Zpc3VhbGl6YXRpb25fcGx1Z2luLmRhdGF0YWJsZVZpc3VhbGl6YXRpb25TZXR1cCkoKTsKICAgICAgdmFyIHh5VmlzdWFsaXphdGlvbiA9ICgwLCBfeHlfdmlzdWFsaXphdGlvbl9wbHVnaW4ueHlWaXN1YWxpemF0aW9uU2V0dXApKCk7CiAgICAgIHZhciBtZXRyaWNWaXN1YWxpemF0aW9uID0gKDAsIF9tZXRyaWNfdmlzdWFsaXphdGlvbl9wbHVnaW4ubWV0cmljVmlzdWFsaXphdGlvblNldHVwKSgpOwogICAgICB2YXIgZWRpdG9yRnJhbWVTZXR1cEludGVyZmFjZSA9ICgwLCBfZWRpdG9yX2ZyYW1lX3BsdWdpbi5lZGl0b3JGcmFtZVNldHVwKSgpOwogICAgICBlZGl0b3JGcmFtZVNldHVwSW50ZXJmYWNlLnJlZ2lzdGVyVmlzdWFsaXphdGlvbih4eVZpc3VhbGl6YXRpb24pOwogICAgICBlZGl0b3JGcmFtZVNldHVwSW50ZXJmYWNlLnJlZ2lzdGVyVmlzdWFsaXphdGlvbihkYXRhdGFibGVWaXN1YWxpemF0aW9uKTsKICAgICAgZWRpdG9yRnJhbWVTZXR1cEludGVyZmFjZS5yZWdpc3RlclZpc3VhbGl6YXRpb24obWV0cmljVmlzdWFsaXphdGlvbik7CiAgICAgIGVkaXRvckZyYW1lU2V0dXBJbnRlcmZhY2UucmVnaXN0ZXJEYXRhc291cmNlKGluZGV4UGF0dGVybik7CiAgICAgIGtpYmFuYV9sZWdhY3kucmVnaXN0ZXJMZWdhY3lBcHAoewogICAgICAgIGlkOiAnbGVucycsCiAgICAgICAgdGl0bGU6IF9jb21tb24uTk9UX0lOVEVSTkFUSU9OQUxJWkVEX1BST0RVQ1RfTkFNRSwKICAgICAgICBtb3VudDogZnVuY3Rpb24gbW91bnQoY29udGV4dCwgcGFyYW1zKSB7CiAgICAgICAgICB2YXIgX3RoaXMkc3RhcnREZXBlbmRlbmNpLCBkYXRhLCBzYXZlZE9iamVjdHNDbGllbnQsIGVkaXRvckZyYW1lLCBpbnN0YW5jZSwgdXBkYXRlVXJsVGltZSwgX3JlZGlyZWN0VG8sIHJlbmRlckVkaXRvciwgTm90Rm91bmQ7CgogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBtb3VudCQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIE5vdEZvdW5kID0gZnVuY3Rpb24gX3JlZjIoKSB7CiAgICAgICAgICAgICAgICAgICAgKDAsIF9sZW5zX3VpX3RlbGVtZXRyeS50cmFja1VpRXZlbnQpKCdsb2FkZWRfNDA0Jyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgICAgICAgICBpZDogInhwYWNrLmxlbnMuYXBwNDA0IiwKICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiNDA0IE5vdCBGb3VuZCIKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgIGlmICghKF90aGlzLnN0YXJ0RGVwZW5kZW5jaWVzID09PSBudWxsKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21vdW50ZWQgYmVmb3JlIHN0YXJ0IHBoYXNlJyk7CgogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICBfdGhpcyRzdGFydERlcGVuZGVuY2kgPSBfdGhpcy5zdGFydERlcGVuZGVuY2llcywgZGF0YSA9IF90aGlzJHN0YXJ0RGVwZW5kZW5jaS5kYXRhLCBzYXZlZE9iamVjdHNDbGllbnQgPSBfdGhpcyRzdGFydERlcGVuZGVuY2kuc2F2ZWRPYmplY3RzQ2xpZW50LCBlZGl0b3JGcmFtZSA9IF90aGlzJHN0YXJ0RGVwZW5kZW5jaS5lZGl0b3JGcmFtZTsKICAgICAgICAgICAgICAgICAgKDAsIF9oZWxwX21lbnVfdXRpbC5hZGRIZWxwTWVudVRvQXBwQ2hyb21lKShjb250ZXh0LmNvcmUuY2hyb21lKTsKICAgICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBlZGl0b3JGcmFtZS5jcmVhdGVJbnN0YW5jZSh7fSk7CiAgICAgICAgICAgICAgICAgICgwLCBfbGVuc191aV90ZWxlbWV0cnkuc2V0UmVwb3J0TWFuYWdlcikobmV3IF9sZW5zX3VpX3RlbGVtZXRyeS5MZW5zUmVwb3J0TWFuYWdlcih7CiAgICAgICAgICAgICAgICAgICAgc3RvcmFnZTogbmV3IF9wdWJsaWMuU3RvcmFnZShsb2NhbFN0b3JhZ2UpLAogICAgICAgICAgICAgICAgICAgIGh0dHA6IGNvcmUuaHR0cAogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICB1cGRhdGVVcmxUaW1lID0gZnVuY3Rpb24gdXBkYXRlVXJsVGltZSh1cmxWYXJzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRlY29kZWQgPSBfcmlzb25Ob2RlLmRlZmF1bHQuZGVjb2RlKHVybFZhcnMuX2cpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoIWRlY29kZWQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9IC8vIEB0cy1pZ25vcmUKCgogICAgICAgICAgICAgICAgICAgIGRlY29kZWQudGltZSA9IGRhdGEucXVlcnkudGltZWZpbHRlci50aW1lZmlsdGVyLmdldFRpbWUoKTsKICAgICAgICAgICAgICAgICAgICB1cmxWYXJzLl9nID0gX3Jpc29uTm9kZS5kZWZhdWx0LmVuY29kZShkZWNvZGVkKTsKICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgIF9yZWRpcmVjdFRvID0gZnVuY3Rpb24gcmVkaXJlY3RUbyhyb3V0ZVByb3BzLCBhZGRUb0Rhc2hib2FyZE1vZGUsIGlkKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFpZCkgewogICAgICAgICAgICAgICAgICAgICAgcm91dGVQcm9wcy5oaXN0b3J5LnB1c2goJy9sZW5zJyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYWRkVG9EYXNoYm9hcmRNb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICByb3V0ZVByb3BzLmhpc3RvcnkucHVzaCgiL2xlbnMvZWRpdC8iLmNvbmNhdChpZCkpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWRkVG9EYXNoYm9hcmRNb2RlICYmIGlkKSB7CiAgICAgICAgICAgICAgICAgICAgICByb3V0ZVByb3BzLmhpc3RvcnkucHVzaCgiL2xlbnMvZWRpdC8iLmNvbmNhdChpZCkpOwogICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGNvbnRleHQuY29yZS5jaHJvbWUubmF2TGlua3MuZ2V0KCdraWJhbmE6ZGFzaGJvYXJkJyk7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKCF1cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZ2V0IGxhc3QgZGFzaGJvYXJkIHVybCcpOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIHZhciBsYXN0RGFzaGJvYXJkQWJzb2x1dGVVcmwgPSB1cmwudXJsOwogICAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2VQYXRoID0gY29udGV4dC5jb3JlLmh0dHAuYmFzZVBhdGguZ2V0KCk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuc1VybCA9ICgwLCBfdXJsX2hlbHBlci5nZXRMZW5zVXJsRnJvbURhc2hib2FyZEFic29sdXRlVXJsKShsYXN0RGFzaGJvYXJkQWJzb2x1dGVVcmwsIGJhc2VQYXRoLCBpZCk7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXN0RGFzaGJvYXJkQWJzb2x1dGVVcmwgfHwgIWxlbnNVcmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZ2V0IGxhc3QgZGFzaGJvYXJkIHVybCcpOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7fSwgJycsIGxlbnNVcmwpOwogICAgICAgICAgICAgICAgICAgICAgdmFyIHVybFZhcnMgPSAoMCwgX3VybF9oZWxwZXIuZ2V0VXJsVmFycykobGFzdERhc2hib2FyZEFic29sdXRlVXJsKTsKICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVVybFRpbWUodXJsVmFycyk7IC8vIHdlIG5lZWQgdG8gcGFzcyBpbiB0aW1lcmFuZ2UgaW4gcXVlcnkgcGFyYW1zIGRpcmVjdGx5CgogICAgICAgICAgICAgICAgICAgICAgdmFyIGRhc2hib2FyZFBhcnNlZFVybCA9ICgwLCBfdXJsX2hlbHBlci5hZGRFbWJlZGRhYmxlVG9EYXNoYm9hcmRVcmwpKGxhc3REYXNoYm9hcmRBYnNvbHV0ZVVybCwgYmFzZVBhdGgsIGlkLCB1cmxWYXJzKTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhc2hib2FyZFBhcnNlZFVybCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb2JsZW0gcGFyc2luZyBkYXNoYm9hcmQgdXJsJyk7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHt9LCAnJywgZGFzaGJvYXJkUGFyc2VkVXJsKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICByZW5kZXJFZGl0b3IgPSBmdW5jdGlvbiByZW5kZXJFZGl0b3Iocm91dGVQcm9wcykgewogICAgICAgICAgICAgICAgICAgICgwLCBfbGVuc191aV90ZWxlbWV0cnkudHJhY2tVaUV2ZW50KSgnbG9hZGVkJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFkZFRvRGFzaGJvYXJkTW9kZSA9ICEhcm91dGVQcm9wcy5sb2NhdGlvbi5zZWFyY2ggJiYgcm91dGVQcm9wcy5sb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoJ2FkZFRvRGFzaGJvYXJkJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2FwcC5BcHAsIHsKICAgICAgICAgICAgICAgICAgICAgIGNvcmU6IGNvbnRleHQuY29yZSwKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICAgICAgICBlZGl0b3JGcmFtZTogaW5zdGFuY2UsCiAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlOiBuZXcgX3B1YmxpYy5TdG9yYWdlKGxvY2FsU3RvcmFnZSksCiAgICAgICAgICAgICAgICAgICAgICBkb2NJZDogcm91dGVQcm9wcy5tYXRjaC5wYXJhbXMuaWQsCiAgICAgICAgICAgICAgICAgICAgICBkb2NTdG9yYWdlOiBuZXcgX3BlcnNpc3RlbmNlLlNhdmVkT2JqZWN0SW5kZXhTdG9yZShzYXZlZE9iamVjdHNDbGllbnQpLAogICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RUbzogZnVuY3Rpb24gcmVkaXJlY3RUbyhpZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZGlyZWN0VG8ocm91dGVQcm9wcywgYWRkVG9EYXNoYm9hcmRNb2RlLCBpZCk7CiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgYWRkVG9EYXNoYm9hcmRNb2RlOiBhZGRUb0Rhc2hib2FyZE1vZGUKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICgwLCBfcmVhY3REb20ucmVuZGVyKShfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuSTE4blByb3ZpZGVyLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlckRvbS5IYXNoUm91dGVyLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlckRvbS5Td2l0Y2gsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Um91dGVyRG9tLlJvdXRlLCB7CiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgcGF0aDogIi9sZW5zL2VkaXQvOmlkIiwKICAgICAgICAgICAgICAgICAgICByZW5kZXI6IHJlbmRlckVkaXRvcgogICAgICAgICAgICAgICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXJEb20uUm91dGUsIHsKICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBwYXRoOiAiL2xlbnMiLAogICAgICAgICAgICAgICAgICAgIHJlbmRlcjogcmVuZGVyRWRpdG9yCiAgICAgICAgICAgICAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlckRvbS5Sb3V0ZSwgewogICAgICAgICAgICAgICAgICAgIHBhdGg6ICIvbGVucyIsCiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiBOb3RGb3VuZAogICAgICAgICAgICAgICAgICB9KSkpKSwgcGFyYW1zLmVsZW1lbnQpOwogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UudW5tb3VudCgpOwogICAgICAgICAgICAgICAgICAgICgwLCBfcmVhY3REb20udW5tb3VudENvbXBvbmVudEF0Tm9kZSkocGFyYW1zLmVsZW1lbnQpOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic3RhcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KF9yZWYzLCBfcmVmNCkgewogICAgICB2YXIgc2F2ZWRPYmplY3RzID0gX3JlZjMuc2F2ZWRPYmplY3RzOwogICAgICB2YXIgZGF0YSA9IF9yZWY0LmRhdGEsCiAgICAgICAgICBkYXRhU2hpbSA9IF9yZWY0LmRhdGFTaGltOwogICAgICB0aGlzLnN0YXJ0RGVwZW5kZW5jaWVzID0gewogICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgZGF0YVNoaW06IGRhdGFTaGltLAogICAgICAgIHNhdmVkT2JqZWN0c0NsaWVudDogc2F2ZWRPYmplY3RzLmNsaWVudCwKICAgICAgICBlZGl0b3JGcmFtZTogKDAsIF9lZGl0b3JfZnJhbWVfcGx1Z2luLmVkaXRvckZyYW1lU3RhcnQpKCkKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdG9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkgewogICAgICAoMCwgX2xlbnNfdWlfdGVsZW1ldHJ5LnN0b3BSZXBvcnRNYW5hZ2VyKSgpOyAvLyBUT0RPIHRoaXMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBwbHVnaW4gcGxhdGZvcm0gaXRzZWxmCgogICAgICAoMCwgX2luZGV4cGF0dGVybl9wbHVnaW4uaW5kZXhQYXR0ZXJuRGF0YXNvdXJjZVN0b3ApKCk7CiAgICAgICgwLCBfeHlfdmlzdWFsaXphdGlvbl9wbHVnaW4ueHlWaXN1YWxpemF0aW9uU3RvcCkoKTsKICAgICAgKDAsIF9tZXRyaWNfdmlzdWFsaXphdGlvbl9wbHVnaW4ubWV0cmljVmlzdWFsaXphdGlvblN0b3ApKCk7CiAgICAgICgwLCBfZGF0YXRhYmxlX3Zpc3VhbGl6YXRpb25fcGx1Z2luLmRhdGF0YWJsZVZpc3VhbGl6YXRpb25TdG9wKSgpOwogICAgICAoMCwgX2VkaXRvcl9mcmFtZV9wbHVnaW4uZWRpdG9yRnJhbWVTdG9wKSgpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEFwcFBsdWdpbjsKfSgpOwoKZXhwb3J0cy5BcHBQbHVnaW4gPSBBcHBQbHVnaW47"},null]}