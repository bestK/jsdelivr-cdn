{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/timelion/public/panels/timechart/schema.js","dependencies":[{"path":"src/legacy/core_plugins/timelion/public/panels/timechart/schema.js","mtime":1585205040151},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnRpbWVjaGFydEZuID0gdGltZWNoYXJ0Rm47CgpyZXF1aXJlKCIuL2Zsb3QiKTsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX2pxdWVyeSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgianF1ZXJ5IikpOwoKdmFyIF9tb21lbnRUaW1lem9uZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibW9tZW50LXRpbWV6b25lIikpOwoKdmFyIF90aW1lZmlsdGVyID0gcmVxdWlyZSgidWkvdGltZWZpbHRlciIpOwoKdmFyIF9vYnNlcnZlX3Jlc2l6ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vLi4vbGliL29ic2VydmVfcmVzaXplIikpOwoKdmFyIF9saWIgPSByZXF1aXJlKCIuLi8uLi8uLi9jb21tb24vbGliIik7Cgp2YXIgX3RpY2tfZm9ybWF0dGVycyA9IHJlcXVpcmUoIi4uLy4uL3NlcnZpY2VzL3RpY2tfZm9ybWF0dGVycyIpOwoKdmFyIF94YXhpc19mb3JtYXR0ZXIgPSByZXF1aXJlKCIuL3hheGlzX2Zvcm1hdHRlciIpOwoKdmFyIF90aWNrX2dlbmVyYXRvciA9IHJlcXVpcmUoIi4vdGlja19nZW5lcmF0b3IiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KLyoKICogTGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yCiAqIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoCiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0CiAqIG93bmVyc2hpcC4gRWxhc3RpY3NlYXJjaCBCLlYuIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIKICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkKICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICovCi8vIEB0cy1pZ25vcmUKLy8gQHRzLWlnbm9yZQoKCnZhciBERUJPVU5DRV9ERUxBWSA9IDUwOwoKZnVuY3Rpb24gdGltZWNoYXJ0Rm4oZGVwZW5kZW5jaWVzKSB7CiAgdmFyICRyb290U2NvcGUgPSBkZXBlbmRlbmNpZXMuJHJvb3RTY29wZSwKICAgICAgJGNvbXBpbGUgPSBkZXBlbmRlbmNpZXMuJGNvbXBpbGUsCiAgICAgIHVpU2V0dGluZ3MgPSBkZXBlbmRlbmNpZXMudWlTZXR0aW5nczsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgaGVscDogJ0RyYXcgYSB0aW1lc2VyaWVzIGNoYXJ0JywKICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoJHNjb3BlLCAkZWxlbSkgewogICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPSJjaGFydC10b3AtdGl0bGUiPjwvZGl2PjxkaXYgY2xhc3M9ImNoYXJ0LWNhbnZhcyI+PC9kaXY+JzsKICAgICAgICB2YXIgZm9ybWF0dGVycyA9ICgwLCBfdGlja19mb3JtYXR0ZXJzLnRpY2tGb3JtYXR0ZXJzKSgpOwogICAgICAgIHZhciBnZXR4QXhpc0Zvcm1hdHRlciA9ICgwLCBfeGF4aXNfZm9ybWF0dGVyLnhheGlzRm9ybWF0dGVyUHJvdmlkZXIpKHVpU2V0dGluZ3MpOwogICAgICAgIHZhciBnZW5lcmF0ZVRpY2tzID0gKDAsIF90aWNrX2dlbmVyYXRvci5nZW5lcmF0ZVRpY2tzUHJvdmlkZXIpKCk7IC8vIFRPRE86IEkgd29uZGVyIGlmIHdlIHNob3VsZCBzdXBwbHkgb3VyIG93biBtb21lbnQgdGhhdCBzZXRzIHRoaXMgZXZlcnkgdGltZT8KICAgICAgICAvLyBjb3VsZCBqdXN0IHVzZSBhbmd1bGFyJ3MgaW5qZWN0aW9uIHRvIHByb3ZpZGUgYSBtb21lbnQgc2VydmljZT8KCiAgICAgICAgX21vbWVudFRpbWV6b25lLmRlZmF1bHQudHouc2V0RGVmYXVsdCh1aVNldHRpbmdzLmdldCgnZGF0ZUZvcm1hdDp0eicpKTsKCiAgICAgICAgdmFyIHJlbmRlciA9ICRzY29wZS5zZXJpZXNMaXN0LnJlbmRlciB8fCB7fTsKICAgICAgICAkc2NvcGUuY2hhcnQgPSAkc2NvcGUuc2VyaWVzTGlzdC5saXN0OwogICAgICAgICRzY29wZS5pbnRlcnZhbCA9ICRzY29wZS5pbnRlcnZhbDsKICAgICAgICAkc2NvcGUuc2VhcmNoID0gJHNjb3BlLnNlYXJjaCB8fCBfbG9kYXNoLmRlZmF1bHQubm9vcDsKICAgICAgICB2YXIgbGVnZW5kVmFsdWVOdW1iZXJzOwogICAgICAgIHZhciBsZWdlbmRDYXB0aW9uOwoKICAgICAgICB2YXIgZGVib3VuY2VkU2V0TGVnZW5kTnVtYmVycyA9IF9sb2Rhc2guZGVmYXVsdC5kZWJvdW5jZShzZXRMZWdlbmROdW1iZXJzLCBERUJPVU5DRV9ERUxBWSwgewogICAgICAgICAgbWF4V2FpdDogREVCT1VOQ0VfREVMQVksCiAgICAgICAgICBsZWFkaW5nOiB0cnVlLAogICAgICAgICAgdHJhaWxpbmc6IGZhbHNlCiAgICAgICAgfSk7IC8vIGVuc3VyZSBsZWdlbmQgaXMgdGhlIHNhbWUgaGVpZ2h0IHdpdGggb3Igd2l0aG91dCBhIGNhcHRpb24gc28gbGVnZW5kIGl0ZW1zIGRvIG5vdCBtb3ZlIGFyb3VuZAoKCiAgICAgICAgdmFyIGVtcHR5Q2FwdGlvbiA9ICc8YnI+JzsKICAgICAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7CiAgICAgICAgICB4YXhpczogewogICAgICAgICAgICBtb2RlOiAndGltZScsCiAgICAgICAgICAgIHRpY2tMZW5ndGg6IDUsCiAgICAgICAgICAgIHRpbWV6b25lOiAnYnJvd3NlcicKICAgICAgICAgIH0sCiAgICAgICAgICBzZWxlY3Rpb246IHsKICAgICAgICAgICAgbW9kZTogJ3gnLAogICAgICAgICAgICBjb2xvcjogJyNjY2MnCiAgICAgICAgICB9LAogICAgICAgICAgY3Jvc3NoYWlyOiB7CiAgICAgICAgICAgIG1vZGU6ICd4JywKICAgICAgICAgICAgY29sb3I6ICcjQzY2JywKICAgICAgICAgICAgbGluZVdpZHRoOiAyCiAgICAgICAgICB9LAogICAgICAgICAgZ3JpZDogewogICAgICAgICAgICBzaG93OiByZW5kZXIuZ3JpZCwKICAgICAgICAgICAgYm9yZGVyV2lkdGg6IDAsCiAgICAgICAgICAgIGJvcmRlckNvbG9yOiBudWxsLAogICAgICAgICAgICBtYXJnaW46IDEwLAogICAgICAgICAgICBob3ZlcmFibGU6IHRydWUsCiAgICAgICAgICAgIGF1dG9IaWdobGlnaHQ6IGZhbHNlCiAgICAgICAgICB9LAogICAgICAgICAgbGVnZW5kOiB7CiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYigyNTUsMjU1LDI1NSwwKScsCiAgICAgICAgICAgIHBvc2l0aW9uOiAnbncnLAogICAgICAgICAgICBsYWJlbEJveEJvcmRlckNvbG9yOiAncmdiKDI1NSwyNTUsMjU1LDApJywKICAgICAgICAgICAgbGFiZWxGb3JtYXR0ZXI6IGZ1bmN0aW9uIGxhYmVsRm9ybWF0dGVyKGxhYmVsLCBzZXJpZXMpIHsKICAgICAgICAgICAgICB2YXIgd3JhcHBlclNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgdmFyIGxhYmVsU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICB2YXIgbnVtYmVyU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICB3cmFwcGVyU3Bhbi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25nTGVnZW5kVmFsdWUnKTsKICAgICAgICAgICAgICB3cmFwcGVyU3Bhbi5zZXRBdHRyaWJ1dGUoJ2tibi1hY2Nlc3NpYmxlLWNsaWNrJywgJycpOwogICAgICAgICAgICAgIHdyYXBwZXJTcGFuLnNldEF0dHJpYnV0ZSgnbmctY2xpY2snLCAidG9nZ2xlU2VyaWVzKCIuY29uY2F0KHNlcmllcy5faWQsICIpIikpOwogICAgICAgICAgICAgIHdyYXBwZXJTcGFuLnNldEF0dHJpYnV0ZSgnbmctZm9jdXMnLCAiZm9jdXNTZXJpZXMoIi5jb25jYXQoc2VyaWVzLl9pZCwgIikiKSk7CiAgICAgICAgICAgICAgd3JhcHBlclNwYW4uc2V0QXR0cmlidXRlKCduZy1tb3VzZW92ZXInLCAiaGlnaGxpZ2h0U2VyaWVzKCIuY29uY2F0KHNlcmllcy5faWQsICIpIikpOwogICAgICAgICAgICAgIGxhYmVsU3Bhbi5zZXRBdHRyaWJ1dGUoJ25nLW5vbi1iaW5kYWJsZScsICcnKTsKICAgICAgICAgICAgICBsYWJlbFNwYW4uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobGFiZWwpKTsKICAgICAgICAgICAgICBudW1iZXJTcGFuLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbmdMZWdlbmRWYWx1ZU51bWJlcicpOwogICAgICAgICAgICAgIHdyYXBwZXJTcGFuLmFwcGVuZENoaWxkKGxhYmVsU3Bhbik7CiAgICAgICAgICAgICAgd3JhcHBlclNwYW4uYXBwZW5kQ2hpbGQobnVtYmVyU3Bhbik7CiAgICAgICAgICAgICAgcmV0dXJuIHdyYXBwZXJTcGFuLm91dGVySFRNTDsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGNvbG9yczogWycjMDFBNEE0JywgJyNDNjYnLCAnI0QwRDEwMicsICcjNjE2MTYxJywgJyMwMEExQ0InLCAnIzMyNzQyQycsICcjRjE4RDA1JywgJyMxMTNGOEMnLCAnIzYxQUUyNCcsICcjRDcwMDYwJ10KICAgICAgICB9OwogICAgICAgIHZhciBvcmlnaW5hbENvbG9yTWFwID0gbmV3IE1hcCgpOwogICAgICAgICRzY29wZS5jaGFydC5mb3JFYWNoKGZ1bmN0aW9uIChzZXJpZXMsIHNlcmllc0luZGV4KSB7CiAgICAgICAgICBpZiAoIXNlcmllcy5jb2xvcikgewogICAgICAgICAgICB2YXIgY29sb3JJbmRleCA9IHNlcmllc0luZGV4ICUgZGVmYXVsdE9wdGlvbnMuY29sb3JzLmxlbmd0aDsKICAgICAgICAgICAgc2VyaWVzLmNvbG9yID0gZGVmYXVsdE9wdGlvbnMuY29sb3JzW2NvbG9ySW5kZXhdOwogICAgICAgICAgfQoKICAgICAgICAgIG9yaWdpbmFsQ29sb3JNYXAuc2V0KHNlcmllcywgc2VyaWVzLmNvbG9yKTsKICAgICAgICB9KTsKICAgICAgICB2YXIgaGlnaGxpZ2h0ZWRTZXJpZXM7CiAgICAgICAgdmFyIGZvY3VzZWRTZXJpZXM7CgogICAgICAgIGZ1bmN0aW9uIHVuaGlnaGxpZ2h0U2VyaWVzKCkgewogICAgICAgICAgaWYgKGhpZ2hsaWdodGVkU2VyaWVzID09PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBoaWdobGlnaHRlZFNlcmllcyA9IG51bGw7CiAgICAgICAgICBmb2N1c2VkU2VyaWVzID0gbnVsbDsKICAgICAgICAgICRzY29wZS5jaGFydC5mb3JFYWNoKGZ1bmN0aW9uIChzZXJpZXMpIHsKICAgICAgICAgICAgc2VyaWVzLmNvbG9yID0gb3JpZ2luYWxDb2xvck1hcC5nZXQoc2VyaWVzKTsgLy8gcmVzZXQgdGhlIGNvbG9ycwogICAgICAgICAgfSk7CiAgICAgICAgICBkcmF3UGxvdCgkc2NvcGUuY2hhcnQpOwogICAgICAgIH0KCiAgICAgICAgJHNjb3BlLmhpZ2hsaWdodFNlcmllcyA9IF9sb2Rhc2guZGVmYXVsdC5kZWJvdW5jZShmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgIGlmIChoaWdobGlnaHRlZFNlcmllcyA9PT0gaWQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGhpZ2hsaWdodGVkU2VyaWVzID0gaWQ7CiAgICAgICAgICAkc2NvcGUuY2hhcnQuZm9yRWFjaChmdW5jdGlvbiAoc2VyaWVzLCBzZXJpZXNJbmRleCkgewogICAgICAgICAgICBpZiAoc2VyaWVzSW5kZXggIT09IGlkKSB7CiAgICAgICAgICAgICAgc2VyaWVzLmNvbG9yID0gJ3JnYmEoMTI4LDEyOCwxMjgsMC4xKSc7IC8vIG1hcmsgYXMgZ3JleQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHNlcmllcy5jb2xvciA9IG9yaWdpbmFsQ29sb3JNYXAuZ2V0KHNlcmllcyk7IC8vIGNvbG9yIGl0IGxpa2UgaXQgd2FzCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgZHJhd1Bsb3QoJHNjb3BlLmNoYXJ0KTsKICAgICAgICB9LCBERUJPVU5DRV9ERUxBWSk7CgogICAgICAgICRzY29wZS5mb2N1c1NlcmllcyA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgZm9jdXNlZFNlcmllcyA9IGlkOwogICAgICAgICAgJHNjb3BlLmhpZ2hsaWdodFNlcmllcyhpZCk7CiAgICAgICAgfTsKCiAgICAgICAgJHNjb3BlLnRvZ2dsZVNlcmllcyA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgdmFyIHNlcmllcyA9ICRzY29wZS5jaGFydFtpZF07CiAgICAgICAgICBzZXJpZXMuX2hpZGUgPSAhc2VyaWVzLl9oaWRlOwogICAgICAgICAgZHJhd1Bsb3QoJHNjb3BlLmNoYXJ0KTsKICAgICAgICB9OwoKICAgICAgICB2YXIgY2FuY2VsUmVzaXplID0gKDAsIF9vYnNlcnZlX3Jlc2l6ZS5kZWZhdWx0KSgkZWxlbSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgZHJhd1Bsb3QoJHNjb3BlLmNoYXJ0KTsKICAgICAgICB9KTsKICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNhbmNlbFJlc2l6ZSgpOwogICAgICAgICAgJGVsZW0ub2ZmKCdwbG90aG92ZXInKTsKICAgICAgICAgICRlbGVtLm9mZigncGxvdHNlbGVjdGVkJyk7CiAgICAgICAgICAkZWxlbS5vZmYoJ21vdXNlbGVhdmUnKTsKICAgICAgICB9KTsKICAgICAgICAkZWxlbS5vbigncGxvdGhvdmVyJywgZnVuY3Rpb24gKGV2ZW50LCBwb3MsIGl0ZW0pIHsKICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndGltZWxpb25QbG90SG92ZXInLCBldmVudCwgcG9zLCBpdGVtKTsKICAgICAgICB9KTsKICAgICAgICAkZWxlbS5vbigncGxvdHNlbGVjdGVkJywgZnVuY3Rpb24gKGV2ZW50LCByYW5nZXMpIHsKICAgICAgICAgIF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuc2V0VGltZSh7CiAgICAgICAgICAgIGZyb206ICgwLCBfbW9tZW50VGltZXpvbmUuZGVmYXVsdCkocmFuZ2VzLnhheGlzLmZyb20pLAogICAgICAgICAgICB0bzogKDAsIF9tb21lbnRUaW1lem9uZS5kZWZhdWx0KShyYW5nZXMueGF4aXMudG8pCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICAkZWxlbS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndGltZWxpb25QbG90TGVhdmUnKTsKICAgICAgICB9KTsKICAgICAgICAkc2NvcGUuJG9uKCd0aW1lbGlvblBsb3RIb3ZlcicsIGZ1bmN0aW9uIChhbmd1bGFyRXZlbnQsIGZsb3RFdmVudCwgcG9zKSB7CiAgICAgICAgICBpZiAoISRzY29wZS5wbG90KSByZXR1cm47CiAgICAgICAgICAkc2NvcGUucGxvdC5zZXRDcm9zc2hhaXIocG9zKTsKICAgICAgICAgIGRlYm91bmNlZFNldExlZ2VuZE51bWJlcnMocG9zKTsKICAgICAgICB9KTsKICAgICAgICAkc2NvcGUuJG9uKCd0aW1lbGlvblBsb3RMZWF2ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICghJHNjb3BlLnBsb3QpIHJldHVybjsKICAgICAgICAgICRzY29wZS5wbG90LmNsZWFyQ3Jvc3NoYWlyKCk7CiAgICAgICAgICBjbGVhckxlZ2VuZE51bWJlcnMoKTsKICAgICAgICB9KTsgLy8gU2hhbWVsZXNzbHkgYm9ycm93ZWQgZnJvbSB0aGUgZmxvdENyb3NzaGFpcnMgZXhhbXBsZQoKICAgICAgICBmdW5jdGlvbiBzZXRMZWdlbmROdW1iZXJzKHBvcykgewogICAgICAgICAgdW5oaWdobGlnaHRTZXJpZXMoKTsKICAgICAgICAgIHZhciBwbG90ID0gJHNjb3BlLnBsb3Q7CiAgICAgICAgICB2YXIgYXhlcyA9IHBsb3QuZ2V0QXhlcygpOwoKICAgICAgICAgIGlmIChwb3MueCA8IGF4ZXMueGF4aXMubWluIHx8IHBvcy54ID4gYXhlcy54YXhpcy5tYXgpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBpOwogICAgICAgICAgdmFyIGRhdGFzZXQgPSBwbG90LmdldERhdGEoKTsKCiAgICAgICAgICBpZiAobGVnZW5kQ2FwdGlvbikgewogICAgICAgICAgICBsZWdlbmRDYXB0aW9uLnRleHQoKDAsIF9tb21lbnRUaW1lem9uZS5kZWZhdWx0KShwb3MueCkuZm9ybWF0KF9sb2Rhc2guZGVmYXVsdC5nZXQoZGF0YXNldCwgJ1swXS5fZ2xvYmFsLmxlZ2VuZC50aW1lRm9ybWF0JywgX2xpYi5ERUZBVUxUX1RJTUVfRk9STUFUKSkpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKCkgewogICAgICAgICAgICB2YXIgc2VyaWVzID0gZGF0YXNldFtpXTsKICAgICAgICAgICAgdmFyIHVzZU5lYXJlc3RQb2ludCA9IHNlcmllcy5saW5lcy5zaG93ICYmICFzZXJpZXMubGluZXMuc3RlcHM7CgogICAgICAgICAgICB2YXIgcHJlY2lzaW9uID0gX2xvZGFzaC5kZWZhdWx0LmdldChzZXJpZXMsICdfbWV0YS5wcmVjaXNpb24nLCAyKTsKCiAgICAgICAgICAgIGlmIChzZXJpZXMuX2hpZGUpIHJldHVybiAiY29udGludWUiOwogICAgICAgICAgICB2YXIgY3VycmVudFBvaW50ID0gc2VyaWVzLmRhdGEuZmluZChmdW5jdGlvbiAocG9pbnQsIGluZGV4KSB7CiAgICAgICAgICAgICAgaWYgKGluZGV4ICsgMSA9PT0gc2VyaWVzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICh1c2VOZWFyZXN0UG9pbnQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBwb3MueCAtIHBvaW50WzBdIDwgc2VyaWVzLmRhdGFbaW5kZXggKyAxXVswXSAtIHBvcy54OwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcG9zLnggPCBzZXJpZXMuZGF0YVtpbmRleCArIDFdWzBdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciB5ID0gY3VycmVudFBvaW50WzFdOwoKICAgICAgICAgICAgaWYgKHkgIT0gbnVsbCkgewogICAgICAgICAgICAgIHZhciBsYWJlbCA9IHkudG9GaXhlZChwcmVjaXNpb24pOwoKICAgICAgICAgICAgICBpZiAoc2VyaWVzLnlheGlzLnRpY2tGb3JtYXR0ZXIpIHsKICAgICAgICAgICAgICAgIGxhYmVsID0gc2VyaWVzLnlheGlzLnRpY2tGb3JtYXR0ZXIobGFiZWwsIHNlcmllcy55YXhpcyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBsZWdlbmRWYWx1ZU51bWJlcnMuZXEoaSkudGV4dCgiKCIuY29uY2F0KGxhYmVsLCAiKSIpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBsZWdlbmRWYWx1ZU51bWJlcnMuZXEoaSkuZW1wdHkoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YXNldC5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB2YXIgX3JldCA9IF9sb29wKCk7CgogICAgICAgICAgICBpZiAoX3JldCA9PT0gImNvbnRpbnVlIikgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbGVhckxlZ2VuZE51bWJlcnMoKSB7CiAgICAgICAgICBpZiAobGVnZW5kQ2FwdGlvbikgewogICAgICAgICAgICBsZWdlbmRDYXB0aW9uLmh0bWwoZW1wdHlDYXB0aW9uKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfbG9kYXNoLmRlZmF1bHQuZWFjaChsZWdlbmRWYWx1ZU51bWJlcnMsIGZ1bmN0aW9uIChudW0pIHsKICAgICAgICAgICAgKDAsIF9qcXVlcnkuZGVmYXVsdCkobnVtKS5lbXB0eSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgbGVnZW5kU2NvcGUgPSAkc2NvcGUuJG5ldygpOwoKICAgICAgICBmdW5jdGlvbiBkcmF3UGxvdChwbG90Q29uZmlnKSB7CiAgICAgICAgICBpZiAoISgwLCBfanF1ZXJ5LmRlZmF1bHQpKCcuY2hhcnQtY2FudmFzJywgJGVsZW0pLmxlbmd0aCkgJGVsZW0uaHRtbCh0ZW1wbGF0ZSk7CiAgICAgICAgICB2YXIgY2FudmFzRWxlbSA9ICgwLCBfanF1ZXJ5LmRlZmF1bHQpKCcuY2hhcnQtY2FudmFzJywgJGVsZW0pOyAvLyB3ZSBjYW4ndCB1c2UgYCQucGxvdGAgdG8gZHJhdyB0aGUgY2hhcnQgd2hlbiB0aGUgaGVpZ2h0IG9yIHdpZHRoIGlzIDAKICAgICAgICAgIC8vIHNvLCB3ZSdsbCBuZWVkIGFub3RoZXIgZXZlbnQgdG8gdHJpZ2dlciBkcmF3UGxvdCB0byBhY3R1YWxseSBkcmF3IGl0CgogICAgICAgICAgaWYgKGNhbnZhc0VsZW0uaGVpZ2h0KCkgPT09IDAgfHwgY2FudmFzRWxlbS53aWR0aCgpID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgdGl0bGUgPSAoMCwgX2xvZGFzaC5kZWZhdWx0KShwbG90Q29uZmlnKS5tYXAoJ190aXRsZScpLmNvbXBhY3QoKS5sYXN0KCk7CiAgICAgICAgICAoMCwgX2pxdWVyeS5kZWZhdWx0KSgnLmNoYXJ0LXRvcC10aXRsZScsICRlbGVtKS50ZXh0KHRpdGxlID09IG51bGwgPyAnJyA6IHRpdGxlKTsKCiAgICAgICAgICB2YXIgb3B0aW9ucyA9IF9sb2Rhc2guZGVmYXVsdC5jbG9uZURlZXAoZGVmYXVsdE9wdGlvbnMpOyAvLyBHZXQgdGhlIFgtYXhpcyB0aWNrIGZvcm1hdAoKCiAgICAgICAgICB2YXIgdGltZSA9IF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuZ2V0Qm91bmRzKCk7CgogICAgICAgICAgdmFyIGludGVydmFsID0gKDAsIF9saWIuY2FsY3VsYXRlSW50ZXJ2YWwpKHRpbWUubWluLnZhbHVlT2YoKSwgdGltZS5tYXgudmFsdWVPZigpLCB1aVNldHRpbmdzLmdldCgndGltZWxpb246dGFyZ2V0X2J1Y2tldHMnKSB8fCAyMDAsICRzY29wZS5pbnRlcnZhbCwgdWlTZXR0aW5ncy5nZXQoJ3RpbWVsaW9uOm1pbl9pbnRlcnZhbCcpIHx8ICcxbXMnKTsKICAgICAgICAgIHZhciBmb3JtYXQgPSBnZXR4QXhpc0Zvcm1hdHRlcihpbnRlcnZhbCk7IC8vIFVzZSBtb21lbnQgdG8gZm9ybWF0IHRpY2tzIHNvIHdlIGdldCB0aW1lem9uZSBjb3JyZWN0aW9uCgogICAgICAgICAgb3B0aW9ucy54YXhpcy50aWNrRm9ybWF0dGVyID0gZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICByZXR1cm4gKDAsIF9tb21lbnRUaW1lem9uZS5kZWZhdWx0KSh2YWwpLmZvcm1hdChmb3JtYXQpOwogICAgICAgICAgfTsgLy8gQ2FsY3VsYXRlIGhvdyBtYW55IHRpY2tzIGNhbiBmaXQgb24gdGhlIGF4aXMKCgogICAgICAgICAgdmFyIHRpY2tMZXR0ZXJXaWR0aCA9IDc7CiAgICAgICAgICB2YXIgdGlja1BhZGRpbmcgPSA0NTsKICAgICAgICAgIG9wdGlvbnMueGF4aXMudGlja3MgPSBNYXRoLmZsb29yKCRlbGVtLndpZHRoKCkgLyAoZm9ybWF0Lmxlbmd0aCAqIHRpY2tMZXR0ZXJXaWR0aCArIHRpY2tQYWRkaW5nKSk7CgogICAgICAgICAgdmFyIHNlcmllcyA9IF9sb2Rhc2guZGVmYXVsdC5tYXAocGxvdENvbmZpZywgZnVuY3Rpb24gKHNlcmllLCBpbmRleCkgewogICAgICAgICAgICBzZXJpZSA9IF9sb2Rhc2guZGVmYXVsdC5jbG9uZURlZXAoX2xvZGFzaC5kZWZhdWx0LmRlZmF1bHRzKHNlcmllLCB7CiAgICAgICAgICAgICAgc2hhZG93U2l6ZTogMCwKICAgICAgICAgICAgICBsaW5lczogewogICAgICAgICAgICAgICAgbGluZVdpZHRoOiAzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIHNlcmllLl9pZCA9IGluZGV4OwoKICAgICAgICAgICAgaWYgKHNlcmllLmNvbG9yKSB7CiAgICAgICAgICAgICAgdmFyIHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgc3Bhbi5zdHlsZS5jb2xvciA9IHNlcmllLmNvbG9yOwogICAgICAgICAgICAgIHNlcmllLmNvbG9yID0gc3Bhbi5zdHlsZS5jb2xvcjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHNlcmllLl9oaWRlKSB7CiAgICAgICAgICAgICAgc2VyaWUuZGF0YSA9IFtdOwogICAgICAgICAgICAgIHNlcmllLnN0YWNrID0gZmFsc2U7IC8vIHNlcmllLmNvbG9yID0gIiNkZGQiOwoKICAgICAgICAgICAgICBzZXJpZS5sYWJlbCA9ICcoaGlkZGVuKSAnICsgc2VyaWUubGFiZWw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzZXJpZS5fZ2xvYmFsKSB7CiAgICAgICAgICAgICAgX2xvZGFzaC5kZWZhdWx0Lm1lcmdlKG9wdGlvbnMsIHNlcmllLl9nbG9iYWwsIGZ1bmN0aW9uIChvYmpWYWwsIHNyY1ZhbCkgewogICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBraW5kIG9mIGdyb3NzLCBpdCBtZWFucyB0aGF0IHlvdSBjYW4ndCByZXBsYWNlIGEgZ2xvYmFsIHZhbHVlIHdpdGggYSBudWxsCiAgICAgICAgICAgICAgICAvLyBiZXN0IHlvdSBjYW4gZG8gaXMgYW4gZW1wdHkgc3RyaW5nLiBEZWFsIHdpdGggaXQuCiAgICAgICAgICAgICAgICBpZiAob2JqVmFsID09IG51bGwpIHJldHVybiBzcmNWYWw7CiAgICAgICAgICAgICAgICBpZiAoc3JjVmFsID09IG51bGwpIHJldHVybiBvYmpWYWw7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBzZXJpZTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChvcHRpb25zLnlheGVzKSB7CiAgICAgICAgICAgIG9wdGlvbnMueWF4ZXMuZm9yRWFjaChmdW5jdGlvbiAoeWF4aXMpIHsKICAgICAgICAgICAgICBpZiAoeWF4aXMgJiYgeWF4aXMudW5pdHMpIHsKICAgICAgICAgICAgICAgIHlheGlzLnRpY2tGb3JtYXR0ZXIgPSBmb3JtYXR0ZXJzW3lheGlzLnVuaXRzLnR5cGVdOwogICAgICAgICAgICAgICAgdmFyIGJ5dGVNb2RlcyA9IFsnYnl0ZXMnLCAnYnl0ZXMvcyddOwoKICAgICAgICAgICAgICAgIGlmIChieXRlTW9kZXMuaW5jbHVkZXMoeWF4aXMudW5pdHMudHlwZSkpIHsKICAgICAgICAgICAgICAgICAgeWF4aXMudGlja0dlbmVyYXRvciA9IGdlbmVyYXRlVGlja3M7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gLy8gQHRzLWlnbm9yZQoKCiAgICAgICAgICAkc2NvcGUucGxvdCA9IF9qcXVlcnkuZGVmYXVsdC5wbG90KGNhbnZhc0VsZW0sIF9sb2Rhc2guZGVmYXVsdC5jb21wYWN0KHNlcmllcyksIG9wdGlvbnMpOwoKICAgICAgICAgIGlmICgkc2NvcGUucGxvdCkgewogICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ3RpbWVsaW9uQ2hhcnRSZW5kZXJlZCcpOwogICAgICAgICAgfQoKICAgICAgICAgIGxlZ2VuZFNjb3BlLiRkZXN0cm95KCk7CiAgICAgICAgICBsZWdlbmRTY29wZSA9ICRzY29wZS4kbmV3KCk7IC8vIFVzZWQgdG8gdG9nZ2xlIHRoZSBzZXJpZXMsIGFuZCBmb3IgZGlzcGxheWluZyB2YWx1ZXMgb24gaG92ZXIKCiAgICAgICAgICBsZWdlbmRWYWx1ZU51bWJlcnMgPSBjYW52YXNFbGVtLmZpbmQoJy5uZ0xlZ2VuZFZhbHVlTnVtYmVyJyk7CgogICAgICAgICAgX2xvZGFzaC5kZWZhdWx0LmVhY2goY2FudmFzRWxlbS5maW5kKCcubmdMZWdlbmRWYWx1ZScpLCBmdW5jdGlvbiAoZWxlbSkgewogICAgICAgICAgICAkY29tcGlsZShlbGVtKShsZWdlbmRTY29wZSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoX2xvZGFzaC5kZWZhdWx0LmdldCgkc2NvcGUucGxvdC5nZXREYXRhKCksICdbMF0uX2dsb2JhbC5sZWdlbmQuc2hvd1RpbWUnLCB0cnVlKSkgewogICAgICAgICAgICBsZWdlbmRDYXB0aW9uID0gKDAsIF9qcXVlcnkuZGVmYXVsdCkoJzxjYXB0aW9uIGNsYXNzPSJ0aW1DaGFydF9fbGVnZW5kQ2FwdGlvbiI+PC9jYXB0aW9uPicpOwogICAgICAgICAgICBsZWdlbmRDYXB0aW9uLmh0bWwoZW1wdHlDYXB0aW9uKTsKICAgICAgICAgICAgY2FudmFzRWxlbS5maW5kKCdkaXYubGVnZW5kIHRhYmxlJykuYXBwZW5kKGxlZ2VuZENhcHRpb24pOyAvLyBsZWdlbmQgaGFzIGJlZW4gcmUtY3JlYXRlZC4gQXBwbHkgZm9jdXMgb24gbGVnZW5kIGVsZW1lbnQgd2hlbiBwcmV2aW91c2x5IHNldAoKICAgICAgICAgICAgaWYgKGZvY3VzZWRTZXJpZXMgfHwgZm9jdXNlZFNlcmllcyA9PT0gMCkgewogICAgICAgICAgICAgIHZhciAkbGVnZW5kTGFiZWxzID0gY2FudmFzRWxlbS5maW5kKCdkaXYubGVnZW5kIHRhYmxlIC5sZWdlbmRMYWJlbD5zcGFuJyk7CiAgICAgICAgICAgICAgJGxlZ2VuZExhYmVscy5nZXQoZm9jdXNlZFNlcmllcykuZm9jdXMoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJHNjb3BlLiR3YXRjaCgnY2hhcnQnLCBkcmF3UGxvdCk7CiAgICAgIH0KICAgIH07CiAgfTsKfQ=="},null]}