{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/spaces/public/spaces_manager/spaces_manager.js","dependencies":[{"path":"x-pack/legacy/plugins/spaces/public/spaces_manager/spaces_manager.js","mtime":1585205048491},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlNwYWNlc01hbmFnZXIgPSB2b2lkIDA7Cgp2YXIgX3J4anMgPSByZXF1aXJlKCJyeGpzIik7Cgp2YXIgX29wZXJhdG9ycyA9IHJlcXVpcmUoInJ4anMvb3BlcmF0b3JzIik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uL2NvbW1vbi9jb25zdGFudHMiKTsKCnZhciBfY29tbW9uID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9zcGFjZXMvY29tbW9uIik7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIFNwYWNlc01hbmFnZXIgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTcGFjZXNNYW5hZ2VyKHNlcnZlckJhc2VQYXRoLCBodHRwKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3BhY2VzTWFuYWdlcik7CgogICAgdGhpcy5zZXJ2ZXJCYXNlUGF0aCA9IHNlcnZlckJhc2VQYXRoOwogICAgdGhpcy5odHRwID0gaHR0cDsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImFjdGl2ZVNwYWNlJCIsIG5ldyBfcnhqcy5CZWhhdmlvclN1YmplY3QobnVsbCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAib25BY3RpdmVTcGFjZUNoYW5nZSQiLCB2b2lkIDApOwoKICAgIHRoaXMub25BY3RpdmVTcGFjZUNoYW5nZSQgPSB0aGlzLmFjdGl2ZVNwYWNlJC5hc09ic2VydmFibGUoKS5waXBlKCgwLCBfb3BlcmF0b3JzLnNraXBXaGlsZSkoZnVuY3Rpb24gKHYpIHsKICAgICAgcmV0dXJuIHYgPT0gbnVsbDsKICAgIH0pKTsKICAgIHRoaXMucmVmcmVzaEFjdGl2ZVNwYWNlKCk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoU3BhY2VzTWFuYWdlciwgW3sKICAgIGtleTogImdldFNwYWNlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3BhY2VzKHB1cnBvc2UpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRTcGFjZXMkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5odHRwLmdldCgnL2FwaS9zcGFjZXMvc3BhY2UnLCB7CiAgICAgICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgICAgICBwdXJwb3NlOiBwdXJwb3NlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRTcGFjZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3BhY2UoaWQpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRTcGFjZSQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5odHRwLmdldCgiL2FwaS9zcGFjZXMvc3BhY2UvIi5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KGlkKSkpKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyLnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0QWN0aXZlU3BhY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFjdGl2ZVNwYWNlKCkgewogICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sCiAgICAgICAgICBfcmVmJGZvcmNlUmVmcmVzaCA9IF9yZWYuZm9yY2VSZWZyZXNoLAogICAgICAgICAgZm9yY2VSZWZyZXNoID0gX3JlZiRmb3JjZVJlZnJlc2ggPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRmb3JjZVJlZnJlc2g7CgogICAgICBpZiAodGhpcy5pc0Fub255bW91c1BhdGgoKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2Fubm90IHJldHJpZXZlIHRoZSBhY3RpdmUgc3BhY2UgZm9yIGFub255bW91cyBwYXRocyIpOwogICAgICB9CgogICAgICBpZiAoIWZvcmNlUmVmcmVzaCAmJiB0aGlzLmFjdGl2ZVNwYWNlJC52YWx1ZSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5hY3RpdmVTcGFjZSQudmFsdWUpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5odHRwLmdldCgnL2ludGVybmFsL3NwYWNlcy9fYWN0aXZlX3NwYWNlJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlU3BhY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVNwYWNlKHNwYWNlKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gY3JlYXRlU3BhY2UkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuaHR0cC5wb3N0KCIvYXBpL3NwYWNlcy9zcGFjZSIsIHsKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHNwYWNlKQogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVNwYWNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVTcGFjZShzcGFjZSkgewogICAgICB2YXIgYWN0aXZlU3BhY2VJZDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiB1cGRhdGVTcGFjZSQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5odHRwLnB1dCgiL2FwaS9zcGFjZXMvc3BhY2UvIi5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHNwYWNlLmlkKSksIHsKICAgICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICAgIG92ZXJ3cml0ZTogdHJ1ZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHNwYWNlKQogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLmdldEFjdGl2ZVNwYWNlKCkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGFjdGl2ZVNwYWNlSWQgPSBfY29udGV4dDQuc2VudC5pZDsKCiAgICAgICAgICAgICAgaWYgKHNwYWNlLmlkID09PSBhY3RpdmVTcGFjZUlkKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hBY3RpdmVTcGFjZSgpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImRlbGV0ZVNwYWNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVTcGFjZShzcGFjZSkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGRlbGV0ZVNwYWNlJChfY29udGV4dDUpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLmh0dHAuZGVsZXRlKCIvYXBpL3NwYWNlcy9zcGFjZS8iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoc3BhY2UuaWQpKSkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29weVNhdmVkT2JqZWN0cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29weVNhdmVkT2JqZWN0cyhvYmplY3RzLCBzcGFjZXMsIGluY2x1ZGVSZWZlcmVuY2VzLCBvdmVyd3JpdGUpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjb3B5U2F2ZWRPYmplY3RzJChfY29udGV4dDYpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgdGhpcy5odHRwLnBvc3QoJy9hcGkvc3BhY2VzL19jb3B5X3NhdmVkX29iamVjdHMnLCB7CiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgIG9iamVjdHM6IG9iamVjdHMsCiAgICAgICAgICAgICAgICAgIHNwYWNlczogc3BhY2VzLAogICAgICAgICAgICAgICAgICBpbmNsdWRlUmVmZXJlbmNlczogaW5jbHVkZVJlZmVyZW5jZXMsCiAgICAgICAgICAgICAgICAgIG92ZXJ3cml0ZTogb3ZlcndyaXRlCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlc29sdmVDb3B5U2F2ZWRPYmplY3RzRXJyb3JzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNvbHZlQ29weVNhdmVkT2JqZWN0c0Vycm9ycyhvYmplY3RzLCByZXRyaWVzLCBpbmNsdWRlUmVmZXJlbmNlcykgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJlc29sdmVDb3B5U2F2ZWRPYmplY3RzRXJyb3JzJChfY29udGV4dDcpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgdGhpcy5odHRwLnBvc3QoIi9hcGkvc3BhY2VzL19yZXNvbHZlX2NvcHlfc2F2ZWRfb2JqZWN0c19lcnJvcnMiLCB7CiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgIG9iamVjdHM6IG9iamVjdHMsCiAgICAgICAgICAgICAgICAgIGluY2x1ZGVSZWZlcmVuY2VzOiBpbmNsdWRlUmVmZXJlbmNlcywKICAgICAgICAgICAgICAgICAgcmV0cmllczogcmV0cmllcwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjaGFuZ2VTZWxlY3RlZFNwYWNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VTZWxlY3RlZFNwYWNlKHNwYWNlKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gY2hhbmdlU2VsZWN0ZWRTcGFjZSQoX2NvbnRleHQ4KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAoMCwgX2NvbW1vbi5hZGRTcGFjZUlkVG9QYXRoKSh0aGlzLnNlcnZlckJhc2VQYXRoLCBzcGFjZS5pZCwgX2NvbnN0YW50cy5FTlRFUl9TUEFDRV9QQVRIKTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlZGlyZWN0VG9TcGFjZVNlbGVjdG9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWRpcmVjdFRvU3BhY2VTZWxlY3RvcigpIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiIi5jb25jYXQodGhpcy5zZXJ2ZXJCYXNlUGF0aCwgIi9zcGFjZXMvc3BhY2Vfc2VsZWN0b3IiKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWZyZXNoQWN0aXZlU3BhY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2hBY3RpdmVTcGFjZSgpIHsKICAgICAgdmFyIGFjdGl2ZVNwYWNlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJlZnJlc2hBY3RpdmVTcGFjZSQoX2NvbnRleHQ5KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQW5vbnltb3VzUGF0aCgpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLmdldEFjdGl2ZVNwYWNlKHsKICAgICAgICAgICAgICAgIGZvcmNlUmVmcmVzaDogdHJ1ZQogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBhY3RpdmVTcGFjZSA9IF9jb250ZXh0OS5zZW50OwogICAgICAgICAgICAgIHRoaXMuYWN0aXZlU3BhY2UkLm5leHQoYWN0aXZlU3BhY2UpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNBbm9ueW1vdXNQYXRoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0Fub255bW91c1BhdGgoKSB7CiAgICAgIHJldHVybiB0aGlzLmh0dHAuYW5vbnltb3VzUGF0aHMuaXNBbm9ueW1vdXMod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBTcGFjZXNNYW5hZ2VyOwp9KCk7CgpleHBvcnRzLlNwYWNlc01hbmFnZXIgPSBTcGFjZXNNYW5hZ2VyOw=="},null]}