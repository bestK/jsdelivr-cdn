{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/agg_types/buckets/_terms_other_bucket_helper.js","dependencies":[{"path":"src/legacy/ui/public/agg_types/buckets/_terms_other_bucket_helper.js","mtime":1585205040747},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnVwZGF0ZU1pc3NpbmdCdWNrZXQgPSBleHBvcnRzLm1lcmdlT3RoZXJCdWNrZXRBZ2dSZXNwb25zZSA9IGV4cG9ydHMuYnVpbGRPdGhlckJ1Y2tldEFnZyA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX2FnZ19ncm91cHMgPSByZXF1aXJlKCIuLi8uLi92aXMvZWRpdG9ycy9kZWZhdWx0L2FnZ19ncm91cHMiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9kYXRhL3B1YmxpYyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCi8qKgogKiB3YWxrcyB0aGUgYWdncmVnYXRpb24gRFNMIGFuZCByZXR1cm5zIERTTCBzdGFydGluZyBhdCBhZ2dyZWdhdGlvbiB3aXRoIGlkIG9mIHN0YXJ0RnJvbUFnZ0lkCiAqIEBwYXJhbSBhZ2dOZXN0ZWREc2w6IGFnZ3JlZ2F0aW9uIGNvbmZpZyBEU0wgKHRvcCBsZXZlbCkKICogQHBhcmFtIHN0YXJ0RnJvbUlkOiBpZCBvZiBhbiBhZ2dyZWdhdGlvbiBmcm9tIHdoZXJlIHdlIHdhbnQgdG8gZ2V0IHRoZSBuZXN0ZWQgRFNMCiAqLwp2YXIgZ2V0TmVzdGVkQWdnRFNMID0gZnVuY3Rpb24gZ2V0TmVzdGVkQWdnRFNMKGFnZ05lc3RlZERzbCwgc3RhcnRGcm9tQWdnSWQpIHsKICBpZiAoYWdnTmVzdGVkRHNsW3N0YXJ0RnJvbUFnZ0lkXSkgewogICAgcmV0dXJuIGFnZ05lc3RlZERzbFtzdGFydEZyb21BZ2dJZF07CiAgfQoKICB2YXIgbmVzdGVkQWdncyA9IF9sb2Rhc2guZGVmYXVsdC52YWx1ZXMoYWdnTmVzdGVkRHNsKTsKCiAgdmFyIGFnZ3M7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgbmVzdGVkQWdncy5sZW5ndGg7IGkrKykgewogICAgaWYgKG5lc3RlZEFnZ3NbaV0uYWdncyAmJiAoYWdncyA9IGdldE5lc3RlZEFnZ0RTTChuZXN0ZWRBZ2dzW2ldLmFnZ3MsIHN0YXJ0RnJvbUFnZ0lkKSkpIHsKICAgICAgcmV0dXJuIGFnZ3M7CiAgICB9CiAgfQp9OwovKioKICogcmV0dXJucyBidWNrZXRzIGZyb20gcmVzcG9uc2UgZm9yIGEgc3BlY2lmaWMgb3RoZXIgYnVja2V0CiAqIEBwYXJhbSBhZ2dDb25maWdzOiBjb25maWd1cmF0aW9uIGZvciB0aGUgYWdncmVnYXRpb25zCiAqIEBwYXJhbSByZXNwb25zZTogcmVzcG9uc2UgZnJvbSBlbGFzdGljc2VhcmNoCiAqIEBwYXJhbSBhZ2dXaXRoT3RoZXJCdWNrZXQ6IEFnZ0NvbmZpZyBvZiB0aGUgYWdncmVnYXRpb24gd2l0aCBvdGhlciBidWNrZXQgZW5hYmxlZAogKiBAcGFyYW0ga2V5OiBrZXkgZnJvbSB0aGUgb3RoZXIgYnVja2V0IHJlcXVlc3QgZm9yIGEgc3BlY2lmaWMgb3RoZXIgYnVja2V0CiAqLwoKCnZhciBnZXRBZ2dSZXN1bHRCdWNrZXRzID0gZnVuY3Rpb24gZ2V0QWdnUmVzdWx0QnVja2V0cyhhZ2dDb25maWdzLCByZXNwb25zZSwgYWdnV2l0aE90aGVyQnVja2V0LCBrZXkpIHsKICB2YXIga2V5UGFydHMgPSBrZXkuc3BsaXQoJy0nKTsKICB2YXIgcmVzcG9uc2VBZ2cgPSByZXNwb25zZTsKCiAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkgewogICAgaWYgKGtleVBhcnRzW2ldKSB7CiAgICAgIHZhciByZXNwb25zZUFnZ3MgPSBfbG9kYXNoLmRlZmF1bHQudmFsdWVzKHJlc3BvbnNlQWdnKTsgLy8gSWYgeW91IGhhdmUgbXVsdGkgYWdncywgd2UgY2Fubm90IGp1c3QgYXNzdW1lIHRoZSBmaXJzdCBvbmUgaXMgdGhlIGBvdGhlcmAgYnVja2V0LAogICAgICAvLyBzbyB3ZSBuZWVkIHRvIGxvb3Agb3ZlciBlYWNoIGFnZyB1bnRpbCB3ZSBmaW5kIGl0LgoKCiAgICAgIHZhciBfbG9vcDIgPSBmdW5jdGlvbiBfbG9vcDIoYWdnSWQpIHsKICAgICAgICB2YXIgYWdnID0gcmVzcG9uc2VBZ2dzW2FnZ0lkXTsKCiAgICAgICAgdmFyIGFnZ0tleSA9IF9sb2Rhc2guZGVmYXVsdC5rZXlzKHJlc3BvbnNlQWdnKVthZ2dJZF07CgogICAgICAgIHZhciBhZ2dDb25maWcgPSBfbG9kYXNoLmRlZmF1bHQuZmluZChhZ2dDb25maWdzLmFnZ3MsIGZ1bmN0aW9uIChhZ2cpIHsKICAgICAgICAgIHJldHVybiBhZ2cuaWQgPT09IGFnZ0tleTsKICAgICAgICB9KTsKCiAgICAgICAgdmFyIGJ1Y2tldCA9IF9sb2Rhc2guZGVmYXVsdC5maW5kKGFnZy5idWNrZXRzLCBmdW5jdGlvbiAoYnVja2V0LCBidWNrZXRPYmpLZXkpIHsKICAgICAgICAgIHZhciBidWNrZXRLZXkgPSBhZ2dDb25maWcuZ2V0S2V5KGJ1Y2tldCwgTnVtYmVyLmlzSW50ZWdlcihidWNrZXRPYmpLZXkpID8gbnVsbCA6IGJ1Y2tldE9iaktleSkudG9TdHJpbmcoKTsKICAgICAgICAgIHJldHVybiBidWNrZXRLZXkgPT09IGtleVBhcnRzW2ldOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoYnVja2V0KSB7CiAgICAgICAgICByZXNwb25zZUFnZyA9IGJ1Y2tldDsKICAgICAgICAgIHJldHVybiAiYnJlYWsiOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGZvciAodmFyIGFnZ0lkID0gMDsgYWdnSWQgPCByZXNwb25zZUFnZ3MubGVuZ3RoOyBhZ2dJZCsrKSB7CiAgICAgICAgdmFyIF9yZXQgPSBfbG9vcDIoYWdnSWQpOwoKICAgICAgICBpZiAoX3JldCA9PT0gImJyZWFrIikgYnJlYWs7CiAgICAgIH0KICAgIH0KICB9OwoKICBmb3IgKHZhciBpIGluIGtleVBhcnRzKSB7CiAgICBfbG9vcChpKTsKICB9CgogIGlmIChyZXNwb25zZUFnZ1thZ2dXaXRoT3RoZXJCdWNrZXQuaWRdKSB7CiAgICByZXR1cm4gcmVzcG9uc2VBZ2dbYWdnV2l0aE90aGVyQnVja2V0LmlkXS5idWNrZXRzOwogIH0KCiAgcmV0dXJuIFtdOwp9OwovKioKICogZ2V0cyBhbGwgdGhlIG1pc3NpbmcgYnVja2V0cyBpbiBvdXIgcmVzcG9uc2UgZm9yIGEgc3BlY2lmaWMgYWdncmVnYXRpb24gaWQKICogQHBhcmFtIHJlc3BvbnNlQWdnczogYXJyYXkgb2YgYWdncmVnYXRpb25zIGZyb20gcmVzcG9uc2UKICogQHBhcmFtIGFnZ0lkOiBpZCBvZiB0aGUgYWdncmVnYXRpb24gd2l0aCBtaXNzaW5nIGJ1Y2tldAogKi8KCgp2YXIgZ2V0QWdnQ29uZmlnUmVzdWx0TWlzc2luZ0J1Y2tldHMgPSBmdW5jdGlvbiBnZXRBZ2dDb25maWdSZXN1bHRNaXNzaW5nQnVja2V0cyhyZXNwb25zZUFnZ3MsIGFnZ0lkKSB7CiAgdmFyIG1pc3NpbmdLZXkgPSAnX19taXNzaW5nX18nOwogIHZhciByZXN1bHRCdWNrZXRzID0gW107CgogIGlmIChyZXNwb25zZUFnZ3NbYWdnSWRdKSB7CiAgICB2YXIgbWF0Y2hpbmdCdWNrZXQgPSByZXNwb25zZUFnZ3NbYWdnSWRdLmJ1Y2tldHMuZmluZChmdW5jdGlvbiAoYnVja2V0KSB7CiAgICAgIHJldHVybiBidWNrZXQua2V5ID09PSBtaXNzaW5nS2V5OwogICAgfSk7CiAgICBpZiAobWF0Y2hpbmdCdWNrZXQpIHJlc3VsdEJ1Y2tldHMucHVzaChtYXRjaGluZ0J1Y2tldCk7CiAgICByZXR1cm4gcmVzdWx0QnVja2V0czsKICB9CgogIF9sb2Rhc2guZGVmYXVsdC5lYWNoKHJlc3BvbnNlQWdncywgZnVuY3Rpb24gKGFnZykgewogICAgaWYgKGFnZy5idWNrZXRzKSB7CiAgICAgIF9sb2Rhc2guZGVmYXVsdC5lYWNoKGFnZy5idWNrZXRzLCBmdW5jdGlvbiAoYnVja2V0KSB7CiAgICAgICAgcmVzdWx0QnVja2V0cyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVzdWx0QnVja2V0cyksIF90b0NvbnN1bWFibGVBcnJheShnZXRBZ2dDb25maWdSZXN1bHRNaXNzaW5nQnVja2V0cyhidWNrZXQsIGFnZ0lkLCBtaXNzaW5nS2V5KSkpOwogICAgICB9KTsKICAgIH0KICB9KTsKCiAgcmV0dXJuIHJlc3VsdEJ1Y2tldHM7Cn07Ci8qKgogKiBnZXRzIGFsbCB0aGUgdGVybXMgdGhhdCBhcmUgTk9UIGluIHRoZSBvdGhlciBidWNrZXQKICogQHBhcmFtIHJlcXVlc3RBZ2c6IGFuIGFnZ3JlZ2F0aW9uIHdlIGFyZSBsb29raW5nIGF0CiAqIEBwYXJhbSBrZXk6IHRoZSBrZXkgZm9yIHRoaXMgc3BlY2lmaWMgb3RoZXIgYnVja2V0CiAqIEBwYXJhbSBvdGhlckFnZzogQWdnQ29uZmlnIG9mIHRoZSBhZ2dyZWdhdGlvbiB3aXRoIG90aGVyIGJ1Y2tldAogKi8KCgp2YXIgZ2V0T3RoZXJBZ2dUZXJtcyA9IGZ1bmN0aW9uIGdldE90aGVyQWdnVGVybXMocmVxdWVzdEFnZywga2V5LCBvdGhlckFnZykgewogIHJldHVybiByZXF1ZXN0QWdnWydvdGhlci1maWx0ZXInXS5maWx0ZXJzLmZpbHRlcnNba2V5XS5ib29sLm11c3Rfbm90LmZpbHRlcihmdW5jdGlvbiAoZmlsdGVyKSB7CiAgICByZXR1cm4gZmlsdGVyLm1hdGNoX3BocmFzZSAmJiBmaWx0ZXIubWF0Y2hfcGhyYXNlW290aGVyQWdnLnBhcmFtcy5maWVsZC5uYW1lXTsKICB9KS5tYXAoZnVuY3Rpb24gKGZpbHRlcikgewogICAgcmV0dXJuIGZpbHRlci5tYXRjaF9waHJhc2Vbb3RoZXJBZ2cucGFyYW1zLmZpZWxkLm5hbWVdOwogIH0pOwp9OwoKdmFyIGJ1aWxkT3RoZXJCdWNrZXRBZ2cgPSBmdW5jdGlvbiBidWlsZE90aGVyQnVja2V0QWdnKGFnZ0NvbmZpZ3MsIGFnZ1dpdGhPdGhlckJ1Y2tldCwgcmVzcG9uc2UpIHsKICB2YXIgYnVja2V0QWdncyA9IGFnZ0NvbmZpZ3MuYWdncy5maWx0ZXIoZnVuY3Rpb24gKGFnZykgewogICAgcmV0dXJuIGFnZy50eXBlLnR5cGUgPT09IF9hZ2dfZ3JvdXBzLkFnZ0dyb3VwTmFtZXMuQnVja2V0czsKICB9KTsKICB2YXIgaW5kZXggPSBidWNrZXRBZ2dzLmZpbmRJbmRleChmdW5jdGlvbiAoYWdnKSB7CiAgICByZXR1cm4gYWdnLmlkID09PSBhZ2dXaXRoT3RoZXJCdWNrZXQuaWQ7CiAgfSk7CiAgdmFyIGFnZ3MgPSBhZ2dDb25maWdzLnRvRHNsKCk7CiAgdmFyIGluZGV4UGF0dGVybiA9IGFnZ1dpdGhPdGhlckJ1Y2tldC5wYXJhbXMuZmllbGQuaW5kZXhQYXR0ZXJuOyAvLyBjcmVhdGUgZmlsdGVycyBhZ2dyZWdhdGlvbgoKICB2YXIgZmlsdGVyQWdnID0gYWdnQ29uZmlncy5jcmVhdGVBZ2dDb25maWcoewogICAgdHlwZTogJ2ZpbHRlcnMnLAogICAgaWQ6ICdvdGhlcicsCiAgICBwYXJhbXM6IHsKICAgICAgZmlsdGVyczogW10KICAgIH0KICB9LCB7CiAgICBhZGRUb0FnZ0NvbmZpZ3M6IGZhbHNlCiAgfSk7IC8vIG5lc3QgYWxsIHRoZSBjaGlsZCBhZ2dyZWdhdGlvbnMgb2YgYWdnV2l0aE90aGVyQnVja2V0CgogIHZhciByZXN1bHRBZ2cgPSB7CiAgICBhZ2dzOiBnZXROZXN0ZWRBZ2dEU0woYWdncywgYWdnV2l0aE90aGVyQnVja2V0LmlkKS5hZ2dzLAogICAgZmlsdGVyczogZmlsdGVyQWdnLnRvRHNsKCkKICB9OwogIHZhciBub0FnZ0J1Y2tldFJlc3VsdHMgPSBmYWxzZTsgLy8gcmVjdXJzaXZlbHkgY3JlYXRlIGZpbHRlcnMgZm9yIGFsbCBwYXJlbnQgYWdncmVnYXRpb24gYnVja2V0cwoKICB2YXIgd2Fsa0J1Y2tldFRyZWUgPSBmdW5jdGlvbiB3YWxrQnVja2V0VHJlZShhZ2dJbmRleCwgYWdncywgYWdnSWQsIGZpbHRlcnMsIGtleSkgewogICAgLy8gbWFrZSBzdXJlIHRoZXJlIGFyZSBhY3R1YWxseSByZXN1bHRzIGZvciB0aGUgYnVja2V0cwogICAgaWYgKGFnZ3NbYWdnSWRdLmJ1Y2tldHMubGVuZ3RoIDwgMSkgewogICAgICBub0FnZ0J1Y2tldFJlc3VsdHMgPSB0cnVlOwogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGFnZyA9IGFnZ3NbYWdnSWRdOwogICAgdmFyIG5ld0FnZ0luZGV4ID0gYWdnSW5kZXggKyAxOwogICAgdmFyIG5ld0FnZyA9IGJ1Y2tldEFnZ3NbbmV3QWdnSW5kZXhdOwogICAgdmFyIGN1cnJlbnRBZ2cgPSBidWNrZXRBZ2dzW2FnZ0luZGV4XTsKCiAgICBpZiAoYWdnSW5kZXggPCBpbmRleCkgewogICAgICBfbG9kYXNoLmRlZmF1bHQuZWFjaChhZ2cuYnVja2V0cywgZnVuY3Rpb24gKGJ1Y2tldCwgYnVja2V0T2JqS2V5KSB7CiAgICAgICAgdmFyIGJ1Y2tldEtleSA9IGN1cnJlbnRBZ2cuZ2V0S2V5KGJ1Y2tldCwgTnVtYmVyLmlzSW50ZWdlcihidWNrZXRPYmpLZXkpID8gbnVsbCA6IGJ1Y2tldE9iaktleSk7CiAgICAgICAgdmFyIGZpbHRlciA9IF9sb2Rhc2guZGVmYXVsdC5jbG9uZURlZXAoYnVja2V0LmZpbHRlcnMpIHx8IGN1cnJlbnRBZ2cuY3JlYXRlRmlsdGVyKGJ1Y2tldEtleSk7CgogICAgICAgIHZhciBuZXdGaWx0ZXJzID0gX2xvZGFzaC5kZWZhdWx0LmZsYXR0ZW4oW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShmaWx0ZXJzKSwgW2ZpbHRlcl0pKTsKCiAgICAgICAgd2Fsa0J1Y2tldFRyZWUobmV3QWdnSW5kZXgsIGJ1Y2tldCwgbmV3QWdnLmlkLCBuZXdGaWx0ZXJzLCAiIi5jb25jYXQoa2V5LCAiLSIpLmNvbmNhdChidWNrZXRLZXkudG9TdHJpbmcoKSkpOwogICAgICB9KTsKCiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoIWFnZ1dpdGhPdGhlckJ1Y2tldC5wYXJhbXMubWlzc2luZ0J1Y2tldCB8fCBhZ2cuYnVja2V0cy5zb21lKGZ1bmN0aW9uIChidWNrZXQpIHsKICAgICAgcmV0dXJuIGJ1Y2tldC5rZXkgPT09ICdfX21pc3NpbmdfXyc7CiAgICB9KSkgewogICAgICBmaWx0ZXJzLnB1c2goX3B1YmxpYy5lc0ZpbHRlcnMuYnVpbGRFeGlzdHNGaWx0ZXIoYWdnV2l0aE90aGVyQnVja2V0LnBhcmFtcy5maWVsZCwgYWdnV2l0aE90aGVyQnVja2V0LnBhcmFtcy5maWVsZC5pbmRleFBhdHRlcm4pKTsKICAgIH0gLy8gY3JlYXRlIG5vdCBmaWx0ZXJzIGZvciBhbGwgdGhlIGJ1Y2tldHMKCgogICAgX2xvZGFzaC5kZWZhdWx0LmVhY2goYWdnLmJ1Y2tldHMsIGZ1bmN0aW9uIChidWNrZXQpIHsKICAgICAgaWYgKGJ1Y2tldC5rZXkgPT09ICdfX21pc3NpbmdfXycpIHJldHVybjsKICAgICAgdmFyIGZpbHRlciA9IGN1cnJlbnRBZ2cuY3JlYXRlRmlsdGVyKGJ1Y2tldC5rZXkpOwogICAgICBmaWx0ZXIubWV0YS5uZWdhdGUgPSB0cnVlOwogICAgICBmaWx0ZXJzLnB1c2goZmlsdGVyKTsKICAgIH0pOwoKICAgIHJlc3VsdEFnZy5maWx0ZXJzLmZpbHRlcnNba2V5XSA9IHsKICAgICAgYm9vbDogX3B1YmxpYy5lc1F1ZXJ5LmJ1aWxkUXVlcnlGcm9tRmlsdGVycyhmaWx0ZXJzLCBpbmRleFBhdHRlcm4pCiAgICB9OwogIH07CgogIHdhbGtCdWNrZXRUcmVlKDAsIHJlc3BvbnNlLmFnZ3JlZ2F0aW9ucywgYnVja2V0QWdnc1swXS5pZCwgW10sICcnKTsgLy8gYmFpbCBpZiB0aGVyZSB3ZXJlIG5vIGJ1Y2tldCByZXN1bHRzCgogIGlmIChub0FnZ0J1Y2tldFJlc3VsdHMpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICAnb3RoZXItZmlsdGVyJzogcmVzdWx0QWdnCiAgICB9OwogIH07Cn07CgpleHBvcnRzLmJ1aWxkT3RoZXJCdWNrZXRBZ2cgPSBidWlsZE90aGVyQnVja2V0QWdnOwoKdmFyIG1lcmdlT3RoZXJCdWNrZXRBZ2dSZXNwb25zZSA9IGZ1bmN0aW9uIG1lcmdlT3RoZXJCdWNrZXRBZ2dSZXNwb25zZShhZ2dzQ29uZmlnLCByZXNwb25zZSwgb3RoZXJSZXNwb25zZSwgb3RoZXJBZ2csIHJlcXVlc3RBZ2cpIHsKICB2YXIgdXBkYXRlZFJlc3BvbnNlID0gX2xvZGFzaC5kZWZhdWx0LmNsb25lRGVlcChyZXNwb25zZSk7CgogIF9sb2Rhc2guZGVmYXVsdC5lYWNoKG90aGVyUmVzcG9uc2UuYWdncmVnYXRpb25zWydvdGhlci1maWx0ZXInXS5idWNrZXRzLCBmdW5jdGlvbiAoYnVja2V0LCBrZXkpIHsKICAgIGlmICghYnVja2V0LmRvY19jb3VudCkgcmV0dXJuOwogICAgdmFyIGJ1Y2tldEtleSA9IGtleS5yZXBsYWNlKC9eLS8sICcnKTsKICAgIHZhciBhZ2dSZXN1bHRCdWNrZXRzID0gZ2V0QWdnUmVzdWx0QnVja2V0cyhhZ2dzQ29uZmlnLCB1cGRhdGVkUmVzcG9uc2UuYWdncmVnYXRpb25zLCBvdGhlckFnZywgYnVja2V0S2V5KTsKICAgIHZhciByZXF1ZXN0RmlsdGVyVGVybXMgPSBnZXRPdGhlckFnZ1Rlcm1zKHJlcXVlc3RBZ2csIGtleSwgb3RoZXJBZ2cpOwoKICAgIHZhciBwaHJhc2VGaWx0ZXIgPSBfcHVibGljLmVzRmlsdGVycy5idWlsZFBocmFzZXNGaWx0ZXIob3RoZXJBZ2cucGFyYW1zLmZpZWxkLCByZXF1ZXN0RmlsdGVyVGVybXMsIG90aGVyQWdnLnBhcmFtcy5maWVsZC5pbmRleFBhdHRlcm4pOwoKICAgIHBocmFzZUZpbHRlci5tZXRhLm5lZ2F0ZSA9IHRydWU7CiAgICBidWNrZXQuZmlsdGVycyA9IFtwaHJhc2VGaWx0ZXJdOwogICAgYnVja2V0LmtleSA9ICdfX290aGVyX18nOwoKICAgIGlmIChhZ2dSZXN1bHRCdWNrZXRzLnNvbWUoZnVuY3Rpb24gKGJ1Y2tldCkgewogICAgICByZXR1cm4gYnVja2V0LmtleSA9PT0gJ19fbWlzc2luZ19fJzsKICAgIH0pKSB7CiAgICAgIGJ1Y2tldC5maWx0ZXJzLnB1c2goX3B1YmxpYy5lc0ZpbHRlcnMuYnVpbGRFeGlzdHNGaWx0ZXIob3RoZXJBZ2cucGFyYW1zLmZpZWxkLCBvdGhlckFnZy5wYXJhbXMuZmllbGQuaW5kZXhQYXR0ZXJuKSk7CiAgICB9CgogICAgYWdnUmVzdWx0QnVja2V0cy5wdXNoKGJ1Y2tldCk7CiAgfSk7CgogIHJldHVybiB1cGRhdGVkUmVzcG9uc2U7Cn07CgpleHBvcnRzLm1lcmdlT3RoZXJCdWNrZXRBZ2dSZXNwb25zZSA9IG1lcmdlT3RoZXJCdWNrZXRBZ2dSZXNwb25zZTsKCnZhciB1cGRhdGVNaXNzaW5nQnVja2V0ID0gZnVuY3Rpb24gdXBkYXRlTWlzc2luZ0J1Y2tldChyZXNwb25zZSwgYWdnQ29uZmlncywgYWdnKSB7CiAgdmFyIHVwZGF0ZWRSZXNwb25zZSA9IF9sb2Rhc2guZGVmYXVsdC5jbG9uZURlZXAocmVzcG9uc2UpOwoKICB2YXIgYWdnUmVzdWx0QnVja2V0cyA9IGdldEFnZ0NvbmZpZ1Jlc3VsdE1pc3NpbmdCdWNrZXRzKHVwZGF0ZWRSZXNwb25zZS5hZ2dyZWdhdGlvbnMsIGFnZy5pZCk7CiAgYWdnUmVzdWx0QnVja2V0cy5mb3JFYWNoKGZ1bmN0aW9uIChidWNrZXQpIHsKICAgIGJ1Y2tldC5rZXkgPSAnX19taXNzaW5nX18nOwogIH0pOwogIHJldHVybiB1cGRhdGVkUmVzcG9uc2U7Cn07CgpleHBvcnRzLnVwZGF0ZU1pc3NpbmdCdWNrZXQgPSB1cGRhdGVNaXNzaW5nQnVja2V0Ow=="},null]}