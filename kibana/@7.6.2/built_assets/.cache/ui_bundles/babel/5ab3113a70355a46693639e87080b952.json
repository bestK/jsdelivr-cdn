{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/snapshot_restore/public/app/sections/home/snapshot_list/snapshot_table/snapshot_table.js","dependencies":[{"path":"x-pack/legacy/plugins/snapshot_restore/public/app/sections/home/snapshot_list/snapshot_table/snapshot_table.js","mtime":1585205048235},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlNuYXBzaG90VGFibGUgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb25zdGFudHMiKTsKCnZhciBfaW5kZXggPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9pbmRleCIpOwoKdmFyIF9uYXZpZ2F0aW9uID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vc2VydmljZXMvbmF2aWdhdGlvbiIpOwoKdmFyIF91aV9tZXRyaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9zZXJ2aWNlcy91aV9tZXRyaWMiKTsKCnZhciBfY29tcG9uZW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCnZhciBnZXRMYXN0U3VjY2Vzc2Z1bE1hbmFnZWRTbmFwc2hvdCA9IGZ1bmN0aW9uIGdldExhc3RTdWNjZXNzZnVsTWFuYWdlZFNuYXBzaG90KHNuYXBzaG90cykgewogIHZhciBzdWNjZXNzZnVsU25hcHNob3RzID0gc25hcHNob3RzLmZpbHRlcihmdW5jdGlvbiAoX3JlZikgewogICAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSwKICAgICAgICByZXBvc2l0b3J5ID0gX3JlZi5yZXBvc2l0b3J5LAogICAgICAgIG1hbmFnZWRSZXBvc2l0b3J5ID0gX3JlZi5tYW5hZ2VkUmVwb3NpdG9yeTsKICAgIHJldHVybiByZXBvc2l0b3J5ID09PSBtYW5hZ2VkUmVwb3NpdG9yeSAmJiBzdGF0ZSA9PT0gJ1NVQ0NFU1MnOwogIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgIHJldHVybiArbmV3IERhdGUoYi5lbmRUaW1lKSAtICtuZXcgRGF0ZShhLmVuZFRpbWUpOwogIH0pOwogIHJldHVybiBzdWNjZXNzZnVsU25hcHNob3RzWzBdOwp9OwoKdmFyIFNuYXBzaG90VGFibGUgPSBmdW5jdGlvbiBTbmFwc2hvdFRhYmxlKF9yZWYyKSB7CiAgdmFyIHNuYXBzaG90cyA9IF9yZWYyLnNuYXBzaG90cywKICAgICAgcmVwb3NpdG9yaWVzID0gX3JlZjIucmVwb3NpdG9yaWVzLAogICAgICByZWxvYWQgPSBfcmVmMi5yZWxvYWQsCiAgICAgIG9wZW5TbmFwc2hvdERldGFpbHNVcmwgPSBfcmVmMi5vcGVuU25hcHNob3REZXRhaWxzVXJsLAogICAgICBvblNuYXBzaG90RGVsZXRlZCA9IF9yZWYyLm9uU25hcHNob3REZWxldGVkLAogICAgICByZXBvc2l0b3J5RmlsdGVyID0gX3JlZjIucmVwb3NpdG9yeUZpbHRlciwKICAgICAgcG9saWN5RmlsdGVyID0gX3JlZjIucG9saWN5RmlsdGVyOwoKICB2YXIgX3VzZUFwcERlcGVuZGVuY2llcyA9ICgwLCBfaW5kZXgudXNlQXBwRGVwZW5kZW5jaWVzKSgpLAogICAgICBpMThuID0gX3VzZUFwcERlcGVuZGVuY2llcy5jb3JlLmkxOG47CgogIHZhciBGb3JtYXR0ZWRNZXNzYWdlID0gaTE4bi5Gb3JtYXR0ZWRNZXNzYWdlOwogIHZhciB0cmFja1VpTWV0cmljID0gX3VpX21ldHJpYy51aU1ldHJpY1NlcnZpY2UudHJhY2tVaU1ldHJpYzsKCiAgdmFyIF91c2VTdGF0ZSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKFtdKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIHNlbGVjdGVkSXRlbXMgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRTZWxlY3RlZEl0ZW1zID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIGxhc3RTdWNjZXNzZnVsTWFuYWdlZFNuYXBzaG90ID0gZ2V0TGFzdFN1Y2Nlc3NmdWxNYW5hZ2VkU25hcHNob3Qoc25hcHNob3RzKTsKICB2YXIgY29sdW1ucyA9IFt7CiAgICBmaWVsZDogJ3NuYXBzaG90JywKICAgIG5hbWU6IGkxOG4udHJhbnNsYXRlKCd4cGFjay5zbmFwc2hvdFJlc3RvcmUuc25hcHNob3RMaXN0LnRhYmxlLnNuYXBzaG90Q29sdW1uVGl0bGUnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU25hcHNob3QnCiAgICB9KSwKICAgIHRydW5jYXRlVGV4dDogdHJ1ZSwKICAgIHNvcnRhYmxlOiB0cnVlLAogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoc25hcHNob3RJZCwgc25hcHNob3QpIHsKICAgICAgcmV0dXJuICgKICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQGVsYXN0aWMvZXVpL2hyZWYtb3Itb24tY2xpY2sgKi8KICAgICAgICBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgcmV0dXJuIHRyYWNrVWlNZXRyaWMoX2NvbnN0YW50cy5VSU1fU05BUFNIT1RfU0hPV19ERVRBSUxTX0NMSUNLKTsKICAgICAgICAgIH0sCiAgICAgICAgICBocmVmOiBvcGVuU25hcHNob3REZXRhaWxzVXJsKHNuYXBzaG90LnJlcG9zaXRvcnksIHNuYXBzaG90SWQpLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInNuYXBzaG90TGluayIKICAgICAgICB9LCBzbmFwc2hvdElkKQogICAgICApOwogICAgfQogIH0sIHsKICAgIGZpZWxkOiAncmVwb3NpdG9yeScsCiAgICBuYW1lOiBpMThuLnRyYW5zbGF0ZSgneHBhY2suc25hcHNob3RSZXN0b3JlLnNuYXBzaG90TGlzdC50YWJsZS5yZXBvc2l0b3J5Q29sdW1uVGl0bGUnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVwb3NpdG9yeScKICAgIH0pLAogICAgdHJ1bmNhdGVUZXh0OiB0cnVlLAogICAgc29ydGFibGU6IHRydWUsCiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihyZXBvc2l0b3J5TmFtZSkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxpbmssIHsKICAgICAgICBocmVmOiAoMCwgX25hdmlnYXRpb24ubGlua1RvUmVwb3NpdG9yeSkocmVwb3NpdG9yeU5hbWUpLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJyZXBvc2l0b3J5TGluayIKICAgICAgfSwgcmVwb3NpdG9yeU5hbWUpOwogICAgfQogIH0sIHsKICAgIGZpZWxkOiAnaW5kaWNlcycsCiAgICBuYW1lOiBpMThuLnRyYW5zbGF0ZSgneHBhY2suc25hcHNob3RSZXN0b3JlLnNuYXBzaG90TGlzdC50YWJsZS5pbmRpY2VzQ29sdW1uVGl0bGUnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSW5kaWNlcycKICAgIH0pLAogICAgdHJ1bmNhdGVUZXh0OiB0cnVlLAogICAgc29ydGFibGU6IHRydWUsCiAgICB3aWR0aDogJzEwMHB4JywKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGluZGljZXMpIHsKICAgICAgcmV0dXJuIGluZGljZXMubGVuZ3RoOwogICAgfQogIH0sIHsKICAgIGZpZWxkOiAnc2hhcmRzLnRvdGFsJywKICAgIG5hbWU6IGkxOG4udHJhbnNsYXRlKCd4cGFjay5zbmFwc2hvdFJlc3RvcmUuc25hcHNob3RMaXN0LnRhYmxlLnNoYXJkc0NvbHVtblRpdGxlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1NoYXJkcycKICAgIH0pLAogICAgdHJ1bmNhdGVUZXh0OiB0cnVlLAogICAgc29ydGFibGU6IHRydWUsCiAgICB3aWR0aDogJzEwMHB4JywKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHRvdGFsU2hhcmRzKSB7CiAgICAgIHJldHVybiB0b3RhbFNoYXJkczsKICAgIH0KICB9LCB7CiAgICBmaWVsZDogJ3NoYXJkcy5mYWlsZWQnLAogICAgbmFtZTogaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnNuYXBzaG90UmVzdG9yZS5zbmFwc2hvdExpc3QudGFibGUuZmFpbGVkU2hhcmRzQ29sdW1uVGl0bGUnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRmFpbGVkIHNoYXJkcycKICAgIH0pLAogICAgdHJ1bmNhdGVUZXh0OiB0cnVlLAogICAgc29ydGFibGU6IHRydWUsCiAgICB3aWR0aDogJzEwMHB4JywKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGZhaWxlZFNoYXJkcykgewogICAgICByZXR1cm4gZmFpbGVkU2hhcmRzOwogICAgfQogIH0sIHsKICAgIGZpZWxkOiAnc3RhcnRUaW1lSW5NaWxsaXMnLAogICAgbmFtZTogaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnNuYXBzaG90UmVzdG9yZS5zbmFwc2hvdExpc3QudGFibGUuc3RhcnRUaW1lQ29sdW1uVGl0bGUnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGF0ZSBjcmVhdGVkJwogICAgfSksCiAgICB0cnVuY2F0ZVRleHQ6IHRydWUsCiAgICBzb3J0YWJsZTogdHJ1ZSwKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHN0YXJ0VGltZUluTWlsbGlzKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21wb25lbnRzLkRhdGFQbGFjZWhvbGRlciwgewogICAgICAgIGRhdGE6IHN0YXJ0VGltZUluTWlsbGlzCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbXBvbmVudHMuRm9ybWF0dGVkRGF0ZVRpbWUsIHsKICAgICAgICBlcG9jaE1zOiBzdGFydFRpbWVJbk1pbGxpcwogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAgZmllbGQ6ICdkdXJhdGlvbkluTWlsbGlzJywKICAgIG5hbWU6IGkxOG4udHJhbnNsYXRlKCd4cGFjay5zbmFwc2hvdFJlc3RvcmUuc25hcHNob3RMaXN0LnRhYmxlLmR1cmF0aW9uQ29sdW1uVGl0bGUnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRHVyYXRpb24nCiAgICB9KSwKICAgIHRydW5jYXRlVGV4dDogdHJ1ZSwKICAgIHNvcnRhYmxlOiB0cnVlLAogICAgd2lkdGg6ICcxMDBweCcsCiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihkdXJhdGlvbkluTWlsbGlzLCBfcmVmMykgewogICAgICB2YXIgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKCiAgICAgIGlmIChzdGF0ZSA9PT0gX2NvbnN0YW50cy5TTkFQU0hPVF9TVEFURS5JTl9QUk9HUkVTUykgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTG9hZGluZ1NwaW5uZXIsIHsKICAgICAgICAgIHNpemU6ICJtIgogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29tcG9uZW50cy5EYXRhUGxhY2Vob2xkZXIsIHsKICAgICAgICBkYXRhOiBkdXJhdGlvbkluTWlsbGlzCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnNuYXBzaG90TGlzdC50YWJsZS5kdXJhdGlvbkNvbHVtblZhbHVlTGFiZWwiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAie3NlY29uZHN9cyIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBzZWNvbmRzOiBNYXRoLmNlaWwoZHVyYXRpb25Jbk1pbGxpcyAvIDEwMDApCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAgbmFtZTogaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnNuYXBzaG90UmVzdG9yZS5zbmFwc2hvdExpc3QudGFibGUuYWN0aW9uc0NvbHVtblRpdGxlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0FjdGlvbnMnCiAgICB9KSwKICAgIGFjdGlvbnM6IFt7CiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKF9yZWY0KSB7CiAgICAgICAgdmFyIHNuYXBzaG90ID0gX3JlZjQuc25hcHNob3QsCiAgICAgICAgICAgIHJlcG9zaXRvcnkgPSBfcmVmNC5yZXBvc2l0b3J5LAogICAgICAgICAgICBzdGF0ZSA9IF9yZWY0LnN0YXRlOwogICAgICAgIHZhciBjYW5SZXN0b3JlID0gc3RhdGUgPT09IF9jb25zdGFudHMuU05BUFNIT1RfU1RBVEUuU1VDQ0VTUyB8fCBzdGF0ZSA9PT0gX2NvbnN0YW50cy5TTkFQU0hPVF9TVEFURS5QQVJUSUFMOwogICAgICAgIHZhciBsYWJlbCA9IGNhblJlc3RvcmUgPyBpMThuLnRyYW5zbGF0ZSgneHBhY2suc25hcHNob3RSZXN0b3JlLnNuYXBzaG90TGlzdC50YWJsZS5hY3Rpb25SZXN0b3JlVG9vbHRpcCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVzdG9yZScKICAgICAgICB9KSA6IHN0YXRlID09PSBfY29uc3RhbnRzLlNOQVBTSE9UX1NUQVRFLklOX1BST0dSRVNTID8gaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnNuYXBzaG90UmVzdG9yZS5zbmFwc2hvdExpc3QudGFibGUuYWN0aW9uUmVzdG9yZURpc2FibGVkSW5Qcm9ncmVzc1Rvb2x0aXAnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNhbid0IHJlc3RvcmUgaW4tcHJvZ3Jlc3Mgc25hcHNob3QiCiAgICAgICAgfSkgOiBpMThuLnRyYW5zbGF0ZSgneHBhY2suc25hcHNob3RSZXN0b3JlLnNuYXBzaG90TGlzdC50YWJsZS5hY3Rpb25SZXN0b3JlRGlzYWJsZWRJbnZhbGlkVG9vbHRpcCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ2FuJ3QgcmVzdG9yZSBpbnZhbGlkIHNuYXBzaG90IgogICAgICAgIH0pOwogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVG9vbFRpcCwgewogICAgICAgICAgY29udGVudDogbGFiZWwKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uSWNvbiwgewogICAgICAgICAgImFyaWEtbGFiZWwiOiBpMThuLnRyYW5zbGF0ZSgneHBhY2suc25hcHNob3RSZXN0b3JlLnNuYXBzaG90TGlzdC50YWJsZS5hY3Rpb25SZXN0b3JlQXJpYUxhYmVsJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1N0b3JlIHNuYXBzaG90IGB7bmFtZX1gJywKICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgbmFtZTogc25hcHNob3QKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBpY29uVHlwZTogImltcG9ydEFjdGlvbiIsCiAgICAgICAgICBjb2xvcjogInByaW1hcnkiLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInNyc25hcHNob3RMaXN0UmVzdG9yZUFjdGlvbkJ1dHRvbiIsCiAgICAgICAgICBocmVmOiAoMCwgX25hdmlnYXRpb24ubGlua1RvUmVzdG9yZVNuYXBzaG90KShyZXBvc2l0b3J5LCBzbmFwc2hvdCksCiAgICAgICAgICBpc0Rpc2FibGVkOiAhY2FuUmVzdG9yZQogICAgICAgIH0pKTsKICAgICAgfQogICAgfSwgewogICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihfcmVmNSkgewogICAgICAgIHZhciBzbmFwc2hvdCA9IF9yZWY1LnNuYXBzaG90LAogICAgICAgICAgICByZXBvc2l0b3J5ID0gX3JlZjUucmVwb3NpdG9yeTsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29tcG9uZW50cy5TbmFwc2hvdERlbGV0ZVByb3ZpZGVyLCBudWxsLCBmdW5jdGlvbiAoZGVsZXRlU25hcHNob3RQcm9tcHQpIHsKICAgICAgICAgIHZhciBpc0RlbGV0ZURpc2FibGVkID0gQm9vbGVhbihsYXN0U3VjY2Vzc2Z1bE1hbmFnZWRTbmFwc2hvdCkgPyBzbmFwc2hvdCA9PT0gbGFzdFN1Y2Nlc3NmdWxNYW5hZ2VkU25hcHNob3Quc25hcHNob3QgOiBmYWxzZTsKICAgICAgICAgIHZhciBsYWJlbCA9IGlzRGVsZXRlRGlzYWJsZWQgPyBpMThuLnRyYW5zbGF0ZSgneHBhY2suc25hcHNob3RSZXN0b3JlLnNuYXBzaG90TGlzdC50YWJsZS5kZWxldGVNYW5hZ2VkUmVwb3NpdG9yeVNuYXBzaG90VG9vbHRpcCcsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdZb3UgbXVzdCBzdG9yZSB0aGUgbGFzdCBzdWNjZXNzZnVsIHNuYXBzaG90IGluIGEgbWFuYWdlZCByZXBvc2l0b3J5LicKICAgICAgICAgIH0pIDogaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnNuYXBzaG90UmVzdG9yZS5zbmFwc2hvdExpc3QudGFibGUuYWN0aW9uRGVsZXRlVG9vbHRpcCcsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEZWxldGUnCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVG9vbFRpcCwgewogICAgICAgICAgICBjb250ZW50OiBsYWJlbAogICAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkljb24sIHsKICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBpMThuLnRyYW5zbGF0ZSgneHBhY2suc25hcHNob3RSZXN0b3JlLnNuYXBzaG90TGlzdC50YWJsZS5hY3Rpb25EZWxldGVBcmlhTGFiZWwnLCB7CiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJEZWxldGUgc25hcHNob3QgJ3tuYW1lfSciLAogICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgbmFtZTogc25hcHNob3QKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBpY29uVHlwZTogInRyYXNoIiwKICAgICAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAic3JzbmFwc2hvdExpc3REZWxldGVBY3Rpb25CdXR0b24iLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBkZWxldGVTbmFwc2hvdFByb21wdChbewogICAgICAgICAgICAgICAgc25hcHNob3Q6IHNuYXBzaG90LAogICAgICAgICAgICAgICAgcmVwb3NpdG9yeTogcmVwb3NpdG9yeQogICAgICAgICAgICAgIH1dLCBvblNuYXBzaG90RGVsZXRlZCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGlzRGlzYWJsZWQ6IGlzRGVsZXRlRGlzYWJsZWQKICAgICAgICAgIH0pKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfV0sCiAgICB3aWR0aDogJzEwMHB4JwogIH1dOyAvLyBCeSBkZWZhdWx0LCB3ZSdsbCBkaXNwbGF5IHRoZSBtb3N0IHJlY2VudCBzbmFwc2hvdHMgYXQgdGhlIHRvcCBvZiB0aGUgdGFibGUuCgogIHZhciBzb3J0aW5nID0gewogICAgc29ydDogewogICAgICBmaWVsZDogJ3N0YXJ0VGltZUluTWlsbGlzJywKICAgICAgZGlyZWN0aW9uOiAnZGVzYycKICAgIH0KICB9OwogIHZhciBwYWdpbmF0aW9uID0gewogICAgaW5pdGlhbFBhZ2VTaXplOiAyMCwKICAgIHBhZ2VTaXplT3B0aW9uczogWzEwLCAyMCwgNTBdCiAgfTsKICB2YXIgc2VhcmNoU2NoZW1hID0gewogICAgZmllbGRzOiB7CiAgICAgIHJlcG9zaXRvcnk6IHsKICAgICAgICB0eXBlOiAnc3RyaW5nJwogICAgICB9LAogICAgICBwb2xpY3lOYW1lOiB7CiAgICAgICAgdHlwZTogJ3N0cmluZycKICAgICAgfQogICAgfQogIH07CiAgdmFyIHNlbGVjdGlvbiA9IHsKICAgIG9uU2VsZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbiBvblNlbGVjdGlvbkNoYW5nZShuZXdTZWxlY3RlZEl0ZW1zKSB7CiAgICAgIHJldHVybiBzZXRTZWxlY3RlZEl0ZW1zKG5ld1NlbGVjdGVkSXRlbXMpOwogICAgfSwKICAgIHNlbGVjdGFibGU6IGZ1bmN0aW9uIHNlbGVjdGFibGUoX3JlZjYpIHsKICAgICAgdmFyIHNuYXBzaG90ID0gX3JlZjYuc25hcHNob3Q7CiAgICAgIHJldHVybiBCb29sZWFuKGxhc3RTdWNjZXNzZnVsTWFuYWdlZFNuYXBzaG90KSA/IHNuYXBzaG90ICE9PSBsYXN0U3VjY2Vzc2Z1bE1hbmFnZWRTbmFwc2hvdC5zbmFwc2hvdCA6IHRydWU7CiAgICB9LAogICAgc2VsZWN0YWJsZU1lc3NhZ2U6IGZ1bmN0aW9uIHNlbGVjdGFibGVNZXNzYWdlKHNlbGVjdGFibGUpIHsKICAgICAgaWYgKCFzZWxlY3RhYmxlKSB7CiAgICAgICAgcmV0dXJuIGkxOG4udHJhbnNsYXRlKCd4cGFjay5zbmFwc2hvdFJlc3RvcmUuc25hcHNob3RMaXN0LnRhYmxlLmRlbGV0ZU1hbmFnZWRSZXBvc2l0b3J5U25hcHNob3REZXNjcmlwdGlvbicsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnWW91IG11c3QgcmV0YWluIHRoZSBsYXN0IHN1Y2Nlc3NmdWwgc25hcHNob3QgaW4gYSBtYW5hZ2VkIHJlcG9zaXRvcnkuJwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfTsKICB2YXIgc2VhcmNoID0gewogICAgdG9vbHNMZWZ0OiBzZWxlY3RlZEl0ZW1zLmxlbmd0aCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbXBvbmVudHMuU25hcHNob3REZWxldGVQcm92aWRlciwgbnVsbCwgZnVuY3Rpb24gKGRlbGV0ZVNuYXBzaG90UHJvbXB0KSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uLCB7CiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgIHJldHVybiBkZWxldGVTbmFwc2hvdFByb21wdChzZWxlY3RlZEl0ZW1zLm1hcChmdW5jdGlvbiAoX3JlZjcpIHsKICAgICAgICAgICAgdmFyIHNuYXBzaG90ID0gX3JlZjcuc25hcHNob3QsCiAgICAgICAgICAgICAgICByZXBvc2l0b3J5ID0gX3JlZjcucmVwb3NpdG9yeTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBzbmFwc2hvdDogc25hcHNob3QsCiAgICAgICAgICAgICAgcmVwb3NpdG9yeTogcmVwb3NpdG9yeQogICAgICAgICAgICB9OwogICAgICAgICAgfSksIG9uU25hcHNob3REZWxldGVkKTsKICAgICAgICB9LAogICAgICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAic3JTbmFwc2hvdExpc3RCdWxrRGVsZXRlQWN0aW9uQnV0dG9uIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5zbmFwc2hvdExpc3QudGFibGUuZGVsZXRlU25hcHNob3RCdXR0b24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRGVsZXRlIHtjb3VudCwgcGx1cmFsLCBvbmUge3NuYXBzaG90fSBvdGhlciB7c25hcHNob3RzfX0iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgY291bnQ6IHNlbGVjdGVkSXRlbXMubGVuZ3RoCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9KSA6IHVuZGVmaW5lZCwKICAgIHRvb2xzUmlnaHQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgY29sb3I6ICJzZWNvbmRhcnkiLAogICAgICBpY29uVHlwZTogInJlZnJlc2giLAogICAgICBvbkNsaWNrOiByZWxvYWQsCiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJyZWxvYWRCdXR0b24iCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUuc25hcHNob3RMaXN0LnRhYmxlLnJlbG9hZFNuYXBzaG90c0J1dHRvbiIsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUmVsb2FkIgogICAgfSkpLAogICAgYm94OiB7CiAgICAgIGluY3JlbWVudGFsOiB0cnVlLAogICAgICBzY2hlbWE6IHNlYXJjaFNjaGVtYQogICAgfSwKICAgIGZpbHRlcnM6IFt7CiAgICAgIHR5cGU6ICdmaWVsZF92YWx1ZV9zZWxlY3Rpb24nLAogICAgICBmaWVsZDogJ3JlcG9zaXRvcnknLAogICAgICBuYW1lOiBpMThuLnRyYW5zbGF0ZSgneHBhY2suc25hcHNob3RSZXN0b3JlLnNuYXBzaG90TGlzdC50YWJsZS5yZXBvc2l0b3J5RmlsdGVyTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZXBvc2l0b3J5JwogICAgICB9KSwKICAgICAgbXVsdGlTZWxlY3Q6IGZhbHNlLAogICAgICBvcHRpb25zOiByZXBvc2l0b3JpZXMubWFwKGZ1bmN0aW9uIChyZXBvc2l0b3J5KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiByZXBvc2l0b3J5LAogICAgICAgICAgdmlldzogcmVwb3NpdG9yeQogICAgICAgIH07CiAgICAgIH0pCiAgICB9XSwKICAgIGRlZmF1bHRRdWVyeTogcG9saWN5RmlsdGVyID8gX2V1aS5RdWVyeS5wYXJzZSgicG9saWN5TmFtZT1cIiIuY29uY2F0KHBvbGljeUZpbHRlciwgIlwiIiksIHsKICAgICAgc2NoZW1hOiBfb2JqZWN0U3ByZWFkKHt9LCBzZWFyY2hTY2hlbWEsIHsKICAgICAgICBzdHJpY3Q6IHRydWUKICAgICAgfSkKICAgIH0pIDogcmVwb3NpdG9yeUZpbHRlciA/IF9ldWkuUXVlcnkucGFyc2UoInJlcG9zaXRvcnk9XCIiLmNvbmNhdChyZXBvc2l0b3J5RmlsdGVyLCAiXCIiKSwgewogICAgICBzY2hlbWE6IF9vYmplY3RTcHJlYWQoe30sIHNlYXJjaFNjaGVtYSwgewogICAgICAgIHN0cmljdDogdHJ1ZQogICAgICB9KQogICAgfSkgOiAnJwogIH07CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlJbk1lbW9yeVRhYmxlLCB7CiAgICBpdGVtczogc25hcHNob3RzLAogICAgaXRlbUlkOiAidXVpZCIsCiAgICBjb2x1bW5zOiBjb2x1bW5zLAogICAgc2VhcmNoOiBzZWFyY2gsCiAgICBzb3J0aW5nOiBzb3J0aW5nLAogICAgaXNTZWxlY3RhYmxlOiB0cnVlLAogICAgc2VsZWN0aW9uOiBzZWxlY3Rpb24sCiAgICBwYWdpbmF0aW9uOiBwYWdpbmF0aW9uLAogICAgcm93UHJvcHM6IGZ1bmN0aW9uIHJvd1Byb3BzKCkgewogICAgICByZXR1cm4gewogICAgICAgICdkYXRhLXRlc3Qtc3Viaic6ICdyb3cnCiAgICAgIH07CiAgICB9LAogICAgY2VsbFByb3BzOiBmdW5jdGlvbiBjZWxsUHJvcHMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgJ2RhdGEtdGVzdC1zdWJqJzogJ2NlbGwnCiAgICAgIH07CiAgICB9LAogICAgImRhdGEtdGVzdC1zdWJqIjogInNuYXBzaG90VGFibGUiCiAgfSk7Cn07CgpleHBvcnRzLlNuYXBzaG90VGFibGUgPSBTbmFwc2hvdFRhYmxlOw=="},null]}