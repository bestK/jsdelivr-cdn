{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/layers/sources/wms_source/wms_client.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/layers/sources/wms_source/wms_client.js","mtime":1585205045341},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLldtc0NsaWVudCA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX3BhcnNlX3htbF9zdHJpbmcgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vcGFyc2VfeG1sX3N0cmluZyIpOwoKdmFyIF9ub2RlRmV0Y2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm5vZGUtZmV0Y2giKSk7Cgp2YXIgX3VybCA9IHJlcXVpcmUoInVybCIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9Cgp2YXIgV21zQ2xpZW50ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gV21zQ2xpZW50KF9yZWYpIHsKICAgIHZhciBzZXJ2aWNlVXJsID0gX3JlZi5zZXJ2aWNlVXJsOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXbXNDbGllbnQpOwoKICAgIHRoaXMuX3NlcnZpY2VVcmwgPSBzZXJ2aWNlVXJsOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFdtc0NsaWVudCwgW3sKICAgIGtleTogIl9mZXRjaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZldGNoKHVybCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9mZXRjaCQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgKDAsIF9ub2RlRmV0Y2guZGVmYXVsdCkodXJsKSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9jcmVhdGVVcmwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVVcmwoZGVmYXVsdFF1ZXJ5UGFyYW1zKSB7CiAgICAgIHZhciBzZXJ2aWNlVXJsID0gKDAsIF91cmwucGFyc2UpKHRoaXMuX3NlcnZpY2VVcmwsIHRydWUpOwoKICAgICAgdmFyIHF1ZXJ5UGFyYW1zID0gX29iamVjdFNwcmVhZCh7fSwgc2VydmljZVVybC5xdWVyeSwge30sIGRlZmF1bHRRdWVyeVBhcmFtcyk7CgogICAgICByZXR1cm4gKDAsIF91cmwuZm9ybWF0KSh7CiAgICAgICAgcHJvdG9jb2w6IHNlcnZpY2VVcmwucHJvdG9jb2wsCiAgICAgICAgaG9zdG5hbWU6IHNlcnZpY2VVcmwuaG9zdG5hbWUsCiAgICAgICAgcG9ydDogc2VydmljZVVybC5wb3J0LAogICAgICAgIHBhdGhuYW1lOiBzZXJ2aWNlVXJsLnBhdGhuYW1lLAogICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtcwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRVcmxUZW1wbGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXJsVGVtcGxhdGUobGF5ZXJzLCBzdHlsZXMpIHsKICAgICAgdmFyIHVybFRlbXBsYXRlID0gdGhpcy5fY3JlYXRlVXJsKHsKICAgICAgICBmb3JtYXQ6ICdpbWFnZS9wbmcnLAogICAgICAgIHNlcnZpY2U6ICdXTVMnLAogICAgICAgIHZlcnNpb246ICcxLjEuMScsCiAgICAgICAgcmVxdWVzdDogJ0dldE1hcCcsCiAgICAgICAgc3JzOiAnRVBTRzozODU3JywKICAgICAgICB0cmFuc3BhcmVudDogJ3RydWUnLAogICAgICAgIHdpZHRoOiAnMjU2JywKICAgICAgICBoZWlnaHQ6ICcyNTYnLAogICAgICAgIGxheWVyczogbGF5ZXJzLAogICAgICAgIHN0eWxlczogc3R5bGVzCiAgICAgIH0pOyAvL1RPRE8gRmluZCBhIGJldHRlciB3YXkgdG8gYXZvaWQgVVJMIGVuY29kaW5nIHRoZSB0ZW1wbGF0ZSBicmFjZXMKCgogICAgICByZXR1cm4gIiIuY29uY2F0KHVybFRlbXBsYXRlLCAiJmJib3g9e2Jib3gtZXBzZy0zODU3fSIpOwogICAgfQogICAgLyoqCiAgICAgKiBFeHRlbmQgYW55IHF1ZXJ5IHBhcmFtZXRlcnMgc3VwcGxpZWQgaW4gdGhlIFVSTCBidXQgb3ZlcnJpZGUgd2l0aCByZXF1aXJlZCBkZWZhdWx0cwogICAgICogKGV4LiBzZXJ2aWNlIG11c3QgYmUgV01TKQogICAgICovCgogIH0sIHsKICAgIGtleTogIl9mZXRjaENhcGFiaWxpdGllcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZldGNoQ2FwYWJpbGl0aWVzKCkgewogICAgICB2YXIgZ2V0Q2FwYWJpbGl0aWVzVXJsLCBxdWVyeVBhcmFtcywgcmVzcCwgYm9keTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfZmV0Y2hDYXBhYmlsaXRpZXMkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGdldENhcGFiaWxpdGllc1VybCA9ICgwLCBfdXJsLnBhcnNlKSh0aGlzLl9zZXJ2aWNlVXJsLCB0cnVlKTsKICAgICAgICAgICAgICBxdWVyeVBhcmFtcyA9IF9vYmplY3RTcHJlYWQoe30sIGdldENhcGFiaWxpdGllc1VybC5xdWVyeSwge30sIHsKICAgICAgICAgICAgICAgIHZlcnNpb246ICcxLjEuMScsCiAgICAgICAgICAgICAgICByZXF1ZXN0OiAnR2V0Q2FwYWJpbGl0aWVzJywKICAgICAgICAgICAgICAgIHNlcnZpY2U6ICdXTVMnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fZmV0Y2goKDAsIF91cmwuZm9ybWF0KSh7CiAgICAgICAgICAgICAgICBwcm90b2NvbDogZ2V0Q2FwYWJpbGl0aWVzVXJsLnByb3RvY29sLAogICAgICAgICAgICAgICAgaG9zdG5hbWU6IGdldENhcGFiaWxpdGllc1VybC5ob3N0bmFtZSwKICAgICAgICAgICAgICAgIHBvcnQ6IGdldENhcGFiaWxpdGllc1VybC5wb3J0LAogICAgICAgICAgICAgICAgcGF0aG5hbWU6IGdldENhcGFiaWxpdGllc1VybC5wYXRobmFtZSwKICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtcwogICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICBpZiAoIShyZXNwLnN0YXR1cyA+PSA0MDApKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIGFjY2VzcyAiLmNvbmNhdCh0aGlzLnN0YXRlLnNlcnZpY2VVcmwpKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChyZXNwLnRleHQoKSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgYm9keSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCgoMCwgX3BhcnNlX3htbF9zdHJpbmcucGFyc2VYbWxTdHJpbmcpKGJvZHkpKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Mi5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDYXBhYmlsaXRpZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENhcGFiaWxpdGllcygpIHsKICAgICAgdmFyIHJhd0NhcGFiaWxpdGllcywgX3JlZHVjZUxheWVycywgbGF5ZXJzLCBzdHlsZXM7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldENhcGFiaWxpdGllcyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fZmV0Y2hDYXBhYmlsaXRpZXMoKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmF3Q2FwYWJpbGl0aWVzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgX3JlZHVjZUxheWVycyA9IHJlZHVjZUxheWVycyhbXSwgX2xvZGFzaC5kZWZhdWx0LmdldChyYXdDYXBhYmlsaXRpZXMsICdXTVRfTVNfQ2FwYWJpbGl0aWVzLkNhcGFiaWxpdHlbMF0uTGF5ZXInLCBbXSkpLCBsYXllcnMgPSBfcmVkdWNlTGF5ZXJzLmxheWVycywgc3R5bGVzID0gX3JlZHVjZUxheWVycy5zdHlsZXM7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIGxheWVyczogZ3JvdXBDYXBhYmlsaXRpZXMobGF5ZXJzKSwKICAgICAgICAgICAgICAgIHN0eWxlczogZ3JvdXBDYXBhYmlsaXRpZXMoc3R5bGVzKQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gV21zQ2xpZW50Owp9KCk7CgpleHBvcnRzLldtc0NsaWVudCA9IFdtc0NsaWVudDsKCmZ1bmN0aW9uIHJlZHVjZUxheWVycyhwYXRoLCBsYXllcnMpIHsKICB2YXIgZW1wdHlDYXBhYmlsaXRpZXMgPSB7CiAgICBsYXllcnM6IFtdLAogICAgc3R5bGVzOiBbXQogIH07CgogIGZ1bmN0aW9uIGNyZWF0ZU9wdGlvbihvcHRpb25QYXRoLCBvcHRpb25UaXRsZSwgb3B0aW9uTmFtZSkgewogICAgcmV0dXJuIHsKICAgICAgcGF0aDogW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShvcHRpb25QYXRoKSwgW29wdGlvblRpdGxlXSksCiAgICAgIHZhbHVlOiBvcHRpb25OYW1lCiAgICB9OwogIH0KCiAgcmV0dXJuIGxheWVycy5yZWR1Y2UoZnVuY3Rpb24gKGFjY3VtdWxhdGVkQ2FwYWJpbGl0aWVzLCBsYXllcikgewogICAgLy8gTGF5ZXIgaXMgaGllcmFyY2hpY2FsLCBjb250aW51ZSB0cmF2ZXJzaW5nCiAgICBpZiAobGF5ZXIuTGF5ZXIpIHsKICAgICAgdmFyIGhpZXJhcmNoaWNhbENhcGFiaWxpdGllcyA9IHJlZHVjZUxheWVycyhbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHBhdGgpLCBbbGF5ZXIuVGl0bGVbMF1dKSwgbGF5ZXIuTGF5ZXIpOwogICAgICByZXR1cm4gewogICAgICAgIGxheWVyczogW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhY2N1bXVsYXRlZENhcGFiaWxpdGllcy5sYXllcnMpLCBfdG9Db25zdW1hYmxlQXJyYXkoaGllcmFyY2hpY2FsQ2FwYWJpbGl0aWVzLmxheWVycykpLAogICAgICAgIHN0eWxlczogW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhY2N1bXVsYXRlZENhcGFiaWxpdGllcy5zdHlsZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkoaGllcmFyY2hpY2FsQ2FwYWJpbGl0aWVzLnN0eWxlcykpCiAgICAgIH07CiAgICB9CgogICAgdmFyIHVwZGF0ZWRTdHlsZXMgPSBfdG9Db25zdW1hYmxlQXJyYXkoYWNjdW11bGF0ZWRDYXBhYmlsaXRpZXMuc3R5bGVzKTsKCiAgICBpZiAoX2xvZGFzaC5kZWZhdWx0LmhhcyhsYXllciwgJ1N0eWxlWzBdJykpIHsKICAgICAgdXBkYXRlZFN0eWxlcy5wdXNoKGNyZWF0ZU9wdGlvbihwYXRoLCBfbG9kYXNoLmRlZmF1bHQuZ2V0KGxheWVyLCAnU3R5bGVbMF0uVGl0bGVbMF0nKSwgX2xvZGFzaC5kZWZhdWx0LmdldChsYXllciwgJ1N0eWxlWzBdLk5hbWVbMF0nKSkpOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGxheWVyczogW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhY2N1bXVsYXRlZENhcGFiaWxpdGllcy5sYXllcnMpLCBbY3JlYXRlT3B0aW9uKHBhdGgsIGxheWVyLlRpdGxlWzBdLCBsYXllci5OYW1lWzBdKV0pLAogICAgICBzdHlsZXM6IHVwZGF0ZWRTdHlsZXMKICAgIH07CiAgfSwgZW1wdHlDYXBhYmlsaXRpZXMpOwp9IC8vIEF2b2lkIGZpbGxpbmcgc2VsZWN0IGJveCBvcHRpb24gbGFiZWwgd2l0aCB0ZXh0IHRoYXQgaXMgYWxsIHRoZSBzYW1lCi8vIENyZWF0ZSBhIHNpbmdsZSBncm91cCBmcm9tIGNvbW1vbiBwYXJ0cyBvZiBMYXllciBoaWVyYXJjaHkKCgpmdW5jdGlvbiBncm91cENhcGFiaWxpdGllcyhsaXN0KSB7CiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gW107CiAgfQoKICB2YXIgbWF4UGF0aERlcHRoID0gMDsKICBsaXN0LmZvckVhY2goZnVuY3Rpb24gKF9yZWYyKSB7CiAgICB2YXIgcGF0aCA9IF9yZWYyLnBhdGg7CgogICAgaWYgKHBhdGgubGVuZ3RoID4gbWF4UGF0aERlcHRoKSB7CiAgICAgIG1heFBhdGhEZXB0aCA9IHBhdGgubGVuZ3RoOwogICAgfQogIH0pOwogIHZhciByb290Q29tbW9uUGF0aCA9IGxpc3RbMF0ucGF0aDsKCiAgZm9yICh2YXIgbGlzdEluZGV4ID0gMTsgbGlzdEluZGV4IDwgbGlzdC5sZW5ndGg7IGxpc3RJbmRleCsrKSB7CiAgICBpZiAocm9vdENvbW1vblBhdGgubGVuZ3RoID09PSAwKSB7CiAgICAgIC8vIE5vIGNvbW1vbmFsaXR5IGluIHJvb3QgcGF0aCwgbm90aGluZyBsZWZ0IHRvIHZlcmlmeQogICAgICBicmVhazsKICAgIH0KCiAgICB2YXIgcGF0aCA9IGxpc3RbbGlzdEluZGV4XS5wYXRoOwoKICAgIGZvciAodmFyIHBhdGhJbmRleCA9IDA7IHBhdGhJbmRleCA8IHBhdGgubGVuZ3RoICYmIHBhdGhJbmRleCA8IHJvb3RDb21tb25QYXRoLmxlbmd0aDsgcGF0aEluZGV4KyspIHsKICAgICAgaWYgKHJvb3RDb21tb25QYXRoW3BhdGhJbmRleF0gIT09IHBhdGhbcGF0aEluZGV4XSkgewogICAgICAgIC8vIHRydW5jYXRlIHJvb3QgY29tbW9uIHBhdGggYXQgbG9jYXRpb24gb2YgZGl2ZXJnZW5jZQogICAgICAgIHJvb3RDb21tb25QYXRoID0gcm9vdENvbW1vblBhdGguc2xpY2UoMCwgcGF0aEluZGV4KTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0KCiAgdmFyIGxhYmVsTWFwID0gbmV3IE1hcCgpOwogIHZhciBvcHRpb25zID0gbGlzdC5tYXAoZnVuY3Rpb24gKF9yZWYzKSB7CiAgICB2YXIgcGF0aCA9IF9yZWYzLnBhdGgsCiAgICAgICAgdmFsdWUgPSBfcmVmMy52YWx1ZTsKICAgIHZhciB0aXRsZSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTsKICAgIHZhciBoaWVyYWNoeVdpdGhUaXRsZSA9IHJvb3RDb21tb25QYXRoLmxlbmd0aCA9PT0gcGF0aC5sZW5ndGggPyB0aXRsZSAvLyBlbnRpcmUgcGF0aCBpcyBjb21tb24sIG9ubHkgdXNlIHRpdGxlCiAgICA6IHBhdGguc3BsaWNlKHJvb3RDb21tb25QYXRoLmxlbmd0aCkuam9pbignIC0gJyk7CiAgICB2YXIgbGFiZWwgPSB0aXRsZSA9PT0gdmFsdWUgPyBoaWVyYWNoeVdpdGhUaXRsZSA6ICIiLmNvbmNhdChoaWVyYWNoeVdpdGhUaXRsZSwgIiAoIikuY29uY2F0KHZhbHVlLCAiKSIpOyAvLyBsYWJlbHMgYXJlIHVzZWQgYXMga2V5cyBpbiByZWFjdCBlbGVtZW50cyBzbyB1bmlxdWVuZXNzIG11c3QgYmUgZ3VhcmFudGVlZAoKICAgIHZhciB1bmlxdWVMYWJlbDsKCiAgICBpZiAobGFiZWxNYXAuaGFzKGxhYmVsKSkgewogICAgICB2YXIgY291bnRlciA9IGxhYmVsTWFwLmdldChsYWJlbCk7CiAgICAgIHZhciBuZXh0Q291bnRlciA9IGNvdW50ZXIgKyAxOwogICAgICBsYWJlbE1hcC5zZXQobGFiZWwsIG5leHRDb3VudGVyKTsKICAgICAgdW5pcXVlTGFiZWwgPSAiIi5jb25jYXQobGFiZWwsICI6IikuY29uY2F0KG5leHRDb3VudGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIGxhYmVsTWFwLnNldChsYWJlbCwgMCk7CiAgICAgIHVuaXF1ZUxhYmVsID0gbGFiZWw7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgbGFiZWw6IHVuaXF1ZUxhYmVsLAogICAgICB2YWx1ZTogdmFsdWUKICAgIH07CiAgfSk7IC8vIG5vIGNvbW1vbiBwYXRoIG9yIGFsbCBhdCBzYW1lIGRlcHRoIHBhdGgKCiAgaWYgKHJvb3RDb21tb25QYXRoLmxlbmd0aCA9PT0gMCB8fCByb290Q29tbW9uUGF0aC5sZW5ndGggPT09IG1heFBhdGhEZXB0aCkgewogICAgcmV0dXJuIG9wdGlvbnM7CiAgfQoKICByZXR1cm4gW3sKICAgIGxhYmVsOiByb290Q29tbW9uUGF0aC5qb2luKCcgLSAnKSwKICAgIG9wdGlvbnM6IG9wdGlvbnMKICB9XTsKfQ=="},null]}