{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/data/public/ui/index_pattern_select/index_pattern_select.js","dependencies":[{"path":"src/plugins/data/public/ui/index_pattern_select/index_pattern_select.js","mtime":1585205041598},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuY3JlYXRlSW5kZXhQYXR0ZXJuU2VsZWN0ID0gY3JlYXRlSW5kZXhQYXR0ZXJuU2VsZWN0OwpleHBvcnRzLkluZGV4UGF0dGVyblNlbGVjdCA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9saWIgPSByZXF1aXJlKCIuLi8uLi9pbmRleF9wYXR0ZXJucy9saWIiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHsKICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsKCiAgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOwoKICB2YXIga2V5LCBpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7CgogICAgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsKICAgICAga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsKICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsKICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsKICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHsKICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsKICB2YXIgdGFyZ2V0ID0ge307CiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOwogIHZhciBrZXksIGk7CgogIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7CiAgICBrZXkgPSBzb3VyY2VLZXlzW2ldOwogICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsKICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7CiAgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgewogICAgcmV0dXJuIGNhbGw7CiAgfQoKICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsKfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsKICB9OwogIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7Cn0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgewogIGlmIChzZWxmID09PSB2b2lkIDApIHsKICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7CiAgfQoKICByZXR1cm4gc2VsZjsKfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7CiAgfQoKICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgIHZhbHVlOiBzdWJDbGFzcywKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgfQogIH0pOwogIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOwp9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogICAgby5fX3Byb3RvX18gPSBwOwogICAgcmV0dXJuIG87CiAgfTsKCiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF9leHRlbmRzKCkgewogIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOwoKICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7CiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiB0YXJnZXQ7CiAgfTsKCiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCnZhciBnZXRJbmRleFBhdHRlcm5zID0gZnVuY3Rpb24gZ2V0SW5kZXhQYXR0ZXJucyhjbGllbnQsIHNlYXJjaCwgZmllbGRzKSB7CiAgdmFyIHJlc3A7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRJbmRleFBhdHRlcm5zJChfY29udGV4dCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjbGllbnQuZmluZCh7CiAgICAgICAgICAgIHR5cGU6ICdpbmRleC1wYXR0ZXJuJywKICAgICAgICAgICAgZmllbGRzOiBmaWVsZHMsCiAgICAgICAgICAgIHNlYXJjaDogIiIuY29uY2F0KHNlYXJjaCwgIioiKSwKICAgICAgICAgICAgc2VhcmNoRmllbGRzOiBbJ3RpdGxlJ10sCiAgICAgICAgICAgIHBlclBhZ2U6IDEwMAogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICByZXNwID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3Auc2F2ZWRPYmplY3RzKTsKCiAgICAgICAgY2FzZSA0OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07IC8vIFRha2VzIGluIHN0YXRlZnVsIHJ1bnRpbWUgZGVwZW5kZW5jaWVzIGFuZCBwcmUtd2lyZXMgdGhlbSB0byB0aGUgY29tcG9uZW50CgoKZnVuY3Rpb24gY3JlYXRlSW5kZXhQYXR0ZXJuU2VsZWN0KHNhdmVkT2JqZWN0c0NsaWVudCkgewogIHJldHVybiBmdW5jdGlvbiAocHJvcHMpIHsKICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEluZGV4UGF0dGVyblNlbGVjdCwgX2V4dGVuZHMoe30sIHByb3BzLCB7CiAgICAgIHNhdmVkT2JqZWN0c0NsaWVudDogc2F2ZWRPYmplY3RzQ2xpZW50CiAgICB9KSk7CiAgfTsKfQoKdmFyIEluZGV4UGF0dGVyblNlbGVjdCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoSW5kZXhQYXR0ZXJuU2VsZWN0LCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gSW5kZXhQYXR0ZXJuU2VsZWN0KHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEluZGV4UGF0dGVyblNlbGVjdCk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoSW5kZXhQYXR0ZXJuU2VsZWN0KS5jYWxsKHRoaXMsIHByb3BzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaXNNb3VudGVkIiwgZmFsc2UpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInN0YXRlIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJmZXRjaFNlbGVjdGVkSW5kZXhQYXR0ZXJuIiwgZnVuY3Rpb24gX2NhbGxlZShpbmRleFBhdHRlcm5JZCkgewogICAgICB2YXIgaW5kZXhQYXR0ZXJuVGl0bGU7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKGluZGV4UGF0dGVybklkKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXhQYXR0ZXJuOiB1bmRlZmluZWQKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMzsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCgoMCwgX2xpYi5nZXRUaXRsZSkoX3RoaXMucHJvcHMuc2F2ZWRPYmplY3RzQ2xpZW50LCBpbmRleFBhdHRlcm5JZCkpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGluZGV4UGF0dGVyblRpdGxlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgaWYgKF90aGlzLmlzTW91bnRlZCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4UGF0dGVybjogewogICAgICAgICAgICAgICAgICB2YWx1ZTogaW5kZXhQYXR0ZXJuSWQsCiAgICAgICAgICAgICAgICAgIGxhYmVsOiBpbmRleFBhdHRlcm5UaXRsZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIG51bGwsIFtbMywgOV1dKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImRlYm91bmNlZEZldGNoIiwgX2xvZGFzaC5kZWZhdWx0LmRlYm91bmNlKGZ1bmN0aW9uIF9jYWxsZWUyKHNlYXJjaFZhbHVlKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcywgZmllbGRUeXBlcywgb25Ob0luZGV4UGF0dGVybnMsIHNhdmVkT2JqZWN0c0NsaWVudCwgc2F2ZWRPYmplY3RGaWVsZHMsIHNhdmVkT2JqZWN0cywgb3B0aW9uczsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsIGZpZWxkVHlwZXMgPSBfdGhpcyRwcm9wcy5maWVsZFR5cGVzLCBvbk5vSW5kZXhQYXR0ZXJucyA9IF90aGlzJHByb3BzLm9uTm9JbmRleFBhdHRlcm5zLCBzYXZlZE9iamVjdHNDbGllbnQgPSBfdGhpcyRwcm9wcy5zYXZlZE9iamVjdHNDbGllbnQ7CiAgICAgICAgICAgICAgc2F2ZWRPYmplY3RGaWVsZHMgPSBbJ3RpdGxlJ107CgogICAgICAgICAgICAgIGlmIChmaWVsZFR5cGVzKSB7CiAgICAgICAgICAgICAgICBzYXZlZE9iamVjdEZpZWxkcy5wdXNoKCdmaWVsZHMnKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGdldEluZGV4UGF0dGVybnMoc2F2ZWRPYmplY3RzQ2xpZW50LCBzZWFyY2hWYWx1ZSwgc2F2ZWRPYmplY3RGaWVsZHMpKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBzYXZlZE9iamVjdHMgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgaWYgKGZpZWxkVHlwZXMpIHsKICAgICAgICAgICAgICAgIHNhdmVkT2JqZWN0cyA9IHNhdmVkT2JqZWN0cy5maWx0ZXIoZnVuY3Rpb24gKHNhdmVkT2JqZWN0KSB7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4UGF0dGVybkZpZWxkcyA9IEpTT04ucGFyc2Uoc2F2ZWRPYmplY3QuYXR0cmlidXRlcy5maWVsZHMpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleFBhdHRlcm5GaWVsZHMuc29tZShmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZFR5cGVzID09PSBudWxsIHx8IGZpZWxkVHlwZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpZWxkVHlwZXMuaW5jbHVkZXMoZmllbGQudHlwZSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgIC8vIFVuYWJsZSB0byBwYXJzZSBmaWVsZHMgSlNPTiwgaW52YWxpZCBpbmRleCBwYXR0ZXJuCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChfdGhpcy5pc01vdW50ZWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIC8vIFdlIG5lZWQgdGhpcyBjaGVjayB0byBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgc2VhcmNoIHJlc3VsdHMgY29tZSBiYWNrIGluIGEgZGlmZmVyZW50CiAgICAgICAgICAgICAgLy8gb3JkZXIgdGhhbiB0aGV5IHdlcmUgc2VudCBvdXQuIE9ubHkgbG9hZCByZXN1bHRzIGZvciB0aGUgbW9zdCByZWNlbnQgc2VhcmNoLgogICAgICAgICAgICAgIGlmIChzZWFyY2hWYWx1ZSA9PT0gX3RoaXMuc3RhdGUuc2VhcmNoVmFsdWUpIHsKICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBzYXZlZE9iamVjdHMubWFwKGZ1bmN0aW9uIChpbmRleFBhdHRlcm5TYXZlZE9iamVjdCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpbmRleFBhdHRlcm5TYXZlZE9iamVjdC5hdHRyaWJ1dGVzLnRpdGxlLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpbmRleFBhdHRlcm5TYXZlZE9iamVjdC5pZAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAob25Ob0luZGV4UGF0dGVybnMgJiYgc2VhcmNoVmFsdWUgPT09ICcnICYmIG9wdGlvbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIG9uTm9JbmRleFBhdHRlcm5zKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgMzAwKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZmV0Y2hPcHRpb25zIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgc2VhcmNoVmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGlzTG9hZGluZzogdHJ1ZSwKICAgICAgICBzZWFyY2hWYWx1ZTogc2VhcmNoVmFsdWUKICAgICAgfSwgX3RoaXMuZGVib3VuY2VkRmV0Y2guYmluZChudWxsLCBzZWFyY2hWYWx1ZSkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25DaGFuZ2UiLCBmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb25zKSB7CiAgICAgIF90aGlzLnByb3BzLm9uQ2hhbmdlKF9sb2Rhc2guZGVmYXVsdC5nZXQoc2VsZWN0ZWRPcHRpb25zLCAnMC52YWx1ZScpKTsKICAgIH0pOwoKICAgIF90aGlzLnN0YXRlID0gewogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBvcHRpb25zOiBbXSwKICAgICAgc2VsZWN0ZWRJbmRleFBhdHRlcm46IHVuZGVmaW5lZCwKICAgICAgc2VhcmNoVmFsdWU6IHVuZGVmaW5lZAogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhJbmRleFBhdHRlcm5TZWxlY3QsIFt7CiAgICBrZXk6ICJjb21wb25lbnRXaWxsVW5tb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7CiAgICAgIHRoaXMuaXNNb3VudGVkID0gZmFsc2U7CiAgICAgIHRoaXMuZGVib3VuY2VkRmV0Y2guY2FuY2VsKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLmlzTW91bnRlZCA9IHRydWU7CiAgICAgIHRoaXMuZmV0Y2hPcHRpb25zKCk7CiAgICAgIHRoaXMuZmV0Y2hTZWxlY3RlZEluZGV4UGF0dGVybih0aGlzLnByb3BzLmluZGV4UGF0dGVybklkKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7CiAgICAgIGlmIChuZXh0UHJvcHMuaW5kZXhQYXR0ZXJuSWQgIT09IHRoaXMucHJvcHMuaW5kZXhQYXR0ZXJuSWQpIHsKICAgICAgICB0aGlzLmZldGNoU2VsZWN0ZWRJbmRleFBhdHRlcm4obmV4dFByb3BzLmluZGV4UGF0dGVybklkKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gdGhpcy5wcm9wcywKICAgICAgICAgIGZpZWxkVHlwZXMgPSBfdGhpcyRwcm9wczIuZmllbGRUeXBlcywKICAgICAgICAgIG9uQ2hhbmdlID0gX3RoaXMkcHJvcHMyLm9uQ2hhbmdlLAogICAgICAgICAgaW5kZXhQYXR0ZXJuSWQgPSBfdGhpcyRwcm9wczIuaW5kZXhQYXR0ZXJuSWQsCiAgICAgICAgICBwbGFjZWhvbGRlciA9IF90aGlzJHByb3BzMi5wbGFjZWhvbGRlciwKICAgICAgICAgIG9uTm9JbmRleFBhdHRlcm5zID0gX3RoaXMkcHJvcHMyLm9uTm9JbmRleFBhdHRlcm5zLAogICAgICAgICAgc2F2ZWRPYmplY3RzQ2xpZW50ID0gX3RoaXMkcHJvcHMyLnNhdmVkT2JqZWN0c0NsaWVudCwKICAgICAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3RoaXMkcHJvcHMyLCBbImZpZWxkVHlwZXMiLCAib25DaGFuZ2UiLCAiaW5kZXhQYXR0ZXJuSWQiLCAicGxhY2Vob2xkZXIiLCAib25Ob0luZGV4UGF0dGVybnMiLCAic2F2ZWRPYmplY3RzQ2xpZW50Il0pOwoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb21ib0JveCwgX2V4dGVuZHMoe30sIHJlc3QsIHsKICAgICAgICBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsCiAgICAgICAgc2luZ2xlU2VsZWN0aW9uOiB0cnVlLAogICAgICAgIGlzTG9hZGluZzogdGhpcy5zdGF0ZS5pc0xvYWRpbmcsCiAgICAgICAgb25TZWFyY2hDaGFuZ2U6IHRoaXMuZmV0Y2hPcHRpb25zLAogICAgICAgIG9wdGlvbnM6IHRoaXMuc3RhdGUub3B0aW9ucywKICAgICAgICBzZWxlY3RlZE9wdGlvbnM6IHRoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleFBhdHRlcm4gPyBbdGhpcy5zdGF0ZS5zZWxlY3RlZEluZGV4UGF0dGVybl0gOiBbXSwKICAgICAgICBvbkNoYW5nZTogdGhpcy5vbkNoYW5nZQogICAgICB9KSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSW5kZXhQYXR0ZXJuU2VsZWN0Owp9KF9yZWFjdC5Db21wb25lbnQpOwoKZXhwb3J0cy5JbmRleFBhdHRlcm5TZWxlY3QgPSBJbmRleFBhdHRlcm5TZWxlY3Q7"},null]}