{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/es_ui_shared/static/forms/hook_form_lib/hooks/use_field.js","dependencies":[{"path":"src/plugins/es_ui_shared/static/forms/hook_form_lib/hooks/use_field.js","mtime":1585205041702},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMudXNlRmllbGQgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gcmVxdWlyZSgicmVhY3QiKTsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vY29uc3RhbnRzIik7Ci8qCiAqIExpY2Vuc2VkIHRvIEVsYXN0aWNzZWFyY2ggQi5WLiB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvcgogKiBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodAogKiBvd25lcnNoaXAuIEVsYXN0aWNzZWFyY2ggQi5WLiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyCiAqIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5CiAqIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKCnZhciB1c2VGaWVsZCA9IGZ1bmN0aW9uIHVzZUZpZWxkKGZvcm0sIHBhdGgpIHsKICB2YXIgY29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKICB2YXIgdmFsdWVDaGFuZ2VMaXN0ZW5lciA9IGFyZ3VtZW50cy5sZW5ndGggPiAzID8gYXJndW1lbnRzWzNdIDogdW5kZWZpbmVkOwogIHZhciBfY29uZmlnJHR5cGUgPSBjb25maWcudHlwZSwKICAgICAgdHlwZSA9IF9jb25maWckdHlwZSA9PT0gdm9pZCAwID8gX2NvbnN0YW50cy5GSUVMRF9UWVBFUy5URVhUIDogX2NvbmZpZyR0eXBlLAogICAgICBfY29uZmlnJGRlZmF1bHRWYWx1ZSA9IGNvbmZpZy5kZWZhdWx0VmFsdWUsCiAgICAgIGRlZmF1bHRWYWx1ZSA9IF9jb25maWckZGVmYXVsdFZhbHVlID09PSB2b2lkIDAgPyAnJyA6IF9jb25maWckZGVmYXVsdFZhbHVlLAogICAgICBfY29uZmlnJGxhYmVsID0gY29uZmlnLmxhYmVsLAogICAgICBsYWJlbCA9IF9jb25maWckbGFiZWwgPT09IHZvaWQgMCA/ICcnIDogX2NvbmZpZyRsYWJlbCwKICAgICAgX2NvbmZpZyRsYWJlbEFwcGVuZCA9IGNvbmZpZy5sYWJlbEFwcGVuZCwKICAgICAgbGFiZWxBcHBlbmQgPSBfY29uZmlnJGxhYmVsQXBwZW5kID09PSB2b2lkIDAgPyAnJyA6IF9jb25maWckbGFiZWxBcHBlbmQsCiAgICAgIF9jb25maWckaGVscFRleHQgPSBjb25maWcuaGVscFRleHQsCiAgICAgIGhlbHBUZXh0ID0gX2NvbmZpZyRoZWxwVGV4dCA9PT0gdm9pZCAwID8gJycgOiBfY29uZmlnJGhlbHBUZXh0LAogICAgICBfY29uZmlnJHZhbGlkYXRpb25zID0gY29uZmlnLnZhbGlkYXRpb25zLAogICAgICB2YWxpZGF0aW9ucyA9IF9jb25maWckdmFsaWRhdGlvbnMgPT09IHZvaWQgMCA/IFtdIDogX2NvbmZpZyR2YWxpZGF0aW9ucywKICAgICAgX2NvbmZpZyRmb3JtYXR0ZXJzID0gY29uZmlnLmZvcm1hdHRlcnMsCiAgICAgIGZvcm1hdHRlcnMgPSBfY29uZmlnJGZvcm1hdHRlcnMgPT09IHZvaWQgMCA/IFtdIDogX2NvbmZpZyRmb3JtYXR0ZXJzLAogICAgICBfY29uZmlnJGZpZWxkc1RvVmFsaWQgPSBjb25maWcuZmllbGRzVG9WYWxpZGF0ZU9uQ2hhbmdlLAogICAgICBmaWVsZHNUb1ZhbGlkYXRlT25DaGFuZ2UgPSBfY29uZmlnJGZpZWxkc1RvVmFsaWQgPT09IHZvaWQgMCA/IFtwYXRoXSA6IF9jb25maWckZmllbGRzVG9WYWxpZCwKICAgICAgX2NvbmZpZyRlcnJvckRpc3BsYXlEID0gY29uZmlnLmVycm9yRGlzcGxheURlbGF5LAogICAgICBlcnJvckRpc3BsYXlEZWxheSA9IF9jb25maWckZXJyb3JEaXNwbGF5RCA9PT0gdm9pZCAwID8gZm9ybS5fX29wdGlvbnMuZXJyb3JEaXNwbGF5RGVsYXkgOiBfY29uZmlnJGVycm9yRGlzcGxheUQsCiAgICAgIF9jb25maWckc2VyaWFsaXplciA9IGNvbmZpZy5zZXJpYWxpemVyLAogICAgICBzZXJpYWxpemVyID0gX2NvbmZpZyRzZXJpYWxpemVyID09PSB2b2lkIDAgPyBmdW5jdGlvbiAodmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZTsKICB9IDogX2NvbmZpZyRzZXJpYWxpemVyLAogICAgICBfY29uZmlnJGRlc2VyaWFsaXplciA9IGNvbmZpZy5kZXNlcmlhbGl6ZXIsCiAgICAgIGRlc2VyaWFsaXplciA9IF9jb25maWckZGVzZXJpYWxpemVyID09PSB2b2lkIDAgPyBmdW5jdGlvbiAodmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZTsKICB9IDogX2NvbmZpZyRkZXNlcmlhbGl6ZXI7CiAgdmFyIGluaXRpYWxWYWx1ZSA9ICgwLCBfcmVhY3QudXNlTWVtbykoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09ICdmdW5jdGlvbicgPyBkZXNlcmlhbGl6ZXIoZGVmYXVsdFZhbHVlKCkpIDogZGVzZXJpYWxpemVyKGRlZmF1bHRWYWx1ZSk7CiAgfSwgW2RlZmF1bHRWYWx1ZV0pOwoKICB2YXIgX3JlZiA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGluaXRpYWxWYWx1ZSksCiAgICAgIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksCiAgICAgIHZhbHVlID0gX3JlZjJbMF0sCiAgICAgIHNldFN0YXRlVmFsdWUgPSBfcmVmMlsxXTsKCiAgdmFyIF9yZWYzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoW10pLAogICAgICBfcmVmNCA9IF9zbGljZWRUb0FycmF5KF9yZWYzLCAyKSwKICAgICAgZXJyb3JzID0gX3JlZjRbMF0sCiAgICAgIHNldEVycm9ycyA9IF9yZWY0WzFdOwoKICB2YXIgX3JlZjUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh0cnVlKSwKICAgICAgX3JlZjYgPSBfc2xpY2VkVG9BcnJheShfcmVmNSwgMiksCiAgICAgIGlzUHJpc3RpbmUgPSBfcmVmNlswXSwKICAgICAgc2V0UHJpc3RpbmUgPSBfcmVmNlsxXTsKCiAgdmFyIF9yZWY3ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLAogICAgICBfcmVmOCA9IF9zbGljZWRUb0FycmF5KF9yZWY3LCAyKSwKICAgICAgaXNWYWxpZGF0aW5nID0gX3JlZjhbMF0sCiAgICAgIHNldFZhbGlkYXRpbmcgPSBfcmVmOFsxXTsKCiAgdmFyIF9yZWY5ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLAogICAgICBfcmVmMTAgPSBfc2xpY2VkVG9BcnJheShfcmVmOSwgMiksCiAgICAgIGlzQ2hhbmdpbmdWYWx1ZSA9IF9yZWYxMFswXSwKICAgICAgc2V0SXNDaGFuZ2luZ1ZhbHVlID0gX3JlZjEwWzFdOwoKICB2YXIgX3JlZjExID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLAogICAgICBfcmVmMTIgPSBfc2xpY2VkVG9BcnJheShfcmVmMTEsIDIpLAogICAgICBpc1ZhbGlkYXRlZCA9IF9yZWYxMlswXSwKICAgICAgc2V0SXNWYWxpZGF0ZWQgPSBfcmVmMTJbMV07CgogIHZhciB2YWxpZGF0ZUNvdW50ZXIgPSAoMCwgX3JlYWN0LnVzZVJlZikoMCk7CiAgdmFyIGNoYW5nZUNvdW50ZXIgPSAoMCwgX3JlYWN0LnVzZVJlZikoMCk7CiAgdmFyIGluZmxpZ2h0VmFsaWRhdGlvbiA9ICgwLCBfcmVhY3QudXNlUmVmKShudWxsKTsKICB2YXIgZGVib3VuY2VUaW1lb3V0ID0gKDAsIF9yZWFjdC51c2VSZWYpKG51bGwpOwogIHZhciBpc1VubW91bnRlZCA9ICgwLCBfcmVhY3QudXNlUmVmKShmYWxzZSk7IC8vIC0tIEhFTFBFUlMKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8qKgogICAqIEZpbHRlciBhbiBhcnJheSBvZiBlcnJvcnMgd2l0aCBzcGVjaWZpYyB2YWxpZGF0aW9uIHR5cGUgb24gdGhlbQogICAqCiAgICogQHBhcmFtIF9lcnJvcnMgVGhlIGFycmF5IG9mIGVycm9ycyB0byBmaWx0ZXIKICAgKiBAcGFyYW0gdmFsaWRhdGlvblR5cGUgVGhlIHZhbGlkYXRpb24gdHlwZSB0byBmaWx0ZXIgb3V0CiAgICovCgogIHZhciBmaWx0ZXJFcnJvcnMgPSBmdW5jdGlvbiBmaWx0ZXJFcnJvcnMoX2Vycm9ycykgewogICAgdmFyIHZhbGlkYXRpb25UeXBlVG9GaWx0ZXJPdXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IF9jb25zdGFudHMuVkFMSURBVElPTl9UWVBFUy5GSUVMRDsKICAgIHZhciB2YWxpZGF0aW9uVHlwZVRvQXJyYXkgPSBBcnJheS5pc0FycmF5KHZhbGlkYXRpb25UeXBlVG9GaWx0ZXJPdXQpID8gdmFsaWRhdGlvblR5cGVUb0ZpbHRlck91dCA6IFt2YWxpZGF0aW9uVHlwZVRvRmlsdGVyT3V0XTsKICAgIHJldHVybiBfZXJyb3JzLmZpbHRlcihmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgcmV0dXJuIHZhbGlkYXRpb25UeXBlVG9BcnJheS5ldmVyeShmdW5jdGlvbiAoX3R5cGUpIHsKICAgICAgICByZXR1cm4gZXJyb3IudmFsaWRhdGlvblR5cGUgIT09IF90eXBlOwogICAgICB9KTsKICAgIH0pOwogIH07CgogIHZhciBmb3JtYXRJbnB1dFZhbHVlID0gZnVuY3Rpb24gZm9ybWF0SW5wdXRWYWx1ZShpbnB1dFZhbHVlKSB7CiAgICB2YXIgaXNFbXB0eVN0cmluZyA9IHR5cGVvZiBpbnB1dFZhbHVlID09PSAnc3RyaW5nJyAmJiBpbnB1dFZhbHVlLnRyaW0oKSA9PT0gJyc7CgogICAgaWYgKGlzRW1wdHlTdHJpbmcpIHsKICAgICAgcmV0dXJuIGlucHV0VmFsdWU7CiAgICB9CgogICAgdmFyIGZvcm1EYXRhID0gZm9ybS5nZXRGb3JtRGF0YSh7CiAgICAgIHVuZmxhdHRlbjogZmFsc2UKICAgIH0pOwogICAgcmV0dXJuIGZvcm1hdHRlcnMucmVkdWNlKGZ1bmN0aW9uIChvdXRwdXQsIGZvcm1hdHRlcikgewogICAgICByZXR1cm4gZm9ybWF0dGVyKG91dHB1dCwgZm9ybURhdGEpOwogICAgfSwgaW5wdXRWYWx1ZSk7CiAgfTsKCiAgdmFyIG9uVmFsdWVDaGFuZ2UgPSBmdW5jdGlvbiBvblZhbHVlQ2hhbmdlKCkgewogICAgdmFyIGNoYW5nZUl0ZXJhdGlvbiwgc3RhcnRUaW1lLCBuZXdWYWx1ZSwgZGVsdGE7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIG9uVmFsdWVDaGFuZ2UkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBjaGFuZ2VJdGVyYXRpb24gPSArK2NoYW5nZUNvdW50ZXIuY3VycmVudDsKICAgICAgICAgICAgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTsKCiAgICAgICAgICAgIGlmIChkZWJvdW5jZVRpbWVvdXQuY3VycmVudCkgewogICAgICAgICAgICAgIGNsZWFyVGltZW91dChkZWJvdW5jZVRpbWVvdXQuY3VycmVudCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChlcnJvckRpc3BsYXlEZWxheSA+IDApIHsKICAgICAgICAgICAgICBzZXRJc0NoYW5naW5nVmFsdWUodHJ1ZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5ld1ZhbHVlID0gc2VyaWFsaXplT3V0cHV0KHZhbHVlKTsgLy8gTm90aWZ5IGxpc3RlbmVyCgogICAgICAgICAgICBpZiAodmFsdWVDaGFuZ2VMaXN0ZW5lcikgewogICAgICAgICAgICAgIHZhbHVlQ2hhbmdlTGlzdGVuZXIobmV3VmFsdWUpOwogICAgICAgICAgICB9IC8vIFVwZGF0ZSB0aGUgZm9ybSBkYXRhIG9ic2VydmFibGUKCgogICAgICAgICAgICBmb3JtLl9fdXBkYXRlRm9ybURhdGFBdChwYXRoLCBuZXdWYWx1ZSk7IC8vIFZhbGlkYXRlIGZpZWxkKHMpIGFuZCBzZXQgZm9ybS5pc1ZhbGlkIGZsYWcKCgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChmb3JtLl9fdmFsaWRhdGVGaWVsZHMoZmllbGRzVG9WYWxpZGF0ZU9uQ2hhbmdlKSk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBpZiAoIWlzVW5tb3VudGVkLmN1cnJlbnQpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBJZiB3ZSBoYXZlIHNldCBhIGRlbGF5IHRvIGRpc3BsYXkgdGhlIGVycm9yIG1lc3NhZ2UgYWZ0ZXIgdGhlIGZpZWxkIHZhbHVlIGhhcyBjaGFuZ2VkLAogICAgICAgICAgICAgKiB3ZSBmaXJzdCBjaGVjayB0aGF0IHRoaXMgaXMgdGhlIGxhc3QgImNoYW5nZSBpdGVyYXRpb24iICg9PT0gdGhlIGxhc3Qga2V5c3Ryb2tlIGZyb20gdGhlIHVzZXIpCiAgICAgICAgICAgICAqIGFuZCB0aGVuLCB3ZSB2ZXJpZnkgaG93IGxvbmcgd2UndmUgYWxyZWFkeSB3YWl0ZWQgZm9yIGFzIGZvcm0uX192YWxpZGF0ZUZpZWxkcygpIGlzIGFzeW5jaHJvbm91cwogICAgICAgICAgICAgKiBhbmQgbWlnaHQgYWxyZWFkeSBoYXZlIHRha2VuIG1vcmUgdGhhbiB0aGUgc3BlY2lmaWVkIGRlbGF5KQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgaWYgKGVycm9yRGlzcGxheURlbGF5ID4gMCAmJiBjaGFuZ2VJdGVyYXRpb24gPT09IGNoYW5nZUNvdW50ZXIuY3VycmVudCkgewogICAgICAgICAgICAgIGRlbHRhID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTsKCiAgICAgICAgICAgICAgaWYgKGRlbHRhIDwgZXJyb3JEaXNwbGF5RGVsYXkpIHsKICAgICAgICAgICAgICAgIGRlYm91bmNlVGltZW91dC5jdXJyZW50ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGRlYm91bmNlVGltZW91dC5jdXJyZW50ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgc2V0SXNDaGFuZ2luZ1ZhbHVlKGZhbHNlKTsKICAgICAgICAgICAgICAgIH0sIGVycm9yRGlzcGxheURlbGF5IC0gZGVsdGEpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRJc0NoYW5naW5nVmFsdWUoZmFsc2UpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfTsKCiAgdmFyIGNhbmNlbEluZmxpZ2h0VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIGNhbmNlbEluZmxpZ2h0VmFsaWRhdGlvbigpIHsKICAgIC8vIENhbmNlbCBhbnkgaW5mbGlnaHQgdmFsaWRhdGlvbiAobGlrZSBhbiBIVFRQIFJlcXVlc3QpCiAgICBpZiAoaW5mbGlnaHRWYWxpZGF0aW9uLmN1cnJlbnQgJiYgdHlwZW9mIGluZmxpZ2h0VmFsaWRhdGlvbi5jdXJyZW50LmNhbmNlbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBpbmZsaWdodFZhbGlkYXRpb24uY3VycmVudC5jYW5jZWwoKTsKICAgICAgaW5mbGlnaHRWYWxpZGF0aW9uLmN1cnJlbnQgPSBudWxsOwogICAgfQogIH07CgogIHZhciBydW5WYWxpZGF0aW9ucyA9IGZ1bmN0aW9uIHJ1blZhbGlkYXRpb25zKF9yZWYxMykgewogICAgdmFyIGZvcm1EYXRhID0gX3JlZjEzLmZvcm1EYXRhLAogICAgICAgIHZhbHVlVG9WYWxpZGF0ZSA9IF9yZWYxMy52YWx1ZSwKICAgICAgICB2YWxpZGF0aW9uVHlwZVRvVmFsaWRhdGUgPSBfcmVmMTMudmFsaWRhdGlvblR5cGVUb1ZhbGlkYXRlOwogICAgLy8gQnkgZGVmYXVsdCwgZm9yIGZpZWxkcyB0aGF0IGhhdmUgYW4gYXN5bmNocm9ub3VzIHZhbGlkYXRpb24KICAgIC8vIHdlIHdpbGwgY2xlYXIgdGhlIGVycm9ycyBhcyBzb29uIGFzIHRoZSBmaWVsZCB2YWx1ZSBjaGFuZ2VzLgogICAgY2xlYXJFcnJvcnMoW19jb25zdGFudHMuVkFMSURBVElPTl9UWVBFUy5GSUVMRCwgX2NvbnN0YW50cy5WQUxJREFUSU9OX1RZUEVTLkFTWU5DXSk7CiAgICBjYW5jZWxJbmZsaWdodFZhbGlkYXRpb24oKTsKCiAgICB2YXIgcnVuQXN5bmMgPSBmdW5jdGlvbiBydW5Bc3luYygpIHsKICAgICAgdmFyIHZhbGlkYXRpb25FcnJvcnMsIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24sIF9kaWRJdGVyYXRvckVycm9yLCBfaXRlcmF0b3JFcnJvciwgX2l0ZXJhdG9yLCBfc3RlcCwgdmFsaWRhdGlvbiwgdmFsaWRhdG9yLCBfdmFsaWRhdGlvbiRleGl0T25GYWksIGV4aXRPbkZhaWwsIF92YWxpZGF0aW9uJHR5cGUsIHZhbGlkYXRpb25UeXBlLCB2YWxpZGF0aW9uUmVzdWx0OwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBydW5Bc3luYyQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9ycyA9IFtdOwogICAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA0OwogICAgICAgICAgICAgIF9pdGVyYXRvciA9IHZhbGlkYXRpb25zW1N5bWJvbC5pdGVyYXRvcl0oKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBpZiAoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHZhbGlkYXRpb24gPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgICBpbmZsaWdodFZhbGlkYXRpb24uY3VycmVudCA9IG51bGw7CiAgICAgICAgICAgICAgdmFsaWRhdG9yID0gdmFsaWRhdGlvbi52YWxpZGF0b3IsIF92YWxpZGF0aW9uJGV4aXRPbkZhaSA9IHZhbGlkYXRpb24uZXhpdE9uRmFpbCwgZXhpdE9uRmFpbCA9IF92YWxpZGF0aW9uJGV4aXRPbkZhaSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF92YWxpZGF0aW9uJGV4aXRPbkZhaSwgX3ZhbGlkYXRpb24kdHlwZSA9IHZhbGlkYXRpb24udHlwZSwgdmFsaWRhdGlvblR5cGUgPSBfdmFsaWRhdGlvbiR0eXBlID09PSB2b2lkIDAgPyBfY29uc3RhbnRzLlZBTElEQVRJT05fVFlQRVMuRklFTEQgOiBfdmFsaWRhdGlvbiR0eXBlOwoKICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgdmFsaWRhdGlvblR5cGVUb1ZhbGlkYXRlICE9PSAndW5kZWZpbmVkJyAmJiB2YWxpZGF0aW9uVHlwZSAhPT0gdmFsaWRhdGlvblR5cGVUb1ZhbGlkYXRlKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoImNvbnRpbnVlIiwgMjEpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBpbmZsaWdodFZhbGlkYXRpb24uY3VycmVudCA9IHZhbGlkYXRvcih7CiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUb1ZhbGlkYXRlLAogICAgICAgICAgICAgICAgZXJyb3JzOiB2YWxpZGF0aW9uRXJyb3JzLAogICAgICAgICAgICAgICAgZm9ybTogZm9ybSwKICAgICAgICAgICAgICAgIGZvcm1EYXRhOiBmb3JtRGF0YSwKICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE1OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoaW5mbGlnaHRWYWxpZGF0aW9uLmN1cnJlbnQpOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICB2YWxpZGF0aW9uUmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgiY29udGludWUiLCAyMSk7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnMucHVzaChfb2JqZWN0U3ByZWFkKHt9LCB2YWxpZGF0aW9uUmVzdWx0LCB7CiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uVHlwZTogdmFsaWRhdGlvblR5cGUgfHwgX2NvbnN0YW50cy5WQUxJREFUSU9OX1RZUEVTLkZJRUxECiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBpZiAoIWV4aXRPbkZhaWwpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJicmVhayIsIDI0KTsKCiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDMwOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDI2OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSg0KTsKICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBfY29udGV4dDIudDA7CgogICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMzA7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAzMTsKCiAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAzMzsKCiAgICAgICAgICAgICAgaWYgKCFfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CgogICAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuZmluaXNoKDMzKTsKCiAgICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5maW5pc2goMzApOwoKICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgdmFsaWRhdGlvbkVycm9ycyk7CgogICAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgbnVsbCwgW1s0LCAyNiwgMzAsIDM4XSwgWzMxLCwgMzMsIDM3XV0pOwogICAgfTsKCiAgICB2YXIgcnVuU3luYyA9IGZ1bmN0aW9uIHJ1blN5bmMoKSB7CiAgICAgIHZhciB2YWxpZGF0aW9uRXJyb3JzID0gW107IC8vIFNlcXVlbnRpYWxseSBleGVjdXRlIGFsbCB0aGUgdmFsaWRhdGlvbnMgZm9yIHRoZSBmaWVsZAoKICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTsKICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlOwogICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gdmFsaWRhdGlvbnNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHsKICAgICAgICAgIHZhciBfdmFsaWRhdGlvbiA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICB2YXIgX3ZhbGlkYXRvciA9IF92YWxpZGF0aW9uLnZhbGlkYXRvciwKICAgICAgICAgICAgICBfdmFsaWRhdGlvbiRleGl0T25GYWkyID0gX3ZhbGlkYXRpb24uZXhpdE9uRmFpbCwKICAgICAgICAgICAgICBfZXhpdE9uRmFpbCA9IF92YWxpZGF0aW9uJGV4aXRPbkZhaTIgPT09IHZvaWQgMCA/IHRydWUgOiBfdmFsaWRhdGlvbiRleGl0T25GYWkyLAogICAgICAgICAgICAgIF92YWxpZGF0aW9uJHR5cGUyID0gX3ZhbGlkYXRpb24udHlwZSwKICAgICAgICAgICAgICBfdmFsaWRhdGlvblR5cGUgPSBfdmFsaWRhdGlvbiR0eXBlMiA9PT0gdm9pZCAwID8gX2NvbnN0YW50cy5WQUxJREFUSU9OX1RZUEVTLkZJRUxEIDogX3ZhbGlkYXRpb24kdHlwZTI7CgogICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uVHlwZVRvVmFsaWRhdGUgIT09ICd1bmRlZmluZWQnICYmIF92YWxpZGF0aW9uVHlwZSAhPT0gdmFsaWRhdGlvblR5cGVUb1ZhbGlkYXRlKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBfdmFsaWRhdGlvblJlc3VsdCA9IF92YWxpZGF0b3IoewogICAgICAgICAgICB2YWx1ZTogdmFsdWVUb1ZhbGlkYXRlLAogICAgICAgICAgICBlcnJvcnM6IHZhbGlkYXRpb25FcnJvcnMsCiAgICAgICAgICAgIGZvcm06IGZvcm0sCiAgICAgICAgICAgIGZvcm1EYXRhOiBmb3JtRGF0YSwKICAgICAgICAgICAgcGF0aDogcGF0aAogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKCFfdmFsaWRhdGlvblJlc3VsdCkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoISFfdmFsaWRhdGlvblJlc3VsdC50aGVuKSB7CiAgICAgICAgICAgIC8vIFRoZSB2YWxpZGF0b3IgcmV0dXJuZWQgYSBQcm9taXNlOiBhYm9ydCBhbmQgcnVuIHRoZSB2YWxpZGF0aW9ucyBhc3luY2hyb25vdXNseQogICAgICAgICAgICAvLyBXZSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBvbmZsaXRoIHByb21pc2Ugc28gd2UgY2FuIGNhbmNlbCBpdC4KICAgICAgICAgICAgaW5mbGlnaHRWYWxpZGF0aW9uLmN1cnJlbnQgPSBfdmFsaWRhdGlvblJlc3VsdDsKICAgICAgICAgICAgY2FuY2VsSW5mbGlnaHRWYWxpZGF0aW9uKCk7CiAgICAgICAgICAgIHJldHVybiBydW5Bc3luYygpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnMucHVzaChfb2JqZWN0U3ByZWFkKHt9LCBfdmFsaWRhdGlvblJlc3VsdCwgewogICAgICAgICAgICB2YWxpZGF0aW9uVHlwZTogX3ZhbGlkYXRpb25UeXBlIHx8IF9jb25zdGFudHMuVkFMSURBVElPTl9UWVBFUy5GSUVMRAogICAgICAgICAgfSkpOwoKICAgICAgICAgIGlmIChfZXhpdE9uRmFpbCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7CiAgICAgICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTsKICAgICAgICAgIH0KICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikgewogICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdmFsaWRhdGlvbkVycm9yczsKICAgIH07IC8vIFdlIGZpcnN0IHRyeSB0byBydW4gdGhlIHZhbGlkYXRpb25zIHN5bmNocm9ub3VzbHkKCgogICAgcmV0dXJuIHJ1blN5bmMoKTsKICB9OyAvLyAtLSBBUEkKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKICB2YXIgY2xlYXJFcnJvcnMgPSBmdW5jdGlvbiBjbGVhckVycm9ycygpIHsKICAgIHZhciB2YWxpZGF0aW9uVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogX2NvbnN0YW50cy5WQUxJREFUSU9OX1RZUEVTLkZJRUxEOwogICAgc2V0RXJyb3JzKGZ1bmN0aW9uIChwcmV2aW91c0Vycm9ycykgewogICAgICByZXR1cm4gZmlsdGVyRXJyb3JzKHByZXZpb3VzRXJyb3JzLCB2YWxpZGF0aW9uVHlwZSk7CiAgICB9KTsKICB9OwogIC8qKgogICAqIFZhbGlkYXRlIGEgZm9ybSBmaWVsZCwgcnVubmluZyBhbGwgaXRzIHZhbGlkYXRpb25zLgogICAqIElmIGEgdmFsaWRhdGlvblR5cGUgaXMgcHJvdmlkZWQgdGhlbiBvbmx5IHRoYXQgdmFsaWRhdGlvbiB3aWxsIGJlIGV4ZWN1dGVkLAogICAqIHNraXBwaW5nIHRoZSBvdGhlciB0eXBlIG9mIHZhbGlkYXRpb24gdGhhdCBtaWdodCBleGlzdC4KICAgKi8KCgogIHZhciB2YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogICAgdmFyIHZhbGlkYXRpb25EYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgIHZhciBfdmFsaWRhdGlvbkRhdGEkZm9ybUQgPSB2YWxpZGF0aW9uRGF0YS5mb3JtRGF0YSwKICAgICAgICBmb3JtRGF0YSA9IF92YWxpZGF0aW9uRGF0YSRmb3JtRCA9PT0gdm9pZCAwID8gZm9ybS5nZXRGb3JtRGF0YSh7CiAgICAgIHVuZmxhdHRlbjogZmFsc2UKICAgIH0pIDogX3ZhbGlkYXRpb25EYXRhJGZvcm1ELAogICAgICAgIF92YWxpZGF0aW9uRGF0YSR2YWx1ZSA9IHZhbGlkYXRpb25EYXRhLnZhbHVlLAogICAgICAgIHZhbHVlVG9WYWxpZGF0ZSA9IF92YWxpZGF0aW9uRGF0YSR2YWx1ZSA9PT0gdm9pZCAwID8gdmFsdWUgOiBfdmFsaWRhdGlvbkRhdGEkdmFsdWUsCiAgICAgICAgdmFsaWRhdGlvblR5cGUgPSB2YWxpZGF0aW9uRGF0YS52YWxpZGF0aW9uVHlwZTsKICAgIHNldElzVmFsaWRhdGVkKHRydWUpOwogICAgc2V0VmFsaWRhdGluZyh0cnVlKTsgLy8gQnkgdGhlIHRpbWUgb3VyIHZhbGlkYXRlIGZ1bmN0aW9uIGhhcyByZWFjaGVkIGNvbXBsZXRpb24sIGl04oCZcyBwb3NzaWJsZQogICAgLy8gdGhhdCB2YWxpZGF0ZSgpIHdpbGwgaGF2ZSBiZWVuIGNhbGxlZCBhZ2Fpbi4gSWYgdGhpcyBpcyB0aGUgY2FzZSwgd2UgbmVlZAogICAgLy8gdG8gaWdub3JlIHRoZSByZXN1bHRzIG9mIHRoaXMgaW52b2NhdGlvbiBhbmQgb25seSB1c2UgdGhlIHJlc3VsdHMgb2YKICAgIC8vIHRoZSBtb3N0IHJlY2VudCBpbnZvY2F0aW9uIHRvIHVwZGF0ZSB0aGUgZXJyb3Igc3RhdGUgZm9yIGEgZmllbGQKCiAgICB2YXIgdmFsaWRhdGVJdGVyYXRpb24gPSArK3ZhbGlkYXRlQ291bnRlci5jdXJyZW50OwoKICAgIHZhciBvblZhbGlkYXRpb25FcnJvcnMgPSBmdW5jdGlvbiBvblZhbGlkYXRpb25FcnJvcnMoX3ZhbGlkYXRpb25FcnJvcnMpIHsKICAgICAgaWYgKHZhbGlkYXRlSXRlcmF0aW9uID09PSB2YWxpZGF0ZUNvdW50ZXIuY3VycmVudCkgewogICAgICAgIC8vIFRoaXMgaXMgdGhlIG1vc3QgcmVjZW50IGludm9jYXRpb24KICAgICAgICBzZXRWYWxpZGF0aW5nKGZhbHNlKTsgLy8gVXBkYXRlIHRoZSBlcnJvcnMgYXJyYXkKCiAgICAgICAgdmFyIGZpbHRlcmVkRXJyb3JzID0gZmlsdGVyRXJyb3JzKGVycm9ycywgdmFsaWRhdGlvblR5cGUpOwogICAgICAgIHNldEVycm9ycyhbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGZpbHRlcmVkRXJyb3JzKSwgX3RvQ29uc3VtYWJsZUFycmF5KF92YWxpZGF0aW9uRXJyb3JzKSkpOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGlzVmFsaWQ6IF92YWxpZGF0aW9uRXJyb3JzLmxlbmd0aCA9PT0gMCwKICAgICAgICBlcnJvcnM6IF92YWxpZGF0aW9uRXJyb3JzCiAgICAgIH07CiAgICB9OwoKICAgIHZhciB2YWxpZGF0aW9uRXJyb3JzID0gcnVuVmFsaWRhdGlvbnMoewogICAgICBmb3JtRGF0YTogZm9ybURhdGEsCiAgICAgIHZhbHVlOiB2YWx1ZVRvVmFsaWRhdGUsCiAgICAgIHZhbGlkYXRpb25UeXBlVG9WYWxpZGF0ZTogdmFsaWRhdGlvblR5cGUKICAgIH0pOwoKICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzLnRoZW4pIHsKICAgICAgcmV0dXJuIHZhbGlkYXRpb25FcnJvcnMudGhlbihvblZhbGlkYXRpb25FcnJvcnMpOwogICAgfQoKICAgIHJldHVybiBvblZhbGlkYXRpb25FcnJvcnModmFsaWRhdGlvbkVycm9ycyk7CiAgfTsKICAvKioKICAgKiBIYW5kbGVyIHRvIGNoYW5nZSB0aGUgZmllbGQgdmFsdWUKICAgKgogICAqIEBwYXJhbSBuZXdWYWx1ZSBUaGUgbmV3IHZhbHVlIHRvIGFzc2lnbiB0byB0aGUgZmllbGQKICAgKi8KCgogIHZhciBzZXRWYWx1ZSA9IGZ1bmN0aW9uIHNldFZhbHVlKG5ld1ZhbHVlKSB7CiAgICBpZiAoaXNQcmlzdGluZSkgewogICAgICBzZXRQcmlzdGluZShmYWxzZSk7CiAgICB9CgogICAgdmFyIGZvcm1hdHRlZFZhbHVlID0gZm9ybWF0SW5wdXRWYWx1ZShuZXdWYWx1ZSk7CiAgICBzZXRTdGF0ZVZhbHVlKGZvcm1hdHRlZFZhbHVlKTsKICB9OwoKICB2YXIgX3NldEVycm9ycyA9IGZ1bmN0aW9uIF9zZXRFcnJvcnMoX2Vycm9ycykgewogICAgc2V0RXJyb3JzKF9lcnJvcnMubWFwKGZ1bmN0aW9uIChlcnJvcikgewogICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7CiAgICAgICAgdmFsaWRhdGlvblR5cGU6IF9jb25zdGFudHMuVkFMSURBVElPTl9UWVBFUy5GSUVMRAogICAgICB9LCBlcnJvcik7CiAgICB9KSk7CiAgfTsKICAvKioKICAgKiBGb3JtIDxpbnB1dCAvPiAib25DaGFuZ2UiIGV2ZW50IGhhbmRsZXIKICAgKgogICAqIEBwYXJhbSBldmVudCBGb3JtIGlucHV0IGNoYW5nZSBldmVudAogICAqLwoKCiAgdmFyIG9uQ2hhbmdlID0gZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgIHZhciBuZXdWYWx1ZSA9IHt9Lmhhc093blByb3BlcnR5LmNhbGwoZXZlbnQudGFyZ2V0LCAnY2hlY2tlZCcpID8gZXZlbnQudGFyZ2V0LmNoZWNrZWQgOiBldmVudC50YXJnZXQudmFsdWU7CiAgICBzZXRWYWx1ZShuZXdWYWx1ZSk7CiAgfTsKICAvKioKICAgKiBBcyB3ZSBjYW4gaGF2ZSBtdWx0aXBsZSB2YWxpZGF0aW9uIHR5cGVzIChGSUVMRCwgQVNZTkMsIEFSUkFZX0lURU0pLCB0aGlzCiAgICogbWV0aG9kIGFsbG93cyB1cyB0byByZXRyaWV2ZSBlcnJvciBtZXNzYWdlcyBmb3IgY2VydGFpbiB0eXBlcyBvZiB2YWxpZGF0aW9uLgogICAqCiAgICogRm9yIGV4YW1wbGUsIGlmIHdlIHdhbnQgdG8gdmFsaWRhdGlvbiBlcnJvciBtZXNzYWdlcyB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlICJzYXZlIiBidXR0b24KICAgKiBfYnV0XyBpbiBjYXNlIG9mIGFuIGFzeW5jaHJvbm91cyB2YWxpZGF0aW9uIChmb3IgZXguIGFuIEhUVFAgcmVxdWVzdCB0aGF0IHdvdWxkIHZhbGlkYXRlIGFuIGluZGV4IG5hbWUpIHdlCiAgICogd2FudCB0byBpbW1lZGlhdGVseSBkaXNwbGF5IHRoZSBlcnJvciBtZXNzYWdlLCB3ZSB3b3VsZCBoYXZlIDIgdHlwZXMgb2YgdmFsaWRhdGlvbjogRklFTEQgJiBBU1lOQwogICAqCiAgICogQHBhcmFtIHZhbGlkYXRpb25UeXBlIFRoZSB2YWxpZGF0aW9uIHR5cGUgdG8gcmV0dXJuIGVycm9yIG1lc3NhZ2VzIGZyb20KICAgKi8KCgogIHZhciBnZXRFcnJvcnNNZXNzYWdlcyA9IGZ1bmN0aW9uIGdldEVycm9yc01lc3NhZ2VzKCkgewogICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgdmFyIGVycm9yQ29kZSA9IGFyZ3MuZXJyb3JDb2RlLAogICAgICAgIF9hcmdzJHZhbGlkYXRpb25UeXBlID0gYXJncy52YWxpZGF0aW9uVHlwZSwKICAgICAgICB2YWxpZGF0aW9uVHlwZSA9IF9hcmdzJHZhbGlkYXRpb25UeXBlID09PSB2b2lkIDAgPyBfY29uc3RhbnRzLlZBTElEQVRJT05fVFlQRVMuRklFTEQgOiBfYXJncyR2YWxpZGF0aW9uVHlwZTsKICAgIHZhciBlcnJvck1lc3NhZ2VzID0gZXJyb3JzLnJlZHVjZShmdW5jdGlvbiAobWVzc2FnZXMsIGVycm9yKSB7CiAgICAgIHZhciBpc1NhbWVFcnJvckNvZGUgPSBlcnJvckNvZGUgJiYgZXJyb3IuY29kZSA9PT0gZXJyb3JDb2RlOwogICAgICB2YXIgaXNTYW1ldmFsaWRhdGlvblR5cGUgPSBlcnJvci52YWxpZGF0aW9uVHlwZSA9PT0gdmFsaWRhdGlvblR5cGUgfHwgdmFsaWRhdGlvblR5cGUgPT09IF9jb25zdGFudHMuVkFMSURBVElPTl9UWVBFUy5GSUVMRCAmJiAhe30uaGFzT3duUHJvcGVydHkuY2FsbChlcnJvciwgJ3ZhbGlkYXRpb25UeXBlJyk7CgogICAgICBpZiAoaXNTYW1lRXJyb3JDb2RlIHx8IHR5cGVvZiBlcnJvckNvZGUgPT09ICd1bmRlZmluZWQnICYmIGlzU2FtZXZhbGlkYXRpb25UeXBlKSB7CiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzID8gIiIuY29uY2F0KG1lc3NhZ2VzLCAiLCAiKS5jb25jYXQoZXJyb3IubWVzc2FnZSkgOiBlcnJvci5tZXNzYWdlOwogICAgICB9CgogICAgICByZXR1cm4gbWVzc2FnZXM7CiAgICB9LCAnJyk7CiAgICByZXR1cm4gZXJyb3JNZXNzYWdlcyA/IGVycm9yTWVzc2FnZXMgOiBudWxsOwogIH07CgogIHZhciByZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgdmFyIHJlc2V0T3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogewogICAgICByZXNldFZhbHVlOiB0cnVlCiAgICB9OwogICAgdmFyIF9yZXNldE9wdGlvbnMkcmVzZXRWYSA9IHJlc2V0T3B0aW9ucy5yZXNldFZhbHVlLAogICAgICAgIHJlc2V0VmFsdWUgPSBfcmVzZXRPcHRpb25zJHJlc2V0VmEgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVzZXRPcHRpb25zJHJlc2V0VmE7CiAgICBzZXRQcmlzdGluZSh0cnVlKTsKICAgIHNldFZhbGlkYXRpbmcoZmFsc2UpOwogICAgc2V0SXNDaGFuZ2luZ1ZhbHVlKGZhbHNlKTsKICAgIHNldElzVmFsaWRhdGVkKGZhbHNlKTsKICAgIHNldEVycm9ycyhbXSk7CgogICAgaWYgKHJlc2V0VmFsdWUpIHsKICAgICAgc2V0VmFsdWUoaW5pdGlhbFZhbHVlKTsKICAgICAgcmV0dXJuIGluaXRpYWxWYWx1ZTsKICAgIH0KCiAgICByZXR1cm4gdmFsdWU7CiAgfTsKCiAgdmFyIHNlcmlhbGl6ZU91dHB1dCA9IGZ1bmN0aW9uIHNlcmlhbGl6ZU91dHB1dCgpIHsKICAgIHZhciByYXdWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdmFsdWU7CiAgICByZXR1cm4gc2VyaWFsaXplcihyYXdWYWx1ZSk7CiAgfTsgLy8gLS0gRUZGRUNUUwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBpZiAoaXNQcmlzdGluZSkgewogICAgICAvLyBBdm9pZCB2YWxpZGF0ZSBvbiBtb3VudAogICAgICByZXR1cm47CiAgICB9CgogICAgb25WYWx1ZUNoYW5nZSgpOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGRlYm91bmNlVGltZW91dC5jdXJyZW50KSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KGRlYm91bmNlVGltZW91dC5jdXJyZW50KTsKICAgICAgfQogICAgfTsKICB9LCBbdmFsdWVdKTsKICB2YXIgZmllbGQgPSB7CiAgICBwYXRoOiBwYXRoLAogICAgdHlwZTogdHlwZSwKICAgIGxhYmVsOiBsYWJlbCwKICAgIGxhYmVsQXBwZW5kOiBsYWJlbEFwcGVuZCwKICAgIGhlbHBUZXh0OiBoZWxwVGV4dCwKICAgIHZhbHVlOiB2YWx1ZSwKICAgIGVycm9yczogZXJyb3JzLAogICAgZm9ybTogZm9ybSwKICAgIGlzUHJpc3RpbmU6IGlzUHJpc3RpbmUsCiAgICBpc1ZhbGlkYXRpbmc6IGlzVmFsaWRhdGluZywKICAgIGlzVmFsaWRhdGVkOiBpc1ZhbGlkYXRlZCwKICAgIGlzQ2hhbmdpbmdWYWx1ZTogaXNDaGFuZ2luZ1ZhbHVlLAogICAgb25DaGFuZ2U6IG9uQ2hhbmdlLAogICAgZ2V0RXJyb3JzTWVzc2FnZXM6IGdldEVycm9yc01lc3NhZ2VzLAogICAgc2V0VmFsdWU6IHNldFZhbHVlLAogICAgc2V0RXJyb3JzOiBfc2V0RXJyb3JzLAogICAgY2xlYXJFcnJvcnM6IGNsZWFyRXJyb3JzLAogICAgdmFsaWRhdGU6IHZhbGlkYXRlLAogICAgcmVzZXQ6IHJlc2V0LAogICAgX19zZXJpYWxpemVPdXRwdXQ6IHNlcmlhbGl6ZU91dHB1dAogIH07CgogIGZvcm0uX19hZGRGaWVsZChmaWVsZCk7IC8vIEV4ZWN1dGVkIGZpcnN0ICgxKQoKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIC8qKgogICAgICogTk9URTogZWZmZWN0IGNsZWFudXAgYWN0dWFsbHkgaGFwcGVucyAqYWZ0ZXIqIHRoZSBuZXcgY29tcG9uZW50IGhhcyBiZWVuIG1vdW50ZWQsCiAgICAgKiBidXQgYmVmb3JlIHRoZSBuZXh0IGVmZmVjdCBjYWxsYmFjayBpcyBydW4uCiAgICAgKiBSZWY6IGh0dHBzOi8va2VudGNkb2Rkcy5jb20vYmxvZy91bmRlcnN0YW5kaW5nLXJlYWN0cy1rZXktcHJvcAogICAgICoKICAgICAqIFRoaXMgbWVhbnMgdGhhdCwgdGhlICJmb3JtLl9fYWRkRmllbGQoZmllbGQpIiBvdXRzaWRlIHRoZSBlZmZlY3Qgd2lsbCBiZSBjYWxsZWQgKmJlZm9yZSoKICAgICAqIHRoZSBjbGVhbnVwIGBmb3JtLl9fcmVtb3ZlRmllbGQocGF0aCk7YCBjcmVhdGluZyBhIHJhY2UgY29uZGl0aW9uLgogICAgICoKICAgICAqIFRPRE86IFNlZSBob3cgd2UgY291bGQgcmVmYWN0b3IgInVzZV9maWVsZCIgJiAidXNlX2Zvcm0iIHRvIGF2b2lkIGhhdmluZyB0aGUKICAgICAqIGBmb3JtLl9fYWRkRmllbGQoZmllbGQpYCBjYWxsIG91dHNpZGUgdGhlIGVmZmVjdC4KICAgICAqLwogICAgZm9ybS5fX2FkZEZpZWxkKGZpZWxkKTsgLy8gRXhlY3V0ZWQgdGhpcmQgKDMpCgoKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIFJlbW92ZSBmaWVsZCBmcm9tIHRoZSBmb3JtIHdoZW4gaXQgaXMgdW5tb3VudGVkIG9yIGlmIGl0cyBwYXRoIGNoYW5nZXMuCiAgICAgIGlzVW5tb3VudGVkLmN1cnJlbnQgPSB0cnVlOwoKICAgICAgZm9ybS5fX3JlbW92ZUZpZWxkKHBhdGgpOyAvLyBFeGVjdXRlZCBzZWNvbmQgKDIpCgogICAgfTsKICB9LCBbcGF0aF0pOwogIHJldHVybiBmaWVsZDsKfTsKCmV4cG9ydHMudXNlRmllbGQgPSB1c2VGaWVsZDs="},null]}