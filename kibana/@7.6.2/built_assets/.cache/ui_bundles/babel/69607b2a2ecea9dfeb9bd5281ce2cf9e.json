{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/agg_types/agg_configs.js","dependencies":[{"path":"src/legacy/ui/public/agg_types/agg_configs.js","mtime":1585205040735},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuQWdnQ29uZmlncyA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX2FnZ19jb25maWcgPSByZXF1aXJlKCIuL2FnZ19jb25maWciKTsKCnZhciBfYWdnX2dyb3VwcyA9IHJlcXVpcmUoIi4uL3Zpcy9lZGl0b3JzL2RlZmF1bHQvYWdnX2dyb3VwcyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gcmVtb3ZlUGFyZW50QWdncyhvYmopIHsKICBmb3IgKHZhciBwcm9wIGluIG9iaikgewogICAgaWYgKHByb3AgPT09ICdwYXJlbnRBZ2dzJykgZGVsZXRlIG9ialtwcm9wXTtlbHNlIGlmIChfdHlwZW9mKG9ialtwcm9wXSkgPT09ICdvYmplY3QnKSByZW1vdmVQYXJlbnRBZ2dzKG9ialtwcm9wXSk7CiAgfQp9CgpmdW5jdGlvbiBwYXJzZVBhcmVudEFnZ3MoZHNsTHZsQ3Vyc29yLCBkc2wpIHsKICBpZiAoZHNsLnBhcmVudEFnZ3MpIHsKICAgIF9sb2Rhc2guZGVmYXVsdC5lYWNoKGRzbC5wYXJlbnRBZ2dzLCBmdW5jdGlvbiAoYWdnLCBrZXkpIHsKICAgICAgZHNsTHZsQ3Vyc29yW2tleV0gPSBhZ2c7CiAgICAgIHBhcnNlUGFyZW50QWdncyhkc2xMdmxDdXJzb3IsIGFnZyk7CiAgICB9KTsKICB9Cn0KCnZhciBBZ2dDb25maWdzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQWdnQ29uZmlncyhpbmRleFBhdHRlcm4pIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGNvbmZpZ1N0YXRlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107CiAgICB2YXIgc2NoZW1hcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBZ2dDb25maWdzKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImluZGV4UGF0dGVybiIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzY2hlbWFzIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRpbWVSYW5nZSIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhZ2dzIiwgdm9pZCAwKTsKCiAgICBjb25maWdTdGF0ZXMgPSBfYWdnX2NvbmZpZy5BZ2dDb25maWcuZW5zdXJlSWRzKGNvbmZpZ1N0YXRlcyk7CiAgICB0aGlzLmFnZ3MgPSBbXTsKICAgIHRoaXMuaW5kZXhQYXR0ZXJuID0gaW5kZXhQYXR0ZXJuOwogICAgdGhpcy5zY2hlbWFzID0gc2NoZW1hczsKICAgIGNvbmZpZ1N0YXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgcmV0dXJuIF90aGlzLmNyZWF0ZUFnZ0NvbmZpZyhwYXJhbXMpOwogICAgfSk7CgogICAgaWYgKHRoaXMuc2NoZW1hcykgewogICAgICB0aGlzLmluaXRpYWxpemVEZWZhdWx0c0Zyb21TY2hlbWFzKHNjaGVtYXMpOwogICAgfQogIH0KCiAgX2NyZWF0ZUNsYXNzKEFnZ0NvbmZpZ3MsIFt7CiAgICBrZXk6ICJpbml0aWFsaXplRGVmYXVsdHNGcm9tU2NoZW1hcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZURlZmF1bHRzRnJvbVNjaGVtYXMoc2NoZW1hcykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3IgYW55IHNjaGVtYSB3aGljaCBoYXMgdGhlbS4gSWYgdGhlIGRlZmF1bHRzCiAgICAgIC8vIGZvciBzb21lIHJlYXNvbiBoYXMgbW9yZSB0aGVuIHRoZSBtYXggb25seSBzZXQgdGhlIG1heCBudW1iZXIKICAgICAgLy8gb2YgZGVmYXVsdHMgKG5vdCBzdXJlIHdoeSBhIHNvbWVvbmUgZGVmaW5lIG1vcmUuLi4KICAgICAgLy8gYnV0IHdoYXRldmVyKS4gQWxzbyBpZiBhIHNjaGVtYS5uYW1lIGlzIGFscmVhZHkgc2V0IHRoZW4gZG9uJ3QKICAgICAgLy8gc2V0IGFueXRoaW5nLgoKCiAgICAgICgwLCBfbG9kYXNoLmRlZmF1bHQpKHNjaGVtYXMpLmZpbHRlcihmdW5jdGlvbiAoc2NoZW1hKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoc2NoZW1hLmRlZmF1bHRzKSAmJiBzY2hlbWEuZGVmYXVsdHMubGVuZ3RoID4gMDsKICAgICAgfSkuZWFjaChmdW5jdGlvbiAoc2NoZW1hKSB7CiAgICAgICAgaWYgKCFfdGhpczIuYWdncy5maW5kKGZ1bmN0aW9uIChhZ2cpIHsKICAgICAgICAgIHJldHVybiBhZ2cuc2NoZW1hICYmIGFnZy5zY2hlbWEubmFtZSA9PT0gc2NoZW1hLm5hbWU7CiAgICAgICAgfSkpIHsKICAgICAgICAgIHZhciBkZWZhdWx0cyA9IHNjaGVtYS5kZWZhdWx0cy5zbGljZSgwLCBzY2hlbWEubWF4KTsKCiAgICAgICAgICBfbG9kYXNoLmRlZmF1bHQuZWFjaChkZWZhdWx0cywgZnVuY3Rpb24gKGRlZmF1bHRTdGF0ZSkgewogICAgICAgICAgICB2YXIgc3RhdGUgPSBfbG9kYXNoLmRlZmF1bHQuZGVmYXVsdHMoewogICAgICAgICAgICAgIGlkOiBfYWdnX2NvbmZpZy5BZ2dDb25maWcubmV4dElkKF90aGlzMi5hZ2dzKQogICAgICAgICAgICB9LCBkZWZhdWx0U3RhdGUpOwoKICAgICAgICAgICAgX3RoaXMyLmFnZ3MucHVzaChuZXcgX2FnZ19jb25maWcuQWdnQ29uZmlnKF90aGlzMiwgc3RhdGUpKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY29tbWl0KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0VGltZVJhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUaW1lUmFuZ2UodGltZVJhbmdlKSB7CiAgICAgIHRoaXMudGltZVJhbmdlID0gdGltZVJhbmdlOwoKICAgICAgdmFyIHVwZGF0ZUFnZ1RpbWVSYW5nZSA9IGZ1bmN0aW9uIHVwZGF0ZUFnZ1RpbWVSYW5nZShhZ2cpIHsKICAgICAgICBfbG9kYXNoLmRlZmF1bHQuZWFjaChhZ2cucGFyYW1zLCBmdW5jdGlvbiAocGFyYW0pIHsKICAgICAgICAgIGlmIChwYXJhbSBpbnN0YW5jZW9mIF9hZ2dfY29uZmlnLkFnZ0NvbmZpZykgewogICAgICAgICAgICB1cGRhdGVBZ2dUaW1lUmFuZ2UocGFyYW0pOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAoX2xvZGFzaC5kZWZhdWx0LmdldChhZ2csICd0eXBlLm5hbWUnKSA9PT0gJ2RhdGVfaGlzdG9ncmFtJykgewogICAgICAgICAgYWdnLnBhcmFtcy50aW1lUmFuZ2UgPSB0aW1lUmFuZ2U7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdGhpcy5hZ2dzLmZvckVhY2godXBkYXRlQWdnVGltZVJhbmdlKTsKICAgIH0gLy8gY2xvbmUgbWV0aG9kIHdpbGwgcmV1c2UgZXhpc3RpbmcgQWdnQ29uZmlnIGluIHRoZSBsaXN0ICh3aWxsIG5vdCBjcmVhdGUgbmV3IGluc3RhbmNlcykKCiAgfSwgewogICAga2V5OiAiY2xvbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsb25lKCkgewogICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sCiAgICAgICAgICBfcmVmJGVuYWJsZWRPbmx5ID0gX3JlZi5lbmFibGVkT25seSwKICAgICAgICAgIGVuYWJsZWRPbmx5ID0gX3JlZiRlbmFibGVkT25seSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYkZW5hYmxlZE9ubHk7CgogICAgICB2YXIgZmlsdGVyQWdncyA9IGZ1bmN0aW9uIGZpbHRlckFnZ3MoYWdnKSB7CiAgICAgICAgaWYgKCFlbmFibGVkT25seSkgcmV0dXJuIHRydWU7CiAgICAgICAgcmV0dXJuIGFnZy5lbmFibGVkOwogICAgICB9OwoKICAgICAgdmFyIGFnZ0NvbmZpZ3MgPSBuZXcgQWdnQ29uZmlncyh0aGlzLmluZGV4UGF0dGVybiwgdGhpcy5hZ2dzLmZpbHRlcihmaWx0ZXJBZ2dzKSwgdGhpcy5zY2hlbWFzKTsKICAgICAgcmV0dXJuIGFnZ0NvbmZpZ3M7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlQWdnQ29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVBZ2dDb25maWcocGFyYW1zKSB7CiAgICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge30sCiAgICAgICAgICBfcmVmMiRhZGRUb0FnZ0NvbmZpZ3MgPSBfcmVmMi5hZGRUb0FnZ0NvbmZpZ3MsCiAgICAgICAgICBhZGRUb0FnZ0NvbmZpZ3MgPSBfcmVmMiRhZGRUb0FnZ0NvbmZpZ3MgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmMiRhZGRUb0FnZ0NvbmZpZ3M7CgogICAgICB2YXIgYWdnQ29uZmlnOwoKICAgICAgaWYgKHBhcmFtcyBpbnN0YW5jZW9mIF9hZ2dfY29uZmlnLkFnZ0NvbmZpZykgewogICAgICAgIGFnZ0NvbmZpZyA9IHBhcmFtczsKICAgICAgICBwYXJhbXMucGFyZW50ID0gdGhpczsKICAgICAgfSBlbHNlIHsKICAgICAgICBhZ2dDb25maWcgPSBuZXcgX2FnZ19jb25maWcuQWdnQ29uZmlnKHRoaXMsIHBhcmFtcyk7CiAgICAgIH0KCiAgICAgIGlmIChhZGRUb0FnZ0NvbmZpZ3MpIHsKICAgICAgICB0aGlzLmFnZ3MucHVzaChhZ2dDb25maWcpOwogICAgICB9CgogICAgICByZXR1cm4gYWdnQ29uZmlnOwogICAgfQogICAgLyoqCiAgICAgKiBEYXRhLWJ5LWRhdGEgY29tcGFyaXNvbiBvZiB0aGlzIEFnZ3JlZ2F0aW9uCiAgICAgKiBJZ25vcmVzIHRoZSBub24tYXJyYXkgaW5kZXhlcwogICAgICogQHBhcmFtIGFnZ0NvbmZpZ3MgYW4gQWdnQ29uZmlncyBpbnN0YW5jZQogICAgICovCgogIH0sIHsKICAgIGtleTogImpzb25EYXRhRXF1YWxzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBqc29uRGF0YUVxdWFscyhhZ2dDb25maWdzKSB7CiAgICAgIGlmIChhZ2dDb25maWdzLmxlbmd0aCAhPT0gdGhpcy5hZ2dzLmxlbmd0aCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFnZ3MubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBpZiAoIV9sb2Rhc2guZGVmYXVsdC5pc0VxdWFsKGFnZ0NvbmZpZ3NbaV0udG9KU09OKCksIHRoaXMuYWdnc1tpXS50b0pTT04oKSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogInRvRHNsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b0RzbCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgaGllcmFyY2hpY2FsID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTsKICAgICAgdmFyIGRzbFRvcEx2bCA9IHt9OwogICAgICB2YXIgZHNsTHZsQ3Vyc29yOwogICAgICB2YXIgbmVzdGVkTWV0cmljczsKCiAgICAgIGlmIChoaWVyYXJjaGljYWwpIHsKICAgICAgICAvLyBjb2xsZWN0IGFsbCBtZXRyaWNzLCBhbmQgZmlsdGVyIG91dCB0aGUgb25lcyB0aGF0IHdlIHdvbid0IGJlIGNvcHlpbmcKICAgICAgICBuZXN0ZWRNZXRyaWNzID0gdGhpcy5hZ2dzLmZpbHRlcihmdW5jdGlvbiAoYWdnKSB7CiAgICAgICAgICByZXR1cm4gYWdnLnR5cGUudHlwZSA9PT0gJ21ldHJpY3MnICYmIGFnZy50eXBlLm5hbWUgIT09ICdjb3VudCc7CiAgICAgICAgfSkubWFwKGZ1bmN0aW9uIChhZ2cpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNvbmZpZzogYWdnLAogICAgICAgICAgICBkc2w6IGFnZy50b0RzbChfdGhpczMpCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmdldFJlcXVlc3RBZ2dzKCkuZmlsdGVyKGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICByZXR1cm4gIWNvbmZpZy50eXBlLmhhc05vRHNsOwogICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChjb25maWcsIGksIGxpc3QpIHsKICAgICAgICBpZiAoIWRzbEx2bEN1cnNvcikgewogICAgICAgICAgLy8gc3RhcnQgYXQgdGhlIHRvcCBsZXZlbAogICAgICAgICAgZHNsTHZsQ3Vyc29yID0gZHNsVG9wTHZsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgcHJldkNvbmZpZyA9IGxpc3RbaSAtIDFdOwogICAgICAgICAgdmFyIHByZXZEc2wgPSBkc2xMdmxDdXJzb3JbcHJldkNvbmZpZy5pZF07IC8vIGFkdmFuY2UgdGhlIGN1cnNvciBhbmQgbmVzdCB1bmRlciB0aGUgcHJldmlvdXMgYWdnLCBvcgogICAgICAgICAgLy8gcHV0IGl0IG9uIHRoZSBzYW1lIGxldmVsIGlmIHRoZSBwcmV2aW91cyBhZ2cgZG9lc24ndCBhY2NlcHQKICAgICAgICAgIC8vIHN1YiBhZ2dzCgogICAgICAgICAgZHNsTHZsQ3Vyc29yID0gcHJldkRzbC5hZ2dzIHx8IGRzbEx2bEN1cnNvcjsKICAgICAgICB9CgogICAgICAgIHZhciBkc2wgPSBkc2xMdmxDdXJzb3JbY29uZmlnLmlkXSA9IGNvbmZpZy50b0RzbChfdGhpczMpOwogICAgICAgIHZhciBzdWJBZ2dzOwogICAgICAgIHBhcnNlUGFyZW50QWdncyhkc2xMdmxDdXJzb3IsIGRzbCk7CgogICAgICAgIGlmIChjb25maWcudHlwZS50eXBlID09PSBfYWdnX2dyb3Vwcy5BZ2dHcm91cE5hbWVzLkJ1Y2tldHMgJiYgaSA8IGxpc3QubGVuZ3RoIC0gMSkgewogICAgICAgICAgLy8gYnVja2V0cyB0aGF0IGFyZSBub3QgdGhlIGxhc3QgaXRlbSBpbiB0aGUgbGlzdCBhY2NlcHQgc3ViLWFnZ3MKICAgICAgICAgIHN1YkFnZ3MgPSBkc2wuYWdncyB8fCAoZHNsLmFnZ3MgPSB7fSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc3ViQWdncyAmJiBuZXN0ZWRNZXRyaWNzKSB7CiAgICAgICAgICBuZXN0ZWRNZXRyaWNzLmZvckVhY2goZnVuY3Rpb24gKGFnZykgewogICAgICAgICAgICBzdWJBZ2dzW2FnZy5jb25maWcuaWRdID0gYWdnLmRzbDsgLy8gaWYgYSBuZXN0ZWQgbWV0cmljIGFnZyBoYXMgcGFyZW50IGFnZ3MsIHdlIGhhdmUgdG8gYWRkIHRoZW0gdG8gZXZlcnkgbGV2ZWwgb2YgdGhlIHRyZWUKICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlICJidWNrZXRfcGF0aCIgcmVmZXJlbmNlcyBpbiB0aGUgbmVzdGVkIG1ldHJpYyBhZ2cgaXRzZWxmIGFyZSBzdGlsbCB3b3JraW5nCgogICAgICAgICAgICBpZiAoYWdnLmRzbC5wYXJlbnRBZ2dzKSB7CiAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoYWdnLmRzbC5wYXJlbnRBZ2dzKS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMykgewogICAgICAgICAgICAgICAgdmFyIF9yZWY0ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDIpLAogICAgICAgICAgICAgICAgICAgIHBhcmVudEFnZ0lkID0gX3JlZjRbMF0sCiAgICAgICAgICAgICAgICAgICAgcGFyZW50QWdnID0gX3JlZjRbMV07CgogICAgICAgICAgICAgICAgc3ViQWdnc1twYXJlbnRBZ2dJZF0gPSBwYXJlbnRBZ2c7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJlbW92ZVBhcmVudEFnZ3MoZHNsVG9wTHZsKTsKICAgICAgcmV0dXJuIGRzbFRvcEx2bDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRBbGwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFsbCgpIHsKICAgICAgcmV0dXJuIF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmFnZ3MpOwogICAgfQogIH0sIHsKICAgIGtleTogImJ5SW5kZXgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJ5SW5kZXgoaW5kZXgpIHsKICAgICAgcmV0dXJuIHRoaXMuYWdnc1tpbmRleF07CiAgICB9CiAgfSwgewogICAga2V5OiAiYnlJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYnlJZChpZCkgewogICAgICByZXR1cm4gdGhpcy5hZ2dzLmZpbmQoZnVuY3Rpb24gKGFnZykgewogICAgICAgIHJldHVybiBhZ2cuaWQgPT09IGlkOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJieU5hbWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJ5TmFtZShuYW1lKSB7CiAgICAgIHJldHVybiB0aGlzLmFnZ3MuZmlsdGVyKGZ1bmN0aW9uIChhZ2cpIHsKICAgICAgICByZXR1cm4gYWdnLnR5cGUubmFtZSA9PT0gbmFtZTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYnlUeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBieVR5cGUodHlwZSkgewogICAgICByZXR1cm4gdGhpcy5hZ2dzLmZpbHRlcihmdW5jdGlvbiAoYWdnKSB7CiAgICAgICAgcmV0dXJuIGFnZy50eXBlLnR5cGUgPT09IHR5cGU7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImJ5VHlwZU5hbWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJ5VHlwZU5hbWUodHlwZSkgewogICAgICByZXR1cm4gdGhpcy5hZ2dzLmZpbHRlcihmdW5jdGlvbiAoYWdnKSB7CiAgICAgICAgcmV0dXJuIGFnZy50eXBlLm5hbWUgPT09IHR5cGU7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImJ5U2NoZW1hTmFtZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYnlTY2hlbWFOYW1lKHNjaGVtYSkgewogICAgICByZXR1cm4gdGhpcy5hZ2dzLmZpbHRlcihmdW5jdGlvbiAoYWdnKSB7CiAgICAgICAgcmV0dXJuIGFnZy5zY2hlbWEgJiYgYWdnLnNjaGVtYS5uYW1lID09PSBzY2hlbWE7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImJ5U2NoZW1hR3JvdXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJ5U2NoZW1hR3JvdXAoZ3JvdXApIHsKICAgICAgcmV0dXJuIHRoaXMuYWdncy5maWx0ZXIoZnVuY3Rpb24gKGFnZykgewogICAgICAgIHJldHVybiBhZ2cuc2NoZW1hICYmIGFnZy5zY2hlbWEuZ3JvdXAgPT09IGdyb3VwOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRSZXF1ZXN0QWdncyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVxdWVzdEFnZ3MoKSB7CiAgICAgIC8vIGNvbGxlY3QgYWxsIHRoZSBhZ2dyZWdhdGlvbnMKICAgICAgdmFyIGFnZ3JlZ2F0aW9ucyA9IHRoaXMuYWdncy5maWx0ZXIoZnVuY3Rpb24gKGFnZykgewogICAgICAgIHJldHVybiBhZ2cuZW5hYmxlZCAmJiBhZ2cudHlwZTsKICAgICAgfSkucmVkdWNlKGZ1bmN0aW9uIChyZXF1ZXN0VmFsdWVzQWdncywgYWdnKSB7CiAgICAgICAgdmFyIGFnZ3MgPSBhZ2cuZ2V0UmVxdWVzdEFnZ3MoKTsKICAgICAgICByZXR1cm4gYWdncyA/IHJlcXVlc3RWYWx1ZXNBZ2dzLmNvbmNhdChhZ2dzKSA6IHJlcXVlc3RWYWx1ZXNBZ2dzOwogICAgICB9LCBbXSk7IC8vIG1vdmUgbWV0cmljcyB0byB0aGUgZW5kCgogICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnNvcnRCeShhZ2dyZWdhdGlvbnMsIGZ1bmN0aW9uIChhZ2cpIHsKICAgICAgICByZXR1cm4gYWdnLnR5cGUudHlwZSA9PT0gX2FnZ19ncm91cHMuQWdnR3JvdXBOYW1lcy5NZXRyaWNzID8gMSA6IDA7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFJlcXVlc3RBZ2dCeUlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZXF1ZXN0QWdnQnlJZChpZCkgewogICAgICByZXR1cm4gdGhpcy5hZ2dzLmZpbmQoZnVuY3Rpb24gKGFnZykgewogICAgICAgIHJldHVybiBhZ2cuaWQgPT09IGlkOwogICAgICB9KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0cyB0aGUgQWdnQ29uZmlncyAoYW5kIHBvc3NpYmx5IFJlc3BvbnNlQWdnQ29uZmlncykgdGhhdAogICAgICogcmVwcmVzZW50IHRoZSB2YWx1ZXMgdGhhdCB3aWxsIGJlIHByb2R1Y2VkIHdoZW4gYWxsIGFnZ3MKICAgICAqIGFyZSBydW4uCiAgICAgKgogICAgICogV2l0aCBtdWx0aS12YWx1ZSBtZXRyaWMgYWdncyBpdCBpcyBwb3NzaWJsZSBmb3IgYSBzaW5nbGUgYWdnCiAgICAgKiByZXF1ZXN0IHRvIHJlc3VsdCBpbiBtdWx0aXBsZSBhZ2cgdmFsdWVzLCB3aGljaCBpcyB3aHkgdGhlIGxlbmd0aAogICAgICogb2YgYSB2aXMnIHJlc3BvbnNlVmFsdWVzQWdncyBtYXkgYmUgZGlmZmVyZW50IHRoYW4gdGhlIHZpcycgYWdncwogICAgICoKICAgICAqIEByZXR1cm4ge2FycmF5W0FnZ0NvbmZpZ119CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0UmVzcG9uc2VBZ2dzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZXNwb25zZUFnZ3MoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3RBZ2dzKCkucmVkdWNlKGZ1bmN0aW9uIChyZXNwb25zZVZhbHVlc0FnZ3MsIGFnZykgewogICAgICAgIHZhciBhZ2dzID0gYWdnLmdldFJlc3BvbnNlQWdncygpOwogICAgICAgIHJldHVybiBhZ2dzID8gcmVzcG9uc2VWYWx1ZXNBZ2dzLmNvbmNhdChhZ2dzKSA6IHJlc3BvbnNlVmFsdWVzQWdnczsKICAgICAgfSwgW10pOwogICAgfQogICAgLyoqCiAgICAgKiBGaW5kIGEgcmVzcG9uc2UgYWdnIGJ5IGl0J3MgaWQuIFRoaXMgbWF5IGJlIGFuIGFnZyBpbiB0aGUgYWdnQ29uZmlncywgb3Igb25lCiAgICAgKiBjcmVhdGVkIHNwZWNpZmljYWxseSBmb3IgYSByZXNwb25zZSB2YWx1ZQogICAgICoKICAgICAqIEBwYXJhbSAge3N0cmluZ30gaWQgLSB0aGUgaWQgb2YgdGhlIGFnZyB0byBmaW5kCiAgICAgKiBAcmV0dXJuIHtBZ2dDb25maWd9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0UmVzcG9uc2VBZ2dCeUlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZXNwb25zZUFnZ0J5SWQoaWQpIHsKICAgICAgaWQgPSBTdHJpbmcoaWQpOwoKICAgICAgdmFyIHJlcUFnZyA9IF9sb2Rhc2guZGVmYXVsdC5maW5kKHRoaXMuZ2V0UmVxdWVzdEFnZ3MoKSwgZnVuY3Rpb24gKGFnZykgewogICAgICAgIHJldHVybiBpZC5zdWJzdHIoMCwgU3RyaW5nKGFnZy5pZCkubGVuZ3RoKSA9PT0gYWdnLmlkOwogICAgICB9KTsKCiAgICAgIGlmICghcmVxQWdnKSByZXR1cm47CiAgICAgIHJldHVybiBfbG9kYXNoLmRlZmF1bHQuZmluZChyZXFBZ2cuZ2V0UmVzcG9uc2VBZ2dzKCksIHsKICAgICAgICBpZDogaWQKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25TZWFyY2hSZXF1ZXN0U3RhcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uU2VhcmNoUmVxdWVzdFN0YXJ0KHNlYXJjaFNvdXJjZSwgb3B0aW9ucykgewogICAgICByZXR1cm4gUHJvbWlzZS5hbGwoIC8vIEB0cy1pZ25vcmUKICAgICAgdGhpcy5nZXRSZXF1ZXN0QWdncygpLm1hcChmdW5jdGlvbiAoYWdnKSB7CiAgICAgICAgcmV0dXJuIGFnZy5vblNlYXJjaFJlcXVlc3RTdGFydChzZWFyY2hTb3VyY2UsIG9wdGlvbnMpOwogICAgICB9KSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQWdnQ29uZmlnczsKfSgpOwoKZXhwb3J0cy5BZ2dDb25maWdzID0gQWdnQ29uZmlnczs="},null]}