{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/lens/public/indexpattern_plugin/indexpattern.js","dependencies":[{"path":"x-pack/legacy/plugins/lens/public/indexpattern_plugin/indexpattern.js","mtime":1585205045013},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmNvbHVtblRvT3BlcmF0aW9uID0gY29sdW1uVG9PcGVyYXRpb247CmV4cG9ydHMudW5pcXVlTGFiZWxzID0gdW5pcXVlTGFiZWxzOwpleHBvcnRzLmdldEluZGV4UGF0dGVybkRhdGFzb3VyY2UgPSBnZXRJbmRleFBhdHRlcm5EYXRhc291cmNlOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIk9wZXJhdGlvblR5cGUiLCB7CiAgZW51bWVyYWJsZTogdHJ1ZSwKICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgIHJldHVybiBfb3BlcmF0aW9ucy5PcGVyYXRpb25UeXBlOwogIH0KfSk7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiSW5kZXhQYXR0ZXJuQ29sdW1uIiwgewogIGVudW1lcmFibGU6IHRydWUsCiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICByZXR1cm4gX29wZXJhdGlvbnMuSW5kZXhQYXR0ZXJuQ29sdW1uOwogIH0KfSk7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0RG9tID0gcmVxdWlyZSgicmVhY3QtZG9tIik7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2xvYWRlciA9IHJlcXVpcmUoIi4vbG9hZGVyIik7Cgp2YXIgX3RvX2V4cHJlc3Npb24gPSByZXF1aXJlKCIuL3RvX2V4cHJlc3Npb24iKTsKCnZhciBfZGltZW5zaW9uX3BhbmVsID0gcmVxdWlyZSgiLi9kaW1lbnNpb25fcGFuZWwiKTsKCnZhciBfZGF0YXBhbmVsID0gcmVxdWlyZSgiLi9kYXRhcGFuZWwiKTsKCnZhciBfaW5kZXhwYXR0ZXJuX3N1Z2dlc3Rpb25zID0gcmVxdWlyZSgiLi9pbmRleHBhdHRlcm5fc3VnZ2VzdGlvbnMiKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCIuL3V0aWxzIik7Cgp2YXIgX2xheWVycGFuZWwgPSByZXF1aXJlKCIuL2xheWVycGFuZWwiKTsKCnZhciBfb3BlcmF0aW9ucyA9IHJlcXVpcmUoIi4vb3BlcmF0aW9ucyIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvcGx1Z2lucy9raWJhbmFfcmVhY3QvcHVibGljIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfZXh0ZW5kcygpIHsKICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgewogICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsKCiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgewogICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGFyZ2V0OwogIH07CgogIHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKZnVuY3Rpb24gY29sdW1uVG9PcGVyYXRpb24oY29sdW1uLCB1bmlxdWVMYWJlbCkgewogIHZhciBkYXRhVHlwZSA9IGNvbHVtbi5kYXRhVHlwZSwKICAgICAgbGFiZWwgPSBjb2x1bW4ubGFiZWwsCiAgICAgIGlzQnVja2V0ZWQgPSBjb2x1bW4uaXNCdWNrZXRlZCwKICAgICAgc2NhbGUgPSBjb2x1bW4uc2NhbGU7CiAgcmV0dXJuIHsKICAgIGRhdGFUeXBlOiAoMCwgX3V0aWxzLm5vcm1hbGl6ZU9wZXJhdGlvbkRhdGFUeXBlKShkYXRhVHlwZSksCiAgICBpc0J1Y2tldGVkOiBpc0J1Y2tldGVkLAogICAgc2NhbGU6IHNjYWxlLAogICAgbGFiZWw6IHVuaXF1ZUxhYmVsIHx8IGxhYmVsCiAgfTsKfQovKioKICogUmV0dXJuIGEgbWFwIG9mIGNvbHVtbklkID0+IHVuaXF1ZSBjb2x1bW4gbGFiZWwuIEV4cG9ydGVkIGZvciB0ZXN0aW5nIHJlYXNvbnMuCiAqLwoKCmZ1bmN0aW9uIHVuaXF1ZUxhYmVscyhsYXllcnMpIHsKICB2YXIgY29sdW1uTGFiZWxNYXAgPSB7fTsKICB2YXIgY291bnRzID0ge307CgogIHZhciBtYWtlVW5pcXVlID0gZnVuY3Rpb24gbWFrZVVuaXF1ZShsYWJlbCkgewogICAgdmFyIHVuaXF1ZUxhYmVsID0gbGFiZWw7CgogICAgd2hpbGUgKGNvdW50c1t1bmlxdWVMYWJlbF0gPj0gMCkgewogICAgICB2YXIgbnVtID0gKytjb3VudHNbdW5pcXVlTGFiZWxdOwogICAgICB1bmlxdWVMYWJlbCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLmluZGV4UGF0dGVybi51bmlxdWVMYWJlbCcsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ3tsYWJlbH0gW3tudW19XScsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBsYWJlbDogbGFiZWwsCiAgICAgICAgICBudW06IG51bQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgY291bnRzW3VuaXF1ZUxhYmVsXSA9IDA7CiAgICByZXR1cm4gdW5pcXVlTGFiZWw7CiAgfTsKCiAgT2JqZWN0LnZhbHVlcyhsYXllcnMpLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7CiAgICBPYmplY3QuZW50cmllcyhsYXllci5jb2x1bW5zKS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICAgICAgY29sdW1uSWQgPSBfcmVmMlswXSwKICAgICAgICAgIGNvbHVtbiA9IF9yZWYyWzFdOwoKICAgICAgY29sdW1uTGFiZWxNYXBbY29sdW1uSWRdID0gbWFrZVVuaXF1ZShjb2x1bW4ubGFiZWwpOwogICAgfSk7CiAgfSk7CiAgcmV0dXJuIGNvbHVtbkxhYmVsTWFwOwp9CgpmdW5jdGlvbiBnZXRJbmRleFBhdHRlcm5EYXRhc291cmNlKF9yZWYzKSB7CiAgdmFyIGNocm9tZSA9IF9yZWYzLmNocm9tZSwKICAgICAgY29yZSA9IF9yZWYzLmNvcmUsCiAgICAgIHN0b3JhZ2UgPSBfcmVmMy5zdG9yYWdlLAogICAgICBzYXZlZE9iamVjdHNDbGllbnQgPSBfcmVmMy5zYXZlZE9iamVjdHNDbGllbnQsCiAgICAgIGRhdGEgPSBfcmVmMy5kYXRhOwogIHZhciB1aVNldHRpbmdzID0gY2hyb21lLmdldFVpU2V0dGluZ3NDbGllbnQoKTsKCiAgdmFyIG9uSW5kZXhQYXR0ZXJuTG9hZEVycm9yID0gZnVuY3Rpb24gb25JbmRleFBhdHRlcm5Mb2FkRXJyb3IoZXJyKSB7CiAgICByZXR1cm4gY29yZS5ub3RpZmljYXRpb25zLnRvYXN0cy5hZGRFcnJvcihlcnIsIHsKICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLmluZGV4UGF0dGVybi5pbmRleFBhdHRlcm5Mb2FkRXJyb3InLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFcnJvciBsb2FkaW5nIGluZGV4IHBhdHRlcm4nCiAgICAgIH0pCiAgICB9KTsKICB9OyAvLyBOb3Qgc3RhdGVmdWwuIFN0YXRlIGlzIHBlcnNpc3RlZCB0byB0aGUgZnJhbWUKCgogIHZhciBpbmRleFBhdHRlcm5EYXRhc291cmNlID0gewogICAgaWQ6ICdpbmRleHBhdHRlcm4nLAogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShzdGF0ZSkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGluaXRpYWxpemUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsICgwLCBfbG9hZGVyLmxvYWRJbml0aWFsU3RhdGUpKHsKICAgICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSwKICAgICAgICAgICAgICAgIHNhdmVkT2JqZWN0c0NsaWVudDogc2F2ZWRPYmplY3RzQ2xpZW50LAogICAgICAgICAgICAgICAgZGVmYXVsdEluZGV4UGF0dGVybklkOiBjb3JlLnVpU2V0dGluZ3MuZ2V0KCdkZWZhdWx0SW5kZXgnKQogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0UGVyc2lzdGFibGVTdGF0ZTogZnVuY3Rpb24gZ2V0UGVyc2lzdGFibGVTdGF0ZShfcmVmNCkgewogICAgICB2YXIgY3VycmVudEluZGV4UGF0dGVybklkID0gX3JlZjQuY3VycmVudEluZGV4UGF0dGVybklkLAogICAgICAgICAgbGF5ZXJzID0gX3JlZjQubGF5ZXJzOwogICAgICByZXR1cm4gewogICAgICAgIGN1cnJlbnRJbmRleFBhdHRlcm5JZDogY3VycmVudEluZGV4UGF0dGVybklkLAogICAgICAgIGxheWVyczogbGF5ZXJzCiAgICAgIH07CiAgICB9LAogICAgaW5zZXJ0TGF5ZXI6IGZ1bmN0aW9uIGluc2VydExheWVyKHN0YXRlLCBuZXdMYXllcklkKSB7CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgICAgIGxheWVyczogX29iamVjdFNwcmVhZCh7fSwgc3RhdGUubGF5ZXJzLCBfZGVmaW5lUHJvcGVydHkoe30sIG5ld0xheWVySWQsIGJsYW5rTGF5ZXIoc3RhdGUuY3VycmVudEluZGV4UGF0dGVybklkKSkpCiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZUxheWVyOiBmdW5jdGlvbiByZW1vdmVMYXllcihzdGF0ZSwgbGF5ZXJJZCkgewogICAgICB2YXIgbmV3TGF5ZXJzID0gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUubGF5ZXJzKTsKCiAgICAgIGRlbGV0ZSBuZXdMYXllcnNbbGF5ZXJJZF07CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgICAgIGxheWVyczogbmV3TGF5ZXJzCiAgICAgIH0pOwogICAgfSwKICAgIGNsZWFyTGF5ZXI6IGZ1bmN0aW9uIGNsZWFyTGF5ZXIoc3RhdGUsIGxheWVySWQpIHsKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICAgICAgbGF5ZXJzOiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS5sYXllcnMsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgbGF5ZXJJZCwgYmxhbmtMYXllcihzdGF0ZS5jdXJyZW50SW5kZXhQYXR0ZXJuSWQpKSkKICAgICAgfSk7CiAgICB9LAogICAgZ2V0TGF5ZXJzOiBmdW5jdGlvbiBnZXRMYXllcnMoc3RhdGUpIHsKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlLmxheWVycyk7CiAgICB9LAogICAgdG9FeHByZXNzaW9uOiBfdG9fZXhwcmVzc2lvbi50b0V4cHJlc3Npb24sCiAgICBnZXRNZXRhRGF0YTogZnVuY3Rpb24gZ2V0TWV0YURhdGEoc3RhdGUpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBmaWx0ZXJhYmxlSW5kZXhQYXR0ZXJuczogX2xvZGFzaC5kZWZhdWx0LnVuaXEoT2JqZWN0LnZhbHVlcyhzdGF0ZS5sYXllcnMpLm1hcChmdW5jdGlvbiAobGF5ZXIpIHsKICAgICAgICAgIHJldHVybiBsYXllci5pbmRleFBhdHRlcm5JZDsKICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKGluZGV4UGF0dGVybklkKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZDogaW5kZXhQYXR0ZXJuSWQsCiAgICAgICAgICAgIHRpdGxlOiBzdGF0ZS5pbmRleFBhdHRlcm5zW2luZGV4UGF0dGVybklkXS50aXRsZQogICAgICAgICAgfTsKICAgICAgICB9KSkKICAgICAgfTsKICAgIH0sCiAgICByZW5kZXJEYXRhUGFuZWw6IGZ1bmN0aW9uIHJlbmRlckRhdGFQYW5lbChkb21FbGVtZW50LCBwcm9wcykgewogICAgICAoMCwgX3JlYWN0RG9tLnJlbmRlcikoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkkxOG5Qcm92aWRlciwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZGF0YXBhbmVsLkluZGV4UGF0dGVybkRhdGFQYW5lbCwgX2V4dGVuZHMoewogICAgICAgIGNoYW5nZUluZGV4UGF0dGVybjogZnVuY3Rpb24gY2hhbmdlSW5kZXhQYXR0ZXJuKGlkLCBzdGF0ZSwgc2V0U3RhdGUpIHsKICAgICAgICAgICgwLCBfbG9hZGVyLmNoYW5nZUluZGV4UGF0dGVybikoewogICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSwKICAgICAgICAgICAgc2V0U3RhdGU6IHNldFN0YXRlLAogICAgICAgICAgICBzYXZlZE9iamVjdHNDbGllbnQ6IHNhdmVkT2JqZWN0c0NsaWVudCwKICAgICAgICAgICAgb25FcnJvcjogb25JbmRleFBhdHRlcm5Mb2FkRXJyb3IKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwgcHJvcHMpKSksIGRvbUVsZW1lbnQpOwogICAgfSwKICAgIGdldFB1YmxpY0FQSTogZnVuY3Rpb24gZ2V0UHVibGljQVBJKF9yZWY1KSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWY1LnN0YXRlLAogICAgICAgICAgc2V0U3RhdGUgPSBfcmVmNS5zZXRTdGF0ZSwKICAgICAgICAgIGxheWVySWQgPSBfcmVmNS5sYXllcklkLAogICAgICAgICAgZGF0ZVJhbmdlID0gX3JlZjUuZGF0ZVJhbmdlOwogICAgICB2YXIgY29sdW1uTGFiZWxNYXAgPSB1bmlxdWVMYWJlbHMoc3RhdGUubGF5ZXJzKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBnZXRUYWJsZVNwZWM6IGZ1bmN0aW9uIGdldFRhYmxlU3BlYygpIHsKICAgICAgICAgIHJldHVybiBzdGF0ZS5sYXllcnNbbGF5ZXJJZF0uY29sdW1uT3JkZXIubWFwKGZ1bmN0aW9uIChjb2xJZCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIGNvbHVtbklkOiBjb2xJZAogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBnZXRPcGVyYXRpb25Gb3JDb2x1bW5JZDogZnVuY3Rpb24gZ2V0T3BlcmF0aW9uRm9yQ29sdW1uSWQoY29sdW1uSWQpIHsKICAgICAgICAgIHZhciBsYXllciA9IHN0YXRlLmxheWVyc1tsYXllcklkXTsKCiAgICAgICAgICBpZiAobGF5ZXIgJiYgbGF5ZXIuY29sdW1uc1tjb2x1bW5JZF0pIHsKICAgICAgICAgICAgcmV0dXJuIGNvbHVtblRvT3BlcmF0aW9uKGxheWVyLmNvbHVtbnNbY29sdW1uSWRdLCBjb2x1bW5MYWJlbE1hcFtjb2x1bW5JZF0pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0sCiAgICAgICAgcmVuZGVyRGltZW5zaW9uUGFuZWw6IGZ1bmN0aW9uIHJlbmRlckRpbWVuc2lvblBhbmVsKGRvbUVsZW1lbnQsIHByb3BzKSB7CiAgICAgICAgICAoMCwgX3JlYWN0RG9tLnJlbmRlcikoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkkxOG5Qcm92aWRlciwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcHVibGljLktpYmFuYUNvbnRleHRQcm92aWRlciwgewogICAgICAgICAgICBzZXJ2aWNlczogewogICAgICAgICAgICAgIGFwcE5hbWU6ICdsZW5zJywKICAgICAgICAgICAgICBzdG9yYWdlOiBzdG9yYWdlLAogICAgICAgICAgICAgIHVpU2V0dGluZ3M6IHVpU2V0dGluZ3MsCiAgICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgICBzYXZlZE9iamVjdHM6IGNvcmUuc2F2ZWRPYmplY3RzLAogICAgICAgICAgICAgIGRvY0xpbmtzOiBjb3JlLmRvY0xpbmtzCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2RpbWVuc2lvbl9wYW5lbC5JbmRleFBhdHRlcm5EaW1lbnNpb25QYW5lbCwgX2V4dGVuZHMoewogICAgICAgICAgICBzdGF0ZTogc3RhdGUsCiAgICAgICAgICAgIHNldFN0YXRlOiBzZXRTdGF0ZSwKICAgICAgICAgICAgdWlTZXR0aW5nczogdWlTZXR0aW5ncywKICAgICAgICAgICAgc3RvcmFnZTogc3RvcmFnZSwKICAgICAgICAgICAgc2F2ZWRPYmplY3RzQ2xpZW50OiBjb3JlLnNhdmVkT2JqZWN0cy5jbGllbnQsCiAgICAgICAgICAgIGxheWVySWQ6IHByb3BzLmxheWVySWQsCiAgICAgICAgICAgIGh0dHA6IGNvcmUuaHR0cCwKICAgICAgICAgICAgdW5pcXVlTGFiZWw6IGNvbHVtbkxhYmVsTWFwW3Byb3BzLmNvbHVtbklkXSwKICAgICAgICAgICAgZGF0ZVJhbmdlOiBkYXRlUmFuZ2UKICAgICAgICAgIH0sIHByb3BzKSkpKSwgZG9tRWxlbWVudCk7CiAgICAgICAgfSwKICAgICAgICByZW5kZXJMYXllclBhbmVsOiBmdW5jdGlvbiByZW5kZXJMYXllclBhbmVsKGRvbUVsZW1lbnQsIHByb3BzKSB7CiAgICAgICAgICAoMCwgX3JlYWN0RG9tLnJlbmRlcikoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbGF5ZXJwYW5lbC5MYXllclBhbmVsLCBfZXh0ZW5kcyh7CiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSwKICAgICAgICAgICAgb25DaGFuZ2VJbmRleFBhdHRlcm46IGZ1bmN0aW9uIG9uQ2hhbmdlSW5kZXhQYXR0ZXJuKGluZGV4UGF0dGVybklkKSB7CiAgICAgICAgICAgICAgKDAsIF9sb2FkZXIuY2hhbmdlTGF5ZXJJbmRleFBhdHRlcm4pKHsKICAgICAgICAgICAgICAgIHNhdmVkT2JqZWN0c0NsaWVudDogc2F2ZWRPYmplY3RzQ2xpZW50LAogICAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJuSWQ6IGluZGV4UGF0dGVybklkLAogICAgICAgICAgICAgICAgc2V0U3RhdGU6IHNldFN0YXRlLAogICAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlLAogICAgICAgICAgICAgICAgbGF5ZXJJZDogcHJvcHMubGF5ZXJJZCwKICAgICAgICAgICAgICAgIG9uRXJyb3I6IG9uSW5kZXhQYXR0ZXJuTG9hZEVycm9yLAogICAgICAgICAgICAgICAgcmVwbGFjZUlmUG9zc2libGU6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgcHJvcHMpKSwgZG9tRWxlbWVudCk7CiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIGdldERhdGFzb3VyY2VTdWdnZXN0aW9uc0ZvckZpZWxkOiBmdW5jdGlvbiBnZXREYXRhc291cmNlU3VnZ2VzdGlvbnNGb3JGaWVsZChzdGF0ZSwgZHJhZ2dlZEZpZWxkKSB7CiAgICAgIHJldHVybiAoMCwgX3V0aWxzLmlzRHJhZ2dlZEZpZWxkKShkcmFnZ2VkRmllbGQpID8gKDAsIF9pbmRleHBhdHRlcm5fc3VnZ2VzdGlvbnMuZ2V0RGF0YXNvdXJjZVN1Z2dlc3Rpb25zRm9yRmllbGQpKHN0YXRlLCBkcmFnZ2VkRmllbGQuaW5kZXhQYXR0ZXJuSWQsIGRyYWdnZWRGaWVsZC5maWVsZCkgOiBbXTsKICAgIH0sCiAgICBnZXREYXRhc291cmNlU3VnZ2VzdGlvbnNGcm9tQ3VycmVudFN0YXRlOiBfaW5kZXhwYXR0ZXJuX3N1Z2dlc3Rpb25zLmdldERhdGFzb3VyY2VTdWdnZXN0aW9uc0Zyb21DdXJyZW50U3RhdGUKICB9OwogIHJldHVybiBpbmRleFBhdHRlcm5EYXRhc291cmNlOwp9CgpmdW5jdGlvbiBibGFua0xheWVyKGluZGV4UGF0dGVybklkKSB7CiAgcmV0dXJuIHsKICAgIGluZGV4UGF0dGVybklkOiBpbmRleFBhdHRlcm5JZCwKICAgIGNvbHVtbnM6IHt9LAogICAgY29sdW1uT3JkZXI6IFtdCiAgfTsKfQ=="},null]}