{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/connected_components/map/mb/tooltip_control/tooltip_control.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/connected_components/map/mb/tooltip_control/tooltip_control.js","mtime":1585205045285},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRvb2x0aXBDb250cm9sID0gZXhwb3J0cy5UT09MVElQX1RZUEUgPSB2b2lkIDA7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMiKTsKCnZhciBfZmVhdHVyZXNfdG9vbHRpcCA9IHJlcXVpcmUoIi4uLy4uL2ZlYXR1cmVzX3Rvb2x0aXAvZmVhdHVyZXNfdG9vbHRpcCIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBUT09MVElQX1RZUEUgPSB7CiAgSE9WRVI6ICdIT1ZFUicsCiAgTE9DS0VEOiAnTE9DS0VEJwp9OwpleHBvcnRzLlRPT0xUSVBfVFlQRSA9IFRPT0xUSVBfVFlQRTsKCnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9OwoKZnVuY3Rpb24ganVzdGlmeUFuY2hvckxvY2F0aW9uKG1iTG5nTGF0LCB0YXJnZXRGZWF0dXJlKSB7CiAgdmFyIHBvcHVwQW5jaG9yTG9jYXRpb24gPSBbbWJMbmdMYXQubG5nLCBtYkxuZ0xhdC5sYXRdOyAvLyBkZWZhdWx0IHBvcHVwIGxvY2F0aW9uIHRvIG1vdXNlIGxvY2F0aW9uCgogIGlmICh0YXJnZXRGZWF0dXJlLmdlb21ldHJ5LnR5cGUgPT09ICdQb2ludCcpIHsKICAgIHZhciBjb29yZGluYXRlcyA9IHRhcmdldEZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXMuc2xpY2UoKTsgLy8gRW5zdXJlIHRoYXQgaWYgdGhlIG1hcCBpcyB6b29tZWQgb3V0IHN1Y2ggdGhhdCBtdWx0aXBsZQogICAgLy8gY29waWVzIG9mIHRoZSBmZWF0dXJlIGFyZSB2aXNpYmxlLCB0aGUgcG9wdXAgYXBwZWFycwogICAgLy8gb3ZlciB0aGUgY29weSBiZWluZyBwb2ludGVkIHRvLgoKICAgIHdoaWxlIChNYXRoLmFicyhtYkxuZ0xhdC5sbmcgLSBjb29yZGluYXRlc1tfY29uc3RhbnRzLkxPTl9JTkRFWF0pID4gMTgwKSB7CiAgICAgIGNvb3JkaW5hdGVzWzBdICs9IG1iTG5nTGF0LmxuZyA+IGNvb3JkaW5hdGVzW19jb25zdGFudHMuTE9OX0lOREVYXSA/IDM2MCA6IC0zNjA7CiAgICB9CgogICAgcG9wdXBBbmNob3JMb2NhdGlvbiA9IGNvb3JkaW5hdGVzOwogIH0KCiAgcmV0dXJuIHBvcHVwQW5jaG9yTG9jYXRpb247Cn0KCnZhciBUb29sdGlwQ29udHJvbCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHsKICBfaW5oZXJpdHMoVG9vbHRpcENvbnRyb2wsIF9SZWFjdCRDb21wb25lbnQpOwoKICBmdW5jdGlvbiBUb29sdGlwQ29udHJvbChwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUb29sdGlwQ29udHJvbCk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVG9vbHRpcENvbnRyb2wpLmNhbGwodGhpcywgcHJvcHMpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzdGF0ZSIsIHsKICAgICAgeDogdW5kZWZpbmVkLAogICAgICB5OiB1bmRlZmluZWQKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9vbk1vdXNlb3V0IiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5fdXBkYXRlSG92ZXJUb29sdGlwU3RhdGUuY2FuY2VsKCk7CgogICAgICBpZiAoX3RoaXMucHJvcHMudG9vbHRpcFN0YXRlICYmIF90aGlzLnByb3BzLnRvb2x0aXBTdGF0ZS50eXBlICE9PSBUT09MVElQX1RZUEUuTE9DS0VEKSB7CiAgICAgICAgX3RoaXMucHJvcHMuY2xlYXJUb29sdGlwU3RhdGUoKTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX3VwZGF0ZVBvcG92ZXJQb3NpdGlvbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFfdGhpcy5wcm9wcy50b29sdGlwU3RhdGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBsYXQgPSBfdGhpcy5wcm9wcy50b29sdGlwU3RhdGUubG9jYXRpb25bX2NvbnN0YW50cy5MQVRfSU5ERVhdOwogICAgICB2YXIgbG9uID0gX3RoaXMucHJvcHMudG9vbHRpcFN0YXRlLmxvY2F0aW9uW19jb25zdGFudHMuTE9OX0lOREVYXTsKCiAgICAgIHZhciBib3VuZHMgPSBfdGhpcy5wcm9wcy5tYk1hcC5nZXRCb3VuZHMoKTsKCiAgICAgIGlmIChsYXQgPiBib3VuZHMuZ2V0Tm9ydGgoKSB8fCBsYXQgPCBib3VuZHMuZ2V0U291dGgoKSB8fCBsb24gPCBib3VuZHMuZ2V0V2VzdCgpIHx8IGxvbiA+IGJvdW5kcy5nZXRFYXN0KCkpIHsKICAgICAgICBfdGhpcy5wcm9wcy5jbGVhclRvb2x0aXBTdGF0ZSgpOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBuZXh0UG9pbnQgPSBfdGhpcy5wcm9wcy5tYk1hcC5wcm9qZWN0KF90aGlzLnByb3BzLnRvb2x0aXBTdGF0ZS5sb2NhdGlvbik7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgeDogbmV4dFBvaW50LngsCiAgICAgICAgeTogbmV4dFBvaW50LnkKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfbG9ja1Rvb2x0aXAiLCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoX3RoaXMucHJvcHMuaXNEcmF3aW5nRmlsdGVyKSB7CiAgICAgICAgLy9pZ25vcmUgY2xpY2sgZXZlbnRzIHdoZW4gaW4gZHJhdyBtb2RlCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBfdGhpcy5fdXBkYXRlSG92ZXJUb29sdGlwU3RhdGUuY2FuY2VsKCk7IC8vaWdub3JlIGFueSBwb3NzaWJsZSBtb3ZlcwoKCiAgICAgIHZhciBtYkZlYXR1cmVzID0gX3RoaXMuX2dldEZlYXR1cmVzVW5kZXJQb2ludGVyKGUucG9pbnQpOwoKICAgICAgaWYgKCFtYkZlYXR1cmVzLmxlbmd0aCkgewogICAgICAgIF90aGlzLnByb3BzLmNsZWFyVG9vbHRpcFN0YXRlKCk7CgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHRhcmdldE1iRmVhdGF1cmUgPSBtYkZlYXR1cmVzWzBdOwogICAgICB2YXIgcG9wdXBBbmNob3JMb2NhdGlvbiA9IGp1c3RpZnlBbmNob3JMb2NhdGlvbihlLmxuZ0xhdCwgdGFyZ2V0TWJGZWF0YXVyZSk7CgogICAgICB2YXIgZmVhdHVyZXMgPSBfdGhpcy5fZ2V0SWRzRm9yRmVhdHVyZXMobWJGZWF0dXJlcyk7CgogICAgICBfdGhpcy5wcm9wcy5zZXRUb29sdGlwU3RhdGUoewogICAgICAgIHR5cGU6IFRPT0xUSVBfVFlQRS5MT0NLRUQsCiAgICAgICAgZmVhdHVyZXM6IGZlYXR1cmVzLAogICAgICAgIGxvY2F0aW9uOiBwb3B1cEFuY2hvckxvY2F0aW9uCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX3VwZGF0ZUhvdmVyVG9vbHRpcFN0YXRlIiwgX2xvZGFzaC5kZWZhdWx0LmRlYm91bmNlKGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChfdGhpcy5wcm9wcy5pc0RyYXdpbmdGaWx0ZXIpIHsKICAgICAgICAvL2lnbm9yZSBob3ZlciBldmVudHMgd2hlbiBpbiBkcmF3IG1vZGUKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChfdGhpcy5wcm9wcy50b29sdGlwU3RhdGUgJiYgX3RoaXMucHJvcHMudG9vbHRpcFN0YXRlLnR5cGUgPT09IFRPT0xUSVBfVFlQRS5MT0NLRUQpIHsKICAgICAgICAvL2lnbm9yZSBob3ZlciBldmVudHMgd2hlbiB0b29sdGlwIGlzIGxvY2tlZAogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG1iRmVhdHVyZXMgPSBfdGhpcy5fZ2V0RmVhdHVyZXNVbmRlclBvaW50ZXIoZS5wb2ludCk7CgogICAgICBpZiAoIW1iRmVhdHVyZXMubGVuZ3RoKSB7CiAgICAgICAgX3RoaXMucHJvcHMuY2xlYXJUb29sdGlwU3RhdGUoKTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdGFyZ2V0TWJGZWF0dXJlID0gbWJGZWF0dXJlc1swXTsKCiAgICAgIGlmIChfdGhpcy5wcm9wcy50b29sdGlwU3RhdGUpIHsKICAgICAgICB2YXIgZmlyc3RGZWF0dXJlID0gX3RoaXMucHJvcHMudG9vbHRpcFN0YXRlLmZlYXR1cmVzWzBdOwoKICAgICAgICBpZiAodGFyZ2V0TWJGZWF0dXJlLnByb3BlcnRpZXNbX2NvbnN0YW50cy5GRUFUVVJFX0lEX1BST1BFUlRZX05BTUVdID09PSBmaXJzdEZlYXR1cmUuaWQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBwb3B1cEFuY2hvckxvY2F0aW9uID0ganVzdGlmeUFuY2hvckxvY2F0aW9uKGUubG5nTGF0LCB0YXJnZXRNYkZlYXR1cmUpOwoKICAgICAgdmFyIGZlYXR1cmVzID0gX3RoaXMuX2dldElkc0ZvckZlYXR1cmVzKG1iRmVhdHVyZXMpOwoKICAgICAgX3RoaXMucHJvcHMuc2V0VG9vbHRpcFN0YXRlKHsKICAgICAgICB0eXBlOiBUT09MVElQX1RZUEUuSE9WRVIsCiAgICAgICAgZmVhdHVyZXM6IGZlYXR1cmVzLAogICAgICAgIGxvY2F0aW9uOiBwb3B1cEFuY2hvckxvY2F0aW9uCiAgICAgIH0pOwogICAgfSwgMTAwKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2xvYWRGZWF0dXJlR2VvbWV0cnkiLCBmdW5jdGlvbiAoX3JlZikgewogICAgICB2YXIgbGF5ZXJJZCA9IF9yZWYubGF5ZXJJZCwKICAgICAgICAgIGZlYXR1cmVJZCA9IF9yZWYuZmVhdHVyZUlkOwoKICAgICAgdmFyIHRvb2x0aXBMYXllciA9IF90aGlzLl9maW5kTGF5ZXJCeUlkKGxheWVySWQpOwoKICAgICAgaWYgKCF0b29sdGlwTGF5ZXIpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgdmFyIHRhcmdldEZlYXR1cmUgPSB0b29sdGlwTGF5ZXIuZ2V0RmVhdHVyZUJ5SWQoZmVhdHVyZUlkKTsKCiAgICAgIGlmICghdGFyZ2V0RmVhdHVyZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0RmVhdHVyZS5nZW9tZXRyeTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9sb2FkRmVhdHVyZVByb3BlcnRpZXMiLCBmdW5jdGlvbiBfY2FsbGVlKF9yZWYyKSB7CiAgICAgIHZhciBsYXllcklkLCBmZWF0dXJlSWQsIHRvb2x0aXBMYXllciwgdGFyZ2V0RmVhdHVyZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBsYXllcklkID0gX3JlZjIubGF5ZXJJZCwgZmVhdHVyZUlkID0gX3JlZjIuZmVhdHVyZUlkOwogICAgICAgICAgICAgIHRvb2x0aXBMYXllciA9IF90aGlzLl9maW5kTGF5ZXJCeUlkKGxheWVySWQpOwoKICAgICAgICAgICAgICBpZiAodG9vbHRpcExheWVyKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgW10pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHRhcmdldEZlYXR1cmUgPSB0b29sdGlwTGF5ZXIuZ2V0RmVhdHVyZUJ5SWQoZmVhdHVyZUlkKTsKCiAgICAgICAgICAgICAgaWYgKHRhcmdldEZlYXR1cmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBbXSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0b29sdGlwTGF5ZXIuZ2V0UHJvcGVydGllc0ZvclRvb2x0aXAodGFyZ2V0RmVhdHVyZS5wcm9wZXJ0aWVzKSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQuc2VudCk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9sb2FkUHJlSW5kZXhlZFNoYXBlIiwgZnVuY3Rpb24gX2NhbGxlZTIoX3JlZjMpIHsKICAgICAgdmFyIGxheWVySWQsIGZlYXR1cmVJZCwgdG9vbHRpcExheWVyLCB0YXJnZXRGZWF0dXJlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBsYXllcklkID0gX3JlZjMubGF5ZXJJZCwgZmVhdHVyZUlkID0gX3JlZjMuZmVhdHVyZUlkOwogICAgICAgICAgICAgIHRvb2x0aXBMYXllciA9IF90aGlzLl9maW5kTGF5ZXJCeUlkKGxheWVySWQpOwoKICAgICAgICAgICAgICBpZiAodG9vbHRpcExheWVyKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICB0YXJnZXRGZWF0dXJlID0gdG9vbHRpcExheWVyLmdldEZlYXR1cmVCeUlkKGZlYXR1cmVJZCk7CgogICAgICAgICAgICAgIGlmICh0YXJnZXRGZWF0dXJlKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0b29sdGlwTGF5ZXIuZ2V0U291cmNlKCkuZ2V0UHJlSW5kZXhlZFNoYXBlKHRhcmdldEZlYXR1cmUucHJvcGVydGllcykpOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfZmluZExheWVyQnlJZCIsIGZ1bmN0aW9uIChsYXllcklkKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5sYXllckxpc3QuZmluZChmdW5jdGlvbiAobGF5ZXIpIHsKICAgICAgICByZXR1cm4gbGF5ZXIuZ2V0SWQoKSA9PT0gbGF5ZXJJZDsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfZ2V0TGF5ZXJOYW1lIiwgZnVuY3Rpb24gX2NhbGxlZTMobGF5ZXJJZCkgewogICAgICB2YXIgbGF5ZXI7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGxheWVyID0gX3RoaXMuX2ZpbmRMYXllckJ5SWQobGF5ZXJJZCk7CgogICAgICAgICAgICAgIGlmIChsYXllcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgbnVsbCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGxheWVyLmdldERpc3BsYXlOYW1lKCkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfcmVuZGVyVG9vbHRpcENvbnRlbnQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBwdWJsaWNQcm9wcyA9IHsKICAgICAgICBhZGRGaWx0ZXJzOiBfdGhpcy5wcm9wcy5hZGRGaWx0ZXJzLAogICAgICAgIGNsb3NlVG9vbHRpcDogX3RoaXMucHJvcHMuY2xlYXJUb29sdGlwU3RhdGUsCiAgICAgICAgZmVhdHVyZXM6IF90aGlzLnByb3BzLnRvb2x0aXBTdGF0ZS5mZWF0dXJlcywKICAgICAgICBpc0xvY2tlZDogX3RoaXMucHJvcHMudG9vbHRpcFN0YXRlLnR5cGUgPT09IFRPT0xUSVBfVFlQRS5MT0NLRUQsCiAgICAgICAgbG9hZEZlYXR1cmVQcm9wZXJ0aWVzOiBfdGhpcy5fbG9hZEZlYXR1cmVQcm9wZXJ0aWVzLAogICAgICAgIGxvYWRGZWF0dXJlR2VvbWV0cnk6IF90aGlzLl9sb2FkRmVhdHVyZUdlb21ldHJ5LAogICAgICAgIGdldExheWVyTmFtZTogX3RoaXMuX2dldExheWVyTmFtZQogICAgICB9OwoKICAgICAgaWYgKF90aGlzLnByb3BzLnJlbmRlclRvb2x0aXBDb250ZW50KSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnByb3BzLnJlbmRlclRvb2x0aXBDb250ZW50KHB1YmxpY1Byb3BzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCB7CiAgICAgICAgc2l6ZTogInhzIiwKICAgICAgICBzdHlsZTogewogICAgICAgICAgbWF4V2lkdGg6ICc0MjVweCcKICAgICAgICB9CiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2ZlYXR1cmVzX3Rvb2x0aXAuRmVhdHVyZXNUb29sdGlwLCBfZXh0ZW5kcyh7fSwgcHVibGljUHJvcHMsIHsKICAgICAgICBmaW5kTGF5ZXJCeUlkOiBfdGhpcy5fZmluZExheWVyQnlJZCwKICAgICAgICBnZW9GaWVsZHM6IF90aGlzLnByb3BzLmdlb0ZpZWxkcywKICAgICAgICBsb2FkUHJlSW5kZXhlZFNoYXBlOiBfdGhpcy5fbG9hZFByZUluZGV4ZWRTaGFwZQogICAgICB9KSkpOwogICAgfSk7CgogICAgX3RoaXMuX3BvcG92ZXJSZWYgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVSZWYoKTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhUb29sdGlwQ29udHJvbCwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgdGhpcy5wcm9wcy5tYk1hcC5vbignbW91c2VvdXQnLCB0aGlzLl9vbk1vdXNlb3V0KTsKICAgICAgdGhpcy5wcm9wcy5tYk1hcC5vbignbW91c2Vtb3ZlJywgdGhpcy5fdXBkYXRlSG92ZXJUb29sdGlwU3RhdGUpOwogICAgICB0aGlzLnByb3BzLm1iTWFwLm9uKCdtb3ZlJywgdGhpcy5fdXBkYXRlUG9wb3ZlclBvc2l0aW9uKTsKICAgICAgdGhpcy5wcm9wcy5tYk1hcC5vbignY2xpY2snLCB0aGlzLl9sb2NrVG9vbHRpcCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkVXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7CiAgICAgIGlmICh0aGlzLnByb3BzLnRvb2x0aXBTdGF0ZSAmJiB0aGlzLl9wb3BvdmVyUmVmLmN1cnJlbnQpIHsKICAgICAgICB0aGlzLl9wb3BvdmVyUmVmLmN1cnJlbnQucG9zaXRpb25Qb3BvdmVyRmx1aWQoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgdGhpcy5wcm9wcy5tYk1hcC5vZmYoJ21vdXNlb3V0JywgdGhpcy5fb25Nb3VzZW91dCk7CiAgICAgIHRoaXMucHJvcHMubWJNYXAub2ZmKCdtb3VzZW1vdmUnLCB0aGlzLl91cGRhdGVIb3ZlclRvb2x0aXBTdGF0ZSk7CiAgICAgIHRoaXMucHJvcHMubWJNYXAub2ZmKCdtb3ZlJywgdGhpcy5fdXBkYXRlUG9wb3ZlclBvc2l0aW9uKTsKICAgICAgdGhpcy5wcm9wcy5tYk1hcC5vZmYoJ2NsaWNrJywgdGhpcy5fbG9ja1Rvb2x0aXApOwogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXRMYXllckJ5TWJMYXllcklkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0TGF5ZXJCeU1iTGF5ZXJJZChtYkxheWVySWQpIHsKICAgICAgcmV0dXJuIHRoaXMucHJvcHMubGF5ZXJMaXN0LmZpbmQoZnVuY3Rpb24gKGxheWVyKSB7CiAgICAgICAgdmFyIG1iTGF5ZXJJZHMgPSBsYXllci5nZXRNYkxheWVySWRzKCk7CiAgICAgICAgcmV0dXJuIG1iTGF5ZXJJZHMuaW5kZXhPZihtYkxheWVySWQpID4gLTE7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXRJZHNGb3JGZWF0dXJlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2dldElkc0ZvckZlYXR1cmVzKG1iRmVhdHVyZXMpIHsKICAgICAgdmFyIHVuaXF1ZUZlYXR1cmVzID0gW107IC8vdGhlcmUgbWF5IGJlIGR1cGxpY2F0ZXMgaW4gdGhlIHJlc3VsdHMgZnJvbSBtYXBib3gKICAgICAgLy90aGlzIGlzIGJlY2F1c2UgbWFwYm94IHJldHVybnMgdGhlIHJlc3VsdHMgcGVyIHRpbGUKICAgICAgLy9mb3IgcG9seWdvbnMgb3IgbGluZXMsIGl0IG1pZ2h0IHJldHVybiBtdWx0aXBsZSBmZWF0dXJlcywgb25lIGZvciBlYWNoIHRpbGUKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWJGZWF0dXJlcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBtYkZlYXR1cmUgPSBtYkZlYXR1cmVzW2ldOwoKICAgICAgICB2YXIgX2xheWVyID0gdGhpcy5fZ2V0TGF5ZXJCeU1iTGF5ZXJJZChtYkZlYXR1cmUubGF5ZXIuaWQpOwoKICAgICAgICB2YXIgX2ZlYXR1cmVJZCA9IG1iRmVhdHVyZS5wcm9wZXJ0aWVzW19jb25zdGFudHMuRkVBVFVSRV9JRF9QUk9QRVJUWV9OQU1FXTsKCiAgICAgICAgdmFyIF9sYXllcklkID0gX2xheWVyLmdldElkKCk7CgogICAgICAgIHZhciBtYXRjaCA9IGZhbHNlOwoKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHVuaXF1ZUZlYXR1cmVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICB2YXIgdW5pcXVlRmVhdHVyZSA9IHVuaXF1ZUZlYXR1cmVzW2pdOwoKICAgICAgICAgIGlmIChfZmVhdHVyZUlkID09PSB1bmlxdWVGZWF0dXJlLmlkICYmIF9sYXllcklkID09PSB1bmlxdWVGZWF0dXJlLmxheWVySWQpIHsKICAgICAgICAgICAgbWF0Y2ggPSB0cnVlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghbWF0Y2gpIHsKICAgICAgICAgIHVuaXF1ZUZlYXR1cmVzLnB1c2goewogICAgICAgICAgICBpZDogX2ZlYXR1cmVJZCwKICAgICAgICAgICAgbGF5ZXJJZDogX2xheWVySWQKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHVuaXF1ZUZlYXR1cmVzOwogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXRNYkxheWVySWRzRm9yVG9vbHRpcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRNYkxheWVySWRzRm9yVG9vbHRpcHMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIG1iTGF5ZXJJZHMgPSB0aGlzLnByb3BzLmxheWVyTGlzdC5yZWR1Y2UoZnVuY3Rpb24gKG1iTGF5ZXJJZHMsIGxheWVyKSB7CiAgICAgICAgcmV0dXJuIGxheWVyLmNhblNob3dUb29sdGlwKCkgPyBtYkxheWVySWRzLmNvbmNhdChsYXllci5nZXRNYkxheWVySWRzKCkpIDogbWJMYXllcklkczsKICAgICAgfSwgW10pOyAvL0Vuc3VyZSB0aGF0IGFsbCBsYXllcnMgYXJlIGFjdHVhbGx5IG9uIHRoZSBtYXAuCiAgICAgIC8vVGhlIHJhdyBsaXN0IG1heSBjb250YWluIGxheWVyLWlkcyB0aGF0IGhhdmUgbm90IGJlZW4gYWRkZWQgdG8gdGhlIG1hcCB5ZXQuCiAgICAgIC8vRm9yIGV4YW1wbGU6CiAgICAgIC8vYSB2ZWN0b3Igb3IgaGVhdG1hcCBsYXllciB3aWxsIG5vdCBhZGQgYSBzb3VyY2UgYW5kIGxheWVyIHRvIHRoZSBtYXBib3gtbWFwLCB1bnRpbCB0aGF0IGRhdGEgaXMgYXZhaWxhYmxlLgogICAgICAvL2R1cmluZyB0aGF0IGRhdGEtZmV0Y2ggd2luZG93LCB0aGUgYXBwIHNob3VsZCBub3QgcXVlcnkgZm9yIGxheWVycyB0aGF0IGRvIG5vdCBleGlzdC4KCiAgICAgIHJldHVybiBtYkxheWVySWRzLmZpbHRlcihmdW5jdGlvbiAobWJMYXllcklkKSB7CiAgICAgICAgcmV0dXJuICEhX3RoaXMyLnByb3BzLm1iTWFwLmdldExheWVyKG1iTGF5ZXJJZCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXRGZWF0dXJlc1VuZGVyUG9pbnRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2dldEZlYXR1cmVzVW5kZXJQb2ludGVyKG1iTG5nTGF0UG9pbnQpIHsKICAgICAgaWYgKCF0aGlzLnByb3BzLm1iTWFwKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CgogICAgICB2YXIgbWJMYXllcklkcyA9IHRoaXMuX2dldE1iTGF5ZXJJZHNGb3JUb29sdGlwcygpOwoKICAgICAgdmFyIFBBRERJTkcgPSAyOyAvL2luIHBpeGVscwoKICAgICAgdmFyIG1iQmJveCA9IFt7CiAgICAgICAgeDogbWJMbmdMYXRQb2ludC54IC0gUEFERElORywKICAgICAgICB5OiBtYkxuZ0xhdFBvaW50LnkgLSBQQURESU5HCiAgICAgIH0sIHsKICAgICAgICB4OiBtYkxuZ0xhdFBvaW50LnggKyBQQURESU5HLAogICAgICAgIHk6IG1iTG5nTGF0UG9pbnQueSArIFBBRERJTkcKICAgICAgfV07CiAgICAgIHJldHVybiB0aGlzLnByb3BzLm1iTWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhtYkJib3gsIHsKICAgICAgICBsYXllcnM6IG1iTGF5ZXJJZHMKICAgICAgfSk7CiAgICB9IC8vIE11c3QgbG9hZCBvcmlnaW5hbCBnZW9tZXRyeSBpbnN0ZWFkIG9mIHVzaW5nIGdlb21ldHJ5IGZyb20gbWFwYm94IGZlYXR1cmUuCiAgICAvLyBNYXBib3ggZmVhdHVyZSBnZW9tZXRyeSBpcyBmcm9tIHZlY3RvciB0aWxlIGFuZCBpcyBub3QgdGhlIHNhbWUgYXMgdGhlIG9yaWdpbmFsIGdlb21ldHJ5LgoKICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgaWYgKCF0aGlzLnByb3BzLnRvb2x0aXBTdGF0ZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICB2YXIgdG9vbHRpcEFuY2hvciA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgaGVpZ2h0OiAnMjZweCcsCiAgICAgICAgICB3aWR0aDogJzI2cHgnLAogICAgICAgICAgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JwogICAgICAgIH0KICAgICAgfSk7CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBvcG92ZXIsIHsKICAgICAgICBpZDogIm1hcFRvb2x0aXAiLAogICAgICAgIGJ1dHRvbjogdG9vbHRpcEFuY2hvciwKICAgICAgICBhbmNob3JQb3NpdGlvbjogInVwQ2VudGVyIiwKICAgICAgICBpc09wZW46IHRydWUsCiAgICAgICAgY2xvc2VQb3BvdmVyOiBub29wLAogICAgICAgIHJlZjogdGhpcy5fcG9wb3ZlclJlZiwKICAgICAgICBzdHlsZTogewogICAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLAogICAgICAgICAgdHJhbnNmb3JtOiAidHJhbnNsYXRlKCIuY29uY2F0KHRoaXMuc3RhdGUueCAtIDEzLCAicHgsICIpLmNvbmNhdCh0aGlzLnN0YXRlLnkgLSAxMywgInB4KSIpCiAgICAgICAgfQogICAgICB9LCB0aGlzLl9yZW5kZXJUb29sdGlwQ29udGVudCgpKTsKICAgIH0KICB9XSwgW3sKICAgIGtleTogImdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKSB7CiAgICAgIGlmIChuZXh0UHJvcHMudG9vbHRpcFN0YXRlKSB7CiAgICAgICAgdmFyIG5leHRQb2ludCA9IG5leHRQcm9wcy5tYk1hcC5wcm9qZWN0KG5leHRQcm9wcy50b29sdGlwU3RhdGUubG9jYXRpb24pOwoKICAgICAgICBpZiAobmV4dFBvaW50LnggIT09IHByZXZTdGF0ZS54IHx8IG5leHRQb2ludC55ICE9PSBwcmV2U3RhdGUueSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgeDogbmV4dFBvaW50LngsCiAgICAgICAgICAgIHk6IG5leHRQb2ludC55CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVG9vbHRpcENvbnRyb2w7Cn0oX3JlYWN0LmRlZmF1bHQuQ29tcG9uZW50KTsKCmV4cG9ydHMuVG9vbHRpcENvbnRyb2wgPSBUb29sdGlwQ29udHJvbDs="},null]}