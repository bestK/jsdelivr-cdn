{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/jobs/new_job/pages/components/pick_fields_step/components/population_view/metric_selection.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/jobs/new_job/pages/components/pick_fields_step/components/population_view/metric_selection.js","mtime":1585205045908},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlBvcHVsYXRpb25EZXRlY3RvcnMgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9qb2JfY3JlYXRvcl9jb250ZXh0ID0gcmVxdWlyZSgiLi4vLi4vLi4vam9iX2NyZWF0b3JfY29udGV4dCIpOwoKdmFyIF9uZXdfam9iX2NhcGFiaWxpdGllc19zZXJ2aWNlID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc2VydmljZXMvbmV3X2pvYl9jYXBhYmlsaXRpZXNfc2VydmljZSIpOwoKdmFyIF9zZXR0aW5ncyA9IHJlcXVpcmUoIi4uLy4uLy4uL2NoYXJ0cy9jb21tb24vc2V0dGluZ3MiKTsKCnZhciBfbWV0cmljX3NlbGVjdG9yID0gcmVxdWlyZSgiLi9tZXRyaWNfc2VsZWN0b3IiKTsKCnZhciBfc3BsaXRfZmllbGQgPSByZXF1aXJlKCIuLi9zcGxpdF9maWVsZCIpOwoKdmFyIF9jaGFydF9ncmlkID0gcmVxdWlyZSgiLi9jaGFydF9ncmlkIik7Cgp2YXIgX21lc3NhZ2ViYXIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9jb21wb25lbnRzL21lc3NhZ2ViYXIiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIFBvcHVsYXRpb25EZXRlY3RvcnMgPSBmdW5jdGlvbiBQb3B1bGF0aW9uRGV0ZWN0b3JzKF9yZWYpIHsKICB2YXIgc2V0SXNWYWxpZCA9IF9yZWYuc2V0SXNWYWxpZDsKCiAgdmFyIF91c2VDb250ZXh0ID0gKDAsIF9yZWFjdC51c2VDb250ZXh0KShfam9iX2NyZWF0b3JfY29udGV4dC5Kb2JDcmVhdG9yQ29udGV4dCksCiAgICAgIGpjID0gX3VzZUNvbnRleHQuam9iQ3JlYXRvciwKICAgICAgam9iQ3JlYXRvclVwZGF0ZSA9IF91c2VDb250ZXh0LmpvYkNyZWF0b3JVcGRhdGUsCiAgICAgIGpvYkNyZWF0b3JVcGRhdGVkID0gX3VzZUNvbnRleHQuam9iQ3JlYXRvclVwZGF0ZWQsCiAgICAgIGNoYXJ0TG9hZGVyID0gX3VzZUNvbnRleHQuY2hhcnRMb2FkZXIsCiAgICAgIGNoYXJ0SW50ZXJ2YWwgPSBfdXNlQ29udGV4dC5jaGFydEludGVydmFsOwoKICB2YXIgam9iQ3JlYXRvciA9IGpjOwogIHZhciBmaWVsZHMgPSBfbmV3X2pvYl9jYXBhYmlsaXRpZXNfc2VydmljZS5uZXdKb2JDYXBzU2VydmljZS5maWVsZHM7CgogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShbXSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBzZWxlY3RlZE9wdGlvbnMgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRTZWxlY3RlZE9wdGlvbnMgPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZVN0YXRlMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGpvYkNyZWF0b3IuYWdnRmllbGRQYWlycyksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgYWdnRmllbGRQYWlyTGlzdCA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldEFnZ0ZpZWxkUGFpckxpc3QgPSBfdXNlU3RhdGU0WzFdOwoKICB2YXIgX3VzZVN0YXRlNSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHt9KSwKICAgICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLAogICAgICBsaW5lQ2hhcnRzRGF0YSA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldExpbmVDaGFydHNEYXRhID0gX3VzZVN0YXRlNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTcgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTggPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU3LCAyKSwKICAgICAgbG9hZGluZ0RhdGEgPSBfdXNlU3RhdGU4WzBdLAogICAgICBzZXRMb2FkaW5nRGF0YSA9IF91c2VTdGF0ZThbMV07CgogIHZhciBfdXNlU3RhdGU5ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoam9iQ3JlYXRvci5zdGFydCksCiAgICAgIF91c2VTdGF0ZTEwID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlOSwgMiksCiAgICAgIHN0YXJ0ID0gX3VzZVN0YXRlMTBbMF0sCiAgICAgIHNldFN0YXJ0ID0gX3VzZVN0YXRlMTBbMV07CgogIHZhciBfdXNlU3RhdGUxMSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGpvYkNyZWF0b3IuZW5kKSwKICAgICAgX3VzZVN0YXRlMTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxMSwgMiksCiAgICAgIGVuZCA9IF91c2VTdGF0ZTEyWzBdLAogICAgICBzZXRFbmQgPSBfdXNlU3RhdGUxMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTEzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoam9iQ3JlYXRvci5idWNrZXRTcGFuTXMpLAogICAgICBfdXNlU3RhdGUxNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTEzLCAyKSwKICAgICAgYnVja2V0U3Bhbk1zID0gX3VzZVN0YXRlMTRbMF0sCiAgICAgIHNldEJ1Y2tldFNwYW5NcyA9IF91c2VTdGF0ZTE0WzFdOwoKICB2YXIgX3VzZVN0YXRlMTUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShfc2V0dGluZ3MuZGVmYXVsdENoYXJ0U2V0dGluZ3MpLAogICAgICBfdXNlU3RhdGUxNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTE1LCAyKSwKICAgICAgY2hhcnRTZXR0aW5ncyA9IF91c2VTdGF0ZTE2WzBdLAogICAgICBzZXRDaGFydFNldHRpbmdzID0gX3VzZVN0YXRlMTZbMV07CgogIHZhciBfdXNlU3RhdGUxNyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGpvYkNyZWF0b3Iuc3BsaXRGaWVsZCksCiAgICAgIF91c2VTdGF0ZTE4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTcsIDIpLAogICAgICBzcGxpdEZpZWxkID0gX3VzZVN0YXRlMThbMF0sCiAgICAgIHNldFNwbGl0RmllbGQgPSBfdXNlU3RhdGUxOFsxXTsKCiAgdmFyIF91c2VTdGF0ZTE5ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoe30pLAogICAgICBfdXNlU3RhdGUyMCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTE5LCAyKSwKICAgICAgZmllbGRWYWx1ZXNQZXJEZXRlY3RvciA9IF91c2VTdGF0ZTIwWzBdLAogICAgICBzZXRGaWVsZFZhbHVlc1BlckRldGVjdG9yID0gX3VzZVN0YXRlMjBbMV07CgogIHZhciBfdXNlUmVkdWNlciA9ICgwLCBfcmVhY3QudXNlUmVkdWNlcikoZnVuY3Rpb24gKHMpIHsKICAgIHJldHVybiBzICsgMTsKICB9LCAwKSwKICAgICAgX3VzZVJlZHVjZXIyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVJlZHVjZXIsIDIpLAogICAgICBieUZpZWxkc1VwZGF0ZWQgPSBfdXNlUmVkdWNlcjJbMF0sCiAgICAgIHNldEJ5RmllbGRzVXBkYXRlZCA9IF91c2VSZWR1Y2VyMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTIxID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLAogICAgICBfdXNlU3RhdGUyMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTIxLCAyKSwKICAgICAgcGFnZVJlYWR5ID0gX3VzZVN0YXRlMjJbMF0sCiAgICAgIHNldFBhZ2VSZWFkeSA9IF91c2VTdGF0ZTIyWzFdOwoKICB2YXIgdXBkYXRlQnlGaWVsZHMgPSBmdW5jdGlvbiB1cGRhdGVCeUZpZWxkcygpIHsKICAgIHJldHVybiBzZXRCeUZpZWxkc1VwZGF0ZWQoMCk7CiAgfTsKCiAgZnVuY3Rpb24gZGV0ZWN0b3JDaGFuZ2VIYW5kbGVyKHNlbGVjdGVkT3B0aW9uc0luKSB7CiAgICBhZGREZXRlY3RvcihzZWxlY3RlZE9wdGlvbnNJbik7CiAgfQoKICBmdW5jdGlvbiBhZGREZXRlY3RvcihzZWxlY3RlZE9wdGlvbnNJbikgewogICAgaWYgKHNlbGVjdGVkT3B0aW9uc0luICE9PSBudWxsICYmIHNlbGVjdGVkT3B0aW9uc0luLmxlbmd0aCkgewogICAgICB2YXIgb3B0aW9uID0gc2VsZWN0ZWRPcHRpb25zSW5bMF07CgogICAgICBpZiAodHlwZW9mIG9wdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICB2YXIgbmV3UGFpciA9IHsKICAgICAgICAgIGFnZzogb3B0aW9uLmFnZywKICAgICAgICAgIGZpZWxkOiBvcHRpb24uZmllbGQsCiAgICAgICAgICBieTogewogICAgICAgICAgICBmaWVsZDogbnVsbCwKICAgICAgICAgICAgdmFsdWU6IG51bGwKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHNldEFnZ0ZpZWxkUGFpckxpc3QoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhZ2dGaWVsZFBhaXJMaXN0KSwgW25ld1BhaXJdKSk7CiAgICAgICAgc2V0U2VsZWN0ZWRPcHRpb25zKFtdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZXRBZ2dGaWVsZFBhaXJMaXN0KFtdKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gZGVsZXRlRGV0ZWN0b3IoaW5kZXgpIHsKICAgIGFnZ0ZpZWxkUGFpckxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIHNldEFnZ0ZpZWxkUGFpckxpc3QoX3RvQ29uc3VtYWJsZUFycmF5KGFnZ0ZpZWxkUGFpckxpc3QpKTsKICAgIHVwZGF0ZUJ5RmllbGRzKCk7CiAgfQoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgc2V0UGFnZVJlYWR5KHRydWUpOwogIH0sIFtdKTsgLy8gd2F0Y2ggZm9yIGNoYW5nZXMgaW4gZGV0ZWN0b3IgbGlzdCBsZW5ndGgKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGpvYkNyZWF0b3IucmVtb3ZlQWxsRGV0ZWN0b3JzKCk7CiAgICBhZ2dGaWVsZFBhaXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKHBhaXIsIGkpIHsKICAgICAgam9iQ3JlYXRvci5hZGREZXRlY3RvcihwYWlyLmFnZywgcGFpci5maWVsZCk7CgogICAgICBpZiAocGFpci5ieSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy8gcmUtYWRkIGJ5IGZpZWxkcwogICAgICAgIGpvYkNyZWF0b3Iuc2V0QnlGaWVsZChwYWlyLmJ5LmZpZWxkLCBpKTsKICAgICAgfQogICAgfSk7CiAgICBqb2JDcmVhdG9yVXBkYXRlKCk7CiAgICBsb2FkQ2hhcnRzKCk7CiAgICBzZXRJc1ZhbGlkKGFnZ0ZpZWxkUGFpckxpc3QubGVuZ3RoID4gMCk7CiAgfSwgW2FnZ0ZpZWxkUGFpckxpc3QubGVuZ3RoXSk7IC8vIHdhdGNoIGZvciBjaGFuZ2VzIGluIGJ5IGZpZWxkIHZhbHVlcwogIC8vIHJlZHJhdyB0aGUgY2hhcnRzIGlmIHRoZXkgY2hhbmdlLgogIC8vIHRyaWdnZXJlZCB3aGVuIGV4YW1wbGUgZmllbGRzIGhhdmUgYmVlbiBsb2FkZWQKICAvLyBpZiB0aGUgc3BsaXQgZmllbGQgb3IgYnkgZmllbGRzIGhhdmUgY2hhbmdlZAoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgbG9hZENoYXJ0cygpOwogIH0sIFtKU09OLnN0cmluZ2lmeShmaWVsZFZhbHVlc1BlckRldGVjdG9yKSwgc3BsaXRGaWVsZCwgcGFnZVJlYWR5XSk7IC8vIHdhdGNoIGZvciBjaGFuZ2UgaW4gam9iQ3JlYXRvcgoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgaWYgKGpvYkNyZWF0b3Iuc3RhcnQgIT09IHN0YXJ0IHx8IGpvYkNyZWF0b3IuZW5kICE9PSBlbmQpIHsKICAgICAgc2V0U3RhcnQoam9iQ3JlYXRvci5zdGFydCk7CiAgICAgIHNldEVuZChqb2JDcmVhdG9yLmVuZCk7CiAgICAgIGxvYWRDaGFydHMoKTsKICAgIH0KCiAgICBpZiAoam9iQ3JlYXRvci5idWNrZXRTcGFuTXMgIT09IGJ1Y2tldFNwYW5NcykgewogICAgICBzZXRCdWNrZXRTcGFuTXMoam9iQ3JlYXRvci5idWNrZXRTcGFuTXMpOwogICAgICBsb2FkQ2hhcnRzKCk7CiAgICB9CgogICAgc2V0U3BsaXRGaWVsZChqb2JDcmVhdG9yLnNwbGl0RmllbGQpOyAvLyB1cGRhdGUgYnkgZmllbGRzIGFuZCB0aGVpciBieSBmaWVsZHMKCiAgICB2YXIgdXBkYXRlID0gZmFsc2U7CgogICAgdmFyIG5ld0xpc3QgPSBfdG9Db25zdW1hYmxlQXJyYXkoYWdnRmllbGRQYWlyTGlzdCk7CgogICAgbmV3TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChwYWlyLCBpKSB7CiAgICAgIHZhciBiZiA9IGpvYkNyZWF0b3IuZ2V0QnlGaWVsZChpKTsKCiAgICAgIGlmIChwYWlyLmJ5ICE9PSB1bmRlZmluZWQgJiYgcGFpci5ieS5maWVsZCAhPT0gYmYpIHsKICAgICAgICBwYWlyLmJ5LmZpZWxkID0gYmY7CiAgICAgICAgdXBkYXRlID0gdHJ1ZTsKICAgICAgfQogICAgfSk7CgogICAgaWYgKHVwZGF0ZSkgewogICAgICBzZXRBZ2dGaWVsZFBhaXJMaXN0KG5ld0xpc3QpOwogICAgICB1cGRhdGVCeUZpZWxkcygpOwogICAgfQogIH0sIFtqb2JDcmVhdG9yVXBkYXRlZF0pOyAvLyB3YXRjaCBmb3IgY2hhbmdlcyBpbiBzcGxpdCBmaWVsZCBvciBieSBmaWVsZHMuCiAgLy8gbG9hZCBleGFtcGxlIGZpZWxkIHZhbHVlcwogIC8vIGNoYW5nZXMgdG8gZmllbGRWYWx1ZXMgaGVyZSB3aWxsIHRyaWdnZXIgdGhlIGNhcmQgZWZmZWN0IHZpYSBzZXRGaWVsZFZhbHVlc1BlckRldGVjdG9yCgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBsb2FkRmllbGRFeGFtcGxlcygpOwogIH0sIFtzcGxpdEZpZWxkLCBieUZpZWxkc1VwZGF0ZWRdKTsKCiAgZnVuY3Rpb24gbG9hZENoYXJ0cygpIHsKICAgIHZhciBjcywgcmVzcDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbG9hZENoYXJ0cyQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmICghYWxsRGF0YVJlYWR5KCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNldExvYWRpbmdEYXRhKHRydWUpOwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjsKICAgICAgICAgICAgY3MgPSAoMCwgX3NldHRpbmdzLmdldENoYXJ0U2V0dGluZ3MpKGpvYkNyZWF0b3IsIGNoYXJ0SW50ZXJ2YWwpOwogICAgICAgICAgICBzZXRDaGFydFNldHRpbmdzKGNzKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY2hhcnRMb2FkZXIubG9hZFBvcHVsYXRpb25DaGFydHMoam9iQ3JlYXRvci5zdGFydCwgam9iQ3JlYXRvci5lbmQsIGFnZ0ZpZWxkUGFpckxpc3QsIGpvYkNyZWF0b3Iuc3BsaXRGaWVsZCwgY3MuaW50ZXJ2YWxNcykpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIHNldExpbmVDaGFydHNEYXRhKHJlc3ApOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgyKTsKCiAgICAgICAgICAgIF9tZXNzYWdlYmFyLm1sTWVzc2FnZUJhclNlcnZpY2Uubm90aWZ5LmVycm9yKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgIHNldExpbmVDaGFydHNEYXRhKFtdKTsKCiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBzZXRMb2FkaW5nRGF0YShmYWxzZSk7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBudWxsLCBudWxsLCBbWzIsIDExXV0pOwogIH0KCiAgZnVuY3Rpb24gbG9hZEZpZWxkRXhhbXBsZXMoKSB7CiAgICB2YXIgcHJvbWlzZXMsIHJlc3VsdHMsIGZpZWxkVmFsdWVzLCBuZXdQYWlyczsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbG9hZEZpZWxkRXhhbXBsZXMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBwcm9taXNlcyA9IFtdOwogICAgICAgICAgICBhZ2dGaWVsZFBhaXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGFmLCBpKSB7CiAgICAgICAgICAgICAgaWYgKGFmLmJ5ICE9PSB1bmRlZmluZWQgJiYgYWYuYnkuZmllbGQgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goZnVuY3Rpb24gX2NhbGxlZShpbmRleCwgZmllbGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBpbmRleDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjaGFydExvYWRlci5sb2FkRmllbGRFeGFtcGxlVmFsdWVzKGZpZWxkKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQxID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBfY29udGV4dDIudDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IF9jb250ZXh0Mi50MQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KGksIGFmLmJ5LmZpZWxkKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKFByb21pc2UuYWxsKHByb21pc2VzKSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICByZXN1bHRzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIGZpZWxkVmFsdWVzID0gcmVzdWx0cy5yZWR1Y2UoZnVuY3Rpb24gKHAsIGMpIHsKICAgICAgICAgICAgICBwW2MuaW5kZXhdID0gYy5maWVsZHM7CiAgICAgICAgICAgICAgcmV0dXJuIHA7CiAgICAgICAgICAgIH0sIHt9KTsKICAgICAgICAgICAgbmV3UGFpcnMgPSBhZ2dGaWVsZFBhaXJMaXN0Lm1hcChmdW5jdGlvbiAocGFpciwgaSkgewogICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBwYWlyLCB7fSwgcGFpci5ieSA9PT0gdW5kZWZpbmVkIHx8IHBhaXIuYnkuZmllbGQgPT09IG51bGwgPyB7fSA6IHsKICAgICAgICAgICAgICAgIGJ5OiBfb2JqZWN0U3ByZWFkKHt9LCBwYWlyLmJ5LCB7CiAgICAgICAgICAgICAgICAgIHZhbHVlOiBmaWVsZFZhbHVlc1tpXVswXQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHNldEFnZ0ZpZWxkUGFpckxpc3QoX3RvQ29uc3VtYWJsZUFycmF5KG5ld1BhaXJzKSk7CiAgICAgICAgICAgIHNldEZpZWxkVmFsdWVzUGVyRGV0ZWN0b3IoZmllbGRWYWx1ZXMpOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBhbGxEYXRhUmVhZHkoKSB7CiAgICB2YXIgcmVhZHkgPSBhZ2dGaWVsZFBhaXJMaXN0Lmxlbmd0aCA+IDA7CiAgICBhZ2dGaWVsZFBhaXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGFmKSB7CiAgICAgIGlmIChhZi5ieSAhPT0gdW5kZWZpbmVkICYmIGFmLmJ5LmZpZWxkICE9PSBudWxsKSB7CiAgICAgICAgLy8gaWYgYSBieSBmaWVsZCBpcyBzZXQsIGl0J3Mgb25seSByZWFkeSB3aGVuIHRoZSB2YWx1ZSBpcyBsb2FkZWQKICAgICAgICByZWFkeSA9IHJlYWR5ICYmIGFmLmJ5LnZhbHVlICE9PSBudWxsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiByZWFkeTsKICB9CgogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc3BsaXRfZmllbGQuU3BsaXRGaWVsZFNlbGVjdG9yLCBudWxsKSwgc3BsaXRGaWVsZCAhPT0gbnVsbCAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSG9yaXpvbnRhbFJ1bGUsIHsKICAgIG1hcmdpbjogImwiCiAgfSksIHNwbGl0RmllbGQgIT09IG51bGwgJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2hhcnRfZ3JpZC5DaGFydEdyaWQsIHsKICAgIGFnZ0ZpZWxkUGFpckxpc3Q6IGFnZ0ZpZWxkUGFpckxpc3QsCiAgICBjaGFydFNldHRpbmdzOiBjaGFydFNldHRpbmdzLAogICAgc3BsaXRGaWVsZDogc3BsaXRGaWVsZCwKICAgIGxpbmVDaGFydHNEYXRhOiBsaW5lQ2hhcnRzRGF0YSwKICAgIG1vZGVsRGF0YTogW10sCiAgICBhbm9tYWx5RGF0YTogW10sCiAgICBkZWxldGVEZXRlY3RvcjogZGVsZXRlRGV0ZWN0b3IsCiAgICBqb2JUeXBlOiBqb2JDcmVhdG9yLnR5cGUsCiAgICBmaWVsZFZhbHVlc1BlckRldGVjdG9yOiBmaWVsZFZhbHVlc1BlckRldGVjdG9yLAogICAgbG9hZGluZzogbG9hZGluZ0RhdGEKICB9KSwgc3BsaXRGaWVsZCAhPT0gbnVsbCAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9tZXRyaWNfc2VsZWN0b3IuTWV0cmljU2VsZWN0b3IsIHsKICAgIGZpZWxkczogZmllbGRzLAogICAgZGV0ZWN0b3JDaGFuZ2VIYW5kbGVyOiBkZXRlY3RvckNoYW5nZUhhbmRsZXIsCiAgICBzZWxlY3RlZE9wdGlvbnM6IHNlbGVjdGVkT3B0aW9ucywKICAgIHJlbW92ZU9wdGlvbnM6IFtdCiAgfSkpOwp9OwoKZXhwb3J0cy5Qb3B1bGF0aW9uRGV0ZWN0b3JzID0gUG9wdWxhdGlvbkRldGVjdG9yczs="},null]}