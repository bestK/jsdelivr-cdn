{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/dashboard/np_ready/legacy_app.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/dashboard/np_ready/legacy_app.js","mtime":1585205039440},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmluaXREYXNoYm9hcmRBcHAgPSBpbml0RGFzaGJvYXJkQXBwOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2Rhc2hib2FyZF9hcHAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vZGFzaGJvYXJkX2FwcC5odG1sIikpOwoKdmFyIF9kYXNoYm9hcmRfbGlzdGluZ19uZ193cmFwcGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2xpc3RpbmcvZGFzaGJvYXJkX2xpc3Rpbmdfbmdfd3JhcHBlci5odG1sIikpOwoKdmFyIF9sZWdhY3lfaW1wb3J0cyA9IHJlcXVpcmUoIi4uL2xlZ2FjeV9pbXBvcnRzIik7Cgp2YXIgX2Rhc2hib2FyZF9hcHAyID0gcmVxdWlyZSgiLi9kYXNoYm9hcmRfYXBwIik7Cgp2YXIgX2Rhc2hib2FyZF9jb25zdGFudHMgPSByZXF1aXJlKCIuL2Rhc2hib2FyZF9jb25zdGFudHMiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9raWJhbmFfdXRpbHMvcHVibGljIik7Cgp2YXIgX2Rhc2hib2FyZF9saXN0aW5nID0gcmVxdWlyZSgiLi9saXN0aW5nL2Rhc2hib2FyZF9saXN0aW5nIik7Cgp2YXIgX2hlbHBfbWVudV91dGlsID0gcmVxdWlyZSgiLi9oZWxwX21lbnUvaGVscF9tZW51X3V0aWwiKTsKCnZhciBfZ2xvYmFsX3N0YXRlX3N5bmMgPSByZXF1aXJlKCIuL2dsb2JhbF9zdGF0ZV9zeW5jIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKZnVuY3Rpb24gaW5pdERhc2hib2FyZEFwcChhcHAsIGRlcHMpIHsKICAoMCwgX2Rhc2hib2FyZF9hcHAyLmluaXREYXNoYm9hcmRBcHBEaXJlY3RpdmUpKGFwcCwgZGVwcyk7CiAgYXBwLmRpcmVjdGl2ZSgnZGFzaGJvYXJkTGlzdGluZycsIGZ1bmN0aW9uIChyZWFjdERpcmVjdGl2ZSkgewogICAgcmV0dXJuIHJlYWN0RGlyZWN0aXZlKF9kYXNoYm9hcmRfbGlzdGluZy5EYXNoYm9hcmRMaXN0aW5nLCBbWydjb3JlJywgewogICAgICB3YXRjaERlcHRoOiAncmVmZXJlbmNlJwogICAgfV0sIFsnY3JlYXRlSXRlbScsIHsKICAgICAgd2F0Y2hEZXB0aDogJ3JlZmVyZW5jZScKICAgIH1dLCBbJ2dldFZpZXdVcmwnLCB7CiAgICAgIHdhdGNoRGVwdGg6ICdyZWZlcmVuY2UnCiAgICB9XSwgWydlZGl0SXRlbScsIHsKICAgICAgd2F0Y2hEZXB0aDogJ3JlZmVyZW5jZScKICAgIH1dLCBbJ2ZpbmRJdGVtcycsIHsKICAgICAgd2F0Y2hEZXB0aDogJ3JlZmVyZW5jZScKICAgIH1dLCBbJ2RlbGV0ZUl0ZW1zJywgewogICAgICB3YXRjaERlcHRoOiAncmVmZXJlbmNlJwogICAgfV0sIFsnbGlzdGluZ0xpbWl0JywgewogICAgICB3YXRjaERlcHRoOiAncmVmZXJlbmNlJwogICAgfV0sIFsnaGlkZVdyaXRlQ29udHJvbHMnLCB7CiAgICAgIHdhdGNoRGVwdGg6ICdyZWZlcmVuY2UnCiAgICB9XSwgWydpbml0aWFsRmlsdGVyJywgewogICAgICB3YXRjaERlcHRoOiAncmVmZXJlbmNlJwogICAgfV1dKTsKICB9KTsKCiAgZnVuY3Rpb24gY3JlYXRlTmV3RGFzaGJvYXJkQ3RybCgkc2NvcGUpIHsKICAgICRzY29wZS52aXNpdFZpc3VhbGl6ZUFwcExpbmtUZXh0ID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5kYXNoYm9hcmQudmlzaXRWaXN1YWxpemVBcHBMaW5rVGV4dCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICd2aXNpdCB0aGUgVmlzdWFsaXplIGFwcCcKICAgIH0pOwogICAgKDAsIF9oZWxwX21lbnVfdXRpbC5hZGRIZWxwTWVudVRvQXBwQ2hyb21lKShkZXBzLmNocm9tZSwgZGVwcy5jb3JlLmRvY0xpbmtzKTsKICB9CgogIGFwcC5ydW4oZnVuY3Rpb24gKGdsb2JhbFN0YXRlKSB7CiAgICAoMCwgX2dsb2JhbF9zdGF0ZV9zeW5jLnN5bmNPbk1vdW50KShnbG9iYWxTdGF0ZSwgZGVwcy5ucERhdGFTdGFydCk7CiAgfSk7CiAgYXBwLnJ1bihmdW5jdGlvbiAoZ2xvYmFsU3RhdGUsICRyb290U2NvcGUpIHsKICAgICgwLCBfbGVnYWN5X2ltcG9ydHMucmVnaXN0ZXJUaW1lZmlsdGVyV2l0aEdsb2JhbFN0YXRlRmFjdG9yeSkoZGVwcy5ucERhdGFTdGFydC5xdWVyeS50aW1lZmlsdGVyLnRpbWVmaWx0ZXIsIGdsb2JhbFN0YXRlLCAkcm9vdFNjb3BlKTsKICB9KTsKICBhcHAuY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcikgewogICAgdmFyIGRlZmF1bHRzID0gewogICAgICByZWxvYWRPblNlYXJjaDogZmFsc2UsCiAgICAgIHJlcXVpcmVVSUNhcGFiaWxpdHk6ICdkYXNoYm9hcmQuc2hvdycsCiAgICAgIGJhZGdlOiBmdW5jdGlvbiBiYWRnZSgpIHsKICAgICAgICBpZiAoZGVwcy5kYXNoYm9hcmRDYXBhYmlsaXRpZXMuc2hvd1dyaXRlQ29udHJvbHMpIHsKICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgdGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5kYXNoYm9hcmQuYmFkZ2UucmVhZE9ubHkudGV4dCcsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZWFkIG9ubHknCiAgICAgICAgICB9KSwKICAgICAgICAgIHRvb2x0aXA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4uZGFzaGJvYXJkLmJhZGdlLnJlYWRPbmx5LnRvb2x0aXAnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVW5hYmxlIHRvIHNhdmUgZGFzaGJvYXJkcycKICAgICAgICAgIH0pLAogICAgICAgICAgaWNvblR5cGU6ICdnbGFzc2VzJwogICAgICAgIH07CiAgICAgIH0KICAgIH07CiAgICAkcm91dGVQcm92aWRlci53aGVuKF9kYXNoYm9hcmRfY29uc3RhbnRzLkRhc2hib2FyZENvbnN0YW50cy5MQU5ESU5HX1BBR0VfUEFUSCwgX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdHMsIHsKICAgICAgdGVtcGxhdGU6IF9kYXNoYm9hcmRfbGlzdGluZ19uZ193cmFwcGVyLmRlZmF1bHQsCiAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGluamVjdG9yLCAkbG9jYXRpb24sICRzY29wZSkgewogICAgICAgIHZhciBzZXJ2aWNlID0gZGVwcy5zYXZlZERhc2hib2FyZHM7CiAgICAgICAgdmFyIGtiblVybCA9ICRpbmplY3Rvci5nZXQoJ2tiblVybCcpOwogICAgICAgIHZhciBkYXNoYm9hcmRDb25maWcgPSBkZXBzLmRhc2hib2FyZENvbmZpZzsKICAgICAgICAkc2NvcGUubGlzdGluZ0xpbWl0ID0gZGVwcy51aVNldHRpbmdzLmdldCgnc2F2ZWRPYmplY3RzOmxpc3RpbmdMaW1pdCcpOwoKICAgICAgICAkc2NvcGUuY3JlYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAga2JuVXJsLnJlZGlyZWN0KF9kYXNoYm9hcmRfY29uc3RhbnRzLkRhc2hib2FyZENvbnN0YW50cy5DUkVBVEVfTkVXX0RBU0hCT0FSRF9VUkwpOwogICAgICAgIH07CgogICAgICAgICRzY29wZS5maW5kID0gZnVuY3Rpb24gKHNlYXJjaCkgewogICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZmluZChzZWFyY2gsICRzY29wZS5saXN0aW5nTGltaXQpOwogICAgICAgIH07CgogICAgICAgICRzY29wZS5lZGl0SXRlbSA9IGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgICB2YXIgaWQgPSBfcmVmLmlkOwogICAgICAgICAga2JuVXJsLnJlZGlyZWN0KCIiLmNvbmNhdCgoMCwgX2Rhc2hib2FyZF9jb25zdGFudHMuY3JlYXRlRGFzaGJvYXJkRWRpdFVybCkoaWQpLCAiP19hPSh2aWV3TW9kZTplZGl0KSIpKTsKICAgICAgICB9OwoKICAgICAgICAkc2NvcGUuZ2V0Vmlld1VybCA9IGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgICAgdmFyIGlkID0gX3JlZjIuaWQ7CiAgICAgICAgICByZXR1cm4gZGVwcy5hZGRCYXNlUGF0aCgiIyIuY29uY2F0KCgwLCBfZGFzaGJvYXJkX2NvbnN0YW50cy5jcmVhdGVEYXNoYm9hcmRFZGl0VXJsKShpZCkpKTsKICAgICAgICB9OwoKICAgICAgICAkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24gKGRhc2hib2FyZHMpIHsKICAgICAgICAgIHJldHVybiBzZXJ2aWNlLmRlbGV0ZShkYXNoYm9hcmRzLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gZC5pZDsKICAgICAgICAgIH0pKTsKICAgICAgICB9OwoKICAgICAgICAkc2NvcGUuaGlkZVdyaXRlQ29udHJvbHMgPSBkYXNoYm9hcmRDb25maWcuZ2V0SGlkZVdyaXRlQ29udHJvbHMoKTsKICAgICAgICAkc2NvcGUuaW5pdGlhbEZpbHRlciA9ICRsb2NhdGlvbi5zZWFyY2goKS5maWx0ZXIgfHwgX2Rhc2hib2FyZF9saXN0aW5nLkVNUFRZX0ZJTFRFUjsKICAgICAgICBkZXBzLmNocm9tZS5zZXRCcmVhZGNydW1icyhbewogICAgICAgICAgdGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5kYXNoYm9hcmQuZGFzaGJvYXJkQnJlYWRjcnVtYnNUaXRsZScsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEYXNoYm9hcmRzJwogICAgICAgICAgfSkKICAgICAgICB9XSk7CiAgICAgICAgKDAsIF9oZWxwX21lbnVfdXRpbC5hZGRIZWxwTWVudVRvQXBwQ2hyb21lKShkZXBzLmNocm9tZSwgZGVwcy5jb3JlLmRvY0xpbmtzKTsKICAgICAgICAkc2NvcGUuY29yZSA9IGRlcHMuY29yZTsKICAgICAgfSwKICAgICAgcmVzb2x2ZTogewogICAgICAgIGRhc2g6IGZ1bmN0aW9uIGRhc2goJHJvb3RTY29wZSwgJHJvdXRlLCByZWRpcmVjdFdoZW5NaXNzaW5nLCBrYm5VcmwpIHsKICAgICAgICAgIHJldHVybiAoMCwgX2xlZ2FjeV9pbXBvcnRzLmVuc3VyZURlZmF1bHRJbmRleFBhdHRlcm4pKGRlcHMuY29yZSwgZGVwcy5ucERhdGFTdGFydCwgJHJvb3RTY29wZSwga2JuVXJsKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHNhdmVkT2JqZWN0c0NsaWVudCA9IGRlcHMuc2F2ZWRPYmplY3RzQ2xpZW50OwogICAgICAgICAgICB2YXIgdGl0bGUgPSAkcm91dGUuY3VycmVudC5wYXJhbXMudGl0bGU7CgogICAgICAgICAgICBpZiAodGl0bGUpIHsKICAgICAgICAgICAgICByZXR1cm4gc2F2ZWRPYmplY3RzQ2xpZW50LmZpbmQoewogICAgICAgICAgICAgICAgc2VhcmNoOiAiXCIiLmNvbmNhdCh0aXRsZSwgIlwiIiksCiAgICAgICAgICAgICAgICBzZWFyY2hfZmllbGRzOiAndGl0bGUnLAogICAgICAgICAgICAgICAgdHlwZTogJ2Rhc2hib2FyZCcKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7CiAgICAgICAgICAgICAgICAvLyBUaGUgc2VhcmNoIGlzbid0IGFuIGV4YWN0IG1hdGNoLCBsZXRzIHNlZSBpZiB3ZSBjYW4gZmluZCBhIHNpbmdsZSBleGFjdCBtYXRjaCB0byB1c2UKICAgICAgICAgICAgICAgIHZhciBtYXRjaGluZ0Rhc2hib2FyZHMgPSByZXN1bHRzLnNhdmVkT2JqZWN0cy5maWx0ZXIoZnVuY3Rpb24gKGRhc2hib2FyZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZGFzaGJvYXJkLmF0dHJpYnV0ZXMudGl0bGUudG9Mb3dlckNhc2UoKSA9PT0gdGl0bGUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChtYXRjaGluZ0Rhc2hib2FyZHMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIGtiblVybC5yZWRpcmVjdCgoMCwgX2Rhc2hib2FyZF9jb25zdGFudHMuY3JlYXRlRGFzaGJvYXJkRWRpdFVybCkobWF0Y2hpbmdEYXNoYm9hcmRzWzBdLmlkKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBrYm5VcmwucmVkaXJlY3QoIiIuY29uY2F0KF9kYXNoYm9hcmRfY29uc3RhbnRzLkRhc2hib2FyZENvbnN0YW50cy5MQU5ESU5HX1BBR0VfUEFUSCwgIj9maWx0ZXI9XCIiKS5jb25jYXQodGl0bGUsICJcIiIpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoKSB7fSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSkpLndoZW4oX2Rhc2hib2FyZF9jb25zdGFudHMuRGFzaGJvYXJkQ29uc3RhbnRzLkNSRUFURV9ORVdfREFTSEJPQVJEX1VSTCwgX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdHMsIHsKICAgICAgdGVtcGxhdGU6IF9kYXNoYm9hcmRfYXBwLmRlZmF1bHQsCiAgICAgIGNvbnRyb2xsZXI6IGNyZWF0ZU5ld0Rhc2hib2FyZEN0cmwsCiAgICAgIHJlcXVpcmVVSUNhcGFiaWxpdHk6ICdkYXNoYm9hcmQuY3JlYXRlTmV3JywKICAgICAgcmVzb2x2ZTogewogICAgICAgIGRhc2g6IGZ1bmN0aW9uIGRhc2gocmVkaXJlY3RXaGVuTWlzc2luZywgJHJvb3RTY29wZSwga2JuVXJsKSB7CiAgICAgICAgICByZXR1cm4gKDAsIF9sZWdhY3lfaW1wb3J0cy5lbnN1cmVEZWZhdWx0SW5kZXhQYXR0ZXJuKShkZXBzLmNvcmUsIGRlcHMubnBEYXRhU3RhcnQsICRyb290U2NvcGUsIGtiblVybCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBkZXBzLnNhdmVkRGFzaGJvYXJkcy5nZXQoKTsKICAgICAgICAgIH0pLmNhdGNoKHJlZGlyZWN0V2hlbk1pc3NpbmcoewogICAgICAgICAgICBkYXNoYm9hcmQ6IF9kYXNoYm9hcmRfY29uc3RhbnRzLkRhc2hib2FyZENvbnN0YW50cy5MQU5ESU5HX1BBR0VfUEFUSAogICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgfQogICAgfSkpLndoZW4oKDAsIF9kYXNoYm9hcmRfY29uc3RhbnRzLmNyZWF0ZURhc2hib2FyZEVkaXRVcmwpKCc6aWQnKSwgX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdHMsIHsKICAgICAgdGVtcGxhdGU6IF9kYXNoYm9hcmRfYXBwLmRlZmF1bHQsCiAgICAgIGNvbnRyb2xsZXI6IGNyZWF0ZU5ld0Rhc2hib2FyZEN0cmwsCiAgICAgIHJlc29sdmU6IHsKICAgICAgICBkYXNoOiBmdW5jdGlvbiBkYXNoKCRyb290U2NvcGUsICRyb3V0ZSwgcmVkaXJlY3RXaGVuTWlzc2luZywga2JuVXJsLCBBcHBTdGF0ZSkgewogICAgICAgICAgdmFyIGlkID0gJHJvdXRlLmN1cnJlbnQucGFyYW1zLmlkOwogICAgICAgICAgcmV0dXJuICgwLCBfbGVnYWN5X2ltcG9ydHMuZW5zdXJlRGVmYXVsdEluZGV4UGF0dGVybikoZGVwcy5jb3JlLCBkZXBzLm5wRGF0YVN0YXJ0LCAkcm9vdFNjb3BlLCBrYm5VcmwpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gZGVwcy5zYXZlZERhc2hib2FyZHMuZ2V0KGlkKTsKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHNhdmVkRGFzaGJvYXJkKSB7CiAgICAgICAgICAgIGRlcHMuY2hyb21lLnJlY2VudGx5QWNjZXNzZWQuYWRkKHNhdmVkRGFzaGJvYXJkLmdldEZ1bGxQYXRoKCksIHNhdmVkRGFzaGJvYXJkLnRpdGxlLCBpZCk7CiAgICAgICAgICAgIHJldHVybiBzYXZlZERhc2hib2FyZDsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAvLyBBIGNvcnJ1cHQgZGFzaGJvYXJkIHdhcyBkZXRlY3RlZCAoZS5nLiB3aXRoIGludmFsaWQgSlNPTiBwcm9wZXJ0aWVzKQogICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBfcHVibGljLkludmFsaWRKU09OUHJvcGVydHkpIHsKICAgICAgICAgICAgICBkZXBzLnRvYXN0Tm90aWZpY2F0aW9ucy5hZGREYW5nZXIoZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgICAga2JuVXJsLnJlZGlyZWN0KF9kYXNoYm9hcmRfY29uc3RhbnRzLkRhc2hib2FyZENvbnN0YW50cy5MQU5ESU5HX1BBR0VfUEFUSCk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IC8vIFByZXNlcnZlIEJXQyBvZiB2NS4zLjAgbGlua3MgZm9yIG5ldywgdW5zYXZlZCBkYXNoYm9hcmRzLgogICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2VsYXN0aWMva2liYW5hL2lzc3Vlcy8xMDk1MSBmb3IgbW9yZSBjb250ZXh0LgoKCiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIF9wdWJsaWMuU2F2ZWRPYmplY3ROb3RGb3VuZCAmJiBpZCA9PT0gJ2NyZWF0ZScpIHsKICAgICAgICAgICAgICAvLyBOb3RlICJuZXcgQXBwU3RhdGUiIGlzIG5lY2Vzc2FyeSBzbyB0aGUgc3RhdGUgaW4gdGhlIHVybCBpcyBwcmVzZXJ2ZWQgdGhyb3VnaCB0aGUgcmVkaXJlY3QuCiAgICAgICAgICAgICAga2JuVXJsLnJlZGlyZWN0KF9kYXNoYm9hcmRfY29uc3RhbnRzLkRhc2hib2FyZENvbnN0YW50cy5DUkVBVEVfTkVXX0RBU0hCT0FSRF9VUkwsIHt9LCBuZXcgQXBwU3RhdGUoKSk7CiAgICAgICAgICAgICAgZGVwcy50b2FzdE5vdGlmaWNhdGlvbnMuYWRkV2FybmluZyhfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLmRhc2hib2FyZC51cmxXYXNSZW1vdmVkSW5TaXhaZXJvV2FybmluZ01lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1RoZSB1cmwgImRhc2hib2FyZC9jcmVhdGUiIHdhcyByZW1vdmVkIGluIDYuMC4gUGxlYXNlIHVwZGF0ZSB5b3VyIGJvb2ttYXJrcy4nCiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoKSB7fSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKHJlZGlyZWN0V2hlbk1pc3NpbmcoewogICAgICAgICAgICBkYXNoYm9hcmQ6IF9kYXNoYm9hcmRfY29uc3RhbnRzLkRhc2hib2FyZENvbnN0YW50cy5MQU5ESU5HX1BBR0VfUEFUSAogICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgfQogICAgfSkpLndoZW4oImRhc2hib2FyZC86dGFpbCo/IiwgewogICAgICByZWRpcmVjdFRvOiAiLyIuY29uY2F0KGRlcHMuY29yZS5pbmplY3RlZE1ldGFkYXRhLmdldEluamVjdGVkVmFyKCdrYm5EZWZhdWx0QXBwSWQnKSkKICAgIH0pLndoZW4oImRhc2hib2FyZHMvOnRhaWwqPyIsIHsKICAgICAgcmVkaXJlY3RUbzogIi8iLmNvbmNhdChkZXBzLmNvcmUuaW5qZWN0ZWRNZXRhZGF0YS5nZXRJbmplY3RlZFZhcigna2JuRGVmYXVsdEFwcElkJykpCiAgICB9KTsKICB9KTsKfQ=="},null]}