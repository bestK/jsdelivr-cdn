{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/util/custom_url_utils.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/util/custom_url_utils.js","mtime":1585205046012},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnJlcGxhY2VUb2tlbnNJblVybFZhbHVlID0gcmVwbGFjZVRva2Vuc0luVXJsVmFsdWU7CmV4cG9ydHMuZ2V0VXJsRm9yUmVjb3JkID0gZ2V0VXJsRm9yUmVjb3JkOwpleHBvcnRzLm9wZW5DdXN0b21VcmxXaW5kb3cgPSBvcGVuQ3VzdG9tVXJsV2luZG93OwpleHBvcnRzLmlzVmFsaWRMYWJlbCA9IGlzVmFsaWRMYWJlbDsKZXhwb3J0cy5pc1ZhbGlkVGltZVJhbmdlID0gaXNWYWxpZFRpbWVSYW5nZTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX21vbWVudCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibW9tZW50IikpOwoKdmFyIF9wYXJzZV9pbnRlcnZhbCA9IHJlcXVpcmUoIi4uLy4uLy4uL2NvbW1vbi91dGlsL3BhcnNlX2ludGVydmFsIik7Cgp2YXIgX3N0cmluZ191dGlscyA9IHJlcXVpcmUoIi4vc3RyaW5nX3V0aWxzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfSAvLyBWYWx1ZSBvZiBjdXN0b21fdXJsIHRpbWVfcmFuZ2UgcHJvcGVydHkgaW5kaWNhdGluZyBkcmlsbGRvd24gdGltZSByYW5nZSBpcyBjYWxjdWxhdGVkIGF1dG9tYXRpY2FsbHkKLy8gZGVwZW5kaW5nIG9uIHRoZSBjb250ZXh0IGluIHdoaWNoIHRoZSBVUkwgaXMgYmVpbmcgb3BlbmVkLgoKCnZhciBUSU1FX1JBTkdFX0FVVE8gPSAnYXV0byc7IC8vIFJlcGxhY2VzIHRoZSAkIGRlbGltaXRlZCB0b2tlbnMgaW4gdGhlIHVybF92YWx1ZSBvZiB0aGUgY3VzdG9tIFVSTCBjb25maWd1cmF0aW9uCi8vIHdpdGggdmFsdWVzIGZyb20gdGhlIHN1cHBsaWVkIGRvY3VtZW50LgoKZnVuY3Rpb24gcmVwbGFjZVRva2Vuc0luVXJsVmFsdWUoY3VzdG9tVXJsQ29uZmlnLCBqb2JCdWNrZXRTcGFuU2VjcywgZG9jLCB0aW1lRmllbGROYW1lKSB7CiAgLy8gSWYgdXJsVmFsdWUgY29udGFpbnMgJGVhcmxpZXN0JCBhbmQgJGxhdGVzdCQgdG9rZW5zLCBhZGQgaW4gdGltZXMgdG8gdGhlIHRlc3QgZG9jLgogIHZhciB1cmxWYWx1ZSA9IGN1c3RvbVVybENvbmZpZy51cmxfdmFsdWU7CiAgdmFyIHRpbWVzdGFtcCA9IGRvY1t0aW1lRmllbGROYW1lXTsKICB2YXIgdGltZVJhbmdlSW50ZXJ2YWwgPSAndGltZV9yYW5nZScgaW4gY3VzdG9tVXJsQ29uZmlnID8gKDAsIF9wYXJzZV9pbnRlcnZhbC5wYXJzZUludGVydmFsKShjdXN0b21VcmxDb25maWcudGltZV9yYW5nZSkgOiBudWxsOwoKICB2YXIgcmVjb3JkID0gX29iamVjdFNwcmVhZCh7fSwgZG9jKTsKCiAgaWYgKHVybFZhbHVlLmluY2x1ZGVzKCckZWFybGllc3QkJykpIHsKICAgIHZhciBlYXJsaWVzdE1vbWVudCA9ICgwLCBfbW9tZW50LmRlZmF1bHQpKHRpbWVzdGFtcCk7CgogICAgaWYgKHRpbWVSYW5nZUludGVydmFsICE9PSBudWxsKSB7CiAgICAgIGVhcmxpZXN0TW9tZW50LnN1YnRyYWN0KHRpbWVSYW5nZUludGVydmFsKTsKICAgIH0gZWxzZSB7CiAgICAgIGVhcmxpZXN0TW9tZW50LnN1YnRyYWN0KGpvYkJ1Y2tldFNwYW5TZWNzLCAncycpOwogICAgfQoKICAgIHJlY29yZC5lYXJsaWVzdCA9IGVhcmxpZXN0TW9tZW50LnRvSVNPU3RyaW5nKCk7CiAgfQoKICBpZiAodXJsVmFsdWUuaW5jbHVkZXMoJyRsYXRlc3QkJykpIHsKICAgIHZhciBsYXRlc3RNb21lbnQgPSAoMCwgX21vbWVudC5kZWZhdWx0KSh0aW1lc3RhbXApLmFkZChqb2JCdWNrZXRTcGFuU2VjcywgJ3MnKTsKCiAgICBpZiAodGltZVJhbmdlSW50ZXJ2YWwgIT09IG51bGwpIHsKICAgICAgbGF0ZXN0TW9tZW50LmFkZCh0aW1lUmFuZ2VJbnRlcnZhbCk7CiAgICB9IGVsc2UgewogICAgICBsYXRlc3RNb21lbnQuYWRkKGpvYkJ1Y2tldFNwYW5TZWNzLCAncycpOwogICAgfQoKICAgIHJlY29yZC5sYXRlc3QgPSBsYXRlc3RNb21lbnQudG9JU09TdHJpbmcoKTsKICB9CgogIHJldHVybiBnZXRVcmxGb3JSZWNvcmQoY3VzdG9tVXJsQ29uZmlnLCByZWNvcmQpOwp9IC8vIFJldHVybnMgdGhlIFVSTCB0byBvcGVuIGZyb20gdGhlIHN1cHBsaWVkIGNvbmZpZywgd2l0aCBhbnkgZG9sbGFyIGRlbGltaXRlZCB0b2tlbnMKLy8gc3Vic3RpdHV0ZWQgZnJvbSB0aGUgc3VwcGxpZWQgYW5vbWFseSByZWNvcmQuCgoKZnVuY3Rpb24gZ2V0VXJsRm9yUmVjb3JkKHVybENvbmZpZywgcmVjb3JkKSB7CiAgaWYgKGlzS2liYW5hVXJsKHVybENvbmZpZykgPT09IHRydWUpIHsKICAgIHJldHVybiBidWlsZEtpYmFuYVVybCh1cmxDb25maWcsIHJlY29yZCk7CiAgfSBlbHNlIHsKICAgIHZhciB1cmxQYXRoID0gKDAsIF9zdHJpbmdfdXRpbHMucmVwbGFjZVN0cmluZ1Rva2VucykodXJsQ29uZmlnLnVybF92YWx1ZSwgcmVjb3JkLCBmYWxzZSk7CiAgICByZXR1cm4gdXJsUGF0aDsKICB9Cn0gLy8gT3BlbnMgdGhlIHNwZWNpZmllZCBVUkwgaW4gYSBuZXcgd2luZG93LiBUaGUgYmVoYXZpb3VyIChmb3IgZXhhbXBsZSB3aGV0aGVyCi8vIGl0IG9wZW5zIGluIGEgbmV3IHRhYiBvciB3aW5kb3cpIGlzIGRldGVybWluZWQgZnJvbSB0aGUgb3JpZ2luYWwgY29uZmlndXJhdGlvbgovLyBvYmplY3Qgd2hpY2ggaW5kaWNhdGVzIHdoZXRoZXIgaXQgaXMgb3BlbmluZyBhIEtpYmFuYSBwYWdlIHJ1bm5pbmcgb24gdGhlIHNhbWUgc2VydmVyLgovLyBmdWxsVXJsIGlzIHRoZSBjb21wbGV0ZSBVUkwsIGluY2x1ZGluZyB0aGUgYmFzZSBwYXRoLCB3aXRoIGFueSBkb2xsYXIgZGVsaW1pdGVkIHRva2VucwovLyBmcm9tIHRoZSB1cmxDb25maWcgaGF2aW5nIGJlZW4gc3Vic3RpdHV0ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBhbm9tYWx5IHJlY29yZC4KCgpmdW5jdGlvbiBvcGVuQ3VzdG9tVXJsV2luZG93KGZ1bGxVcmwsIHVybENvbmZpZykgewogIC8vIFJ1biB0aHJvdWdoIGEgcmVnZXggdG8gdGVzdCB3aGV0aGVyIHRoZSB1cmxfdmFsdWUgc3RhcnRzIHdpdGggYSBwcm90b2NvbCBzY2hlbWUuCiAgaWYgKC9eKD86W2Etel0rOik/XC9cLy9pLnRlc3QodXJsQ29uZmlnLnVybF92YWx1ZSkgPT09IGZhbHNlKSB7CiAgICB3aW5kb3cub3BlbihmdWxsVXJsLCAnX2JsYW5rJyk7CiAgfSBlbHNlIHsKICAgIC8vIEFkZCBub29wZW5lciBhbmQgbm9yZWZlcnJyIHByb3BlcnRpZXMgZm9yIGV4dGVybmFsIFVSTHMuCiAgICB2YXIgbmV3V2luZG93ID0gd2luZG93Lm9wZW4oZnVsbFVybCwgJ19ibGFuaycsICdub29wZW5lcixub3JlZmVycmVyJyk7IC8vIEV4cGVjdCBuZXdXaW5kb3cgdG8gYmUgbnVsbCwgYnV0IGp1c3QgaW4gY2FzZSBpZiBub3QsIHJlc2V0IHRoZSBvcGVuZXIgbGluay4KCiAgICBpZiAobmV3V2luZG93ICE9PSB1bmRlZmluZWQgJiYgbmV3V2luZG93ICE9PSBudWxsKSB7CiAgICAgIG5ld1dpbmRvdy5vcGVuZXIgPSBudWxsOwogICAgfQogIH0KfSAvLyBSZXR1cm5zIHdoZXRoZXIgdGhlIHVybF92YWx1ZSBvZiB0aGUgc3VwcGxpZWQgY29uZmlnIGlzIGZvcgovLyBhIEtpYmFuYSBEaXNjb3ZlciBvciBEYXNoYm9hcmQgcGFnZSBydW5uaW5nIG9uIHRoZSBzYW1lIHNlcnZlciBhcyB0aGlzIE1MIHBsdWdpbi4KCgpmdW5jdGlvbiBpc0tpYmFuYVVybCh1cmxDb25maWcpIHsKICB2YXIgdXJsVmFsdWUgPSB1cmxDb25maWcudXJsX3ZhbHVlOwogIHJldHVybiB1cmxWYWx1ZS5zdGFydHNXaXRoKCdraWJhbmEjL2Rpc2NvdmVyJykgfHwgdXJsVmFsdWUuc3RhcnRzV2l0aCgna2liYW5hIy9kYXNoYm9hcmQnKSB8fCB1cmxWYWx1ZS5zdGFydHNXaXRoKCdhcG0jLycpOwp9Ci8qKgogKiBFc2NhcGUgYW55IGRvdWJsZSBxdW90ZXMgaW4gdGhlIHZhbHVlIGZvciBjb3JyZWN0IHVzZSBpbiBLUUwuCiAqLwoKCmZ1bmN0aW9uIGVzY2FwZUZvcktRTCh2YWx1ZSkgewogIHJldHVybiBTdHJpbmcodmFsdWUpLnJlcGxhY2UoL1wiL2csICdcXCInKTsKfQovKioKICogQnVpbGRzIGEgS2liYW5hIGRhc2hib2FyZCBvciBEaXNjb3ZlciBVUkwgZnJvbSB0aGUgc3VwcGxpZWQgY29uZmlnLCB3aXRoIGFueQogKiBkb2xsYXIgZGVsaW1pdGVkIHRva2VucyBzdWJzdGl0dXRlZCBmcm9tIHRoZSBzdXBwbGllZCBhbm9tYWx5IHJlY29yZC4KICovCgoKZnVuY3Rpb24gYnVpbGRLaWJhbmFVcmwodXJsQ29uZmlnLCByZWNvcmQpIHsKICB2YXIgdXJsVmFsdWUgPSB1cmxDb25maWcudXJsX3ZhbHVlOwogIHZhciBVUkxfTEVOR1RIX0xJTUlUID0gMjAwMDsKICB2YXIgaXNMdWNlbmVRdWVyeUxhbmd1YWdlID0gdXJsVmFsdWUuaW5jbHVkZXMoJ2xhbmd1YWdlOmx1Y2VuZScpOwogIHZhciBxdWVyeUxhbmd1YWdlRXNjYXBlQ2FsbGJhY2sgPSBpc0x1Y2VuZVF1ZXJ5TGFuZ3VhZ2UgPyBfc3RyaW5nX3V0aWxzLmVzY2FwZUZvckVsYXN0aWNzZWFyY2hRdWVyeSA6IGVzY2FwZUZvcktRTDsKICB2YXIgY29tbW9uRXNjYXBlQ2FsbGJhY2sgPSAoMCwgX2xvZGFzaC5mbG93KSggLy8gS2liYW5hIFVSTHMgdXNlZCByaXNvbiBlbmNvZGluZywgc28gZXNjYXBlIHdpdGggISBhbnkgISBvciAnIGNoYXJhY3RlcnMKICBmdW5jdGlvbiAodikgewogICAgcmV0dXJuIHYucmVwbGFjZSgvWyEnXS9nLCAnISQmJyk7CiAgfSwgZW5jb2RlVVJJQ29tcG9uZW50KTsKCiAgdmFyIHJlcGxhY2VTaW5nbGVUb2tlblZhbHVlcyA9IGZ1bmN0aW9uIHJlcGxhY2VTaW5nbGVUb2tlblZhbHVlcyhzdHIpIHsKICAgIHZhciBnZXRSZXN1bHRUb2tlblZhbHVlID0gKDAsIF9sb2Rhc2guZmxvdykoIC8vIFNwZWNpYWwgY2hhcmFjdGVycyBpbnNpZGUgb2YgdGhlIGZpbHRlciBzaG91bGQgbm90IGJlIGVzY2FwZWQgZm9yIEx1Y2VuZSBxdWVyeSBsYW5ndWFnZS4KICAgIGlzTHVjZW5lUXVlcnlMYW5ndWFnZSA/IGZ1bmN0aW9uICh2KSB7CiAgICAgIHJldHVybiB2OwogICAgfSA6IHF1ZXJ5TGFuZ3VhZ2VFc2NhcGVDYWxsYmFjaywgY29tbW9uRXNjYXBlQ2FsbGJhY2spOyAvLyBMb29raW5nIGZvciBhICR0b2tlbiQgd2l0aCBhbiBvcHRpb25hbCB0cmFpbGluZyBzbGFzaAoKICAgIHJldHVybiBzdHIucmVwbGFjZSgvXCQoW14/JiRcJyJdKylcJChcLyk/L2csIGZ1bmN0aW9uIChtYXRjaCwgbmFtZSkgewogICAgICB2YXIgc2xhc2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICcnOyAvLyBVc2UgbG9kYXNoIGdldCB0byBhbGxvdyBuZXN0ZWQgSlNPTiBmaWVsZHMgdG8gYmUgcmV0cmlldmVkLgoKICAgICAgdmFyIHRva2VuVmFsdWUgPSAoMCwgX2xvZGFzaC5nZXQpKHJlY29yZCwgbmFtZSk7CiAgICAgIHRva2VuVmFsdWUgPSBBcnJheS5pc0FycmF5KHRva2VuVmFsdWUpID8gdG9rZW5WYWx1ZVswXSA6IHRva2VuVmFsdWU7IC8vIElmIHByb3BlcnR5IG5vdCBmb3VuZCB0b2tlbiBpcyByZXBsYWNlZCB3aXRoIGFuIGVtcHR5IHN0cmluZy4KCiAgICAgIHJldHVybiB0b2tlblZhbHVlID09PSB1bmRlZmluZWQgPyAnJyA6IGdldFJlc3VsdFRva2VuVmFsdWUodG9rZW5WYWx1ZSkgKyBzbGFzaDsKICAgIH0pOwogIH07CgogIHJldHVybiAoMCwgX2xvZGFzaC5mbG93KShmdW5jdGlvbiAoc3RyKSB7CiAgICByZXR1cm4gc3RyLnJlcGxhY2UoJyRlYXJsaWVzdCQnLCByZWNvcmQuZWFybGllc3QpLnJlcGxhY2UoJyRsYXRlc3QkJywgcmVjb3JkLmxhdGVzdCk7CiAgfSwgLy8gUHJvY2VzcyBxdWVyeSBzdHJpbmcgY29udGVudCBvZiB0aGUgVVJMCiAgZnVuY3Rpb24gKHN0cikgewogICAgdmFyIGdldFJlc3VsdFRva2VuVmFsdWUgPSAoMCwgX2xvZGFzaC5mbG93KShxdWVyeUxhbmd1YWdlRXNjYXBlQ2FsbGJhY2ssIGNvbW1vbkVzY2FwZUNhbGxiYWNrKTsKICAgIHJldHVybiBzdHIucmVwbGFjZSgvKC4rcXVlcnk6J3wuKyZrdWVyeT0pKFteJ10qKShbJyZdLispLywgZnVuY3Rpb24gKGZ1bGxNYXRjaCwgcHJlZml4LCBxdWVyeVN0cmluZywgcG9zdGZpeCkgewogICAgICB2YXIgX21hcCA9IFtwcmVmaXgsIHBvc3RmaXhdLm1hcChyZXBsYWNlU2luZ2xlVG9rZW5WYWx1ZXMpLAogICAgICAgICAgX21hcDIgPSBfc2xpY2VkVG9BcnJheShfbWFwLCAyKSwKICAgICAgICAgIHJlc3VsdFByZWZpeCA9IF9tYXAyWzBdLAogICAgICAgICAgcmVzdWx0UG9zdGZpeCA9IF9tYXAyWzFdOwoKICAgICAgdmFyIGF2YWlsYWJsZUNoYXJhY3RlcnNMZWZ0ID0gVVJMX0xFTkdUSF9MSU1JVCAtIHJlc3VsdFByZWZpeC5sZW5ndGggLSByZXN1bHRQb3N0Zml4Lmxlbmd0aDsKICAgICAgdmFyIHF1ZXJ5RmllbGRzID0gcXVlcnlTdHJpbmcgLy8gU3BsaXQgcXVlcnkgc3RyaW5nIGJ5IEFORCBvcGVyYXRvci4KICAgICAgLnNwbGl0KC9cc2FuZFxzL2kpIC8vIEdldCBwcm9wZXJ0eSBuYW1lIGZyb20gYGluZmx1ZW5jZXJGaWVsZDokaW5mbHVlbmNlckZpZWxkJGAgc3RyaW5nLgogICAgICAubWFwKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIHYuc3BsaXQoJzonKVswXTsKICAgICAgfSk7CiAgICAgIHZhciBxdWVyeVBhcnRzID0gW107CiAgICAgIHZhciBqb2luT3BlcmF0b3IgPSAnIEFORCAnOwoKICAgICAgZmllbGRzTG9vcDogZm9yICh2YXIgaSA9IDA7IGkgPCBxdWVyeUZpZWxkcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBmaWVsZCA9IHF1ZXJ5RmllbGRzW2ldOyAvLyBVc2UgbG9kYXNoIGdldCB0byBhbGxvdyBuZXN0ZWQgSlNPTiBmaWVsZHMgdG8gYmUgcmV0cmlldmVkLgoKICAgICAgICB2YXIgdG9rZW5WYWx1ZXMgPSAoMCwgX2xvZGFzaC5nZXQpKHJlY29yZCwgZmllbGQpIHx8IG51bGw7CgogICAgICAgIGlmICh0b2tlblZhbHVlcyA9PT0gbnVsbCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICB0b2tlblZhbHVlcyA9IEFycmF5LmlzQXJyYXkodG9rZW5WYWx1ZXMpID8gdG9rZW5WYWx1ZXMgOiBbdG9rZW5WYWx1ZXNdOyAvLyBDcmVhdGUgYSBwYWlyIGBpbmZsdWVuY2VyRmllbGQ6dmFsdWVgLgogICAgICAgIC8vIEluIGNhc2VzIHdoZXJlIHRoZXJlIGFyZSBtdWx0aXBsZSBpbmZsdWVuY2VyIGZpZWxkIHZhbHVlcyBmb3IgYW4gYW5vbWFseQogICAgICAgIC8vIGNvbWJpbmUgdmFsdWVzIHdpdGggT1Igb3BlcmF0b3IgZS5nLiBgKGluZmx1ZW5jZXJGaWVsZDp2YWx1ZSBvciBpbmZsdWVuY2VyRmllbGQ6YW5vdGhlcl92YWx1ZSlgLgoKICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdG9rZW5WYWx1ZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIHZhciBwYXJ0ID0gIiIuY29uY2F0KGogPiAwID8gJyBPUiAnIDogJycpLmNvbmNhdChmaWVsZCwgIjpcIiIpLmNvbmNhdChnZXRSZXN1bHRUb2tlblZhbHVlKHRva2VuVmFsdWVzW2pdKSwgIlwiIik7IC8vIEJ1aWxkIHVwIGEgVVJMIHN0cmluZyB3aGljaCBpcyBub3QgbG9uZ2VyIHRoYW4gdGhlIGFsbG93ZWQgbGVuZ3RoIGFuZCBpc24ndCBjb3JydXB0ZWQgYnkgaW52YWxpZCBxdWVyeS4KCiAgICAgICAgICBpZiAoYXZhaWxhYmxlQ2hhcmFjdGVyc0xlZnQgPCBwYXJ0Lmxlbmd0aCkgewogICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBxdWVyeVBhcnRzLnB1c2goaiA+IDAgPyAiKCIuY29uY2F0KHJlc3VsdCwgIikiKSA6IHJlc3VsdCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrIGZpZWxkc0xvb3A7CiAgICAgICAgICB9CgogICAgICAgICAgcmVzdWx0ICs9IHBhcnQ7CiAgICAgICAgICBhdmFpbGFibGVDaGFyYWN0ZXJzTGVmdCAtPSByZXN1bHQubGVuZ3RoOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICBxdWVyeVBhcnRzLnB1c2godG9rZW5WYWx1ZXMubGVuZ3RoID4gMSA/ICIoIi5jb25jYXQocmVzdWx0LCAiKSIpIDogcmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciByZXN1bHRRdWVyeSA9IHF1ZXJ5UGFydHMuam9pbihqb2luT3BlcmF0b3IpOwogICAgICByZXR1cm4gIiIuY29uY2F0KHJlc3VsdFByZWZpeCkuY29uY2F0KHJlc3VsdFF1ZXJ5KS5jb25jYXQocmVzdWx0UG9zdGZpeCk7CiAgICB9KTsKICB9LCByZXBsYWNlU2luZ2xlVG9rZW5WYWx1ZXMpKHVybFZhbHVlKTsKfSAvLyBSZXR1cm5zIHdoZXRoZXIgdGhlIHN1cHBsaWVkIGxhYmVsIGlzIHZhbGlkIGZvciBhIGN1c3RvbSBVUkwuCgoKZnVuY3Rpb24gaXNWYWxpZExhYmVsKGxhYmVsLCBzYXZlZEN1c3RvbVVybHMpIHsKICB2YXIgaXNWYWxpZCA9IGxhYmVsICE9PSB1bmRlZmluZWQgJiYgbGFiZWwudHJpbSgpLmxlbmd0aCA+IDA7CgogIGlmIChpc1ZhbGlkID09PSB0cnVlICYmIHNhdmVkQ3VzdG9tVXJscyAhPT0gdW5kZWZpbmVkKSB7CiAgICAvLyBDaGVjayB0aGUgbGFiZWwgaXMgdW5pcXVlLgogICAgdmFyIGV4aXN0aW5nTGFiZWxzID0gc2F2ZWRDdXN0b21VcmxzLm1hcChmdW5jdGlvbiAoY3VzdG9tVXJsKSB7CiAgICAgIHJldHVybiBjdXN0b21VcmwudXJsX25hbWU7CiAgICB9KTsKICAgIGlzVmFsaWQgPSAhZXhpc3RpbmdMYWJlbHMuaW5jbHVkZXMobGFiZWwpOwogIH0KCiAgcmV0dXJuIGlzVmFsaWQ7Cn0KCmZ1bmN0aW9uIGlzVmFsaWRUaW1lUmFuZ2UodGltZVJhbmdlKSB7CiAgLy8gQWxsb3cgZW1wdHkgdGltZVJhbmdlIHN0cmluZywgd2hpY2ggZ2l2ZXMgdGhlICdhdXRvJyBiZWhhdmlvdXIuCiAgaWYgKHRpbWVSYW5nZSA9PT0gdW5kZWZpbmVkIHx8IHRpbWVSYW5nZS5sZW5ndGggPT09IDAgfHwgdGltZVJhbmdlID09PSBUSU1FX1JBTkdFX0FVVE8pIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgdmFyIGludGVydmFsID0gKDAsIF9wYXJzZV9pbnRlcnZhbC5wYXJzZUludGVydmFsKSh0aW1lUmFuZ2UpOwogIHJldHVybiBpbnRlcnZhbCAhPT0gbnVsbDsKfQ=="},null]}