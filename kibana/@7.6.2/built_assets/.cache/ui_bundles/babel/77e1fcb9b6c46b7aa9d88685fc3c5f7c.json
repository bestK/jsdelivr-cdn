{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/input_control_vis/public/components/editor/list_control_editor.js","dependencies":[{"path":"src/legacy/core_plugins/input_control_vis/public/components/editor/list_control_editor.js","mtime":1585205039340},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuTGlzdENvbnRyb2xFZGl0b3IgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfaW5kZXhfcGF0dGVybl9zZWxlY3RfZm9ybV9yb3cgPSByZXF1aXJlKCIuL2luZGV4X3BhdHRlcm5fc2VsZWN0X2Zvcm1fcm93Iik7Cgp2YXIgX2ZpZWxkX3NlbGVjdCA9IHJlcXVpcmUoIi4vZmllbGRfc2VsZWN0Iik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gInN5bWJvbCIpIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfSBlbHNlIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9CgogIHJldHVybiBfdHlwZW9mKG9iaik7Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBmaWx0ZXJGaWVsZChmaWVsZCkgewogIHJldHVybiBCb29sZWFuKGZpZWxkLmFnZ3JlZ2F0YWJsZSkgJiYgWydudW1iZXInLCAnYm9vbGVhbicsICdkYXRlJywgJ2lwJywgJ3N0cmluZyddLmluY2x1ZGVzKGZpZWxkLnR5cGUpOwp9Cgp2YXIgTGlzdENvbnRyb2xFZGl0b3IgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfUHVyZUNvbXBvbmVudCkgewogIF9pbmhlcml0cyhMaXN0Q29udHJvbEVkaXRvciwgX1B1cmVDb21wb25lbnQpOwoKICBmdW5jdGlvbiBMaXN0Q29udHJvbEVkaXRvcigpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTGlzdENvbnRyb2xFZGl0b3IpOwoKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgfQoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9nZXRQcm90b3R5cGVPZjIgPSBfZ2V0UHJvdG90eXBlT2YoTGlzdENvbnRyb2xFZGl0b3IpKS5jYWxsLmFwcGx5KF9nZXRQcm90b3R5cGVPZjIsIFt0aGlzXS5jb25jYXQoYXJncykpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJpc01vdW50ZWQiLCBmYWxzZSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB7CiAgICAgIGlzTG9hZGluZ0ZpZWxkVHlwZTogdHJ1ZSwKICAgICAgaXNTdHJpbmdGaWVsZDogZmFsc2UsCiAgICAgIHByZXZGaWVsZE5hbWU6IF90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMuZmllbGROYW1lLAogICAgICBJbmRleFBhdHRlcm5TZWxlY3Q6IG51bGwKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNvbXBvbmVudERpZFVwZGF0ZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKF90aGlzLnN0YXRlLmlzTG9hZGluZ0ZpZWxkVHlwZSkgewogICAgICAgIF90aGlzLmxvYWRJc1N0cmluZ0ZpZWxkKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImxvYWRJc1N0cmluZ0ZpZWxkIiwgZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGluZGV4UGF0dGVybiwgZmllbGQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCEoIV90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMuaW5kZXhQYXR0ZXJuIHx8ICFfdGhpcy5wcm9wcy5jb250cm9sUGFyYW1zLmZpZWxkTmFtZSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc0xvYWRpbmdGaWVsZFR5cGU6IGZhbHNlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX3RoaXMucHJvcHMuZ2V0SW5kZXhQYXR0ZXJuKF90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMuaW5kZXhQYXR0ZXJuKSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJuID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDk7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgaWYgKF90aGlzLmlzTW91bnRlZCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgZmllbGQgPSBpbmRleFBhdHRlcm4uZmllbGRzLmZpbmQoZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICAgICAgICAgIHZhciBuYW1lID0gX3JlZi5uYW1lOwogICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUgPT09IF90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMuZmllbGROYW1lOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBpZiAoZmllbGQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzTG9hZGluZ0ZpZWxkVHlwZTogZmFsc2UsCiAgICAgICAgICAgICAgICBpc1N0cmluZ0ZpZWxkOiBmaWVsZC50eXBlID09PSAnc3RyaW5nJwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgbnVsbCwgW1szLCA5XV0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVuZGVyT3B0aW9ucyIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzJGNvbnRyb2xQYSwgX3RoaXMkcHJvcHMkY29udHJvbFBhMjsKCiAgICAgIGlmIChfdGhpcy5zdGF0ZS5pc0xvYWRpbmdGaWVsZFR5cGUgfHwgIV90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMuZmllbGROYW1lKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgb3B0aW9ucyA9IFtdOwoKICAgICAgaWYgKF90aGlzLnByb3BzLnBhcmVudENhbmRpZGF0ZXMgJiYgX3RoaXMucHJvcHMucGFyZW50Q2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIHBhcmVudENhbmRpZGF0ZXNPcHRpb25zID0gW3sKICAgICAgICAgIHZhbHVlOiAnJywKICAgICAgICAgIHRleHQ6ICcnCiAgICAgICAgfV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShfdGhpcy5wcm9wcy5wYXJlbnRDYW5kaWRhdGVzKSk7CiAgICAgICAgb3B0aW9ucy5wdXNoKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgICAgICBpZDogInBhcmVudFNlbGVjdC0iLmNvbmNhdChfdGhpcy5wcm9wcy5jb250cm9sSW5kZXgpLAogICAgICAgICAgbGFiZWw6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAiaW5wdXRDb250cm9sLmVkaXRvci5saXN0Q29udHJvbC5wYXJlbnRMYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUGFyZW50IGNvbnRyb2wiCiAgICAgICAgICB9KSwKICAgICAgICAgIGhlbHBUZXh0OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogImlucHV0Q29udHJvbC5lZGl0b3IubGlzdENvbnRyb2wucGFyZW50RGVzY3JpcHRpb24iLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIk9wdGlvbnMgYXJlIGJhc2VkIG9uIHRoZSB2YWx1ZSBvZiBwYXJlbnQgY29udHJvbC4gRGlzYWJsZWQgaWYgcGFyZW50IGlzIG5vdCBzZXQuIgogICAgICAgICAgfSksCiAgICAgICAgICBrZXk6ICJwYXJlbnRTZWxlY3QiCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNlbGVjdCwgewogICAgICAgICAgb3B0aW9uczogcGFyZW50Q2FuZGlkYXRlc09wdGlvbnMsCiAgICAgICAgICB2YWx1ZTogX3RoaXMucHJvcHMuY29udHJvbFBhcmFtcy5wYXJlbnQsCiAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgICAgX3RoaXMucHJvcHMuaGFuZGxlUGFyZW50Q2hhbmdlKF90aGlzLnByb3BzLmNvbnRyb2xJbmRleCwgZXZlbnQpOwogICAgICAgICAgfQogICAgICAgIH0pKSk7CiAgICAgIH0KCiAgICAgIG9wdGlvbnMucHVzaChfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICAgIGlkOiAibXVsdGlzZWxlY3QtIi5jb25jYXQoX3RoaXMucHJvcHMuY29udHJvbEluZGV4KSwKICAgICAgICBrZXk6ICJtdWx0aXNlbGVjdCIsCiAgICAgICAgaGVscFRleHQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogImlucHV0Q29udHJvbC5lZGl0b3IubGlzdENvbnRyb2wubXVsdGlzZWxlY3REZXNjcmlwdGlvbiIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFsbG93IG11bHRpcGxlIHNlbGVjdGlvbiIKICAgICAgICB9KQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3dpdGNoLCB7CiAgICAgICAgbGFiZWw6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogImlucHV0Q29udHJvbC5lZGl0b3IubGlzdENvbnRyb2wubXVsdGlzZWxlY3RMYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIk11bHRpc2VsZWN0IgogICAgICAgIH0pLAogICAgICAgIGNoZWNrZWQ6IChfdGhpcyRwcm9wcyRjb250cm9sUGEgPSBfdGhpcy5wcm9wcy5jb250cm9sUGFyYW1zLm9wdGlvbnMubXVsdGlzZWxlY3QpICE9PSBudWxsICYmIF90aGlzJHByb3BzJGNvbnRyb2xQYSAhPT0gdm9pZCAwID8gX3RoaXMkcHJvcHMkY29udHJvbFBhIDogdHJ1ZSwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIF90aGlzLnByb3BzLmhhbmRsZUNoZWNrYm94T3B0aW9uQ2hhbmdlKF90aGlzLnByb3BzLmNvbnRyb2xJbmRleCwgJ211bHRpc2VsZWN0JywgZXZlbnQpOwogICAgICAgIH0sCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImxpc3RDb250cm9sTXVsdGlzZWxlY3RJbnB1dCIKICAgICAgfSkpKTsKICAgICAgdmFyIGR5bmFtaWNPcHRpb25zSGVscFRleHQgPSBfdGhpcy5zdGF0ZS5pc1N0cmluZ0ZpZWxkID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImlucHV0Q29udHJvbC5lZGl0b3IubGlzdENvbnRyb2wuZHluYW1pY09wdGlvbnMudXBkYXRlRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVXBkYXRlIG9wdGlvbnMgaW4gcmVzcG9uc2UgdG8gdXNlciBpbnB1dCIKICAgICAgfSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiaW5wdXRDb250cm9sLmVkaXRvci5saXN0Q29udHJvbC5keW5hbWljT3B0aW9ucy5zdHJpbmdGaWVsZERlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIk9ubHkgYXZhaWxhYmxlIGZvciBcInN0cmluZ1wiIGZpZWxkcyIKICAgICAgfSk7CiAgICAgIG9wdGlvbnMucHVzaChfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICAgIGlkOiAiZHluYW1pY09wdGlvbnMtIi5jb25jYXQoX3RoaXMucHJvcHMuY29udHJvbEluZGV4KSwKICAgICAgICBrZXk6ICJkeW5hbWljT3B0aW9ucyIsCiAgICAgICAgaGVscFRleHQ6IGR5bmFtaWNPcHRpb25zSGVscFRleHQKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVN3aXRjaCwgewogICAgICAgIGxhYmVsOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJpbnB1dENvbnRyb2wuZWRpdG9yLmxpc3RDb250cm9sLmR5bmFtaWNPcHRpb25zTGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJEeW5hbWljIE9wdGlvbnMiCiAgICAgICAgfSksCiAgICAgICAgY2hlY2tlZDogKF90aGlzJHByb3BzJGNvbnRyb2xQYTIgPSBfdGhpcy5wcm9wcy5jb250cm9sUGFyYW1zLm9wdGlvbnMuZHluYW1pY09wdGlvbnMpICE9PSBudWxsICYmIF90aGlzJHByb3BzJGNvbnRyb2xQYTIgIT09IHZvaWQgMCA/IF90aGlzJHByb3BzJGNvbnRyb2xQYTIgOiBmYWxzZSwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIF90aGlzLnByb3BzLmhhbmRsZUNoZWNrYm94T3B0aW9uQ2hhbmdlKF90aGlzLnByb3BzLmNvbnRyb2xJbmRleCwgJ2R5bmFtaWNPcHRpb25zJywgZXZlbnQpOwogICAgICAgIH0sCiAgICAgICAgZGlzYWJsZWQ6IF90aGlzLnN0YXRlLmlzU3RyaW5nRmllbGQgPyBmYWxzZSA6IHRydWUsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImxpc3RDb250cm9sRHluYW1pY09wdGlvbnNTd2l0Y2giCiAgICAgIH0pKSk7IC8vIHNpemUgaXMgbm90IHVzZWQgd2hlbiBkeW5hbWljIG9wdGlvbnMgaXMgc2V0CgogICAgICBpZiAoIV90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMub3B0aW9ucy5keW5hbWljT3B0aW9ucyB8fCAhX3RoaXMuc3RhdGUuaXNTdHJpbmdGaWVsZCkgewogICAgICAgIG9wdGlvbnMucHVzaChfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICAgICAgaWQ6ICJzaXplLSIuY29uY2F0KF90aGlzLnByb3BzLmNvbnRyb2xJbmRleCksCiAgICAgICAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJpbnB1dENvbnRyb2wuZWRpdG9yLmxpc3RDb250cm9sLnNpemVMYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2l6ZSIKICAgICAgICAgIH0pLAogICAgICAgICAga2V5OiAic2l6ZSIsCiAgICAgICAgICBoZWxwVGV4dDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJpbnB1dENvbnRyb2wuZWRpdG9yLmxpc3RDb250cm9sLnNpemVEZXNjcmlwdGlvbiIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTnVtYmVyIG9mIG9wdGlvbnMiCiAgICAgICAgICB9KQogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGaWVsZE51bWJlciwgewogICAgICAgICAgbWluOiAxLAogICAgICAgICAgdmFsdWU6IF90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMub3B0aW9ucy5zaXplLAogICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICAgIF90aGlzLnByb3BzLmhhbmRsZU51bWJlck9wdGlvbkNoYW5nZShfdGhpcy5wcm9wcy5jb250cm9sSW5kZXgsICdzaXplJywgZXZlbnQpOwogICAgICAgICAgfSwKICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJsaXN0Q29udHJvbFNpemVJbnB1dCIKICAgICAgICB9KSkpOwogICAgICB9CgogICAgICByZXR1cm4gb3B0aW9uczsKICAgIH0pOwoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhMaXN0Q29udHJvbEVkaXRvciwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgdGhpcy5pc01vdW50ZWQgPSB0cnVlOwogICAgICB0aGlzLmxvYWRJc1N0cmluZ0ZpZWxkKCk7CiAgICAgIHRoaXMuZ2V0SW5kZXhQYXR0ZXJuU2VsZWN0KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50V2lsbFVubW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkgewogICAgICB0aGlzLmlzTW91bnRlZCA9IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEluZGV4UGF0dGVyblNlbGVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5kZXhQYXR0ZXJuU2VsZWN0KCkgewogICAgICB2YXIgX3JlZjIsIF9yZWYzLCBkYXRhOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRJbmRleFBhdHRlcm5TZWxlY3QkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMucHJvcHMuZGVwcy5jb3JlLmdldFN0YXJ0U2VydmljZXMoKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgX3JlZjIgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBfcmVmMyA9IF9zbGljZWRUb0FycmF5KF9yZWYyLCAyKTsKICAgICAgICAgICAgICBkYXRhID0gX3JlZjNbMV0uZGF0YTsKICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIEluZGV4UGF0dGVyblNlbGVjdDogZGF0YS51aS5JbmRleFBhdHRlcm5TZWxlY3QKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICBpZiAodGhpcy5zdGF0ZS5JbmRleFBhdHRlcm5TZWxlY3QgPT09IG51bGwpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2luZGV4X3BhdHRlcm5fc2VsZWN0X2Zvcm1fcm93LkluZGV4UGF0dGVyblNlbGVjdEZvcm1Sb3csIHsKICAgICAgICBpbmRleFBhdHRlcm5JZDogdGhpcy5wcm9wcy5jb250cm9sUGFyYW1zLmluZGV4UGF0dGVybiwKICAgICAgICBvbkNoYW5nZTogdGhpcy5wcm9wcy5oYW5kbGVJbmRleFBhdHRlcm5DaGFuZ2UsCiAgICAgICAgY29udHJvbEluZGV4OiB0aGlzLnByb3BzLmNvbnRyb2xJbmRleCwKICAgICAgICBJbmRleFBhdHRlcm5TZWxlY3Q6IHRoaXMuc3RhdGUuSW5kZXhQYXR0ZXJuU2VsZWN0CiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9maWVsZF9zZWxlY3QuRmllbGRTZWxlY3QsIHsKICAgICAgICBmaWVsZE5hbWU6IHRoaXMucHJvcHMuY29udHJvbFBhcmFtcy5maWVsZE5hbWUsCiAgICAgICAgaW5kZXhQYXR0ZXJuSWQ6IHRoaXMucHJvcHMuY29udHJvbFBhcmFtcy5pbmRleFBhdHRlcm4sCiAgICAgICAgZmlsdGVyRmllbGQ6IGZpbHRlckZpZWxkLAogICAgICAgIG9uQ2hhbmdlOiB0aGlzLnByb3BzLmhhbmRsZUZpZWxkTmFtZUNoYW5nZSwKICAgICAgICBnZXRJbmRleFBhdHRlcm46IHRoaXMucHJvcHMuZ2V0SW5kZXhQYXR0ZXJuLAogICAgICAgIGNvbnRyb2xJbmRleDogdGhpcy5wcm9wcy5jb250cm9sSW5kZXgKICAgICAgfSksIHRoaXMucmVuZGVyT3B0aW9ucygpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBMaXN0Q29udHJvbEVkaXRvcjsKfShfcmVhY3QuUHVyZUNvbXBvbmVudCk7CgpleHBvcnRzLkxpc3RDb250cm9sRWRpdG9yID0gTGlzdENvbnRyb2xFZGl0b3I7CgpfZGVmaW5lUHJvcGVydHkoTGlzdENvbnRyb2xFZGl0b3IsICJnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMiLCBmdW5jdGlvbiAobmV4dFByb3BzLCBwcmV2U3RhdGUpIHsKICB2YXIgaXNOZXdGaWVsZE5hbWUgPSBwcmV2U3RhdGUucHJldkZpZWxkTmFtZSAhPT0gbmV4dFByb3BzLmNvbnRyb2xQYXJhbXMuZmllbGROYW1lOwoKICBpZiAoIXByZXZTdGF0ZS5pc0xvYWRpbmdGaWVsZFR5cGUgJiYgaXNOZXdGaWVsZE5hbWUpIHsKICAgIHJldHVybiB7CiAgICAgIHByZXZGaWVsZE5hbWU6IG5leHRQcm9wcy5jb250cm9sUGFyYW1zLmZpZWxkTmFtZSwKICAgICAgaXNMb2FkaW5nRmllbGRUeXBlOiB0cnVlCiAgICB9OwogIH0KCiAgcmV0dXJuIG51bGw7Cn0pOw=="},null]}