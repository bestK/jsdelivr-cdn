{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/file_upload/public/util/indexing_service.js","dependencies":[{"path":"x-pack/legacy/plugins/file_upload/public/util/indexing_service.js","mtime":1585205044193},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmluZGV4RGF0YSA9IGluZGV4RGF0YTsKZXhwb3J0cy5jcmVhdGVJbmRleFBhdHRlcm4gPSBjcmVhdGVJbmRleFBhdHRlcm47CmV4cG9ydHMuY2hlY2tJbmRleFBhdHRlcm5WYWxpZCA9IGNoZWNrSW5kZXhQYXR0ZXJuVmFsaWQ7CmV4cG9ydHMuZ2V0RXhpc3RpbmdJbmRleFBhdHRlcm5OYW1lcyA9IGV4cG9ydHMuZ2V0RXhpc3RpbmdJbmRleE5hbWVzID0gdm9pZCAwOwoKdmFyIF9odHRwX3NlcnZpY2UgPSByZXF1aXJlKCIuL2h0dHBfc2VydmljZSIpOwoKdmFyIF9raWJhbmFfc2VydmljZXMgPSByZXF1aXJlKCIuLi9raWJhbmFfc2VydmljZXMiKTsKCnZhciBfZ2VvX3Byb2Nlc3NpbmcgPSByZXF1aXJlKCIuL2dlb19wcm9jZXNzaW5nIik7Cgp2YXIgX3NpemVfbGltaXRlZF9jaHVua2luZyA9IHJlcXVpcmUoIi4vc2l6ZV9saW1pdGVkX2NodW5raW5nIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIGZpbGVUeXBlID0gJ2pzb24nOwoKZnVuY3Rpb24gaW5kZXhEYXRhKHBhcnNlZEZpbGUsIHRyYW5zZm9ybURldGFpbHMsIGluZGV4TmFtZSwgZGF0YVR5cGUsIGFwcE5hbWUpIHsKICB2YXIgdHJhbnNmb3JtUmVzdWx0LCBpbmRleGluZ0RldGFpbHMsIGNyZWF0ZWRJbmRleCwgaWQsIGluZGV4V3JpdGVSZXN1bHRzOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gaW5kZXhEYXRhJChfY29udGV4dCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGlmIChwYXJzZWRGaWxlKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICB0aHJvdyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suZmlsZVVwbG9hZC5pbmRleGluZ1NlcnZpY2Uubm9GaWxlSW1wb3J0ZWQnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTm8gZmlsZSBpbXBvcnRlZC4nCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgLy8gUGVyZm9ybSBhbnkgcHJvY2Vzc2luZyByZXF1aXJlZCBvbiBmaWxlIHByaW9yIHRvIGluZGV4aW5nCiAgICAgICAgICB0cmFuc2Zvcm1SZXN1bHQgPSB0cmFuc2Zvcm1EYXRhQnlGb3JtYXRGb3JJbmRleGluZyh0cmFuc2Zvcm1EZXRhaWxzLCBwYXJzZWRGaWxlLCBkYXRhVHlwZSk7CgogICAgICAgICAgaWYgKHRyYW5zZm9ybVJlc3VsdC5zdWNjZXNzKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICB0aHJvdyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suZmlsZVVwbG9hZC5pbmRleGluZ1NlcnZpY2UudHJhbnNmb3JtUmVzdWx0RXJyb3InLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRXJyb3IgdHJhbnNmb3JtaW5nIGRhdGE6IHtlcnJvcn0nLAogICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICBlcnJvcjogdHJhbnNmb3JtUmVzdWx0LmVycm9yCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgICAvLyBDcmVhdGUgbmV3IGluZGV4CiAgICAgICAgICBpbmRleGluZ0RldGFpbHMgPSB0cmFuc2Zvcm1SZXN1bHQuaW5kZXhpbmdEZXRhaWxzOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHdyaXRlVG9JbmRleChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgYXBwTmFtZTogYXBwTmFtZQogICAgICAgICAgfSwgaW5kZXhpbmdEZXRhaWxzLCB7CiAgICAgICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgICAgIGRhdGE6IFtdLAogICAgICAgICAgICBpbmRleDogaW5kZXhOYW1lCiAgICAgICAgICB9KSkpOwoKICAgICAgICBjYXNlIDg6CiAgICAgICAgICBjcmVhdGVkSW5kZXggPSBfY29udGV4dC5zZW50OwogICAgICAgICAgX2NvbnRleHQucHJldiA9IDk7CgogICAgICAgICAgaWYgKCEoY3JlYXRlZEluZGV4ICYmIGNyZWF0ZWRJbmRleC5pZCkpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBpZCA9IGNyZWF0ZWRJbmRleC5pZDsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDE0OgogICAgICAgICAgdGhyb3cgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmZpbGVVcGxvYWQuaW5kZXhpbmdTZXJ2aWNlLmVycm9yQ3JlYXRpbmdJbmRleCcsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFcnJvciBjcmVhdGluZyBpbmRleCcKICAgICAgICAgIH0pOwoKICAgICAgICBjYXNlIDE1OgogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTc6CiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTc7CiAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDkpOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICBlcnJvcjogX2NvbnRleHQudDAsCiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSAyMDoKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY2h1bmtEYXRhQW5kV3JpdGVUb0luZGV4KF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgIGluZGV4OiBpbmRleE5hbWUKICAgICAgICAgIH0sIGluZGV4aW5nRGV0YWlscywgewogICAgICAgICAgICBzZXR0aW5nczoge30sCiAgICAgICAgICAgIG1hcHBpbmdzOiB7fQogICAgICAgICAgfSkpKTsKCiAgICAgICAgY2FzZSAyMjoKICAgICAgICAgIGluZGV4V3JpdGVSZXN1bHRzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGluZGV4V3JpdGVSZXN1bHRzKTsKCiAgICAgICAgY2FzZSAyNDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbOSwgMTddXSk7Cn0KCmZ1bmN0aW9uIHRyYW5zZm9ybURhdGFCeUZvcm1hdEZvckluZGV4aW5nKHRyYW5zZm9ybSwgcGFyc2VkRmlsZSwgZGF0YVR5cGUpIHsKICB2YXIgaW5kZXhpbmdEZXRhaWxzOwoKICBpZiAoIXRyYW5zZm9ybSkgewogICAgcmV0dXJuIHsKICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAgIGVycm9yOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suZmlsZVVwbG9hZC5pbmRleGluZ1NlcnZpY2Uubm9UcmFuc2Zvcm1EZWZpbmVkJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTm8gdHJhbnNmb3JtIGRlZmluZWQnCiAgICAgIH0pCiAgICB9OwogIH0KCiAgaWYgKF90eXBlb2YodHJhbnNmb3JtKSAhPT0gJ29iamVjdCcpIHsKICAgIHN3aXRjaCAodHJhbnNmb3JtKSB7CiAgICAgIGNhc2UgJ2dlbyc6CiAgICAgICAgaW5kZXhpbmdEZXRhaWxzID0gKDAsIF9nZW9fcHJvY2Vzc2luZy5nZXRHZW9Kc29uSW5kZXhpbmdEZXRhaWxzKShwYXJzZWRGaWxlLCBkYXRhVHlwZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwKICAgICAgICAgIGVycm9yOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suZmlsZVVwbG9hZC5pbmRleGluZ1NlcnZpY2Uubm9IYW5kbGluZ0ZvclRyYW5zZm9ybScsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdObyBoYW5kbGluZyBkZWZpbmVkIGZvciB0cmFuc2Zvcm06IHt0cmFuc2Zvcm19JywKICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm0KICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9OwogICAgfQogIH0gZWxzZSB7CiAgICAvLyBDdXN0b20gdHJhbnNmb3JtCiAgICBpbmRleGluZ0RldGFpbHMgPSB0cmFuc2Zvcm0uZ2V0SW5kZXhpbmdEZXRhaWxzKHBhcnNlZEZpbGUpOwogIH0KCiAgaWYgKGluZGV4aW5nRGV0YWlscyAmJiBpbmRleGluZ0RldGFpbHMuZGF0YSAmJiBpbmRleGluZ0RldGFpbHMuZGF0YS5sZW5ndGgpIHsKICAgIHJldHVybiB7CiAgICAgIHN1Y2Nlc3M6IHRydWUsCiAgICAgIGluZGV4aW5nRGV0YWlsczogaW5kZXhpbmdEZXRhaWxzCiAgICB9OwogIH0gZWxzZSBpZiAoaW5kZXhpbmdEZXRhaWxzICYmIGluZGV4aW5nRGV0YWlscy5kYXRhKSB7CiAgICByZXR1cm4gewogICAgICBzdWNjZXNzOiBmYWxzZSwKICAgICAgZXJyb3I6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5maWxlVXBsb2FkLmluZGV4aW5nU2VydmljZS5ub0luZGV4aW5nRGV0YWlsc0ZvckRhdGF0eXBlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTm8gaW5kZXhpbmcgZGV0YWlscyBkZWZpbmVkIGZvciBkYXRhdHlwZToge2RhdGFUeXBlfSIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBkYXRhVHlwZTogZGF0YVR5cGUKICAgICAgICB9CiAgICAgIH0pCiAgICB9OwogIH0gZWxzZSB7CiAgICByZXR1cm4gewogICAgICBzdWNjZXNzOiBmYWxzZSwKICAgICAgZXJyb3I6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5maWxlVXBsb2FkLmluZGV4aW5nU2VydmljZS51bmtub3duVHJhbnNmb3JtRXJyb3InLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbmtub3duIGVycm9yIHBlcmZvcm1pbmcgdHJhbnNmb3JtOiB7dHJhbnNmb3JtfScsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybQogICAgICAgIH0KICAgICAgfSkKICAgIH07CiAgfQp9CgpmdW5jdGlvbiB3cml0ZVRvSW5kZXgoaW5kZXhpbmdEZXRhaWxzKSB7CiAgdmFyIHBhcmFtU3RyaW5nLCBhcHBOYW1lLCBpbmRleCwgZGF0YSwgc2V0dGluZ3MsIG1hcHBpbmdzLCBpbmdlc3RQaXBlbGluZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHdyaXRlVG9JbmRleCQoX2NvbnRleHQyKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBwYXJhbVN0cmluZyA9IGluZGV4aW5nRGV0YWlscy5pZCAhPT0gdW5kZWZpbmVkID8gIj9pZD0iLmNvbmNhdChpbmRleGluZ0RldGFpbHMuaWQpIDogJyc7CiAgICAgICAgICBhcHBOYW1lID0gaW5kZXhpbmdEZXRhaWxzLmFwcE5hbWUsIGluZGV4ID0gaW5kZXhpbmdEZXRhaWxzLmluZGV4LCBkYXRhID0gaW5kZXhpbmdEZXRhaWxzLmRhdGEsIHNldHRpbmdzID0gaW5kZXhpbmdEZXRhaWxzLnNldHRpbmdzLCBtYXBwaW5ncyA9IGluZGV4aW5nRGV0YWlscy5tYXBwaW5ncywgaW5nZXN0UGlwZWxpbmUgPSBpbmRleGluZ0RldGFpbHMuaW5nZXN0UGlwZWxpbmU7CiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKCgwLCBfaHR0cF9zZXJ2aWNlLmh0dHApKHsKICAgICAgICAgICAgdXJsOiAiIi5jb25jYXQoX2tpYmFuYV9zZXJ2aWNlcy5hcGlCYXNlUGF0aCwgIi9maWxldXBsb2FkL2ltcG9ydCIpLmNvbmNhdChwYXJhbVN0cmluZyksCiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICBkYXRhOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICBpbmRleDogaW5kZXgsCiAgICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgICBzZXR0aW5nczogc2V0dGluZ3MsCiAgICAgICAgICAgICAgbWFwcGluZ3M6IG1hcHBpbmdzLAogICAgICAgICAgICAgIGluZ2VzdFBpcGVsaW5lOiBpbmdlc3RQaXBlbGluZSwKICAgICAgICAgICAgICBmaWxlVHlwZTogZmlsZVR5cGUKICAgICAgICAgICAgfSwgYXBwTmFtZSA/IHsKICAgICAgICAgICAgICBhcHA6IGFwcE5hbWUKICAgICAgICAgICAgfSA6IHt9KQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyLnNlbnQpOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIGNodW5rRGF0YUFuZFdyaXRlVG9JbmRleChfcmVmKSB7CiAgdmFyIGlkLCBpbmRleCwgZGF0YSwgbWFwcGluZ3MsIHNldHRpbmdzLCBjaHVua3MsIHN1Y2Nlc3MsIGZhaWx1cmVzLCBlcnJvciwgZG9jQ291bnQsIGksIGFnZ3MsIHJlc3AsIF9yZXNwOwoKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGNodW5rRGF0YUFuZFdyaXRlVG9JbmRleCQoX2NvbnRleHQzKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBpZCA9IF9yZWYuaWQsIGluZGV4ID0gX3JlZi5pbmRleCwgZGF0YSA9IF9yZWYuZGF0YSwgbWFwcGluZ3MgPSBfcmVmLm1hcHBpbmdzLCBzZXR0aW5ncyA9IF9yZWYuc2V0dGluZ3M7CgogICAgICAgICAgaWYgKGluZGV4KSB7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAgICAgICAgIGVycm9yOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suZmlsZVVwbG9hZC5ub0luZGV4U3VwcGxpZWRFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdObyBpbmRleCBwcm92aWRlZC4nCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2h1bmtzID0gKDAsIF9zaXplX2xpbWl0ZWRfY2h1bmtpbmcuc2l6ZUxpbWl0ZWRDaHVua2luZykoZGF0YSk7CiAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTsKICAgICAgICAgIGZhaWx1cmVzID0gW107CiAgICAgICAgICBkb2NDb3VudCA9IDA7CiAgICAgICAgICBpID0gMDsKCiAgICAgICAgY2FzZSA4OgogICAgICAgICAgaWYgKCEoaSA8IGNodW5rcy5sZW5ndGgpKSB7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjg7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFnZ3MgPSB7CiAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgICBkYXRhOiBjaHVua3NbaV0sCiAgICAgICAgICAgIHNldHRpbmdzOiBzZXR0aW5ncywKICAgICAgICAgICAgbWFwcGluZ3M6IG1hcHBpbmdzLAogICAgICAgICAgICBpbmdlc3RQaXBlbGluZToge30gLy8gVE9ETzogU3VwcG9ydCBjdXN0b20gaW5nZXN0IHBpcGVsaW5lcwoKICAgICAgICAgIH07CiAgICAgICAgICByZXNwID0gewogICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwKICAgICAgICAgICAgZmFpbHVyZXM6IFtdLAogICAgICAgICAgICBkb2NDb3VudDogMAogICAgICAgICAgfTsKICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHdyaXRlVG9JbmRleChhZ2dzKSk7CgogICAgICAgIGNhc2UgMTM6CiAgICAgICAgICByZXNwID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICBmYWlsdXJlcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZmFpbHVyZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkocmVzcC5mYWlsdXJlcykpOwoKICAgICAgICAgIGlmICghcmVzcC5zdWNjZXNzKSB7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIF9yZXNwID0gcmVzcDsKICAgICAgICAgIHN1Y2Nlc3MgPSBfcmVzcC5zdWNjZXNzOwogICAgICAgICAgZG9jQ291bnQgPSBkb2NDb3VudCArIHJlc3AuZG9jQ291bnQ7CiAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI1OwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjE6CiAgICAgICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICAgICAgICBlcnJvciA9IHJlc3AuZXJyb3I7CiAgICAgICAgICBkb2NDb3VudCA9IDA7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgiYnJlYWsiLCAyOCk7CgogICAgICAgIGNhc2UgMjU6CiAgICAgICAgICBpKys7CiAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDg7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyODoKICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgc3VjY2Vzczogc3VjY2VzcywKICAgICAgICAgICAgZmFpbHVyZXM6IGZhaWx1cmVzLAogICAgICAgICAgICBkb2NDb3VudDogZG9jQ291bnQKICAgICAgICAgIH0sIGVycm9yID8gewogICAgICAgICAgICBlcnJvcjogZXJyb3IKICAgICAgICAgIH0gOiB7fSkpOwoKICAgICAgICBjYXNlIDI5OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBjcmVhdGVJbmRleFBhdHRlcm4oaW5kZXhQYXR0ZXJuTmFtZSkgewogIHZhciBpbmRleFBhdHRlcm5zLCBfaWQsIGluZGV4UGF0dGVybjsKCiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjcmVhdGVJbmRleFBhdHRlcm4kKF9jb250ZXh0NCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfa2liYW5hX3NlcnZpY2VzLmluZGV4UGF0dGVyblNlcnZpY2UuZ2V0KCkpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBpbmRleFBhdHRlcm5zID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICBfY29udGV4dDQucHJldiA9IDM7CiAgICAgICAgICBPYmplY3QuYXNzaWduKGluZGV4UGF0dGVybnMsIHsKICAgICAgICAgICAgaWQ6ICcnLAogICAgICAgICAgICB0aXRsZTogaW5kZXhQYXR0ZXJuTmFtZQogICAgICAgICAgfSk7CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGluZGV4UGF0dGVybnMuY3JlYXRlKHRydWUpKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA5OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChnZXRJbmRleFBhdHRlcm5JZChpbmRleFBhdHRlcm5OYW1lKSk7CgogICAgICAgIGNhc2UgOToKICAgICAgICAgIF9pZCA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX2tpYmFuYV9zZXJ2aWNlcy5pbmRleFBhdHRlcm5TZXJ2aWNlLmdldChfaWQpKTsKCiAgICAgICAgY2FzZSAxMjoKICAgICAgICAgIGluZGV4UGF0dGVybiA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgICAgICAgaWQ6IF9pZCwKICAgICAgICAgICAgZmllbGRzOiBpbmRleFBhdHRlcm4uZmllbGRzCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMTY7CiAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oMyk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwKICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0NC50MAogICAgICAgICAgfSk7CgogICAgICAgIGNhc2UgMTk6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1szLCAxNl1dKTsKfQoKZnVuY3Rpb24gZ2V0SW5kZXhQYXR0ZXJuSWQobmFtZSkgewogIHZhciBzYXZlZE9iamVjdFNlYXJjaCwgaW5kZXhQYXR0ZXJuU2F2ZWRPYmplY3RzLCBpcDsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEluZGV4UGF0dGVybklkJChfY29udGV4dDUpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX2tpYmFuYV9zZXJ2aWNlcy5zYXZlZE9iamVjdHNDbGllbnQuZmluZCh7CiAgICAgICAgICAgIHR5cGU6ICdpbmRleC1wYXR0ZXJuJywKICAgICAgICAgICAgcGVyUGFnZTogMTAwMAogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBzYXZlZE9iamVjdFNlYXJjaCA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgaW5kZXhQYXR0ZXJuU2F2ZWRPYmplY3RzID0gc2F2ZWRPYmplY3RTZWFyY2guc2F2ZWRPYmplY3RzOwoKICAgICAgICAgIGlmICghaW5kZXhQYXR0ZXJuU2F2ZWRPYmplY3RzKSB7CiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gOTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgaXAgPSBpbmRleFBhdHRlcm5TYXZlZE9iamVjdHMuZmluZChmdW5jdGlvbiAoaSkgewogICAgICAgICAgICByZXR1cm4gaS5hdHRyaWJ1dGVzLnRpdGxlID09PSBuYW1lOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgaXAgIT09IHVuZGVmaW5lZCA/IGlwLmlkIDogdW5kZWZpbmVkKTsKCiAgICAgICAgY2FzZSA5OgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHVuZGVmaW5lZCk7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCnZhciBnZXRFeGlzdGluZ0luZGV4TmFtZXMgPSBmdW5jdGlvbiBnZXRFeGlzdGluZ0luZGV4TmFtZXMoKSB7CiAgdmFyIGluZGV4ZXM7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRFeGlzdGluZ0luZGV4TmFtZXMkKF9jb250ZXh0NikgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCgoMCwgX2h0dHBfc2VydmljZS5odHRwKSh7CiAgICAgICAgICAgIHVybDogIiIuY29uY2F0KF9raWJhbmFfc2VydmljZXMuYXBpQmFzZVBhdGgsICIvaW5kZXhfbWFuYWdlbWVudC9pbmRpY2VzIiksCiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgaW5kZXhlcyA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIGluZGV4ZXMgPyBpbmRleGVzLm1hcChmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICAgICAgdmFyIG5hbWUgPSBfcmVmMi5uYW1lOwogICAgICAgICAgICByZXR1cm4gbmFtZTsKICAgICAgICAgIH0pIDogW10pOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLmdldEV4aXN0aW5nSW5kZXhOYW1lcyA9IGdldEV4aXN0aW5nSW5kZXhOYW1lczsKCnZhciBnZXRFeGlzdGluZ0luZGV4UGF0dGVybk5hbWVzID0gZnVuY3Rpb24gZ2V0RXhpc3RpbmdJbmRleFBhdHRlcm5OYW1lcygpIHsKICB2YXIgaW5kZXhQYXR0ZXJuczsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEV4aXN0aW5nSW5kZXhQYXR0ZXJuTmFtZXMkKF9jb250ZXh0NykgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfa2liYW5hX3NlcnZpY2VzLnNhdmVkT2JqZWN0c0NsaWVudC5maW5kKHsKICAgICAgICAgICAgdHlwZTogJ2luZGV4LXBhdHRlcm4nLAogICAgICAgICAgICBmaWVsZHM6IFsnaWQnLCAndGl0bGUnLCAndHlwZScsICdmaWVsZHMnXSwKICAgICAgICAgICAgcGVyUGFnZTogMTAwMDAKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgICAgICAgIHZhciBzYXZlZE9iamVjdHMgPSBfcmVmMy5zYXZlZE9iamVjdHM7CiAgICAgICAgICAgIHJldHVybiBzYXZlZE9iamVjdHMubWFwKGZ1bmN0aW9uIChzYXZlZE9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiBzYXZlZE9iamVjdC5nZXQoJ3RpdGxlJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBpbmRleFBhdHRlcm5zID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgaW5kZXhQYXR0ZXJucyA/IGluZGV4UGF0dGVybnMubWFwKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICAgICAgICB2YXIgbmFtZSA9IF9yZWY0Lm5hbWU7CiAgICAgICAgICAgIHJldHVybiBuYW1lOwogICAgICAgICAgfSkgOiBbXSk7CgogICAgICAgIGNhc2UgNDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCmV4cG9ydHMuZ2V0RXhpc3RpbmdJbmRleFBhdHRlcm5OYW1lcyA9IGdldEV4aXN0aW5nSW5kZXhQYXR0ZXJuTmFtZXM7CgpmdW5jdGlvbiBjaGVja0luZGV4UGF0dGVyblZhbGlkKG5hbWUpIHsKICB2YXIgYnl0ZUxlbmd0aCA9IGVuY29kZVVSSShuYW1lKS5zcGxpdCgvJSg/OnVbMC05QS1GXXsyfSk/WzAtOUEtRl17Mn18Li8pLmxlbmd0aCAtIDE7CiAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoJ1tcXFxcLyo/Ijw+fFxccywjXSsnKTsKICB2YXIgaW5kZXhQYXR0ZXJuSW52YWxpZCA9IGJ5dGVMZW5ndGggPiAyNTUgfHwgLy8gbmFtZSBjYW4ndCBiZSBncmVhdGVyIHRoYW4gMjU1IGJ5dGVzCiAgbmFtZSAhPT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8IC8vIG5hbWUgc2hvdWxkIGJlIGxvd2VyY2FzZQogIG5hbWUgPT09ICcuJyB8fCBuYW1lID09PSAnLi4nIHx8IC8vIG5hbWUgY2FuJ3QgYmUgLiBvciAuLgogIG5hbWUubWF0Y2goL15bLV8rXS8pICE9PSBudWxsIHx8IC8vIG5hbWUgY2FuJ3Qgc3RhcnQgd2l0aCB0aGVzZSBjaGFycwogIG5hbWUubWF0Y2gocmVnKSAhPT0gbnVsbDsgLy8gbmFtZSBjYW4ndCBjb250YWluIHRoZXNlIGNoYXJzCgogIHJldHVybiAhaW5kZXhQYXR0ZXJuSW52YWxpZDsKfQ=="},null]}