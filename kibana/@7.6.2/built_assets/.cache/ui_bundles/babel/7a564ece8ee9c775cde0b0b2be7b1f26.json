{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/security/public/views/management/role_mappings/edit_role_mapping/components/role_selector/role_template_editor.js","dependencies":[{"path":"x-pack/legacy/plugins/security/public/views/management/role_mappings/edit_role_mapping/components/role_selector/role_template_editor.js","mtime":1585205047240},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlJvbGVUZW1wbGF0ZUVkaXRvciA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX3JvbGVfdGVtcGxhdGVfdHlwZSA9IHJlcXVpcmUoIi4uLy4uL3NlcnZpY2VzL3JvbGVfdGVtcGxhdGVfdHlwZSIpOwoKdmFyIF9yb2xlX3RlbXBsYXRlX3R5cGVfc2VsZWN0ID0gcmVxdWlyZSgiLi9yb2xlX3RlbXBsYXRlX3R5cGVfc2VsZWN0Iik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF9leHRlbmRzKCkgewogIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOwoKICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7CiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiB0YXJnZXQ7CiAgfTsKCiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgUm9sZVRlbXBsYXRlRWRpdG9yID0gZnVuY3Rpb24gUm9sZVRlbXBsYXRlRWRpdG9yKF9yZWYpIHsKICB2YXIgcm9sZVRlbXBsYXRlID0gX3JlZi5yb2xlVGVtcGxhdGUsCiAgICAgIF9vbkNoYW5nZSA9IF9yZWYub25DaGFuZ2UsCiAgICAgIG9uRGVsZXRlID0gX3JlZi5vbkRlbGV0ZSwKICAgICAgY2FuVXNlSW5saW5lU2NyaXB0cyA9IF9yZWYuY2FuVXNlSW5saW5lU2NyaXB0cywKICAgICAgY2FuVXNlU3RvcmVkU2NyaXB0cyA9IF9yZWYuY2FuVXNlU3RvcmVkU2NyaXB0czsKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgZGlyZWN0aW9uOiAiY29sdW1uIiwKICAgIGd1dHRlclNpemU6ICJzIgogIH0sIGdldFRlbXBsYXRlQ29uZmlndXJhdGlvbkZpZWxkcygpLCBnZXRFZGl0b3JGb3JUZW1wbGF0ZSgpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgIGdyb3c6IGZhbHNlCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgc2l6ZTogInMiCiAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIGp1c3RpZnlDb250ZW50OiAiZmxleEVuZCIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgIGdyb3c6IGZhbHNlCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkVtcHR5LCB7CiAgICBpY29uVHlwZTogInRyYXNoIiwKICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgIHNpemU6ICJ4cyIsCiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICByZXR1cm4gb25EZWxldGUocm9sZVRlbXBsYXRlKTsKICAgIH0sCiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZGVsZXRlUm9sZVRlbXBsYXRlQnV0dG9uIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGVNYXBwaW5nLmRlbGV0ZVJvbGVUZW1wbGF0ZUJ1dHRvbiIsCiAgICBkZWZhdWx0TWVzc2FnZTogIkRlbGV0ZSB0ZW1wbGF0ZSIKICB9KSkpKSkpOwoKICBmdW5jdGlvbiBnZXRUZW1wbGF0ZUZvcm1hdFN3aXRjaCgpIHsKICAgIHZhciByZXR1cm5zSnNvbkxhYmVsID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGVNYXBwaW5nLnJvbGVUZW1wbGF0ZVJldHVybnNKc29uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1JldHVybnMgSlNPTicKICAgIH0pOwoKICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICBsYWJlbDogcmV0dXJuc0pzb25MYWJlbAogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVN3aXRjaCwgewogICAgICBjaGVja2VkOiByb2xlVGVtcGxhdGUuZm9ybWF0ID09PSAnanNvbicsCiAgICAgIGxhYmVsOiByZXR1cm5zSnNvbkxhYmVsLAogICAgICBzaG93TGFiZWw6IGZhbHNlLAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgIF9vbkNoYW5nZShfb2JqZWN0U3ByZWFkKHt9LCByb2xlVGVtcGxhdGUsIHsKICAgICAgICAgIGZvcm1hdDogZS50YXJnZXQuY2hlY2tlZCA/ICdqc29uJyA6ICdzdHJpbmcnCiAgICAgICAgfSkpOwogICAgICB9CiAgICB9KSk7CiAgfQoKICBmdW5jdGlvbiBnZXRUZW1wbGF0ZUNvbmZpZ3VyYXRpb25GaWVsZHMoKSB7CiAgICB2YXIgdGVtcGxhdGVUeXBlQ29tYm9Cb3ggPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgIGxhYmVsOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZU1hcHBpbmcucm9sZVRlbXBsYXRlVHlwZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJUZW1wbGF0ZSB0eXBlIgogICAgICB9KQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcm9sZV90ZW1wbGF0ZV90eXBlX3NlbGVjdC5Sb2xlVGVtcGxhdGVUeXBlU2VsZWN0LCB7CiAgICAgIHJvbGVUZW1wbGF0ZTogcm9sZVRlbXBsYXRlLAogICAgICBjYW5Vc2VTdG9yZWRTY3JpcHRzOiBjYW5Vc2VTdG9yZWRTY3JpcHRzLAogICAgICBjYW5Vc2VJbmxpbmVTY3JpcHRzOiBjYW5Vc2VJbmxpbmVTY3JpcHRzLAogICAgICBvbkNoYW5nZTogX29uQ2hhbmdlCiAgICB9KSkpOwoKICAgIHZhciB0ZW1wbGF0ZUZvcm1hdFN3aXRjaCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgZ2V0VGVtcGxhdGVGb3JtYXRTd2l0Y2goKSk7CgogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICBqdXN0aWZ5Q29udGVudDogInNwYWNlQmV0d2VlbiIKICAgIH0sIHRlbXBsYXRlVHlwZUNvbWJvQm94LCB0ZW1wbGF0ZUZvcm1hdFN3aXRjaCkpOwogIH0KCiAgZnVuY3Rpb24gZ2V0RWRpdG9yRm9yVGVtcGxhdGUoKSB7CiAgICBpZiAoKDAsIF9yb2xlX3RlbXBsYXRlX3R5cGUuaXNJbmxpbmVSb2xlVGVtcGxhdGUpKHJvbGVUZW1wbGF0ZSkpIHsKICAgICAgdmFyIGV4dHJhUHJvcHMgPSB7fTsKCiAgICAgIGlmICghY2FuVXNlSW5saW5lU2NyaXB0cykgewogICAgICAgIGV4dHJhUHJvcHMuaXNJbnZhbGlkID0gdHJ1ZTsKICAgICAgICBleHRyYVByb3BzLmVycm9yID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIHsKICAgICAgICAgIHNpemU6ICJ4cyIsCiAgICAgICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAicm9sZU1hcHBpbmdJbmxpbmVTY3JpcHRzRGlzYWJsZWQiCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZU1hcHBpbmcucm9sZVRlbXBsYXRlSW5saW5lU2NyaXB0c0Rpc2FibGVkIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVGVtcGxhdGUgdXNlcyBpbmxpbmUgc2NyaXB0cywgd2hpY2ggYXJlIGRpc2FibGVkIGluIEVsYXN0aWNzZWFyY2guIgogICAgICAgIH0pKTsKICAgICAgfQoKICAgICAgdmFyIGV4YW1wbGUgPSAne3t1c2VybmFtZX19X3JvbGUnOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IDEsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIG1heFdpZHRoOiAnNDAwcHgnCiAgICAgICAgfQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgX2V4dGVuZHMoewogICAgICAgIGxhYmVsOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LmVkaXRSb2xlTWFwcGluZy5yb2xlVGVtcGxhdGVMYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRlbXBsYXRlIgogICAgICAgIH0pLAogICAgICAgIGhlbHBUZXh0OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LmVkaXRSb2xlTWFwcGluZy5yb2xlVGVtcGxhdGVIZWxwVGV4dCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIk11c3RhY2hlIHRlbXBsYXRlcyBhcmUgYWxsb3dlZC4gRXhhbXBsZToge2V4YW1wbGV9IiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBleGFtcGxlOiBleGFtcGxlCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSwgZXh0cmFQcm9wcyksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGaWVsZFRleHQsIHsKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAicm9sZVRlbXBsYXRlU291cmNlRWRpdG9yIiwKICAgICAgICB2YWx1ZTogcm9sZVRlbXBsYXRlLnRlbXBsYXRlLnNvdXJjZSwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgICAgX29uQ2hhbmdlKF9vYmplY3RTcHJlYWQoe30sIHJvbGVUZW1wbGF0ZSwgewogICAgICAgICAgICB0ZW1wbGF0ZTogewogICAgICAgICAgICAgIHNvdXJjZTogZS50YXJnZXQudmFsdWUKICAgICAgICAgICAgfQogICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgfSkpKSk7CiAgICB9CgogICAgaWYgKCgwLCBfcm9sZV90ZW1wbGF0ZV90eXBlLmlzU3RvcmVkUm9sZVRlbXBsYXRlKShyb2xlVGVtcGxhdGUpKSB7CiAgICAgIHZhciBfZXh0cmFQcm9wcyA9IHt9OwoKICAgICAgaWYgKCFjYW5Vc2VTdG9yZWRTY3JpcHRzKSB7CiAgICAgICAgX2V4dHJhUHJvcHMuaXNJbnZhbGlkID0gdHJ1ZTsKICAgICAgICBfZXh0cmFQcm9wcy5lcnJvciA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCB7CiAgICAgICAgICBzaXplOiAieHMiLAogICAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInJvbGVNYXBwaW5nU3RvcmVkU2NyaXB0c0Rpc2FibGVkIgogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGVNYXBwaW5nLnJvbGVUZW1wbGF0ZVN0b3JlZFNjcmlwdHNEaXNhYmxlZCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRlbXBsYXRlIHVzZXMgc3RvcmVkIHNjcmlwdHMsIHdoaWNoIGFyZSBkaXNhYmxlZCBpbiBFbGFzdGljc2VhcmNoLiIKICAgICAgICB9KSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogMSwKICAgICAgICBzdHlsZTogewogICAgICAgICAgbWF4V2lkdGg6ICc0MDBweCcKICAgICAgICB9CiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCBfZXh0ZW5kcyh7CiAgICAgICAgbGFiZWw6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGVNYXBwaW5nLnN0b3JlZFNjcmlwdExhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU3RvcmVkIHNjcmlwdCBJRCIKICAgICAgICB9KSwKICAgICAgICBoZWxwVGV4dDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZU1hcHBpbmcuc3RvcmVkU2NyaXB0SGVscFRleHQiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJJRCBvZiBhIHByZXZpb3VzbHkgc3RvcmVkIFBhaW5sZXNzIG9yIE11c3RhY2hlIHNjcmlwdC4iCiAgICAgICAgfSkKICAgICAgfSwgX2V4dHJhUHJvcHMpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmllbGRUZXh0LCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInJvbGVUZW1wbGF0ZVNjcmlwdElkRWRpdG9yIiwKICAgICAgICB2YWx1ZTogcm9sZVRlbXBsYXRlLnRlbXBsYXRlLmlkLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgICAgICBfb25DaGFuZ2UoX29iamVjdFNwcmVhZCh7fSwgcm9sZVRlbXBsYXRlLCB7CiAgICAgICAgICAgIHRlbXBsYXRlOiB7CiAgICAgICAgICAgICAgaWQ6IGUudGFyZ2V0LnZhbHVlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgIH0pKSkpOwogICAgfQoKICAgIGlmICgoMCwgX3JvbGVfdGVtcGxhdGVfdHlwZS5pc0ludmFsaWRSb2xlVGVtcGxhdGUpKHJvbGVUZW1wbGF0ZSkpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IDEsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInJvbGVNYXBwaW5nSW52YWxpZFJvbGVUZW1wbGF0ZSIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgICAgICBjb2xvcjogIndhcm5pbmciLAogICAgICAgIHRpdGxlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LmVkaXRSb2xlTWFwcGluZy5pbnZhbGlkUm9sZVRlbXBsYXRlVGl0bGUiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJJbnZhbGlkIHJvbGUgdGVtcGxhdGUiCiAgICAgICAgfSkKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGVNYXBwaW5nLmludmFsaWRSb2xlVGVtcGxhdGVNZXNzYWdlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlJvbGUgdGVtcGxhdGUgaXMgaW52YWxpZCwgYW5kIGNhbm5vdCBiZSBlZGl0ZWQgaGVyZS4gUGxlYXNlIGRlbGV0ZSBhbmQgcmVjcmVhdGUsIG9yIGZpeCB2aWEgdGhlIFJvbGUgTWFwcGluZyBBUEkuIgogICAgICB9KSkpOwogICAgfQoKICAgIHRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIGRldGVybWluZSByb2xlIHRlbXBsYXRlIHR5cGUiKTsKICB9Cn07CgpleHBvcnRzLlJvbGVUZW1wbGF0ZUVkaXRvciA9IFJvbGVUZW1wbGF0ZUVkaXRvcjs="},null]}