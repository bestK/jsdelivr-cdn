{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/reporting/public/components/reporting_panel_content.js","dependencies":[{"path":"x-pack/legacy/plugins/reporting/public/components/reporting_panel_content.js","mtime":1585205046920},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuUmVwb3J0aW5nUGFuZWxDb250ZW50ID0gdm9pZCAwOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfcmVhY3QgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX25vdGlmeSA9IHJlcXVpcmUoInVpL25vdGlmeSIpOwoKdmFyIF91cmwgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInVybCIpKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3BsdWdpbnMva2liYW5hX3JlYWN0L3B1YmxpYyIpOwoKdmFyIF9yZXBvcnRpbmdfY2xpZW50ID0gcmVxdWlyZSgiLi4vbGliL3JlcG9ydGluZ19jbGllbnQiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsKICBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7CiAgICByZXR1cm4gY2FsbDsKICB9CgogIHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOwp9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogIF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOwogIH07CiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsKfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7CiAgaWYgKHNlbGYgPT09IHZvaWQgMCkgewogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICB9CgogIHJldHVybiBzZWxmOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgUmVwb3J0aW5nUGFuZWxDb250ZW50VWkgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKFJlcG9ydGluZ1BhbmVsQ29udGVudFVpLCBfQ29tcG9uZW50KTsKCiAgX2NyZWF0ZUNsYXNzKFJlcG9ydGluZ1BhbmVsQ29udGVudFVpLCBudWxsLCBbewogICAga2V5OiAiZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHsKICAgICAgaWYgKG5leHRQcm9wcy5sYXlvdXRJZCAhPT0gcHJldlN0YXRlLmxheW91dElkKSB7CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHByZXZTdGF0ZSwgewogICAgICAgICAgYWJzb2x1dGVVcmw6IFJlcG9ydGluZ1BhbmVsQ29udGVudFVpLmdldEFic29sdXRlUmVwb3J0R2VuZXJhdGlvblVybChuZXh0UHJvcHMpCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwcmV2U3RhdGU7CiAgICB9CiAgfV0pOwoKICBmdW5jdGlvbiBSZXBvcnRpbmdQYW5lbENvbnRlbnRVaShwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXBvcnRpbmdQYW5lbENvbnRlbnRVaSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoUmVwb3J0aW5nUGFuZWxDb250ZW50VWkpLmNhbGwodGhpcywgcHJvcHMpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJtb3VudGVkIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJHZW5lcmF0ZVJlcG9ydEJ1dHRvbiIsIGZ1bmN0aW9uIChpc0Rpc2FibGVkKSB7CiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbiwgewogICAgICAgIGRpc2FibGVkOiBpc0Rpc2FibGVkLAogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICBmaWxsOiB0cnVlLAogICAgICAgIG9uQ2xpY2s6IF90aGlzLmNyZWF0ZVJlcG9ydGluZ0pvYiwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZ2VuZXJhdGVSZXBvcnRCdXR0b24iLAogICAgICAgIHNpemU6ICJzIgogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2sucmVwb3J0aW5nLnBhbmVsQ29udGVudC5nZW5lcmF0ZUJ1dHRvbkxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkdlbmVyYXRlIHtyZXBvcnRpbmdUeXBlfSIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICByZXBvcnRpbmdUeXBlOiBfdGhpcy5wcmV0dHlQcmludFJlcG9ydGluZ1R5cGUoKQogICAgICAgIH0KICAgICAgfSkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicHJldHR5UHJpbnRSZXBvcnRpbmdUeXBlIiwgZnVuY3Rpb24gKCkgewogICAgICBzd2l0Y2ggKF90aGlzLnByb3BzLnJlcG9ydFR5cGUpIHsKICAgICAgICBjYXNlICdwcmludGFibGVQZGYnOgogICAgICAgICAgcmV0dXJuICdQREYnOwoKICAgICAgICBjYXNlICdjc3YnOgogICAgICAgICAgcmV0dXJuICdDU1YnOwoKICAgICAgICBjYXNlICdwbmcnOgogICAgICAgICAgcmV0dXJuICdQTkcnOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIF90aGlzLnByb3BzLnJlcG9ydFR5cGU7CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm1hcmtBc1N0YWxlIiwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoIV90aGlzLm1vdW50ZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBpc1N0YWxlOiB0cnVlCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaXNOb3RTYXZlZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLnByb3BzLm9iamVjdElkID09PSB1bmRlZmluZWQgfHwgX3RoaXMucHJvcHMub2JqZWN0SWQgPT09ICcnOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic2V0QWJzb2x1dGVSZXBvcnRHZW5lcmF0aW9uVXJsIiwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoIV90aGlzLm1vdW50ZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBhYnNvbHV0ZVVybCA9IFJlcG9ydGluZ1BhbmVsQ29udGVudFVpLmdldEFic29sdXRlUmVwb3J0R2VuZXJhdGlvblVybChfdGhpcy5wcm9wcyk7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgYWJzb2x1dGVVcmw6IGFic29sdXRlVXJsCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY3JlYXRlUmVwb3J0aW5nSm9iIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgaW50bCA9IF90aGlzLnByb3BzLmludGw7CiAgICAgIHJldHVybiBfcmVwb3J0aW5nX2NsaWVudC5yZXBvcnRpbmdDbGllbnQuY3JlYXRlUmVwb3J0aW5nSm9iKF90aGlzLnByb3BzLnJlcG9ydFR5cGUsIF90aGlzLnByb3BzLmdldEpvYlBhcmFtcygpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGRTdWNjZXNzKHsKICAgICAgICAgIHRpdGxlOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogJ3hwYWNrLnJlcG9ydGluZy5wYW5lbENvbnRlbnQuc3VjY2Vzc2Z1bGx5UXVldWVkUmVwb3J0Tm90aWZpY2F0aW9uVGl0bGUnLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1F1ZXVlZCByZXBvcnQgZm9yIHtvYmplY3RUeXBlfScKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgb2JqZWN0VHlwZTogX3RoaXMucHJvcHMub2JqZWN0VHlwZQogICAgICAgICAgfSksCiAgICAgICAgICB0ZXh0OiAoMCwgX3B1YmxpYy50b01vdW50UG9pbnQpKF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAieHBhY2sucmVwb3J0aW5nLnBhbmVsQ29udGVudC5zdWNjZXNzZnVsbHlRdWV1ZWRSZXBvcnROb3RpZmljYXRpb25EZXNjcmlwdGlvbiIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVHJhY2sgaXRzIHByb2dyZXNzIGluIE1hbmFnZW1lbnQiCiAgICAgICAgICB9KSksCiAgICAgICAgICAnZGF0YS10ZXN0LXN1YmonOiAncXVldWVSZXBvcnRTdWNjZXNzJwogICAgICAgIH0pOwoKICAgICAgICBfdGhpcy5wcm9wcy5vbkNsb3NlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChrZmV0Y2hFcnJvcikgewogICAgICAgIGlmIChrZmV0Y2hFcnJvci5tZXNzYWdlID09PSAnbm90IGV4cG9ydGFibGUnKSB7CiAgICAgICAgICByZXR1cm4gX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkV2FybmluZyh7CiAgICAgICAgICAgIHRpdGxlOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICAgIGlkOiAneHBhY2sucmVwb3J0aW5nLnBhbmVsQ29udGVudC53aGF0Q2FuQmVFeHBvcnRlZFdhcm5pbmdUaXRsZScsCiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdPbmx5IHNhdmVkIHtvYmplY3RUeXBlfSBjYW4gYmUgZXhwb3J0ZWQnCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBvYmplY3RUeXBlOiBfdGhpcy5wcm9wcy5vYmplY3RUeXBlCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0ZXh0OiAoMCwgX3B1YmxpYy50b01vdW50UG9pbnQpKF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgaWQ6ICJ4cGFjay5yZXBvcnRpbmcucGFuZWxDb250ZW50LndoYXRDYW5CZUV4cG9ydGVkV2FybmluZ0Rlc2NyaXB0aW9uIiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlBsZWFzZSBzYXZlIHlvdXIgd29yayBmaXJzdCIKICAgICAgICAgICAgfSkpCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHZhciBkZWZhdWx0TWVzc2FnZSA9IGtmZXRjaEVycm9yLnJlcy5zdGF0dXMgPT09IDQwMyA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLnJlcG9ydGluZy5wYW5lbENvbnRlbnQubm9QZXJtaXNzaW9uVG9HZW5lcmF0ZVJlcG9ydERlc2NyaXB0aW9uIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiWW91IGRvbid0IGhhdmUgcGVybWlzc2lvbiB0byBnZW5lcmF0ZSB0aGlzIHJlcG9ydC4iCiAgICAgICAgfSkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5yZXBvcnRpbmcucGFuZWxDb250ZW50Lm5vdGlmaWNhdGlvbi5jYW50UmVhY2hTZXJ2ZXJEZXNjcmlwdGlvbiIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNhbid0IHJlYWNoIHRoZSBzZXJ2ZXIuIFBsZWFzZSB0cnkgYWdhaW4uIgogICAgICAgIH0pOwoKICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGREYW5nZXIoewogICAgICAgICAgdGl0bGU6IGludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiAneHBhY2sucmVwb3J0aW5nLnBhbmVsQ29udGVudC5ub3RpZmljYXRpb24ucmVwb3J0aW5nRXJyb3JUaXRsZScsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVwb3J0aW5nIGVycm9yJwogICAgICAgICAgfSksCiAgICAgICAgICB0ZXh0OiAoMCwgX3B1YmxpYy50b01vdW50UG9pbnQpKGtmZXRjaEVycm9yLm1lc3NhZ2UgfHwgZGVmYXVsdE1lc3NhZ2UpLAogICAgICAgICAgJ2RhdGEtdGVzdC1zdWJqJzogJ3F1ZXVlUmVwb3J0RXJyb3InCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CgogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGlzU3RhbGU6IGZhbHNlLAogICAgICBhYnNvbHV0ZVVybDogJycsCiAgICAgIGxheW91dElkOiAnJwogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhSZXBvcnRpbmdQYW5lbENvbnRlbnRVaSwgW3sKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLm1hcmtBc1N0YWxlKTsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuc2V0QWJzb2x1dGVSZXBvcnRHZW5lcmF0aW9uVXJsKTsKICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMubWFya0FzU3RhbGUsIGZhbHNlKTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuc2V0QWJzb2x1dGVSZXBvcnRHZW5lcmF0aW9uVXJsKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgaWYgKHRoaXMuaXNOb3RTYXZlZCgpIHx8IHRoaXMucHJvcHMuaXNEaXJ0eSB8fCB0aGlzLnN0YXRlLmlzU3RhbGUpIHsKICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJrYm5TaGFyZUNvbnRleHRNZW51X19maW5hbFBhbmVsIiwKICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJzaGFyZVJlcG9ydGluZ0Zvcm0iCiAgICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgICAgICBoZWxwVGV4dDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJ4cGFjay5yZXBvcnRpbmcucGFuZWxDb250ZW50LnNhdmVXb3JrRGVzY3JpcHRpb24iLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlBsZWFzZSBzYXZlIHlvdXIgd29yayBiZWZvcmUgZ2VuZXJhdGluZyBhIHJlcG9ydC4iCiAgICAgICAgICB9KQogICAgICAgIH0sIHRoaXMucmVuZGVyR2VuZXJhdGVSZXBvcnRCdXR0b24odHJ1ZSkpKTsKICAgICAgfQoKICAgICAgdmFyIHJlcG9ydE1zZyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5yZXBvcnRpbmcucGFuZWxDb250ZW50LmdlbmVyYXRpb25UaW1lRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAie3JlcG9ydGluZ1R5cGV9cyBjYW4gdGFrZSBhIG1pbnV0ZSBvciB0d28gdG8gZ2VuZXJhdGUgYmFzZWQgdXBvbiB0aGUgc2l6ZSBvZiB5b3VyIHtvYmplY3RUeXBlfS4iLAogICAgICAgIGRlc2NyaXB0aW9uOiAiSGVyZSAncmVwb3J0aW5nVHlwZScgY2FuIGJlICdQREYnIG9yICdDU1YnIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIHJlcG9ydGluZ1R5cGU6IHRoaXMucHJldHR5UHJpbnRSZXBvcnRpbmdUeXBlKCksCiAgICAgICAgICBvYmplY3RUeXBlOiB0aGlzLnByb3BzLm9iamVjdFR5cGUKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybSwgewogICAgICAgIGNsYXNzTmFtZTogImtiblNoYXJlQ29udGV4dE1lbnVfX2ZpbmFsUGFuZWwiLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJzaGFyZVJlcG9ydGluZ0Zvcm0iCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dCwgewogICAgICAgIHNpemU6ICJzIgogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIHJlcG9ydE1zZykpLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICAgIHNpemU6ICJzIgogICAgICB9KSwgdGhpcy5wcm9wcy5vcHRpb25zLCB0aGlzLnJlbmRlckdlbmVyYXRlUmVwb3J0QnV0dG9uKGZhbHNlKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgICAgICBzaXplOiAicyIKICAgICAgfSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dCwgewogICAgICAgIHNpemU6ICJzIgogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5yZXBvcnRpbmcucGFuZWxDb250ZW50Lmhvd1RvQ2FsbEdlbmVyYXRpb25EZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBbHRlcm5hdGl2ZWx5LCBjb3B5IHRoaXMgUE9TVCBVUkwgdG8gY2FsbCBnZW5lcmF0aW9uIGZyb20gb3V0c2lkZSBLaWJhbmEgb3IgZnJvbSBXYXRjaGVyLiIKICAgICAgfSkpKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgICAgICBzaXplOiAicyIKICAgICAgfSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29weSwgewogICAgICAgIHRleHRUb0NvcHk6IHRoaXMuc3RhdGUuYWJzb2x1dGVVcmwsCiAgICAgICAgYW5jaG9yQ2xhc3NOYW1lOiAiZXVpLWRpc3BsYXlCbG9jayIKICAgICAgfSwgZnVuY3Rpb24gKGNvcHkpIHsKICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICAgIG9uQ2xpY2s6IGNvcHksCiAgICAgICAgICBzaXplOiAicyIKICAgICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5yZXBvcnRpbmcucGFuZWxDb250ZW50LmNvcHlVcmxCdXR0b25MYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNvcHkgUE9TVCBVUkwiCiAgICAgICAgfSkpOwogICAgICB9KSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUmVwb3J0aW5nUGFuZWxDb250ZW50VWk7Cn0oX3JlYWN0Mi5Db21wb25lbnQpOwoKX2RlZmluZVByb3BlcnR5KFJlcG9ydGluZ1BhbmVsQ29udGVudFVpLCAiZ2V0QWJzb2x1dGVSZXBvcnRHZW5lcmF0aW9uVXJsIiwgZnVuY3Rpb24gKHByb3BzKSB7CiAgdmFyIHJlbGF0aXZlUGF0aCA9IF9yZXBvcnRpbmdfY2xpZW50LnJlcG9ydGluZ0NsaWVudC5nZXRSZXBvcnRpbmdKb2JQYXRoKHByb3BzLnJlcG9ydFR5cGUsIHByb3BzLmdldEpvYlBhcmFtcygpKTsKCiAgcmV0dXJuIF91cmwuZGVmYXVsdC5yZXNvbHZlKHdpbmRvdy5sb2NhdGlvbi5ocmVmLCByZWxhdGl2ZVBhdGgpOwp9KTsKCnZhciBSZXBvcnRpbmdQYW5lbENvbnRlbnQgPSAoMCwgX3JlYWN0LmluamVjdEkxOG4pKFJlcG9ydGluZ1BhbmVsQ29udGVudFVpKTsKZXhwb3J0cy5SZXBvcnRpbmdQYW5lbENvbnRlbnQgPSBSZXBvcnRpbmdQYW5lbENvbnRlbnQ7"},null]}