{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/vis_type_tagcloud/public/components/tag_cloud.js","dependencies":[{"path":"src/legacy/core_plugins/vis_type_tagcloud/public/components/tag_cloud.js","mtime":1585205040307},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRhZ0Nsb3VkID0gdm9pZCAwOwoKdmFyIF9kID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJkMyIpKTsKCnZhciBfZDNDbG91ZCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiZDMtY2xvdWQiKSk7Cgp2YXIgX3NlZWRfY29sb3JzID0gcmVxdWlyZSgidWkvdmlzL2NvbXBvbmVudHMvY29sb3Ivc2VlZF9jb2xvcnMiKTsKCnZhciBfZXZlbnRzID0gcmVxdWlyZSgiZXZlbnRzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKdmFyIE9SSUVOVEFUSU9OUyA9IHsKICBzaW5nbGU6IGZ1bmN0aW9uIHNpbmdsZSgpIHsKICAgIHJldHVybiAwOwogIH0sCiAgJ3JpZ2h0IGFuZ2xlZCc6IGZ1bmN0aW9uIHJpZ2h0QW5nbGVkKHRhZykgewogICAgcmV0dXJuIGhhc2hXaXRoaW5SYW5nZSh0YWcudGV4dCwgMikgKiA5MDsKICB9LAogIG11bHRpcGxlOiBmdW5jdGlvbiBtdWx0aXBsZSh0YWcpIHsKICAgIHJldHVybiBoYXNoV2l0aGluUmFuZ2UodGFnLnRleHQsIDEyKSAqIDE1IC0gOTA7IC8vZmFuIG91dCAxMiAqIDE1IGRlZ3JlZXMgb3ZlciB0b3AtcmlnaHQgYW5kIGJvdHRvbS1yaWdodCBxdWFkcmFudCAoPS05MCBkZWcgb2Zmc2V0KQogIH0KfTsKdmFyIEQzX1NDQUxJTkdfRlVOQ1RJT05TID0gewogIGxpbmVhcjogZnVuY3Rpb24gbGluZWFyKCkgewogICAgcmV0dXJuIF9kLmRlZmF1bHQuc2NhbGUubGluZWFyKCk7CiAgfSwKICBsb2c6IGZ1bmN0aW9uIGxvZygpIHsKICAgIHJldHVybiBfZC5kZWZhdWx0LnNjYWxlLmxvZygpOwogIH0sCiAgJ3NxdWFyZSByb290JzogZnVuY3Rpb24gc3F1YXJlUm9vdCgpIHsKICAgIHJldHVybiBfZC5kZWZhdWx0LnNjYWxlLnNxcnQoKTsKICB9Cn07Cgp2YXIgVGFnQ2xvdWQgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfRXZlbnRFbWl0dGVyKSB7CiAgX2luaGVyaXRzKFRhZ0Nsb3VkLCBfRXZlbnRFbWl0dGVyKTsKCiAgZnVuY3Rpb24gVGFnQ2xvdWQoZG9tTm9kZSkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUYWdDbG91ZCk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVGFnQ2xvdWQpLmNhbGwodGhpcykpOyAvL0RPTQoKICAgIF90aGlzLl9lbGVtZW50ID0gZG9tTm9kZTsKICAgIF90aGlzLl9kM1N2Z0NvbnRhaW5lciA9IF9kLmRlZmF1bHQuc2VsZWN0KF90aGlzLl9lbGVtZW50KS5hcHBlbmQoJ3N2ZycpOwogICAgX3RoaXMuX3N2Z0dyb3VwID0gX3RoaXMuX2QzU3ZnQ29udGFpbmVyLmFwcGVuZCgnZycpOwogICAgX3RoaXMuX3NpemUgPSBbMSwgMV07CgogICAgX3RoaXMucmVzaXplKCk7IC8vU0VUVElORyAobm9uLWNvbmZpZ3VyYWJsZSkKCgogICAgX3RoaXMuX2ZvbnRGYW1pbHkgPSAnT3BlbiBTYW5zLCBzYW5zLXNlcmlmJzsKICAgIF90aGlzLl9mb250U3R5bGUgPSAnbm9ybWFsJzsKICAgIF90aGlzLl9mb250V2VpZ2h0ID0gJ25vcm1hbCc7CiAgICBfdGhpcy5fc3BpcmFsID0gJ2FyY2hpbWVkZWFuJzsgLy9sYXlvdXQgc2hhcGUKCiAgICBfdGhpcy5fdGltZUludGVydmFsID0gMTAwMDsgLy90aW1lIGFsbG93ZWQgZm9yIGxheW91dCBhbGdvcml0aG0KCiAgICBfdGhpcy5fcGFkZGluZyA9IDU7IC8vT1BUSU9OUwoKICAgIF90aGlzLl9vcmllbnRhdGlvbiA9ICdzaW5nbGUnOwogICAgX3RoaXMuX21pbkZvbnRTaXplID0gMTA7CiAgICBfdGhpcy5fbWF4Rm9udFNpemUgPSAzNjsKICAgIF90aGlzLl90ZXh0U2NhbGUgPSAnbGluZWFyJzsKICAgIF90aGlzLl9vcHRpb25zQXNTdHJpbmcgPSBudWxsOyAvL0RBVEEKCiAgICBfdGhpcy5fd29yZHMgPSBudWxsOyAvL1VUSUwKCiAgICBfdGhpcy5fc2V0VGltZW91dElkID0gbnVsbDsKICAgIF90aGlzLl9wZW5kaW5nSm9iID0gbnVsbDsKICAgIF90aGlzLl9sYXlvdXRJc1VwZGF0aW5nID0gbnVsbDsKICAgIF90aGlzLl9hbGxJblZpZXdCb3ggPSBmYWxzZTsKICAgIF90aGlzLl9ET01pc1VwZGF0aW5nID0gZmFsc2U7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVGFnQ2xvdWQsIFt7CiAgICBrZXk6ICJzZXRPcHRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHsKICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpID09PSB0aGlzLl9vcHRpb25zQXNTdHJpbmcpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuX29wdGlvbnNBc1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpOwogICAgICB0aGlzLl9vcmllbnRhdGlvbiA9IG9wdGlvbnMub3JpZW50YXRpb247CiAgICAgIHRoaXMuX21pbkZvbnRTaXplID0gTWF0aC5taW4ob3B0aW9ucy5taW5Gb250U2l6ZSwgb3B0aW9ucy5tYXhGb250U2l6ZSk7CiAgICAgIHRoaXMuX21heEZvbnRTaXplID0gTWF0aC5tYXgob3B0aW9ucy5taW5Gb250U2l6ZSwgb3B0aW9ucy5tYXhGb250U2l6ZSk7CiAgICAgIHRoaXMuX3RleHRTY2FsZSA9IG9wdGlvbnMuc2NhbGU7CgogICAgICB0aGlzLl9pbnZhbGlkYXRlKGZhbHNlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXNpemUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2l6ZSgpIHsKICAgICAgdmFyIG5ld1dpZHRoID0gdGhpcy5fZWxlbWVudC5vZmZzZXRXaWR0aDsKICAgICAgdmFyIG5ld0hlaWdodCA9IHRoaXMuX2VsZW1lbnQub2Zmc2V0SGVpZ2h0OwoKICAgICAgaWYgKG5ld1dpZHRoID09PSB0aGlzLl9zaXplWzBdICYmIG5ld0hlaWdodCA9PT0gdGhpcy5fc2l6ZVsxXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHdhc0luc2lkZSA9IHRoaXMuX3NpemVbMF0gPj0gdGhpcy5fY2xvdWRXaWR0aCAmJiB0aGlzLl9zaXplWzFdID49IHRoaXMuX2Nsb3VkSGVpZ2h0OwogICAgICB2YXIgd2lsbEJlSW5zaWRlID0gdGhpcy5fY2xvdWRXaWR0aCA8PSBuZXdXaWR0aCAmJiB0aGlzLl9jbG91ZEhlaWdodCA8PSBuZXdIZWlnaHQ7CiAgICAgIHRoaXMuX3NpemVbMF0gPSBuZXdXaWR0aDsKICAgICAgdGhpcy5fc2l6ZVsxXSA9IG5ld0hlaWdodDsKCiAgICAgIGlmICh3YXNJbnNpZGUgJiYgd2lsbEJlSW5zaWRlICYmIHRoaXMuX2FsbEluVmlld0JveCkgewogICAgICAgIHRoaXMuX2ludmFsaWRhdGUodHJ1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5faW52YWxpZGF0ZShmYWxzZSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXREYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREYXRhKGRhdGEpIHsKICAgICAgdGhpcy5fd29yZHMgPSBkYXRhOwoKICAgICAgdGhpcy5faW52YWxpZGF0ZShmYWxzZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVzdHJveSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3NldFRpbWVvdXRJZCk7CiAgICAgIHRoaXMuX2VsZW1lbnQuaW5uZXJIVE1MID0gJyc7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U3RhdHVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTdGF0dXMoKSB7CiAgICAgIHJldHVybiB0aGlzLl9hbGxJblZpZXdCb3ggPyBUYWdDbG91ZC5TVEFUVVMuQ09NUExFVEUgOiBUYWdDbG91ZC5TVEFUVVMuSU5DT01QTEVURTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfdXBkYXRlQ29udGFpbmVyU2l6ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZUNvbnRhaW5lclNpemUoKSB7CiAgICAgIHRoaXMuX2QzU3ZnQ29udGFpbmVyLmF0dHIoJ3dpZHRoJywgdGhpcy5fc2l6ZVswXSk7CgogICAgICB0aGlzLl9kM1N2Z0NvbnRhaW5lci5hdHRyKCdoZWlnaHQnLCB0aGlzLl9zaXplWzFdKTsKCiAgICAgIHRoaXMuX3N2Z0dyb3VwLmF0dHIoJ3dpZHRoJywgdGhpcy5fc2l6ZVswXSk7CgogICAgICB0aGlzLl9zdmdHcm91cC5hdHRyKCdoZWlnaHQnLCB0aGlzLl9zaXplWzFdKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaXNKb2JSdW5uaW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNKb2JSdW5uaW5nKCkgewogICAgICByZXR1cm4gdGhpcy5fc2V0VGltZW91dElkIHx8IHRoaXMuX2xheW91dElzVXBkYXRpbmcgfHwgdGhpcy5fRE9NaXNVcGRhdGluZzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfcHJvY2Vzc1BlbmRpbmdKb2IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9wcm9jZXNzUGVuZGluZ0pvYigpIHsKICAgICAgdmFyIGpvYiwgY2xvdWRCQm94OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9wcm9jZXNzUGVuZGluZ0pvYiQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdKb2IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzSm9iUnVubmluZygpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgdGhpcy5fY29tcGxldGVkSm9iID0gbnVsbDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuX3BpY2tQZW5kaW5nSm9iKCkpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGpvYiA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmICgham9iLndvcmRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoIWpvYi5yZWZyZXNoTGF5b3V0KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuX3VwZGF0ZUxheW91dChqb2IpKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fdXBkYXRlRE9NKGpvYikpOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjbG91ZEJCb3ggPSB0aGlzLl9zdmdHcm91cFswXVswXS5nZXRCQm94KCk7CiAgICAgICAgICAgICAgdGhpcy5fY2xvdWRXaWR0aCA9IGNsb3VkQkJveC53aWR0aDsKICAgICAgICAgICAgICB0aGlzLl9jbG91ZEhlaWdodCA9IGNsb3VkQkJveC5oZWlnaHQ7CiAgICAgICAgICAgICAgdGhpcy5fYWxsSW5WaWV3Qm94ID0gY2xvdWRCQm94LnggPj0gMCAmJiBjbG91ZEJCb3gueSA+PSAwICYmIGNsb3VkQkJveC54ICsgY2xvdWRCQm94LndpZHRoIDw9IHRoaXMuX2VsZW1lbnQub2Zmc2V0V2lkdGggJiYgY2xvdWRCQm94LnkgKyBjbG91ZEJCb3guaGVpZ2h0IDw9IHRoaXMuX2VsZW1lbnQub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgdGhpcy5fZW1wdHlET00oam9iKTsKCiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdKb2IpIHsKICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NQZW5kaW5nSm9iKCk7IC8vcGljayB1cCBuZXh0IGpvYgoKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5fY29tcGxldGVkSm9iID0gam9iOwogICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW5kZXJDb21wbGV0ZScpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9waWNrUGVuZGluZ0pvYiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3BpY2tQZW5kaW5nSm9iKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX3BpY2tQZW5kaW5nSm9iJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgX3RoaXMyLl9zZXRUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBqb2I7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgam9iID0gX3RoaXMyLl9wZW5kaW5nSm9iOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5fcGVuZGluZ0pvYiA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLl9zZXRUaW1lb3V0SWQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoam9iKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDMuc2VudCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZW1wdHlET00iLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9lbXB0eURPTSgpIHsKICAgICAgdGhpcy5fc3ZnR3JvdXAuc2VsZWN0QWxsKCd0ZXh0JykucmVtb3ZlKCk7CgogICAgICB0aGlzLl9jbG91ZFdpZHRoID0gMDsKICAgICAgdGhpcy5fY2xvdWRIZWlnaHQgPSAwOwogICAgICB0aGlzLl9hbGxJblZpZXdCb3ggPSB0cnVlOwogICAgICB0aGlzLl9ET01pc1VwZGF0aW5nID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3VwZGF0ZURPTSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZURPTShqb2IpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgY2FuU2tpcERvbVVwZGF0ZSwgYWZmaW5lVHJhbnNmb3JtLCBzdmdUZXh0Tm9kZXMsIHN0YWdlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF91cGRhdGVET00kKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNhblNraXBEb21VcGRhdGUgPSB0aGlzLl9wZW5kaW5nSm9iIHx8IHRoaXMuX3NldFRpbWVvdXRJZDsKCiAgICAgICAgICAgICAgaWYgKCFjYW5Ta2lwRG9tVXBkYXRlKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRoaXMuX0RPTWlzVXBkYXRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgdGhpcy5fRE9NaXNVcGRhdGluZyA9IHRydWU7CiAgICAgICAgICAgICAgYWZmaW5lVHJhbnNmb3JtID0gcG9zaXRpb25Xb3JkLmJpbmQobnVsbCwgdGhpcy5fZWxlbWVudC5vZmZzZXRXaWR0aCAvIDIsIHRoaXMuX2VsZW1lbnQub2Zmc2V0SGVpZ2h0IC8gMik7CiAgICAgICAgICAgICAgc3ZnVGV4dE5vZGVzID0gdGhpcy5fc3ZnR3JvdXAuc2VsZWN0QWxsKCd0ZXh0Jyk7CiAgICAgICAgICAgICAgc3RhZ2UgPSBzdmdUZXh0Tm9kZXMuZGF0YShqb2Iud29yZHMsIGdldFRleHQpOwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgdmFyIGVudGVyU2VsZWN0aW9uID0gc3RhZ2UuZW50ZXIoKTsKICAgICAgICAgICAgICAgIHZhciBlbnRlcmluZ1RhZ3MgPSBlbnRlclNlbGVjdGlvbi5hcHBlbmQoJ3RleHQnKTsKICAgICAgICAgICAgICAgIGVudGVyaW5nVGFncy5zdHlsZSgnZm9udC1zaXplJywgZ2V0U2l6ZUluUGl4ZWxzKTsKICAgICAgICAgICAgICAgIGVudGVyaW5nVGFncy5zdHlsZSgnZm9udC1zdHlsZScsIF90aGlzMy5fZm9udFN0eWxlKTsKICAgICAgICAgICAgICAgIGVudGVyaW5nVGFncy5zdHlsZSgnZm9udC13ZWlnaHQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuX2ZvbnRXZWlnaHQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGVudGVyaW5nVGFncy5zdHlsZSgnZm9udC1mYW1pbHknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuX2ZvbnRGYW1pbHk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGVudGVyaW5nVGFncy5zdHlsZSgnZmlsbCcsIGdldEZpbGwpOwogICAgICAgICAgICAgICAgZW50ZXJpbmdUYWdzLmF0dHIoJ3RleHQtYW5jaG9yJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gJ21pZGRsZSc7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGVudGVyaW5nVGFncy5hdHRyKCd0cmFuc2Zvcm0nLCBhZmZpbmVUcmFuc2Zvcm0pOwogICAgICAgICAgICAgICAgZW50ZXJpbmdUYWdzLmF0dHIoJ2RhdGEtdGVzdC1zdWJqJywgZ2V0RGlzcGxheVRleHQpOwogICAgICAgICAgICAgICAgZW50ZXJpbmdUYWdzLnRleHQoZ2V0RGlzcGxheVRleHQpOwogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSBfdGhpczM7CiAgICAgICAgICAgICAgICBlbnRlcmluZ1RhZ3Mub24oewogICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLmVtaXQoJ3NlbGVjdCcsIGV2ZW50KTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgbW91c2VvdmVyOiBmdW5jdGlvbiBtb3VzZW92ZXIoKSB7CiAgICAgICAgICAgICAgICAgICAgX2QuZGVmYXVsdC5zZWxlY3QodGhpcykuc3R5bGUoJ2N1cnNvcicsICdwb2ludGVyJyk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG1vdXNlb3V0OiBmdW5jdGlvbiBtb3VzZW91dCgpIHsKICAgICAgICAgICAgICAgICAgICBfZC5kZWZhdWx0LnNlbGVjdCh0aGlzKS5zdHlsZSgnY3Vyc29yJywgJ2RlZmF1bHQnKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2YXIgbW92aW5nVGFncyA9IHN0YWdlLnRyYW5zaXRpb24oKTsKICAgICAgICAgICAgICAgIG1vdmluZ1RhZ3MuZHVyYXRpb24oNjAwKTsKICAgICAgICAgICAgICAgIG1vdmluZ1RhZ3Muc3R5bGUoJ2ZvbnQtc2l6ZScsIGdldFNpemVJblBpeGVscyk7CiAgICAgICAgICAgICAgICBtb3ZpbmdUYWdzLnN0eWxlKCdmb250LXN0eWxlJywgX3RoaXMzLl9mb250U3R5bGUpOwogICAgICAgICAgICAgICAgbW92aW5nVGFncy5zdHlsZSgnZm9udC13ZWlnaHQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuX2ZvbnRXZWlnaHQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1vdmluZ1RhZ3Muc3R5bGUoJ2ZvbnQtZmFtaWx5JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLl9mb250RmFtaWx5OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtb3ZpbmdUYWdzLmF0dHIoJ3RyYW5zZm9ybScsIGFmZmluZVRyYW5zZm9ybSk7CiAgICAgICAgICAgICAgICB2YXIgZXhpdGluZ1RhZ3MgPSBzdGFnZS5leGl0KCk7CiAgICAgICAgICAgICAgICB2YXIgZXhpdFRyYW5zaXRpb24gPSBleGl0aW5nVGFncy50cmFuc2l0aW9uKCk7CiAgICAgICAgICAgICAgICBleGl0VHJhbnNpdGlvbi5kdXJhdGlvbigyMDApOwogICAgICAgICAgICAgICAgZXhpdGluZ1RhZ3Muc3R5bGUoJ2ZpbGwtb3BhY2l0eScsIDFlLTYpOwogICAgICAgICAgICAgICAgZXhpdGluZ1RhZ3MuYXR0cignZm9udC1zaXplJywgMSk7CiAgICAgICAgICAgICAgICBleGl0aW5nVGFncy5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIHZhciBleGl0cyA9IDA7CiAgICAgICAgICAgICAgICB2YXIgbW92ZXMgPSAwOwoKICAgICAgICAgICAgICAgIHZhciByZXNvbHZlV2hlbkRvbmUgPSBmdW5jdGlvbiByZXNvbHZlV2hlbkRvbmUoKSB7CiAgICAgICAgICAgICAgICAgIGlmIChleGl0cyA9PT0gMCAmJiBtb3ZlcyA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzMy5fRE9NaXNVcGRhdGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZXhpdFRyYW5zaXRpb24uZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBleGl0cysrOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBleGl0VHJhbnNpdGlvbi5lYWNoKCdlbmQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGV4aXRzLS07CiAgICAgICAgICAgICAgICAgIHJlc29sdmVXaGVuRG9uZSgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtb3ZpbmdUYWdzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gbW92ZXMrKzsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbW92aW5nVGFncy5lYWNoKCdlbmQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIG1vdmVzLS07CiAgICAgICAgICAgICAgICAgIHJlc29sdmVXaGVuRG9uZSgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9tYWtlVGV4dFNpemVNYXBwZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9tYWtlVGV4dFNpemVNYXBwZXIoKSB7CiAgICAgIHZhciBtYXBTaXplVG9Gb250U2l6ZSA9IEQzX1NDQUxJTkdfRlVOQ1RJT05TW3RoaXMuX3RleHRTY2FsZV0oKTsKCiAgICAgIHZhciByYW5nZSA9IHRoaXMuX3dvcmRzLmxlbmd0aCA9PT0gMSA/IFt0aGlzLl9tYXhGb250U2l6ZSwgdGhpcy5fbWF4Rm9udFNpemVdIDogW3RoaXMuX21pbkZvbnRTaXplLCB0aGlzLl9tYXhGb250U2l6ZV07CiAgICAgIG1hcFNpemVUb0ZvbnRTaXplLnJhbmdlKHJhbmdlKTsKCiAgICAgIGlmICh0aGlzLl93b3JkcykgewogICAgICAgIG1hcFNpemVUb0ZvbnRTaXplLmRvbWFpbihfZC5kZWZhdWx0LmV4dGVudCh0aGlzLl93b3JkcywgZ2V0VmFsdWUpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1hcFNpemVUb0ZvbnRTaXplOwogICAgfQogIH0sIHsKICAgIGtleTogIl9tYWtlTmV3Sm9iIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbWFrZU5ld0pvYigpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICByZWZyZXNoTGF5b3V0OiB0cnVlLAogICAgICAgIHNpemU6IHRoaXMuX3NpemUuc2xpY2UoKSwKICAgICAgICB3b3JkczogdGhpcy5fd29yZHMKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbWFrZUpvYlByZXNlcnZpbmdMYXlvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9tYWtlSm9iUHJlc2VydmluZ0xheW91dCgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICByZWZyZXNoTGF5b3V0OiBmYWxzZSwKICAgICAgICBzaXplOiB0aGlzLl9zaXplLnNsaWNlKCksCiAgICAgICAgd29yZHM6IHRoaXMuX2NvbXBsZXRlZEpvYi53b3Jkcy5tYXAoZnVuY3Rpb24gKHRhZykgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgeDogdGFnLngsCiAgICAgICAgICAgIHk6IHRhZy55LAogICAgICAgICAgICByb3RhdGU6IHRhZy5yb3RhdGUsCiAgICAgICAgICAgIHNpemU6IHRhZy5zaXplLAogICAgICAgICAgICByYXdUZXh0OiB0YWcucmF3VGV4dCB8fCB0YWcudGV4dCwKICAgICAgICAgICAgZGlzcGxheVRleHQ6IHRhZy5kaXNwbGF5VGV4dCwKICAgICAgICAgICAgbWV0YTogdGFnLm1ldGEKICAgICAgICAgIH07CiAgICAgICAgfSkKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaW52YWxpZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ludmFsaWRhdGUoa2VlcExheW91dCkgewogICAgICBpZiAoIXRoaXMuX3dvcmRzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLl91cGRhdGVDb250YWluZXJTaXplKCk7CgogICAgICB2YXIgY2FuUmV1c2VMYXlvdXQgPSBrZWVwTGF5b3V0ICYmICF0aGlzLl9pc0pvYlJ1bm5pbmcoKSAmJiB0aGlzLl9jb21wbGV0ZWRKb2I7CiAgICAgIHRoaXMuX3BlbmRpbmdKb2IgPSBjYW5SZXVzZUxheW91dCA/IHRoaXMuX21ha2VKb2JQcmVzZXJ2aW5nTGF5b3V0KCkgOiB0aGlzLl9tYWtlTmV3Sm9iKCk7CgogICAgICB0aGlzLl9wcm9jZXNzUGVuZGluZ0pvYigpOwogICAgfQogIH0sIHsKICAgIGtleTogIl91cGRhdGVMYXlvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVMYXlvdXQoam9iKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIG1hcFNpemVUb0ZvbnRTaXplLCB0YWdDbG91ZExheW91dEdlbmVyYXRvcjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfdXBkYXRlTGF5b3V0JChfY29udGV4dDUpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIShqb2Iuc2l6ZVswXSA8PSAwIHx8IGpvYi5zaXplWzFdIDw9IDApKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBtYXBTaXplVG9Gb250U2l6ZSA9IHRoaXMuX21ha2VUZXh0U2l6ZU1hcHBlcigpOwogICAgICAgICAgICAgIHRhZ0Nsb3VkTGF5b3V0R2VuZXJhdG9yID0gKDAsIF9kM0Nsb3VkLmRlZmF1bHQpKCk7CiAgICAgICAgICAgICAgdGFnQ2xvdWRMYXlvdXRHZW5lcmF0b3Iuc2l6ZShqb2Iuc2l6ZSk7CiAgICAgICAgICAgICAgdGFnQ2xvdWRMYXlvdXRHZW5lcmF0b3IucGFkZGluZyh0aGlzLl9wYWRkaW5nKTsKICAgICAgICAgICAgICB0YWdDbG91ZExheW91dEdlbmVyYXRvci5yb3RhdGUoT1JJRU5UQVRJT05TW3RoaXMuX29yaWVudGF0aW9uXSk7CiAgICAgICAgICAgICAgdGFnQ2xvdWRMYXlvdXRHZW5lcmF0b3IuZm9udCh0aGlzLl9mb250RmFtaWx5KTsKICAgICAgICAgICAgICB0YWdDbG91ZExheW91dEdlbmVyYXRvci5mb250U3R5bGUodGhpcy5fZm9udFN0eWxlKTsKICAgICAgICAgICAgICB0YWdDbG91ZExheW91dEdlbmVyYXRvci5mb250V2VpZ2h0KHRoaXMuX2ZvbnRXZWlnaHQpOwogICAgICAgICAgICAgIHRhZ0Nsb3VkTGF5b3V0R2VuZXJhdG9yLmZvbnRTaXplKGZ1bmN0aW9uICh0YWcpIHsKICAgICAgICAgICAgICAgIHJldHVybiBtYXBTaXplVG9Gb250U2l6ZSh0YWcudmFsdWUpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRhZ0Nsb3VkTGF5b3V0R2VuZXJhdG9yLnJhbmRvbShzZWVkKTsKICAgICAgICAgICAgICB0YWdDbG91ZExheW91dEdlbmVyYXRvci5zcGlyYWwodGhpcy5fc3BpcmFsKTsKICAgICAgICAgICAgICB0YWdDbG91ZExheW91dEdlbmVyYXRvci53b3Jkcyhqb2Iud29yZHMpOwogICAgICAgICAgICAgIHRhZ0Nsb3VkTGF5b3V0R2VuZXJhdG9yLnRleHQoZ2V0RGlzcGxheVRleHQpOwogICAgICAgICAgICAgIHRhZ0Nsb3VkTGF5b3V0R2VuZXJhdG9yLnRpbWVJbnRlcnZhbCh0aGlzLl90aW1lSW50ZXJ2YWwpOwogICAgICAgICAgICAgIHRoaXMuX2xheW91dElzVXBkYXRpbmcgPSB0cnVlOwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgdGFnQ2xvdWRMYXlvdXRHZW5lcmF0b3Iub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM0Ll9sYXlvdXRJc1VwZGF0aW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRhZ0Nsb3VkTGF5b3V0R2VuZXJhdG9yLnN0YXJ0KCk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGRlYnVnIGluZm8uIEZvciBkZWJ1Z2dpbmcgb25seS4KICAgICAqIEByZXR1cm4geyp9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0RGVidWdJbmZvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZWJ1Z0luZm8oKSB7CiAgICAgIHZhciBkZWJ1ZyA9IHt9OwogICAgICBkZWJ1Zy5wb3NpdGlvbnMgPSB0aGlzLl9jb21wbGV0ZWRKb2IgPyB0aGlzLl9jb21wbGV0ZWRKb2Iud29yZHMubWFwKGZ1bmN0aW9uICh0YWcpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGlzcGxheVRleHQ6IHRhZy5kaXNwbGF5VGV4dCwKICAgICAgICAgIHJhd1RleHQ6IHRhZy5yYXdUZXh0IHx8IHRhZy50ZXh0LAogICAgICAgICAgeDogdGFnLngsCiAgICAgICAgICB5OiB0YWcueSwKICAgICAgICAgIHJvdGF0ZTogdGFnLnJvdGF0ZQogICAgICAgIH07CiAgICAgIH0pIDogW107CiAgICAgIGRlYnVnLnNpemUgPSB7CiAgICAgICAgd2lkdGg6IHRoaXMuX3NpemVbMF0sCiAgICAgICAgaGVpZ2h0OiB0aGlzLl9zaXplWzFdCiAgICAgIH07CiAgICAgIHJldHVybiBkZWJ1ZzsKICAgIH0KICB9XSk7CgogIHJldHVybiBUYWdDbG91ZDsKfShfZXZlbnRzLkV2ZW50RW1pdHRlcik7CgpleHBvcnRzLlRhZ0Nsb3VkID0gVGFnQ2xvdWQ7ClRhZ0Nsb3VkLlNUQVRVUyA9IHsKICBDT01QTEVURTogMCwKICBJTkNPTVBMRVRFOiAxCn07CgpmdW5jdGlvbiBzZWVkKCkgewogIHJldHVybiAwLjU7IC8vY29uc3RhbnQgc2VlZCAobm90IHJhbmRvbSkgdG8gZW5zdXJlIGNvbnN0YW50IGxheW91dHMgZm9yIGlkZW50aWNhbCBkYXRhCn0KCmZ1bmN0aW9uIGdldFRleHQod29yZCkgewogIHJldHVybiB3b3JkLnJhd1RleHQ7Cn0KCmZ1bmN0aW9uIGdldERpc3BsYXlUZXh0KHdvcmQpIHsKICByZXR1cm4gd29yZC5kaXNwbGF5VGV4dDsKfQoKZnVuY3Rpb24gcG9zaXRpb25Xb3JkKHhUcmFuc2xhdGUsIHlUcmFuc2xhdGUsIHdvcmQpIHsKICBpZiAoaXNOYU4od29yZC54KSB8fCBpc05hTih3b3JkLnkpIHx8IGlzTmFOKHdvcmQucm90YXRlKSkgewogICAgLy9tb3ZlIG9mZi1zY3JlZW4KICAgIHJldHVybiAidHJhbnNsYXRlKCIuY29uY2F0KHhUcmFuc2xhdGUgKiAzLCAiLCAiKS5jb25jYXQoeVRyYW5zbGF0ZSAqIDMsICIpcm90YXRlKDApIik7CiAgfQoKICByZXR1cm4gInRyYW5zbGF0ZSgiLmNvbmNhdCh3b3JkLnggKyB4VHJhbnNsYXRlLCAiLCAiKS5jb25jYXQod29yZC55ICsgeVRyYW5zbGF0ZSwgIilyb3RhdGUoIikuY29uY2F0KHdvcmQucm90YXRlLCAiKSIpOwp9CgpmdW5jdGlvbiBnZXRWYWx1ZSh0YWcpIHsKICByZXR1cm4gdGFnLnZhbHVlOwp9CgpmdW5jdGlvbiBnZXRTaXplSW5QaXhlbHModGFnKSB7CiAgcmV0dXJuICIiLmNvbmNhdCh0YWcuc2l6ZSwgInB4Iik7Cn0KCnZhciBjb2xvclNjYWxlID0gX2QuZGVmYXVsdC5zY2FsZS5vcmRpbmFsKCkucmFuZ2UoX3NlZWRfY29sb3JzLnNlZWRDb2xvcnMpOwoKZnVuY3Rpb24gZ2V0RmlsbCh0YWcpIHsKICByZXR1cm4gY29sb3JTY2FsZSh0YWcudGV4dCk7Cn0KCmZ1bmN0aW9uIGhhc2hXaXRoaW5SYW5nZShzdHIsIG1heCkgewogIHN0ciA9IEpTT04uc3RyaW5naWZ5KHN0cik7CiAgdmFyIGhhc2ggPSAwOwogIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBzdHJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7CiAgICAgIHZhciBjaCA9IF9zdGVwLnZhbHVlOwogICAgICBoYXNoID0gKGhhc2ggKiAzMSArIGNoLmNoYXJDb2RlQXQoMCkpICUgbWF4OwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpIHsKICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgIH0KICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gTWF0aC5hYnMoaGFzaCkgJSBtYXg7Cn0="},null]}