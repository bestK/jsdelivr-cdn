{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/management/sections/index_patterns/create_index_pattern_wizard/create_index_pattern_wizard.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/management/sections/index_patterns/create_index_pattern_wizard/create_index_pattern_wizard.js","mtime":1585205039771},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkNyZWF0ZUluZGV4UGF0dGVybldpemFyZCA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcHJvcFR5cGVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJwcm9wLXR5cGVzIikpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX3N0ZXBfaW5kZXhfcGF0dGVybiA9IHJlcXVpcmUoIi4vY29tcG9uZW50cy9zdGVwX2luZGV4X3BhdHRlcm4iKTsKCnZhciBfc3RlcF90aW1lX2ZpZWxkID0gcmVxdWlyZSgiLi9jb21wb25lbnRzL3N0ZXBfdGltZV9maWVsZCIpOwoKdmFyIF9oZWFkZXIgPSByZXF1aXJlKCIuL2NvbXBvbmVudHMvaGVhZGVyIik7Cgp2YXIgX2xvYWRpbmdfc3RhdGUgPSByZXF1aXJlKCIuL2NvbXBvbmVudHMvbG9hZGluZ19zdGF0ZSIpOwoKdmFyIF9lbXB0eV9zdGF0ZSA9IHJlcXVpcmUoIi4vY29tcG9uZW50cy9lbXB0eV9zdGF0ZSIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuL2NvbnN0YW50cyIpOwoKdmFyIF9saWIgPSByZXF1aXJlKCIuL2xpYiIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIENyZWF0ZUluZGV4UGF0dGVybldpemFyZCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoQ3JlYXRlSW5kZXhQYXR0ZXJuV2l6YXJkLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gQ3JlYXRlSW5kZXhQYXR0ZXJuV2l6YXJkKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENyZWF0ZUluZGV4UGF0dGVybldpemFyZCk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoQ3JlYXRlSW5kZXhQYXR0ZXJuV2l6YXJkKS5jYWxsKHRoaXMsIHByb3BzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY2F0Y2hBbmRXYXJuIiwgZnVuY3Rpb24gX2NhbGxlZShhc3luY0ZuLCBlcnJvclZhbHVlLCBlcnJvck1zZykgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoYXN5bmNGbik7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQuc2VudCk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgdG9hc3RzOiBwcmV2U3RhdGUudG9hc3RzLmNvbmNhdChbewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBlcnJvck1zZywKICAgICAgICAgICAgICAgICAgICBpZDogZXJyb3JNc2cucHJvcHMuaWQsCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICd3YXJuaW5nJywKICAgICAgICAgICAgICAgICAgICBpY29uVHlwZTogJ2FsZXJ0JwogICAgICAgICAgICAgICAgICB9XSkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGVycm9yVmFsdWUpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgbnVsbCwgW1swLCA2XV0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZmV0Y2hEYXRhIiwgZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBzZXJ2aWNlcywgaW5kaWNlc0ZhaWxNc2csIGNsdXN0ZXJzRmFpbE1zZzsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc2VydmljZXMgPSBfdGhpcy5wcm9wcy5zZXJ2aWNlczsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgYWxsSW5kaWNlczogW10sCiAgICAgICAgICAgICAgICBpc0luaXRpYWxseUxvYWRpbmdJbmRpY2VzOiB0cnVlLAogICAgICAgICAgICAgICAgcmVtb3RlQ2x1c3RlcnNFeGlzdDogZmFsc2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgaW5kaWNlc0ZhaWxNc2cgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgICAgaWQ6ICJrYm4ubWFuYWdlbWVudC5jcmVhdGVJbmRleFBhdHRlcm4ubG9hZEluZGljZXNGYWlsTXNnIiwKICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRmFpbGVkIHRvIGxvYWQgaW5kaWNlcyIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjbHVzdGVyc0ZhaWxNc2cgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgICAgaWQ6ICJrYm4ubWFuYWdlbWVudC5jcmVhdGVJbmRleFBhdHRlcm4ubG9hZENsdXN0ZXJzRmFpbE1zZyIsCiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkZhaWxlZCB0byBsb2FkIHJlbW90ZSBjbHVzdGVycyIKICAgICAgICAgICAgICB9KTsgLy8gcXVlcnkgbG9jYWwgYW5kIHJlbW90ZSBpbmRpY2VzLCB1cGRhdGluZyBzdGF0ZSBpbmRlcGVuZGVudGx5CgogICAgICAgICAgICAgICgwLCBfbGliLmVuc3VyZU1pbmltdW1UaW1lKShfdGhpcy5jYXRjaEFuZFdhcm4oKDAsIF9saWIuZ2V0SW5kaWNlcykoc2VydmljZXMuZXMsIF90aGlzLmluZGV4UGF0dGVybkNyZWF0aW9uVHlwZSwgIioiLCBfY29uc3RhbnRzLk1BWF9TRUFSQ0hfU0laRSksIFtdLCBpbmRpY2VzRmFpbE1zZykpLnRoZW4oZnVuY3Rpb24gKGFsbEluZGljZXMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGFsbEluZGljZXM6IGFsbEluZGljZXMsCiAgICAgICAgICAgICAgICAgIGlzSW5pdGlhbGx5TG9hZGluZ0luZGljZXM6IGZhbHNlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXMuY2F0Y2hBbmRXYXJuKCAvLyBpZiB3ZSBnZXQgYW4gZXJyb3IgZnJvbSByZW1vdGUgY2x1c3RlciBxdWVyeSwgc3VwcGx5IGZhbGxiYWNrIHZhbHVlIHRoYXQgYWxsb3dzIHVzZXIgZW50cnkuCiAgICAgICAgICAgICAgLy8gWydhJ10gaXMgZmFsbGJhY2sgdmFsdWUKICAgICAgICAgICAgICAoMCwgX2xpYi5nZXRJbmRpY2VzKShzZXJ2aWNlcy5lcywgX3RoaXMuaW5kZXhQYXR0ZXJuQ3JlYXRpb25UeXBlLCAiKjoqIiwgMSksIFsnYSddLCBjbHVzdGVyc0ZhaWxNc2cpLnRoZW4oZnVuY3Rpb24gKHJlbW90ZUluZGljZXMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIHJlbW90ZUNsdXN0ZXJzRXhpc3Q6ICEhcmVtb3RlSW5kaWNlcy5sZW5ndGgKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJjcmVhdGVJbmRleFBhdHRlcm4iLCBmdW5jdGlvbiBfY2FsbGVlMyh0aW1lRmllbGROYW1lLCBpbmRleFBhdHRlcm5JZCkgewogICAgICB2YXIgc2VydmljZXMsIGluZGV4UGF0dGVybiwgZW1wdHlQYXR0ZXJuLCBjcmVhdGVkSWQsIGNvbmZpcm1NZXNzYWdlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzZXJ2aWNlcyA9IF90aGlzLnByb3BzLnNlcnZpY2VzOwogICAgICAgICAgICAgIGluZGV4UGF0dGVybiA9IF90aGlzLnN0YXRlLmluZGV4UGF0dGVybjsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlcy5pbmRleFBhdHRlcm5zLm1ha2UoKSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgZW1wdHlQYXR0ZXJuID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihlbXB0eVBhdHRlcm4sIF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgICAgaWQ6IGluZGV4UGF0dGVybklkLAogICAgICAgICAgICAgICAgdGl0bGU6IGluZGV4UGF0dGVybiwKICAgICAgICAgICAgICAgIHRpbWVGaWVsZE5hbWU6IHRpbWVGaWVsZE5hbWUKICAgICAgICAgICAgICB9LCBfdGhpcy5pbmRleFBhdHRlcm5DcmVhdGlvblR5cGUuZ2V0SW5kZXhQYXR0ZXJuTWFwcGluZ3MoKSkpOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGVtcHR5UGF0dGVybi5jcmVhdGUoKSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY3JlYXRlZElkID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgIGlmIChjcmVhdGVkSWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNvbmZpcm1NZXNzYWdlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5tYW5hZ2VtZW50LmluZGV4UGF0dGVybi50aXRsZUV4aXN0c0xhYmVsJywgewogICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiBfdGhpcy50aXRsZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQW4gaW5kZXggcGF0dGVybiB3aXRoIHRoZSB0aXRsZSAne3RpdGxlfScgYWxyZWFkeSBleGlzdHMuIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNDsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2VzLmNvbmZpcm1Nb2RhbFByb21pc2UoY29uZmlybU1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnR28gdG8gZXhpc3RpbmcgcGF0dGVybicKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBzZXJ2aWNlcy5jaGFuZ2VVcmwoIi9tYW5hZ2VtZW50L2tpYmFuYS9pbmRleF9wYXR0ZXJucy8iLmNvbmNhdChpbmRleFBhdHRlcm5JZCkpKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxNzsKICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oMTEpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIGlmIChzZXJ2aWNlcy5jb25maWcuZ2V0KCdkZWZhdWx0SW5kZXgnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNlcnZpY2VzLmNvbmZpZy5zZXQoJ2RlZmF1bHRJbmRleCcsIGNyZWF0ZWRJZCkpOwoKICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICBzZXJ2aWNlcy5pbmRleFBhdHRlcm5zLmNsZWFyQ2FjaGUoY3JlYXRlZElkKTsKICAgICAgICAgICAgICBzZXJ2aWNlcy5jaGFuZ2VVcmwoIi9tYW5hZ2VtZW50L2tpYmFuYS9pbmRleF9wYXR0ZXJucy8iLmNvbmNhdChjcmVhdGVkSWQpKTsKCiAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCBudWxsLCBbWzExLCAxN11dKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdvVG9UaW1lRmllbGRTdGVwIiwgZnVuY3Rpb24gKGluZGV4UGF0dGVybikgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgc3RlcDogMiwKICAgICAgICBpbmRleFBhdHRlcm46IGluZGV4UGF0dGVybgogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdvVG9JbmRleFBhdHRlcm5TdGVwIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgc3RlcDogMQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uQ2hhbmdlSW5jbHVkaW5nU3lzdGVtSW5kaWNlcyIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHN0YXRlKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlzSW5jbHVkaW5nU3lzdGVtSW5kaWNlczogIXN0YXRlLmlzSW5jbHVkaW5nU3lzdGVtSW5kaWNlcwogICAgICAgIH07CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVtb3ZlVG9hc3QiLCBmdW5jdGlvbiAocmVtb3ZlZFRvYXN0KSB7CiAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdG9hc3RzOiBwcmV2U3RhdGUudG9hc3RzLmZpbHRlcihmdW5jdGlvbiAodG9hc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRvYXN0LmlkICE9PSByZW1vdmVkVG9hc3QuaWQ7CiAgICAgICAgICB9KQogICAgICAgIH07CiAgICAgIH0pOwogICAgfSk7CgogICAgX3RoaXMuaW5kZXhQYXR0ZXJuQ3JlYXRpb25UeXBlID0gX3RoaXMucHJvcHMuc2VydmljZXMuaW5kZXhQYXR0ZXJuQ3JlYXRpb25UeXBlOwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIHN0ZXA6IDEsCiAgICAgIGluZGV4UGF0dGVybjogJycsCiAgICAgIGFsbEluZGljZXM6IFtdLAogICAgICByZW1vdGVDbHVzdGVyc0V4aXN0OiBmYWxzZSwKICAgICAgaXNJbml0aWFsbHlMb2FkaW5nSW5kaWNlczogdHJ1ZSwKICAgICAgaXNJbmNsdWRpbmdTeXN0ZW1JbmRpY2VzOiBmYWxzZSwKICAgICAgdG9hc3RzOiBbXQogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhDcmVhdGVJbmRleFBhdHRlcm5XaXphcmQsIFt7CiAgICBrZXk6ICJVTlNBRkVfY29tcG9uZW50V2lsbE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBVTlNBRkVfY29tcG9uZW50V2lsbE1vdW50KCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIFVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhKCk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJIZWFkZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckhlYWRlcigpIHsKICAgICAgdmFyIGlzSW5jbHVkaW5nU3lzdGVtSW5kaWNlcyA9IHRoaXMuc3RhdGUuaXNJbmNsdWRpbmdTeXN0ZW1JbmRpY2VzOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaGVhZGVyLkhlYWRlciwgewogICAgICAgIHByb21wdDogdGhpcy5pbmRleFBhdHRlcm5DcmVhdGlvblR5cGUucmVuZGVyUHJvbXB0KCksCiAgICAgICAgc2hvd1N5c3RlbUluZGljZXM6IHRoaXMuaW5kZXhQYXR0ZXJuQ3JlYXRpb25UeXBlLmdldFNob3dTeXN0ZW1JbmRpY2VzKCksCiAgICAgICAgaXNJbmNsdWRpbmdTeXN0ZW1JbmRpY2VzOiBpc0luY2x1ZGluZ1N5c3RlbUluZGljZXMsCiAgICAgICAgb25DaGFuZ2VJbmNsdWRpbmdTeXN0ZW1JbmRpY2VzOiB0aGlzLm9uQ2hhbmdlSW5jbHVkaW5nU3lzdGVtSW5kaWNlcywKICAgICAgICBpbmRleFBhdHRlcm5OYW1lOiB0aGlzLmluZGV4UGF0dGVybkNyZWF0aW9uVHlwZS5nZXRJbmRleFBhdHRlcm5OYW1lKCksCiAgICAgICAgaXNCZXRhOiB0aGlzLmluZGV4UGF0dGVybkNyZWF0aW9uVHlwZS5nZXRJc0JldGEoKQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJDb250ZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJDb250ZW50KCkgewogICAgICB2YXIgX3RoaXMkc3RhdGUgPSB0aGlzLnN0YXRlLAogICAgICAgICAgYWxsSW5kaWNlcyA9IF90aGlzJHN0YXRlLmFsbEluZGljZXMsCiAgICAgICAgICBpc0luaXRpYWxseUxvYWRpbmdJbmRpY2VzID0gX3RoaXMkc3RhdGUuaXNJbml0aWFsbHlMb2FkaW5nSW5kaWNlcywKICAgICAgICAgIGlzSW5jbHVkaW5nU3lzdGVtSW5kaWNlcyA9IF90aGlzJHN0YXRlLmlzSW5jbHVkaW5nU3lzdGVtSW5kaWNlcywKICAgICAgICAgIHN0ZXAgPSBfdGhpcyRzdGF0ZS5zdGVwLAogICAgICAgICAgaW5kZXhQYXR0ZXJuID0gX3RoaXMkc3RhdGUuaW5kZXhQYXR0ZXJuLAogICAgICAgICAgcmVtb3RlQ2x1c3RlcnNFeGlzdCA9IF90aGlzJHN0YXRlLnJlbW90ZUNsdXN0ZXJzRXhpc3Q7CgogICAgICBpZiAoaXNJbml0aWFsbHlMb2FkaW5nSW5kaWNlcykgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9sb2FkaW5nX3N0YXRlLkxvYWRpbmdTdGF0ZSwgbnVsbCk7CiAgICAgIH0KCiAgICAgIHZhciBoYXNEYXRhSW5kaWNlcyA9IGFsbEluZGljZXMuc29tZShmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBuYW1lID0gX3JlZi5uYW1lOwogICAgICAgIHJldHVybiAhbmFtZS5zdGFydHNXaXRoKCcuJyk7CiAgICAgIH0pOwoKICAgICAgaWYgKCFoYXNEYXRhSW5kaWNlcyAmJiAhaXNJbmNsdWRpbmdTeXN0ZW1JbmRpY2VzICYmICFyZW1vdGVDbHVzdGVyc0V4aXN0KSB7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2VtcHR5X3N0YXRlLkVtcHR5U3RhdGUsIHsKICAgICAgICAgIG9uUmVmcmVzaDogdGhpcy5mZXRjaERhdGEKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHN0ZXAgPT09IDEpIHsKICAgICAgICB2YXIgX3RoaXMkcHJvcHMgPSB0aGlzLnByb3BzLAogICAgICAgICAgICBfc2VydmljZXMgPSBfdGhpcyRwcm9wcy5zZXJ2aWNlcywKICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5ID0gX3RoaXMkcHJvcHMuaW5pdGlhbFF1ZXJ5OwogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zdGVwX2luZGV4X3BhdHRlcm4uU3RlcEluZGV4UGF0dGVybiwgewogICAgICAgICAgYWxsSW5kaWNlczogYWxsSW5kaWNlcywKICAgICAgICAgIGluaXRpYWxRdWVyeTogaW5kZXhQYXR0ZXJuIHx8IGluaXRpYWxRdWVyeSwKICAgICAgICAgIGlzSW5jbHVkaW5nU3lzdGVtSW5kaWNlczogaXNJbmNsdWRpbmdTeXN0ZW1JbmRpY2VzLAogICAgICAgICAgZXNTZXJ2aWNlOiBfc2VydmljZXMuZXMsCiAgICAgICAgICBzYXZlZE9iamVjdHNDbGllbnQ6IF9zZXJ2aWNlcy5zYXZlZE9iamVjdHNDbGllbnQsCiAgICAgICAgICBpbmRleFBhdHRlcm5DcmVhdGlvblR5cGU6IHRoaXMuaW5kZXhQYXR0ZXJuQ3JlYXRpb25UeXBlLAogICAgICAgICAgZ29Ub05leHRTdGVwOiB0aGlzLmdvVG9UaW1lRmllbGRTdGVwCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChzdGVwID09PSAyKSB7CiAgICAgICAgdmFyIF9zZXJ2aWNlczIgPSB0aGlzLnByb3BzLnNlcnZpY2VzOwogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zdGVwX3RpbWVfZmllbGQuU3RlcFRpbWVGaWVsZCwgewogICAgICAgICAgaW5kZXhQYXR0ZXJuOiBpbmRleFBhdHRlcm4sCiAgICAgICAgICBpbmRleFBhdHRlcm5zU2VydmljZTogX3NlcnZpY2VzMi5pbmRleFBhdHRlcm5zLAogICAgICAgICAgZ29Ub1ByZXZpb3VzU3RlcDogdGhpcy5nb1RvSW5kZXhQYXR0ZXJuU3RlcCwKICAgICAgICAgIGNyZWF0ZUluZGV4UGF0dGVybjogdGhpcy5jcmVhdGVJbmRleFBhdHRlcm4sCiAgICAgICAgICBpbmRleFBhdHRlcm5DcmVhdGlvblR5cGU6IHRoaXMuaW5kZXhQYXR0ZXJuQ3JlYXRpb25UeXBlCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgaGVhZGVyID0gdGhpcy5yZW5kZXJIZWFkZXIoKTsKICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnJlbmRlckNvbnRlbnQoKTsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIGhlYWRlciwgY29udGVudCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlHbG9iYWxUb2FzdExpc3QsIHsKICAgICAgICB0b2FzdHM6IHRoaXMuc3RhdGUudG9hc3RzLAogICAgICAgIGRpc21pc3NUb2FzdDogdGhpcy5yZW1vdmVUb2FzdCwKICAgICAgICB0b2FzdExpZmVUaW1lTXM6IDYwMDAKICAgICAgfSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIENyZWF0ZUluZGV4UGF0dGVybldpemFyZDsKfShfcmVhY3QuQ29tcG9uZW50KTsKCmV4cG9ydHMuQ3JlYXRlSW5kZXhQYXR0ZXJuV2l6YXJkID0gQ3JlYXRlSW5kZXhQYXR0ZXJuV2l6YXJkOwoKX2RlZmluZVByb3BlcnR5KENyZWF0ZUluZGV4UGF0dGVybldpemFyZCwgInByb3BUeXBlcyIsIHsKICBpbml0aWFsUXVlcnk6IF9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcsCiAgc2VydmljZXM6IF9wcm9wVHlwZXMuZGVmYXVsdC5zaGFwZSh7CiAgICBlczogX3Byb3BUeXBlcy5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkLAogICAgaW5kZXhQYXR0ZXJuczogX3Byb3BUeXBlcy5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkLAogICAgc2F2ZWRPYmplY3RzQ2xpZW50OiBfcHJvcFR5cGVzLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWQsCiAgICBpbmRleFBhdHRlcm5DcmVhdGlvblR5cGU6IF9wcm9wVHlwZXMuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZCwKICAgIGNvbmZpZzogX3Byb3BUeXBlcy5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkLAogICAgY2hhbmdlVXJsOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkCiAgfSkuaXNSZXF1aXJlZAp9KTs="},null]}