{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/components/embeddables/embedded_map.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/components/embeddables/embedded_map.js","mtime":1585205047420},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkVtYmVkZGVkTWFwID0gZXhwb3J0cy5FbWJlZGRlZE1hcENvbXBvbmVudCA9IHZvaWQgMDsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0UmV2ZXJzZVBvcnRhbCA9IHJlcXVpcmUoInJlYWN0LXJldmVyc2UtcG9ydGFsIik7Cgp2YXIgX3N0eWxlZENvbXBvbmVudHMgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJzdHlsZWQtY29tcG9uZW50cyIpKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xlZ2FjeS9jb3JlX3BsdWdpbnMvZW1iZWRkYWJsZV9hcGkvcHVibGljL25wX3JlYWR5L3B1YmxpYyIpOwoKdmFyIF9sZWdhY3kgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvbGVnYWN5L2NvcmVfcGx1Z2lucy9lbWJlZGRhYmxlX2FwaS9wdWJsaWMvbnBfcmVhZHkvcHVibGljL2xlZ2FjeSIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX2hlbHBlcnMgPSByZXF1aXJlKCIuLi8uLi9ob29rcy9hcGkvaGVscGVycyIpOwoKdmFyIF91c2VfaW5kZXhfcGF0dGVybnMgPSByZXF1aXJlKCIuLi8uLi9ob29rcy91c2VfaW5kZXhfcGF0dGVybnMiKTsKCnZhciBfbG9hZGVyID0gcmVxdWlyZSgiLi4vbG9hZGVyIik7Cgp2YXIgX3RvYXN0ZXJzID0gcmVxdWlyZSgiLi4vdG9hc3RlcnMiKTsKCnZhciBfZW1iZWRkYWJsZSA9IHJlcXVpcmUoIi4vZW1iZWRkYWJsZSIpOwoKdmFyIF9lbWJlZGRhYmxlX2hlYWRlciA9IHJlcXVpcmUoIi4vZW1iZWRkYWJsZV9oZWFkZXIiKTsKCnZhciBfZW1iZWRkZWRfbWFwX2hlbHBlcnMgPSByZXF1aXJlKCIuL2VtYmVkZGVkX21hcF9oZWxwZXJzIik7Cgp2YXIgX2luZGV4X3BhdHRlcm5zX21pc3NpbmdfcHJvbXB0ID0gcmVxdWlyZSgiLi9pbmRleF9wYXR0ZXJuc19taXNzaW5nX3Byb21wdCIpOwoKdmFyIF9tYXBfdG9vbF90aXAgPSByZXF1aXJlKCIuL21hcF90b29sX3RpcC9tYXBfdG9vbF90aXAiKTsKCnZhciBpMThuID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgiLi90cmFuc2xhdGlvbnMiKSk7Cgp2YXIgX2tpYmFuYSA9IHJlcXVpcmUoIi4uLy4uL2xpYi9raWJhbmEiKTsKCnZhciBfcHVibGljMiA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9wbHVnaW5zL2tpYmFuYV9yZWFjdC9wdWJsaWMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX2V4dGVuZHMoKSB7CiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CgogICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsKICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRhcmdldDsKICB9OwoKICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIEVtYmVkZGFibGVNYXAgPSBfc3R5bGVkQ29tcG9uZW50cy5kZWZhdWx0LmRpdi5hdHRycyhmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHsKICAgIGNsYXNzTmFtZTogJ3NpZW1FbWJlZGRhYmxlX19tYXAnCiAgfTsKfSkud2l0aENvbmZpZyh7CiAgZGlzcGxheU5hbWU6ICJFbWJlZGRhYmxlTWFwIiwKICBjb21wb25lbnRJZDogIm40eTZjei0wIgp9KShbIi5lbWJQYW5lbHtib3JkZXI6bm9uZTtib3gtc2hhZG93Om5vbmU7fS5tYXBUb29sYmFyT3ZlcmxheV9fYnV0dG9ue2Rpc3BsYXk6bm9uZTt9IiwgIiJdLCBmdW5jdGlvbiAoX3JlZikgewogIHZhciBtYWludGFpblJhdGlvID0gX3JlZi5tYWludGFpblJhdGlvOwogIHJldHVybiBtYWludGFpblJhdGlvICYmICgwLCBfc3R5bGVkQ29tcG9uZW50cy5jc3MpKFsicGFkZGluZy10b3A6Y2FsYygzIC8gNCAqIDEwMCUpO3Bvc2l0aW9uOnJlbGF0aXZlO0BtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDoiLCAiKXtwYWRkaW5nLXRvcDpjYWxjKDkgLyAzMiAqIDEwMCUpO31AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6MTQ0MXB4KSBhbmQgKG1pbi1oZWlnaHQ6OTAxcHgpe3BhZGRpbmctdG9wOmNhbGMoOSAvIDIxICogMTAwJSk7fS5lbWJQYW5lbHtib3R0b206MDtsZWZ0OjA7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MDt0b3A6MDt9Il0sIGZ1bmN0aW9uIChfcmVmMikgewogICAgdmFyIHRoZW1lID0gX3JlZjIudGhlbWU7CiAgICByZXR1cm4gdGhlbWUuZXVpLmV1aUJyZWFrcG9pbnRzLm07CiAgfSk7Cn0pOwoKRW1iZWRkYWJsZU1hcC5kaXNwbGF5TmFtZSA9ICdFbWJlZGRhYmxlTWFwJzsKCnZhciBFbWJlZGRlZE1hcENvbXBvbmVudCA9IGZ1bmN0aW9uIEVtYmVkZGVkTWFwQ29tcG9uZW50KF9yZWYzKSB7CiAgdmFyIGVuZERhdGUgPSBfcmVmMy5lbmREYXRlLAogICAgICBmaWx0ZXJzID0gX3JlZjMuZmlsdGVycywKICAgICAgcXVlcnkgPSBfcmVmMy5xdWVyeSwKICAgICAgc2V0UXVlcnkgPSBfcmVmMy5zZXRRdWVyeSwKICAgICAgc3RhcnREYXRlID0gX3JlZjMuc3RhcnREYXRlOwoKICB2YXIgX1JlYWN0JHVzZVN0YXRlID0gX3JlYWN0LmRlZmF1bHQudXNlU3RhdGUobnVsbCksCiAgICAgIF9SZWFjdCR1c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUsIDIpLAogICAgICBlbWJlZGRhYmxlID0gX1JlYWN0JHVzZVN0YXRlMlswXSwKICAgICAgc2V0RW1iZWRkYWJsZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh0cnVlKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGlzTG9hZGluZyA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldElzTG9hZGluZyA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIGlzRXJyb3IgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRJc0Vycm9yID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIF91c2VTdGF0ZTUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgaXNJbmRleEVycm9yID0gX3VzZVN0YXRlNlswXSwKICAgICAgc2V0SXNJbmRleEVycm9yID0gX3VzZVN0YXRlNlsxXTsKCiAgdmFyIF91c2VTdGF0ZVRvYXN0ZXIgPSAoMCwgX3RvYXN0ZXJzLnVzZVN0YXRlVG9hc3RlcikoKSwKICAgICAgX3VzZVN0YXRlVG9hc3RlcjIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGVUb2FzdGVyLCAyKSwKICAgICAgZGlzcGF0Y2hUb2FzdGVyID0gX3VzZVN0YXRlVG9hc3RlcjJbMV07CgogIHZhciBfdXNlSW5kZXhQYXR0ZXJucyA9ICgwLCBfdXNlX2luZGV4X3BhdHRlcm5zLnVzZUluZGV4UGF0dGVybnMpKCksCiAgICAgIF91c2VJbmRleFBhdHRlcm5zMiA9IF9zbGljZWRUb0FycmF5KF91c2VJbmRleFBhdHRlcm5zLCAyKSwKICAgICAgbG9hZGluZ0tpYmFuYUluZGV4UGF0dGVybnMgPSBfdXNlSW5kZXhQYXR0ZXJuczJbMF0sCiAgICAgIGtpYmFuYUluZGV4UGF0dGVybnMgPSBfdXNlSW5kZXhQYXR0ZXJuczJbMV07CgogIHZhciBfdXNlVWlTZXR0aW5nJCA9ICgwLCBfa2liYW5hLnVzZVVpU2V0dGluZyQpKF9jb25zdGFudHMuREVGQVVMVF9JTkRFWF9LRVkpLAogICAgICBfdXNlVWlTZXR0aW5nJDIgPSBfc2xpY2VkVG9BcnJheShfdXNlVWlTZXR0aW5nJCwgMSksCiAgICAgIHNpZW1EZWZhdWx0SW5kaWNlcyA9IF91c2VVaVNldHRpbmckMlswXTsgLy8gVGhpcyBwb3J0YWxOb2RlIHByb3ZpZGVkIGJ5IHJlYWN0LXJldmVyc2UtcG9ydGFsIGFsbG93cyB1cyByZS1wYXJlbnQgdGhlIE1hcFRvb2xUaXAgd2l0aGluIG91cgogIC8vIG93biBjb21wb25lbnQgdHJlZSBpbnN0ZWFkIG9mIHRoZSBlbWJlZGRhYmxlcyAoZGVmYXVsdCkuIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGhhdmUgYWNjZXNzIHRvCiAgLy8gdGhlIFJlZHV4IHN0b3JlLCB0aGVtZSBwcm92aWRlciwgZXRjLCB3aGljaCBpcyByZXF1aXJlZCB0byByZWdpc3RlciBhbmQgdW4tcmVnaXN0ZXIgdGhlIGRyYWdnYWJsZQogIC8vIFNlYXJjaCBJblBvcnRhbC9PdXRQb3J0YWwgZm9yIGltcGxlbWVudGF0aW9uIHRvdWNoIHBvaW50cwoKCiAgdmFyIHBvcnRhbE5vZGUgPSBfcmVhY3QuZGVmYXVsdC51c2VNZW1vKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiAoMCwgX3JlYWN0UmV2ZXJzZVBvcnRhbC5jcmVhdGVQb3J0YWxOb2RlKSgpOwogIH0sIFtdKTsKCiAgdmFyIF91c2VLaWJhbmEgPSAoMCwgX2tpYmFuYS51c2VLaWJhbmEpKCksCiAgICAgIHNlcnZpY2VzID0gX3VzZUtpYmFuYS5zZXJ2aWNlczsgLy8gSW5pdGlhbCBMb2FkIHVzZUVmZmVjdAoKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIHZhciBpc1N1YnNjcmliZWQgPSB0cnVlOwoKICAgIGZ1bmN0aW9uIHNldHVwRW1iZWRkYWJsZSgpIHsKICAgICAgdmFyIG1hdGNoaW5nSW5kZXhQYXR0ZXJucywgZW1iZWRkYWJsZU9iamVjdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzZXR1cEVtYmVkZGFibGUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIC8vIEVuc3VyZSBhdCBsZWFzdCBvbmUgYHNpZW06ZGVmYXVsdEluZGV4YCBraWJhbmEgaW5kZXggcGF0dGVybiBleGlzdHMgYmVmb3JlIGNyZWF0aW5nIGVtYmVkZGFibGUKICAgICAgICAgICAgICBtYXRjaGluZ0luZGV4UGF0dGVybnMgPSAoMCwgX2VtYmVkZGVkX21hcF9oZWxwZXJzLmZpbmRNYXRjaGluZ0luZGV4UGF0dGVybnMpKHsKICAgICAgICAgICAgICAgIGtpYmFuYUluZGV4UGF0dGVybnM6IGtpYmFuYUluZGV4UGF0dGVybnMsCiAgICAgICAgICAgICAgICBzaWVtRGVmYXVsdEluZGljZXM6IHNpZW1EZWZhdWx0SW5kaWNlcwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBpZiAoIShtYXRjaGluZ0luZGV4UGF0dGVybnMubGVuZ3RoID09PSAwICYmIGlzU3Vic2NyaWJlZCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpOwogICAgICAgICAgICAgIHNldElzSW5kZXhFcnJvcih0cnVlKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKCgwLCBfZW1iZWRkZWRfbWFwX2hlbHBlcnMuY3JlYXRlRW1iZWRkYWJsZSkoZmlsdGVycywgKDAsIF9oZWxwZXJzLmdldEluZGV4UGF0dGVyblRpdGxlSWRNYXBwaW5nKShtYXRjaGluZ0luZGV4UGF0dGVybnMpLCBxdWVyeSwgc3RhcnREYXRlLCBlbmREYXRlLCBzZXRRdWVyeSwgcG9ydGFsTm9kZSwgc2VydmljZXMuZW1iZWRkYWJsZSkpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGVtYmVkZGFibGVPYmplY3QgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAoaXNTdWJzY3JpYmVkKSB7CiAgICAgICAgICAgICAgICBzZXRFbWJlZGRhYmxlKGVtYmVkZGFibGVPYmplY3QpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSg1KTsKCiAgICAgICAgICAgICAgaWYgKGlzU3Vic2NyaWJlZCkgewogICAgICAgICAgICAgICAgKDAsIF90b2FzdGVycy5kaXNwbGF5RXJyb3JUb2FzdCkoaTE4bi5FUlJPUl9DUkVBVElOR19FTUJFRERBQkxFLCBbX2NvbnRleHQudDAubWVzc2FnZV0sIGRpc3BhdGNoVG9hc3Rlcik7CiAgICAgICAgICAgICAgICBzZXRJc0Vycm9yKHRydWUpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgaWYgKGlzU3Vic2NyaWJlZCkgewogICAgICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCBudWxsLCBbWzUsIDEyXV0pOwogICAgfQoKICAgIGlmICghbG9hZGluZ0tpYmFuYUluZGV4UGF0dGVybnMpIHsKICAgICAgc2V0dXBFbWJlZGRhYmxlKCk7CiAgICB9CgogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgaXNTdWJzY3JpYmVkID0gZmFsc2U7CiAgICB9OwogIH0sIFtsb2FkaW5nS2liYW5hSW5kZXhQYXR0ZXJucywga2liYW5hSW5kZXhQYXR0ZXJuc10pOyAvLyBxdWVyeUV4cHJlc3Npb24gdXBkYXRlZCB1c2VFZmZlY3QKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGlmIChlbWJlZGRhYmxlICE9IG51bGwpIHsKICAgICAgZW1iZWRkYWJsZS51cGRhdGVJbnB1dCh7CiAgICAgICAgcXVlcnk6IHF1ZXJ5CiAgICAgIH0pOwogICAgfQogIH0sIFtxdWVyeV0pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBpZiAoZW1iZWRkYWJsZSAhPSBudWxsKSB7CiAgICAgIGVtYmVkZGFibGUudXBkYXRlSW5wdXQoewogICAgICAgIGZpbHRlcnM6IGZpbHRlcnMKICAgICAgfSk7CiAgICB9CiAgfSwgW2ZpbHRlcnNdKTsgLy8gRGF0ZVJhbmdlIHVwZGF0ZWQgdXNlRWZmZWN0CgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBpZiAoZW1iZWRkYWJsZSAhPSBudWxsICYmIHN0YXJ0RGF0ZSAhPSBudWxsICYmIGVuZERhdGUgIT0gbnVsbCkgewogICAgICB2YXIgdGltZVJhbmdlID0gewogICAgICAgIGZyb206IG5ldyBEYXRlKHN0YXJ0RGF0ZSkudG9JU09TdHJpbmcoKSwKICAgICAgICB0bzogbmV3IERhdGUoZW5kRGF0ZSkudG9JU09TdHJpbmcoKQogICAgICB9OwogICAgICBlbWJlZGRhYmxlLnVwZGF0ZUlucHV0KHsKICAgICAgICB0aW1lUmFuZ2U6IHRpbWVSYW5nZQogICAgICB9KTsKICAgIH0KICB9LCBbc3RhcnREYXRlLCBlbmREYXRlXSk7CgogIHZhciBTYXZlZE9iamVjdEZpbmRlciA9IGZ1bmN0aW9uIFNhdmVkT2JqZWN0RmluZGVyKHByb3BzKSB7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcHVibGljMi5TYXZlZE9iamVjdEZpbmRlclVpLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHsKICAgICAgc2F2ZWRPYmplY3RzOiBzZXJ2aWNlcy5zYXZlZE9iamVjdHMsCiAgICAgIHVpU2V0dGluZ3M6IHNlcnZpY2VzLnVpU2V0dGluZ3MKICAgIH0pKTsKICB9OwoKICByZXR1cm4gaXNFcnJvciA/IG51bGwgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9lbWJlZGRhYmxlLkVtYmVkZGFibGUsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2VtYmVkZGFibGVfaGVhZGVyLkVtYmVkZGFibGVIZWFkZXIsIHsKICAgIHRpdGxlOiBpMThuLkVNQkVEREFCTEVfSEVBREVSX1RJVExFCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIHsKICAgIHNpemU6ICJ4cyIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgaHJlZjogIiIuY29uY2F0KHNlcnZpY2VzLmRvY0xpbmtzLkVMQVNUSUNfV0VCU0lURV9VUkwsICJndWlkZS9lbi9zaWVtL2d1aWRlLyIpLmNvbmNhdChzZXJ2aWNlcy5kb2NMaW5rcy5ET0NfTElOS19WRVJTSU9OLCAiL2NvbmYtbWFwLXVpLmh0bWwiKSwKICAgIHRhcmdldDogIl9ibGFuayIKICB9LCBpMThuLkVNQkVEREFCTEVfSEVBREVSX0hFTFApKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0UmV2ZXJzZVBvcnRhbC5JblBvcnRhbCwgewogICAgbm9kZTogcG9ydGFsTm9kZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX21hcF90b29sX3RpcC5NYXBUb29sVGlwLCBudWxsKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRW1iZWRkYWJsZU1hcCwgewogICAgbWFpbnRhaW5SYXRpbzogIWlzSW5kZXhFcnJvcgogIH0sIGVtYmVkZGFibGUgIT0gbnVsbCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3B1YmxpYy5FbWJlZGRhYmxlUGFuZWwsIHsKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJlbWJlZGRhYmxlLXBhbmVsIiwKICAgIGVtYmVkZGFibGU6IGVtYmVkZGFibGUsCiAgICBnZXRBY3Rpb25zOiBzZXJ2aWNlcy51aUFjdGlvbnMuZ2V0VHJpZ2dlckNvbXBhdGlibGVBY3Rpb25zLAogICAgZ2V0RW1iZWRkYWJsZUZhY3Rvcnk6IF9sZWdhY3kuc3RhcnQuZ2V0RW1iZWRkYWJsZUZhY3RvcnksCiAgICBnZXRBbGxFbWJlZGRhYmxlRmFjdG9yaWVzOiBfbGVnYWN5LnN0YXJ0LmdldEVtYmVkZGFibGVGYWN0b3JpZXMsCiAgICBub3RpZmljYXRpb25zOiBzZXJ2aWNlcy5ub3RpZmljYXRpb25zLAogICAgb3ZlcmxheXM6IHNlcnZpY2VzLm92ZXJsYXlzLAogICAgaW5zcGVjdG9yOiBzZXJ2aWNlcy5pbnNwZWN0b3IsCiAgICBTYXZlZE9iamVjdEZpbmRlcjogU2F2ZWRPYmplY3RGaW5kZXIKICB9KSA6ICFpc0xvYWRpbmcgJiYgaXNJbmRleEVycm9yID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaW5kZXhfcGF0dGVybnNfbWlzc2luZ19wcm9tcHQuSW5kZXhQYXR0ZXJuc01pc3NpbmdQcm9tcHQsIHsKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJtaXNzaW5nLXByb21wdCIKICB9KSA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2xvYWRlci5Mb2FkZXIsIHsKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJsb2FkaW5nLXBhbmVsIiwKICAgIG92ZXJsYXk6IHRydWUsCiAgICBzaXplOiAieGwiCiAgfSkpKTsKfTsKCmV4cG9ydHMuRW1iZWRkZWRNYXBDb21wb25lbnQgPSBFbWJlZGRlZE1hcENvbXBvbmVudDsKRW1iZWRkZWRNYXBDb21wb25lbnQuZGlzcGxheU5hbWUgPSAnRW1iZWRkZWRNYXBDb21wb25lbnQnOwoKdmFyIEVtYmVkZGVkTWFwID0gX3JlYWN0LmRlZmF1bHQubWVtbyhFbWJlZGRlZE1hcENvbXBvbmVudCk7CgpleHBvcnRzLkVtYmVkZGVkTWFwID0gRW1iZWRkZWRNYXA7CkVtYmVkZGVkTWFwLmRpc3BsYXlOYW1lID0gJ0VtYmVkZGVkTWFwJzs="},null]}