{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/connected_components/map/mb/view.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/connected_components/map/mb/view.js","mtime":1585205045265},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLk1CTWFwQ29udGFpbmVyID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvcGx1Z2lucy9raWJhbmFfdXRpbHMvcHVibGljIik7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgiLi91dGlscyIpOwoKdmFyIF9tZXRhID0gcmVxdWlyZSgiLi4vLi4vLi4vbWV0YSIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX21hcGJveEdsQ3NwID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJtYXBib3gtZ2wvZGlzdC9tYXBib3gtZ2wtY3NwIikpOwoKdmFyIF9tYXBib3hHbENzcFdvcmtlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiISFmaWxlLWxvYWRlciFtYXBib3gtZ2wvZGlzdC9tYXBib3gtZ2wtY3NwLXdvcmtlciIpKTsKCnZhciBfbWFwYm94R2xSdGxUZXh0TWluID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIhIWZpbGUtbG9hZGVyIUBtYXBib3gvbWFwYm94LWdsLXJ0bC10ZXh0L21hcGJveC1nbC1ydGwtdGV4dC5taW4uanMiKSk7Cgp2YXIgX2Nocm9tZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgidWkvY2hyb21lIikpOwoKdmFyIF9tYWtpID0gcmVxdWlyZSgiQGVsYXN0aWMvbWFraSIpOwoKdmFyIF9zcHJpdGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBlbGFzdGljL21ha2kvZGlzdC9zcHJpdGVAMS5wbmciKSk7Cgp2YXIgX3Nwcml0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBlbGFzdGljL21ha2kvZGlzdC9zcHJpdGVAMi5wbmciKSk7Cgp2YXIgX2RyYXdfY29udHJvbCA9IHJlcXVpcmUoIi4vZHJhd19jb250cm9sIik7Cgp2YXIgX3Rvb2x0aXBfY29udHJvbCA9IHJlcXVpcmUoIi4vdG9vbHRpcF9jb250cm9sIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCl9tYXBib3hHbENzcC5kZWZhdWx0LndvcmtlclVybCA9IF9tYXBib3hHbENzcFdvcmtlci5kZWZhdWx0OwoKX21hcGJveEdsQ3NwLmRlZmF1bHQuc2V0UlRMVGV4dFBsdWdpbihfbWFwYm94R2xSdGxUZXh0TWluLmRlZmF1bHQpOwoKdmFyIE1CTWFwQ29udGFpbmVyID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkgewogIF9pbmhlcml0cyhNQk1hcENvbnRhaW5lciwgX1JlYWN0JENvbXBvbmVudCk7CgogIGZ1bmN0aW9uIE1CTWFwQ29udGFpbmVyKCkgewogICAgdmFyIF9nZXRQcm90b3R5cGVPZjI7CgogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNQk1hcENvbnRhaW5lcik7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX2dldFByb3RvdHlwZU9mMiA9IF9nZXRQcm90b3R5cGVPZihNQk1hcENvbnRhaW5lcikpLmNhbGwuYXBwbHkoX2dldFByb3RvdHlwZU9mMiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInN0YXRlIiwgewogICAgICBwcmV2TGF5ZXJMaXN0OiB1bmRlZmluZWQsCiAgICAgIGhhc1N5bmNlZExheWVyTGlzdDogZmFsc2UsCiAgICAgIG1iTWFwOiB1bmRlZmluZWQKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9kZWJvdW5jZWRTeW5jIiwgX2xvZGFzaC5kZWZhdWx0LmRlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKF90aGlzLl9pc01vdW50ZWQpIHsKICAgICAgICBpZiAoIV90aGlzLnN0YXRlLmhhc1N5bmNlZExheWVyTGlzdCkgewogICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICBoYXNTeW5jZWRMYXllckxpc3Q6IHRydWUKICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuX3N5bmNNYk1hcFdpdGhMYXllckxpc3QoKTsKCiAgICAgICAgICAgIF90aGlzLl9zeW5jTWJNYXBXaXRoSW5zcGVjdG9yKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIDI1NikpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9zeW5jTWJNYXBXaXRoTWFwU3RhdGUiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLAogICAgICAgICAgaXNNYXBSZWFkeSA9IF90aGlzJHByb3BzLmlzTWFwUmVhZHksCiAgICAgICAgICBnb3RvID0gX3RoaXMkcHJvcHMuZ290bywKICAgICAgICAgIGNsZWFyR290byA9IF90aGlzJHByb3BzLmNsZWFyR290bzsKCiAgICAgIGlmICghaXNNYXBSZWFkeSB8fCAhZ290bykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY2xlYXJHb3RvKCk7CgogICAgICBpZiAoZ290by5ib3VuZHMpIHsKICAgICAgICAvL2NsYW1waW5nIG90IC04OS84OSBsYXRpdHVkZXMgc2luY2UgTWFwYm94Z2wgZG9lcyBub3Qgc2VlbSB0byBoYW5kbGUgYm91bmRzIHRoYXQgY29udGFpbiB0aGUgcG9sZXMgKGxvZ3MgZXJyb3JzIHRvIHRoZSBjb25zb2xlIHdoZW4gdXNpbmcgLTkwLzkwKQogICAgICAgIHZhciBsbkxhdEJvdW5kcyA9IG5ldyBfbWFwYm94R2xDc3AuZGVmYXVsdC5MbmdMYXRCb3VuZHMobmV3IF9tYXBib3hHbENzcC5kZWZhdWx0LkxuZ0xhdChjbGFtcChnb3RvLmJvdW5kcy5taW5fbG9uLCAtMTgwLCAxODApLCBjbGFtcChnb3RvLmJvdW5kcy5taW5fbGF0LCAtODksIDg5KSksIG5ldyBfbWFwYm94R2xDc3AuZGVmYXVsdC5MbmdMYXQoY2xhbXAoZ290by5ib3VuZHMubWF4X2xvbiwgLTE4MCwgMTgwKSwgY2xhbXAoZ290by5ib3VuZHMubWF4X2xhdCwgLTg5LCA4OSkpKTsgLy9tYXhab29tIGVuc3VyZSB3ZSdyZSBub3Qgem9vbWluZyBpbiB0b28gZmFyIG9uIHNpbmdsZSBwb2ludHMgb3Igc21hbGwgc2hhcGVzCiAgICAgICAgLy90aGUgcGFkZGluZyBpcyB0byBhdm9pZCB0b28gdGlnaHQgb2YgYSBmaXQgYXJvdW5kIGVkZ2VzCgogICAgICAgIF90aGlzLnN0YXRlLm1iTWFwLmZpdEJvdW5kcyhsbkxhdEJvdW5kcywgewogICAgICAgICAgbWF4Wm9vbTogMTcsCiAgICAgICAgICBwYWRkaW5nOiAxNgogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGdvdG8uY2VudGVyKSB7CiAgICAgICAgX3RoaXMuc3RhdGUubWJNYXAuc2V0Wm9vbShnb3RvLmNlbnRlci56b29tKTsKCiAgICAgICAgX3RoaXMuc3RhdGUubWJNYXAuc2V0Q2VudGVyKHsKICAgICAgICAgIGxuZzogZ290by5jZW50ZXIubG9uLAogICAgICAgICAgbGF0OiBnb3RvLmNlbnRlci5sYXQKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX3N5bmNNYk1hcFdpdGhMYXllckxpc3QiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghX3RoaXMucHJvcHMuaXNNYXBSZWFkeSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgKDAsIF91dGlscy5yZW1vdmVPcnBoYW5lZFNvdXJjZXNBbmRMYXllcnMpKF90aGlzLnN0YXRlLm1iTWFwLCBfdGhpcy5wcm9wcy5sYXllckxpc3QpOwoKICAgICAgX3RoaXMucHJvcHMubGF5ZXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7CiAgICAgICAgcmV0dXJuIGxheWVyLnN5bmNMYXllcldpdGhNQihfdGhpcy5zdGF0ZS5tYk1hcCk7CiAgICAgIH0pOwoKICAgICAgKDAsIF91dGlscy5zeW5jTGF5ZXJPcmRlckZvclNpbmdsZUxheWVyKShfdGhpcy5zdGF0ZS5tYk1hcCwgX3RoaXMucHJvcHMubGF5ZXJMaXN0KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9zeW5jTWJNYXBXaXRoSW5zcGVjdG9yIiwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoIV90aGlzLnByb3BzLmlzTWFwUmVhZHkgfHwgIV90aGlzLnByb3BzLmluc3BlY3RvckFkYXB0ZXJzLm1hcCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHN0YXRzID0gewogICAgICAgIGNlbnRlcjogX3RoaXMuc3RhdGUubWJNYXAuZ2V0Q2VudGVyKCkudG9BcnJheSgpLAogICAgICAgIHpvb206IF90aGlzLnN0YXRlLm1iTWFwLmdldFpvb20oKQogICAgICB9OwoKICAgICAgX3RoaXMucHJvcHMuaW5zcGVjdG9yQWRhcHRlcnMubWFwLnNldE1hcFN0YXRlKHsKICAgICAgICBzdGF0czogc3RhdHMsCiAgICAgICAgc3R5bGU6IF90aGlzLnN0YXRlLm1iTWFwLmdldFN0eWxlKCkKICAgICAgfSk7CiAgICB9KTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoTUJNYXBDb250YWluZXIsIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHRoaXMuX2luaXRpYWxpemVNYXAoKTsKCiAgICAgIHRoaXMuX2lzTW91bnRlZCA9IHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkVXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7CiAgICAgIGlmICh0aGlzLnN0YXRlLm1iTWFwKSB7CiAgICAgICAgLy8gZG8gbm90IGRlYm91bmNlIHN5bmNpbmcgb2YgbWFwLXN0YXRlCiAgICAgICAgdGhpcy5fc3luY01iTWFwV2l0aE1hcFN0YXRlKCk7CgogICAgICAgIHRoaXMuX2RlYm91bmNlZFN5bmMoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgdGhpcy5faXNNb3VudGVkID0gZmFsc2U7CgogICAgICBpZiAodGhpcy5fY2hlY2tlcikgewogICAgICAgIHRoaXMuX2NoZWNrZXIuZGVzdHJveSgpOwogICAgICB9CgogICAgICBpZiAodGhpcy5zdGF0ZS5tYk1hcCkgewogICAgICAgIHRoaXMuc3RhdGUubWJNYXAucmVtb3ZlKCk7CiAgICAgICAgdGhpcy5zdGF0ZS5tYk1hcCA9IG51bGw7CiAgICAgIH0KCiAgICAgIHRoaXMucHJvcHMub25NYXBEZXN0cm95ZWQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZ2V0TWFwU3RhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRNYXBTdGF0ZSgpIHsKICAgICAgdmFyIHpvb20gPSB0aGlzLnN0YXRlLm1iTWFwLmdldFpvb20oKTsKICAgICAgdmFyIG1iQ2VudGVyID0gdGhpcy5zdGF0ZS5tYk1hcC5nZXRDZW50ZXIoKTsKICAgICAgdmFyIG1iQm91bmRzID0gdGhpcy5zdGF0ZS5tYk1hcC5nZXRCb3VuZHMoKTsKICAgICAgcmV0dXJuIHsKICAgICAgICB6b29tOiBfbG9kYXNoLmRlZmF1bHQucm91bmQoem9vbSwgX2NvbnN0YW50cy5aT09NX1BSRUNJU0lPTiksCiAgICAgICAgY2VudGVyOiB7CiAgICAgICAgICBsb246IF9sb2Rhc2guZGVmYXVsdC5yb3VuZChtYkNlbnRlci5sbmcsIF9jb25zdGFudHMuREVDSU1BTF9ERUdSRUVTX1BSRUNJU0lPTiksCiAgICAgICAgICBsYXQ6IF9sb2Rhc2guZGVmYXVsdC5yb3VuZChtYkNlbnRlci5sYXQsIF9jb25zdGFudHMuREVDSU1BTF9ERUdSRUVTX1BSRUNJU0lPTikKICAgICAgICB9LAogICAgICAgIGV4dGVudDogewogICAgICAgICAgbWluTG9uOiBfbG9kYXNoLmRlZmF1bHQucm91bmQobWJCb3VuZHMuZ2V0V2VzdCgpLCBfY29uc3RhbnRzLkRFQ0lNQUxfREVHUkVFU19QUkVDSVNJT04pLAogICAgICAgICAgbWluTGF0OiBfbG9kYXNoLmRlZmF1bHQucm91bmQobWJCb3VuZHMuZ2V0U291dGgoKSwgX2NvbnN0YW50cy5ERUNJTUFMX0RFR1JFRVNfUFJFQ0lTSU9OKSwKICAgICAgICAgIG1heExvbjogX2xvZGFzaC5kZWZhdWx0LnJvdW5kKG1iQm91bmRzLmdldEVhc3QoKSwgX2NvbnN0YW50cy5ERUNJTUFMX0RFR1JFRVNfUFJFQ0lTSU9OKSwKICAgICAgICAgIG1heExhdDogX2xvZGFzaC5kZWZhdWx0LnJvdW5kKG1iQm91bmRzLmdldE5vcnRoKCksIF9jb25zdGFudHMuREVDSU1BTF9ERUdSRUVTX1BSRUNJU0lPTikKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAiX2NyZWF0ZU1iTWFwSW5zdGFuY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVNYk1hcEluc3RhbmNlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBpbml0aWFsVmlldzsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY3JlYXRlTWJNYXBJbnN0YW5jZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaW5pdGlhbFZpZXcgPSB0aGlzLnByb3BzLmdvdG8gPyB0aGlzLnByb3BzLmdvdG8uY2VudGVyIDogbnVsbDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgdmFyIG1iU3R5bGUgPSB7CiAgICAgICAgICAgICAgICAgIHZlcnNpb246IDgsCiAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IHt9LAogICAgICAgICAgICAgICAgICBsYXllcnM6IFtdCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIGdseXBoVXJsID0gKDAsIF9tZXRhLmdldEdseXBoVXJsKSgpOwoKICAgICAgICAgICAgICAgIGlmIChnbHlwaFVybCkgewogICAgICAgICAgICAgICAgICBtYlN0eWxlLmdseXBocyA9IGdseXBoVXJsOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbkNvbnRyb2w6IGZhbHNlLAogICAgICAgICAgICAgICAgICBjb250YWluZXI6IF90aGlzMi5yZWZzLm1hcENvbnRhaW5lciwKICAgICAgICAgICAgICAgICAgc3R5bGU6IG1iU3R5bGUsCiAgICAgICAgICAgICAgICAgIHNjcm9sbFpvb206IF90aGlzMi5wcm9wcy5zY3JvbGxab29tLAogICAgICAgICAgICAgICAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IF9jaHJvbWUuZGVmYXVsdC5nZXRJbmplY3RlZCgncHJlc2VydmVEcmF3aW5nQnVmZmVyJywgZmFsc2UpLAogICAgICAgICAgICAgICAgICBpbnRlcmFjdGl2ZTogIV90aGlzMi5wcm9wcy5kaXNhYmxlSW50ZXJhY3RpdmUKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKGluaXRpYWxWaWV3KSB7CiAgICAgICAgICAgICAgICAgIG9wdGlvbnMuem9vbSA9IGluaXRpYWxWaWV3Lnpvb207CiAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY2VudGVyID0gewogICAgICAgICAgICAgICAgICAgIGxuZzogaW5pdGlhbFZpZXcubG9uLAogICAgICAgICAgICAgICAgICAgIGxhdDogaW5pdGlhbFZpZXcubGF0CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG1iTWFwID0gbmV3IF9tYXBib3hHbENzcC5kZWZhdWx0Lk1hcChvcHRpb25zKTsKICAgICAgICAgICAgICAgIG1iTWFwLmRyYWdSb3RhdGUuZGlzYWJsZSgpOwogICAgICAgICAgICAgICAgbWJNYXAudG91Y2hab29tUm90YXRlLmRpc2FibGVSb3RhdGlvbigpOwoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMyLnByb3BzLmRpc2FibGVJbnRlcmFjdGl2ZSkgewogICAgICAgICAgICAgICAgICBtYk1hcC5hZGRDb250cm9sKG5ldyBfbWFwYm94R2xDc3AuZGVmYXVsdC5OYXZpZ2F0aW9uQ29udHJvbCh7CiAgICAgICAgICAgICAgICAgICAgc2hvd0NvbXBhc3M6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pLCAndG9wLWxlZnQnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgZW1wdHlJbWFnZTsKICAgICAgICAgICAgICAgIG1iTWFwLm9uKCdzdHlsZWltYWdlbWlzc2luZycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlbXB0eUltYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgbWJNYXAuYWRkSW1hZ2UoZS5pZCwgZW1wdHlJbWFnZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWJNYXAub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGVtcHR5SW1hZ2UgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgICAgICAgICAgZW1wdHlJbWFnZS5zcmMgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FZQUFBQWZGY1NKQUFBQUMwbEVRVlFZVjJOZ0FBSUFBQVVBQWFyVnlGRUFBQUFBU1VWT1JLNUNZSUk9JzsKICAgICAgICAgICAgICAgICAgZW1wdHlJbWFnZS5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnOwogICAgICAgICAgICAgICAgICByZXNvbHZlKG1iTWFwKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2luaXRpYWxpemVNYXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9pbml0aWFsaXplTWFwKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBtYk1hcDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfaW5pdGlhbGl6ZU1hcCQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuX2NyZWF0ZU1iTWFwSW5zdGFuY2UoKSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgbWJNYXAgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNjsKICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZXRNYXBJbml0RXJyb3IoX2NvbnRleHQyLnQwLm1lc3NhZ2UpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzTW91bnRlZCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIG1iTWFwOiBtYk1hcAogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzMy5fbG9hZE1ha2lTcHJpdGVzKCk7CgogICAgICAgICAgICAgICAgX3RoaXMzLl9pbml0UmVzaXplckNoZWNrZXIoKTsKCiAgICAgICAgICAgICAgICBfdGhpczMuX3JlZ2lzdGVyTWFwRXZlbnRMaXN0ZW5lcnMoKTsKCiAgICAgICAgICAgICAgICBfdGhpczMucHJvcHMub25NYXBSZWFkeShfdGhpczMuX2dldE1hcFN0YXRlKCkpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMsIFtbMCwgNl1dKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfcmVnaXN0ZXJNYXBFdmVudExpc3RlbmVycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlZ2lzdGVyTWFwRXZlbnRMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgLy8gbW92ZWVuZCBjYWxsYmFjayBpcyBkZWJvdW5jZWQgdG8gYXZvaWQgdXBkYXRpbmcgbWFwIGV4dGVudCBzdGF0ZSB3aGlsZSBtYXAgZXh0ZW50IGlzIHN0aWxsIGNoYW5naW5nCiAgICAgIC8vIG1vdmVlbmQgaXMgZmlyZWQgd2hpbGUgdGhlIG1hcCBleHRlbnQgaXMgc3RpbGwgY2hhbmdpbmcgaW4gdGhlIGZvbGxvd2luZyBzY2VuYXJpb3MKICAgICAgLy8gMSkgRHVyaW5nIG9wZW5pbmcvY2xvc2luZyBvZiBsYXllciBkZXRhaWxzIHBhbmVsLCB0aGUgRVVJIGFuaW1hdGlvbiByZXN1bHRzIGluIDggbW92ZWVuZCBldmVudHMKICAgICAgLy8gMikgU2V0dGluZyBtYXAgem9vbSBhbmQgY2VudGVyIGZyb20gZ290byBpcyBkb25lIGluIDIgQVBJIGNhbGxzLCByZXN1bHRpbmcgaW4gMiBtb3ZlZW5kIGV2ZW50cwogICAgICB0aGlzLnN0YXRlLm1iTWFwLm9uKCdtb3ZlZW5kJywgX2xvZGFzaC5kZWZhdWx0LmRlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQucHJvcHMuZXh0ZW50Q2hhbmdlZChfdGhpczQuX2dldE1hcFN0YXRlKCkpOwogICAgICB9LCAxMDApKTsgLy8gQXR0YWNoIGV2ZW50IG9ubHkgaWYgdmlldyBjb250cm9sIGlzIHZpc2libGUsIHdoaWNoIHNob3dzIGxhdC9sb24KCiAgICAgIGlmICghdGhpcy5wcm9wcy5oaWRlVmlld0NvbnRyb2wpIHsKICAgICAgICB2YXIgdGhyb3R0bGVkU2V0TW91c2VDb29yZGluYXRlcyA9IF9sb2Rhc2guZGVmYXVsdC50aHJvdHRsZShmdW5jdGlvbiAoZSkgewogICAgICAgICAgX3RoaXM0LnByb3BzLnNldE1vdXNlQ29vcmRpbmF0ZXMoewogICAgICAgICAgICBsYXQ6IGUubG5nTGF0LmxhdCwKICAgICAgICAgICAgbG9uOiBlLmxuZ0xhdC5sbmcKICAgICAgICAgIH0pOwogICAgICAgIH0sIDEwMCk7CgogICAgICAgIHRoaXMuc3RhdGUubWJNYXAub24oJ21vdXNlbW92ZScsIHRocm90dGxlZFNldE1vdXNlQ29vcmRpbmF0ZXMpOwogICAgICAgIHRoaXMuc3RhdGUubWJNYXAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhyb3R0bGVkU2V0TW91c2VDb29yZGluYXRlcy5jYW5jZWwoKTsgLy8gY2FuY2VsIGFueSBkZWxheWVkIHNldE1vdXNlQ29vcmRpbmF0ZXMgaW52b2NhdGlvbnMKCiAgICAgICAgICBfdGhpczQucHJvcHMuY2xlYXJNb3VzZUNvb3JkaW5hdGVzKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaW5pdFJlc2l6ZXJDaGVja2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaW5pdFJlc2l6ZXJDaGVja2VyKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuX2NoZWNrZXIgPSBuZXcgX3B1YmxpYy5SZXNpemVDaGVja2VyKHRoaXMucmVmcy5tYXBDb250YWluZXIpOwoKICAgICAgdGhpcy5fY2hlY2tlci5vbigncmVzaXplJywgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS5zdGF0ZS5tYk1hcC5yZXNpemUoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2xvYWRNYWtpU3ByaXRlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2xvYWRNYWtpU3ByaXRlcygpIHsKICAgICAgdmFyIHNwcml0ZXMgPSAoMCwgX21ldGEuaXNSZXRpbmEpKCkgPyBfc3ByaXRlMi5kZWZhdWx0IDogX3Nwcml0ZS5kZWZhdWx0OwogICAgICB2YXIganNvbiA9ICgwLCBfbWV0YS5pc1JldGluYSkoKSA/IF9tYWtpLnNwcml0ZXNoZWV0WzJdIDogX21ha2kuc3ByaXRlc2hlZXRbMV07CiAgICAgICgwLCBfdXRpbHMuYWRkU3ByaXRlc2hlZXRUb01hcCkoanNvbiwgc3ByaXRlcywgdGhpcy5zdGF0ZS5tYk1hcCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBkcmF3Q29udHJvbDsKICAgICAgdmFyIHRvb2x0aXBDb250cm9sOwoKICAgICAgaWYgKHRoaXMuc3RhdGUubWJNYXApIHsKICAgICAgICBkcmF3Q29udHJvbCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2RyYXdfY29udHJvbC5EcmF3Q29udHJvbCwgewogICAgICAgICAgbWJNYXA6IHRoaXMuc3RhdGUubWJNYXAsCiAgICAgICAgICBhZGRGaWx0ZXJzOiB0aGlzLnByb3BzLmFkZEZpbHRlcnMKICAgICAgICB9KTsKICAgICAgICB0b29sdGlwQ29udHJvbCA9ICF0aGlzLnByb3BzLmRpc2FibGVUb29sdGlwQ29udHJvbCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3Rvb2x0aXBfY29udHJvbC5Ub29sdGlwQ29udHJvbCwgewogICAgICAgICAgbWJNYXA6IHRoaXMuc3RhdGUubWJNYXAsCiAgICAgICAgICBhZGRGaWx0ZXJzOiB0aGlzLnByb3BzLmFkZEZpbHRlcnMsCiAgICAgICAgICBnZW9GaWVsZHM6IHRoaXMucHJvcHMuZ2VvRmllbGRzLAogICAgICAgICAgcmVuZGVyVG9vbHRpcENvbnRlbnQ6IHRoaXMucHJvcHMucmVuZGVyVG9vbHRpcENvbnRlbnQKICAgICAgICB9KSA6IG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgaWQ6ICJtYXBDb250YWluZXIiLAogICAgICAgIGNsYXNzTmFtZTogIm1hcENvbnRhaW5lciIsCiAgICAgICAgcmVmOiAibWFwQ29udGFpbmVyIiwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAibWFwQ29udGFpbmVyIgogICAgICB9LCBkcmF3Q29udHJvbCwgdG9vbHRpcENvbnRyb2wpOwogICAgfQogIH1dLCBbewogICAga2V5OiAiZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHsKICAgICAgdmFyIG5leHRMYXllckxpc3QgPSBuZXh0UHJvcHMubGF5ZXJMaXN0OwoKICAgICAgaWYgKG5leHRMYXllckxpc3QgIT09IHByZXZTdGF0ZS5wcmV2TGF5ZXJMaXN0KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHByZXZMYXllckxpc3Q6IG5leHRMYXllckxpc3QsCiAgICAgICAgICBoYXNTeW5jZWRMYXllckxpc3Q6IGZhbHNlCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTUJNYXBDb250YWluZXI7Cn0oX3JlYWN0LmRlZmF1bHQuQ29tcG9uZW50KTsKCmV4cG9ydHMuTUJNYXBDb250YWluZXIgPSBNQk1hcENvbnRhaW5lcjsKCmZ1bmN0aW9uIGNsYW1wKHZhbCwgbWluLCBtYXgpIHsKICBpZiAodmFsID4gbWF4KSB2YWwgPSBtYXg7ZWxzZSBpZiAodmFsIDwgbWluKSB2YWwgPSBtaW47CiAgcmV0dXJuIHZhbDsKfQ=="},null]}