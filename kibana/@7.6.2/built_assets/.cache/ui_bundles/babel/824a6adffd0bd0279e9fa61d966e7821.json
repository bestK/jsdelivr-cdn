{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/snapshot_restore/public/app/components/restore_snapshot_form/steps/step_logistics.js","dependencies":[{"path":"x-pack/legacy/plugins/snapshot_restore/public/app/components/restore_snapshot_form/steps/step_logistics.js","mtime":1585205048215},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlJlc3RvcmVTbmFwc2hvdFN0ZXBMb2dpc3RpY3MgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9kb2N1bWVudGF0aW9uID0gcmVxdWlyZSgiLi4vLi4vLi4vc2VydmljZXMvZG9jdW1lbnRhdGlvbiIpOwoKdmFyIF9pbmRleCA9IHJlcXVpcmUoIi4uLy4uLy4uL2luZGV4Iik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCnZhciBSZXN0b3JlU25hcHNob3RTdGVwTG9naXN0aWNzID0gZnVuY3Rpb24gUmVzdG9yZVNuYXBzaG90U3RlcExvZ2lzdGljcyhfcmVmKSB7CiAgdmFyIHNuYXBzaG90RGV0YWlscyA9IF9yZWYuc25hcHNob3REZXRhaWxzLAogICAgICByZXN0b3JlU2V0dGluZ3MgPSBfcmVmLnJlc3RvcmVTZXR0aW5ncywKICAgICAgdXBkYXRlUmVzdG9yZVNldHRpbmdzID0gX3JlZi51cGRhdGVSZXN0b3JlU2V0dGluZ3MsCiAgICAgIGVycm9ycyA9IF9yZWYuZXJyb3JzOwoKICB2YXIgX3VzZUFwcERlcGVuZGVuY2llcyA9ICgwLCBfaW5kZXgudXNlQXBwRGVwZW5kZW5jaWVzKSgpLAogICAgICBpMThuID0gX3VzZUFwcERlcGVuZGVuY2llcy5jb3JlLmkxOG47CgogIHZhciBGb3JtYXR0ZWRNZXNzYWdlID0gaTE4bi5Gb3JtYXR0ZWRNZXNzYWdlOwogIHZhciBzbmFwc2hvdEluZGljZXMgPSBzbmFwc2hvdERldGFpbHMuaW5kaWNlcywKICAgICAgc25hcHNob3RJbmNsdWRlR2xvYmFsU3RhdGUgPSBzbmFwc2hvdERldGFpbHMuaW5jbHVkZUdsb2JhbFN0YXRlOwogIHZhciByZXN0b3JlSW5kaWNlcyA9IHJlc3RvcmVTZXR0aW5ncy5pbmRpY2VzLAogICAgICByZW5hbWVQYXR0ZXJuID0gcmVzdG9yZVNldHRpbmdzLnJlbmFtZVBhdHRlcm4sCiAgICAgIHJlbmFtZVJlcGxhY2VtZW50ID0gcmVzdG9yZVNldHRpbmdzLnJlbmFtZVJlcGxhY2VtZW50LAogICAgICBwYXJ0aWFsID0gcmVzdG9yZVNldHRpbmdzLnBhcnRpYWwsCiAgICAgIGluY2x1ZGVHbG9iYWxTdGF0ZSA9IHJlc3RvcmVTZXR0aW5ncy5pbmNsdWRlR2xvYmFsU3RhdGU7IC8vIFN0YXRlcyBmb3IgY2hvb3NpbmcgYWxsIGluZGljZXMsIG9yIGEgc3Vic2V0LCBpbmNsdWRpbmcgY2FjaGluZyBwcmV2aW91c2x5IGNob3NlbiBzdWJzZXQgbGlzdAoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoIUJvb2xlYW4ocmVzdG9yZUluZGljZXMpKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGlzQWxsSW5kaWNlcyA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldElzQWxsSW5kaWNlcyA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoc25hcHNob3RJbmRpY2VzLm1hcChmdW5jdGlvbiAoaW5kZXgpIHsKICAgIHJldHVybiB7CiAgICAgIGxhYmVsOiBpbmRleCwKICAgICAgY2hlY2tlZDogaXNBbGxJbmRpY2VzIHx8IC8vIElmIGluZGljZXMgaXMgYSBzdHJpbmcsIHdlIGRlZmF1bHQgdG8gY3VzdG9tIGlucHV0IG1vZGUsIHNvIHdlIG1hcmsgaW5kaXZpZHVhbCBpbmRpY2VzCiAgICAgIC8vIGFzIHNlbGVjdGVkIGlmIHVzZXIgZ29lcyBiYWNrIHRvIGxpc3QgbW9kZQogICAgICB0eXBlb2YgcmVzdG9yZUluZGljZXMgPT09ICdzdHJpbmcnIHx8IEFycmF5LmlzQXJyYXkocmVzdG9yZUluZGljZXMpICYmIHJlc3RvcmVJbmRpY2VzLmluY2x1ZGVzKGluZGV4KSA/ICdvbicgOiB1bmRlZmluZWQKICAgIH07CiAgfSkpLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIGluZGljZXNPcHRpb25zID0gX3VzZVN0YXRlNFswXSwKICAgICAgc2V0SW5kaWNlc09wdGlvbnMgPSBfdXNlU3RhdGU0WzFdOyAvLyBTdGF0ZSBmb3IgdXNpbmcgc2VsZWN0YWJsZSBpbmRpY2VzIGxpc3Qgb3IgY3VzdG9tIHBhdHRlcm5zCiAgLy8gVXNlcnMgd2l0aCBtb3JlIHRoYW4gMTAwIGluZGljZXMgd2lsbCBwcm9iYWJseSB3YW50IHRvIHVzZSBhbiBpbmRleCBwYXR0ZXJuIHRvIHNlbGVjdAogIC8vIHRoZW0gaW5zdGVhZCwgc28gd2UnbGwgZGVmYXVsdCB0byBzaG93aW5nIHRoZW0gdGhlIGluZGV4IHBhdHRlcm4gaW5wdXQuCgoKICB2YXIgX3VzZVN0YXRlNSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHR5cGVvZiByZXN0b3JlSW5kaWNlcyA9PT0gJ3N0cmluZycgfHwgc25hcHNob3RJbmRpY2VzLmxlbmd0aCA+IDEwMCA/ICdjdXN0b20nIDogJ2xpc3QnKSwKICAgICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLAogICAgICBzZWxlY3RJbmRpY2VzTW9kZSA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldFNlbGVjdEluZGljZXNNb2RlID0gX3VzZVN0YXRlNlsxXTsgLy8gU3RhdGUgZm9yIGN1c3RvbSBwYXR0ZXJucwoKCiAgdmFyIF91c2VTdGF0ZTcgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh0eXBlb2YgcmVzdG9yZUluZGljZXMgPT09ICdzdHJpbmcnID8gcmVzdG9yZUluZGljZXMuc3BsaXQoJywnKSA6IFtdKSwKICAgICAgX3VzZVN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTcsIDIpLAogICAgICByZXN0b3JlSW5kZXhQYXR0ZXJucyA9IF91c2VTdGF0ZThbMF0sCiAgICAgIHNldFJlc3RvcmVJbmRleFBhdHRlcm5zID0gX3VzZVN0YXRlOFsxXTsgLy8gU3RhdGUgZm9yIHNldHRpbmcgcmVuYW1pbmcgaW5kaWNlcyBwYXR0ZXJucwoKCiAgdmFyIF91c2VTdGF0ZTkgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShCb29sZWFuKHJlbmFtZVBhdHRlcm4gfHwgcmVuYW1lUmVwbGFjZW1lbnQpKSwKICAgICAgX3VzZVN0YXRlMTAgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU5LCAyKSwKICAgICAgaXNSZW5hbWluZ0luZGljZXMgPSBfdXNlU3RhdGUxMFswXSwKICAgICAgc2V0SXNSZW5hbWluZ0luZGljZXMgPSBfdXNlU3RhdGUxMFsxXTsgLy8gQ2FjaGluZyBzdGF0ZSBmb3IgdG9nZ2xhYmxlIHNldHRpbmdzCgoKICB2YXIgX3VzZVN0YXRlMTEgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh7CiAgICBpbmRpY2VzOiBfdG9Db25zdW1hYmxlQXJyYXkoc25hcHNob3RJbmRpY2VzKSwKICAgIHJlbmFtZVBhdHRlcm46ICcnLAogICAgcmVuYW1lUmVwbGFjZW1lbnQ6ICcnCiAgfSksCiAgICAgIF91c2VTdGF0ZTEyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTEsIDIpLAogICAgICBjYWNoZWRSZXN0b3JlU2V0dGluZ3MgPSBfdXNlU3RhdGUxMlswXSwKICAgICAgc2V0Q2FjaGVkUmVzdG9yZVNldHRpbmdzID0gX3VzZVN0YXRlMTJbMV07CgogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6ICJzbmFwc2hvdFJlc3RvcmVfX3Jlc3RvcmVGb3JtX19zdGVwTG9naXN0aWNzIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIGp1c3RpZnlDb250ZW50OiAic3BhY2VCZXR3ZWVuIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgZ3JvdzogZmFsc2UKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGl0bGUsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgyIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5yZXN0b3JlRm9ybS5zdGVwTG9naXN0aWNzVGl0bGUiLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJSZXN0b3JlIGRldGFpbHMiCiAgfSkpKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgZ3JvdzogZmFsc2UKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uRW1wdHksIHsKICAgIHNpemU6ICJzIiwKICAgIGZsdXNoOiAicmlnaHQiLAogICAgaHJlZjogX2RvY3VtZW50YXRpb24uZG9jdW1lbnRhdGlvbkxpbmtzU2VydmljZS5nZXRSZXN0b3JlRG9jVXJsKCksCiAgICB0YXJnZXQ6ICJfYmxhbmsiLAogICAgaWNvblR5cGU6ICJoZWxwIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucmVzdG9yZUZvcm0uc3RlcExvZ2lzdGljcy5kb2NzQnV0dG9uTGFiZWwiLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJTbmFwc2hvdCBhbmQgUmVzdG9yZSBkb2NzIgogIH0pKSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICBzaXplOiAibCIKICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aURlc2NyaWJlZEZvcm1Hcm91cCwgewogICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUaXRsZSwgewogICAgICBzaXplOiAicyIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgzIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MuaW5kaWNlc1RpdGxlIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJJbmRpY2VzIgogICAgfSkpKSwKICAgIGRlc2NyaXB0aW9uOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucmVzdG9yZUZvcm0uc3RlcExvZ2lzdGljcy5pbmRpY2VzRGVzY3JpcHRpb24iLAogICAgICBkZWZhdWx0TWVzc2FnZTogIkNyZWF0ZXMgbmV3IGluZGljZXMgaWYgdGhleSBkb25cdTIwMTl0IGV4aXN0LiBSZXN0b3JlcyBleGlzdGluZyBpbmRpY2VzIGlmIHRoZXkgYXJlIGNsb3NlZCBhbmQgaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2Ygc2hhcmRzIGFzIHRoZSBzbmFwc2hvdCBpbmRleC4iCiAgICB9KSwKICAgIGlkQXJpYTogInN0ZXBMb2dpc3RpY3NJbmRpY2VzRGVzY3JpcHRpb24iLAogICAgZnVsbFdpZHRoOiB0cnVlCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGhhc0VtcHR5TGFiZWxTcGFjZTogdHJ1ZSwKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIGRlc2NyaWJlZEJ5SWRzOiBbJ3N0ZXBMb2dpc3RpY3NJbmRpY2VzRGVzY3JpcHRpb24nXQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3dpdGNoLCB7CiAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MuYWxsSW5kaWNlc0xhYmVsIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBbGwgaW5kaWNlcywgaW5jbHVkaW5nIHN5c3RlbSBpbmRpY2VzIgogICAgfSksCiAgICBjaGVja2VkOiBpc0FsbEluZGljZXMsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICB2YXIgaXNDaGVja2VkID0gZS50YXJnZXQuY2hlY2tlZDsKICAgICAgc2V0SXNBbGxJbmRpY2VzKGlzQ2hlY2tlZCk7CgogICAgICBpZiAoaXNDaGVja2VkKSB7CiAgICAgICAgdXBkYXRlUmVzdG9yZVNldHRpbmdzKHsKICAgICAgICAgIGluZGljZXM6IHVuZGVmaW5lZAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHVwZGF0ZVJlc3RvcmVTZXR0aW5ncyh7CiAgICAgICAgICBpbmRpY2VzOiBzZWxlY3RJbmRpY2VzTW9kZSA9PT0gJ2N1c3RvbScgPyByZXN0b3JlSW5kZXhQYXR0ZXJucy5qb2luKCcsJykgOiBfdG9Db25zdW1hYmxlQXJyYXkoY2FjaGVkUmVzdG9yZVNldHRpbmdzLmluZGljZXMgfHwgW10pCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9KSwgaXNBbGxJbmRpY2VzID8gbnVsbCA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICBzaXplOiAibSIKICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGNsYXNzTmFtZTogInNuYXBzaG90UmVzdG9yZV9fcmVzdG9yZUZvcm1fX3N0ZXBMb2dpc3RpY3NfX2luZGljZXNGaWVsZFdyYXBwZXIiLAogICAgbGFiZWw6IHNlbGVjdEluZGljZXNNb2RlID09PSAnbGlzdCcgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgIGp1c3RpZnlDb250ZW50OiAic3BhY2VCZXR3ZWVuIgogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgIGdyb3c6IGZhbHNlCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucmVzdG9yZUZvcm0uc3RlcExvZ2lzdGljcy5zZWxlY3RJbmRpY2VzTGFiZWwiLAogICAgICBkZWZhdWx0TWVzc2FnZTogIlNlbGVjdCBpbmRpY2VzIgogICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgZ3JvdzogZmFsc2UKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMaW5rLCB7CiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgc2V0U2VsZWN0SW5kaWNlc01vZGUoJ2N1c3RvbScpOwogICAgICAgIHVwZGF0ZVJlc3RvcmVTZXR0aW5ncyh7CiAgICAgICAgICBpbmRpY2VzOiByZXN0b3JlSW5kZXhQYXR0ZXJucy5qb2luKCcsJykKICAgICAgICB9KTsKICAgICAgfQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MuaW5kaWNlc1RvZ2dsZUN1c3RvbUxpbmsiLAogICAgICBkZWZhdWx0TWVzc2FnZTogIlVzZSBpbmRleCBwYXR0ZXJucyIKICAgIH0pKSkpIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICBqdXN0aWZ5Q29udGVudDogInNwYWNlQmV0d2VlbiIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICBncm93OiBmYWxzZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MuaW5kaWNlc1BhdHRlcm5MYWJlbCIsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSW5kZXggcGF0dGVybnMiCiAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICBncm93OiBmYWxzZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxpbmssIHsKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICBzZXRTZWxlY3RJbmRpY2VzTW9kZSgnbGlzdCcpOwogICAgICAgIHVwZGF0ZVJlc3RvcmVTZXR0aW5ncyh7CiAgICAgICAgICBpbmRpY2VzOiBjYWNoZWRSZXN0b3JlU2V0dGluZ3MuaW5kaWNlcwogICAgICAgIH0pOwogICAgICB9CiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucmVzdG9yZUZvcm0uc3RlcExvZ2lzdGljcy5pbmRpY2VzVG9nZ2xlTGlzdExpbmsiLAogICAgICBkZWZhdWx0TWVzc2FnZTogIlNlbGVjdCBpbmRpY2VzIgogICAgfSkpKSksCiAgICBoZWxwVGV4dDogc2VsZWN0SW5kaWNlc01vZGUgPT09ICdsaXN0JyA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5yZXN0b3JlRm9ybS5zdGVwTG9naXN0aWNzLnNlbGVjdEluZGljZXNIZWxwVGV4dCIsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAie2NvdW50fSB7Y291bnQsIHBsdXJhbCwgb25lIHtpbmRleH0gb3RoZXIge2luZGljZXN9fSB3aWxsIGJlIHJlc3RvcmVkLiB7c2VsZWN0T3JEZXNlbGVjdEFsbExpbmt9IiwKICAgICAgdmFsdWVzOiB7CiAgICAgICAgY291bnQ6IHJlc3RvcmVJbmRpY2VzICYmIHJlc3RvcmVJbmRpY2VzLmxlbmd0aCwKICAgICAgICBzZWxlY3RPckRlc2VsZWN0QWxsTGluazogcmVzdG9yZUluZGljZXMgJiYgcmVzdG9yZUluZGljZXMubGVuZ3RoID4gMCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMaW5rLCB7CiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAvLyBUT0RPOiBDaGFuZ2UgdGhpcyB0byBzZXRJbmRpY2VzT3B0aW9ucygpIHdoZW4gaHR0cHM6Ly9naXRodWIuY29tL2VsYXN0aWMvZXVpL2lzc3Vlcy8yMDcxIGlzIGZpeGVkCiAgICAgICAgICAgIGluZGljZXNPcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKG9wdGlvbikgewogICAgICAgICAgICAgIG9wdGlvbi5jaGVja2VkID0gdW5kZWZpbmVkOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdXBkYXRlUmVzdG9yZVNldHRpbmdzKHsKICAgICAgICAgICAgICBpbmRpY2VzOiBbXQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2V0Q2FjaGVkUmVzdG9yZVNldHRpbmdzKF9vYmplY3RTcHJlYWQoe30sIGNhY2hlZFJlc3RvcmVTZXR0aW5ncywgewogICAgICAgICAgICAgIGluZGljZXM6IFtdCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MuZGVzZWxlY3RBbGxJbmRpY2VzTGluayIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRlc2VsZWN0IGFsbCIKICAgICAgICB9KSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgLy8gVE9ETzogQ2hhbmdlIHRoaXMgdG8gc2V0SW5kaWNlc09wdGlvbnMoKSB3aGVuIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGFzdGljL2V1aS9pc3N1ZXMvMjA3MSBpcyBmaXhlZAogICAgICAgICAgICBpbmRpY2VzT3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChvcHRpb24pIHsKICAgICAgICAgICAgICBvcHRpb24uY2hlY2tlZCA9ICdvbic7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB1cGRhdGVSZXN0b3JlU2V0dGluZ3MoewogICAgICAgICAgICAgIGluZGljZXM6IF90b0NvbnN1bWFibGVBcnJheShzbmFwc2hvdEluZGljZXMpCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzZXRDYWNoZWRSZXN0b3JlU2V0dGluZ3MoX29iamVjdFNwcmVhZCh7fSwgY2FjaGVkUmVzdG9yZVNldHRpbmdzLCB7CiAgICAgICAgICAgICAgaW5kaWNlczogX3RvQ29uc3VtYWJsZUFycmF5KHNuYXBzaG90SW5kaWNlcykKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfQogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucmVzdG9yZUZvcm0uc3RlcExvZ2lzdGljcy5zZWxlY3RBbGxJbmRpY2VzTGluayIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNlbGVjdCBhbGwiCiAgICAgICAgfSkpCiAgICAgIH0KICAgIH0pIDogbnVsbCwKICAgIGlzSW52YWxpZDogQm9vbGVhbihlcnJvcnMuaW5kaWNlcyksCiAgICBlcnJvcjogZXJyb3JzLmluZGljZXMKICB9LCBzZWxlY3RJbmRpY2VzTW9kZSA9PT0gJ2xpc3QnID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNlbGVjdGFibGUsIHsKICAgIGFsbG93RXhjbHVzaW9uczogZmFsc2UsCiAgICBvcHRpb25zOiBpbmRpY2VzT3B0aW9ucywKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShvcHRpb25zKSB7CiAgICAgIHZhciBuZXdTZWxlY3RlZEluZGljZXMgPSBbXTsKICAgICAgb3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgIHZhciBsYWJlbCA9IF9yZWYyLmxhYmVsLAogICAgICAgICAgICBjaGVja2VkID0gX3JlZjIuY2hlY2tlZDsKCiAgICAgICAgaWYgKGNoZWNrZWQgPT09ICdvbicpIHsKICAgICAgICAgIG5ld1NlbGVjdGVkSW5kaWNlcy5wdXNoKGxhYmVsKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBzZXRJbmRpY2VzT3B0aW9ucyhvcHRpb25zKTsKICAgICAgdXBkYXRlUmVzdG9yZVNldHRpbmdzKHsKICAgICAgICBpbmRpY2VzOiBbXS5jb25jYXQobmV3U2VsZWN0ZWRJbmRpY2VzKQogICAgICB9KTsKICAgICAgc2V0Q2FjaGVkUmVzdG9yZVNldHRpbmdzKF9vYmplY3RTcHJlYWQoe30sIGNhY2hlZFJlc3RvcmVTZXR0aW5ncywgewogICAgICAgIGluZGljZXM6IFtdLmNvbmNhdChuZXdTZWxlY3RlZEluZGljZXMpCiAgICAgIH0pKTsKICAgIH0sCiAgICBzZWFyY2hhYmxlOiB0cnVlLAogICAgaGVpZ2h0OiAzMDAKICB9LCBmdW5jdGlvbiAobGlzdCwgc2VhcmNoKSB7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBhbmVsLCB7CiAgICAgIHBhZGRpbmdTaXplOiAicyIsCiAgICAgIGhhc1NoYWRvdzogZmFsc2UKICAgIH0sIHNlYXJjaCwgbGlzdCk7CiAgfSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29tYm9Cb3gsIHsKICAgIG9wdGlvbnM6IHNuYXBzaG90SW5kaWNlcy5tYXAoZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbGFiZWw6IGluZGV4CiAgICAgIH07CiAgICB9KSwKICAgIHBsYWNlaG9sZGVyOiBpMThuLnRyYW5zbGF0ZSgneHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MuaW5kaWNlc1BhdHRlcm5QbGFjZWhvbGRlcicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFbnRlciBpbmRleCBwYXR0ZXJucywgaS5lLiBsb2dzdGFzaC0qJwogICAgfSksCiAgICBzZWxlY3RlZE9wdGlvbnM6IHJlc3RvcmVJbmRleFBhdHRlcm5zLm1hcChmdW5jdGlvbiAocGF0dGVybikgewogICAgICByZXR1cm4gewogICAgICAgIGxhYmVsOiBwYXR0ZXJuCiAgICAgIH07CiAgICB9KSwKICAgIG9uQ3JlYXRlT3B0aW9uOiBmdW5jdGlvbiBvbkNyZWF0ZU9wdGlvbihwYXR0ZXJuKSB7CiAgICAgIGlmICghcGF0dGVybi50cmltKCkubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgbmV3UGF0dGVybnMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlc3RvcmVJbmRleFBhdHRlcm5zKSwgW3BhdHRlcm5dKTsKICAgICAgc2V0UmVzdG9yZUluZGV4UGF0dGVybnMobmV3UGF0dGVybnMpOwogICAgICB1cGRhdGVSZXN0b3JlU2V0dGluZ3MoewogICAgICAgIGluZGljZXM6IG5ld1BhdHRlcm5zLmpvaW4oJywnKQogICAgICB9KTsKICAgIH0sCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UocGF0dGVybnMpIHsKICAgICAgdmFyIG5ld1BhdHRlcm5zID0gcGF0dGVybnMubWFwKGZ1bmN0aW9uIChfcmVmMykgewogICAgICAgIHZhciBsYWJlbCA9IF9yZWYzLmxhYmVsOwogICAgICAgIHJldHVybiBsYWJlbDsKICAgICAgfSk7CiAgICAgIHNldFJlc3RvcmVJbmRleFBhdHRlcm5zKG5ld1BhdHRlcm5zKTsKICAgICAgdXBkYXRlUmVzdG9yZVNldHRpbmdzKHsKICAgICAgICBpbmRpY2VzOiBuZXdQYXR0ZXJucy5qb2luKCcsJykKICAgICAgfSk7CiAgICB9CiAgfSkpKSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aURlc2NyaWJlZEZvcm1Hcm91cCwgewogICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUaXRsZSwgewogICAgICBzaXplOiAicyIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgzIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MucmVuYW1lSW5kaWNlc1RpdGxlIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZW5hbWUgaW5kaWNlcyIKICAgIH0pKSksCiAgICBkZXNjcmlwdGlvbjogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MucmVuYW1lSW5kaWNlc0Rlc2NyaXB0aW9uIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZW5hbWVzIGluZGljZXMgb24gcmVzdG9yZS4iCiAgICB9KSwKICAgIGlkQXJpYTogInN0ZXBMb2dpc3RpY3NSZW5hbWVJbmRpY2VzRGVzY3JpcHRpb24iLAogICAgZnVsbFdpZHRoOiB0cnVlCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGhhc0VtcHR5TGFiZWxTcGFjZTogdHJ1ZSwKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIGRlc2NyaWJlZEJ5SWRzOiBbJ3N0ZXBMb2dpc3RpY3NSZW5hbWVJbmRpY2VzRGVzY3JpcHRpb24nXQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3dpdGNoLCB7CiAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MucmVuYW1lSW5kaWNlc0xhYmVsIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZW5hbWUgaW5kaWNlcyIKICAgIH0pLAogICAgY2hlY2tlZDogaXNSZW5hbWluZ0luZGljZXMsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICB2YXIgaXNDaGVja2VkID0gZS50YXJnZXQuY2hlY2tlZDsKICAgICAgc2V0SXNSZW5hbWluZ0luZGljZXMoaXNDaGVja2VkKTsKCiAgICAgIGlmIChpc0NoZWNrZWQpIHsKICAgICAgICB1cGRhdGVSZXN0b3JlU2V0dGluZ3MoewogICAgICAgICAgcmVuYW1lUGF0dGVybjogY2FjaGVkUmVzdG9yZVNldHRpbmdzLnJlbmFtZVBhdHRlcm4sCiAgICAgICAgICByZW5hbWVSZXBsYWNlbWVudDogY2FjaGVkUmVzdG9yZVNldHRpbmdzLnJlbmFtZVJlcGxhY2VtZW50CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXBkYXRlUmVzdG9yZVNldHRpbmdzKHsKICAgICAgICAgIHJlbmFtZVBhdHRlcm46IHVuZGVmaW5lZCwKICAgICAgICAgIHJlbmFtZVJlcGxhY2VtZW50OiB1bmRlZmluZWQKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0pLCAhaXNSZW5hbWluZ0luZGljZXMgPyBudWxsIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgIHNpemU6ICJtIgogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MucmVuYW1lUGF0dGVybkxhYmVsIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDYXB0dXJlIHBhdHRlcm4iCiAgICB9KSwKICAgIGhlbHBUZXh0OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucmVzdG9yZUZvcm0uc3RlcExvZ2lzdGljcy5yZW5hbWVQYXR0ZXJuSGVscFRleHQiLAogICAgICBkZWZhdWx0TWVzc2FnZTogIlVzZSByZWd1bGFyIGV4cHJlc3Npb25zIgogICAgfSksCiAgICBpc0ludmFsaWQ6IEJvb2xlYW4oZXJyb3JzLnJlbmFtZVBhdHRlcm4pLAogICAgZXJyb3I6IGVycm9ycy5yZW5hbWVQYXR0ZXJuCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkVGV4dCwgewogICAgdmFsdWU6IHJlbmFtZVBhdHRlcm4sCiAgICBwbGFjZWhvbGRlcjogImluZGV4XyguKykiLAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgc2V0Q2FjaGVkUmVzdG9yZVNldHRpbmdzKF9vYmplY3RTcHJlYWQoe30sIGNhY2hlZFJlc3RvcmVTZXR0aW5ncywgewogICAgICAgIHJlbmFtZVBhdHRlcm46IGUudGFyZ2V0LnZhbHVlCiAgICAgIH0pKTsKICAgICAgdXBkYXRlUmVzdG9yZVNldHRpbmdzKHsKICAgICAgICByZW5hbWVQYXR0ZXJuOiBlLnRhcmdldC52YWx1ZQogICAgICB9KTsKICAgIH0KICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MucmVuYW1lUmVwbGFjZW1lbnRMYWJlbCIsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUmVwbGFjZW1lbnQgcGF0dGVybiIKICAgIH0pLAogICAgaXNJbnZhbGlkOiBCb29sZWFuKGVycm9ycy5yZW5hbWVSZXBsYWNlbWVudCksCiAgICBlcnJvcjogZXJyb3JzLnJlbmFtZVJlcGxhY2VtZW50CiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkVGV4dCwgewogICAgdmFsdWU6IHJlbmFtZVJlcGxhY2VtZW50LAogICAgcGxhY2Vob2xkZXI6ICJyZXN0b3JlZF9pbmRleF8kMSIsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICBzZXRDYWNoZWRSZXN0b3JlU2V0dGluZ3MoX29iamVjdFNwcmVhZCh7fSwgY2FjaGVkUmVzdG9yZVNldHRpbmdzLCB7CiAgICAgICAgcmVuYW1lUmVwbGFjZW1lbnQ6IGUudGFyZ2V0LnZhbHVlCiAgICAgIH0pKTsKICAgICAgdXBkYXRlUmVzdG9yZVNldHRpbmdzKHsKICAgICAgICByZW5hbWVSZXBsYWNlbWVudDogZS50YXJnZXQudmFsdWUKICAgICAgfSk7CiAgICB9CiAgfSkpKSkpKSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRGVzY3JpYmVkRm9ybUdyb3VwLCB7CiAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRpdGxlLCB7CiAgICAgIHNpemU6ICJzIgogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiaDMiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucmVzdG9yZUZvcm0uc3RlcExvZ2lzdGljcy5wYXJ0aWFsVGl0bGUiLAogICAgICBkZWZhdWx0TWVzc2FnZTogIlBhcnRpYWwgcmVzdG9yZSIKICAgIH0pKSksCiAgICBkZXNjcmlwdGlvbjogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MucGFydGlhbERlc2NyaXB0aW9uIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBbGxvd3MgcmVzdG9yZSBvZiBpbmRpY2VzIHRoYXQgZG9uXHUyMDE5dCBoYXZlIHNuYXBzaG90cyBvZiBhbGwgc2hhcmRzLiIKICAgIH0pLAogICAgaWRBcmlhOiAic3RlcExvZ2lzdGljc1BhcnRpYWxEZXNjcmlwdGlvbiIsCiAgICBmdWxsV2lkdGg6IHRydWUKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgaGFzRW1wdHlMYWJlbFNwYWNlOiB0cnVlLAogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgZGVzY3JpYmVkQnlJZHM6IFsnc3RlcExvZ2lzdGljc1BhcnRpYWxEZXNjcmlwdGlvbiddCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVN3aXRjaCwgewogICAgbGFiZWw6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5yZXN0b3JlRm9ybS5zdGVwTG9naXN0aWNzLnBhcnRpYWxMYWJlbCIsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUGFydGlhbCByZXN0b3JlIgogICAgfSksCiAgICBjaGVja2VkOiBwYXJ0aWFsID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IHBhcnRpYWwsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICByZXR1cm4gdXBkYXRlUmVzdG9yZVNldHRpbmdzKHsKICAgICAgICBwYXJ0aWFsOiBlLnRhcmdldC5jaGVja2VkCiAgICAgIH0pOwogICAgfQogIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlEZXNjcmliZWRGb3JtR3JvdXAsIHsKICAgIHRpdGxlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGl0bGUsIHsKICAgICAgc2l6ZTogInMiCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoMyIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5yZXN0b3JlRm9ybS5zdGVwTG9naXN0aWNzLmluY2x1ZGVHbG9iYWxTdGF0ZVRpdGxlIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZXN0b3JlIGdsb2JhbCBzdGF0ZSIKICAgIH0pKSksCiAgICBkZXNjcmlwdGlvbjogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnJlc3RvcmVGb3JtLnN0ZXBMb2dpc3RpY3MuaW5jbHVkZUdsb2JhbFN0YXRlRGVzY3JpcHRpb24iLAogICAgICBkZWZhdWx0TWVzc2FnZTogIlJlc3RvcmVzIHRlbXBsYXRlcyB0aGF0IGRvblx1MjAxOXQgY3VycmVudGx5IGV4aXN0IGluIHRoZSBjbHVzdGVyIGFuZCBvdmVycmlkZXMgdGVtcGxhdGVzIHdpdGggdGhlIHNhbWUgbmFtZS4gQWxzbyByZXN0b3JlcyBwZXJzaXN0ZW50IHNldHRpbmdzLiIKICAgIH0pLAogICAgaWRBcmlhOiAic3RlcExvZ2lzdGljc0luY2x1ZGVHbG9iYWxTdGF0ZURlc2NyaXB0aW9uIiwKICAgIGZ1bGxXaWR0aDogdHJ1ZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICBoYXNFbXB0eUxhYmVsU3BhY2U6IHRydWUsCiAgICBmdWxsV2lkdGg6IHRydWUsCiAgICBkZXNjcmliZWRCeUlkczogWydzdGVwTG9naXN0aWNzSW5jbHVkZUdsb2JhbFN0YXRlRGVzY3JpcHRpb24nXSwKICAgIGhlbHBUZXh0OiBzbmFwc2hvdEluY2x1ZGVHbG9iYWxTdGF0ZSA/IG51bGwgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucmVzdG9yZUZvcm0uc3RlcExvZ2lzdGljcy5pbmNsdWRlR2xvYmFsU3RhdGVEaXNhYmxlZERlc2NyaXB0aW9uIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJOb3QgYXZhaWxhYmxlIGZvciB0aGlzIHNuYXBzaG90LiIKICAgIH0pCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVN3aXRjaCwgewogICAgbGFiZWw6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5yZXN0b3JlRm9ybS5zdGVwTG9naXN0aWNzLmluY2x1ZGVHbG9iYWxTdGF0ZUxhYmVsIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZXN0b3JlIGdsb2JhbCBzdGF0ZSIKICAgIH0pLAogICAgY2hlY2tlZDogaW5jbHVkZUdsb2JhbFN0YXRlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGluY2x1ZGVHbG9iYWxTdGF0ZSwKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgIHJldHVybiB1cGRhdGVSZXN0b3JlU2V0dGluZ3MoewogICAgICAgIGluY2x1ZGVHbG9iYWxTdGF0ZTogZS50YXJnZXQuY2hlY2tlZAogICAgICB9KTsKICAgIH0sCiAgICBkaXNhYmxlZDogIXNuYXBzaG90SW5jbHVkZUdsb2JhbFN0YXRlCiAgfSkpKSk7Cn07CgpleHBvcnRzLlJlc3RvcmVTbmFwc2hvdFN0ZXBMb2dpc3RpY3MgPSBSZXN0b3JlU25hcHNob3RTdGVwTG9naXN0aWNzOw=="},null]}