{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/management/sections/index_patterns/edit_index_pattern/edit_index_pattern.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/management/sections/index_patterns/edit_index_pattern/edit_index_pattern.js","mtime":1585205039807},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnJlcXVpcmUoIi4vaW5kZXhfaGVhZGVyIik7CgpyZXF1aXJlKCIuL2NyZWF0ZV9lZGl0X2ZpZWxkIik7Cgp2YXIgX2RvY190aXRsZSA9IHJlcXVpcmUoInVpL2RvY190aXRsZSIpOwoKdmFyIF91cmwgPSByZXF1aXJlKCJ1aS91cmwiKTsKCnZhciBfZWRpdF9zZWN0aW9ucyA9IHJlcXVpcmUoIi4vZWRpdF9zZWN0aW9ucyIpOwoKdmFyIF9ub3RpZnkgPSByZXF1aXJlKCJ1aS9ub3RpZnkiKTsKCnZhciBfcm91dGVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJ1aS9yb3V0ZXMiKSk7Cgp2YXIgX21vZHVsZXMgPSByZXF1aXJlKCJ1aS9tb2R1bGVzIik7Cgp2YXIgX2VkaXRfaW5kZXhfcGF0dGVybiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9lZGl0X2luZGV4X3BhdHRlcm4uaHRtbCIpKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9raWJhbmFfdXRpbHMvcHVibGljIik7Cgp2YXIgX2xlZ2FjeSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uL21hbmFnZW1lbnQvcHVibGljL2xlZ2FjeSIpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0RG9tID0gcmVxdWlyZSgicmVhY3QtZG9tIik7Cgp2YXIgX3NvdXJjZV9maWx0ZXJzX3RhYmxlID0gcmVxdWlyZSgiLi9zb3VyY2VfZmlsdGVyc190YWJsZSIpOwoKdmFyIF9pbmRleGVkX2ZpZWxkc190YWJsZSA9IHJlcXVpcmUoIi4vaW5kZXhlZF9maWVsZHNfdGFibGUiKTsKCnZhciBfc2NyaXB0ZWRfZmllbGRzX3RhYmxlID0gcmVxdWlyZSgiLi9zY3JpcHRlZF9maWVsZHNfdGFibGUiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9pMThuMiA9IHJlcXVpcmUoInVpL2kxOG4iKTsKCnZhciBfbmV3X3BsYXRmb3JtID0gcmVxdWlyZSgidWkvbmV3X3BsYXRmb3JtIik7Cgp2YXIgX2JyZWFkY3J1bWJzID0gcmVxdWlyZSgiLi4vYnJlYWRjcnVtYnMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovKgogKiBMaWNlbnNlZCB0byBFbGFzdGljc2VhcmNoIEIuVi4gdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IKICogbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3RyaWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQKICogb3duZXJzaGlwLiBFbGFzdGljc2VhcmNoIEIuVi4gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlcgogKiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heQogKiBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KdmFyIFJFQUNUX1NPVVJDRV9GSUxURVJTX0RPTV9FTEVNRU5UX0lEID0gJ3JlYWN0U291cmNlRmlsdGVyc1RhYmxlJzsKdmFyIFJFQUNUX0lOREVYRURfRklFTERTX0RPTV9FTEVNRU5UX0lEID0gJ3JlYWN0SW5kZXhlZEZpZWxkc1RhYmxlJzsKdmFyIFJFQUNUX1NDUklQVEVEX0ZJRUxEU19ET01fRUxFTUVOVF9JRCA9ICdyZWFjdFNjcmlwdGVkRmllbGRzVGFibGUnOwoKZnVuY3Rpb24gdXBkYXRlU291cmNlRmlsdGVyc1RhYmxlKCRzY29wZSwgJHN0YXRlKSB7CiAgaWYgKCRzdGF0ZS50YWIgPT09ICdzb3VyY2VGaWx0ZXJzJykgewogICAgJHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUkVBQ1RfU09VUkNFX0ZJTFRFUlNfRE9NX0VMRU1FTlRfSUQpOwoKICAgICAgaWYgKCFub2RlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAoMCwgX3JlYWN0RG9tLnJlbmRlcikoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaTE4bjIuSTE4bkNvbnRleHQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3NvdXJjZV9maWx0ZXJzX3RhYmxlLlNvdXJjZUZpbHRlcnNUYWJsZSwgewogICAgICAgIGluZGV4UGF0dGVybjogJHNjb3BlLmluZGV4UGF0dGVybiwKICAgICAgICBmaWx0ZXJGaWx0ZXI6ICRzY29wZS5maWVsZEZpbHRlciwKICAgICAgICBmaWVsZFdpbGRjYXJkTWF0Y2hlcjogJHNjb3BlLmZpZWxkV2lsZGNhcmRNYXRjaGVyLAogICAgICAgIG9uQWRkT3JSZW1vdmVGaWx0ZXI6IGZ1bmN0aW9uIG9uQWRkT3JSZW1vdmVGaWx0ZXIoKSB7CiAgICAgICAgICAkc2NvcGUuZWRpdFNlY3Rpb25zID0gJHNjb3BlLmVkaXRTZWN0aW9uc1Byb3ZpZGVyKCRzY29wZS5pbmRleFBhdHRlcm4sICRzY29wZS5maWVsZEZpbHRlciwgJHNjb3BlLmluZGV4UGF0dGVybkxpc3RQcm92aWRlcik7CiAgICAgICAgICAkc2NvcGUucmVmcmVzaEZpbHRlcnMoKTsKICAgICAgICAgICRzY29wZS4kYXBwbHkoKTsKICAgICAgICB9CiAgICAgIH0pKSwgbm9kZSk7CiAgICB9KTsKICB9IGVsc2UgewogICAgZGVzdHJveVNvdXJjZUZpbHRlcnNUYWJsZSgpOwogIH0KfQoKZnVuY3Rpb24gZGVzdHJveVNvdXJjZUZpbHRlcnNUYWJsZSgpIHsKICB2YXIgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFJFQUNUX1NPVVJDRV9GSUxURVJTX0RPTV9FTEVNRU5UX0lEKTsKICBub2RlICYmICgwLCBfcmVhY3REb20udW5tb3VudENvbXBvbmVudEF0Tm9kZSkobm9kZSk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZVNjcmlwdGVkRmllbGRzVGFibGUoJHNjb3BlLCAkc3RhdGUpIHsKICBpZiAoJHN0YXRlLnRhYiA9PT0gJ3NjcmlwdGVkRmllbGRzJykgewogICAgJHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUkVBQ1RfU0NSSVBURURfRklFTERTX0RPTV9FTEVNRU5UX0lEKTsKCiAgICAgIGlmICghbm9kZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgKDAsIF9yZWFjdERvbS5yZW5kZXIpKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2kxOG4yLkkxOG5Db250ZXh0LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zY3JpcHRlZF9maWVsZHNfdGFibGUuU2NyaXB0ZWRGaWVsZHNUYWJsZSwgewogICAgICAgIGluZGV4UGF0dGVybjogJHNjb3BlLmluZGV4UGF0dGVybiwKICAgICAgICBmaWVsZEZpbHRlcjogJHNjb3BlLmZpZWxkRmlsdGVyLAogICAgICAgIHNjcmlwdGVkRmllbGRMYW5ndWFnZUZpbHRlcjogJHNjb3BlLnNjcmlwdGVkRmllbGRMYW5ndWFnZUZpbHRlciwKICAgICAgICBoZWxwZXJzOiB7CiAgICAgICAgICByZWRpcmVjdFRvUm91dGU6IGZ1bmN0aW9uIHJlZGlyZWN0VG9Sb3V0ZShvYmosIHJvdXRlKSB7CiAgICAgICAgICAgICRzY29wZS5rYm5VcmwucmVkaXJlY3RUb1JvdXRlKG9iaiwgcm91dGUpOwogICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0Um91dGVIcmVmOiBmdW5jdGlvbiBnZXRSb3V0ZUhyZWYob2JqLCByb3V0ZSkgewogICAgICAgICAgICByZXR1cm4gJHNjb3BlLmtiblVybC5nZXRSb3V0ZUhyZWYob2JqLCByb3V0ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBvblJlbW92ZUZpZWxkOiBmdW5jdGlvbiBvblJlbW92ZUZpZWxkKCkgewogICAgICAgICAgJHNjb3BlLmVkaXRTZWN0aW9ucyA9ICRzY29wZS5lZGl0U2VjdGlvbnNQcm92aWRlcigkc2NvcGUuaW5kZXhQYXR0ZXJuLCAkc2NvcGUuZmllbGRGaWx0ZXIsICRzY29wZS5pbmRleFBhdHRlcm5MaXN0UHJvdmlkZXIpOwogICAgICAgICAgJHNjb3BlLnJlZnJlc2hGaWx0ZXJzKCk7CiAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7CiAgICAgICAgfQogICAgICB9KSksIG5vZGUpOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIGRlc3Ryb3lTY3JpcHRlZEZpZWxkc1RhYmxlKCk7CiAgfQp9CgpmdW5jdGlvbiBkZXN0cm95U2NyaXB0ZWRGaWVsZHNUYWJsZSgpIHsKICB2YXIgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFJFQUNUX1NDUklQVEVEX0ZJRUxEU19ET01fRUxFTUVOVF9JRCk7CiAgbm9kZSAmJiAoMCwgX3JlYWN0RG9tLnVubW91bnRDb21wb25lbnRBdE5vZGUpKG5vZGUpOwp9CgpmdW5jdGlvbiB1cGRhdGVJbmRleGVkRmllbGRzVGFibGUoJHNjb3BlLCAkc3RhdGUpIHsKICBpZiAoJHN0YXRlLnRhYiA9PT0gJ2luZGV4ZWRGaWVsZHMnKSB7CiAgICAkc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChSRUFDVF9JTkRFWEVEX0ZJRUxEU19ET01fRUxFTUVOVF9JRCk7CgogICAgICBpZiAoIW5vZGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgICgwLCBfcmVhY3REb20ucmVuZGVyKShfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9pMThuMi5JMThuQ29udGV4dCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaW5kZXhlZF9maWVsZHNfdGFibGUuSW5kZXhlZEZpZWxkc1RhYmxlLCB7CiAgICAgICAgZmllbGRzOiAkc2NvcGUuZmllbGRzLAogICAgICAgIGluZGV4UGF0dGVybjogJHNjb3BlLmluZGV4UGF0dGVybiwKICAgICAgICBmaWVsZEZpbHRlcjogJHNjb3BlLmZpZWxkRmlsdGVyLAogICAgICAgIGZpZWxkV2lsZGNhcmRNYXRjaGVyOiAkc2NvcGUuZmllbGRXaWxkY2FyZE1hdGNoZXIsCiAgICAgICAgaW5kZXhlZEZpZWxkVHlwZUZpbHRlcjogJHNjb3BlLmluZGV4ZWRGaWVsZFR5cGVGaWx0ZXIsCiAgICAgICAgaGVscGVyczogewogICAgICAgICAgcmVkaXJlY3RUb1JvdXRlOiBmdW5jdGlvbiByZWRpcmVjdFRvUm91dGUob2JqLCByb3V0ZSkgewogICAgICAgICAgICAkc2NvcGUua2JuVXJsLnJlZGlyZWN0VG9Sb3V0ZShvYmosIHJvdXRlKTsKICAgICAgICAgICAgJHNjb3BlLiRhcHBseSgpOwogICAgICAgICAgfSwKICAgICAgICAgIGdldEZpZWxkSW5mbzogJHNjb3BlLmdldEZpZWxkSW5mbwogICAgICAgIH0KICAgICAgfSkpLCBub2RlKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBkZXN0cm95SW5kZXhlZEZpZWxkc1RhYmxlKCk7CiAgfQp9CgpmdW5jdGlvbiBkZXN0cm95SW5kZXhlZEZpZWxkc1RhYmxlKCkgewogIHZhciBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUkVBQ1RfSU5ERVhFRF9GSUVMRFNfRE9NX0VMRU1FTlRfSUQpOwogIG5vZGUgJiYgKDAsIF9yZWFjdERvbS51bm1vdW50Q29tcG9uZW50QXROb2RlKShub2RlKTsKfQoKX3JvdXRlcy5kZWZhdWx0LndoZW4oJy9tYW5hZ2VtZW50L2tpYmFuYS9pbmRleF9wYXR0ZXJucy86aW5kZXhQYXR0ZXJuSWQnLCB7CiAgdGVtcGxhdGU6IF9lZGl0X2luZGV4X3BhdHRlcm4uZGVmYXVsdCwKICBrN0JyZWFkY3J1bWJzOiBfYnJlYWRjcnVtYnMuZ2V0RWRpdEJyZWFkY3J1bWJzLAogIHJlc29sdmU6IHsKICAgIGluZGV4UGF0dGVybjogZnVuY3Rpb24gaW5kZXhQYXR0ZXJuKCRyb3V0ZSwgUHJvbWlzZSwgcmVkaXJlY3RXaGVuTWlzc2luZykgewogICAgICB2YXIgaW5kZXhQYXR0ZXJucyA9IF9uZXdfcGxhdGZvcm0ubnBTdGFydC5wbHVnaW5zLmRhdGEuaW5kZXhQYXR0ZXJuczsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShpbmRleFBhdHRlcm5zLmdldCgkcm91dGUuY3VycmVudC5wYXJhbXMuaW5kZXhQYXR0ZXJuSWQpKS5jYXRjaChyZWRpcmVjdFdoZW5NaXNzaW5nKCcvbWFuYWdlbWVudC9raWJhbmEvaW5kZXhfcGF0dGVybnMnKSk7CiAgICB9CiAgfQp9KTsKCl9tb2R1bGVzLnVpTW9kdWxlcy5nZXQoJ2FwcHMvbWFuYWdlbWVudCcpLmNvbnRyb2xsZXIoJ21hbmFnZW1lbnRJbmRleFBhdHRlcm5zRWRpdCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgJHJvdXRlLCBQcm9taXNlLCBjb25maWcsIFByaXZhdGUsIEFwcFN0YXRlLCBjb25maXJtTW9kYWwpIHsKICB2YXIgJHN0YXRlID0gJHNjb3BlLnN0YXRlID0gbmV3IEFwcFN0YXRlKCk7CgogICRzY29wZS5maWVsZFdpbGRjYXJkTWF0Y2hlciA9IGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgfQoKICAgIHJldHVybiBfcHVibGljLmZpZWxkV2lsZGNhcmRNYXRjaGVyLmFwcGx5KHZvaWQgMCwgYXJncy5jb25jYXQoW2NvbmZpZy5nZXQoJ21ldGFGaWVsZHMnKV0pKTsKICB9OwoKICAkc2NvcGUuZWRpdFNlY3Rpb25zUHJvdmlkZXIgPSBQcml2YXRlKF9lZGl0X3NlY3Rpb25zLkluZGljZXNFZGl0U2VjdGlvbnNQcm92aWRlcik7CiAgJHNjb3BlLmtiblVybCA9IFByaXZhdGUoX3VybC5LYm5VcmxQcm92aWRlcik7CiAgJHNjb3BlLmluZGV4UGF0dGVybiA9ICRyb3V0ZS5jdXJyZW50LmxvY2Fscy5pbmRleFBhdHRlcm47CiAgJHNjb3BlLmluZGV4UGF0dGVybkxpc3RQcm92aWRlciA9IF9sZWdhY3kuc2V0dXAuaW5kZXhQYXR0ZXJuLmxpc3Q7CiAgJHNjb3BlLmluZGV4UGF0dGVybi50YWdzID0gX2xlZ2FjeS5zZXR1cC5pbmRleFBhdHRlcm4ubGlzdC5nZXRJbmRleFBhdHRlcm5UYWdzKCRzY29wZS5pbmRleFBhdHRlcm4sICRzY29wZS5pbmRleFBhdHRlcm4uaWQgPT09IGNvbmZpZy5nZXQoJ2RlZmF1bHRJbmRleCcpKTsKICAkc2NvcGUuZ2V0RmllbGRJbmZvID0gX2xlZ2FjeS5zZXR1cC5pbmRleFBhdHRlcm4ubGlzdC5nZXRGaWVsZEluZm8uYmluZChfbGVnYWN5LnNldHVwLmluZGV4UGF0dGVybi5saXN0KTsKCiAgX2RvY190aXRsZS5kb2NUaXRsZS5jaGFuZ2UoJHNjb3BlLmluZGV4UGF0dGVybi50aXRsZSk7CgogIHZhciBvdGhlclBhdHRlcm5zID0gX2xvZGFzaC5kZWZhdWx0LmZpbHRlcigkcm91dGUuY3VycmVudC5sb2NhbHMuaW5kZXhQYXR0ZXJucywgZnVuY3Rpb24gKHBhdHRlcm4pIHsKICAgIHJldHVybiBwYXR0ZXJuLmlkICE9PSAkc2NvcGUuaW5kZXhQYXR0ZXJuLmlkOwogIH0pOwoKICAkc2NvcGUuJHdhdGNoKCdpbmRleFBhdHRlcm4uZmllbGRzJywgZnVuY3Rpb24gKCkgewogICAgJHNjb3BlLmVkaXRTZWN0aW9ucyA9ICRzY29wZS5lZGl0U2VjdGlvbnNQcm92aWRlcigkc2NvcGUuaW5kZXhQYXR0ZXJuLCAkc2NvcGUuZmllbGRGaWx0ZXIsIF9sZWdhY3kuc2V0dXAuaW5kZXhQYXR0ZXJuLmxpc3QpOwogICAgJHNjb3BlLnJlZnJlc2hGaWx0ZXJzKCk7CiAgICAkc2NvcGUuZmllbGRzID0gJHNjb3BlLmluZGV4UGF0dGVybi5nZXROb25TY3JpcHRlZEZpZWxkcygpOwogICAgdXBkYXRlSW5kZXhlZEZpZWxkc1RhYmxlKCRzY29wZSwgJHN0YXRlKTsKICAgIHVwZGF0ZVNjcmlwdGVkRmllbGRzVGFibGUoJHNjb3BlLCAkc3RhdGUpOwogIH0pOwogICRzY29wZS5taWdyYXRpb24gPSB7CiAgICBpc01pZ3JhdGluZzogZmFsc2UsCiAgICBuZXdUaXRsZTogJHNjb3BlLmluZGV4UGF0dGVybi5nZXRJbmRleCgpCiAgfTsKCiAgJHNjb3BlLm1pZ3JhdGUgPSBmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgJHNjb3BlLm1pZ3JhdGlvbi5pc01pZ3JhdGluZyA9IHRydWU7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKCRzY29wZS5pbmRleFBhdHRlcm4ubWlncmF0ZSgkc2NvcGUubWlncmF0aW9uLm5ld1RpdGxlKSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAkc2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgJHNjb3BlLm1pZ3JhdGlvbi5pc01pZ3JhdGluZyA9IGZhbHNlOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfTsKCiAgJHNjb3BlLnJlZnJlc2hGaWx0ZXJzID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGluZGV4ZWRGaWVsZFR5cGVzID0gW107CiAgICB2YXIgc2NyaXB0ZWRGaWVsZExhbmd1YWdlcyA9IFtdOwogICAgJHNjb3BlLmluZGV4UGF0dGVybi5maWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgaWYgKGZpZWxkLnNjcmlwdGVkKSB7CiAgICAgICAgc2NyaXB0ZWRGaWVsZExhbmd1YWdlcy5wdXNoKGZpZWxkLmxhbmcpOwogICAgICB9IGVsc2UgewogICAgICAgIGluZGV4ZWRGaWVsZFR5cGVzLnB1c2goZmllbGQudHlwZSk7CiAgICAgIH0KICAgIH0pOwogICAgJHNjb3BlLmluZGV4ZWRGaWVsZFR5cGVzID0gX2xvZGFzaC5kZWZhdWx0LnVuaXF1ZShpbmRleGVkRmllbGRUeXBlcyk7CiAgICAkc2NvcGUuc2NyaXB0ZWRGaWVsZExhbmd1YWdlcyA9IF9sb2Rhc2guZGVmYXVsdC51bmlxdWUoc2NyaXB0ZWRGaWVsZExhbmd1YWdlcyk7CiAgfTsKCiAgJHNjb3BlLmNoYW5nZUZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIsIHZhbCkgewogICAgJHNjb3BlW2ZpbHRlcl0gPSB2YWwgfHwgJyc7IC8vIG51bGwgY2F1c2VzIGZpbHRlciB0byBjaGVjayBmb3IgbnVsbCBleHBsaWNpdGx5CiAgfTsKCiAgJHNjb3BlLmNoYW5nZVRhYiA9IGZ1bmN0aW9uIChvYmopIHsKICAgICRzdGF0ZS50YWIgPSBvYmouaW5kZXg7CiAgICB1cGRhdGVJbmRleGVkRmllbGRzVGFibGUoJHNjb3BlLCAkc3RhdGUpOwogICAgdXBkYXRlU2NyaXB0ZWRGaWVsZHNUYWJsZSgkc2NvcGUsICRzdGF0ZSk7CiAgICB1cGRhdGVTb3VyY2VGaWx0ZXJzVGFibGUoJHNjb3BlLCAkc3RhdGUpOwogICAgJHN0YXRlLnNhdmUoKTsKICB9OwoKICAkc2NvcGUuJHdhdGNoKCdzdGF0ZS50YWInLCBmdW5jdGlvbiAodGFiKSB7CiAgICBpZiAoIXRhYikgJHNjb3BlLmNoYW5nZVRhYigkc2NvcGUuZWRpdFNlY3Rpb25zWzBdKTsKICB9KTsKICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignaW5kZXhQYXR0ZXJuLmZpZWxkcycsIGZ1bmN0aW9uICgpIHsKICAgICRzY29wZS5jb25mbGljdEZpZWxkcyA9ICRzY29wZS5pbmRleFBhdHRlcm4uZmllbGRzLmZpbHRlcihmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgcmV0dXJuIGZpZWxkLnR5cGUgPT09ICdjb25mbGljdCc7CiAgICB9KTsKICB9KTsKCiAgJHNjb3BlLnJlZnJlc2hGaWVsZHMgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgY29uZmlybU1lc3NhZ2UgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQuZWRpdEluZGV4UGF0dGVybi5yZWZyZXNoTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVGhpcyBhY3Rpb24gcmVzZXRzIHRoZSBwb3B1bGFyaXR5IGNvdW50ZXIgb2YgZWFjaCBmaWVsZC4nCiAgICB9KTsKCiAgICB2YXIgY29uZmlybU1vZGFsT3B0aW9ucyA9IHsKICAgICAgY29uZmlybUJ1dHRvblRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4ubWFuYWdlbWVudC5lZGl0SW5kZXhQYXR0ZXJuLnJlZnJlc2hCdXR0b24nLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZWZyZXNoJwogICAgICB9KSwKICAgICAgb25Db25maXJtOiBmdW5jdGlvbiBvbkNvbmZpcm0oKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBvbkNvbmZpcm0kKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCgkc2NvcGUuaW5kZXhQYXR0ZXJuLmluaXQodHJ1ZSkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAkc2NvcGUuZmllbGRzID0gJHNjb3BlLmluZGV4UGF0dGVybi5nZXROb25TY3JpcHRlZEZpZWxkcygpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQuZWRpdEluZGV4UGF0dGVybi5yZWZyZXNoSGVhZGVyJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVmcmVzaCBmaWVsZCBsaXN0PycKICAgICAgfSkKICAgIH07CiAgICBjb25maXJtTW9kYWwoY29uZmlybU1lc3NhZ2UsIGNvbmZpcm1Nb2RhbE9wdGlvbnMpOwogIH07CgogICRzY29wZS5yZW1vdmVQYXR0ZXJuID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gZG9SZW1vdmUoKSB7CiAgICAgIGlmICgkc2NvcGUuaW5kZXhQYXR0ZXJuLmlkID09PSBjb25maWcuZ2V0KCdkZWZhdWx0SW5kZXgnKSkgewogICAgICAgIGNvbmZpZy5yZW1vdmUoJ2RlZmF1bHRJbmRleCcpOwoKICAgICAgICBpZiAob3RoZXJQYXR0ZXJucy5sZW5ndGgpIHsKICAgICAgICAgIGNvbmZpZy5zZXQoJ2RlZmF1bHRJbmRleCcsIG90aGVyUGF0dGVybnNbMF0uaWQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgUHJvbWlzZS5yZXNvbHZlKCRzY29wZS5pbmRleFBhdHRlcm4uZGVzdHJveSgpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAkbG9jYXRpb24udXJsKCcvbWFuYWdlbWVudC9raWJhbmEvaW5kZXhfcGF0dGVybnMnKTsKICAgICAgfSkuY2F0Y2goX25vdGlmeS5mYXRhbEVycm9yKTsKICAgIH0KCiAgICB2YXIgY29uZmlybU1vZGFsT3B0aW9ucyA9IHsKICAgICAgY29uZmlybUJ1dHRvblRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4ubWFuYWdlbWVudC5lZGl0SW5kZXhQYXR0ZXJuLmRlbGV0ZUJ1dHRvbicsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0RlbGV0ZScKICAgICAgfSksCiAgICAgIG9uQ29uZmlybTogZG9SZW1vdmUsCiAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQuZWRpdEluZGV4UGF0dGVybi5kZWxldGVIZWFkZXInLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEZWxldGUgaW5kZXggcGF0dGVybj8nCiAgICAgIH0pCiAgICB9OwogICAgY29uZmlybU1vZGFsKCcnLCBjb25maXJtTW9kYWxPcHRpb25zKTsKICB9OwoKICAkc2NvcGUuc2V0RGVmYXVsdFBhdHRlcm4gPSBmdW5jdGlvbiAoKSB7CiAgICBjb25maWcuc2V0KCdkZWZhdWx0SW5kZXgnLCAkc2NvcGUuaW5kZXhQYXR0ZXJuLmlkKTsKICB9OwoKICAkc2NvcGUuc2V0SW5kZXhQYXR0ZXJuc1RpbWVGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkgewogICAgaWYgKGZpZWxkLnR5cGUgIT09ICdkYXRlJykgewogICAgICB2YXIgZXJyb3JNZXNzYWdlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5tYW5hZ2VtZW50LmVkaXRJbmRleFBhdHRlcm4ubm90RGF0ZUVycm9yTWVzc2FnZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1RoYXQgZmllbGQgaXMgYSB7ZmllbGRUeXBlfSBub3QgYSBkYXRlLicsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBmaWVsZFR5cGU6IGZpZWxkLnR5cGUKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkRGFuZ2VyKGVycm9yTWVzc2FnZSk7CgogICAgICByZXR1cm47CiAgICB9CgogICAgJHNjb3BlLmluZGV4UGF0dGVybi50aW1lRmllbGROYW1lID0gZmllbGQubmFtZTsKICAgIHJldHVybiAkc2NvcGUuaW5kZXhQYXR0ZXJuLnNhdmUoKTsKICB9OwoKICAkc2NvcGUuJHdhdGNoKCdmaWVsZEZpbHRlcicsIGZ1bmN0aW9uICgpIHsKICAgICRzY29wZS5lZGl0U2VjdGlvbnMgPSAkc2NvcGUuZWRpdFNlY3Rpb25zUHJvdmlkZXIoJHNjb3BlLmluZGV4UGF0dGVybiwgJHNjb3BlLmZpZWxkRmlsdGVyLCBfbGVnYWN5LnNldHVwLmluZGV4UGF0dGVybi5saXN0KTsKCiAgICBpZiAoJHNjb3BlLmZpZWxkRmlsdGVyID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHN3aXRjaCAoJHN0YXRlLnRhYikgewogICAgICBjYXNlICdpbmRleGVkRmllbGRzJzoKICAgICAgICB1cGRhdGVJbmRleGVkRmllbGRzVGFibGUoJHNjb3BlLCAkc3RhdGUpOwoKICAgICAgY2FzZSAnc2NyaXB0ZWRGaWVsZHMnOgogICAgICAgIHVwZGF0ZVNjcmlwdGVkRmllbGRzVGFibGUoJHNjb3BlLCAkc3RhdGUpOwoKICAgICAgY2FzZSAnc291cmNlRmlsdGVycyc6CiAgICAgICAgdXBkYXRlU291cmNlRmlsdGVyc1RhYmxlKCRzY29wZSwgJHN0YXRlKTsKICAgIH0KICB9KTsKICAkc2NvcGUuJHdhdGNoKCdpbmRleGVkRmllbGRUeXBlRmlsdGVyJywgZnVuY3Rpb24gKCkgewogICAgaWYgKCRzY29wZS5pbmRleGVkRmllbGRUeXBlRmlsdGVyICE9PSB1bmRlZmluZWQgJiYgJHN0YXRlLnRhYiA9PT0gJ2luZGV4ZWRGaWVsZHMnKSB7CiAgICAgIHVwZGF0ZUluZGV4ZWRGaWVsZHNUYWJsZSgkc2NvcGUsICRzdGF0ZSk7CiAgICB9CiAgfSk7CiAgJHNjb3BlLiR3YXRjaCgnc2NyaXB0ZWRGaWVsZExhbmd1YWdlRmlsdGVyJywgZnVuY3Rpb24gKCkgewogICAgaWYgKCRzY29wZS5zY3JpcHRlZEZpZWxkTGFuZ3VhZ2VGaWx0ZXIgIT09IHVuZGVmaW5lZCAmJiAkc3RhdGUudGFiID09PSAnc2NyaXB0ZWRGaWVsZHMnKSB7CiAgICAgIHVwZGF0ZVNjcmlwdGVkRmllbGRzVGFibGUoJHNjb3BlLCAkc3RhdGUpOwogICAgfQogIH0pOwogICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkgewogICAgZGVzdHJveUluZGV4ZWRGaWVsZHNUYWJsZSgpOwogICAgZGVzdHJveVNjcmlwdGVkRmllbGRzVGFibGUoKTsKICB9KTsKICB1cGRhdGVTY3JpcHRlZEZpZWxkc1RhYmxlKCRzY29wZSwgJHN0YXRlKTsKICB1cGRhdGVTb3VyY2VGaWx0ZXJzVGFibGUoJHNjb3BlLCAkc3RhdGUpOwp9KTs="},null]}