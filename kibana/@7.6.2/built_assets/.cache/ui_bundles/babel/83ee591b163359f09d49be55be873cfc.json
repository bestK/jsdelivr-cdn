{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/infra/public/pages/logs/log_entry_rate/sections/anomalies/table.js","dependencies":[{"path":"x-pack/legacy/plugins/infra/public/pages/logs/log_entry_rate/sections/anomalies/table.js","mtime":1585205044769},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuQW5vbWFsaWVzVGFibGUgPSB2b2lkIDA7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9zZXJ2aWNlcyA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aS9saWIvc2VydmljZXMiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9ldWlfc3R5bGVkX2NvbXBvbmVudHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2NvbW1vbi9ldWlfc3R5bGVkX2NvbXBvbmVudHMiKSk7Cgp2YXIgX2xvZ19hbmFseXNpcyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uL2NvbW1vbi9sb2dfYW5hbHlzaXMiKTsKCnZhciBfZXhwYW5kZWRfcm93ID0gcmVxdWlyZSgiLi9leHBhbmRlZF9yb3ciKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAmIC5ldWlUYWJsZSB7XG4gICAgdGFibGUtbGF5b3V0OiBhdXRvO1xuICB9XG4iXSk7CgogIF90ZW1wbGF0ZU9iamVjdCA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdCgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKHN0cmluZ3MsIHJhdykgewogIGlmICghcmF3KSB7CiAgICByYXcgPSBzdHJpbmdzLnNsaWNlKDApOwogIH0KCiAgcmV0dXJuIE9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3RyaW5ncywgewogICAgcmF3OiB7CiAgICAgIHZhbHVlOiBPYmplY3QuZnJlZXplKHJhdykKICAgIH0KICB9KSk7Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgewogIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OwoKICB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7CgogIHZhciBrZXksIGk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsKCiAgICBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgewogICAgICBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOwogICAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOwogICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOwogICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgewogIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OwogIHZhciB0YXJnZXQgPSB7fTsKICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7CiAgdmFyIGtleSwgaTsKCiAgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsKICAgIGtleSA9IHNvdXJjZUtleXNbaV07CiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOwogICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgewogIHZhciBrZXkgPSBfdG9QcmltaXRpdmUoYXJnLCAic3RyaW5nIik7CgogIHJldHVybiBfdHlwZW9mKGtleSkgPT09ICJzeW1ib2wiID8ga2V5IDogU3RyaW5nKGtleSk7Cn0KCmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgewogIGlmIChfdHlwZW9mKGlucHV0KSAhPT0gIm9iamVjdCIgfHwgaW5wdXQgPT09IG51bGwpIHJldHVybiBpbnB1dDsKICB2YXIgcHJpbSA9IGlucHV0W1N5bWJvbC50b1ByaW1pdGl2ZV07CgogIGlmIChwcmltICE9PSB1bmRlZmluZWQpIHsKICAgIHZhciByZXMgPSBwcmltLmNhbGwoaW5wdXQsIGhpbnQgfHwgImRlZmF1bHQiKTsKICAgIGlmIChfdHlwZW9mKHJlcykgIT09ICJvYmplY3QiKSByZXR1cm4gcmVzOwogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKTsKICB9CgogIHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIGNvbGxhcHNlQXJpYUxhYmVsID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmluZnJhLmxvZ3MuYW5hbHlzaXMuYW5vbWFsaWVzVGFibGVDb2xsYXBzZUxhYmVsJywgewogIGRlZmF1bHRNZXNzYWdlOiAnQ29sbGFwc2UnCn0pOwoKdmFyIGV4cGFuZEFyaWFMYWJlbCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pbmZyYS5sb2dzLmFuYWx5c2lzLmFub21hbGllc1RhYmxlRXhwYW5kTGFiZWwnLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdFeHBhbmQnCn0pOwoKdmFyIHBhcnRpdGlvbkNvbHVtbk5hbWUgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaW5mcmEubG9ncy5hbmFseXNpcy5hbm9tYWxpZXNUYWJsZVBhcnRpdGlvbkNvbHVtbk5hbWUnLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdQYXJ0aXRpb24nCn0pOwoKdmFyIG1heEFub21hbHlTY29yZUNvbHVtbk5hbWUgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaW5mcmEubG9ncy5hbmFseXNpcy5hbm9tYWxpZXNUYWJsZU1heEFub21hbHlTY29yZUNvbHVtbk5hbWUnLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdNYXggYW5vbWFseSBzY29yZScKfSk7Cgp2YXIgQW5vbWFsaWVzVGFibGUgPSBmdW5jdGlvbiBBbm9tYWxpZXNUYWJsZShfcmVmKSB7CiAgdmFyIHJlc3VsdHMgPSBfcmVmLnJlc3VsdHMsCiAgICAgIHRpbWVSYW5nZSA9IF9yZWYudGltZVJhbmdlLAogICAgICBzZXRUaW1lUmFuZ2UgPSBfcmVmLnNldFRpbWVSYW5nZSwKICAgICAgam9iSWQgPSBfcmVmLmpvYklkOwogIHZhciB0YWJsZUl0ZW1zID0gKDAsIF9yZWFjdC51c2VNZW1vKShmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMocmVzdWx0cy5wYXJ0aXRpb25CdWNrZXRzKS5tYXAoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgIHZhciBfcmVmMyA9IF9zbGljZWRUb0FycmF5KF9yZWYyLCAyKSwKICAgICAgICAgIGtleSA9IF9yZWYzWzBdLAogICAgICAgICAgdmFsdWUgPSBfcmVmM1sxXTsKCiAgICAgIHJldHVybiB7CiAgICAgICAgLy8gTm90ZTogRVVJJ3MgdGFibGUgZXhwYW5kZWQgcm93cyB3b24ndCB3b3JrIHdpdGggYSBrZXkgb2YgJycgaW4gaXRlbUlkVG9FeHBhbmRlZFJvd01hcCwgc28gd2UgaGF2ZSB0byB1c2UgdGhlIGZyaWVuZGx5IG5hbWUgaGVyZQogICAgICAgIGlkOiAoMCwgX2xvZ19hbmFseXNpcy5nZXRGcmllbmRseU5hbWVGb3JQYXJ0aXRpb25JZCkoa2V5KSwKICAgICAgICAvLyBUaGUgcmVhbCBJRAogICAgICAgIHBhcnRpdGlvbklkOiBrZXksCiAgICAgICAgcGFydGl0aW9uOiAoMCwgX2xvZ19hbmFseXNpcy5nZXRGcmllbmRseU5hbWVGb3JQYXJ0aXRpb25JZCkoa2V5KSwKICAgICAgICB0b3BBbm9tYWx5U2NvcmU6ICgwLCBfbG9nX2FuYWx5c2lzLmZvcm1hdEFub21hbHlTY29yZSkodmFsdWUudG9wQW5vbWFseVNjb3JlKQogICAgICB9OwogICAgfSk7CiAgfSwgW3Jlc3VsdHNdKTsKCiAgdmFyIF91c2VTdGF0ZSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHt9KSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGl0ZW1JZFRvRXhwYW5kZWRSb3dNYXAgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRJdGVtSWRUb0V4cGFuZGVkUm93TWFwID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTMgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh7CiAgICBzb3J0OiB7CiAgICAgIGZpZWxkOiAndG9wQW5vbWFseVNjb3JlJywKICAgICAgZGlyZWN0aW9uOiAnZGVzYycKICAgIH0KICB9KSwKICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLAogICAgICBzb3J0aW5nID0gX3VzZVN0YXRlNFswXSwKICAgICAgc2V0U29ydGluZyA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBoYW5kbGVUYWJsZUNoYW5nZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChfcmVmNCkgewogICAgdmFyIF9yZWY0JHNvcnQgPSBfcmVmNC5zb3J0LAogICAgICAgIHNvcnQgPSBfcmVmNCRzb3J0ID09PSB2b2lkIDAgPyB7fSA6IF9yZWY0JHNvcnQ7CiAgICB2YXIgZmllbGQgPSBzb3J0LmZpZWxkLAogICAgICAgIGRpcmVjdGlvbiA9IHNvcnQuZGlyZWN0aW9uOwogICAgc2V0U29ydGluZyh7CiAgICAgIHNvcnQ6IHsKICAgICAgICBmaWVsZDogZmllbGQsCiAgICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb24KICAgICAgfQogICAgfSk7CiAgfSwgW3NldFNvcnRpbmddKTsKICB2YXIgc29ydGVkVGFibGVJdGVtcyA9ICgwLCBfcmVhY3QudXNlTWVtbykoZnVuY3Rpb24gKCkgewogICAgdmFyIHNvcnRlZEl0ZW1zID0gW107CgogICAgaWYgKHNvcnRpbmcuc29ydC5maWVsZCA9PT0gJ3BhcnRpdGlvbicpIHsKICAgICAgc29ydGVkSXRlbXMgPSB0YWJsZUl0ZW1zLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYS5wYXJ0aXRpb24gPiBiLnBhcnRpdGlvbiA/IDEgOiAtMTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHNvcnRpbmcuc29ydC5maWVsZCA9PT0gJ3RvcEFub21hbHlTY29yZScpIHsKICAgICAgc29ydGVkSXRlbXMgPSB0YWJsZUl0ZW1zLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYS50b3BBbm9tYWx5U2NvcmUgLSBiLnRvcEFub21hbHlTY29yZTsKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIHNvcnRpbmcuc29ydC5kaXJlY3Rpb24gPT09ICdhc2MnID8gc29ydGVkSXRlbXMgOiBzb3J0ZWRJdGVtcy5yZXZlcnNlKCk7CiAgfSwgW3RhYmxlSXRlbXMsIHNvcnRpbmddKTsKICB2YXIgdG9nZ2xlRXhwYW5kZWRJdGVtcyA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpZiAoaXRlbUlkVG9FeHBhbmRlZFJvd01hcFtpdGVtLmlkXSkgewogICAgICB2YXIgX2l0ZW0kaWQgPSBpdGVtLmlkLAogICAgICAgICAgdG9nZ2xlZEl0ZW0gPSBpdGVtSWRUb0V4cGFuZGVkUm93TWFwW19pdGVtJGlkXSwKICAgICAgICAgIHJlbWFpbmluZ0V4cGFuZGVkUm93TWFwID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKGl0ZW1JZFRvRXhwYW5kZWRSb3dNYXAsIFtfaXRlbSRpZF0ubWFwKF90b1Byb3BlcnR5S2V5KSk7CgogICAgICBzZXRJdGVtSWRUb0V4cGFuZGVkUm93TWFwKHJlbWFpbmluZ0V4cGFuZGVkUm93TWFwKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBuZXdJdGVtSWRUb0V4cGFuZGVkUm93TWFwID0gX29iamVjdFNwcmVhZCh7fSwgaXRlbUlkVG9FeHBhbmRlZFJvd01hcCwgX2RlZmluZVByb3BlcnR5KHt9LCBpdGVtLmlkLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9leHBhbmRlZF9yb3cuQW5vbWFsaWVzVGFibGVFeHBhbmRlZFJvdywgewogICAgICAgIHBhcnRpdGlvbklkOiBpdGVtLnBhcnRpdGlvbklkLAogICAgICAgIHJlc3VsdHM6IHJlc3VsdHMsCiAgICAgICAgdG9wQW5vbWFseVNjb3JlOiBpdGVtLnRvcEFub21hbHlTY29yZSwKICAgICAgICBzZXRUaW1lUmFuZ2U6IHNldFRpbWVSYW5nZSwKICAgICAgICB0aW1lUmFuZ2U6IHRpbWVSYW5nZSwKICAgICAgICBqb2JJZDogam9iSWQKICAgICAgfSkpKTsKCiAgICAgIHNldEl0ZW1JZFRvRXhwYW5kZWRSb3dNYXAobmV3SXRlbUlkVG9FeHBhbmRlZFJvd01hcCk7CiAgICB9CiAgfSwgW2l0ZW1JZFRvRXhwYW5kZWRSb3dNYXAsIGpvYklkLCByZXN1bHRzLCBzZXRUaW1lUmFuZ2UsIHRpbWVSYW5nZV0pOwogIHZhciBjb2x1bW5zID0gW3sKICAgIGZpZWxkOiAncGFydGl0aW9uJywKICAgIG5hbWU6IHBhcnRpdGlvbkNvbHVtbk5hbWUsCiAgICBzb3J0YWJsZTogdHJ1ZSwKICAgIHRydW5jYXRlVGV4dDogdHJ1ZQogIH0sIHsKICAgIGZpZWxkOiAndG9wQW5vbWFseVNjb3JlJywKICAgIG5hbWU6IG1heEFub21hbHlTY29yZUNvbHVtbk5hbWUsCiAgICBzb3J0YWJsZTogdHJ1ZSwKICAgIHRydW5jYXRlVGV4dDogdHJ1ZSwKICAgIGRhdGFUeXBlOiAnbnVtYmVyJwogIH0sIHsKICAgIGFsaWduOiBfc2VydmljZXMuUklHSFRfQUxJR05NRU5ULAogICAgd2lkdGg6ICc0MHB4JywKICAgIGlzRXhwYW5kZXI6IHRydWUsCiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihpdGVtKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uSWNvbiwgewogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICByZXR1cm4gdG9nZ2xlRXhwYW5kZWRJdGVtcyhpdGVtKTsKICAgICAgICB9LAogICAgICAgICJhcmlhLWxhYmVsIjogaXRlbUlkVG9FeHBhbmRlZFJvd01hcFtpdGVtLmlkXSA/IGNvbGxhcHNlQXJpYUxhYmVsIDogZXhwYW5kQXJpYUxhYmVsLAogICAgICAgIGljb25UeXBlOiBpdGVtSWRUb0V4cGFuZGVkUm93TWFwW2l0ZW0uaWRdID8gJ2Fycm93VXAnIDogJ2Fycm93RG93bicKICAgICAgfSk7CiAgICB9CiAgfV07CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkRXVpQmFzaWNUYWJsZSwgewogICAgaXRlbXM6IHNvcnRlZFRhYmxlSXRlbXMsCiAgICBpdGVtSWQ6ICJpZCIsCiAgICBpdGVtSWRUb0V4cGFuZGVkUm93TWFwOiBpdGVtSWRUb0V4cGFuZGVkUm93TWFwLAogICAgaXNFeHBhbmRhYmxlOiB0cnVlLAogICAgaGFzQWN0aW9uczogdHJ1ZSwKICAgIGNvbHVtbnM6IGNvbHVtbnMsCiAgICBzb3J0aW5nOiBzb3J0aW5nLAogICAgb25DaGFuZ2U6IGhhbmRsZVRhYmxlQ2hhbmdlCiAgfSk7Cn07CgpleHBvcnRzLkFub21hbGllc1RhYmxlID0gQW5vbWFsaWVzVGFibGU7CnZhciBTdHlsZWRFdWlCYXNpY1RhYmxlID0gKDAsIF9ldWlfc3R5bGVkX2NvbXBvbmVudHMuZGVmYXVsdCkoX2V1aS5FdWlCYXNpY1RhYmxlKShfdGVtcGxhdGVPYmplY3QoKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQ=="},null]}