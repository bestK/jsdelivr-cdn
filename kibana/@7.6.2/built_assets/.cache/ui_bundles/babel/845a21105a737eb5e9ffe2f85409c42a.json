{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/data/public/search/expressions/esaggs.js","dependencies":[{"path":"src/legacy/core_plugins/data/public/search/expressions/esaggs.js","mtime":1585205039300},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmVzYWdncyA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfYWdnX2NvbmZpZ3MgPSByZXF1aXJlKCJ1aS9hZ2dfdHlwZXMvYWdnX2NvbmZpZ3MiKTsKCnZhciBfdXRpbGl0aWVzID0gcmVxdWlyZSgidWkvdmlzdWFsaXplL2xvYWRlci9waXBlbGluZV9oZWxwZXJzL3V0aWxpdGllcyIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi9wbHVnaW5zL2RhdGEvcHVibGljIik7Cgp2YXIgX2NvdXJpZXIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi91aS9wdWJsaWMvY291cmllciIpOwoKdmFyIF9idWlsZF90YWJ1bGFyX2luc3BlY3Rvcl9kYXRhID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vdWkvcHVibGljL2luc3BlY3Rvci9idWlsZF90YWJ1bGFyX2luc3BlY3Rvcl9kYXRhIik7Cgp2YXIgX3B1YmxpYzIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi92aXN1YWxpemF0aW9ucy9wdWJsaWMiKTsKCnZhciBfdGFiaWZ5ID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vdWkvcHVibGljL2FnZ19yZXNwb25zZS90YWJpZnkvdGFiaWZ5Iik7Cgp2YXIgX3NlcnZpY2VzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9kYXRhL3B1YmxpYy9zZXJ2aWNlcyIpOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCnZhciBuYW1lID0gJ2VzYWdncyc7Cgp2YXIgaGFuZGxlQ291cmllclJlcXVlc3QgPSBmdW5jdGlvbiBoYW5kbGVDb3VyaWVyUmVxdWVzdChfcmVmKSB7CiAgdmFyIHNlYXJjaFNvdXJjZSwgYWdncywgdGltZVJhbmdlLCBxdWVyeSwgZmlsdGVycywgZm9yY2VGZXRjaCwgcGFydGlhbFJvd3MsIG1ldHJpY3NBdEFsbExldmVscywgaW5zcGVjdG9yQWRhcHRlcnMsIGZpbHRlck1hbmFnZXIsIGFib3J0U2lnbmFsLCB0aW1lRmlsdGVyU2VhcmNoU291cmNlLCByZXF1ZXN0U2VhcmNoU291cmNlLCByZXFCb2R5LCBxdWVyeUhhc2gsIHNob3VsZFF1ZXJ5LCByZXF1ZXN0LCByZXNwb25zZSwgcmVzcCwgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiwgX2RpZEl0ZXJhdG9yRXJyb3IsIF9pdGVyYXRvckVycm9yLCBfaXRlcmF0b3IsIF9zdGVwLCBhZ2csIHBhcnNlZFRpbWVSYW5nZSwgdGFiaWZ5UGFyYW1zLCB0YWJpZnlDYWNoZUhhc2gsIHNob3VsZENhbGN1bGF0ZU5ld1RhYmlmeTsKCiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBoYW5kbGVDb3VyaWVyUmVxdWVzdCQoX2NvbnRleHQpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBzZWFyY2hTb3VyY2UgPSBfcmVmLnNlYXJjaFNvdXJjZSwgYWdncyA9IF9yZWYuYWdncywgdGltZVJhbmdlID0gX3JlZi50aW1lUmFuZ2UsIHF1ZXJ5ID0gX3JlZi5xdWVyeSwgZmlsdGVycyA9IF9yZWYuZmlsdGVycywgZm9yY2VGZXRjaCA9IF9yZWYuZm9yY2VGZXRjaCwgcGFydGlhbFJvd3MgPSBfcmVmLnBhcnRpYWxSb3dzLCBtZXRyaWNzQXRBbGxMZXZlbHMgPSBfcmVmLm1ldHJpY3NBdEFsbExldmVscywgaW5zcGVjdG9yQWRhcHRlcnMgPSBfcmVmLmluc3BlY3RvckFkYXB0ZXJzLCBmaWx0ZXJNYW5hZ2VyID0gX3JlZi5maWx0ZXJNYW5hZ2VyLCBhYm9ydFNpZ25hbCA9IF9yZWYuYWJvcnRTaWduYWw7IC8vIENyZWF0ZSBhIG5ldyBzZWFyY2ggc291cmNlIHRoYXQgaW5oZXJpdHMgdGhlIG9yaWdpbmFsIHNlYXJjaCBzb3VyY2UKICAgICAgICAgIC8vIGJ1dCBoYXMgdGhlIGFwcHJvcHJpYXRlIHRpbWVSYW5nZSBhcHBsaWVkIHZpYSBhIGZpbHRlci4KICAgICAgICAgIC8vIFRoaXMgaXMgYSB0ZW1wb3Jhcnkgc29sdXRpb24gdW50aWwgd2UgcHJvcGVybHkgcGFzcyBkb3duIGFsbCByZXF1aXJlZAogICAgICAgICAgLy8gaW5mb3JtYXRpb24gZm9yIHRoZSByZXF1ZXN0IHRvIHRoZSByZXF1ZXN0IGhhbmRsZXIgKGh0dHBzOi8vZ2l0aHViLmNvbS9lbGFzdGljL2tpYmFuYS9pc3N1ZXMvMTY2NDEpLgogICAgICAgICAgLy8gVXNpbmcgY2FsbFBhcmVudFN0YXJ0SGFuZGxlcnM6IHRydWUgd2UgbWFrZSBzdXJlLCB0aGF0IHRoZSBwYXJlbnQgc2VhcmNoU291cmNlCiAgICAgICAgICAvLyBvblNlYXJjaFJlcXVlc3RTdGFydCB3aWxsIGJlIGNhbGxlZCBwcm9wZXJseSBldmVuIHRob3VnaCB3ZSB1c2UgYW4gaW5oZXJpdGVkCiAgICAgICAgICAvLyBzZWFyY2ggc291cmNlLgoKICAgICAgICAgIHRpbWVGaWx0ZXJTZWFyY2hTb3VyY2UgPSBzZWFyY2hTb3VyY2UuY3JlYXRlQ2hpbGQoewogICAgICAgICAgICBjYWxsUGFyZW50U3RhcnRIYW5kbGVyczogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICByZXF1ZXN0U2VhcmNoU291cmNlID0gdGltZUZpbHRlclNlYXJjaFNvdXJjZS5jcmVhdGVDaGlsZCh7CiAgICAgICAgICAgIGNhbGxQYXJlbnRTdGFydEhhbmRsZXJzOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICAgIGFnZ3Muc2V0VGltZVJhbmdlKHRpbWVSYW5nZSk7IC8vIEZvciBub3cgd2UgbmVlZCB0byBtaXJyb3IgdGhlIGhpc3Rvcnkgb2YgdGhlIHBhc3NlZCBzZWFyY2ggc291cmNlLCBzaW5jZQogICAgICAgICAgLy8gdGhlIHJlcXVlc3QgaW5zcGVjdG9yIHdvdWxkbid0IHdvcmsgb3RoZXJ3aXNlLgoKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXF1ZXN0U2VhcmNoU291cmNlLCAnaGlzdG9yeScsIHsKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNlYXJjaFNvdXJjZS5oaXN0b3J5OwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChoaXN0b3J5KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNlYXJjaFNvdXJjZS5oaXN0b3J5ID0gaGlzdG9yeTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICByZXF1ZXN0U2VhcmNoU291cmNlLnNldEZpZWxkKCdhZ2dzJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gYWdncy50b0RzbChtZXRyaWNzQXRBbGxMZXZlbHMpOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXF1ZXN0U2VhcmNoU291cmNlLm9uUmVxdWVzdFN0YXJ0KGZ1bmN0aW9uIChwYXJhbVNlYXJjaFNvdXJjZSwgb3B0aW9ucykgewogICAgICAgICAgICByZXR1cm4gYWdncy5vblNlYXJjaFJlcXVlc3RTdGFydChwYXJhbVNlYXJjaFNvdXJjZSwgb3B0aW9ucyk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAodGltZVJhbmdlKSB7CiAgICAgICAgICAgIHRpbWVGaWx0ZXJTZWFyY2hTb3VyY2Uuc2V0RmllbGQoJ2ZpbHRlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gKDAsIF9wdWJsaWMuZ2V0VGltZSkoc2VhcmNoU291cmNlLmdldEZpZWxkKCdpbmRleCcpLCB0aW1lUmFuZ2UpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXF1ZXN0U2VhcmNoU291cmNlLnNldEZpZWxkKCdmaWx0ZXInLCBmaWx0ZXJzKTsKICAgICAgICAgIHJlcXVlc3RTZWFyY2hTb3VyY2Uuc2V0RmllbGQoJ3F1ZXJ5JywgcXVlcnkpOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChyZXF1ZXN0U2VhcmNoU291cmNlLmdldFNlYXJjaFJlcXVlc3RCb2R5KCkpOwoKICAgICAgICBjYXNlIDEyOgogICAgICAgICAgcmVxQm9keSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICBxdWVyeUhhc2ggPSAoMCwgX3B1YmxpYzIuY2FsY3VsYXRlT2JqZWN0SGFzaCkocmVxQm9keSk7IC8vIFdlIG9ubHkgbmVlZCB0byByZWV4ZWN1dGUgdGhlIHF1ZXJ5LCBpZiBmb3JjZUZldGNoIHdhcyB0cnVlIG9yIHRoZSBoYXNoIG9mIHRoZSByZXF1ZXN0IGJvZHkgaGFzIGNoYW5nZWQKICAgICAgICAgIC8vIHNpbmNlIHRoZSBsYXN0IHJlcXVlc3QKCiAgICAgICAgICBzaG91bGRRdWVyeSA9IGZvcmNlRmV0Y2ggfHwgc2VhcmNoU291cmNlLmxhc3RRdWVyeSAhPT0gcXVlcnlIYXNoOwoKICAgICAgICAgIGlmICghc2hvdWxkUXVlcnkpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM1OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBpbnNwZWN0b3JBZGFwdGVycy5yZXF1ZXN0cy5yZXNldCgpOwogICAgICAgICAgcmVxdWVzdCA9IGluc3BlY3RvckFkYXB0ZXJzLnJlcXVlc3RzLnN0YXJ0KF9pMThuLmkxOG4udHJhbnNsYXRlKCdkYXRhLmZ1bmN0aW9ucy5lc2FnZ3MuaW5zcGVjdG9yLmRhdGFSZXF1ZXN0LnRpdGxlJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0RhdGEnCiAgICAgICAgICB9KSwgewogICAgICAgICAgICBkZXNjcmlwdGlvbjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2RhdGEuZnVuY3Rpb25zLmVzYWdncy5pbnNwZWN0b3IuZGF0YVJlcXVlc3QuZGVzY3JpcHRpb24nLCB7CiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUaGlzIHJlcXVlc3QgcXVlcmllcyBFbGFzdGljc2VhcmNoIHRvIGZldGNoIHRoZSBkYXRhIGZvciB0aGUgdmlzdWFsaXphdGlvbi4nCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KTsKICAgICAgICAgIHJlcXVlc3Quc3RhdHMoKDAsIF9jb3VyaWVyLmdldFJlcXVlc3RJbnNwZWN0b3JTdGF0cykocmVxdWVzdFNlYXJjaFNvdXJjZSkpOwogICAgICAgICAgX2NvbnRleHQucHJldiA9IDE5OwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChyZXF1ZXN0U2VhcmNoU291cmNlLmZldGNoKHsKICAgICAgICAgICAgYWJvcnRTaWduYWw6IGFib3J0U2lnbmFsCiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMjI6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICBzZWFyY2hTb3VyY2UubGFzdFF1ZXJ5ID0gcXVlcnlIYXNoOwogICAgICAgICAgcmVxdWVzdC5zdGF0cygoMCwgX2NvdXJpZXIuZ2V0UmVzcG9uc2VJbnNwZWN0b3JTdGF0cykoc2VhcmNoU291cmNlLCByZXNwb25zZSkpLm9rKHsKICAgICAgICAgICAganNvbjogcmVzcG9uc2UKICAgICAgICAgIH0pOwogICAgICAgICAgc2VhcmNoU291cmNlLnJhd1Jlc3BvbnNlID0gcmVzcG9uc2U7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzI7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyODoKICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyODsKICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMTkpOyAvLyBMb2cgYW55IGVycm9yIGR1cmluZyByZXF1ZXN0IHRvIHRoZSBpbnNwZWN0b3IKCiAgICAgICAgICByZXF1ZXN0LmVycm9yKHsKICAgICAgICAgICAganNvbjogX2NvbnRleHQudDAKICAgICAgICAgIH0pOwogICAgICAgICAgdGhyb3cgX2NvbnRleHQudDA7CgogICAgICAgIGNhc2UgMzI6CiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzI7IC8vIEFkZCB0aGUgcmVxdWVzdCBib2R5IG5vIG1hdHRlciBpZiB0aGluZ3Mgd2VudCBmaW5lIG9yIG5vdAoKICAgICAgICAgIHJlcXVlc3RTZWFyY2hTb3VyY2UuZ2V0U2VhcmNoUmVxdWVzdEJvZHkoKS50aGVuKGZ1bmN0aW9uIChyZXEpIHsKICAgICAgICAgICAgcmVxdWVzdC5qc29uKHJlcSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMzIpOwoKICAgICAgICBjYXNlIDM1OgogICAgICAgICAgLy8gTm90ZSB0aGF0IHJhd1Jlc3BvbnNlIGlzIG5vdCBkZWVwbHkgY2xvbmVkIGhlcmUsIHNvIGRvd25zdHJlYW0gYXBwbGljYXRpb25zIHVzaW5nIGNvdXJpZXIKICAgICAgICAgIC8vIG11c3QgdGFrZSBjYXJlIG5vdCB0byBtdXRhdGUgaXQsIG9yIGl0IGNvdWxkIGhhdmUgdW5pbnRlbmRlZCBzaWRlIGVmZmVjdHMsIGUuZy4gZGlzcGxheWluZwogICAgICAgICAgLy8gcmVzcG9uc2UgZGF0YSBpbmNvcnJlY3RseSBpbiB0aGUgaW5zcGVjdG9yLgogICAgICAgICAgcmVzcCA9IHNlYXJjaFNvdXJjZS5yYXdSZXNwb25zZTsKICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkOwogICAgICAgICAgX2NvbnRleHQucHJldiA9IDM5OwogICAgICAgICAgX2l0ZXJhdG9yID0gYWdncy5hZ2dzW1N5bWJvbC5pdGVyYXRvcl0oKTsKCiAgICAgICAgY2FzZSA0MToKICAgICAgICAgIGlmIChfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFnZyA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgIGlmICghKDAsIF9sb2Rhc2guaGFzKShhZ2csICd0eXBlLnBvc3RGbGlnaHRSZXF1ZXN0JykpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ3OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDY7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGFnZy50eXBlLnBvc3RGbGlnaHRSZXF1ZXN0KHJlc3AsIGFnZ3MsIGFnZywgcmVxdWVzdFNlYXJjaFNvdXJjZSwgaW5zcGVjdG9yQWRhcHRlcnMsIGFib3J0U2lnbmFsKSk7CgogICAgICAgIGNhc2UgNDY6CiAgICAgICAgICByZXNwID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgY2FzZSA0NzoKICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQxOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNTA6CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTY7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA1MjoKICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA1MjsKICAgICAgICAgIF9jb250ZXh0LnQxID0gX2NvbnRleHRbImNhdGNoIl0oMzkpOwogICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBfY29udGV4dC50MTsKCiAgICAgICAgY2FzZSA1NjoKICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA1NjsKICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA1NzsKCiAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTsKICAgICAgICAgIH0KCiAgICAgICAgY2FzZSA1OToKICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA1OTsKCiAgICAgICAgICBpZiAoIV9kaWRJdGVyYXRvckVycm9yKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2MjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CgogICAgICAgIGNhc2UgNjI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDU5KTsKCiAgICAgICAgY2FzZSA2MzoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goNTYpOwoKICAgICAgICBjYXNlIDY0OgogICAgICAgICAgc2VhcmNoU291cmNlLmZpbmFsUmVzcG9uc2UgPSByZXNwOwogICAgICAgICAgcGFyc2VkVGltZVJhbmdlID0gdGltZVJhbmdlID8gKDAsIF9wdWJsaWMuZ2V0VGltZSkoYWdncy5pbmRleFBhdHRlcm4sIHRpbWVSYW5nZSkgOiBudWxsOwogICAgICAgICAgdGFiaWZ5UGFyYW1zID0gewogICAgICAgICAgICBtZXRyaWNzQXRBbGxMZXZlbHM6IG1ldHJpY3NBdEFsbExldmVscywKICAgICAgICAgICAgcGFydGlhbFJvd3M6IHBhcnRpYWxSb3dzLAogICAgICAgICAgICB0aW1lUmFuZ2U6IHBhcnNlZFRpbWVSYW5nZSA/IHBhcnNlZFRpbWVSYW5nZS5yYW5nZSA6IHVuZGVmaW5lZAogICAgICAgICAgfTsKICAgICAgICAgIHRhYmlmeUNhY2hlSGFzaCA9ICgwLCBfcHVibGljMi5jYWxjdWxhdGVPYmplY3RIYXNoKShfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgdGFiaWZ5QWdnczogYWdncwogICAgICAgICAgfSwgdGFiaWZ5UGFyYW1zKSk7IC8vIFdlIG9ubHkgbmVlZCB0byByZWV4ZWN1dGUgdGFiaWZ5LCBpZiBlaXRoZXIgd2UgZGlkIGEgbmV3IHJlcXVlc3Qgb3Igc29tZSBpbnB1dCBwYXJhbXMgdG8gdGFiaWZ5IGNoYW5nZWQKCiAgICAgICAgICBzaG91bGRDYWxjdWxhdGVOZXdUYWJpZnkgPSBzaG91bGRRdWVyeSB8fCBzZWFyY2hTb3VyY2UubGFzdFRhYmlmeUhhc2ggIT09IHRhYmlmeUNhY2hlSGFzaDsKCiAgICAgICAgICBpZiAoc2hvdWxkQ2FsY3VsYXRlTmV3VGFiaWZ5KSB7CiAgICAgICAgICAgIHNlYXJjaFNvdXJjZS5sYXN0VGFiaWZ5SGFzaCA9IHRhYmlmeUNhY2hlSGFzaDsKICAgICAgICAgICAgc2VhcmNoU291cmNlLnRhYmlmaWVkUmVzcG9uc2UgPSAoMCwgX3RhYmlmeS50YWJpZnlBZ2dSZXNwb25zZSkoYWdncywgc2VhcmNoU291cmNlLmZpbmFsUmVzcG9uc2UsIHRhYmlmeVBhcmFtcyk7CiAgICAgICAgICB9CgogICAgICAgICAgaW5zcGVjdG9yQWRhcHRlcnMuZGF0YS5zZXRUYWJ1bGFyTG9hZGVyKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBfYnVpbGRfdGFidWxhcl9pbnNwZWN0b3JfZGF0YS5idWlsZFRhYnVsYXJJbnNwZWN0b3JEYXRhKShzZWFyY2hTb3VyY2UudGFiaWZpZWRSZXNwb25zZSwgZmlsdGVyTWFuYWdlcik7CiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHJldHVybnNGb3JtYXR0ZWRWYWx1ZXM6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgc2VhcmNoU291cmNlLnRhYmlmaWVkUmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDcyOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1sxOSwgMjgsIDMyLCAzNV0sIFszOSwgNTIsIDU2LCA2NF0sIFs1NywsIDU5LCA2M11dKTsKfTsKCnZhciBlc2FnZ3MgPSBmdW5jdGlvbiBlc2FnZ3MoKSB7CiAgcmV0dXJuIHsKICAgIG5hbWU6IG5hbWUsCiAgICB0eXBlOiAna2liYW5hX2RhdGF0YWJsZScsCiAgICBjb250ZXh0OiB7CiAgICAgIHR5cGVzOiBbJ2tpYmFuYV9jb250ZXh0JywgJ251bGwnXQogICAgfSwKICAgIGhlbHA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdkYXRhLmZ1bmN0aW9ucy5lc2FnZ3MuaGVscCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSdW4gQWdnQ29uZmlnIGFnZ3JlZ2F0aW9uJwogICAgfSksCiAgICBhcmdzOiB7CiAgICAgIGluZGV4OiB7CiAgICAgICAgdHlwZXM6IFsnc3RyaW5nJ10sCiAgICAgICAgaGVscDogJycKICAgICAgfSwKICAgICAgbWV0cmljc0F0QWxsTGV2ZWxzOiB7CiAgICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLAogICAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICAgIGhlbHA6ICcnCiAgICAgIH0sCiAgICAgIHBhcnRpYWxSb3dzOiB7CiAgICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLAogICAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICAgIGhlbHA6ICcnCiAgICAgIH0sCiAgICAgIGluY2x1ZGVGb3JtYXRIaW50czogewogICAgICAgIHR5cGVzOiBbJ2Jvb2xlYW4nXSwKICAgICAgICBkZWZhdWx0OiBmYWxzZSwKICAgICAgICBoZWxwOiAnJwogICAgICB9LAogICAgICBhZ2dDb25maWdzOiB7CiAgICAgICAgdHlwZXM6IFsnc3RyaW5nJ10sCiAgICAgICAgZGVmYXVsdDogJyIiJywKICAgICAgICBoZWxwOiAnJwogICAgICB9CiAgICB9LAogICAgZm46IGZ1bmN0aW9uIGZuKGNvbnRleHQsIGFyZ3MsIF9yZWYyKSB7CiAgICAgIHZhciBpbnNwZWN0b3JBZGFwdGVycywgYWJvcnRTaWduYWwsIGluZGV4UGF0dGVybnMsIF9nZXRRdWVyeVNlcnZpY2UsIGZpbHRlck1hbmFnZXIsIGFnZ0NvbmZpZ3NTdGF0ZSwgaW5kZXhQYXR0ZXJuLCBhZ2dzLCBzZWFyY2hTb3VyY2UsIHJlc3BvbnNlLCB0YWJsZTsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZm4kKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGluc3BlY3RvckFkYXB0ZXJzID0gX3JlZjIuaW5zcGVjdG9yQWRhcHRlcnMsIGFib3J0U2lnbmFsID0gX3JlZjIuYWJvcnRTaWduYWw7CiAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJucyA9ICgwLCBfc2VydmljZXMuZ2V0SW5kZXhQYXR0ZXJucykoKTsKICAgICAgICAgICAgICBfZ2V0UXVlcnlTZXJ2aWNlID0gKDAsIF9zZXJ2aWNlcy5nZXRRdWVyeVNlcnZpY2UpKCksIGZpbHRlck1hbmFnZXIgPSBfZ2V0UXVlcnlTZXJ2aWNlLmZpbHRlck1hbmFnZXI7CiAgICAgICAgICAgICAgYWdnQ29uZmlnc1N0YXRlID0gSlNPTi5wYXJzZShhcmdzLmFnZ0NvbmZpZ3MpOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGluZGV4UGF0dGVybnMuZ2V0KGFyZ3MuaW5kZXgpKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBpbmRleFBhdHRlcm4gPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBhZ2dzID0gbmV3IF9hZ2dfY29uZmlncy5BZ2dDb25maWdzKGluZGV4UGF0dGVybiwgYWdnQ29uZmlnc1N0YXRlKTsgLy8gd2Ugc2hvdWxkIG1vdmUgc2VhcmNoU291cmNlIGNyZWF0aW9uIGluc2lkZSBjb3VyaWVyIHJlcXVlc3QgaGFuZGxlcgoKICAgICAgICAgICAgICBzZWFyY2hTb3VyY2UgPSBuZXcgX2NvdXJpZXIuU2VhcmNoU291cmNlKCk7CiAgICAgICAgICAgICAgc2VhcmNoU291cmNlLnNldEZpZWxkKCdpbmRleCcsIGluZGV4UGF0dGVybik7CiAgICAgICAgICAgICAgc2VhcmNoU291cmNlLnNldEZpZWxkKCdzaXplJywgMCk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGhhbmRsZUNvdXJpZXJSZXF1ZXN0KHsKICAgICAgICAgICAgICAgIHNlYXJjaFNvdXJjZTogc2VhcmNoU291cmNlLAogICAgICAgICAgICAgICAgYWdnczogYWdncywKICAgICAgICAgICAgICAgIHRpbWVSYW5nZTogKDAsIF9sb2Rhc2guZ2V0KShjb250ZXh0LCAndGltZVJhbmdlJywgdW5kZWZpbmVkKSwKICAgICAgICAgICAgICAgIHF1ZXJ5OiAoMCwgX2xvZGFzaC5nZXQpKGNvbnRleHQsICdxdWVyeScsIHVuZGVmaW5lZCksCiAgICAgICAgICAgICAgICBmaWx0ZXJzOiAoMCwgX2xvZGFzaC5nZXQpKGNvbnRleHQsICdmaWx0ZXJzJywgdW5kZWZpbmVkKSwKICAgICAgICAgICAgICAgIGZvcmNlRmV0Y2g6IHRydWUsCiAgICAgICAgICAgICAgICBtZXRyaWNzQXRBbGxMZXZlbHM6IGFyZ3MubWV0cmljc0F0QWxsTGV2ZWxzLAogICAgICAgICAgICAgICAgcGFydGlhbFJvd3M6IGFyZ3MucGFydGlhbFJvd3MsCiAgICAgICAgICAgICAgICBpbnNwZWN0b3JBZGFwdGVyczogaW5zcGVjdG9yQWRhcHRlcnMsCiAgICAgICAgICAgICAgICBmaWx0ZXJNYW5hZ2VyOiBmaWx0ZXJNYW5hZ2VyLAogICAgICAgICAgICAgICAgYWJvcnRTaWduYWw6IGFib3J0U2lnbmFsCiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIHRhYmxlID0gewogICAgICAgICAgICAgICAgdHlwZTogJ2tpYmFuYV9kYXRhdGFibGUnLAogICAgICAgICAgICAgICAgcm93czogcmVzcG9uc2Uucm93cywKICAgICAgICAgICAgICAgIGNvbHVtbnM6IHJlc3BvbnNlLmNvbHVtbnMubWFwKGZ1bmN0aW9uIChjb2x1bW4pIHsKICAgICAgICAgICAgICAgICAgdmFyIGNsZWFuZWRDb2x1bW4gPSB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5pZCwKICAgICAgICAgICAgICAgICAgICBuYW1lOiBjb2x1bW4ubmFtZQogICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuaW5jbHVkZUZvcm1hdEhpbnRzKSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYW5lZENvbHVtbi5mb3JtYXRIaW50ID0gKDAsIF91dGlsaXRpZXMuY3JlYXRlRm9ybWF0KShjb2x1bW4uYWdnQ29uZmlnKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsZWFuZWRDb2x1bW47CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHRhYmxlKTsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Owp9OwoKZXhwb3J0cy5lc2FnZ3MgPSBlc2FnZ3M7"},null]}