{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/tile_map/public/base_maps_visualization.js","dependencies":[{"path":"src/legacy/core_plugins/tile_map/public/base_maps_visualization.js","mtime":1585205040095},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkJhc2VNYXBzVmlzdWFsaXphdGlvblByb3ZpZGVyID0gQmFzZU1hcHNWaXN1YWxpemF0aW9uUHJvdmlkZXI7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2tpYmFuYV9tYXAgPSByZXF1aXJlKCJ1aS92aXMvbWFwL2tpYmFuYV9tYXAiKTsKCnZhciBSeCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJ4anMiKSk7Cgp2YXIgX29wZXJhdG9ycyA9IHJlcXVpcmUoInJ4anMvb3BlcmF0b3JzIik7CgpyZXF1aXJlKCJ1aS92aXMvbWFwL3NlcnZpY2Vfc2V0dGluZ3MiKTsKCnZhciBfbm90aWZ5ID0gcmVxdWlyZSgidWkvbm90aWZ5Iik7Cgp2YXIgX2Nocm9tZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgidWkvY2hyb21lIikpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9Cgp2YXIgV01TX01JTlpPT00gPSAwOwp2YXIgV01TX01BWFpPT00gPSAyMjsgLy9pbmNyZWFzZSB0aGlzIHRvIDIyLiBCZXR0ZXIgZm9yIFdNUwoKZnVuY3Rpb24gQmFzZU1hcHNWaXN1YWxpemF0aW9uUHJvdmlkZXIoc2VydmljZVNldHRpbmdzKSB7CiAgLyoqCiAgICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgYSB2aXN1YWxpemF0aW9uIGNvbnNpc3Rpbmcgb2YgYSBtYXAgd2l0aCBhIHNpbmdsZSBiYXNlbGF5ZXIuCiAgICogQGNsYXNzIEJhc2VNYXBzVmlzdWFsaXphdGlvbgogICAqIEBjb25zdHJ1Y3RvcgogICAqLwogIHJldHVybiAoCiAgICAvKiNfX1BVUkVfXyovCiAgICBmdW5jdGlvbiAoKSB7CiAgICAgIGZ1bmN0aW9uIEJhc2VNYXBzVmlzdWFsaXphdGlvbihlbGVtZW50LCB2aXMpIHsKICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQmFzZU1hcHNWaXN1YWxpemF0aW9uKTsKCiAgICAgICAgdGhpcy52aXMgPSB2aXM7CiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZWxlbWVudDsKICAgICAgICB0aGlzLl9raWJhbmFNYXAgPSBudWxsOwogICAgICAgIHRoaXMuX2NoYXJ0RGF0YSA9IG51bGw7IC8vcmVmZXJlbmNlIHRvIGRhdGEgY3VycmVudGx5IG9uIHRoZSBtYXAuCgogICAgICAgIHRoaXMuX2Jhc2VMYXllckRpcnR5ID0gdHJ1ZTsKICAgICAgICB0aGlzLl9tYXBJc0xvYWRlZCA9IHRoaXMuX21ha2VLaWJhbmFNYXAoKTsKICAgICAgfQoKICAgICAgX2NyZWF0ZUNsYXNzKEJhc2VNYXBzVmlzdWFsaXphdGlvbiwgW3sKICAgICAgICBrZXk6ICJpc0xvYWRlZCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzTG9hZGVkKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuX21hcElzTG9hZGVkOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogImRlc3Ryb3kiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkgewogICAgICAgICAgaWYgKHRoaXMuX2tpYmFuYU1hcCkgewogICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAuZGVzdHJveSgpOwoKICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogSW1wbGVtZW50YXRpb24gb2YgVmlzdWFsaXphdGlvbiNyZW5kZXIuCiAgICAgICAgICogQ2hpbGQtY2xhc3NlcyBjYW4gZXh0ZW5kIHRoaXMgbWV0aG9kIGlmIHRoZSByZW5kZXItY29tcGxldGUgZnVuY3Rpb24gcmVxdWlyZXMgbW9yZSB0aW1lIHVudGlsIHJlbmRlcmluZyBoYXMgY29tcGxldGVkLgogICAgICAgICAqIEBwYXJhbSBlc1Jlc3BvbnNlCiAgICAgICAgICogQHBhcmFtIHN0YXR1cwogICAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9CiAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAicmVuZGVyIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKGVzUmVzcG9uc2UsIHZpc1BhcmFtcywgc3RhdHVzKSB7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJlbmRlciQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9raWJhbmFNYXApIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLl9tYXBJc0xvYWRlZCk7CgogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLnJlc2l6ZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5yZXNpemUoKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKCEoc3RhdHVzLnBhcmFtcyB8fCBzdGF0dXMuYWdncykpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyYW1zID0gdmlzUGFyYW1zOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLl91cGRhdGVQYXJhbXMoKSk7CgogICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2hhc0VTUmVzcG9uc2VDaGFuZ2VkKGVzUmVzcG9uc2UpKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fdXBkYXRlRGF0YShlc1Jlc3BvbnNlKSk7CgogICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cy51aVN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLnVzZVVpU3RhdGVGcm9tVmlzdWFsaXphdGlvbih0aGlzLnZpcyk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLl93aGVuQmFzZUxheWVySXNMb2FkZWQoKSk7CgogICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBudWxsLCB0aGlzKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBhIGtpYmFuYS1tYXAgd2l0aCBhIHNpbmdsZSBiYXNlbGF5ZXIgYW5kIGFzc2lnbnMgaXQgdG8gdGhlIHRoaXMuX2tpYmFuYU1hcCBwcm9wZXJ0eS4KICAgICAgICAgKiBDbGllbnRzIGNhbiBvdmVycmlkZSB0aGlzIG1ldGhvZCB0byBjdXN0b21pemUgdGhlIGluaXRpYWxpemF0aW9uLgogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAiX21ha2VLaWJhbmFNYXAiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfbWFrZUtpYmFuYU1hcCgpIHsKICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgICAgdmFyIG9wdGlvbnMsIHVpU3RhdGUsIHpvb21Gcm9tVWlTdGF0ZSwgY2VudGVyRnJvbVVJU3RhdGU7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9tYWtlS2liYW5hTWFwJChfY29udGV4dDIpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICAgICAgICAgICAgICB1aVN0YXRlID0gdGhpcy52aXMuZ2V0VWlTdGF0ZSgpOwogICAgICAgICAgICAgICAgICB6b29tRnJvbVVpU3RhdGUgPSBwYXJzZUludCh1aVN0YXRlLmdldCgnbWFwWm9vbScpKTsKICAgICAgICAgICAgICAgICAgY2VudGVyRnJvbVVJU3RhdGUgPSB1aVN0YXRlLmdldCgnbWFwQ2VudGVyJyk7CiAgICAgICAgICAgICAgICAgIG9wdGlvbnMuem9vbSA9ICFpc05hTih6b29tRnJvbVVpU3RhdGUpID8gem9vbUZyb21VaVN0YXRlIDogdGhpcy52aXMucGFyYW1zLm1hcFpvb207CiAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY2VudGVyID0gY2VudGVyRnJvbVVJU3RhdGUgPyBjZW50ZXJGcm9tVUlTdGF0ZSA6IHRoaXMudmlzLnBhcmFtcy5tYXBDZW50ZXI7CiAgICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcCA9IG5ldyBfa2liYW5hX21hcC5LaWJhbmFNYXAodGhpcy5fY29udGFpbmVyLCBvcHRpb25zKTsKCiAgICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5zZXRNaW5ab29tKFdNU19NSU5aT09NKTsgLy91c2UgYSBkZWZhdWx0CgoKICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLnNldE1heFpvb20oV01TX01BWFpPT00pOyAvL3VzZSBhIGRlZmF1bHQKCgogICAgICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAuYWRkTGVnZW5kQ29udHJvbCgpOwoKICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLmFkZEZpdENvbnRyb2woKTsKCiAgICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5wZXJzaXN0VWlTdGF0ZUZvclZpc3VhbGl6YXRpb24odGhpcy52aXMpOwoKICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLm9uKCdiYXNlTGF5ZXI6bG9hZGVkJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLl9iYXNlTGF5ZXJEaXJ0eSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5vbignYmFzZUxheWVyOmxvYWRpbmcnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2Jhc2VMYXllckRpcnR5ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuX3VwZGF0ZUJhc2VMYXllcigpKTsKCiAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBudWxsLCB0aGlzKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfdG1zQ29uZmlndXJlZCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF90bXNDb25maWd1cmVkKCkgewogICAgICAgICAgdmFyIF90aGlzJF9nZXRNYXBzUGFyYW1zID0gdGhpcy5fZ2V0TWFwc1BhcmFtcygpLAogICAgICAgICAgICAgIHdtcyA9IF90aGlzJF9nZXRNYXBzUGFyYW1zLndtczsKCiAgICAgICAgICB2YXIgaGFzVG1zQmFzZUxheWVyID0gISF3bXMuc2VsZWN0ZWRUbXNMYXllcjsKICAgICAgICAgIHJldHVybiBoYXNUbXNCYXNlTGF5ZXI7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3dtc0NvbmZpZ3VyZWQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfd21zQ29uZmlndXJlZCgpIHsKICAgICAgICAgIHZhciBfdGhpcyRfZ2V0TWFwc1BhcmFtczIgPSB0aGlzLl9nZXRNYXBzUGFyYW1zKCksCiAgICAgICAgICAgICAgd21zID0gX3RoaXMkX2dldE1hcHNQYXJhbXMyLndtczsKCiAgICAgICAgICB2YXIgaGFzV21zQmFzZUxheWVyID0gISF3bXMuZW5hYmxlZDsKICAgICAgICAgIHJldHVybiBoYXNXbXNCYXNlTGF5ZXI7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3VwZGF0ZUJhc2VMYXllciIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVCYXNlTGF5ZXIoKSB7CiAgICAgICAgICB2YXIgZW1zVGlsZUxheWVySWQsIG1hcFBhcmFtcywgdG1zU2VydmljZXMsIHVzZXJDb25maWd1cmVkVG1zTGF5ZXIsIGluaXRCYXNlbWFwTGF5ZXIsIHNlbGVjdGVkVG1zTGF5ZXI7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF91cGRhdGVCYXNlTGF5ZXIkKF9jb250ZXh0MykgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBlbXNUaWxlTGF5ZXJJZCA9IF9jaHJvbWUuZGVmYXVsdC5nZXRJbmplY3RlZCgnZW1zVGlsZUxheWVySWQnLCB0cnVlKTsKCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9raWJhbmFNYXApIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIG1hcFBhcmFtcyA9IHRoaXMuX2dldE1hcHNQYXJhbXMoKTsKCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl90bXNDb25maWd1cmVkKCkpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDU7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzZXJ2aWNlU2V0dGluZ3MuZ2V0VE1TU2VydmljZXMoKSk7CgogICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICB0bXNTZXJ2aWNlcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgICB1c2VyQ29uZmlndXJlZFRtc0xheWVyID0gdG1zU2VydmljZXNbMF07CiAgICAgICAgICAgICAgICAgIGluaXRCYXNlbWFwTGF5ZXIgPSB1c2VyQ29uZmlndXJlZFRtc0xheWVyID8gdXNlckNvbmZpZ3VyZWRUbXNMYXllciA6IHRtc1NlcnZpY2VzLmZpbmQoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5pZCA9PT0gZW1zVGlsZUxheWVySWQuYnJpZ2h0OwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGlmIChpbml0QmFzZW1hcExheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0VG1zTGF5ZXIoaW5pdEJhc2VtYXBMYXllcik7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTQ7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSg1KTsKCiAgICAgICAgICAgICAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZFdhcm5pbmcoX2NvbnRleHQzLnQwLm1lc3NhZ2UpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl93bXNDb25maWd1cmVkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChXTVNfTUlOWk9PTSA+IHRoaXMuX2tpYmFuYU1hcC5nZXRNYXhab29tTGV2ZWwoKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAuc2V0TWluWm9vbShXTVNfTUlOWk9PTSk7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAuc2V0TWF4Wm9vbShXTVNfTUFYWk9PTSk7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLnNldEJhc2VMYXllcih7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VMYXllclR5cGU6ICd3bXMnLAogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5ab29tOiBXTVNfTUlOWk9PTSwKICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhab29tOiBXTVNfTUFYWk9PTSwKICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG1hcFBhcmFtcy53bXMudXJsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIG1hcFBhcmFtcy53bXMub3B0aW9ucykKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fdG1zQ29uZmlndXJlZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFRtc0xheWVyID0gbWFwUGFyYW1zLndtcy5zZWxlY3RlZFRtc0xheWVyOwoKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldFRtc0xheWVyKHNlbGVjdGVkVG1zTGF5ZXIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodG1zTG9hZGluZ0Vycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkV2FybmluZyh0bXNMb2FkaW5nRXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBudWxsLCB0aGlzLCBbWzUsIDE0XV0pOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIl9zZXRUbXNMYXllciIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRUbXNMYXllcih0bXNMYXllcikgewogICAgICAgICAgdmFyIGlzRGVzYXR1cmF0ZWQsIGlzRGFya01vZGUsIG1ldGEsIHNob3dab29tTWVzc2FnZSwgb3B0aW9uczsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX3NldFRtc0xheWVyJChfY29udGV4dDQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLnNldE1pblpvb20odG1zTGF5ZXIubWluWm9vbSk7CgogICAgICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAuc2V0TWF4Wm9vbSh0bXNMYXllci5tYXhab29tKTsKCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9raWJhbmFNYXAuZ2V0Wm9vbUxldmVsKCkgPiB0bXNMYXllci5tYXhab29tKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLnNldFpvb21MZXZlbCh0bXNMYXllci5tYXhab29tKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaXNEZXNhdHVyYXRlZCA9IHRoaXMuX2dldE1hcHNQYXJhbXMoKS5pc0Rlc2F0dXJhdGVkOwoKICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpc0Rlc2F0dXJhdGVkICE9PSAnYm9vbGVhbicpIHsKICAgICAgICAgICAgICAgICAgICBpc0Rlc2F0dXJhdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaXNEYXJrTW9kZSA9IF9jaHJvbWUuZGVmYXVsdC5nZXRVaVNldHRpbmdzQ2xpZW50KCkuZ2V0KCd0aGVtZTpkYXJrTW9kZScpOwogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VydmljZVNldHRpbmdzLmdldEF0dHJpYnV0ZXNGb3JUTVNMYXllcih0bXNMYXllciwgaXNEZXNhdHVyYXRlZCwgaXNEYXJrTW9kZSkpOwoKICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgbWV0YSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgICBzaG93Wm9vbU1lc3NhZ2UgPSBzZXJ2aWNlU2V0dGluZ3Muc2hvdWxkU2hvd1pvb21NZXNzYWdlKHRtc0xheWVyKTsKICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IF9sb2Rhc2guZGVmYXVsdC5jbG9uZURlZXAodG1zTGF5ZXIpOwogICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5pZDsKICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuc3ViZG9tYWluczsKCiAgICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5zZXRCYXNlTGF5ZXIoewogICAgICAgICAgICAgICAgICAgIGJhc2VMYXllclR5cGU6ICd0bXMnLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMsIHsKICAgICAgICAgICAgICAgICAgICAgIHNob3dab29tTWVzc2FnZTogc2hvd1pvb21NZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgfSwgbWV0YSkKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3VwZGF0ZURhdGEiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlRGF0YSgpIHsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX3VwZGF0ZURhdGEkKF9jb250ZXh0NSkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3RpbGVNYXAuYmFzZU1hcHNWaXN1YWxpemF0aW9uLmNoaWxkU2hvdWxkSW1wbGVtZW50TWV0aG9kRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ2hpbGQgc2hvdWxkIGltcGxlbWVudCB0aGlzIG1ldGhvZCB0byByZXNwb25kIHRvIGRhdGEtdXBkYXRlJwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfaGFzRVNSZXNwb25zZUNoYW5nZWQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFzRVNSZXNwb25zZUNoYW5nZWQoZGF0YSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuX2NoYXJ0RGF0YSAhPT0gZGF0YTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogY2FsbGVkIG9uIG9wdGlvbnMgY2hhbmdlICh2aXMucGFyYW1zIGNoYW5nZSkKICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfdXBkYXRlUGFyYW1zIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZVBhcmFtcygpIHsKICAgICAgICAgIHZhciBtYXBQYXJhbXM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF91cGRhdGVQYXJhbXMkKF9jb250ZXh0NikgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBtYXBQYXJhbXMgPSB0aGlzLl9nZXRNYXBzUGFyYW1zKCk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLl91cGRhdGVCYXNlTGF5ZXIoKSk7CgogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAuc2V0TGVnZW5kUG9zaXRpb24obWFwUGFyYW1zLmxlZ2VuZFBvc2l0aW9uKTsKCiAgICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5zZXRTaG93VG9vbHRpcChtYXBQYXJhbXMuYWRkVG9vbHRpcCk7CgogICAgICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAudXNlVWlTdGF0ZUZyb21WaXN1YWxpemF0aW9uKHRoaXMudmlzKTsKCiAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIl9nZXRNYXBzUGFyYW1zIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldE1hcHNQYXJhbXMoKSB7CiAgICAgICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmFzc2lnbih7fSwgdGhpcy52aXMudHlwZS52aXNDb25maWcuZGVmYXVsdHMsIHsKICAgICAgICAgICAgdHlwZTogdGhpcy52aXMudHlwZS5uYW1lCiAgICAgICAgICB9LCB0aGlzLl9wYXJhbXMpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIl93aGVuQmFzZUxheWVySXNMb2FkZWQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfd2hlbkJhc2VMYXllcklzTG9hZGVkKCkgewogICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgICAgaWYgKCF0aGlzLl90bXNDb25maWd1cmVkKCkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIG1heFRpbWVGb3JCYXNlTGF5ZXIgPSAxMDAwMDsKICAgICAgICAgIHZhciBpbnRlcnZhbCQgPSBSeC5pbnRlcnZhbCgxMCkucGlwZSgoMCwgX29wZXJhdG9ycy5maWx0ZXIpKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuICFfdGhpczIuX2Jhc2VMYXllckRpcnR5OwogICAgICAgICAgfSkpOwogICAgICAgICAgdmFyIHRpbWVyJCA9IFJ4LnRpbWVyKG1heFRpbWVGb3JCYXNlTGF5ZXIpOwogICAgICAgICAgcmV0dXJuIFJ4LnJhY2UoaW50ZXJ2YWwkLCB0aW1lciQpLnBpcGUoKDAsIF9vcGVyYXRvcnMuZmlyc3QpKCkpLnRvUHJvbWlzZSgpOwogICAgICAgIH0KICAgICAgfV0pOwoKICAgICAgcmV0dXJuIEJhc2VNYXBzVmlzdWFsaXphdGlvbjsKICAgIH0oKQogICk7Cn0="},null]}