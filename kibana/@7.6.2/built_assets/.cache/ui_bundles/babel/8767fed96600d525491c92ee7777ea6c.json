{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/index_management/public/app/components/mappings_editor/components/document_fields/fields/create_field/create_field.js","dependencies":[{"path":"x-pack/legacy/plugins/index_management/public/app/components/mappings_editor/components/document_fields/fields/create_field/create_field.js","mtime":1585205044417},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkNyZWF0ZUZpZWxkID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9jbGFzc25hbWVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJjbGFzc25hbWVzIikpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9kb2N1bWVudGF0aW9uID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vc2VydmljZXMvZG9jdW1lbnRhdGlvbiIpOwoKdmFyIF9zaGFyZWRfaW1wb3J0cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL3NoYXJlZF9pbXBvcnRzIik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbnN0YW50cyIpOwoKdmFyIF9tYXBwaW5nc19zdGF0ZSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL21hcHBpbmdzX3N0YXRlIik7Cgp2YXIgX2xpYiA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2xpYiIpOwoKdmFyIF9maWVsZF9wYXJhbWV0ZXJzID0gcmVxdWlyZSgiLi4vLi4vZmllbGRfcGFyYW1ldGVycyIpOwoKdmFyIF9yZXF1aXJlZF9wYXJhbWV0ZXJzX2Zvcm1zID0gcmVxdWlyZSgiLi9yZXF1aXJlZF9wYXJhbWV0ZXJzX2Zvcm1zIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgZm9ybVdyYXBwZXIgPSBmdW5jdGlvbiBmb3JtV3JhcHBlcihwcm9wcykgewogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJmb3JtIiwgcHJvcHMpOwp9OwoKdmFyIENyZWF0ZUZpZWxkID0gX3JlYWN0LmRlZmF1bHQubWVtbyhmdW5jdGlvbiBDcmVhdGVGaWVsZENvbXBvbmVudChfcmVmKSB7CiAgdmFyIGFsbEZpZWxkcyA9IF9yZWYuYWxsRmllbGRzLAogICAgICBpc1Jvb3RMZXZlbEZpZWxkID0gX3JlZi5pc1Jvb3RMZXZlbEZpZWxkLAogICAgICBpc011bHRpRmllbGQgPSBfcmVmLmlzTXVsdGlGaWVsZCwKICAgICAgcGFkZGluZ0xlZnQgPSBfcmVmLnBhZGRpbmdMZWZ0LAogICAgICBpc0NhbmNlbGFibGUgPSBfcmVmLmlzQ2FuY2VsYWJsZSwKICAgICAgbWF4TmVzdGVkRGVwdGggPSBfcmVmLm1heE5lc3RlZERlcHRoOwogIHZhciBkaXNwYXRjaCA9ICgwLCBfbWFwcGluZ3Nfc3RhdGUudXNlRGlzcGF0Y2gpKCk7CgogIHZhciBfdXNlRm9ybSA9ICgwLCBfc2hhcmVkX2ltcG9ydHMudXNlRm9ybSkoewogICAgc2VyaWFsaXplcjogX2xpYi5maWVsZFNlcmlhbGl6ZXIsCiAgICBvcHRpb25zOiB7CiAgICAgIHN0cmlwRW1wdHlGaWVsZHM6IGZhbHNlCiAgICB9CiAgfSksCiAgICAgIGZvcm0gPSBfdXNlRm9ybS5mb3JtOwoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgdmFyIHN1YnNjcmlwdGlvbiA9IGZvcm0uc3Vic2NyaWJlKGZ1bmN0aW9uICh1cGRhdGVkRmllbGRGb3JtKSB7CiAgICAgIGRpc3BhdGNoKHsKICAgICAgICB0eXBlOiAnZmllbGRGb3JtLnVwZGF0ZScsCiAgICAgICAgdmFsdWU6IHVwZGF0ZWRGaWVsZEZvcm0KICAgICAgfSk7CiAgICB9KTsKICAgIHJldHVybiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmU7CiAgfSwgW2Zvcm1dKTsKCiAgdmFyIGNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgIGRpc3BhdGNoKHsKICAgICAgdHlwZTogJ2RvY3VtZW50RmllbGQuY2hhbmdlU3RhdHVzJywKICAgICAgdmFsdWU6ICdpZGxlJwogICAgfSk7CiAgfTsKCiAgdmFyIHN1Ym1pdEZvcm0gPSBmdW5jdGlvbiBzdWJtaXRGb3JtKGUpIHsKICAgIHZhciBleGl0QWZ0ZXIsCiAgICAgICAgX3JlZjIsCiAgICAgICAgaXNWYWxpZCwKICAgICAgICBkYXRhLAogICAgICAgIF9hcmdzID0gYXJndW1lbnRzOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc3VibWl0Rm9ybSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGV4aXRBZnRlciA9IF9hcmdzLmxlbmd0aCA+IDEgJiYgX2FyZ3NbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmdzWzFdIDogZmFsc2U7CgogICAgICAgICAgICBpZiAoZSkgewogICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoZm9ybS5zdWJtaXQoKSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBfcmVmMiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGlzVmFsaWQgPSBfcmVmMi5pc1ZhbGlkOwogICAgICAgICAgICBkYXRhID0gX3JlZjIuZGF0YTsKCiAgICAgICAgICAgIGlmIChpc1ZhbGlkKSB7CiAgICAgICAgICAgICAgZm9ybS5yZXNldCgpOwogICAgICAgICAgICAgIGRpc3BhdGNoKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdmaWVsZC5hZGQnLAogICAgICAgICAgICAgICAgdmFsdWU6IGRhdGEKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgaWYgKGV4aXRBZnRlcikgewogICAgICAgICAgICAgICAgY2FuY2VsKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH07CgogIHZhciBvbkNsaWNrT3V0c2lkZSA9IGZ1bmN0aW9uIG9uQ2xpY2tPdXRzaWRlKCkgewogICAgdmFyIG5hbWUgPSBmb3JtLmdldEZpZWxkcygpLm5hbWUudmFsdWU7CgogICAgaWYgKG5hbWUudHJpbSgpID09PSAnJykgewogICAgICBpZiAoaXNDYW5jZWxhYmxlICE9PSBmYWxzZSkgewogICAgICAgIGNhbmNlbCgpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBzdWJtaXRGb3JtKHVuZGVmaW5lZCwgdHJ1ZSk7CiAgICB9CiAgfTsKICAvKioKICAgKiBXaGVuIHdlIGNoYW5nZSB0aGUgdHlwZSwgd2UgbmVlZCB0byBjaGVjayBpZiB0aGVyZSBpcyBhIHN1YlR5cGUgYXJyYXkgdG8gY2hvb3NlIGZyb20uCiAgICogSWYgdGhlcmUgaXMgYSBzdWJUeXBlIGFycmF5LCB3ZSBidWlsZCB0aGUgb3B0aW9ucyBsaXN0IGZvciB0aGUgc2VsZWN0IChhbmQgaW4gY2FzZSB0aGUgZmllbGQgaXMgYSBtdWx0aS1maWVsZAogICAqIHdlIGFsc28gZmlsdGVyIG91dCBibGFja2xpc3RlZCB0eXBlcykuCiAgICoKICAgKiBAcGFyYW0gdHlwZSBUaGUgc2VsZWN0ZWQgZmllbGQgdHlwZQogICAqLwoKCiAgdmFyIGdldFN1YlR5cGVNZXRhID0gZnVuY3Rpb24gZ2V0U3ViVHlwZU1ldGEodHlwZSkgewogICAgdmFyIHR5cGVEZWZpbml0aW9uID0gX2NvbnN0YW50cy5UWVBFX0RFRklOSVRJT05bdHlwZV07CiAgICB2YXIgaGFzU3ViVHlwZXMgPSB0eXBlRGVmaW5pdGlvbiAhPT0gdW5kZWZpbmVkICYmIHR5cGVEZWZpbml0aW9uLnN1YlR5cGVzOwogICAgdmFyIHN1YlR5cGVPcHRpb25zID0gaGFzU3ViVHlwZXMgPyB0eXBlRGVmaW5pdGlvbi5zdWJUeXBlcy50eXBlcy5tYXAoZnVuY3Rpb24gKHN1YlR5cGUpIHsKICAgICAgcmV0dXJuIF9jb25zdGFudHMuVFlQRV9ERUZJTklUSU9OW3N1YlR5cGVdOwogICAgfSkubWFwKGZ1bmN0aW9uIChzdWJUeXBlKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmFsdWU6IHN1YlR5cGUudmFsdWUsCiAgICAgICAgbGFiZWw6IHN1YlR5cGUubGFiZWwKICAgICAgfTsKICAgIH0pIDogdW5kZWZpbmVkOwoKICAgIGlmIChoYXNTdWJUeXBlcykgewogICAgICBpZiAoaXNNdWx0aUZpZWxkKSB7CiAgICAgICAgLy8gSWYgaXQgaXMgYSBtdWx0aS1maWVsZCwgd2UgbmVlZCB0byBmaWx0ZXIgb3V0IG5vbi1hbGxvd2VkIHR5cGVzCiAgICAgICAgc3ViVHlwZU9wdGlvbnMgPSAoMCwgX2xpYi5maWx0ZXJUeXBlc0Zvck11bHRpRmllbGQpKHN1YlR5cGVPcHRpb25zKTsKICAgICAgfSBlbHNlIGlmIChpc1Jvb3RMZXZlbEZpZWxkID09PSBmYWxzZSkgewogICAgICAgIHN1YlR5cGVPcHRpb25zID0gKDAsIF9saWIuZmlsdGVyVHlwZXNGb3JOb25Sb290RmllbGRzKShzdWJUeXBlT3B0aW9ucyk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gewogICAgICBzdWJUeXBlT3B0aW9uczogc3ViVHlwZU9wdGlvbnMsCiAgICAgIHN1YlR5cGVMYWJlbDogaGFzU3ViVHlwZXMgPyB0eXBlRGVmaW5pdGlvbi5zdWJUeXBlcy5sYWJlbCA6IHVuZGVmaW5lZAogICAgfTsKICB9OwoKICB2YXIgb25UeXBlQ2hhbmdlID0gZnVuY3Rpb24gb25UeXBlQ2hhbmdlKG5leHRUeXBlKSB7CiAgICBmb3JtLnNldEZpZWxkVmFsdWUoJ3R5cGUnLCBuZXh0VHlwZSk7CgogICAgaWYgKG5leHRUeXBlLmxlbmd0aCkgewogICAgICB2YXIgX2dldFN1YlR5cGVNZXRhID0gZ2V0U3ViVHlwZU1ldGEobmV4dFR5cGVbMF0udmFsdWUpLAogICAgICAgICAgc3ViVHlwZU9wdGlvbnMgPSBfZ2V0U3ViVHlwZU1ldGEuc3ViVHlwZU9wdGlvbnM7CgogICAgICBmb3JtLnNldEZpZWxkVmFsdWUoJ3N1YlR5cGUnLCBzdWJUeXBlT3B0aW9ucyA/IFtzdWJUeXBlT3B0aW9uc1swXV0gOiB1bmRlZmluZWQpOwogICAgfQogIH07CgogIHZhciByZW5kZXJGb3JtRmllbGRzID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKF9yZWYzKSB7CiAgICB2YXIgdHlwZSA9IF9yZWYzLnR5cGU7CgogICAgdmFyIF9nZXRTdWJUeXBlTWV0YTIgPSBnZXRTdWJUeXBlTWV0YSh0eXBlKSwKICAgICAgICBzdWJUeXBlT3B0aW9ucyA9IF9nZXRTdWJUeXBlTWV0YTIuc3ViVHlwZU9wdGlvbnMsCiAgICAgICAgc3ViVHlwZUxhYmVsID0gX2dldFN1YlR5cGVNZXRhMi5zdWJUeXBlTGFiZWw7CgogICAgdmFyIGRvY0xpbmsgPSBfZG9jdW1lbnRhdGlvbi5kb2N1bWVudGF0aW9uU2VydmljZS5nZXRUeXBlRG9jTGluayh0eXBlKTsKCiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgIGd1dHRlclNpemU6ICJzIgogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9maWVsZF9wYXJhbWV0ZXJzLk5hbWVQYXJhbWV0ZXIsIG51bGwpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9maWVsZF9wYXJhbWV0ZXJzLlR5cGVQYXJhbWV0ZXIsIHsKICAgICAgaXNSb290TGV2ZWxGaWVsZDogaXNSb290TGV2ZWxGaWVsZCwKICAgICAgaXNNdWx0aUZpZWxkOiBpc011bHRpRmllbGQsCiAgICAgIG9uVHlwZUNoYW5nZTogb25UeXBlQ2hhbmdlLAogICAgICBkb2NMaW5rOiBkb2NMaW5rCiAgICB9KSksIHN1YlR5cGVPcHRpb25zICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2hhcmVkX2ltcG9ydHMuVXNlRmllbGQsIHsKICAgICAgcGF0aDogInN1YlR5cGUiLAogICAgICBjb25maWc6IF9vYmplY3RTcHJlYWQoe30sICgwLCBfbGliLmdldEZpZWxkQ29uZmlnKSgndHlwZScpLCB7CiAgICAgICAgbGFiZWw6IHN1YlR5cGVMYWJlbCwKICAgICAgICBkZWZhdWx0VmFsdWU6IHN1YlR5cGVPcHRpb25zWzBdLnZhbHVlCiAgICAgIH0pCiAgICB9LCBmdW5jdGlvbiAoc3ViVHlwZUZpZWxkKSB7CiAgICAgIHZhciBlcnJvciA9IHN1YlR5cGVGaWVsZC5nZXRFcnJvcnNNZXNzYWdlcygpOwogICAgICB2YXIgaXNJbnZhbGlkID0gZXJyb3IgPyBCb29sZWFuKGVycm9yLmxlbmd0aCkgOiBmYWxzZTsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgICAgbGFiZWw6IHN1YlR5cGVGaWVsZC5sYWJlbCwKICAgICAgICBlcnJvcjogZXJyb3IsCiAgICAgICAgaXNJbnZhbGlkOiBpc0ludmFsaWQKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvbWJvQm94LCB7CiAgICAgICAgcGxhY2Vob2xkZXI6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmNyZWF0ZUZpZWxkLnR5cGVQbGFjZWhvbGRlckxhYmVsJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZWxlY3QgYSB0eXBlJwogICAgICAgIH0pLAogICAgICAgIHNpbmdsZVNlbGVjdGlvbjogewogICAgICAgICAgYXNQbGFpblRleHQ6IHRydWUKICAgICAgICB9LAogICAgICAgIG9wdGlvbnM6IHN1YlR5cGVPcHRpb25zLAogICAgICAgIHNlbGVjdGVkT3B0aW9uczogc3ViVHlwZUZpZWxkLnZhbHVlLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShuZXdTdWJUeXBlKSB7CiAgICAgICAgICByZXR1cm4gc3ViVHlwZUZpZWxkLnNldFZhbHVlKG5ld1N1YlR5cGUpOwogICAgICAgIH0sCiAgICAgICAgaXNDbGVhcmFibGU6IGZhbHNlCiAgICAgIH0pKTsKICAgIH0pKSkpOwogIH0sIFtmb3JtLCBpc011bHRpRmllbGRdKTsKCiAgdmFyIHJlbmRlckZvcm1BY3Rpb25zID0gZnVuY3Rpb24gcmVuZGVyRm9ybUFjdGlvbnMoKSB7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICBndXR0ZXJTaXplOiAicyIsCiAgICAgIGp1c3RpZnlDb250ZW50OiAiZmxleEVuZCIKICAgIH0sIGlzQ2FuY2VsYWJsZSAhPT0gZmFsc2UgJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgIGdyb3c6IGZhbHNlCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uRW1wdHksIHsKICAgICAgb25DbGljazogY2FuY2VsLAogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiY2FuY2VsQnV0dG9uIgogICAgfSwgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuY3JlYXRlRmllbGQuY2FuY2VsQnV0dG9uTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ2FuY2VsJwogICAgfSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgIGdyb3c6IGZhbHNlCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uLCB7CiAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgIGZpbGw6IHRydWUsCiAgICAgIG9uQ2xpY2s6IHN1Ym1pdEZvcm0sCiAgICAgIHR5cGU6ICJzdWJtaXQiLAogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiYWRkQnV0dG9uIgogICAgfSwgaXNNdWx0aUZpZWxkID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuY3JlYXRlRmllbGQuYWRkTXVsdGlGaWVsZEJ1dHRvbkxhYmVsJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0FkZCBtdWx0aS1maWVsZCcKICAgIH0pIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuY3JlYXRlRmllbGQuYWRkRmllbGRCdXR0b25MYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBZGQgZmllbGQnCiAgICB9KSkpKTsKICB9OwoKICB2YXIgcmVuZGVyUGFyYW1ldGVyc0Zvcm0gPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoX3JlZjQpIHsKICAgIHZhciB0eXBlID0gX3JlZjQudHlwZSwKICAgICAgICBzdWJUeXBlID0gX3JlZjQuc3ViVHlwZTsKICAgIHZhciBQYXJhbWV0ZXJzRm9ybSA9ICgwLCBfcmVxdWlyZWRfcGFyYW1ldGVyc19mb3Jtcy5nZXRQYXJhbWV0ZXJzRm9ybUZvclR5cGUpKHR5cGUsIHN1YlR5cGUpOwogICAgcmV0dXJuIFBhcmFtZXRlcnNGb3JtID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICBjbGFzc05hbWU6ICJtYXBwaW5nc0VkaXRvcl9fY3JlYXRlRmllbGRSZXF1aXJlZFByb3BzIgogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChQYXJhbWV0ZXJzRm9ybSwgewogICAgICBhbGxGaWVsZHM6IGFsbEZpZWxkcwogICAgfSkpIDogbnVsbDsKICB9LCBbYWxsRmllbGRzXSk7CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlPdXRzaWRlQ2xpY2tEZXRlY3RvciwgewogICAgb25PdXRzaWRlQ2xpY2s6IG9uQ2xpY2tPdXRzaWRlCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2hhcmVkX2ltcG9ydHMuRm9ybSwgewogICAgZm9ybTogZm9ybSwKICAgIEZvcm1XcmFwcGVyOiBmb3JtV3JhcHBlciwKICAgIG9uU3VibWl0OiBzdWJtaXRGb3JtCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgY2xhc3NOYW1lOiAoMCwgX2NsYXNzbmFtZXMuZGVmYXVsdCkoJ21hcHBpbmdzRWRpdG9yX19jcmVhdGVGaWVsZFdyYXBwZXInLCB7CiAgICAgICdtYXBwaW5nc0VkaXRvcl9fY3JlYXRlRmllbGRXcmFwcGVyLS10b2dnbGUnOiBCb29sZWFuKG1heE5lc3RlZERlcHRoKSAmJiBtYXhOZXN0ZWREZXB0aCA+IDAsCiAgICAgICdtYXBwaW5nc0VkaXRvcl9fY3JlYXRlRmllbGRXcmFwcGVyLS1tdWx0aUZpZWxkJzogaXNNdWx0aUZpZWxkCiAgICB9KSwKICAgIHN0eWxlOiB7CiAgICAgIHBhZGRpbmdMZWZ0OiAiIi5jb25jYXQoaXNNdWx0aUZpZWxkID8gcGFkZGluZ0xlZnQgLSBfY29uc3RhbnRzLkVVSV9TSVpFICogMS41IC8vIEFzIHRoZXJlIGFyZSBubyAiTCIgYnVsbGV0IGxpc3Qgd2UgbmVlZCB0byBzdWJzdHJhY3Qgc29tZSBpbmRlbnQKICAgICAgOiBwYWRkaW5nTGVmdCwgInB4IikKICAgIH0sCiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiY3JlYXRlRmllbGRXcmFwcGVyIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgIGNsYXNzTmFtZTogIm1hcHBpbmdzRWRpdG9yX19jcmVhdGVGaWVsZENvbnRlbnQiCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgZ3V0dGVyU2l6ZTogInMiLAogICAgYWxpZ25JdGVtczogImNlbnRlciIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zaGFyZWRfaW1wb3J0cy5Gb3JtRGF0YVByb3ZpZGVyLCB7CiAgICBwYXRoc1RvV2F0Y2g6ICJ0eXBlIgogIH0sIHJlbmRlckZvcm1GaWVsZHMpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIHJlbmRlckZvcm1BY3Rpb25zKCkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2hhcmVkX2ltcG9ydHMuRm9ybURhdGFQcm92aWRlciwgewogICAgcGF0aHNUb1dhdGNoOiBbJ3R5cGUnLCAnc3ViVHlwZSddCiAgfSwgcmVuZGVyUGFyYW1ldGVyc0Zvcm0pKSkpKTsKfSk7CgpleHBvcnRzLkNyZWF0ZUZpZWxkID0gQ3JlYXRlRmllbGQ7"},null]}