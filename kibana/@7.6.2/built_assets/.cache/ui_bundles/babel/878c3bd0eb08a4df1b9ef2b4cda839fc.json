{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/index_management/public/app/components/mappings_editor/mappings_state.js","dependencies":[{"path":"x-pack/legacy/plugins/index_management/public/app/components/mappings_editor/mappings_state.js","mtime":1585205044393},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnVzZURpc3BhdGNoID0gZXhwb3J0cy51c2VNYXBwaW5nc1N0YXRlID0gZXhwb3J0cy5NYXBwaW5nc1N0YXRlID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWR1Y2VyID0gcmVxdWlyZSgiLi9yZWR1Y2VyIik7Cgp2YXIgX2xpYiA9IHJlcXVpcmUoIi4vbGliIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9Cgp2YXIgU3RhdGVDb250ZXh0ID0gKDAsIF9yZWFjdC5jcmVhdGVDb250ZXh0KSh1bmRlZmluZWQpOwp2YXIgRGlzcGF0Y2hDb250ZXh0ID0gKDAsIF9yZWFjdC5jcmVhdGVDb250ZXh0KSh1bmRlZmluZWQpOwoKdmFyIE1hcHBpbmdzU3RhdGUgPSBfcmVhY3QuZGVmYXVsdC5tZW1vKGZ1bmN0aW9uIChfcmVmKSB7CiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbiwKICAgICAgb25VcGRhdGUgPSBfcmVmLm9uVXBkYXRlLAogICAgICBkZWZhdWx0VmFsdWUgPSBfcmVmLmRlZmF1bHRWYWx1ZSwKICAgICAgbWFwcGluZ3NUeXBlID0gX3JlZi5tYXBwaW5nc1R5cGU7CiAgdmFyIGRpZE1vdW50UmVmID0gKDAsIF9yZWFjdC51c2VSZWYpKGZhbHNlKTsKICB2YXIgcGFyc2VkRmllbGRzRGVmYXVsdFZhbHVlID0gKDAsIF9yZWFjdC51c2VNZW1vKShmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gKDAsIF9saWIubm9ybWFsaXplKShkZWZhdWx0VmFsdWUuZmllbGRzKTsKICB9LCBbZGVmYXVsdFZhbHVlLmZpZWxkc10pOwogIHZhciBpbml0aWFsU3RhdGUgPSB7CiAgICBpc1ZhbGlkOiB1bmRlZmluZWQsCiAgICBjb25maWd1cmF0aW9uOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdFZhbHVlLmNvbmZpZ3VyYXRpb24sCiAgICAgIGRhdGE6IHsKICAgICAgICByYXc6IGRlZmF1bHRWYWx1ZS5jb25maWd1cmF0aW9uLAogICAgICAgIGZvcm1hdDogZnVuY3Rpb24gZm9ybWF0KCkgewogICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZS5jb25maWd1cmF0aW9uOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7CiAgICAgIH0KICAgIH0sCiAgICB0ZW1wbGF0ZXM6IHsKICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWUudGVtcGxhdGVzLAogICAgICBkYXRhOiB7CiAgICAgICAgcmF3OiBkZWZhdWx0VmFsdWUudGVtcGxhdGVzLAogICAgICAgIGZvcm1hdDogZnVuY3Rpb24gZm9ybWF0KCkgewogICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZS50ZW1wbGF0ZXM7CiAgICAgICAgfQogICAgICB9LAogICAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKTsKICAgICAgfQogICAgfSwKICAgIGZpZWxkczogcGFyc2VkRmllbGRzRGVmYXVsdFZhbHVlLAogICAgZG9jdW1lbnRGaWVsZHM6IHsKICAgICAgc3RhdHVzOiAnaWRsZScsCiAgICAgIGVkaXRvcjogJ2RlZmF1bHQnCiAgICB9LAogICAgZmllbGRzSnNvbkVkaXRvcjogewogICAgICBmb3JtYXQ6IGZ1bmN0aW9uIGZvcm1hdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0sCiAgICAgIGlzVmFsaWQ6IHRydWUKICAgIH0sCiAgICBzZWFyY2g6IHsKICAgICAgdGVybTogJycsCiAgICAgIHJlc3VsdDogW10KICAgIH0KICB9OwoKICB2YXIgX3VzZVJlZHVjZXIgPSAoMCwgX3JlYWN0LnVzZVJlZHVjZXIpKF9yZWR1Y2VyLnJlZHVjZXIsIGluaXRpYWxTdGF0ZSksCiAgICAgIF91c2VSZWR1Y2VyMiA9IF9zbGljZWRUb0FycmF5KF91c2VSZWR1Y2VyLCAyKSwKICAgICAgc3RhdGUgPSBfdXNlUmVkdWNlcjJbMF0sCiAgICAgIGRpc3BhdGNoID0gX3VzZVJlZHVjZXIyWzFdOwoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgLy8gSWYgd2UgYXJlIGNyZWF0aW5nIGEgbmV3IGZpZWxkLCBidXQgaGF2ZW4ndCBlbnRlcmVkIGFueSBuYW1lCiAgICAvLyBpdCBpcyB2YWxpZCBhbmQgd2UgY2FuIGJ5UGFzcyBpdHMgZm9ybSB2YWxpZGF0aW9uICh0aGF0IHJlcXVpcmVzIGEgIm5hbWUiIHRvIGJlIGRlZmluZWQpCiAgICB2YXIgaXNGaWVsZEZvcm1WaXNpYmxlID0gc3RhdGUuZmllbGRGb3JtICE9PSB1bmRlZmluZWQ7CiAgICB2YXIgZW1wdHlOYW1lVmFsdWUgPSBpc0ZpZWxkRm9ybVZpc2libGUgJiYgc3RhdGUuZmllbGRGb3JtLmRhdGEucmF3Lm5hbWUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZS5maWVsZEZvcm0uZGF0YS5yYXcubmFtZS50cmltKCkgPT09ICcnOwogICAgdmFyIGJ5cGFzc0ZpZWxkRm9ybVZhbGlkYXRpb24gPSBzdGF0ZS5kb2N1bWVudEZpZWxkcy5zdGF0dXMgPT09ICdjcmVhdGluZ0ZpZWxkJyAmJiBlbXB0eU5hbWVWYWx1ZTsKICAgIG9uVXBkYXRlKHsKICAgICAgLy8gT3V0cHV0IGEgbWFwcGluZ3Mgb2JqZWN0IGZyb20gdGhlIHVzZXIncyBpbnB1dC4KICAgICAgZ2V0RGF0YTogZnVuY3Rpb24gZ2V0RGF0YShpc1ZhbGlkKSB7CiAgICAgICAgdmFyIG5leHRTdGF0ZSA9IHN0YXRlOwoKICAgICAgICBpZiAoc3RhdGUuZG9jdW1lbnRGaWVsZHMuc3RhdHVzID09PSAnY3JlYXRpbmdGaWVsZCcgJiYgaXNWYWxpZCAmJiAhYnlwYXNzRmllbGRGb3JtVmFsaWRhdGlvbikgewogICAgICAgICAgLy8gSWYgdGhlIGZvcm0gZmllbGQgaXMgdmFsaWQgYW5kIHdlIGFyZSBjcmVhdGluZyBhIG5ldyBmaWVsZCB0aGF0IGhhcyBzb21lIGRhdGEKICAgICAgICAgIC8vIHdlIGF1dG9tYXRpY2FsbHkgYWRkIHRoZSBmaWVsZCB0byBvdXIgc3RhdGUuCiAgICAgICAgICB2YXIgZmllbGRGb3JtRGF0YSA9IHN0YXRlLmZpZWxkRm9ybS5kYXRhLmZvcm1hdCgpOwoKICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhmaWVsZEZvcm1EYXRhKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgbmV4dFN0YXRlID0gKDAsIF9yZWR1Y2VyLmFkZEZpZWxkVG9TdGF0ZSkoZmllbGRGb3JtRGF0YSwgc3RhdGUpOwogICAgICAgICAgICBkaXNwYXRjaCh7CiAgICAgICAgICAgICAgdHlwZTogJ2ZpZWxkLmFkZCcsCiAgICAgICAgICAgICAgdmFsdWU6IGZpZWxkRm9ybURhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBQdWxsIHRoZSBtYXBwaW5ncyBwcm9wZXJ0aWVzIGZyb20gdGhlIGN1cnJlbnQgZWRpdG9yCgoKICAgICAgICB2YXIgZmllbGRzID0gbmV4dFN0YXRlLmRvY3VtZW50RmllbGRzLmVkaXRvciA9PT0gJ2pzb24nID8gbmV4dFN0YXRlLmZpZWxkc0pzb25FZGl0b3IuZm9ybWF0KCkgOiAoMCwgX2xpYi5kZU5vcm1hbGl6ZSkobmV4dFN0YXRlLmZpZWxkcyk7CiAgICAgICAgdmFyIGNvbmZpZ3VyYXRpb25EYXRhID0gbmV4dFN0YXRlLmNvbmZpZ3VyYXRpb24uZGF0YS5mb3JtYXQoKTsKICAgICAgICB2YXIgdGVtcGxhdGVzRGF0YSA9IG5leHRTdGF0ZS50ZW1wbGF0ZXMuZGF0YS5mb3JtYXQoKTsKCiAgICAgICAgdmFyIG1hcHBpbmdzID0gX29iamVjdFNwcmVhZCh7fSwgY29uZmlndXJhdGlvbkRhdGEsIHt9LCB0ZW1wbGF0ZXNEYXRhLCB7CiAgICAgICAgICBwcm9wZXJ0aWVzOiBmaWVsZHMKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIG1hcHBpbmdzVHlwZSA9PT0gdW5kZWZpbmVkID8gbWFwcGluZ3MgOiBfZGVmaW5lUHJvcGVydHkoe30sIG1hcHBpbmdzVHlwZSwgbWFwcGluZ3MpOwogICAgICB9LAogICAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICAgICAgdmFyIGNvbmZpZ3VyYXRpb25Gb3JtVmFsaWRhdG9yLCB0ZW1wbGF0ZXNGb3JtVmFsaWRhdG9yLCBwcm9taXNlc1RvVmFsaWRhdGU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiB2YWxpZGF0ZSQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uRm9ybVZhbGlkYXRvciA9IHN0YXRlLmNvbmZpZ3VyYXRpb24uc3VibWl0Rm9ybSAhPT0gdW5kZWZpbmVkID8gbmV3IFByb21pc2UoZnVuY3Rpb24gX2NhbGxlZShyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMywgaXNWYWxpZDsKCiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzdGF0ZS5jb25maWd1cmF0aW9uLnN1Ym1pdEZvcm0oKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlZjMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBfcmVmMy5pc1ZhbGlkOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaXNWYWxpZCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkgOiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7CgogICAgICAgICAgICAgICAgaWYgKCEoc3RhdGUudGVtcGxhdGVzLmZvcm0gIT09IHVuZGVmaW5lZCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHN0YXRlLnRlbXBsYXRlcy5mb3JtLnN1Ym1pdCgpKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyLnNlbnQuaXNWYWxpZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBQcm9taXNlLnJlc29sdmUodHJ1ZSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIHRlbXBsYXRlc0Zvcm1WYWxpZGF0b3IgPSBfY29udGV4dDIudDA7CiAgICAgICAgICAgICAgICBwcm9taXNlc1RvVmFsaWRhdGUgPSBbY29uZmlndXJhdGlvbkZvcm1WYWxpZGF0b3IsIHRlbXBsYXRlc0Zvcm1WYWxpZGF0b3JdOwoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5maWVsZEZvcm0gIT09IHVuZGVmaW5lZCAmJiAhYnlwYXNzRmllbGRGb3JtVmFsaWRhdGlvbikgewogICAgICAgICAgICAgICAgICBwcm9taXNlc1RvVmFsaWRhdGUucHVzaChzdGF0ZS5maWVsZEZvcm0udmFsaWRhdGUoKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIFByb21pc2UuYWxsKHByb21pc2VzVG9WYWxpZGF0ZSkudGhlbihmdW5jdGlvbiAodmFsaWRhdGlvbkFycmF5KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uQXJyYXkuZXZlcnkoQm9vbGVhbikgJiYgc3RhdGUuZmllbGRzSnNvbkVkaXRvci5pc1ZhbGlkOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBpc1ZhbGlkOiBzdGF0ZS5pc1ZhbGlkCiAgICB9KTsKICB9LCBbc3RhdGVdKTsKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgLyoqCiAgICAgKiBJZiB0aGUgZGVmYXVsdFZhbHVlIGhhcyBjaGFuZ2VkIHRoYXQgcHJvYmFibHkgbWVhbnMgdGhhdCB3ZSBoYXZlIGxvYWRlZAogICAgICogbmV3IGRhdGEgZnJvbSBKU09OLiBXZSBuZWVkIHRvIHVwZGF0ZSBvdXIgc3RhdGUgd2l0aCB0aGUgbmV3IG1hcHBpbmdzLgogICAgICovCiAgICBpZiAoZGlkTW91bnRSZWYuY3VycmVudCkgewogICAgICBkaXNwYXRjaCh7CiAgICAgICAgdHlwZTogJ2VkaXRvci5yZXBsYWNlTWFwcGluZ3MnLAogICAgICAgIHZhbHVlOiB7CiAgICAgICAgICBjb25maWd1cmF0aW9uOiBkZWZhdWx0VmFsdWUuY29uZmlndXJhdGlvbiwKICAgICAgICAgIHRlbXBsYXRlczogZGVmYXVsdFZhbHVlLnRlbXBsYXRlcywKICAgICAgICAgIGZpZWxkczogcGFyc2VkRmllbGRzRGVmYXVsdFZhbHVlCiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGRpZE1vdW50UmVmLmN1cnJlbnQgPSB0cnVlOwogICAgfQogIH0sIFtkZWZhdWx0VmFsdWVdKTsKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChTdGF0ZUNvbnRleHQuUHJvdmlkZXIsIHsKICAgIHZhbHVlOiBzdGF0ZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRGlzcGF0Y2hDb250ZXh0LlByb3ZpZGVyLCB7CiAgICB2YWx1ZTogZGlzcGF0Y2gKICB9LCBjaGlsZHJlbih7CiAgICBzdGF0ZTogc3RhdGUKICB9KSkpOwp9KTsKCmV4cG9ydHMuTWFwcGluZ3NTdGF0ZSA9IE1hcHBpbmdzU3RhdGU7Cgp2YXIgdXNlTWFwcGluZ3NTdGF0ZSA9IGZ1bmN0aW9uIHVzZU1hcHBpbmdzU3RhdGUoKSB7CiAgdmFyIGN0eCA9ICgwLCBfcmVhY3QudXNlQ29udGV4dCkoU3RhdGVDb250ZXh0KTsKCiAgaWYgKGN0eCA9PT0gdW5kZWZpbmVkKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZU1hcHBpbmdzU3RhdGUgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIDxNYXBwaW5nc1N0YXRlPicpOwogIH0KCiAgcmV0dXJuIGN0eDsKfTsKCmV4cG9ydHMudXNlTWFwcGluZ3NTdGF0ZSA9IHVzZU1hcHBpbmdzU3RhdGU7Cgp2YXIgdXNlRGlzcGF0Y2ggPSBmdW5jdGlvbiB1c2VEaXNwYXRjaCgpIHsKICB2YXIgY3R4ID0gKDAsIF9yZWFjdC51c2VDb250ZXh0KShEaXNwYXRjaENvbnRleHQpOwoKICBpZiAoY3R4ID09PSB1bmRlZmluZWQpIHsKICAgIHRocm93IG5ldyBFcnJvcigndXNlRGlzcGF0Y2ggbXVzdCBiZSB1c2VkIHdpdGhpbiBhIDxNYXBwaW5nc1N0YXRlPicpOwogIH0KCiAgcmV0dXJuIGN0eDsKfTsKCmV4cG9ydHMudXNlRGlzcGF0Y2ggPSB1c2VEaXNwYXRjaDs="},null]}