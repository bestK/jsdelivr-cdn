{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/agg_types/buckets/date_histogram.js","dependencies":[{"path":"src/legacy/ui/public/agg_types/buckets/date_histogram.js","mtime":1585205040747},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmlzRGF0ZUhpc3RvZ3JhbUJ1Y2tldEFnZ0NvbmZpZyA9IGlzRGF0ZUhpc3RvZ3JhbUJ1Y2tldEFnZ0NvbmZpZzsKZXhwb3J0cy5kYXRlSGlzdG9ncmFtQnVja2V0QWdnID0gZXhwb3J0cy5zZXRCb3VuZHMgPSB2b2lkIDA7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9tb21lbnRUaW1lem9uZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibW9tZW50LXRpbWV6b25lIikpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX25ld19wbGF0Zm9ybSA9IHJlcXVpcmUoInVpL25ld19wbGF0Zm9ybSIpOwoKdmFyIF9idWNrZXRfYWdnX3R5cGUgPSByZXF1aXJlKCIuL19idWNrZXRfYWdnX3R5cGUiKTsKCnZhciBfYnVja2V0X2FnZ190eXBlcyA9IHJlcXVpcmUoIi4vYnVja2V0X2FnZ190eXBlcyIpOwoKdmFyIF9kYXRlX2hpc3RvZ3JhbSA9IHJlcXVpcmUoIi4vY3JlYXRlX2ZpbHRlci9kYXRlX2hpc3RvZ3JhbSIpOwoKdmFyIF9pbnRlcnZhbF9vcHRpb25zID0gcmVxdWlyZSgiLi9faW50ZXJ2YWxfb3B0aW9ucyIpOwoKdmFyIF90aW1lX2ludGVydmFsID0gcmVxdWlyZSgiLi4vLi4vdmlzL2VkaXRvcnMvZGVmYXVsdC9jb250cm9scy90aW1lX2ludGVydmFsIik7Cgp2YXIgX3RpbWVmaWx0ZXIgPSByZXF1aXJlKCIuLi8uLi90aW1lZmlsdGVyIik7Cgp2YXIgX2Ryb3BfcGFydGlhbHMgPSByZXF1aXJlKCIuLi8uLi92aXMvZWRpdG9ycy9kZWZhdWx0L2NvbnRyb2xzL2Ryb3BfcGFydGlhbHMiKTsKCnZhciBfc2NhbGVfbWV0cmljcyA9IHJlcXVpcmUoIi4uLy4uL3Zpcy9lZGl0b3JzL2RlZmF1bHQvY29udHJvbHMvc2NhbGVfbWV0cmljcyIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb3JlX3BsdWdpbnMvZGF0YS9wdWJsaWMiKTsKCnZhciBfYWdnX3BhcmFtcyA9IHJlcXVpcmUoIi4uL2FnZ19wYXJhbXMiKTsKCnZhciBfbWV0cmljX2FnZ190eXBlID0gcmVxdWlyZSgiLi4vbWV0cmljcy9tZXRyaWNfYWdnX3R5cGUiKTsKCnZhciBfcHVibGljMiA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uL3BsdWdpbnMvZGF0YS9wdWJsaWMiKTsKCnZhciBfdGltZV9idWNrZXRzID0gcmVxdWlyZSgiLi4vLi4vdGltZV9idWNrZXRzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIGRldGVjdGVkVGltZXpvbmUgPSBfbW9tZW50VGltZXpvbmUuZGVmYXVsdC50ei5ndWVzcygpOwoKdmFyIHR6T2Zmc2V0ID0gKDAsIF9tb21lbnRUaW1lem9uZS5kZWZhdWx0KSgpLmZvcm1hdCgnWicpOwoKdmFyIGdldEludGVydmFsID0gZnVuY3Rpb24gZ2V0SW50ZXJ2YWwoYWdnKSB7CiAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5nZXQoYWdnLCBbJ3BhcmFtcycsICdpbnRlcnZhbCddKTsKfTsKCnZhciBzZXRCb3VuZHMgPSBmdW5jdGlvbiBzZXRCb3VuZHMoYWdnLCBmb3JjZSkgewogIGlmIChhZ2cuYnVja2V0cy5fYWxyZWFkeVNldCAmJiAhZm9yY2UpIHJldHVybjsKICBhZ2cuYnVja2V0cy5fYWxyZWFkeVNldCA9IHRydWU7CiAgdmFyIGJvdW5kcyA9IGFnZy5wYXJhbXMudGltZVJhbmdlID8gX3RpbWVmaWx0ZXIudGltZWZpbHRlci5jYWxjdWxhdGVCb3VuZHMoYWdnLnBhcmFtcy50aW1lUmFuZ2UpIDogbnVsbDsKICBhZ2cuYnVja2V0cy5zZXRCb3VuZHMoYWdnLmZpZWxkSXNUaW1lRmllbGQoKSAmJiBib3VuZHMpOwp9OyAvLyB3aWxsIGJlIHJlcGxhY2VkIGJ5IHNyYy9sZWdhY3kvdWkvcHVibGljL3RpbWVfYnVja2V0cy90aW1lX2J1Y2tldHMuanMKCgpleHBvcnRzLnNldEJvdW5kcyA9IHNldEJvdW5kczsKCmZ1bmN0aW9uIGlzRGF0ZUhpc3RvZ3JhbUJ1Y2tldEFnZ0NvbmZpZyhhZ2cpIHsKICByZXR1cm4gQm9vbGVhbihhZ2cuYnVja2V0cyk7Cn0KCnZhciBkYXRlSGlzdG9ncmFtQnVja2V0QWdnID0gbmV3IF9idWNrZXRfYWdnX3R5cGUuQnVja2V0QWdnVHlwZSh7CiAgbmFtZTogX2J1Y2tldF9hZ2dfdHlwZXMuQlVDS0VUX1RZUEVTLkRBVEVfSElTVE9HUkFNLAogIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgnY29tbW9uLnVpLmFnZ1R5cGVzLmJ1Y2tldHMuZGF0ZUhpc3RvZ3JhbVRpdGxlJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdEYXRlIEhpc3RvZ3JhbScKICB9KSwKICBvcmRlcmVkOiB7CiAgICBkYXRlOiB0cnVlCiAgfSwKICBtYWtlTGFiZWw6IGZ1bmN0aW9uIG1ha2VMYWJlbChhZ2cpIHsKICAgIHZhciBvdXRwdXQgPSB7fTsKCiAgICBpZiAodGhpcy5wYXJhbXMpIHsKICAgICAgb3V0cHV0ID0gKDAsIF9hZ2dfcGFyYW1zLndyaXRlUGFyYW1zKSh0aGlzLnBhcmFtcywgYWdnKTsKICAgIH0KCiAgICB2YXIgZmllbGQgPSBhZ2cuZ2V0RmllbGREaXNwbGF5TmFtZSgpOwogICAgcmV0dXJuIF9pMThuLmkxOG4udHJhbnNsYXRlKCdjb21tb24udWkuYWdnVHlwZXMuYnVja2V0cy5kYXRlSGlzdG9ncmFtTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAne2ZpZWxkTmFtZX0gcGVyIHtpbnRlcnZhbERlc2NyaXB0aW9ufScsCiAgICAgIHZhbHVlczogewogICAgICAgIGZpZWxkTmFtZTogZmllbGQsCiAgICAgICAgaW50ZXJ2YWxEZXNjcmlwdGlvbjogb3V0cHV0Lm1ldHJpY1NjYWxlVGV4dCB8fCBvdXRwdXQuYnVja2V0SW50ZXJ2YWwuZGVzY3JpcHRpb24KICAgICAgfQogICAgfSk7CiAgfSwKICBjcmVhdGVGaWx0ZXI6IF9kYXRlX2hpc3RvZ3JhbS5jcmVhdGVGaWx0ZXJEYXRlSGlzdG9ncmFtLAogIGRlY29yYXRlQWdnQ29uZmlnOiBmdW5jdGlvbiBkZWNvcmF0ZUFnZ0NvbmZpZygpIHsKICAgIHZhciBidWNrZXRzOwogICAgcmV0dXJuIHsKICAgICAgYnVja2V0czogewogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgIGlmIChidWNrZXRzKSByZXR1cm4gYnVja2V0czsKICAgICAgICAgIGJ1Y2tldHMgPSBuZXcgX3RpbWVfYnVja2V0cy5UaW1lQnVja2V0cygpOwogICAgICAgICAgYnVja2V0cy5zZXRJbnRlcnZhbChnZXRJbnRlcnZhbCh0aGlzKSk7CiAgICAgICAgICBzZXRCb3VuZHModGhpcyk7CiAgICAgICAgICByZXR1cm4gYnVja2V0czsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBnZXRGb3JtYXQ6IGZ1bmN0aW9uIGdldEZvcm1hdChhZ2cpIHsKICAgIHJldHVybiBhZ2cuYnVja2V0cy5nZXRTY2FsZWREYXRlRm9ybWF0dGVyKCk7CiAgfSwKICBwYXJhbXM6IFt7CiAgICBuYW1lOiAnZmllbGQnLAogICAgdHlwZTogJ2ZpZWxkJywKICAgIGZpbHRlckZpZWxkVHlwZXM6IF9wdWJsaWMyLktCTl9GSUVMRF9UWVBFUy5EQVRFLAogICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoYWdnKSB7CiAgICAgIHJldHVybiBhZ2cuZ2V0SW5kZXhQYXR0ZXJuKCkudGltZUZpZWxkTmFtZTsKICAgIH0sCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoYWdnKSB7CiAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHQuZ2V0KGFnZywgJ3BhcmFtcy5pbnRlcnZhbCcpID09PSAnYXV0bycgJiYgIWFnZy5maWVsZElzVGltZUZpZWxkKCkpIHsKICAgICAgICBkZWxldGUgYWdnLnBhcmFtcy5pbnRlcnZhbDsKICAgICAgfQoKICAgICAgc2V0Qm91bmRzKGFnZywgdHJ1ZSk7CiAgICB9CiAgfSwgewogICAgbmFtZTogJ3RpbWVSYW5nZScsCiAgICBkZWZhdWx0OiBudWxsLAogICAgd3JpdGU6IF9sb2Rhc2guZGVmYXVsdC5ub29wCiAgfSwgewogICAgbmFtZTogJ3VzZU5vcm1hbGl6ZWRFc0ludGVydmFsJywKICAgIGRlZmF1bHQ6IHRydWUsCiAgICB3cml0ZTogX2xvZGFzaC5kZWZhdWx0Lm5vb3AKICB9LCB7CiAgICBuYW1lOiAnc2NhbGVNZXRyaWNWYWx1ZXMnLAogICAgZGVmYXVsdDogZmFsc2UsCiAgICB3cml0ZTogX2xvZGFzaC5kZWZhdWx0Lm5vb3AsCiAgICBhZHZhbmNlZDogdHJ1ZSwKICAgIGVkaXRvckNvbXBvbmVudDogX3NjYWxlX21ldHJpY3MuU2NhbGVNZXRyaWNzUGFyYW1FZGl0b3IKICB9LCB7CiAgICBuYW1lOiAnaW50ZXJ2YWwnLAogICAgZWRpdG9yQ29tcG9uZW50OiBfdGltZV9pbnRlcnZhbC5UaW1lSW50ZXJ2YWxQYXJhbUVkaXRvciwKICAgIGRlc2VyaWFsaXplOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZShzdGF0ZSwgYWdnKSB7CiAgICAgIC8vIEZvciB1cGdyYWRpbmcgZnJvbSA3LjAueCB0byA3LjEueCAtIGludGVydmFscyBhcmUgbm93IHN0b3JlZCBhcyBrZXkgb2Ygb3B0aW9ucyBvciBjdXN0b20gdmFsdWUKICAgICAgaWYgKHN0YXRlID09PSAnY3VzdG9tJykgewogICAgICAgIHJldHVybiBfbG9kYXNoLmRlZmF1bHQuZ2V0KGFnZywgJ3BhcmFtcy5jdXN0b21JbnRlcnZhbCcpOwogICAgICB9CgogICAgICB2YXIgaW50ZXJ2YWwgPSBfbG9kYXNoLmRlZmF1bHQuZmluZChfaW50ZXJ2YWxfb3B0aW9ucy5pbnRlcnZhbE9wdGlvbnMsIHsKICAgICAgICB2YWw6IHN0YXRlCiAgICAgIH0pOyAvLyBGb3IgdXBncmFkaW5nIGZyb20gNC4wLnggdG8gNC4xLnggLSBpbnRlcnZhbHMgYXJlIG5vdyBzdG9yZWQgYXMgJ3knIGluc3RlYWQgb2YgJ3llYXInLAogICAgICAvLyBidXQgdGhpcyBtYXBzIHRoZSBvbGQgdmFsdWVzIHRvIHRoZSBuZXcgdmFsdWVzCgoKICAgICAgaWYgKCFpbnRlcnZhbCAmJiBzdGF0ZSA9PT0gJ3llYXInKSB7CiAgICAgICAgcmV0dXJuICd5JzsKICAgICAgfQoKICAgICAgcmV0dXJuIHN0YXRlOwogICAgfSwKICAgIGRlZmF1bHQ6ICdhdXRvJywKICAgIG9wdGlvbnM6IF9pbnRlcnZhbF9vcHRpb25zLmludGVydmFsT3B0aW9ucywKICAgIG1vZGlmeUFnZ0NvbmZpZ09uU2VhcmNoUmVxdWVzdFN0YXJ0OiBmdW5jdGlvbiBtb2RpZnlBZ2dDb25maWdPblNlYXJjaFJlcXVlc3RTdGFydChhZ2cpIHsKICAgICAgc2V0Qm91bmRzKGFnZywgdHJ1ZSk7CiAgICB9LAogICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKGFnZywgb3V0cHV0LCBhZ2dzKSB7CiAgICAgIHNldEJvdW5kcyhhZ2csIHRydWUpOwogICAgICBhZ2cuYnVja2V0cy5zZXRJbnRlcnZhbChnZXRJbnRlcnZhbChhZ2cpKTsKICAgICAgdmFyIF9hZ2ckcGFyYW1zID0gYWdnLnBhcmFtcywKICAgICAgICAgIHVzZU5vcm1hbGl6ZWRFc0ludGVydmFsID0gX2FnZyRwYXJhbXMudXNlTm9ybWFsaXplZEVzSW50ZXJ2YWwsCiAgICAgICAgICBzY2FsZU1ldHJpY1ZhbHVlcyA9IF9hZ2ckcGFyYW1zLnNjYWxlTWV0cmljVmFsdWVzOwogICAgICB2YXIgaW50ZXJ2YWwgPSBhZ2cuYnVja2V0cy5nZXRJbnRlcnZhbCh1c2VOb3JtYWxpemVkRXNJbnRlcnZhbCk7CiAgICAgIG91dHB1dC5idWNrZXRJbnRlcnZhbCA9IGludGVydmFsOwoKICAgICAgaWYgKGludGVydmFsLmV4cHJlc3Npb24gPT09ICcwbXMnKSB7CiAgICAgICAgLy8gV2UgYXJlIGhpdHRpbmcgdGhpcyBjb2RlIGEgY291cGxlIG9mIHRpbWVzIHdoaWxlIGNvbmZpZ3VyaW5nIGluIGVkaXRvcgogICAgICAgIC8vIHdpdGggYW4gaW50ZXJ2YWwgb2YgMG1zIGJlY2F1c2UgdGhlIG92ZXJhbGwgdGltZSByYW5nZSBoYXMgbm90IHlldCBiZWVuCiAgICAgICAgLy8gc2V0LiBTaW5jZSAwbXMgaXMgbm90IGEgdmFsaWQgRVMgaW50ZXJ2YWwsIHdlIGNhbm5vdCBwYXNzIGl0IHRocm91Z2ggZGF0ZUhpc3RvZ3JhbUludGVydmFsCiAgICAgICAgLy8gYmVsb3csIHNpbmNlIGl0IHdvdWxkIHRocm93IGFuIGV4Y2VwdGlvbi4gU28gaW4gdGhlIGNhc2VzIHdlIHN0aWxsIGhhdmUgYW4gaW50ZXJ2YWwgb2YgMG1zCiAgICAgICAgLy8gaGVyZSB3ZSBzaW1wbHkgc2tpcCB0aGUgcmVzdCBvZiB0aGUgbWV0aG9kIGFuZCBuZXZlciB3cml0ZSBhbiBpbnRlcnZhbCBpbnRvIHRoZSBEU0wsIHNpbmNlCiAgICAgICAgLy8gdGhpcyBEU0wgd2lsbCBhbnl3YXkgbm90IGJlIHVzZWQgYmVmb3JlIHdlJ3JlIHBhc3NpbmcgdGhpcyBjb2RlIHdpdGggYW4gYWN0dWFsIGludGVydmFsLgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgb3V0cHV0LnBhcmFtcyA9IF9vYmplY3RTcHJlYWQoe30sIG91dHB1dC5wYXJhbXMsIHt9LCAoMCwgX3B1YmxpYy5kYXRlSGlzdG9ncmFtSW50ZXJ2YWwpKGludGVydmFsLmV4cHJlc3Npb24pKTsKICAgICAgdmFyIHNjYWxlTWV0cmljcyA9IHNjYWxlTWV0cmljVmFsdWVzICYmIGludGVydmFsLnNjYWxlZCAmJiBpbnRlcnZhbC5zY2FsZSA8IDE7CgogICAgICBpZiAoc2NhbGVNZXRyaWNzICYmIGFnZ3MpIHsKICAgICAgICB2YXIgbWV0cmljcyA9IGFnZ3MuYWdncy5maWx0ZXIoZnVuY3Rpb24gKGEpIHsKICAgICAgICAgIHJldHVybiAoMCwgX21ldHJpY19hZ2dfdHlwZS5pc01ldHJpY0FnZ1R5cGUpKGEudHlwZSk7CiAgICAgICAgfSk7CgogICAgICAgIHZhciBhbGwgPSBfbG9kYXNoLmRlZmF1bHQuZXZlcnkobWV0cmljcywgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgIHZhciB0eXBlID0gYS50eXBlOwoKICAgICAgICAgIGlmICgoMCwgX21ldHJpY19hZ2dfdHlwZS5pc01ldHJpY0FnZ1R5cGUpKHR5cGUpKSB7CiAgICAgICAgICAgIHJldHVybiB0eXBlLmlzU2NhbGFibGUoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgaWYgKGFsbCkgewogICAgICAgICAgb3V0cHV0Lm1ldHJpY1NjYWxlID0gaW50ZXJ2YWwuc2NhbGU7CiAgICAgICAgICBvdXRwdXQubWV0cmljU2NhbGVUZXh0ID0gaW50ZXJ2YWwucHJlU2NhbGVkLmRlc2NyaXB0aW9uOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIG5hbWU6ICd0aW1lX3pvbmUnLAogICAgZGVmYXVsdDogdW5kZWZpbmVkLAogICAgLy8gV2UgZG9uJ3QgZXZlciB3YW50IHRoaXMgcGFyYW1ldGVyIHRvIGJlIHNlcmlhbGl6ZWQgb3V0ICh3aGVuIHNhdmluZyBvciB0byBVUkxzKQogICAgLy8gc2luY2Ugd2UgZG8gYWxsIHRoZSBsb2dpYyBoYW5kbGluZyBpdCAib24gdGhlIGZseSIgaW4gdGhlIGB3cml0ZWAgbWV0aG9kLCB0byBwcmV2ZW50CiAgICAvLyB0aW1lX3pvbmVzIGJlaW5nIHBlcnNpc3RlZCBpbnRvIHNhdmVkX29iamVjdHMKICAgIHNlcmlhbGl6ZTogX2xvZGFzaC5kZWZhdWx0Lm5vb3AsCiAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUoYWdnLCBvdXRwdXQpIHsKICAgICAgLy8gSWYgYSB0aW1lX3pvbmUgaGFzIGJlZW4gc2V0IGV4cGxpY2l0bHkgYWx3YXlzIHByZWZlciB0aGlzLgogICAgICB2YXIgdHogPSBhZ2cucGFyYW1zLnRpbWVfem9uZTsKCiAgICAgIGlmICghdHogJiYgYWdnLnBhcmFtcy5maWVsZCkgewogICAgICAgIC8vIElmIGEgZmllbGQgaGFzIGJlZW4gY29uZmlndXJlZCBjaGVjayB0aGUgaW5kZXggcGF0dGVybidzIHR5cGVNZXRhIGlmIGEgZGF0ZV9oaXN0b2dyYW0gb24gdGhhdAogICAgICAgIC8vIGZpZWxkIHJlcXVpcmVzIGEgc3BlY2lmaWMgdGltZV96b25lCiAgICAgICAgdHogPSBfbG9kYXNoLmRlZmF1bHQuZ2V0KGFnZy5nZXRJbmRleFBhdHRlcm4oKSwgWyd0eXBlTWV0YScsICdhZ2dzJywgJ2RhdGVfaGlzdG9ncmFtJywgYWdnLnBhcmFtcy5maWVsZC5uYW1lLCAndGltZV96b25lJ10pOwogICAgICB9CgogICAgICBpZiAoIXR6KSB7CiAgICAgICAgdmFyIGNvbmZpZyA9IF9uZXdfcGxhdGZvcm0ubnBTdGFydC5jb3JlLnVpU2V0dGluZ3M7IC8vIElmIHRoZSBpbmRleCBwYXR0ZXJuIHR5cGVNZXRhIGRhdGEsIGRpZG4ndCBoYWQgYSB0aW1lIHpvbmUgYXNzaWduZWQgZm9yIHRoZSBzZWxlY3RlZCBmaWVsZCB1c2UgdGhlIGNvbmZpZ3VyZWQgdHoKCiAgICAgICAgdmFyIGlzRGVmYXVsdFRpbWV6b25lID0gY29uZmlnLmlzRGVmYXVsdCgnZGF0ZUZvcm1hdDp0eicpOwogICAgICAgIHR6ID0gaXNEZWZhdWx0VGltZXpvbmUgPyBkZXRlY3RlZFRpbWV6b25lIHx8IHR6T2Zmc2V0IDogY29uZmlnLmdldCgnZGF0ZUZvcm1hdDp0eicpOwogICAgICB9CgogICAgICBvdXRwdXQucGFyYW1zLnRpbWVfem9uZSA9IHR6OwogICAgfQogIH0sIHsKICAgIG5hbWU6ICdkcm9wX3BhcnRpYWxzJywKICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgd3JpdGU6IF9sb2Rhc2guZGVmYXVsdC5ub29wLAogICAgZWRpdG9yQ29tcG9uZW50OiBfZHJvcF9wYXJ0aWFscy5Ecm9wUGFydGlhbHNQYXJhbUVkaXRvciwKICAgIHNob3VsZFNob3c6IGZ1bmN0aW9uIHNob3VsZFNob3coYWdnKSB7CiAgICAgIHZhciBmaWVsZCA9IGFnZy5wYXJhbXMuZmllbGQ7CiAgICAgIHJldHVybiBmaWVsZCAmJiBmaWVsZC5uYW1lICYmIGZpZWxkLm5hbWUgPT09IGFnZy5nZXRJbmRleFBhdHRlcm4oKS50aW1lRmllbGROYW1lOwogICAgfQogIH0sIHsKICAgIG5hbWU6ICdmb3JtYXQnCiAgfSwgewogICAgbmFtZTogJ21pbl9kb2NfY291bnQnLAogICAgZGVmYXVsdDogMQogIH0sIHsKICAgIG5hbWU6ICdleHRlbmRlZF9ib3VuZHMnLAogICAgZGVmYXVsdDoge30sCiAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUoYWdnLCBvdXRwdXQpIHsKICAgICAgdmFyIHZhbCA9IGFnZy5wYXJhbXMuZXh0ZW5kZWRfYm91bmRzOwoKICAgICAgaWYgKHZhbC5taW4gIT0gbnVsbCB8fCB2YWwubWF4ICE9IG51bGwpIHsKICAgICAgICBvdXRwdXQucGFyYW1zLmV4dGVuZGVkX2JvdW5kcyA9IHsKICAgICAgICAgIG1pbjogKDAsIF9tb21lbnRUaW1lem9uZS5kZWZhdWx0KSh2YWwubWluKS52YWx1ZU9mKCksCiAgICAgICAgICBtYXg6ICgwLCBfbW9tZW50VGltZXpvbmUuZGVmYXVsdCkodmFsLm1heCkudmFsdWVPZigpCiAgICAgICAgfTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0KICB9XQp9KTsKZXhwb3J0cy5kYXRlSGlzdG9ncmFtQnVja2V0QWdnID0gZGF0ZUhpc3RvZ3JhbUJ1Y2tldEFnZzs="},null]}