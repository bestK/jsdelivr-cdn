{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/apm/public/components/app/ServiceMap/index.js","dependencies":[{"path":"x-pack/legacy/plugins/apm/public/components/app/ServiceMap/index.js","mtime":1585205042566},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlNlcnZpY2VNYXAgPSBTZXJ2aWNlTWFwOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfZXVpX3RoZW1lX2xpZ2h0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAZWxhc3RpYy9ldWkvZGlzdC9ldWlfdGhlbWVfbGlnaHQuanNvbiIpKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3BsdWdpbnMva2liYW5hX3JlYWN0L3B1YmxpYyIpOwoKdmFyIF91c2VBcG1QbHVnaW5Db250ZXh0ID0gcmVxdWlyZSgiLi4vLi4vLi4vaG9va3MvdXNlQXBtUGx1Z2luQ29udGV4dCIpOwoKdmFyIF91c2VDYWxsQXBtQXBpID0gcmVxdWlyZSgiLi4vLi4vLi4vaG9va3MvdXNlQ2FsbEFwbUFwaSIpOwoKdmFyIF91c2VEZWVwT2JqZWN0SWRlbnRpdHkgPSByZXF1aXJlKCIuLi8uLi8uLi9ob29rcy91c2VEZWVwT2JqZWN0SWRlbnRpdHkiKTsKCnZhciBfdXNlTGljZW5zZSA9IHJlcXVpcmUoIi4uLy4uLy4uL2hvb2tzL3VzZUxpY2Vuc2UiKTsKCnZhciBfdXNlTG9jYXRpb24yID0gcmVxdWlyZSgiLi4vLi4vLi4vaG9va3MvdXNlTG9jYXRpb24iKTsKCnZhciBfdXNlVXJsUGFyYW1zMiA9IHJlcXVpcmUoIi4uLy4uLy4uL2hvb2tzL3VzZVVybFBhcmFtcyIpOwoKdmFyIF9Db250cm9scyA9IHJlcXVpcmUoIi4vQ29udHJvbHMiKTsKCnZhciBfQ3l0b3NjYXBlID0gcmVxdWlyZSgiLi9DeXRvc2NhcGUiKTsKCnZhciBfZ2V0X2N5dG9zY2FwZV9lbGVtZW50cyA9IHJlcXVpcmUoIi4vZ2V0X2N5dG9zY2FwZV9lbGVtZW50cyIpOwoKdmFyIF9Mb2FkaW5nT3ZlcmxheSA9IHJlcXVpcmUoIi4vTG9hZGluZ092ZXJsYXkiKTsKCnZhciBfUGxhdGludW1MaWNlbnNlUHJvbXB0ID0gcmVxdWlyZSgiLi9QbGF0aW51bUxpY2Vuc2VQcm9tcHQiKTsKCnZhciBfUG9wb3ZlciA9IHJlcXVpcmUoIi4vUG9wb3ZlciIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgewogIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OwoKICB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7CgogIHZhciBrZXksIGk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsKCiAgICBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgewogICAgICBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOwogICAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOwogICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOwogICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgewogIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OwogIHZhciB0YXJnZXQgPSB7fTsKICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7CiAgdmFyIGtleSwgaTsKCiAgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsKICAgIGtleSA9IHNvdXJjZUtleXNbaV07CiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOwogICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgY3l0b3NjYXBlRGl2U3R5bGUgPSB7CiAgaGVpZ2h0OiAnODV2aCcsCiAgYmFja2dyb3VuZDogImxpbmVhci1ncmFkaWVudChcbiAgOTBkZWcsXG4gICIuY29uY2F0KF9ldWlfdGhlbWVfbGlnaHQuZGVmYXVsdC5ldWlQYWdlQmFja2dyb3VuZENvbG9yLCAiXG4gICAgY2FsYygiKS5jb25jYXQoX2V1aV90aGVtZV9saWdodC5kZWZhdWx0LmV1aVNpemVMLCAiIC0gY2FsYygiKS5jb25jYXQoX2V1aV90aGVtZV9saWdodC5kZWZhdWx0LmV1aVNpemVYUywgIiAvIDIpKSxcbiAgdHJhbnNwYXJlbnQgMSVcbilcbmNlbnRlcixcbmxpbmVhci1ncmFkaWVudChcbiAgIikuY29uY2F0KF9ldWlfdGhlbWVfbGlnaHQuZGVmYXVsdC5ldWlQYWdlQmFja2dyb3VuZENvbG9yLCAiXG4gICAgY2FsYygiKS5jb25jYXQoX2V1aV90aGVtZV9saWdodC5kZWZhdWx0LmV1aVNpemVMLCAiIC0gY2FsYygiKS5jb25jYXQoX2V1aV90aGVtZV9saWdodC5kZWZhdWx0LmV1aVNpemVYUywgIiAvIDIpKSxcbiAgdHJhbnNwYXJlbnQgMSVcbilcbmNlbnRlcixcbiIpLmNvbmNhdChfZXVpX3RoZW1lX2xpZ2h0LmRlZmF1bHQuZXVpQ29sb3JMaWdodFNoYWRlKSwKICBiYWNrZ3JvdW5kU2l6ZTogIiIuY29uY2F0KF9ldWlfdGhlbWVfbGlnaHQuZGVmYXVsdC5ldWlTaXplTCwgIiAiKS5jb25jYXQoX2V1aV90aGVtZV9saWdodC5kZWZhdWx0LmV1aVNpemVMKSwKICBtYXJnaW46ICItIi5jb25jYXQoX2V1aV90aGVtZV9saWdodC5kZWZhdWx0Lmd1dHRlclR5cGVzLmd1dHRlckxhcmdlKQp9Owp2YXIgTUFYX1JFUVVFU1RTID0gNTsKCmZ1bmN0aW9uIFNlcnZpY2VNYXAoX3JlZikgewogIHZhciBzZXJ2aWNlTmFtZSA9IF9yZWYuc2VydmljZU5hbWU7CiAgdmFyIGNhbGxBcG1BcGkgPSAoMCwgX3VzZUNhbGxBcG1BcGkudXNlQ2FsbEFwbUFwaSkoKTsKICB2YXIgbGljZW5zZSA9ICgwLCBfdXNlTGljZW5zZS51c2VMaWNlbnNlKSgpOwoKICB2YXIgX3VzZUxvY2F0aW9uID0gKDAsIF91c2VMb2NhdGlvbjIudXNlTG9jYXRpb24pKCksCiAgICAgIHNlYXJjaCA9IF91c2VMb2NhdGlvbi5zZWFyY2g7CgogIHZhciBfdXNlVXJsUGFyYW1zID0gKDAsIF91c2VVcmxQYXJhbXMyLnVzZVVybFBhcmFtcykoKSwKICAgICAgdXJsUGFyYW1zID0gX3VzZVVybFBhcmFtcy51cmxQYXJhbXMsCiAgICAgIHVpRmlsdGVycyA9IF91c2VVcmxQYXJhbXMudWlGaWx0ZXJzOwoKICB2YXIgbm90aWZpY2F0aW9ucyA9ICgwLCBfdXNlQXBtUGx1Z2luQ29udGV4dC51c2VBcG1QbHVnaW5Db250ZXh0KSgpLmNvcmUubm90aWZpY2F0aW9uczsKICB2YXIgcGFyYW1zID0gKDAsIF91c2VEZWVwT2JqZWN0SWRlbnRpdHkudXNlRGVlcE9iamVjdElkZW50aXR5KSh7CiAgICBzdGFydDogdXJsUGFyYW1zLnN0YXJ0LAogICAgZW5kOiB1cmxQYXJhbXMuZW5kLAogICAgZW52aXJvbm1lbnQ6IHVybFBhcmFtcy5lbnZpcm9ubWVudCwKICAgIHNlcnZpY2VOYW1lOiBzZXJ2aWNlTmFtZSwKICAgIHVpRmlsdGVyczogX29iamVjdFNwcmVhZCh7fSwgdWlGaWx0ZXJzLCB7CiAgICAgIGVudmlyb25tZW50OiB1bmRlZmluZWQKICAgIH0pCiAgfSk7CiAgdmFyIHJlbmRlcmVkRWxlbWVudHMgPSAoMCwgX3JlYWN0LnVzZVJlZikoW10pOwogIHZhciBvcGVuVG9hc3QgPSAoMCwgX3JlYWN0LnVzZVJlZikobnVsbCk7CgogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShbXSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICByZXNwb25zZXMgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRSZXNwb25zZXMgPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZVN0YXRlMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHRydWUpLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIGlzTG9hZGluZyA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldElzTG9hZGluZyA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBfdXNlU3RhdGU1ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoMCksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgcGVyY2VudGFnZUxvYWRlZCA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldFBlcmNlbnRhZ2VMb2FkZWQgPSBfdXNlU3RhdGU2WzFdOwoKICB2YXIgX3VzZVN0YXRlNyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3VzZVN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTcsIDIpLAogICAgICBfc2V0VW51c2VkU3RhdGUgPSBfdXNlU3RhdGU4WzFdOwoKICB2YXIgZWxlbWVudHMgPSAoMCwgX3JlYWN0LnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiAoMCwgX2dldF9jeXRvc2NhcGVfZWxlbWVudHMuZ2V0Q3l0b3NjYXBlRWxlbWVudHMpKHJlc3BvbnNlcywgc2VhcmNoKTsKICB9LCBbcmVzcG9uc2VzLCBzZWFyY2hdKTsKICB2YXIgZm9yY2VVcGRhdGUgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gX3NldFVudXNlZFN0YXRlKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICByZXR1cm4gIXZhbHVlOwogICAgfSk7CiAgfSwgW10pOwogIHZhciBnZXROZXh0ID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gX2NhbGxlZShpbnB1dCkgewogICAgdmFyIHN0YXJ0LCBlbmQsIHN0cmlwcGVkVWlGaWx0ZXJzLCBxdWVyeSwgZGF0YSwgc2hvdWxkR2V0TmV4dDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHN0YXJ0ID0gcGFyYW1zLnN0YXJ0LCBlbmQgPSBwYXJhbXMuZW5kLCBzdHJpcHBlZFVpRmlsdGVycyA9IHBhcmFtcy51aUZpbHRlcnMsIHF1ZXJ5ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHBhcmFtcywgWyJzdGFydCIsICJlbmQiLCAidWlGaWx0ZXJzIl0pOwoKICAgICAgICAgICAgaWYgKGlucHV0LnJlc2V0KSB7CiAgICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50cy5jdXJyZW50ID0gW107CiAgICAgICAgICAgICAgc2V0UmVzcG9uc2VzKFtdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEoc3RhcnQgJiYgZW5kKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2V0SXNMb2FkaW5nKHRydWUpOwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY2FsbEFwbUFwaSh7CiAgICAgICAgICAgICAgcGF0aG5hbWU6ICcvYXBpL2FwbS9zZXJ2aWNlLW1hcCcsCiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICBxdWVyeTogX29iamVjdFNwcmVhZCh7fSwgcXVlcnksIHsKICAgICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICAgICAgICAgICAgICBlbmQ6IGVuZCwKICAgICAgICAgICAgICAgICAgdWlGaWx0ZXJzOiBKU09OLnN0cmluZ2lmeShzdHJpcHBlZFVpRmlsdGVycyksCiAgICAgICAgICAgICAgICAgIGFmdGVyOiBpbnB1dC5hZnRlcgogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBzZXRSZXNwb25zZXMoZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzcC5jb25jYXQoZGF0YSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpOwogICAgICAgICAgICBzaG91bGRHZXROZXh0ID0gcmVzcG9uc2VzLmxlbmd0aCArIDEgPCBNQVhfUkVRVUVTVFMgJiYgZGF0YS5hZnRlcjsKCiAgICAgICAgICAgIGlmICghc2hvdWxkR2V0TmV4dCkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2V0UGVyY2VudGFnZUxvYWRlZChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKyAzMDsKICAgICAgICAgICAgfSk7IC8vIGluY3JlYXNlIGxvYWRpbmcgYmFyIDMwJQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGdldE5leHQoewogICAgICAgICAgICAgIGFmdGVyOiBkYXRhLmFmdGVyCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNzsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSg0KTsKICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTsKICAgICAgICAgICAgbm90aWZpY2F0aW9ucy50b2FzdHMuYWRkRXJyb3IoX2NvbnRleHQudDAsIHsKICAgICAgICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmFwbS5lcnJvclNlcnZpY2VNYXBEYXRhJywgewogICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFcnJvciBsb2FkaW5nIHNlcnZpY2UgY29ubmVjdGlvbnMiCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBudWxsLCBudWxsLCBbWzQsIDE3XV0pOwogIH0sIFtjYWxsQXBtQXBpLCBwYXJhbXMsIHJlc3BvbnNlcy5sZW5ndGgsIG5vdGlmaWNhdGlvbnMudG9hc3RzXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIHZhciBsb2FkU2VydmljZU1hcHMgPSBmdW5jdGlvbiBsb2FkU2VydmljZU1hcHMoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbG9hZFNlcnZpY2VNYXBzJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzZXRQZXJjZW50YWdlTG9hZGVkKDUpOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGdldE5leHQoewogICAgICAgICAgICAgICAgcmVzZXQ6IHRydWUKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgc2V0UGVyY2VudGFnZUxvYWRlZCgxMDApOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIGxvYWRTZXJ2aWNlTWFwcygpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzCiAgfSwgW3BhcmFtc10pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBpZiAocmVuZGVyZWRFbGVtZW50cy5jdXJyZW50Lmxlbmd0aCA9PT0gMCkgewogICAgICByZW5kZXJlZEVsZW1lbnRzLmN1cnJlbnQgPSBlbGVtZW50czsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBuZXdFbGVtZW50cyA9IGVsZW1lbnRzLmZpbHRlcihmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICByZXR1cm4gISgwLCBfbG9kYXNoLmZpbmQpKHJlbmRlcmVkRWxlbWVudHMuY3VycmVudCwgZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuICgwLCBfbG9kYXNoLmlzRXF1YWwpKGVsLCBlbGVtZW50KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICB2YXIgdXBkYXRlTWFwID0gZnVuY3Rpb24gdXBkYXRlTWFwKCkgewogICAgICByZW5kZXJlZEVsZW1lbnRzLmN1cnJlbnQgPSBlbGVtZW50czsKCiAgICAgIGlmIChvcGVuVG9hc3QuY3VycmVudCkgewogICAgICAgIG5vdGlmaWNhdGlvbnMudG9hc3RzLnJlbW92ZShvcGVuVG9hc3QuY3VycmVudCk7CiAgICAgIH0KCiAgICAgIGZvcmNlVXBkYXRlKCk7CiAgICB9OwoKICAgIGlmIChuZXdFbGVtZW50cy5sZW5ndGggPiAwICYmIHBlcmNlbnRhZ2VMb2FkZWQgPT09IDEwMCkgewogICAgICBvcGVuVG9hc3QuY3VycmVudCA9IG5vdGlmaWNhdGlvbnMudG9hc3RzLmFkZCh7CiAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5hcG0ubmV3U2VydmljZU1hcERhdGEnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIk5ld2x5IGRpc2NvdmVyZWQgY29ubmVjdGlvbnMgYXJlIGF2YWlsYWJsZS4iCiAgICAgICAgfSksCiAgICAgICAgb25DbG9zZTogZnVuY3Rpb24gb25DbG9zZSgpIHsKICAgICAgICAgIG9wZW5Ub2FzdC5jdXJyZW50ID0gbnVsbDsKICAgICAgICB9LAogICAgICAgIHRvYXN0TGlmZVRpbWVNczogMjQgKiA2MCAqIDYwICogMTAwMCwKICAgICAgICB0ZXh0OiAoMCwgX3B1YmxpYy50b01vdW50UG9pbnQpKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICAgIG9uQ2xpY2s6IHVwZGF0ZU1hcAogICAgICAgIH0sIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5hcG0udXBkYXRlU2VydmljZU1hcCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVXBkYXRlIG1hcCcKICAgICAgICB9KSkpCiAgICAgIH0pLmlkOwogICAgfQoKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChvcGVuVG9hc3QuY3VycmVudCkgewogICAgICAgIG5vdGlmaWNhdGlvbnMudG9hc3RzLnJlbW92ZShvcGVuVG9hc3QuY3VycmVudCk7CiAgICAgIH0KICAgIH07IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMKICB9LCBbZWxlbWVudHMsIHBlcmNlbnRhZ2VMb2FkZWRdKTsKICB2YXIgaXNWYWxpZFBsYXRpbnVtTGljZW5zZSA9IChsaWNlbnNlID09PSBudWxsIHx8IGxpY2Vuc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxpY2Vuc2UuaXNBY3RpdmUpICYmICgobGljZW5zZSA9PT0gbnVsbCB8fCBsaWNlbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsaWNlbnNlLnR5cGUpID09PSAncGxhdGludW0nIHx8IChsaWNlbnNlID09PSBudWxsIHx8IGxpY2Vuc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxpY2Vuc2UudHlwZSkgPT09ICd0cmlhbCcpOwogIHJldHVybiBpc1ZhbGlkUGxhdGludW1MaWNlbnNlID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTG9hZGluZ092ZXJsYXkuTG9hZGluZ092ZXJsYXksIHsKICAgIGlzTG9hZGluZzogaXNMb2FkaW5nLAogICAgcGVyY2VudGFnZUxvYWRlZDogcGVyY2VudGFnZUxvYWRlZAogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0N5dG9zY2FwZS5DeXRvc2NhcGUsIHsKICAgIGVsZW1lbnRzOiByZW5kZXJlZEVsZW1lbnRzLmN1cnJlbnQsCiAgICBzZXJ2aWNlTmFtZTogc2VydmljZU5hbWUsCiAgICBzdHlsZTogY3l0b3NjYXBlRGl2U3R5bGUKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Db250cm9scy5Db250cm9scywgbnVsbCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1BvcG92ZXIuUG9wb3ZlciwgewogICAgZm9jdXNlZFNlcnZpY2VOYW1lOiBzZXJ2aWNlTmFtZQogIH0pKSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9QbGF0aW51bUxpY2Vuc2VQcm9tcHQuUGxhdGludW1MaWNlbnNlUHJvbXB0LCBudWxsKTsKfQ=="},null]}