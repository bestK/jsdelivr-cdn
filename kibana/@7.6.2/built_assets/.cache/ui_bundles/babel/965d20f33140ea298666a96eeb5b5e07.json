{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/share/public/components/url_panel_content.js","dependencies":[{"path":"src/plugins/share/public/components/url_panel_content.js","mtime":1585205041902},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuVXJsUGFuZWxDb250ZW50ID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfdXJsID0gcmVxdWlyZSgidXJsIik7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX3VybF9zaG9ydGVuZXIgPSByZXF1aXJlKCIuLi9saWIvdXJsX3Nob3J0ZW5lciIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogIGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiKSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0gZWxzZSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfQoKICByZXR1cm4gX3R5cGVvZihvYmopOwp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7CiAgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgewogICAgcmV0dXJuIGNhbGw7CiAgfQoKICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsKfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsKICB9OwogIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7Cn0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgewogIGlmIChzZWxmID09PSB2b2lkIDApIHsKICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7CiAgfQoKICByZXR1cm4gc2VsZjsKfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7CiAgfQoKICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgIHZhbHVlOiBzdWJDbGFzcywKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgfQogIH0pOwogIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOwp9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogICAgby5fX3Byb3RvX18gPSBwOwogICAgcmV0dXJuIG87CiAgfTsKCiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCnZhciBFeHBvcnRVcmxBc1R5cGU7CgooZnVuY3Rpb24gKEV4cG9ydFVybEFzVHlwZSkgewogIEV4cG9ydFVybEFzVHlwZVsiRVhQT1JUX1VSTF9BU19TQVZFRF9PQkpFQ1QiXSA9ICJzYXZlZE9iamVjdCI7CiAgRXhwb3J0VXJsQXNUeXBlWyJFWFBPUlRfVVJMX0FTX1NOQVBTSE9UIl0gPSAic25hcHNob3QiOwp9KShFeHBvcnRVcmxBc1R5cGUgfHwgKEV4cG9ydFVybEFzVHlwZSA9IHt9KSk7Cgp2YXIgVXJsUGFuZWxDb250ZW50ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhVcmxQYW5lbENvbnRlbnQsIF9Db21wb25lbnQpOwoKICBmdW5jdGlvbiBVcmxQYW5lbENvbnRlbnQocHJvcHMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXJsUGFuZWxDb250ZW50KTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihVcmxQYW5lbENvbnRlbnQpLmNhbGwodGhpcywgcHJvcHMpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJtb3VudGVkIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzaG9ydFVybENhY2hlIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJpc05vdFNhdmVkIiwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3RoaXMucHJvcHMub2JqZWN0SWQgPT09IHVuZGVmaW5lZCB8fCBfdGhpcy5wcm9wcy5vYmplY3RJZCA9PT0gJyc7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZXNldFVybCIsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKF90aGlzLm1vdW50ZWQpIHsKICAgICAgICBfdGhpcy5zaG9ydFVybENhY2hlID0gdW5kZWZpbmVkOwoKICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICB1c2VTaG9ydFVybDogZmFsc2UKICAgICAgICB9LCBfdGhpcy5zZXRVcmwpOwogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnZXRTYXZlZE9iamVjdFVybCIsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKF90aGlzLmlzTm90U2F2ZWQoKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHVybCA9IF90aGlzLmdldFNuYXBzaG90VXJsKCk7CgogICAgICB2YXIgcGFyc2VkVXJsID0gKDAsIF91cmwucGFyc2UpKHVybCk7CgogICAgICBpZiAoIXBhcnNlZFVybCB8fCAhcGFyc2VkVXJsLmhhc2gpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gR2V0IHRoZSBhcHBsaWNhdGlvbiByb3V0ZSwgYWZ0ZXIgdGhlIGhhc2gsIGFuZCByZW1vdmUgdGhlICMuCgoKICAgICAgdmFyIHBhcnNlZEFwcFVybCA9ICgwLCBfdXJsLnBhcnNlKShwYXJzZWRVcmwuaGFzaC5zbGljZSgxKSwgdHJ1ZSk7CiAgICAgIHJldHVybiAoMCwgX3VybC5mb3JtYXQpKHsKICAgICAgICBwcm90b2NvbDogcGFyc2VkVXJsLnByb3RvY29sLAogICAgICAgIGF1dGg6IHBhcnNlZFVybC5hdXRoLAogICAgICAgIGhvc3Q6IHBhcnNlZFVybC5ob3N0LAogICAgICAgIHBhdGhuYW1lOiBwYXJzZWRVcmwucGF0aG5hbWUsCiAgICAgICAgaGFzaDogKDAsIF91cmwuZm9ybWF0KSh7CiAgICAgICAgICBwYXRobmFtZTogcGFyc2VkQXBwVXJsLnBhdGhuYW1lLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgLy8gQWRkIGdsb2JhbCBzdGF0ZSB0byB0aGUgVVJMIHNvIHRoYXQgdGhlIGlmcmFtZSBkb2Vzbid0IGp1c3Qgc2hvdyB0aGUgdGltZSByYW5nZQogICAgICAgICAgICAvLyBkZWZhdWx0LgogICAgICAgICAgICBfZzogcGFyc2VkQXBwVXJsLnF1ZXJ5Ll9nCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnZXRTbmFwc2hvdFVybCIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLnByb3BzLnNoYXJlYWJsZVVybCB8fCB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm1ha2VVcmxFbWJlZGRhYmxlIiwgZnVuY3Rpb24gKHVybCkgewogICAgICB2YXIgZW1iZWRRdWVyeVBhcmFtID0gJz9lbWJlZD10cnVlJzsKICAgICAgdmFyIHVybEhhc1F1ZXJ5U3RyaW5nID0gdXJsLmluZGV4T2YoJz8nKSAhPT0gLTE7CgogICAgICBpZiAodXJsSGFzUXVlcnlTdHJpbmcpIHsKICAgICAgICByZXR1cm4gdXJsLnJlcGxhY2UoJz8nLCAiIi5jb25jYXQoZW1iZWRRdWVyeVBhcmFtLCAiJiIpKTsKICAgICAgfQoKICAgICAgcmV0dXJuICIiLmNvbmNhdCh1cmwpLmNvbmNhdChlbWJlZFF1ZXJ5UGFyYW0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAibWFrZUlmcmFtZVRhZyIsIGZ1bmN0aW9uICh1cmwpIHsKICAgICAgaWYgKCF1cmwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBlbWJlZGRhYmxlVXJsID0gX3RoaXMubWFrZVVybEVtYmVkZGFibGUodXJsKTsKCiAgICAgIHJldHVybiAiPGlmcmFtZSBzcmM9XCIiLmNvbmNhdChlbWJlZGRhYmxlVXJsLCAiXCIgaGVpZ2h0PVwiNjAwXCIgd2lkdGg9XCI4MDBcIj48L2lmcmFtZT4iKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNldFVybCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHVybDsKCiAgICAgIGlmIChfdGhpcy5zdGF0ZS5leHBvcnRVcmxBcyA9PT0gRXhwb3J0VXJsQXNUeXBlLkVYUE9SVF9VUkxfQVNfU0FWRURfT0JKRUNUKSB7CiAgICAgICAgdXJsID0gX3RoaXMuZ2V0U2F2ZWRPYmplY3RVcmwoKTsKICAgICAgfSBlbHNlIGlmIChfdGhpcy5zdGF0ZS51c2VTaG9ydFVybCkgewogICAgICAgIHVybCA9IF90aGlzLnNob3J0VXJsQ2FjaGU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXJsID0gX3RoaXMuZ2V0U25hcHNob3RVcmwoKTsKICAgICAgfQoKICAgICAgaWYgKF90aGlzLnByb3BzLmlzRW1iZWRkZWQpIHsKICAgICAgICB1cmwgPSBfdGhpcy5tYWtlSWZyYW1lVGFnKHVybCk7CiAgICAgIH0KCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICB1cmw6IHVybAogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUV4cG9ydFVybEFzIiwgZnVuY3Rpb24gKG9wdGlvbklkKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBleHBvcnRVcmxBczogb3B0aW9uSWQKICAgICAgfSwgX3RoaXMuc2V0VXJsKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVNob3J0VXJsQ2hhbmdlIiwgZnVuY3Rpb24gX2NhbGxlZShldnQpIHsKICAgICAgdmFyIGlzQ2hlY2tlZCwgc2hvcnRVcmw7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaXNDaGVja2VkID0gZXZ0LnRhcmdldC5jaGVja2VkOwoKICAgICAgICAgICAgICBpZiAoISghaXNDaGVja2VkIHx8IF90aGlzLnNob3J0VXJsQ2FjaGUgIT09IHVuZGVmaW5lZCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICB1c2VTaG9ydFVybDogaXNDaGVja2VkCiAgICAgICAgICAgICAgfSwgX3RoaXMuc2V0VXJsKTsKCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgLy8gIlVzZSBzaG9ydCBVUkwiIGlzIGNoZWNrZWQgYnV0IHNob3J0VXJsIGhhcyBub3QgYmVlbiBnZW5lcmF0ZWQgeWV0IHNvIG9uZSBuZWVkcyB0byBiZSBjcmVhdGVkLgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzQ3JlYXRpbmdTaG9ydFVybDogdHJ1ZSwKICAgICAgICAgICAgICAgIHNob3J0VXJsRXJyb3JNc2c6IHVuZGVmaW5lZAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKCgwLCBfdXJsX3Nob3J0ZW5lci5zaG9ydGVuVXJsKShfdGhpcy5nZXRTbmFwc2hvdFVybCgpLCB7CiAgICAgICAgICAgICAgICBiYXNlUGF0aDogX3RoaXMucHJvcHMuYmFzZVBhdGgsCiAgICAgICAgICAgICAgICBwb3N0OiBfdGhpcy5wcm9wcy5wb3N0CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIHNob3J0VXJsID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKF90aGlzLm1vdW50ZWQpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNob3J0VXJsQ2FjaGUgPSBzaG9ydFVybDsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzQ3JlYXRpbmdTaG9ydFVybDogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHVzZVNob3J0VXJsOiBpc0NoZWNrZWQKICAgICAgICAgICAgICAgIH0sIF90aGlzLnNldFVybCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMjsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDUpOwoKICAgICAgICAgICAgICBpZiAoX3RoaXMubW91bnRlZCkgewogICAgICAgICAgICAgICAgX3RoaXMuc2hvcnRVcmxDYWNoZSA9IHVuZGVmaW5lZDsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIHVzZVNob3J0VXJsOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgaXNDcmVhdGluZ1Nob3J0VXJsOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgc2hvcnRVcmxFcnJvck1zZzogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3NoYXJlLnVybFBhbmVsLnVuYWJsZUNyZWF0ZVNob3J0VXJsRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVW5hYmxlIHRvIGNyZWF0ZSBzaG9ydCBVUkwuIEVycm9yOiB7ZXJyb3JNZXNzYWdlfScsCiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IF9jb250ZXh0LnQwLm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCBfdGhpcy5zZXRVcmwpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIG51bGwsIFtbNSwgMTJdXSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJFeHBvcnRVcmxBc09wdGlvbnMiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBbX2RlZmluZVByb3BlcnR5KHsKICAgICAgICBpZDogRXhwb3J0VXJsQXNUeXBlLkVYUE9SVF9VUkxfQVNfU05BUFNIT1QsCiAgICAgICAgbGFiZWw6IF90aGlzLnJlbmRlcldpdGhJY29uVGlwKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInNoYXJlLnVybFBhbmVsLnNuYXBzaG90TGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTbmFwc2hvdCIKICAgICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAic2hhcmUudXJsUGFuZWwuc25hcHNob3REZXNjcmlwdGlvbiIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNuYXBzaG90IFVSTHMgZW5jb2RlIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSB7b2JqZWN0VHlwZX0gaW4gdGhlIFVSTCBpdHNlbGYuIEVkaXRzIHRvIHRoZSBzYXZlZCB7b2JqZWN0VHlwZX0gd29uJ3QgYmUgdmlzaWJsZSB2aWEgdGhpcyBVUkwuIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBvYmplY3RUeXBlOiBfdGhpcy5wcm9wcy5vYmplY3RUeXBlCiAgICAgICAgICB9CiAgICAgICAgfSkpCiAgICAgIH0sICdkYXRhLXRlc3Qtc3ViaicsICdleHBvcnRBc1NuYXBzaG90JyksIF9kZWZpbmVQcm9wZXJ0eSh7CiAgICAgICAgaWQ6IEV4cG9ydFVybEFzVHlwZS5FWFBPUlRfVVJMX0FTX1NBVkVEX09CSkVDVCwKICAgICAgICBkaXNhYmxlZDogX3RoaXMuaXNOb3RTYXZlZCgpLAogICAgICAgIGxhYmVsOiBfdGhpcy5yZW5kZXJXaXRoSWNvblRpcChfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJzaGFyZS51cmxQYW5lbC5zYXZlZE9iamVjdExhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2F2ZWQgb2JqZWN0IgogICAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJzaGFyZS51cmxQYW5lbC5zYXZlZE9iamVjdERlc2NyaXB0aW9uIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiWW91IGNhbiBzaGFyZSB0aGlzIFVSTCB3aXRoIHBlb3BsZSB0byBsZXQgdGhlbSBsb2FkIHRoZSBtb3N0IHJlY2VudCBzYXZlZCB2ZXJzaW9uIG9mIHRoaXMge29iamVjdFR5cGV9LiIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgb2JqZWN0VHlwZTogX3RoaXMucHJvcHMub2JqZWN0VHlwZQogICAgICAgICAgfQogICAgICAgIH0pKQogICAgICB9LCAnZGF0YS10ZXN0LXN1YmonLCAnZXhwb3J0QXNTYXZlZE9iamVjdCcpXTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbmRlcldpdGhJY29uVGlwIiwgZnVuY3Rpb24gKGNoaWxkLCB0aXBDb250ZW50KSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgICAgZ3V0dGVyU2l6ZTogIm5vbmUiLAogICAgICAgIHJlc3BvbnNpdmU6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgY2hpbGQpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSWNvblRpcCwgewogICAgICAgIGNvbnRlbnQ6IHRpcENvbnRlbnQsCiAgICAgICAgcG9zaXRpb246ICJib3R0b20iCiAgICAgIH0pKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJFeHBvcnRBc1JhZGlvR3JvdXAiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBnZW5lcmF0ZUxpbmtBc0hlbHAgPSBfdGhpcy5pc05vdFNhdmVkKCkgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAic2hhcmUudXJsUGFuZWwuY2FuTm90U2hhcmVBc1NhdmVkT2JqZWN0SGVscFRleHQiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ2FuJ3Qgc2hhcmUgYXMgc2F2ZWQgb2JqZWN0IHVudGlsIHRoZSB7b2JqZWN0VHlwZX0gaGFzIGJlZW4gc2F2ZWQuIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIG9iamVjdFR5cGU6IF90aGlzLnByb3BzLm9iamVjdFR5cGUKICAgICAgICB9CiAgICAgIH0pIDogdW5kZWZpbmVkOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgICAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAic2hhcmUudXJsUGFuZWwuZ2VuZXJhdGVMaW5rQXNMYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkdlbmVyYXRlIHRoZSBsaW5rIGFzIgogICAgICAgIH0pLAogICAgICAgIGhlbHBUZXh0OiBnZW5lcmF0ZUxpbmtBc0hlbHAKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVJhZGlvR3JvdXAsIHsKICAgICAgICBvcHRpb25zOiBfdGhpcy5yZW5kZXJFeHBvcnRVcmxBc09wdGlvbnMoKSwKICAgICAgICBpZFNlbGVjdGVkOiBfdGhpcy5zdGF0ZS5leHBvcnRVcmxBcywKICAgICAgICBvbkNoYW5nZTogX3RoaXMuaGFuZGxlRXhwb3J0VXJsQXMKICAgICAgfSkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVuZGVyU2hvcnRVcmxTd2l0Y2giLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChfdGhpcy5zdGF0ZS5leHBvcnRVcmxBcyA9PT0gRXhwb3J0VXJsQXNUeXBlLkVYUE9SVF9VUkxfQVNfU0FWRURfT0JKRUNUIHx8ICFfdGhpcy5wcm9wcy5hbGxvd1Nob3J0VXJsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc2hvcnRVcmxMYWJlbCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJzaGFyZS51cmxQYW5lbC5zaG9ydFVybExhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNob3J0IFVSTCIKICAgICAgfSk7CgogICAgICB2YXIgc3dpdGNoTGFiZWwgPSBfdGhpcy5zdGF0ZS5pc0NyZWF0aW5nU2hvcnRVcmwgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxvYWRpbmdTcGlubmVyLCB7CiAgICAgICAgc2l6ZTogInMiCiAgICAgIH0pLCAiICIsIHNob3J0VXJsTGFiZWwpIDogc2hvcnRVcmxMYWJlbDsKCiAgICAgIHZhciBzd2l0Y2hDb21wb25lbnQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3dpdGNoLCB7CiAgICAgICAgbGFiZWw6IHN3aXRjaExhYmVsLAogICAgICAgIGNoZWNrZWQ6IF90aGlzLnN0YXRlLnVzZVNob3J0VXJsLAogICAgICAgIG9uQ2hhbmdlOiBfdGhpcy5oYW5kbGVTaG9ydFVybENoYW5nZSwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAidXNlU2hvcnRVcmwiCiAgICAgIH0pOwoKICAgICAgdmFyIHRpcENvbnRlbnQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAic2hhcmUudXJsUGFuZWwuc2hvcnRVcmxIZWxwVGV4dCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJXZSByZWNvbW1lbmQgc2hhcmluZyBzaG9ydGVuZWQgc25hcHNob3QgVVJMcyBmb3IgbWF4aW11bSBjb21wYXRpYmlsaXR5LiBJbnRlcm5ldCBFeHBsb3JlciBoYXMgVVJMIGxlbmd0aCByZXN0cmljdGlvbnMsIGFuZCBzb21lIHdpa2kgYW5kIG1hcmt1cCBwYXJzZXJzIGRvbid0IGRvIHdlbGwgd2l0aCB0aGUgZnVsbC1sZW5ndGggdmVyc2lvbiBvZiB0aGUgc25hcHNob3QgVVJMLCBidXQgdGhlIHNob3J0IFVSTCBzaG91bGQgd29yayBncmVhdC4iCiAgICAgIH0pOwoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgICAgaGVscFRleHQ6IF90aGlzLnN0YXRlLnNob3J0VXJsRXJyb3JNc2csCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImNyZWF0ZVNob3J0VXJsIgogICAgICB9LCBfdGhpcy5yZW5kZXJXaXRoSWNvblRpcChzd2l0Y2hDb21wb25lbnQsIHRpcENvbnRlbnQpKTsKICAgIH0pOwoKICAgIF90aGlzLnNob3J0VXJsQ2FjaGUgPSB1bmRlZmluZWQ7CiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgZXhwb3J0VXJsQXM6IEV4cG9ydFVybEFzVHlwZS5FWFBPUlRfVVJMX0FTX1NOQVBTSE9ULAogICAgICB1c2VTaG9ydFVybDogZmFsc2UsCiAgICAgIGlzQ3JlYXRpbmdTaG9ydFVybDogZmFsc2UsCiAgICAgIHVybDogJycKICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVXJsUGFuZWxDb250ZW50LCBbewogICAga2V5OiAiY29tcG9uZW50V2lsbFVubW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkgewogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMucmVzZXRVcmwpOwogICAgICB0aGlzLm1vdW50ZWQgPSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7CiAgICAgIHRoaXMuc2V0VXJsKCk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5yZXNldFVybCwgZmFsc2UpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuSTE4blByb3ZpZGVyLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybSwgewogICAgICAgIGNsYXNzTmFtZTogImtiblNoYXJlQ29udGV4dE1lbnVfX2ZpbmFsUGFuZWwiLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJzaGFyZVVybEZvcm0iCiAgICAgIH0sIHRoaXMucmVuZGVyRXhwb3J0QXNSYWRpb0dyb3VwKCksIHRoaXMucmVuZGVyU2hvcnRVcmxTd2l0Y2goKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICAgIHNpemU6ICJtIgogICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvcHksIHsKICAgICAgICB0ZXh0VG9Db3B5OiB0aGlzLnN0YXRlLnVybCB8fCAnJywKICAgICAgICBhbmNob3JDbGFzc05hbWU6ICJldWktZGlzcGxheUJsb2NrIgogICAgICB9LCBmdW5jdGlvbiAoY29weSkgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uLCB7CiAgICAgICAgICBmaWxsOiB0cnVlLAogICAgICAgICAgZnVsbFdpZHRoOiB0cnVlLAogICAgICAgICAgb25DbGljazogY29weSwKICAgICAgICAgIGRpc2FibGVkOiBfdGhpczIuc3RhdGUuaXNDcmVhdGluZ1Nob3J0VXJsIHx8IF90aGlzMi5zdGF0ZS51cmwgPT09ICcnLAogICAgICAgICAgImRhdGEtc2hhcmUtdXJsIjogX3RoaXMyLnN0YXRlLnVybCwKICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJjb3B5U2hhcmVVcmxCdXR0b24iLAogICAgICAgICAgc2l6ZTogInMiCiAgICAgICAgfSwgX3RoaXMyLnByb3BzLmlzRW1iZWRkZWQgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJzaGFyZS51cmxQYW5lbC5jb3B5SWZyYW1lQ29kZUJ1dHRvbkxhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ29weSBpRnJhbWUgY29kZSIKICAgICAgICB9KSA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInNoYXJlLnVybFBhbmVsLmNvcHlMaW5rQnV0dG9uTGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDb3B5IGxpbmsiCiAgICAgICAgfSkpOwogICAgICB9KSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFVybFBhbmVsQ29udGVudDsKfShfcmVhY3QuQ29tcG9uZW50KTsKCmV4cG9ydHMuVXJsUGFuZWxDb250ZW50ID0gVXJsUGFuZWxDb250ZW50Ow=="},null]}