{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/watcher/public/np_ready/application/lib/api.js","dependencies":[{"path":"x-pack/legacy/plugins/watcher/public/np_ready/application/lib/api.js","mtime":1585205048887},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmFja1dhdGNoQWN0aW9uID0gZXhwb3J0cy51c2VMb2FkU2V0dGluZ3MgPSBleHBvcnRzLnVzZUdldFdhdGNoVmlzdWFsaXphdGlvbkRhdGEgPSBleHBvcnRzLmxvYWRJbmRleFBhdHRlcm5zID0gZXhwb3J0cy5leGVjdXRlV2F0Y2ggPSBleHBvcnRzLmNyZWF0ZVdhdGNoID0gZXhwb3J0cy5mZXRjaEZpZWxkcyA9IGV4cG9ydHMuZ2V0TWF0Y2hpbmdJbmRpY2VzID0gZXhwb3J0cy5sb2FkV2F0Y2ggPSBleHBvcnRzLmFjdGl2YXRlV2F0Y2ggPSBleHBvcnRzLmRlYWN0aXZhdGVXYXRjaCA9IGV4cG9ydHMuZGVsZXRlV2F0Y2hlcyA9IGV4cG9ydHMudXNlTG9hZFdhdGNoSGlzdG9yeURldGFpbCA9IGV4cG9ydHMudXNlTG9hZFdhdGNoSGlzdG9yeSA9IGV4cG9ydHMudXNlTG9hZFdhdGNoRGV0YWlsID0gZXhwb3J0cy51c2VMb2FkV2F0Y2hlcyA9IGV4cG9ydHMuZ2V0U2F2ZWRPYmplY3RzQ2xpZW50ID0gZXhwb3J0cy5zZXRTYXZlZE9iamVjdHNDbGllbnQgPSBleHBvcnRzLmdldEh0dHBDbGllbnQgPSBleHBvcnRzLnNldEh0dHBDbGllbnQgPSB2b2lkIDA7Cgp2YXIgX3NldHRpbmdzID0gcmVxdWlyZSgicGx1Z2lucy93YXRjaGVyL25wX3JlYWR5L2FwcGxpY2F0aW9uL21vZGVscy9zZXR0aW5ncyIpOwoKdmFyIF93YXRjaCA9IHJlcXVpcmUoInBsdWdpbnMvd2F0Y2hlci9ucF9yZWFkeS9hcHBsaWNhdGlvbi9tb2RlbHMvd2F0Y2giKTsKCnZhciBfd2F0Y2hfaGlzdG9yeV9pdGVtID0gcmVxdWlyZSgicGx1Z2lucy93YXRjaGVyL25wX3JlYWR5L2FwcGxpY2F0aW9uL21vZGVscy93YXRjaF9oaXN0b3J5X2l0ZW0iKTsKCnZhciBfd2F0Y2hfc3RhdHVzID0gcmVxdWlyZSgicGx1Z2lucy93YXRjaGVyL25wX3JlYWR5L2FwcGxpY2F0aW9uL21vZGVscy93YXRjaF9zdGF0dXMiKTsKCnZhciBfdXNlX3JlcXVlc3QgPSByZXF1aXJlKCIuL3VzZV9yZXF1ZXN0Iik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMiKTsKLyoKICogQ29weXJpZ2h0IEVsYXN0aWNzZWFyY2ggQi5WLiBhbmQvb3IgbGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gTGljZW5zZWQgdW5kZXIgdGhlIEVsYXN0aWMgTGljZW5zZTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBFbGFzdGljIExpY2Vuc2UuCiAqLwoKCnZhciBodHRwQ2xpZW50OwoKdmFyIHNldEh0dHBDbGllbnQgPSBmdW5jdGlvbiBzZXRIdHRwQ2xpZW50KGFuSHR0cENsaWVudCkgewogIGh0dHBDbGllbnQgPSBhbkh0dHBDbGllbnQ7Cn07CgpleHBvcnRzLnNldEh0dHBDbGllbnQgPSBzZXRIdHRwQ2xpZW50OwoKdmFyIGdldEh0dHBDbGllbnQgPSBmdW5jdGlvbiBnZXRIdHRwQ2xpZW50KCkgewogIHJldHVybiBodHRwQ2xpZW50Owp9OwoKZXhwb3J0cy5nZXRIdHRwQ2xpZW50ID0gZ2V0SHR0cENsaWVudDsKdmFyIHNhdmVkT2JqZWN0c0NsaWVudDsKCnZhciBzZXRTYXZlZE9iamVjdHNDbGllbnQgPSBmdW5jdGlvbiBzZXRTYXZlZE9iamVjdHNDbGllbnQoYVNhdmVkT2JqZWN0c0NsaWVudCkgewogIHNhdmVkT2JqZWN0c0NsaWVudCA9IGFTYXZlZE9iamVjdHNDbGllbnQ7Cn07CgpleHBvcnRzLnNldFNhdmVkT2JqZWN0c0NsaWVudCA9IHNldFNhdmVkT2JqZWN0c0NsaWVudDsKCnZhciBnZXRTYXZlZE9iamVjdHNDbGllbnQgPSBmdW5jdGlvbiBnZXRTYXZlZE9iamVjdHNDbGllbnQoKSB7CiAgcmV0dXJuIHNhdmVkT2JqZWN0c0NsaWVudDsKfTsKCmV4cG9ydHMuZ2V0U2F2ZWRPYmplY3RzQ2xpZW50ID0gZ2V0U2F2ZWRPYmplY3RzQ2xpZW50Owp2YXIgYmFzZVBhdGggPSBfY29uc3RhbnRzLlJPVVRFUy5BUElfUk9PVDsKCnZhciB1c2VMb2FkV2F0Y2hlcyA9IGZ1bmN0aW9uIHVzZUxvYWRXYXRjaGVzKHBvbGxJbnRlcnZhbE1zKSB7CiAgcmV0dXJuICgwLCBfdXNlX3JlcXVlc3QudXNlUmVxdWVzdCkoewogICAgcGF0aDogIiIuY29uY2F0KGJhc2VQYXRoLCAiL3dhdGNoZXMiKSwKICAgIG1ldGhvZDogJ2dldCcsCiAgICBwb2xsSW50ZXJ2YWxNczogcG9sbEludGVydmFsTXMsCiAgICBkZXNlcmlhbGl6ZXI6IGZ1bmN0aW9uIGRlc2VyaWFsaXplcihfcmVmKSB7CiAgICAgIHZhciBfcmVmJHdhdGNoZXMgPSBfcmVmLndhdGNoZXMsCiAgICAgICAgICB3YXRjaGVzID0gX3JlZiR3YXRjaGVzID09PSB2b2lkIDAgPyBbXSA6IF9yZWYkd2F0Y2hlczsKICAgICAgcmV0dXJuIHdhdGNoZXMubWFwKGZ1bmN0aW9uICh3YXRjaCkgewogICAgICAgIHJldHVybiBfd2F0Y2guV2F0Y2guZnJvbVVwc3RyZWFtSnNvbih3YXRjaCk7CiAgICAgIH0pOwogICAgfQogIH0pOwp9OwoKZXhwb3J0cy51c2VMb2FkV2F0Y2hlcyA9IHVzZUxvYWRXYXRjaGVzOwoKdmFyIHVzZUxvYWRXYXRjaERldGFpbCA9IGZ1bmN0aW9uIHVzZUxvYWRXYXRjaERldGFpbChpZCkgewogIHJldHVybiAoMCwgX3VzZV9yZXF1ZXN0LnVzZVJlcXVlc3QpKHsKICAgIHBhdGg6ICIiLmNvbmNhdChiYXNlUGF0aCwgIi93YXRjaC8iKS5jb25jYXQoaWQpLAogICAgbWV0aG9kOiAnZ2V0JywKICAgIGRlc2VyaWFsaXplcjogZnVuY3Rpb24gZGVzZXJpYWxpemVyKF9yZWYyKSB7CiAgICAgIHZhciBfcmVmMiR3YXRjaCA9IF9yZWYyLndhdGNoLAogICAgICAgICAgd2F0Y2ggPSBfcmVmMiR3YXRjaCA9PT0gdm9pZCAwID8ge30gOiBfcmVmMiR3YXRjaDsKICAgICAgcmV0dXJuIF93YXRjaC5XYXRjaC5mcm9tVXBzdHJlYW1Kc29uKHdhdGNoKTsKICAgIH0KICB9KTsKfTsKCmV4cG9ydHMudXNlTG9hZFdhdGNoRGV0YWlsID0gdXNlTG9hZFdhdGNoRGV0YWlsOwoKdmFyIHVzZUxvYWRXYXRjaEhpc3RvcnkgPSBmdW5jdGlvbiB1c2VMb2FkV2F0Y2hIaXN0b3J5KGlkLCBzdGFydFRpbWUpIHsKICByZXR1cm4gKDAsIF91c2VfcmVxdWVzdC51c2VSZXF1ZXN0KSh7CiAgICBxdWVyeTogc3RhcnRUaW1lID8gewogICAgICBzdGFydFRpbWU6IHN0YXJ0VGltZQogICAgfSA6IHVuZGVmaW5lZCwKICAgIHBhdGg6ICIiLmNvbmNhdChiYXNlUGF0aCwgIi93YXRjaC8iKS5jb25jYXQoaWQsICIvaGlzdG9yeSIpLAogICAgbWV0aG9kOiAnZ2V0JywKICAgIGRlc2VyaWFsaXplcjogZnVuY3Rpb24gZGVzZXJpYWxpemVyKF9yZWYzKSB7CiAgICAgIHZhciBfcmVmMyR3YXRjaEhpc3RvcnlJdGUgPSBfcmVmMy53YXRjaEhpc3RvcnlJdGVtcywKICAgICAgICAgIHdhdGNoSGlzdG9yeUl0ZW1zID0gX3JlZjMkd2F0Y2hIaXN0b3J5SXRlID09PSB2b2lkIDAgPyBbXSA6IF9yZWYzJHdhdGNoSGlzdG9yeUl0ZTsKICAgICAgcmV0dXJuIHdhdGNoSGlzdG9yeUl0ZW1zLm1hcChmdW5jdGlvbiAoaGlzdG9yeUl0ZW0pIHsKICAgICAgICByZXR1cm4gX3dhdGNoX2hpc3RvcnlfaXRlbS5XYXRjaEhpc3RvcnlJdGVtLmZyb21VcHN0cmVhbUpzb24oaGlzdG9yeUl0ZW0pOwogICAgICB9KTsKICAgIH0KICB9KTsKfTsKCmV4cG9ydHMudXNlTG9hZFdhdGNoSGlzdG9yeSA9IHVzZUxvYWRXYXRjaEhpc3Rvcnk7Cgp2YXIgdXNlTG9hZFdhdGNoSGlzdG9yeURldGFpbCA9IGZ1bmN0aW9uIHVzZUxvYWRXYXRjaEhpc3RvcnlEZXRhaWwoaWQpIHsKICByZXR1cm4gKDAsIF91c2VfcmVxdWVzdC51c2VSZXF1ZXN0KSh7CiAgICBwYXRoOiAhaWQgPyAnJyA6ICIiLmNvbmNhdChiYXNlUGF0aCwgIi9oaXN0b3J5LyIpLmNvbmNhdChpZCksCiAgICBtZXRob2Q6ICdnZXQnLAogICAgZGVzZXJpYWxpemVyOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZXIoX3JlZjQpIHsKICAgICAgdmFyIHdhdGNoSGlzdG9yeUl0ZW0gPSBfcmVmNC53YXRjaEhpc3RvcnlJdGVtOwogICAgICByZXR1cm4gX3dhdGNoX2hpc3RvcnlfaXRlbS5XYXRjaEhpc3RvcnlJdGVtLmZyb21VcHN0cmVhbUpzb24od2F0Y2hIaXN0b3J5SXRlbSk7CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLnVzZUxvYWRXYXRjaEhpc3RvcnlEZXRhaWwgPSB1c2VMb2FkV2F0Y2hIaXN0b3J5RGV0YWlsOwoKdmFyIGRlbGV0ZVdhdGNoZXMgPSBmdW5jdGlvbiBkZWxldGVXYXRjaGVzKHdhdGNoSWRzKSB7CiAgdmFyIGJvZHksIF9yZWY1LCByZXN1bHRzOwoKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGRlbGV0ZVdhdGNoZXMkKF9jb250ZXh0KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgd2F0Y2hJZHM6IHdhdGNoSWRzCiAgICAgICAgICB9KTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChnZXRIdHRwQ2xpZW50KCkucG9zdCgiIi5jb25jYXQoYmFzZVBhdGgsICIvd2F0Y2hlcy9kZWxldGUiKSwgewogICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIF9yZWY1ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIHJlc3VsdHMgPSBfcmVmNS5yZXN1bHRzOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzdWx0cyk7CgogICAgICAgIGNhc2UgNjoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKZXhwb3J0cy5kZWxldGVXYXRjaGVzID0gZGVsZXRlV2F0Y2hlczsKCnZhciBkZWFjdGl2YXRlV2F0Y2ggPSBmdW5jdGlvbiBkZWFjdGl2YXRlV2F0Y2goaWQpIHsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGRlYWN0aXZhdGVXYXRjaCQoX2NvbnRleHQyKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgKDAsIF91c2VfcmVxdWVzdC5zZW5kUmVxdWVzdCkoewogICAgICAgICAgICBwYXRoOiAiIi5jb25jYXQoYmFzZVBhdGgsICIvd2F0Y2gvIikuY29uY2F0KGlkLCAiL2RlYWN0aXZhdGUiKSwKICAgICAgICAgICAgbWV0aG9kOiAncHV0JwogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDE6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLmRlYWN0aXZhdGVXYXRjaCA9IGRlYWN0aXZhdGVXYXRjaDsKCnZhciBhY3RpdmF0ZVdhdGNoID0gZnVuY3Rpb24gYWN0aXZhdGVXYXRjaChpZCkgewogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gYWN0aXZhdGVXYXRjaCQoX2NvbnRleHQzKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgKDAsIF91c2VfcmVxdWVzdC5zZW5kUmVxdWVzdCkoewogICAgICAgICAgICBwYXRoOiAiIi5jb25jYXQoYmFzZVBhdGgsICIvd2F0Y2gvIikuY29uY2F0KGlkLCAiL2FjdGl2YXRlIiksCiAgICAgICAgICAgIG1ldGhvZDogJ3B1dCcKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAxOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKZXhwb3J0cy5hY3RpdmF0ZVdhdGNoID0gYWN0aXZhdGVXYXRjaDsKCnZhciBsb2FkV2F0Y2ggPSBmdW5jdGlvbiBsb2FkV2F0Y2goaWQpIHsKICB2YXIgX3JlZjYsIHdhdGNoOwoKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGxvYWRXYXRjaCQoX2NvbnRleHQ0KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGdldEh0dHBDbGllbnQoKS5nZXQoIiIuY29uY2F0KGJhc2VQYXRoLCAiL3dhdGNoLyIpLmNvbmNhdChpZCkpKTsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgX3JlZjYgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgIHdhdGNoID0gX3JlZjYud2F0Y2g7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgX3dhdGNoLldhdGNoLmZyb21VcHN0cmVhbUpzb24od2F0Y2gpKTsKCiAgICAgICAgY2FzZSA1OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKZXhwb3J0cy5sb2FkV2F0Y2ggPSBsb2FkV2F0Y2g7Cgp2YXIgZ2V0TWF0Y2hpbmdJbmRpY2VzID0gZnVuY3Rpb24gZ2V0TWF0Y2hpbmdJbmRpY2VzKHBhdHRlcm4pIHsKICB2YXIgYm9keSwgX3JlZjcsIGluZGljZXM7CgogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0TWF0Y2hpbmdJbmRpY2VzJChfY29udGV4dDUpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGlmICghcGF0dGVybi5zdGFydHNXaXRoKCcqJykpIHsKICAgICAgICAgICAgcGF0dGVybiA9ICIqIi5jb25jYXQocGF0dGVybik7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFwYXR0ZXJuLmVuZHNXaXRoKCcqJykpIHsKICAgICAgICAgICAgcGF0dGVybiA9ICIiLmNvbmNhdChwYXR0ZXJuLCAiKiIpOwogICAgICAgICAgfQoKICAgICAgICAgIGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgIHBhdHRlcm46IHBhdHRlcm4KICAgICAgICAgIH0pOwogICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChnZXRIdHRwQ2xpZW50KCkucG9zdCgiIi5jb25jYXQoYmFzZVBhdGgsICIvaW5kaWNlcyIpLCB7CiAgICAgICAgICAgIGJvZHk6IGJvZHkKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSA1OgogICAgICAgICAgX3JlZjcgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgIGluZGljZXMgPSBfcmVmNy5pbmRpY2VzOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIGluZGljZXMpOwoKICAgICAgICBjYXNlIDg6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLmdldE1hdGNoaW5nSW5kaWNlcyA9IGdldE1hdGNoaW5nSW5kaWNlczsKCnZhciBmZXRjaEZpZWxkcyA9IGZ1bmN0aW9uIGZldGNoRmllbGRzKGluZGV4ZXMpIHsKICB2YXIgX3JlZjgsIGZpZWxkczsKCiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBmZXRjaEZpZWxkcyQoX2NvbnRleHQ2KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGdldEh0dHBDbGllbnQoKS5wb3N0KCIiLmNvbmNhdChiYXNlUGF0aCwgIi9maWVsZHMiKSwgewogICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgaW5kZXhlczogaW5kZXhlcwogICAgICAgICAgICB9KQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBfcmVmOCA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgZmllbGRzID0gX3JlZjguZmllbGRzOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIGZpZWxkcyk7CgogICAgICAgIGNhc2UgNToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCmV4cG9ydHMuZmV0Y2hGaWVsZHMgPSBmZXRjaEZpZWxkczsKCnZhciBjcmVhdGVXYXRjaCA9IGZ1bmN0aW9uIGNyZWF0ZVdhdGNoKHdhdGNoKSB7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjcmVhdGVXYXRjaCQoX2NvbnRleHQ3KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGdldEh0dHBDbGllbnQoKS5wdXQoIiIuY29uY2F0KGJhc2VQYXRoLCAiL3dhdGNoLyIpLmNvbmNhdCh3YXRjaC5pZCksIHsKICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkod2F0Y2gudXBzdHJlYW1Kc29uKQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ3LnNlbnQpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLmNyZWF0ZVdhdGNoID0gY3JlYXRlV2F0Y2g7Cgp2YXIgZXhlY3V0ZVdhdGNoID0gZnVuY3Rpb24gZXhlY3V0ZVdhdGNoKGV4ZWN1dGVXYXRjaERldGFpbHMsIHdhdGNoKSB7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBleGVjdXRlV2F0Y2gkKF9jb250ZXh0OCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsICgwLCBfdXNlX3JlcXVlc3Quc2VuZFJlcXVlc3QpKHsKICAgICAgICAgICAgcGF0aDogIiIuY29uY2F0KGJhc2VQYXRoLCAiL3dhdGNoL2V4ZWN1dGUiKSwKICAgICAgICAgICAgbWV0aG9kOiAncHV0JywKICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgIGV4ZWN1dGVEZXRhaWxzOiBleGVjdXRlV2F0Y2hEZXRhaWxzLnVwc3RyZWFtSnNvbiwKICAgICAgICAgICAgICB3YXRjaDogd2F0Y2gudXBzdHJlYW1Kc29uCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCmV4cG9ydHMuZXhlY3V0ZVdhdGNoID0gZXhlY3V0ZVdhdGNoOwoKdmFyIGxvYWRJbmRleFBhdHRlcm5zID0gZnVuY3Rpb24gbG9hZEluZGV4UGF0dGVybnMoKSB7CiAgdmFyIF9yZWY5LCBzYXZlZE9iamVjdHM7CgogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbG9hZEluZGV4UGF0dGVybnMkKF9jb250ZXh0OSkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChnZXRTYXZlZE9iamVjdHNDbGllbnQoKS5maW5kKHsKICAgICAgICAgICAgdHlwZTogJ2luZGV4LXBhdHRlcm4nLAogICAgICAgICAgICBmaWVsZHM6IFsndGl0bGUnXSwKICAgICAgICAgICAgcGVyUGFnZTogMTAwMDAKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgX3JlZjkgPSBfY29udGV4dDkuc2VudDsKICAgICAgICAgIHNhdmVkT2JqZWN0cyA9IF9yZWY5LnNhdmVkT2JqZWN0czsKICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBzYXZlZE9iamVjdHMpOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLmxvYWRJbmRleFBhdHRlcm5zID0gbG9hZEluZGV4UGF0dGVybnM7Cgp2YXIgdXNlR2V0V2F0Y2hWaXN1YWxpemF0aW9uRGF0YSA9IGZ1bmN0aW9uIHVzZUdldFdhdGNoVmlzdWFsaXphdGlvbkRhdGEod2F0Y2hNb2RlbCwgdmlzdWFsaXplT3B0aW9ucykgewogIHJldHVybiAoMCwgX3VzZV9yZXF1ZXN0LnVzZVJlcXVlc3QpKHsKICAgIHBhdGg6ICIiLmNvbmNhdChiYXNlUGF0aCwgIi93YXRjaC92aXN1YWxpemUiKSwKICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICB3YXRjaDogd2F0Y2hNb2RlbC51cHN0cmVhbUpzb24sCiAgICAgIG9wdGlvbnM6IHZpc3VhbGl6ZU9wdGlvbnMudXBzdHJlYW1Kc29uCiAgICB9KSwKICAgIGRlc2VyaWFsaXplcjogZnVuY3Rpb24gZGVzZXJpYWxpemVyKF9yZWYxMCkgewogICAgICB2YXIgdmlzdWFsaXplRGF0YSA9IF9yZWYxMC52aXN1YWxpemVEYXRhOwogICAgICByZXR1cm4gdmlzdWFsaXplRGF0YTsKICAgIH0KICB9KTsKfTsKCmV4cG9ydHMudXNlR2V0V2F0Y2hWaXN1YWxpemF0aW9uRGF0YSA9IHVzZUdldFdhdGNoVmlzdWFsaXphdGlvbkRhdGE7Cgp2YXIgdXNlTG9hZFNldHRpbmdzID0gZnVuY3Rpb24gdXNlTG9hZFNldHRpbmdzKCkgewogIHJldHVybiAoMCwgX3VzZV9yZXF1ZXN0LnVzZVJlcXVlc3QpKHsKICAgIHBhdGg6ICIiLmNvbmNhdChiYXNlUGF0aCwgIi9zZXR0aW5ncyIpLAogICAgbWV0aG9kOiAnZ2V0JywKICAgIGRlc2VyaWFsaXplcjogZnVuY3Rpb24gZGVzZXJpYWxpemVyKGRhdGEpIHsKICAgICAgcmV0dXJuIF9zZXR0aW5ncy5TZXR0aW5ncy5mcm9tVXBzdHJlYW1Kc29uKGRhdGEpOwogICAgfQogIH0pOwp9OwoKZXhwb3J0cy51c2VMb2FkU2V0dGluZ3MgPSB1c2VMb2FkU2V0dGluZ3M7Cgp2YXIgYWNrV2F0Y2hBY3Rpb24gPSBmdW5jdGlvbiBhY2tXYXRjaEFjdGlvbih3YXRjaElkLCBhY3Rpb25JZCkgewogIHZhciBfcmVmMTEsIHdhdGNoU3RhdHVzOwoKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGFja1dhdGNoQWN0aW9uJChfY29udGV4dDEwKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGdldEh0dHBDbGllbnQoKS5wdXQoIiIuY29uY2F0KGJhc2VQYXRoLCAiL3dhdGNoLyIpLmNvbmNhdCh3YXRjaElkLCAiL2FjdGlvbi8iKS5jb25jYXQoYWN0aW9uSWQsICIvYWNrbm93bGVkZ2UiKSkpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBfcmVmMTEgPSBfY29udGV4dDEwLnNlbnQ7CiAgICAgICAgICB3YXRjaFN0YXR1cyA9IF9yZWYxMS53YXRjaFN0YXR1czsKICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgX3dhdGNoX3N0YXR1cy5XYXRjaFN0YXR1cy5mcm9tVXBzdHJlYW1Kc29uKHdhdGNoU3RhdHVzKSk7CgogICAgICAgIGNhc2UgNToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLmFja1dhdGNoQWN0aW9uID0gYWNrV2F0Y2hBY3Rpb247"},null]}