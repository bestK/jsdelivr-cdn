{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/snapshot_restore/public/app/components/policy_form/steps/step_settings.js","dependencies":[{"path":"x-pack/legacy/plugins/snapshot_restore/public/app/components/policy_form/steps/step_settings.js","mtime":1585205048211},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlBvbGljeVN0ZXBTZXR0aW5ncyA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2RvY3VtZW50YXRpb24gPSByZXF1aXJlKCIuLi8uLi8uLi9zZXJ2aWNlcy9kb2N1bWVudGF0aW9uIik7Cgp2YXIgX2luZGV4ID0gcmVxdWlyZSgiLi4vLi4vLi4vaW5kZXgiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIFBvbGljeVN0ZXBTZXR0aW5ncyA9IGZ1bmN0aW9uIFBvbGljeVN0ZXBTZXR0aW5ncyhfcmVmKSB7CiAgdmFyIHBvbGljeSA9IF9yZWYucG9saWN5LAogICAgICBpbmRpY2VzID0gX3JlZi5pbmRpY2VzLAogICAgICB1cGRhdGVQb2xpY3kgPSBfcmVmLnVwZGF0ZVBvbGljeSwKICAgICAgZXJyb3JzID0gX3JlZi5lcnJvcnM7CgogIHZhciBfdXNlQXBwRGVwZW5kZW5jaWVzID0gKDAsIF9pbmRleC51c2VBcHBEZXBlbmRlbmNpZXMpKCksCiAgICAgIGkxOG4gPSBfdXNlQXBwRGVwZW5kZW5jaWVzLmNvcmUuaTE4bjsKCiAgdmFyIEZvcm1hdHRlZE1lc3NhZ2UgPSBpMThuLkZvcm1hdHRlZE1lc3NhZ2U7CiAgdmFyIF9wb2xpY3kkY29uZmlnID0gcG9saWN5LmNvbmZpZywKICAgICAgY29uZmlnID0gX3BvbGljeSRjb25maWcgPT09IHZvaWQgMCA/IHt9IDogX3BvbGljeSRjb25maWcsCiAgICAgIGlzTWFuYWdlZFBvbGljeSA9IHBvbGljeS5pc01hbmFnZWRQb2xpY3k7CgogIHZhciB1cGRhdGVQb2xpY3lDb25maWcgPSBmdW5jdGlvbiB1cGRhdGVQb2xpY3lDb25maWcodXBkYXRlZEZpZWxkcykgewogICAgdmFyIG5ld0NvbmZpZyA9IF9vYmplY3RTcHJlYWQoe30sIGNvbmZpZywge30sIHVwZGF0ZWRGaWVsZHMpOwoKICAgIHVwZGF0ZVBvbGljeSh7CiAgICAgIGNvbmZpZzogbmV3Q29uZmlnCiAgICB9KTsKICB9OyAvLyBTdGF0ZXMgZm9yIGNob29zaW5nIGFsbCBpbmRpY2VzLCBvciBhIHN1YnNldCwgaW5jbHVkaW5nIGNhY2hpbmcgcHJldmlvdXNseSBjaG9zZW4gc3Vic2V0IGxpc3QKCgogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSghQm9vbGVhbihjb25maWcuaW5kaWNlcykpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgaXNBbGxJbmRpY2VzID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0SXNBbGxJbmRpY2VzID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTMgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShfdG9Db25zdW1hYmxlQXJyYXkoaW5kaWNlcykpLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIGluZGljZXNTZWxlY3Rpb24gPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRJbmRpY2VzU2VsZWN0aW9uID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIF91c2VTdGF0ZTUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShpbmRpY2VzLm1hcChmdW5jdGlvbiAoaW5kZXgpIHsKICAgIHJldHVybiB7CiAgICAgIGxhYmVsOiBpbmRleCwKICAgICAgY2hlY2tlZDogaXNBbGxJbmRpY2VzIHx8IC8vIElmIGluZGljZXMgaXMgYSBzdHJpbmcsIHdlIGRlZmF1bHQgdG8gY3VzdG9tIGlucHV0IG1vZGUsIHNvIHdlIG1hcmsgaW5kaXZpZHVhbCBpbmRpY2VzCiAgICAgIC8vIGFzIHNlbGVjdGVkIGlmIHVzZXIgZ29lcyBiYWNrIHRvIGxpc3QgbW9kZQogICAgICB0eXBlb2YgY29uZmlnLmluZGljZXMgPT09ICdzdHJpbmcnIHx8IEFycmF5LmlzQXJyYXkoY29uZmlnLmluZGljZXMpICYmIGNvbmZpZy5pbmRpY2VzLmluY2x1ZGVzKGluZGV4KSA/ICdvbicgOiB1bmRlZmluZWQKICAgIH07CiAgfSkpLAogICAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksCiAgICAgIGluZGljZXNPcHRpb25zID0gX3VzZVN0YXRlNlswXSwKICAgICAgc2V0SW5kaWNlc09wdGlvbnMgPSBfdXNlU3RhdGU2WzFdOyAvLyBTdGF0ZSBmb3IgdXNpbmcgc2VsZWN0YWJsZSBpbmRpY2VzIGxpc3Qgb3IgY3VzdG9tIHBhdHRlcm5zCiAgLy8gVXNlcnMgd2l0aCBtb3JlIHRoYW4gMTAwIGluZGljZXMgd2lsbCBwcm9iYWJseSB3YW50IHRvIHVzZSBhbiBpbmRleCBwYXR0ZXJuIHRvIHNlbGVjdAogIC8vIHRoZW0gaW5zdGVhZCwgc28gd2UnbGwgZGVmYXVsdCB0byBzaG93aW5nIHRoZW0gdGhlIGluZGV4IHBhdHRlcm4gaW5wdXQuCgoKICB2YXIgX3VzZVN0YXRlNyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHR5cGVvZiBjb25maWcuaW5kaWNlcyA9PT0gJ3N0cmluZycgfHwgQXJyYXkuaXNBcnJheShjb25maWcuaW5kaWNlcykgJiYgY29uZmlnLmluZGljZXMubGVuZ3RoID4gMTAwID8gJ2N1c3RvbScgOiAnbGlzdCcpLAogICAgICBfdXNlU3RhdGU4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNywgMiksCiAgICAgIHNlbGVjdEluZGljZXNNb2RlID0gX3VzZVN0YXRlOFswXSwKICAgICAgc2V0U2VsZWN0SW5kaWNlc01vZGUgPSBfdXNlU3RhdGU4WzFdOyAvLyBTdGF0ZSBmb3IgY3VzdG9tIHBhdHRlcm5zCgoKICB2YXIgX3VzZVN0YXRlOSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHR5cGVvZiBjb25maWcuaW5kaWNlcyA9PT0gJ3N0cmluZycgPyBjb25maWcuaW5kaWNlcy5zcGxpdCgnLCcpIDogW10pLAogICAgICBfdXNlU3RhdGUxMCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTksIDIpLAogICAgICBpbmRleFBhdHRlcm5zID0gX3VzZVN0YXRlMTBbMF0sCiAgICAgIHNldEluZGV4UGF0dGVybnMgPSBfdXNlU3RhdGUxMFsxXTsKCiAgdmFyIHJlbmRlckluZGljZXNGaWVsZCA9IGZ1bmN0aW9uIHJlbmRlckluZGljZXNGaWVsZCgpIHsKICAgIHZhciBpbmRpY2VzU3dpdGNoID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVN3aXRjaCwgewogICAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucG9saWN5Rm9ybS5zdGVwU2V0dGluZ3MuYWxsSW5kaWNlc0xhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFsbCBpbmRpY2VzLCBpbmNsdWRpbmcgc3lzdGVtIGluZGljZXMiCiAgICAgIH0pLAogICAgICBjaGVja2VkOiBpc0FsbEluZGljZXMsCiAgICAgIGRpc2FibGVkOiBpc01hbmFnZWRQb2xpY3ksCiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJhbGxJbmRpY2VzVG9nZ2xlIiwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICB2YXIgaXNDaGVja2VkID0gZS50YXJnZXQuY2hlY2tlZDsKICAgICAgICBzZXRJc0FsbEluZGljZXMoaXNDaGVja2VkKTsKCiAgICAgICAgaWYgKGlzQ2hlY2tlZCkgewogICAgICAgICAgdXBkYXRlUG9saWN5Q29uZmlnKHsKICAgICAgICAgICAgaW5kaWNlczogdW5kZWZpbmVkCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdXBkYXRlUG9saWN5Q29uZmlnKHsKICAgICAgICAgICAgaW5kaWNlczogc2VsZWN0SW5kaWNlc01vZGUgPT09ICdjdXN0b20nID8gaW5kZXhQYXR0ZXJucy5qb2luKCcsJykgOiBfdG9Db25zdW1hYmxlQXJyYXkoaW5kaWNlc1NlbGVjdGlvbiB8fCBbXSkKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlEZXNjcmliZWRGb3JtR3JvdXAsIHsKICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUaXRsZSwgewogICAgICAgIHNpemU6ICJzIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoMyIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnBvbGljeUZvcm0uc3RlcFNldHRpbmdzLmluZGljZXNUaXRsZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJJbmRpY2VzIgogICAgICB9KSkpLAogICAgICBkZXNjcmlwdGlvbjogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucG9saWN5Rm9ybS5zdGVwU2V0dGluZ3MuaW5kaWNlc0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkluZGljZXMgdG8gYmFjayB1cC4iCiAgICAgIH0pLAogICAgICBpZEFyaWE6ICJpbmRpY2VzRGVzY3JpcHRpb24iLAogICAgICBmdWxsV2lkdGg6IHRydWUKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgIGhhc0VtcHR5TGFiZWxTcGFjZTogdHJ1ZSwKICAgICAgZnVsbFdpZHRoOiB0cnVlLAogICAgICBkZXNjcmliZWRCeUlkczogWydpbmRpY2VzRGVzY3JpcHRpb24nXQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIGlzTWFuYWdlZFBvbGljeSA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUb29sVGlwLCB7CiAgICAgIHBvc2l0aW9uOiAibGVmdCIsCiAgICAgIGNvbnRlbnQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBTZXR0aW5ncy5pbmRpY2VzVG9vbHRpcCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDbG91ZC1tYW5hZ2VkIHBvbGljaWVzIHJlcXVpcmUgYWxsIGluZGljZXMuIgogICAgICB9KSkKICAgIH0sIGluZGljZXNTd2l0Y2gpIDogaW5kaWNlc1N3aXRjaCwgaXNBbGxJbmRpY2VzID8gbnVsbCA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgIHNpemU6ICJtIgogICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgIGNsYXNzTmFtZTogInNuYXBzaG90UmVzdG9yZV9fcG9saWN5Rm9ybV9fc3RlcFNldHRpbmdzX19pbmRpY2VzRmllbGRXcmFwcGVyIiwKICAgICAgbGFiZWw6IHNlbGVjdEluZGljZXNNb2RlID09PSAnbGlzdCcgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICJzcGFjZUJldHdlZW4iCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnBvbGljeUZvcm0uc3RlcFNldHRpbmdzLnNlbGVjdEluZGljZXNMYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTZWxlY3QgaW5kaWNlcyIKICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICBzZXRTZWxlY3RJbmRpY2VzTW9kZSgnY3VzdG9tJyk7CiAgICAgICAgICB1cGRhdGVQb2xpY3lDb25maWcoewogICAgICAgICAgICBpbmRpY2VzOiBpbmRleFBhdHRlcm5zLmpvaW4oJywnKQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBTZXR0aW5ncy5pbmRpY2VzVG9nZ2xlQ3VzdG9tTGluayIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJVc2UgaW5kZXggcGF0dGVybnMiCiAgICAgIH0pKSkpIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICAgIGp1c3RpZnlDb250ZW50OiAic3BhY2VCZXR3ZWVuIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBTZXR0aW5ncy5pbmRpY2VzUGF0dGVybkxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkluZGV4IHBhdHRlcm5zIgogICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMaW5rLCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInNlbGVjdEluZGljZXNMaW5rIiwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgc2V0U2VsZWN0SW5kaWNlc01vZGUoJ2xpc3QnKTsKICAgICAgICAgIHVwZGF0ZVBvbGljeUNvbmZpZyh7CiAgICAgICAgICAgIGluZGljZXM6IGluZGljZXNTZWxlY3Rpb24KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucG9saWN5Rm9ybS5zdGVwU2V0dGluZ3MuaW5kaWNlc1RvZ2dsZUxpc3RMaW5rIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNlbGVjdCBpbmRpY2VzIgogICAgICB9KSkpKSwKICAgICAgaGVscFRleHQ6IHNlbGVjdEluZGljZXNNb2RlID09PSAnbGlzdCcgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBTZXR0aW5ncy5zZWxlY3RJbmRpY2VzSGVscFRleHQiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAie2NvdW50fSB7Y291bnQsIHBsdXJhbCwgb25lIHtpbmRleH0gb3RoZXIge2luZGljZXN9fSB3aWxsIGJlIGJhY2tlZCB1cC4ge3NlbGVjdE9yRGVzZWxlY3RBbGxMaW5rfSIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBjb3VudDogY29uZmlnLmluZGljZXMgJiYgY29uZmlnLmluZGljZXMubGVuZ3RoLAogICAgICAgICAgc2VsZWN0T3JEZXNlbGVjdEFsbExpbms6IGNvbmZpZy5pbmRpY2VzICYmIGNvbmZpZy5pbmRpY2VzLmxlbmd0aCA+IDAgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZGVzZWxlY3RJbmRpY2VzTGluayIsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgLy8gVE9ETzogQ2hhbmdlIHRoaXMgdG8gc2V0SW5kaWNlc09wdGlvbnMoKSB3aGVuIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGFzdGljL2V1aS9pc3N1ZXMvMjA3MSBpcyBmaXhlZAogICAgICAgICAgICAgIGluZGljZXNPcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKG9wdGlvbikgewogICAgICAgICAgICAgICAgb3B0aW9uLmNoZWNrZWQgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdXBkYXRlUG9saWN5Q29uZmlnKHsKICAgICAgICAgICAgICAgIGluZGljZXM6IFtdCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgc2V0SW5kaWNlc1NlbGVjdGlvbihbXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBTZXR0aW5ncy5kZXNlbGVjdEFsbEluZGljZXNMaW5rIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJEZXNlbGVjdCBhbGwiCiAgICAgICAgICB9KSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIC8vIFRPRE86IENoYW5nZSB0aGlzIHRvIHNldEluZGljZXNPcHRpb25zKCkgd2hlbiBodHRwczovL2dpdGh1Yi5jb20vZWxhc3RpYy9ldWkvaXNzdWVzLzIwNzEgaXMgZml4ZWQKICAgICAgICAgICAgICBpbmRpY2VzT3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChvcHRpb24pIHsKICAgICAgICAgICAgICAgIG9wdGlvbi5jaGVja2VkID0gJ29uJzsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB1cGRhdGVQb2xpY3lDb25maWcoewogICAgICAgICAgICAgICAgaW5kaWNlczogX3RvQ29uc3VtYWJsZUFycmF5KGluZGljZXMpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgc2V0SW5kaWNlc1NlbGVjdGlvbihfdG9Db25zdW1hYmxlQXJyYXkoaW5kaWNlcykpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucG9saWN5Rm9ybS5zdGVwU2V0dGluZ3Muc2VsZWN0QWxsSW5kaWNlc0xpbmsiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNlbGVjdCBhbGwiCiAgICAgICAgICB9KSkKICAgICAgICB9CiAgICAgIH0pIDogbnVsbCwKICAgICAgaXNJbnZhbGlkOiBCb29sZWFuKGVycm9ycy5pbmRpY2VzKSwKICAgICAgZXJyb3I6IGVycm9ycy5pbmRpY2VzCiAgICB9LCBzZWxlY3RJbmRpY2VzTW9kZSA9PT0gJ2xpc3QnID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNlbGVjdGFibGUsIHsKICAgICAgYWxsb3dFeGNsdXNpb25zOiBmYWxzZSwKICAgICAgb3B0aW9uczogaW5kaWNlc09wdGlvbnMsCiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShvcHRpb25zKSB7CiAgICAgICAgdmFyIG5ld1NlbGVjdGVkSW5kaWNlcyA9IFtdOwogICAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICAgIHZhciBsYWJlbCA9IF9yZWYyLmxhYmVsLAogICAgICAgICAgICAgIGNoZWNrZWQgPSBfcmVmMi5jaGVja2VkOwoKICAgICAgICAgIGlmIChjaGVja2VkID09PSAnb24nKSB7CiAgICAgICAgICAgIG5ld1NlbGVjdGVkSW5kaWNlcy5wdXNoKGxhYmVsKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBzZXRJbmRpY2VzT3B0aW9ucyhvcHRpb25zKTsKICAgICAgICB1cGRhdGVQb2xpY3lDb25maWcoewogICAgICAgICAgaW5kaWNlczogbmV3U2VsZWN0ZWRJbmRpY2VzCiAgICAgICAgfSk7CiAgICAgICAgc2V0SW5kaWNlc1NlbGVjdGlvbihuZXdTZWxlY3RlZEluZGljZXMpOwogICAgICB9LAogICAgICBzZWFyY2hhYmxlOiB0cnVlLAogICAgICBoZWlnaHQ6IDMwMAogICAgfSwgZnVuY3Rpb24gKGxpc3QsIHNlYXJjaCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBhbmVsLCB7CiAgICAgICAgcGFkZGluZ1NpemU6ICJzIiwKICAgICAgICBoYXNTaGFkb3c6IGZhbHNlCiAgICAgIH0sIHNlYXJjaCwgbGlzdCk7CiAgICB9KSA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb21ib0JveCwgewogICAgICBvcHRpb25zOiBpbmRpY2VzLm1hcChmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbGFiZWw6IGluZGV4CiAgICAgICAgfTsKICAgICAgfSksCiAgICAgIHBsYWNlaG9sZGVyOiBpMThuLnRyYW5zbGF0ZSgneHBhY2suc25hcHNob3RSZXN0b3JlLnBvbGljeUZvcm0uc3RlcFNldHRpbmdzLmluZGljZXNQYXR0ZXJuUGxhY2Vob2xkZXInLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFbnRlciBpbmRleCBwYXR0ZXJucywgaS5lLiBsb2dzdGFzaC0qJwogICAgICB9KSwKICAgICAgc2VsZWN0ZWRPcHRpb25zOiBpbmRleFBhdHRlcm5zLm1hcChmdW5jdGlvbiAocGF0dGVybikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsYWJlbDogcGF0dGVybgogICAgICAgIH07CiAgICAgIH0pLAogICAgICBvbkNyZWF0ZU9wdGlvbjogZnVuY3Rpb24gb25DcmVhdGVPcHRpb24ocGF0dGVybikgewogICAgICAgIGlmICghcGF0dGVybi50cmltKCkubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgbmV3UGF0dGVybnMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGluZGV4UGF0dGVybnMpLCBbcGF0dGVybl0pOwogICAgICAgIHNldEluZGV4UGF0dGVybnMobmV3UGF0dGVybnMpOwogICAgICAgIHVwZGF0ZVBvbGljeUNvbmZpZyh7CiAgICAgICAgICBpbmRpY2VzOiBuZXdQYXR0ZXJucy5qb2luKCcsJykKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHBhdHRlcm5zKSB7CiAgICAgICAgdmFyIG5ld1BhdHRlcm5zID0gcGF0dGVybnMubWFwKGZ1bmN0aW9uIChfcmVmMykgewogICAgICAgICAgdmFyIGxhYmVsID0gX3JlZjMubGFiZWw7CiAgICAgICAgICByZXR1cm4gbGFiZWw7CiAgICAgICAgfSk7CiAgICAgICAgc2V0SW5kZXhQYXR0ZXJucyhuZXdQYXR0ZXJucyk7CiAgICAgICAgdXBkYXRlUG9saWN5Q29uZmlnKHsKICAgICAgICAgIGluZGljZXM6IG5ld1BhdHRlcm5zLmpvaW4oJywnKQogICAgICAgIH0pOwogICAgICB9CiAgICB9KSkpKSkpOwogIH07CgogIHZhciByZW5kZXJJZ25vcmVVbmF2YWlsYWJsZUZpZWxkID0gZnVuY3Rpb24gcmVuZGVySWdub3JlVW5hdmFpbGFibGVGaWVsZCgpIHsKICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRGVzY3JpYmVkRm9ybUdyb3VwLCB7CiAgICAgIHRpdGxlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGl0bGUsIHsKICAgICAgICBzaXplOiAicyIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiaDMiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBTZXR0aW5ncy5pZ25vcmVVbmF2YWlsYWJsZURlc2NyaXB0aW9uVGl0bGUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSWdub3JlIHVuYXZhaWxhYmxlIGluZGljZXMiCiAgICAgIH0pKSksCiAgICAgIGRlc2NyaXB0aW9uOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBTZXR0aW5ncy5pZ25vcmVVbmF2YWlsYWJsZURlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIklnbm9yZXMgaW5kaWNlcyB0aGF0IGFyZSB1bmF2YWlsYWJsZSB3aGVuIHRha2luZyB0aGUgc25hcHNob3QuIE90aGVyd2lzZSwgdGhlIGVudGlyZSBzbmFwc2hvdCB3aWxsIGZhaWwuIgogICAgICB9KSwKICAgICAgaWRBcmlhOiAicG9saWN5SWdub3JlVW5hdmFpbGFibGVEZXNjcmlwdGlvbiIsCiAgICAgIGZ1bGxXaWR0aDogdHJ1ZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgICAgaGFzRW1wdHlMYWJlbFNwYWNlOiB0cnVlLAogICAgICBkZXNjcmliZWRCeUlkczogWydwb2xpY3lJZ25vcmVVbmF2YWlsYWJsZURlc2NyaXB0aW9uJ10sCiAgICAgIGZ1bGxXaWR0aDogdHJ1ZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVN3aXRjaCwgewogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiaWdub3JlVW5hdmFpbGFibGVJbmRpY2VzVG9nZ2xlIiwKICAgICAgbGFiZWw6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnBvbGljeUZvcm0uc3RlcFNldHRpbmdzLmlnbm9yZVVuYXZhaWxhYmxlTGFiZWwiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSWdub3JlIHVuYXZhaWxhYmxlIGluZGljZXMiCiAgICAgIH0pLAogICAgICBjaGVja2VkOiBCb29sZWFuKGNvbmZpZy5pZ25vcmVVbmF2YWlsYWJsZSksCiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgICAgdXBkYXRlUG9saWN5Q29uZmlnKHsKICAgICAgICAgIGlnbm9yZVVuYXZhaWxhYmxlOiBlLnRhcmdldC5jaGVja2VkCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pKSk7CiAgfTsKCiAgdmFyIHJlbmRlclBhcnRpYWxGaWVsZCA9IGZ1bmN0aW9uIHJlbmRlclBhcnRpYWxGaWVsZCgpIHsKICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRGVzY3JpYmVkRm9ybUdyb3VwLCB7CiAgICAgIHRpdGxlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGl0bGUsIHsKICAgICAgICBzaXplOiAicyIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiaDMiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBTZXR0aW5ncy5wYXJ0aWFsRGVzY3JpcHRpb25UaXRsZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBbGxvdyBwYXJ0aWFsIGluZGljZXMiCiAgICAgIH0pKSksCiAgICAgIGRlc2NyaXB0aW9uOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBTZXR0aW5ncy5wYXJ0aWFsRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQWxsb3dzIHNuYXBzaG90cyBvZiBpbmRpY2VzIHdpdGggcHJpbWFyeSBzaGFyZHMgdGhhdCBhcmUgdW5hdmFpbGFibGUuIE90aGVyd2lzZSwgdGhlIGVudGlyZSBzbmFwc2hvdCB3aWxsIGZhaWwuIgogICAgICB9KSwKICAgICAgaWRBcmlhOiAicG9saWN5UGFydGlhbERlc2NyaXB0aW9uIiwKICAgICAgZnVsbFdpZHRoOiB0cnVlCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICBoYXNFbXB0eUxhYmVsU3BhY2U6IHRydWUsCiAgICAgIGRlc2NyaWJlZEJ5SWRzOiBbJ3BvbGljeVBhcnRpYWxEZXNjcmlwdGlvbiddLAogICAgICBmdWxsV2lkdGg6IHRydWUKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTd2l0Y2gsIHsKICAgICAgImRhdGEtdGVzdC1zdWJqIjogInBhcnRpYWxJbmRpY2VzVG9nZ2xlIiwKICAgICAgbGFiZWw6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnBvbGljeUZvcm0uc3RlcFNldHRpbmdzLnBhcnRpYWxJbmRpY2VzVG9nZ2xlU3dpdGNoIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFsbG93IHBhcnRpYWwgaW5kaWNlcyIKICAgICAgfSksCiAgICAgIGNoZWNrZWQ6IEJvb2xlYW4oY29uZmlnLnBhcnRpYWwpLAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgIHVwZGF0ZVBvbGljeUNvbmZpZyh7CiAgICAgICAgICBwYXJ0aWFsOiBlLnRhcmdldC5jaGVja2VkCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pKSk7CiAgfTsKCiAgdmFyIHJlbmRlckluY2x1ZGVHbG9iYWxTdGF0ZUZpZWxkID0gZnVuY3Rpb24gcmVuZGVySW5jbHVkZUdsb2JhbFN0YXRlRmllbGQoKSB7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aURlc2NyaWJlZEZvcm1Hcm91cCwgewogICAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRpdGxlLCB7CiAgICAgICAgc2l6ZTogInMiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgzIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucG9saWN5Rm9ybS5zdGVwU2V0dGluZ3MuaW5jbHVkZUdsb2JhbFN0YXRlRGVzY3JpcHRpb25UaXRsZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJJbmNsdWRlIGdsb2JhbCBzdGF0ZSIKICAgICAgfSkpKSwKICAgICAgZGVzY3JpcHRpb246IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnBvbGljeUZvcm0uc3RlcFNldHRpbmdzLmluY2x1ZGVHbG9iYWxTdGF0ZURlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlN0b3JlcyB0aGUgZ2xvYmFsIHN0YXRlIG9mIHRoZSBjbHVzdGVyIGFzIHBhcnQgb2YgdGhlIHNuYXBzaG90LiIKICAgICAgfSksCiAgICAgIGlkQXJpYTogInBvbGljeUluY2x1ZGVHbG9iYWxTdGF0ZURlc2NyaXB0aW9uIiwKICAgICAgZnVsbFdpZHRoOiB0cnVlCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICBoYXNFbXB0eUxhYmVsU3BhY2U6IHRydWUsCiAgICAgIGRlc2NyaWJlZEJ5SWRzOiBbJ3BvbGljeUluY2x1ZGVHbG9iYWxTdGF0ZURlc2NyaXB0aW9uJ10sCiAgICAgIGZ1bGxXaWR0aDogdHJ1ZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVN3aXRjaCwgewogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZ2xvYmFsU3RhdGVUb2dnbGUiLAogICAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucG9saWN5Rm9ybS5zdGVwU2V0dGluZ3MucG9saWN5SW5jbHVkZUdsb2JhbFN0YXRlTGFiZWwiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSW5jbHVkZSBnbG9iYWwgc3RhdGUiCiAgICAgIH0pLAogICAgICBjaGVja2VkOiBjb25maWcuaW5jbHVkZUdsb2JhbFN0YXRlID09PSB1bmRlZmluZWQgfHwgY29uZmlnLmluY2x1ZGVHbG9iYWxTdGF0ZSwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICB1cGRhdGVQb2xpY3lDb25maWcoewogICAgICAgICAgaW5jbHVkZUdsb2JhbFN0YXRlOiBlLnRhcmdldC5jaGVja2VkCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pKSk7CiAgfTsKCiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgIGNsYXNzTmFtZTogInNuYXBzaG90UmVzdG9yZV9fcG9saWN5Rm9ybV9fc3RlcFNldHRpbmdzIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIGp1c3RpZnlDb250ZW50OiAic3BhY2VCZXR3ZWVuIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgZ3JvdzogZmFsc2UKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGl0bGUsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgyIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBTZXR0aW5nc1RpdGxlIiwKICAgIGRlZmF1bHRNZXNzYWdlOiAiU25hcHNob3Qgc2V0dGluZ3MiCiAgfSkpKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgZ3JvdzogZmFsc2UKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uRW1wdHksIHsKICAgIHNpemU6ICJzIiwKICAgIGZsdXNoOiAicmlnaHQiLAogICAgaHJlZjogX2RvY3VtZW50YXRpb24uZG9jdW1lbnRhdGlvbkxpbmtzU2VydmljZS5nZXRTbmFwc2hvdERvY1VybCgpLAogICAgdGFyZ2V0OiAiX2JsYW5rIiwKICAgIGljb25UeXBlOiAiaGVscCIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnBvbGljeUZvcm0uc3RlcFNldHRpbmdzLmRvY3NCdXR0b25MYWJlbCIsCiAgICBkZWZhdWx0TWVzc2FnZTogIlNuYXBzaG90IHNldHRpbmdzIGRvY3MiCiAgfSkpKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgIHNpemU6ICJsIgogIH0pLCByZW5kZXJJbmRpY2VzRmllbGQoKSwgcmVuZGVySWdub3JlVW5hdmFpbGFibGVGaWVsZCgpLCByZW5kZXJQYXJ0aWFsRmllbGQoKSwgcmVuZGVySW5jbHVkZUdsb2JhbFN0YXRlRmllbGQoKSk7Cn07CgpleHBvcnRzLlBvbGljeVN0ZXBTZXR0aW5ncyA9IFBvbGljeVN0ZXBTZXR0aW5nczs="},null]}