{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/lens/public/xy_visualization_plugin/xy_expression.js","dependencies":[{"path":"x-pack/legacy/plugins/lens/public/xy_visualization_plugin/xy_expression.js","mtime":1585205045057},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlhZQ2hhcnRSZXBvcnRhYmxlID0gWFlDaGFydFJlcG9ydGFibGU7CmV4cG9ydHMuWFlDaGFydCA9IFhZQ2hhcnQ7CmV4cG9ydHMuZ2V0WHlDaGFydFJlbmRlcmVyID0gZXhwb3J0cy54eUNoYXJ0ID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdERvbSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QtZG9tIikpOwoKdmFyIF9jaHJvbWUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInVpL2Nocm9tZSIpKTsKCnZhciBfY2hhcnRzID0gcmVxdWlyZSgiQGVsYXN0aWMvY2hhcnRzIik7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9ldWlfY2hhcnRzX3RoZW1lID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpL2Rpc3QvZXVpX2NoYXJ0c190aGVtZSIpOwoKdmFyIF90eXBlcyA9IHJlcXVpcmUoIi4vdHlwZXMiKTsKCnZhciBfdmlzdWFsaXphdGlvbl9jb250YWluZXIgPSByZXF1aXJlKCIuLi92aXN1YWxpemF0aW9uX2NvbnRhaW5lciIpOwoKdmFyIF9zdGF0ZV9oZWxwZXJzID0gcmVxdWlyZSgiLi9zdGF0ZV9oZWxwZXJzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCmZ1bmN0aW9uIF9leHRlbmRzKCkgewogIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOwoKICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7CiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiB0YXJnZXQ7CiAgfTsKCiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCnZhciBJU19EQVJLX1RIRU1FID0gX2Nocm9tZS5kZWZhdWx0LmdldFVpU2V0dGluZ3NDbGllbnQoKS5nZXQoJ3RoZW1lOmRhcmtNb2RlJyk7Cgp2YXIgY2hhcnRUaGVtZSA9IElTX0RBUktfVEhFTUUgPyBfZXVpX2NoYXJ0c190aGVtZS5FVUlfQ0hBUlRTX1RIRU1FX0RBUksudGhlbWUgOiBfZXVpX2NoYXJ0c190aGVtZS5FVUlfQ0hBUlRTX1RIRU1FX0xJR0hULnRoZW1lOwp2YXIgeHlDaGFydCA9IHsKICBuYW1lOiAnbGVuc194eV9jaGFydCcsCiAgdHlwZTogJ3JlbmRlcicsCiAgaGVscDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMueHlDaGFydC5oZWxwJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdBbiBYL1kgY2hhcnQnCiAgfSksCiAgYXJnczogewogICAgeFRpdGxlOiB7CiAgICAgIHR5cGVzOiBbJ3N0cmluZyddLAogICAgICBoZWxwOiAnWCBheGlzIHRpdGxlJwogICAgfSwKICAgIHlUaXRsZTogewogICAgICB0eXBlczogWydzdHJpbmcnXSwKICAgICAgaGVscDogJ1kgYXhpcyB0aXRsZScKICAgIH0sCiAgICBsZWdlbmQ6IHsKICAgICAgdHlwZXM6IFsnbGVuc194eV9sZWdlbmRDb25maWcnXSwKICAgICAgaGVscDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMueHlDaGFydC5sZWdlbmQuaGVscCcsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0NvbmZpZ3VyZSB0aGUgY2hhcnQgbGVnZW5kLicKICAgICAgfSkKICAgIH0sCiAgICBsYXllcnM6IHsKICAgICAgdHlwZXM6IFsnbGVuc194eV9sYXllciddLAogICAgICBoZWxwOiAnTGF5ZXJzIG9mIHZpc3VhbCBzZXJpZXMnLAogICAgICBtdWx0aTogdHJ1ZQogICAgfQogIH0sCiAgY29udGV4dDogewogICAgdHlwZXM6IFsnbGVuc19tdWx0aXRhYmxlJywgJ2tpYmFuYV9jb250ZXh0JywgJ251bGwnXQogIH0sCiAgZm46IGZ1bmN0aW9uIGZuKGRhdGEsIGFyZ3MpIHsKICAgIHJldHVybiB7CiAgICAgIHR5cGU6ICdyZW5kZXInLAogICAgICBhczogJ2xlbnNfeHlfY2hhcnRfcmVuZGVyZXInLAogICAgICB2YWx1ZTogewogICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgYXJnczogYXJncwogICAgICB9CiAgICB9OwogIH0KfTsKZXhwb3J0cy54eUNoYXJ0ID0geHlDaGFydDsKCnZhciBnZXRYeUNoYXJ0UmVuZGVyZXIgPSBmdW5jdGlvbiBnZXRYeUNoYXJ0UmVuZGVyZXIoZGVwZW5kZW5jaWVzKSB7CiAgcmV0dXJuIHsKICAgIG5hbWU6ICdsZW5zX3h5X2NoYXJ0X3JlbmRlcmVyJywKICAgIGRpc3BsYXlOYW1lOiAnWFkgY2hhcnQnLAogICAgaGVscDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMueHlDaGFydC5yZW5kZXJlci5oZWxwJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1gvWSBjaGFydCByZW5kZXJlcicKICAgIH0pLAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKCkge30sCiAgICByZXVzZURvbU5vZGU6IHRydWUsCiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihkb21Ob2RlLCBjb25maWcsIGhhbmRsZXJzKSB7CiAgICAgIGhhbmRsZXJzLm9uRGVzdHJveShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF9yZWFjdERvbS5kZWZhdWx0LnVubW91bnRDb21wb25lbnRBdE5vZGUoZG9tTm9kZSk7CiAgICAgIH0pOwoKICAgICAgX3JlYWN0RG9tLmRlZmF1bHQucmVuZGVyKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5JMThuUHJvdmlkZXIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoWFlDaGFydFJlcG9ydGFibGUsIF9leHRlbmRzKHt9LCBjb25maWcsIGRlcGVuZGVuY2llcykpKSwgZG9tTm9kZSwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBoYW5kbGVycy5kb25lKCk7CiAgICAgIH0pOwogICAgfQogIH07Cn07CgpleHBvcnRzLmdldFh5Q2hhcnRSZW5kZXJlciA9IGdldFh5Q2hhcnRSZW5kZXJlcjsKCmZ1bmN0aW9uIGdldEljb25Gb3JTZXJpZXNUeXBlKHNlcmllc1R5cGUpIHsKICByZXR1cm4gX3R5cGVzLnZpc3VhbGl6YXRpb25UeXBlcy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICByZXR1cm4gYy5pZCA9PT0gc2VyaWVzVHlwZTsKICB9KS5pY29uIHx8ICdlbXB0eSc7Cn0KCnZhciBNZW1vaXplZENoYXJ0ID0gX3JlYWN0LmRlZmF1bHQubWVtbyhYWUNoYXJ0KTsKCmZ1bmN0aW9uIFhZQ2hhcnRSZXBvcnRhYmxlKHByb3BzKSB7CiAgdmFyIF91c2VTdGF0ZSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHsKICAgIGlzUmVhZHk6IGZhbHNlCiAgfSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBzdGF0ZSA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldFN0YXRlID0gX3VzZVN0YXRlMlsxXTsgLy8gSXQgdGFrZXMgYSBjeWNsZSBmb3IgdGhlIFhZIGNoYXJ0IHRvIHJlbmRlci4gVGhpcyBwcmV2ZW50cwogIC8vIHJlcG9ydGluZyBmcm9tIHByaW50aW5nIGEgYmxhbmsgY2hhcnQgcGxhY2Vob2xkZXIuCgoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgc2V0U3RhdGUoewogICAgICBpc1JlYWR5OiB0cnVlCiAgICB9KTsKICB9LCBbXSk7CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3Zpc3VhbGl6YXRpb25fY29udGFpbmVyLlZpc3VhbGl6YXRpb25Db250YWluZXIsIHsKICAgIGNsYXNzTmFtZTogImxuc1h5RXhwcmVzc2lvbl9fY29udGFpbmVyIiwKICAgIGlzUmVhZHk6IHN0YXRlLmlzUmVhZHkKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KE1lbW9pemVkQ2hhcnQsIHByb3BzKSk7Cn0KCmZ1bmN0aW9uIFhZQ2hhcnQoX3JlZikgewogIHZhciBkYXRhID0gX3JlZi5kYXRhLAogICAgICBhcmdzID0gX3JlZi5hcmdzLAogICAgICBmb3JtYXRGYWN0b3J5ID0gX3JlZi5mb3JtYXRGYWN0b3J5LAogICAgICB0aW1lWm9uZSA9IF9yZWYudGltZVpvbmU7CiAgdmFyIGxlZ2VuZCA9IGFyZ3MubGVnZW5kLAogICAgICBsYXllcnMgPSBhcmdzLmxheWVyczsKCiAgaWYgKE9iamVjdC52YWx1ZXMoZGF0YS50YWJsZXMpLmV2ZXJ5KGZ1bmN0aW9uICh0YWJsZSkgewogICAgcmV0dXJuIHRhYmxlLnJvd3MubGVuZ3RoID09PSAwOwogIH0pKSB7CiAgICB2YXIgaWNvbiA9IGxheWVycy5sZW5ndGggPiAwID8gZ2V0SWNvbkZvclNlcmllc1R5cGUobGF5ZXJzWzBdLnNlcmllc1R5cGUpIDogJ2Jhcic7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIHsKICAgICAgY2xhc3NOYW1lOiAibG5zQ2hhcnRfX2VtcHR5IiwKICAgICAgdGV4dEFsaWduOiAiY2VudGVyIiwKICAgICAgY29sb3I6ICJzdWJkdWVkIiwKICAgICAgc2l6ZTogInhzIgogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUljb24sIHsKICAgICAgdHlwZTogaWNvbiwKICAgICAgY29sb3I6ICJzdWJkdWVkIiwKICAgICAgc2l6ZTogImwiCiAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICBzaXplOiAicyIKICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay5sZW5zLnh5VmlzdWFsaXphdGlvbi5ub0RhdGFMYWJlbCIsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTm8gcmVzdWx0cyBmb3VuZCIKICAgIH0pKSk7CiAgfSAvLyB1c2UgZm9ybWF0dGluZyBoaW50IG9mIGZpcnN0IHggYXhpcyBjb2x1bW4gdG8gZm9ybWF0IHRpY2tzCgoKICB2YXIgeEF4aXNDb2x1bW4gPSBPYmplY3QudmFsdWVzKGRhdGEudGFibGVzKVswXS5jb2x1bW5zLmZpbmQoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICB2YXIgaWQgPSBfcmVmMi5pZDsKICAgIHJldHVybiBpZCA9PT0gbGF5ZXJzWzBdLnhBY2Nlc3NvcjsKICB9KTsKICB2YXIgeEF4aXNGb3JtYXR0ZXIgPSBmb3JtYXRGYWN0b3J5KHhBeGlzQ29sdW1uICYmIHhBeGlzQ29sdW1uLmZvcm1hdEhpbnQpOyAvLyB1c2UgZGVmYXVsdCBudW1iZXIgZm9ybWF0dGVyIGZvciB5IGF4aXMgYW5kIHVzZSBmb3JtYXR0aW5nIGhpbnQgaWYgdGhlcmUgaXMganVzdCBhIHNpbmdsZSB5IGNvbHVtbgoKICB2YXIgeUF4aXNGb3JtYXR0ZXIgPSBmb3JtYXRGYWN0b3J5KHsKICAgIGlkOiAnbnVtYmVyJwogIH0pOwoKICBpZiAobGF5ZXJzLmxlbmd0aCA9PT0gMSAmJiBsYXllcnNbMF0uYWNjZXNzb3JzLmxlbmd0aCA9PT0gMSkgewogICAgdmFyIGZpcnN0WUF4aXNDb2x1bW4gPSBPYmplY3QudmFsdWVzKGRhdGEudGFibGVzKVswXS5jb2x1bW5zLmZpbmQoZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgIHZhciBpZCA9IF9yZWYzLmlkOwogICAgICByZXR1cm4gaWQgPT09IGxheWVyc1swXS5hY2Nlc3NvcnNbMF07CiAgICB9KTsKCiAgICBpZiAoZmlyc3RZQXhpc0NvbHVtbiAmJiBmaXJzdFlBeGlzQ29sdW1uLmZvcm1hdEhpbnQpIHsKICAgICAgeUF4aXNGb3JtYXR0ZXIgPSBmb3JtYXRGYWN0b3J5KGZpcnN0WUF4aXNDb2x1bW4uZm9ybWF0SGludCk7CiAgICB9CiAgfQoKICB2YXIgY2hhcnRIYXNNb3JlVGhhbk9uZVNlcmllcyA9IGxheWVycy5sZW5ndGggPiAxIHx8IGRhdGEudGFibGVzW2xheWVyc1swXS5sYXllcklkXS5jb2x1bW5zLmxlbmd0aCA+IDI7CiAgdmFyIHNob3VsZFJvdGF0ZSA9ICgwLCBfc3RhdGVfaGVscGVycy5pc0hvcml6b250YWxDaGFydCkobGF5ZXJzKTsKICB2YXIgeFRpdGxlID0geEF4aXNDb2x1bW4gJiYgeEF4aXNDb2x1bW4ubmFtZSB8fCBhcmdzLnhUaXRsZTsKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2hhcnRzLkNoYXJ0LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jaGFydHMuU2V0dGluZ3MsIHsKICAgIHNob3dMZWdlbmQ6IGxlZ2VuZC5pc1Zpc2libGUgPyBjaGFydEhhc01vcmVUaGFuT25lU2VyaWVzIDogbGVnZW5kLmlzVmlzaWJsZSwKICAgIGxlZ2VuZFBvc2l0aW9uOiBsZWdlbmQucG9zaXRpb24sCiAgICBzaG93TGVnZW5kRGlzcGxheVZhbHVlOiBmYWxzZSwKICAgIHRoZW1lOiBjaGFydFRoZW1lLAogICAgcm90YXRpb246IHNob3VsZFJvdGF0ZSA/IDkwIDogMCwKICAgIHhEb21haW46IGRhdGEuZGF0ZVJhbmdlICYmIGxheWVycy5ldmVyeShmdW5jdGlvbiAobCkgewogICAgICByZXR1cm4gbC54U2NhbGVUeXBlID09PSAndGltZSc7CiAgICB9KSA/IHsKICAgICAgbWluOiBkYXRhLmRhdGVSYW5nZS5mcm9tRGF0ZS5nZXRUaW1lKCksCiAgICAgIG1heDogZGF0YS5kYXRlUmFuZ2UudG9EYXRlLmdldFRpbWUoKQogICAgfSA6IHVuZGVmaW5lZAogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jaGFydHMuQXhpcywgewogICAgaWQ6ICJ4IiwKICAgIHBvc2l0aW9uOiBzaG91bGRSb3RhdGUgPyBfY2hhcnRzLlBvc2l0aW9uLkxlZnQgOiBfY2hhcnRzLlBvc2l0aW9uLkJvdHRvbSwKICAgIHRpdGxlOiB4VGl0bGUsCiAgICBzaG93R3JpZExpbmVzOiBmYWxzZSwKICAgIGhpZGU6IGxheWVyc1swXS5oaWRlLAogICAgdGlja0Zvcm1hdDogZnVuY3Rpb24gdGlja0Zvcm1hdChkKSB7CiAgICAgIHJldHVybiB4QXhpc0Zvcm1hdHRlci5jb252ZXJ0KGQpOwogICAgfQogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jaGFydHMuQXhpcywgewogICAgaWQ6ICJ5IiwKICAgIHBvc2l0aW9uOiBzaG91bGRSb3RhdGUgPyBfY2hhcnRzLlBvc2l0aW9uLkJvdHRvbSA6IF9jaGFydHMuUG9zaXRpb24uTGVmdCwKICAgIHRpdGxlOiBhcmdzLnlUaXRsZSwKICAgIHNob3dHcmlkTGluZXM6IGZhbHNlLAogICAgaGlkZTogbGF5ZXJzWzBdLmhpZGUsCiAgICB0aWNrRm9ybWF0OiBmdW5jdGlvbiB0aWNrRm9ybWF0KGQpIHsKICAgICAgcmV0dXJuIHlBeGlzRm9ybWF0dGVyLmNvbnZlcnQoZCk7CiAgICB9CiAgfSksIGxheWVycy5tYXAoZnVuY3Rpb24gKF9yZWY0LCBpbmRleCkgewogICAgdmFyIHNwbGl0QWNjZXNzb3IgPSBfcmVmNC5zcGxpdEFjY2Vzc29yLAogICAgICAgIHNlcmllc1R5cGUgPSBfcmVmNC5zZXJpZXNUeXBlLAogICAgICAgIGFjY2Vzc29ycyA9IF9yZWY0LmFjY2Vzc29ycywKICAgICAgICB4QWNjZXNzb3IgPSBfcmVmNC54QWNjZXNzb3IsCiAgICAgICAgbGF5ZXJJZCA9IF9yZWY0LmxheWVySWQsCiAgICAgICAgY29sdW1uVG9MYWJlbCA9IF9yZWY0LmNvbHVtblRvTGFiZWwsCiAgICAgICAgeVNjYWxlVHlwZSA9IF9yZWY0LnlTY2FsZVR5cGUsCiAgICAgICAgeFNjYWxlVHlwZSA9IF9yZWY0LnhTY2FsZVR5cGUsCiAgICAgICAgaXNIaXN0b2dyYW0gPSBfcmVmNC5pc0hpc3RvZ3JhbTsKCiAgICBpZiAoIWRhdGEudGFibGVzW2xheWVySWRdIHx8IGRhdGEudGFibGVzW2xheWVySWRdLnJvd3MubGVuZ3RoID09PSAwIHx8IGRhdGEudGFibGVzW2xheWVySWRdLnJvd3MuZXZlcnkoZnVuY3Rpb24gKHJvdykgewogICAgICByZXR1cm4gdHlwZW9mIHJvd1t4QWNjZXNzb3JdID09PSAndW5kZWZpbmVkJzsKICAgIH0pKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgY29sdW1uVG9MYWJlbE1hcCA9IGNvbHVtblRvTGFiZWwgPyBKU09OLnBhcnNlKGNvbHVtblRvTGFiZWwpIDoge307CiAgICB2YXIgc3BsaXRBY2Nlc3NvckxhYmVsID0gY29sdW1uVG9MYWJlbE1hcFtzcGxpdEFjY2Vzc29yXTsKICAgIHZhciB5QWNjZXNzb3JzID0gYWNjZXNzb3JzLm1hcChmdW5jdGlvbiAoYWNjZXNzb3IpIHsKICAgICAgcmV0dXJuIGNvbHVtblRvTGFiZWxNYXBbYWNjZXNzb3JdIHx8IGFjY2Vzc29yOwogICAgfSk7CiAgICB2YXIgaWRGb3JMZWdlbmQgPSBzcGxpdEFjY2Vzc29yTGFiZWwgfHwgeUFjY2Vzc29yczsKICAgIHZhciBzYW5pdGl6ZWQgPSBzYW5pdGl6ZVJvd3MoewogICAgICBzcGxpdEFjY2Vzc29yOiBzcGxpdEFjY2Vzc29yLAogICAgICBmb3JtYXRGYWN0b3J5OiBmb3JtYXRGYWN0b3J5LAogICAgICBjb2x1bW5Ub0xhYmVsTWFwOiBjb2x1bW5Ub0xhYmVsTWFwLAogICAgICB0YWJsZTogZGF0YS50YWJsZXNbbGF5ZXJJZF0KICAgIH0pOwogICAgdmFyIHNlcmllc1Byb3BzID0gewogICAgICBrZXk6IGluZGV4LAogICAgICBzcGxpdFNlcmllc0FjY2Vzc29yczogc2FuaXRpemVkLnNwbGl0QWNjZXNzb3IgPyBbc2FuaXRpemVkLnNwbGl0QWNjZXNzb3JdIDogW10sCiAgICAgIHN0YWNrQWNjZXNzb3JzOiBzZXJpZXNUeXBlLmluY2x1ZGVzKCdzdGFja2VkJykgPyBbeEFjY2Vzc29yXSA6IFtdLAogICAgICBpZDogaWRGb3JMZWdlbmQsCiAgICAgIHhBY2Nlc3NvcjogeEFjY2Vzc29yLAogICAgICB5QWNjZXNzb3JzOiB5QWNjZXNzb3JzLAogICAgICBkYXRhOiBzYW5pdGl6ZWQucm93cywKICAgICAgeFNjYWxlVHlwZTogeFNjYWxlVHlwZSwKICAgICAgeVNjYWxlVHlwZTogeVNjYWxlVHlwZSwKICAgICAgZW5hYmxlSGlzdG9ncmFtTW9kZTogaXNIaXN0b2dyYW0gJiYgKHNlcmllc1R5cGUuaW5jbHVkZXMoJ3N0YWNrZWQnKSB8fCAhc3BsaXRBY2Nlc3NvciksCiAgICAgIHRpbWVab25lOiB0aW1lWm9uZQogICAgfTsKICAgIHJldHVybiBzZXJpZXNUeXBlID09PSAnbGluZScgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jaGFydHMuTGluZVNlcmllcywgc2VyaWVzUHJvcHMpIDogc2VyaWVzVHlwZSA9PT0gJ2JhcicgfHwgc2VyaWVzVHlwZSA9PT0gJ2Jhcl9zdGFja2VkJyB8fCBzZXJpZXNUeXBlID09PSAnYmFyX2hvcml6b250YWwnIHx8IHNlcmllc1R5cGUgPT09ICdiYXJfaG9yaXpvbnRhbF9zdGFja2VkJyA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NoYXJ0cy5CYXJTZXJpZXMsIHNlcmllc1Byb3BzKSA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NoYXJ0cy5BcmVhU2VyaWVzLCBzZXJpZXNQcm9wcyk7CiAgfSkpOwp9Ci8qKgogKiBSZW5hbWVzIHRoZSBjb2x1bW5zIHRvIG1hdGNoIHRoZSB1c2VyLWNvbmZpZ3VyZWQgYWNjZXNzb3JzIGluCiAqIGNvbHVtblRvTGFiZWxNYXAuIElmIGEgc3BsaXRBY2Nlc3NvciBpcyBwcm92aWRlZCwgZm9ybWF0cyB0aGUKICogdmFsdWVzIGluIHRoYXQgY29sdW1uLgogKi8KCgpmdW5jdGlvbiBzYW5pdGl6ZVJvd3MoX3JlZjUpIHsKICB2YXIgc3BsaXRBY2Nlc3NvciA9IF9yZWY1LnNwbGl0QWNjZXNzb3IsCiAgICAgIHRhYmxlID0gX3JlZjUudGFibGUsCiAgICAgIGZvcm1hdEZhY3RvcnkgPSBfcmVmNS5mb3JtYXRGYWN0b3J5LAogICAgICBjb2x1bW5Ub0xhYmVsTWFwID0gX3JlZjUuY29sdW1uVG9MYWJlbE1hcDsKICB2YXIgY29sdW1uID0gdGFibGUuY29sdW1ucy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICByZXR1cm4gYy5pZCA9PT0gc3BsaXRBY2Nlc3NvcjsKICB9KTsKICB2YXIgZm9ybWF0dGVyID0gZm9ybWF0RmFjdG9yeShjb2x1bW4gJiYgY29sdW1uLmZvcm1hdEhpbnQpOwogIHJldHVybiB7CiAgICBzcGxpdEFjY2Vzc29yOiBjb2x1bW4gJiYgY29sdW1uLmlkLAogICAgcm93czogdGFibGUucm93cy5tYXAoZnVuY3Rpb24gKHIpIHsKICAgICAgdmFyIG5ld1JvdyA9IHt9OwoKICAgICAgaWYgKGNvbHVtbikgewogICAgICAgIG5ld1Jvd1tjb2x1bW4uaWRdID0gZm9ybWF0dGVyLmNvbnZlcnQocltjb2x1bW4uaWRdKTsKICAgICAgfQoKICAgICAgT2JqZWN0LmtleXMocikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgdmFyIG5ld0tleSA9IGNvbHVtblRvTGFiZWxNYXBba2V5XSB8fCBrZXk7CiAgICAgICAgbmV3Um93W25ld0tleV0gPSByW2tleV07CiAgICAgIH0pOwogICAgICByZXR1cm4gbmV3Um93OwogICAgfSkKICB9Owp9"},null]}