{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/pages/detection_engine/components/signals_histogram_panel/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/pages/detection_engine/components/signals_histogram_panel/index.js","mtime":1585205047855},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlNpZ25hbHNIaXN0b2dyYW1QYW5lbCA9IGV4cG9ydHMuREVURUNUSU9OU19ISVNUT0dSQU1fSUQgPSB2b2lkIDA7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9udW1lcmFsID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAZWxhc3RpYy9udW1lcmFsIikpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9zdHlsZWRDb21wb25lbnRzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJzdHlsZWQtY29tcG9uZW50cyIpKTsKCnZhciBfZnAgPSByZXF1aXJlKCJsb2Rhc2gvZnAiKTsKCnZhciBfaGVhZGVyX3NlY3Rpb24gPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2hlYWRlcl9zZWN0aW9uIik7Cgp2YXIgX3NpZ25hbHNfaGlzdG9ncmFtID0gcmVxdWlyZSgiLi9zaWduYWxzX2hpc3RvZ3JhbSIpOwoKdmFyIF9lc19xdWVyeSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9wbHVnaW5zL2RhdGEvY29tbW9uL2VzX3F1ZXJ5Iik7Cgp2YXIgX2NvbmZpZyA9IHJlcXVpcmUoIi4vY29uZmlnIik7Cgp2YXIgX2xpbmtfdG8gPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xpbmtfdG8iKTsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vY29tbW9uL2NvbnN0YW50cyIpOwoKdmFyIF9raWJhbmEgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9saWIva2liYW5hIik7Cgp2YXIgX2luc3BlY3QgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2luc3BlY3QiKTsKCnZhciBfdXNlX3F1ZXJ5ID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29udGFpbmVycy9kZXRlY3Rpb25fZW5naW5lL3NpZ25hbHMvdXNlX3F1ZXJ5Iik7Cgp2YXIgX21hdHJpeF9sb2FkZXIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL21hdHJpeF9oaXN0b2dyYW0vbWF0cml4X2xvYWRlciIpOwoKdmFyIF9oZWxwZXJzID0gcmVxdWlyZSgiLi9oZWxwZXJzIik7Cgp2YXIgaTE4biA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoIi4vdHJhbnNsYXRpb25zIikpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIERFRkFVTFRfUEFORUxfSEVJR0hUID0gMzAwOwp2YXIgU3R5bGVkRXVpUGFuZWwgPSAoMCwgX3N0eWxlZENvbXBvbmVudHMuZGVmYXVsdCkoX2V1aS5FdWlQYW5lbCkud2l0aENvbmZpZyh7CiAgZGlzcGxheU5hbWU6ICJTdHlsZWRFdWlQYW5lbCIsCiAgY29tcG9uZW50SWQ6ICJjb2RjN3AtMCIKfSkoWyJkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uOyIsICIgcG9zaXRpb246cmVsYXRpdmU7Il0sIGZ1bmN0aW9uIChfcmVmKSB7CiAgdmFyIGhlaWdodCA9IF9yZWYuaGVpZ2h0OwogIHJldHVybiBoZWlnaHQgIT0gbnVsbCA/ICJoZWlnaHQ6ICIuY29uY2F0KGhlaWdodCwgInB4OyIpIDogJyc7Cn0pOwp2YXIgZGVmYXVsdFRvdGFsU2lnbmFsc09iaiA9IHsKICB2YWx1ZTogMCwKICByZWxhdGlvbjogJ2VxJwp9Owp2YXIgREVURUNUSU9OU19ISVNUT0dSQU1fSUQgPSAnZGV0ZWN0aW9ucy1oaXN0b2dyYW0nOwpleHBvcnRzLkRFVEVDVElPTlNfSElTVE9HUkFNX0lEID0gREVURUNUSU9OU19ISVNUT0dSQU1fSUQ7CnZhciBWaWV3U2lnbmFsc0ZsZXhJdGVtID0gKDAsIF9zdHlsZWRDb21wb25lbnRzLmRlZmF1bHQpKF9ldWkuRXVpRmxleEl0ZW0pLndpdGhDb25maWcoewogIGRpc3BsYXlOYW1lOiAiVmlld1NpZ25hbHNGbGV4SXRlbSIsCiAgY29tcG9uZW50SWQ6ICJjb2RjN3AtMSIKfSkoWyJtYXJnaW4tbGVmdDoyNHB4OyJdKTsKdmFyIFNpZ25hbHNIaXN0b2dyYW1QYW5lbCA9ICgwLCBfcmVhY3QubWVtbykoZnVuY3Rpb24gKF9yZWYyKSB7CiAgdmFyIGNoYXJ0SGVpZ2h0ID0gX3JlZjIuY2hhcnRIZWlnaHQsCiAgICAgIF9yZWYyJGRlZmF1bHRTdGFja0J5TyA9IF9yZWYyLmRlZmF1bHRTdGFja0J5T3B0aW9uLAogICAgICBkZWZhdWx0U3RhY2tCeU9wdGlvbiA9IF9yZWYyJGRlZmF1bHRTdGFja0J5TyA9PT0gdm9pZCAwID8gX2NvbmZpZy5zaWduYWxzSGlzdG9ncmFtT3B0aW9uc1swXSA6IF9yZWYyJGRlZmF1bHRTdGFja0J5TywKICAgICAgZGVsZXRlUXVlcnkgPSBfcmVmMi5kZWxldGVRdWVyeSwKICAgICAgZmlsdGVycyA9IF9yZWYyLmZpbHRlcnMsCiAgICAgIHF1ZXJ5ID0gX3JlZjIucXVlcnksCiAgICAgIGZyb20gPSBfcmVmMi5mcm9tLAogICAgICBfcmVmMiRsZWdlbmRQb3NpdGlvbiA9IF9yZWYyLmxlZ2VuZFBvc2l0aW9uLAogICAgICBsZWdlbmRQb3NpdGlvbiA9IF9yZWYyJGxlZ2VuZFBvc2l0aW9uID09PSB2b2lkIDAgPyAncmlnaHQnIDogX3JlZjIkbGVnZW5kUG9zaXRpb24sCiAgICAgIF9yZWYyJHBhbmVsSGVpZ2h0ID0gX3JlZjIucGFuZWxIZWlnaHQsCiAgICAgIHBhbmVsSGVpZ2h0ID0gX3JlZjIkcGFuZWxIZWlnaHQgPT09IHZvaWQgMCA/IERFRkFVTFRfUEFORUxfSEVJR0hUIDogX3JlZjIkcGFuZWxIZWlnaHQsCiAgICAgIHNldFF1ZXJ5ID0gX3JlZjIuc2V0UXVlcnksCiAgICAgIHNpZ25hbEluZGV4TmFtZSA9IF9yZWYyLnNpZ25hbEluZGV4TmFtZSwKICAgICAgX3JlZjIkc2hvd0xpbmtUb1NpZ25hID0gX3JlZjIuc2hvd0xpbmtUb1NpZ25hbHMsCiAgICAgIHNob3dMaW5rVG9TaWduYWxzID0gX3JlZjIkc2hvd0xpbmtUb1NpZ25hID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYyJHNob3dMaW5rVG9TaWduYSwKICAgICAgX3JlZjIkc2hvd1RvdGFsU2lnbmFsID0gX3JlZjIuc2hvd1RvdGFsU2lnbmFsc0NvdW50LAogICAgICBzaG93VG90YWxTaWduYWxzQ291bnQgPSBfcmVmMiRzaG93VG90YWxTaWduYWwgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjIkc2hvd1RvdGFsU2lnbmFsLAogICAgICBzdGFja0J5T3B0aW9ucyA9IF9yZWYyLnN0YWNrQnlPcHRpb25zLAogICAgICB0byA9IF9yZWYyLnRvLAogICAgICBfcmVmMiR0aXRsZSA9IF9yZWYyLnRpdGxlLAogICAgICB0aXRsZSA9IF9yZWYyJHRpdGxlID09PSB2b2lkIDAgPyBpMThuLkhJU1RPR1JBTV9IRUFERVIgOiBfcmVmMiR0aXRsZSwKICAgICAgdXBkYXRlRGF0ZVJhbmdlID0gX3JlZjIudXBkYXRlRGF0ZVJhbmdlOwoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkodHJ1ZSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBpc0luaXRpYWxMb2FkaW5nID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0SXNJbml0aWFsTG9hZGluZyA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlVWlTZXR0aW5nJCA9ICgwLCBfa2liYW5hLnVzZVVpU2V0dGluZyQpKF9jb25zdGFudHMuREVGQVVMVF9OVU1CRVJfRk9STUFUKSwKICAgICAgX3VzZVVpU2V0dGluZyQyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVVpU2V0dGluZyQsIDEpLAogICAgICBkZWZhdWx0TnVtYmVyRm9ybWF0ID0gX3VzZVVpU2V0dGluZyQyWzBdOwoKICB2YXIgX3VzZVN0YXRlMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGRlZmF1bHRUb3RhbFNpZ25hbHNPYmopLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIHRvdGFsU2lnbmFsc09iaiA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldFRvdGFsU2lnbmFsc09iaiA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBfdXNlU3RhdGU1ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdFN0YWNrQnlPcHRpb24pLAogICAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksCiAgICAgIHNlbGVjdGVkU3RhY2tCeU9wdGlvbiA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldFNlbGVjdGVkU3RhY2tCeU9wdGlvbiA9IF91c2VTdGF0ZTZbMV07CgogIHZhciBfdXNlUXVlcnlTaWduYWxzID0gKDAsIF91c2VfcXVlcnkudXNlUXVlcnlTaWduYWxzKSgoMCwgX2hlbHBlcnMuZ2V0U2lnbmFsc0hpc3RvZ3JhbVF1ZXJ5KShzZWxlY3RlZFN0YWNrQnlPcHRpb24udmFsdWUsIGZyb20sIHRvLCBbXSksIHNpZ25hbEluZGV4TmFtZSksCiAgICAgIGlzTG9hZGluZ1NpZ25hbHMgPSBfdXNlUXVlcnlTaWduYWxzLmxvYWRpbmcsCiAgICAgIHNpZ25hbHNEYXRhID0gX3VzZVF1ZXJ5U2lnbmFscy5kYXRhLAogICAgICBzZXRTaWduYWxzUXVlcnkgPSBfdXNlUXVlcnlTaWduYWxzLnNldFF1ZXJ5LAogICAgICByZXNwb25zZSA9IF91c2VRdWVyeVNpZ25hbHMucmVzcG9uc2UsCiAgICAgIHJlcXVlc3QgPSBfdXNlUXVlcnlTaWduYWxzLnJlcXVlc3QsCiAgICAgIHJlZmV0Y2ggPSBfdXNlUXVlcnlTaWduYWxzLnJlZmV0Y2g7CgogIHZhciBraWJhbmEgPSAoMCwgX2tpYmFuYS51c2VLaWJhbmEpKCk7CiAgdmFyIHRvdGFsU2lnbmFscyA9ICgwLCBfcmVhY3QudXNlTWVtbykoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGkxOG4uU0hPV0lOR19TSUdOQUxTKCgwLCBfbnVtZXJhbC5kZWZhdWx0KSh0b3RhbFNpZ25hbHNPYmoudmFsdWUpLmZvcm1hdChkZWZhdWx0TnVtYmVyRm9ybWF0KSwgdG90YWxTaWduYWxzT2JqLnZhbHVlLCB0b3RhbFNpZ25hbHNPYmoucmVsYXRpb24gPT09ICdndGUnID8gJz4nIDogdG90YWxTaWduYWxzT2JqLnJlbGF0aW9uID09PSAnbHRlJyA/ICc8JyA6ICcnKTsKICB9LCBbdG90YWxTaWduYWxzT2JqXSk7CiAgdmFyIHNldFNlbGVjdGVkT3B0aW9uQ2FsbGJhY2sgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoZXZlbnQpIHsKICAgIHZhciBfcmVmMzsKCiAgICBzZXRTZWxlY3RlZFN0YWNrQnlPcHRpb24oKF9yZWYzID0gc3RhY2tCeU9wdGlvbnMgPT09IG51bGwgfHwgc3RhY2tCeU9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN0YWNrQnlPcHRpb25zLmZpbmQoZnVuY3Rpb24gKGNvKSB7CiAgICAgIHJldHVybiBjby52YWx1ZSA9PT0gZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgfSkpICE9PSBudWxsICYmIF9yZWYzICE9PSB2b2lkIDAgPyBfcmVmMyA6IGRlZmF1bHRTdGFja0J5T3B0aW9uKTsKICB9LCBbXSk7CiAgdmFyIGZvcm1hdHRlZFNpZ25hbHNEYXRhID0gKDAsIF9yZWFjdC51c2VNZW1vKShmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gKDAsIF9oZWxwZXJzLmZvcm1hdFNpZ25hbHNEYXRhKShzaWduYWxzRGF0YSk7CiAgfSwgW3NpZ25hbHNEYXRhXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIHZhciBjYW5jZWxlZCA9IGZhbHNlOwoKICAgIGlmICghY2FuY2VsZWQgJiYgISgwLCBfaGVscGVycy5zaG93SW5pdGlhbExvYWRpbmdTcGlubmVyKSh7CiAgICAgIGlzSW5pdGlhbExvYWRpbmc6IGlzSW5pdGlhbExvYWRpbmcsCiAgICAgIGlzTG9hZGluZ1NpZ25hbHM6IGlzTG9hZGluZ1NpZ25hbHMKICAgIH0pKSB7CiAgICAgIHNldElzSW5pdGlhbExvYWRpbmcoZmFsc2UpOwogICAgfQoKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGNhbmNlbGVkID0gdHJ1ZTsgLy8gcHJldmVudCBsb25nIHJ1bm5pbmcgZGF0YSBmZXRjaGVzIGZyb20gdXBkYXRpbmcgc3RhdGUgYWZ0ZXIgdW5tb3VudGluZwogICAgfTsKICB9LCBbaXNJbml0aWFsTG9hZGluZywgaXNMb2FkaW5nU2lnbmFscywgc2V0SXNJbml0aWFsTG9hZGluZ10pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBpZiAoZGVsZXRlUXVlcnkpIHsKICAgICAgICBkZWxldGVRdWVyeSh7CiAgICAgICAgICBpZDogREVURUNUSU9OU19ISVNUT0dSQU1fSUQKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICB9LCBbXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGlmIChyZWZldGNoICE9IG51bGwgJiYgc2V0UXVlcnkgIT0gbnVsbCkgewogICAgICBzZXRRdWVyeSh7CiAgICAgICAgaWQ6IERFVEVDVElPTlNfSElTVE9HUkFNX0lELAogICAgICAgIGluc3BlY3Q6IHsKICAgICAgICAgIGRzbDogW3JlcXVlc3RdLAogICAgICAgICAgcmVzcG9uc2U6IFtyZXNwb25zZV0KICAgICAgICB9LAogICAgICAgIGxvYWRpbmc6IGlzTG9hZGluZ1NpZ25hbHMsCiAgICAgICAgcmVmZXRjaDogcmVmZXRjaAogICAgICB9KTsKICAgIH0KICB9LCBbc2V0UXVlcnksIGlzTG9hZGluZ1NpZ25hbHMsIHNpZ25hbHNEYXRhLCByZXNwb25zZSwgcmVxdWVzdCwgcmVmZXRjaF0pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjQ7CgogICAgc2V0VG90YWxTaWduYWxzT2JqKChfcmVmNCA9IHNpZ25hbHNEYXRhID09PSBudWxsIHx8IHNpZ25hbHNEYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzaWduYWxzRGF0YS5oaXRzLnRvdGFsKSAhPT0gbnVsbCAmJiBfcmVmNCAhPT0gdm9pZCAwID8gX3JlZjQgOiB7CiAgICAgIHZhbHVlOiAwLAogICAgICByZWxhdGlvbjogJ2VxJwogICAgfSk7CiAgfSwgW3NpZ25hbHNEYXRhXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmNTsKCiAgICB2YXIgY29udmVydGVkID0gX2VzX3F1ZXJ5LmVzUXVlcnkuYnVpbGRFc1F1ZXJ5KHVuZGVmaW5lZCwgcXVlcnkgIT0gbnVsbCA/IFtxdWVyeV0gOiBbXSwgKF9yZWY1ID0gZmlsdGVycyA9PT0gbnVsbCB8fCBmaWx0ZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaWx0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZikgewogICAgICByZXR1cm4gZi5tZXRhLmRpc2FibGVkID09PSBmYWxzZTsKICAgIH0pKSAhPT0gbnVsbCAmJiBfcmVmNSAhPT0gdm9pZCAwID8gX3JlZjUgOiBbXSwgX29iamVjdFNwcmVhZCh7fSwgX2VzX3F1ZXJ5LmVzUXVlcnkuZ2V0RXNRdWVyeUNvbmZpZyhraWJhbmEuc2VydmljZXMudWlTZXR0aW5ncyksIHsKICAgICAgZGF0ZUZvcm1hdFRaOiB1bmRlZmluZWQKICAgIH0pKTsKCiAgICBzZXRTaWduYWxzUXVlcnkoKDAsIF9oZWxwZXJzLmdldFNpZ25hbHNIaXN0b2dyYW1RdWVyeSkoc2VsZWN0ZWRTdGFja0J5T3B0aW9uLnZhbHVlLCBmcm9tLCB0bywgISgwLCBfZnAuaXNFbXB0eSkoY29udmVydGVkKSA/IFtjb252ZXJ0ZWRdIDogW10pKTsKICB9LCBbc2VsZWN0ZWRTdGFja0J5T3B0aW9uLnZhbHVlLCBmcm9tLCB0bywgcXVlcnksIGZpbHRlcnNdKTsKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaW5zcGVjdC5JbnNwZWN0QnV0dG9uQ29udGFpbmVyLCB7CiAgICBzaG93OiAhaXNJbml0aWFsTG9hZGluZwogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkRXVpUGFuZWwsIHsKICAgIGhlaWdodDogcGFuZWxIZWlnaHQKICB9LCBpc0luaXRpYWxMb2FkaW5nID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaGVhZGVyX3NlY3Rpb24uSGVhZGVyU2VjdGlvbiwgewogICAgaWQ6IERFVEVDVElPTlNfSElTVE9HUkFNX0lELAogICAgdGl0bGU6IHRpdGxlCiAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX21hdHJpeF9sb2FkZXIuTWF0cml4TG9hZGVyLCBudWxsKSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5kZWZhdWx0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9oZWFkZXJfc2VjdGlvbi5IZWFkZXJTZWN0aW9uLCB7CiAgICBpZDogREVURUNUSU9OU19ISVNUT0dSQU1fSUQsCiAgICB0aXRsZTogdGl0bGUsCiAgICBzdWJ0aXRsZTogc2hvd1RvdGFsU2lnbmFsc0NvdW50ICYmIHRvdGFsU2lnbmFscwogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiLAogICAgZ3V0dGVyU2l6ZTogIm5vbmUiCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICBncm93OiBmYWxzZQogIH0sIHN0YWNrQnlPcHRpb25zICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTZWxlY3QsIHsKICAgIG9uQ2hhbmdlOiBzZXRTZWxlY3RlZE9wdGlvbkNhbGxiYWNrLAogICAgb3B0aW9uczogc3RhY2tCeU9wdGlvbnMsCiAgICBwcmVwZW5kOiBpMThuLlNUQUNLX0JZX0xBQkVMLAogICAgdmFsdWU6IHNlbGVjdGVkU3RhY2tCeU9wdGlvbi52YWx1ZQogIH0pKSwgc2hvd0xpbmtUb1NpZ25hbHMgJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChWaWV3U2lnbmFsc0ZsZXhJdGVtLCB7CiAgICBncm93OiBmYWxzZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgIGhyZWY6ICgwLCBfbGlua190by5nZXREZXRlY3Rpb25FbmdpbmVVcmwpKCkKICB9LCBpMThuLlZJRVdfU0lHTkFMUykpKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3NpZ25hbHNfaGlzdG9ncmFtLlNpZ25hbHNIaXN0b2dyYW0sIHsKICAgIGNoYXJ0SGVpZ2h0OiBjaGFydEhlaWdodCwKICAgIGRhdGE6IGZvcm1hdHRlZFNpZ25hbHNEYXRhLAogICAgZnJvbTogZnJvbSwKICAgIGxlZ2VuZFBvc2l0aW9uOiBsZWdlbmRQb3NpdGlvbiwKICAgIGxvYWRpbmc6IGlzTG9hZGluZ1NpZ25hbHMsCiAgICB0bzogdG8sCiAgICB1cGRhdGVEYXRlUmFuZ2U6IHVwZGF0ZURhdGVSYW5nZQogIH0pKSkpOwp9KTsKZXhwb3J0cy5TaWduYWxzSGlzdG9ncmFtUGFuZWwgPSBTaWduYWxzSGlzdG9ncmFtUGFuZWw7ClNpZ25hbHNIaXN0b2dyYW1QYW5lbC5kaXNwbGF5TmFtZSA9ICdTaWduYWxzSGlzdG9ncmFtUGFuZWwnOw=="},null]}