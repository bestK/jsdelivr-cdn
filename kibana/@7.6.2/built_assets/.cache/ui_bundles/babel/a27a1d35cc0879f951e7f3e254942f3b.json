{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/security/public/views/management/roles_grid/components/roles_grid_page.js","dependencies":[{"path":"x-pack/legacy/plugins/security/public/views/management/roles_grid/components/roles_grid_page.js","mtime":1585205047276},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuUm9sZXNHcmlkUGFnZSA9IHZvaWQgMDsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3JlYWN0ID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfbm90aWZ5ID0gcmVxdWlyZSgidWkvbm90aWZ5Iik7Cgp2YXIgX3JvbGVfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9saWIvcm9sZV91dGlscyIpOwoKdmFyIF9yb2xlc19hcGkgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9saWIvcm9sZXNfYXBpIik7Cgp2YXIgX2NvbmZpcm1fZGVsZXRlID0gcmVxdWlyZSgiLi9jb25maXJtX2RlbGV0ZSIpOwoKdmFyIF9wZXJtaXNzaW9uX2RlbmllZCA9IHJlcXVpcmUoIi4vcGVybWlzc2lvbl9kZW5pZWQiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgZ2V0Um9sZU1hbmFnZW1lbnRIcmVmID0gZnVuY3Rpb24gZ2V0Um9sZU1hbmFnZW1lbnRIcmVmKGFjdGlvbiwgcm9sZU5hbWUpIHsKICByZXR1cm4gIiMvbWFuYWdlbWVudC9zZWN1cml0eS9yb2xlcy8iLmNvbmNhdChhY3Rpb24pLmNvbmNhdChyb2xlTmFtZSA/ICIvIi5jb25jYXQocm9sZU5hbWUpIDogJycpOwp9OwoKdmFyIFJvbGVzR3JpZFBhZ2VVSSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoUm9sZXNHcmlkUGFnZVVJLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gUm9sZXNHcmlkUGFnZVVJKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJvbGVzR3JpZFBhZ2VVSSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoUm9sZXNHcmlkUGFnZVVJKS5jYWxsKHRoaXMsIHByb3BzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0UGFnZUNvbnRlbnQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciByb2xlcyA9IF90aGlzLnN0YXRlLnJvbGVzOwogICAgICB2YXIgaW50bCA9IF90aGlzLnByb3BzLmludGw7CiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBhZ2VDb250ZW50LCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBhZ2VDb250ZW50SGVhZGVyLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBhZ2VDb250ZW50SGVhZGVyU2VjdGlvbiwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUaXRsZSwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgxIiwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQucm9sZXMucm9sZVRpdGxlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlJvbGVzIgogICAgICB9KSkpLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIHsKICAgICAgICBjb2xvcjogInN1YmR1ZWQiLAogICAgICAgIHNpemU6ICJzIgogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LnJvbGVzLnN1YnRpdGxlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFwcGx5IHJvbGVzIHRvIGdyb3VwcyBvZiB1c2VycyBhbmQgbWFuYWdlIHBlcm1pc3Npb25zIGFjcm9zcyB0aGUgc3RhY2suIgogICAgICB9KSkpKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQYWdlQ29udGVudEhlYWRlclNlY3Rpb24sIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uLCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImNyZWF0ZVJvbGVCdXR0b24iLAogICAgICAgIGhyZWY6IGdldFJvbGVNYW5hZ2VtZW50SHJlZignZWRpdCcpCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LnJvbGVzLmNyZWF0ZVJvbGVCdXR0b25MYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDcmVhdGUgcm9sZSIKICAgICAgfSkpKSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFnZUNvbnRlbnRCb2R5LCBudWxsLCBfdGhpcy5zdGF0ZS5zaG93RGVsZXRlQ29uZmlybWF0aW9uID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbmZpcm1fZGVsZXRlLkNvbmZpcm1EZWxldGUsIHsKICAgICAgICBvbkNhbmNlbDogX3RoaXMub25DYW5jZWxEZWxldGUsCiAgICAgICAgcm9sZXNUb0RlbGV0ZTogX3RoaXMuc3RhdGUuc2VsZWN0aW9uLm1hcChmdW5jdGlvbiAocm9sZSkgewogICAgICAgICAgcmV0dXJuIHJvbGUubmFtZTsKICAgICAgICB9KSwKICAgICAgICBjYWxsYmFjazogX3RoaXMuaGFuZGxlRGVsZXRlCiAgICAgIH0pIDogbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlJbk1lbW9yeVRhYmxlLCB7CiAgICAgICAgaXRlbUlkOiAibmFtZSIsCiAgICAgICAgcmVzcG9uc2l2ZTogZmFsc2UsCiAgICAgICAgY29sdW1uczogX3RoaXMuZ2V0Q29sdW1uQ29uZmlnKGludGwpLAogICAgICAgIGhhc0FjdGlvbnM6IHRydWUsCiAgICAgICAgc2VsZWN0aW9uOiB7CiAgICAgICAgICBzZWxlY3RhYmxlOiBmdW5jdGlvbiBzZWxlY3RhYmxlKHJvbGUpIHsKICAgICAgICAgICAgcmV0dXJuICFyb2xlLm1ldGFkYXRhIHx8ICFyb2xlLm1ldGFkYXRhLl9yZXNlcnZlZDsKICAgICAgICAgIH0sCiAgICAgICAgICBzZWxlY3RhYmxlTWVzc2FnZTogZnVuY3Rpb24gc2VsZWN0YWJsZU1lc3NhZ2Uoc2VsZWN0YWJsZSkgewogICAgICAgICAgICByZXR1cm4gIXNlbGVjdGFibGUgPyAnUm9sZSBpcyByZXNlcnZlZCcgOiAnJzsKICAgICAgICAgIH0sCiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZTogZnVuY3Rpb24gb25TZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0aW9uKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb24KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBwYWdpbmF0aW9uOiB7CiAgICAgICAgICBpbml0aWFsUGFnZVNpemU6IDIwLAogICAgICAgICAgcGFnZVNpemVPcHRpb25zOiBbMTAsIDIwLCAzMCwgNTAsIDEwMF0KICAgICAgICB9LAogICAgICAgIGl0ZW1zOiBfdGhpcy5nZXRWaXNpYmxlUm9sZXMoKSwKICAgICAgICBsb2FkaW5nOiByb2xlcy5sZW5ndGggPT09IDAsCiAgICAgICAgc2VhcmNoOiB7CiAgICAgICAgICB0b29sc0xlZnQ6IF90aGlzLnJlbmRlclRvb2xzTGVmdCgpLAogICAgICAgICAgYm94OiB7CiAgICAgICAgICAgIGluY3JlbWVudGFsOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHF1ZXJ5KSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICBmaWx0ZXI6IHF1ZXJ5LnF1ZXJ5VGV4dAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNvcnRpbmc6IHsKICAgICAgICAgIHNvcnQ6IHsKICAgICAgICAgICAgZmllbGQ6ICduYW1lJywKICAgICAgICAgICAgZGlyZWN0aW9uOiAnYXNjJwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcm93UHJvcHM6IGZ1bmN0aW9uIHJvd1Byb3BzKCkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgJ2RhdGEtdGVzdC1zdWJqJzogJ3JvbGVSb3cnCiAgICAgICAgICB9OwogICAgICAgIH0sCiAgICAgICAgaXNTZWxlY3RhYmxlOiB0cnVlCiAgICAgIH0pKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnZXRDb2x1bW5Db25maWciLCBmdW5jdGlvbiAoaW50bCkgewogICAgICB2YXIgcmVzZXJ2ZWRSb2xlRGVzYyA9IGludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgaWQ6ICd4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LnJvbGVzLnJlc2VydmVkQ29sdW1uRGVzY3JpcHRpb24nLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVzZXJ2ZWQgcm9sZXMgYXJlIGJ1aWx0LWluIGFuZCBjYW5ub3QgYmUgZWRpdGVkIG9yIHJlbW92ZWQuJwogICAgICB9KTsKICAgICAgcmV0dXJuIFt7CiAgICAgICAgZmllbGQ6ICduYW1lJywKICAgICAgICBuYW1lOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgaWQ6ICd4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LnJvbGVzLm5hbWVDb2x1bW5OYW1lJywKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUm9sZScKICAgICAgICB9KSwKICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB0cnVuY2F0ZVRleHQ6IHRydWUsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIobmFtZSwgcmVjb3JkKSB7CiAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCB7CiAgICAgICAgICAgIGNvbG9yOiAic3ViZHVlZCIsCiAgICAgICAgICAgIHNpemU6ICJzIgogICAgICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMaW5rLCB7CiAgICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJyb2xlUm93TmFtZSIsCiAgICAgICAgICAgIGhyZWY6IGdldFJvbGVNYW5hZ2VtZW50SHJlZignZWRpdCcsIG5hbWUpCiAgICAgICAgICB9LCBuYW1lKSwgISgwLCBfcm9sZV91dGlscy5pc1JvbGVFbmFibGVkKShyZWNvcmQpICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAieHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5yb2xlcy5kaXNhYmxlZFRvb2x0aXAiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIiAoZGlzYWJsZWQpIgogICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGZpZWxkOiAnbWV0YWRhdGEnLAogICAgICAgIG5hbWU6IGludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgICBpZDogJ3hwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQucm9sZXMucmVzZXJ2ZWRDb2x1bW5OYW1lJywKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVzZXJ2ZWQnCiAgICAgICAgfSksCiAgICAgICAgc29ydGFibGU6IGZ1bmN0aW9uIHNvcnRhYmxlKF9yZWYpIHsKICAgICAgICAgIHZhciBtZXRhZGF0YSA9IF9yZWYubWV0YWRhdGE7CiAgICAgICAgICByZXR1cm4gQm9vbGVhbihtZXRhZGF0YSAmJiBtZXRhZGF0YS5fcmVzZXJ2ZWQpOwogICAgICAgIH0sCiAgICAgICAgZGF0YVR5cGU6ICdib29sZWFuJywKICAgICAgICBhbGlnbjogJ3JpZ2h0JywKICAgICAgICBkZXNjcmlwdGlvbjogcmVzZXJ2ZWRSb2xlRGVzYywKICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihtZXRhZGF0YSkgewogICAgICAgICAgdmFyIGxhYmVsID0gaW50bC5mb3JtYXRNZXNzYWdlKHsKICAgICAgICAgICAgaWQ6ICd4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LnJvbGVzLnJlc2VydmVkUm9sZUljb25MYWJlbCcsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVzZXJ2ZWQgcm9sZScKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIG1ldGFkYXRhICYmIG1ldGFkYXRhLl9yZXNlcnZlZCA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgICB0aXRsZTogbGFiZWwKICAgICAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSWNvbiwgewogICAgICAgICAgICAiYXJpYS1sYWJlbCI6IGxhYmVsLAogICAgICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAicmVzZXJ2ZWRSb2xlIiwKICAgICAgICAgICAgdHlwZTogImNoZWNrIgogICAgICAgICAgfSkpIDogbnVsbDsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBuYW1lOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgaWQ6ICd4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LnJvbGVzLmFjdGlvbnNDb2x1bW5OYW1lJywKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWN0aW9ucycKICAgICAgICB9KSwKICAgICAgICB3aWR0aDogJzE1MHB4JywKICAgICAgICBhY3Rpb25zOiBbewogICAgICAgICAgYXZhaWxhYmxlOiBmdW5jdGlvbiBhdmFpbGFibGUocm9sZSkgewogICAgICAgICAgICByZXR1cm4gISgwLCBfcm9sZV91dGlscy5pc1JlYWRPbmx5Um9sZSkocm9sZSk7CiAgICAgICAgICB9LAogICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIocm9sZSkgewogICAgICAgICAgICB2YXIgdGl0bGUgPSBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICAgIGlkOiAneHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5yb2xlcy5lZGl0Um9sZUFjdGlvbk5hbWUnLAogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRWRpdCB7cm9sZU5hbWV9IgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgcm9sZU5hbWU6IHJvbGUubmFtZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uSWNvbiwgewogICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogdGl0bGUsCiAgICAgICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImVkaXQtcm9sZS1hY3Rpb24tIi5jb25jYXQocm9sZS5uYW1lKSwKICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICAgICAgY29sb3I6ICdwcmltYXJ5JywKICAgICAgICAgICAgICBpY29uVHlwZTogJ3BlbmNpbCcsCiAgICAgICAgICAgICAgaHJlZjogZ2V0Um9sZU1hbmFnZW1lbnRIcmVmKCdlZGl0Jywgcm9sZS5uYW1lKQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBhdmFpbGFibGU6IGZ1bmN0aW9uIGF2YWlsYWJsZShyb2xlKSB7CiAgICAgICAgICAgIHJldHVybiAhKDAsIF9yb2xlX3V0aWxzLmlzUmVzZXJ2ZWRSb2xlKShyb2xlKTsKICAgICAgICAgIH0sCiAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihyb2xlKSB7CiAgICAgICAgICAgIHZhciB0aXRsZSA9IGludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgICAgICAgaWQ6ICd4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LnJvbGVzLmNsb25lUm9sZUFjdGlvbk5hbWUnLAogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ2xvbmUge3JvbGVOYW1lfSIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIHJvbGVOYW1lOiByb2xlLm5hbWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkljb24sIHsKICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IHRpdGxlLAogICAgICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJjbG9uZS1yb2xlLWFjdGlvbi0iLmNvbmNhdChyb2xlLm5hbWUpLAogICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgICAgICBjb2xvcjogJ3ByaW1hcnknLAogICAgICAgICAgICAgIGljb25UeXBlOiAnY29weScsCiAgICAgICAgICAgICAgaHJlZjogZ2V0Um9sZU1hbmFnZW1lbnRIcmVmKCdjbG9uZScsIHJvbGUubmFtZSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfV0KICAgICAgfV07CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnZXRWaXNpYmxlUm9sZXMiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IF90aGlzLnN0YXRlLAogICAgICAgICAgcm9sZXMgPSBfdGhpcyRzdGF0ZS5yb2xlcywKICAgICAgICAgIGZpbHRlciA9IF90aGlzJHN0YXRlLmZpbHRlcjsKICAgICAgcmV0dXJuIGZpbHRlciA/IHJvbGVzLmZpbHRlcihmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICB2YXIgbmFtZSA9IF9yZWYyLm5hbWU7CiAgICAgICAgdmFyIG5vcm1hbGl6ZWQgPSAiIi5jb25jYXQobmFtZSkudG9Mb3dlckNhc2UoKTsKICAgICAgICB2YXIgbm9ybWFsaXplZFF1ZXJ5ID0gZmlsdGVyLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWQuaW5kZXhPZihub3JtYWxpemVkUXVlcnkpICE9PSAtMTsKICAgICAgfSkgOiByb2xlczsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZURlbGV0ZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHNlbGVjdGlvbjogW10sCiAgICAgICAgc2hvd0RlbGV0ZUNvbmZpcm1hdGlvbjogZmFsc2UKICAgICAgfSk7CgogICAgICBfdGhpcy5sb2FkUm9sZXMoKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uQ2FuY2VsRGVsZXRlIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgc2hvd0RlbGV0ZUNvbmZpcm1hdGlvbjogZmFsc2UKICAgICAgfSk7CiAgICB9KTsKCiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgcm9sZXM6IFtdLAogICAgICBzZWxlY3Rpb246IFtdLAogICAgICBmaWx0ZXI6ICcnLAogICAgICBzaG93RGVsZXRlQ29uZmlybWF0aW9uOiBmYWxzZSwKICAgICAgcGVybWlzc2lvbkRlbmllZDogZmFsc2UKICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUm9sZXNHcmlkUGFnZVVJLCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLmxvYWRSb2xlcygpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgcGVybWlzc2lvbkRlbmllZCA9IHRoaXMuc3RhdGUucGVybWlzc2lvbkRlbmllZDsKICAgICAgcmV0dXJuIHBlcm1pc3Npb25EZW5pZWQgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcGVybWlzc2lvbl9kZW5pZWQuUGVybWlzc2lvbkRlbmllZCwgbnVsbCkgOiB0aGlzLmdldFBhZ2VDb250ZW50KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9hZFJvbGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkUm9sZXMoKSB7CiAgICAgIHZhciByb2xlczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBsb2FkUm9sZXMkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX3JvbGVzX2FwaS5Sb2xlc0FwaS5nZXRSb2xlcygpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByb2xlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICByb2xlczogcm9sZXMKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDc7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5nZXQoX2NvbnRleHQudDAsICdib2R5LnN0YXR1c0NvZGUnKSA9PT0gNDAzKSB7CiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbkRlbmllZDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcih0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIGlkOiAneHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5yb2xlcy5mZXRjaGluZ1JvbGVzRXJyb3JNZXNzYWdlJywKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFcnJvciBmZXRjaGluZyByb2xlczoge21lc3NhZ2V9JwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBfbG9kYXNoLmRlZmF1bHQuZ2V0KF9jb250ZXh0LnQwLCAnYm9keS5tZXNzYWdlJywgJycpCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcywgW1swLCA3XV0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlclRvb2xzTGVmdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyVG9vbHNMZWZ0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBzZWxlY3Rpb24gPSB0aGlzLnN0YXRlLnNlbGVjdGlvbjsKCiAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgbnVtU2VsZWN0ZWQgPSBzZWxlY3Rpb24ubGVuZ3RoOwogICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZGVsZXRlUm9sZUJ1dHRvbiIsCiAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMyLnNldFN0YXRlKHsKICAgICAgICAgICAgc2hvd0RlbGV0ZUNvbmZpcm1hdGlvbjogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5yb2xlcy5kZWxldGVTZWxlY3RlZFJvbGVzQnV0dG9uTGFiZWwiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRGVsZXRlIHtudW1TZWxlY3RlZH0gcm9sZXtudW1TZWxlY3RlZCwgcGx1cmFsLCBvbmUgeyB9IG90aGVyIHtzfX0iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgbnVtU2VsZWN0ZWQ6IG51bVNlbGVjdGVkCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUm9sZXNHcmlkUGFnZVVJOwp9KF9yZWFjdDIuQ29tcG9uZW50KTsKCnZhciBSb2xlc0dyaWRQYWdlID0gKDAsIF9yZWFjdC5pbmplY3RJMThuKShSb2xlc0dyaWRQYWdlVUkpOwpleHBvcnRzLlJvbGVzR3JpZFBhZ2UgPSBSb2xlc0dyaWRQYWdlOw=="},null]}