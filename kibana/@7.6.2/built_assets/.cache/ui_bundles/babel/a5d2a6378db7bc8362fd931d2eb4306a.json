{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/jobs/new_job/common/job_creator/util/general.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/jobs/new_job/common/job_creator/util/general.js","mtime":1585205045856},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZ2V0UmljaERldGVjdG9ycyA9IGdldFJpY2hEZXRlY3RvcnM7CmV4cG9ydHMuY3JlYXRlRmllbGRPcHRpb25zID0gY3JlYXRlRmllbGRPcHRpb25zOwpleHBvcnRzLmNyZWF0ZU1sY2F0ZWdvcnlGaWVsZE9wdGlvbiA9IGNyZWF0ZU1sY2F0ZWdvcnlGaWVsZE9wdGlvbjsKZXhwb3J0cy5jcmVhdGVEb2NDb3VudEZpZWxkT3B0aW9uID0gY3JlYXRlRG9jQ291bnRGaWVsZE9wdGlvbjsKZXhwb3J0cy5pc1NwYXJzZURhdGFKb2IgPSBpc1NwYXJzZURhdGFKb2I7CmV4cG9ydHMuY29udmVydFRvTXVsdGlNZXRyaWNKb2IgPSBjb252ZXJ0VG9NdWx0aU1ldHJpY0pvYjsKZXhwb3J0cy5jb252ZXJ0VG9BZHZhbmNlZEpvYiA9IGNvbnZlcnRUb0FkdmFuY2VkSm9iOwpleHBvcnRzLnJlc2V0Sm9iID0gcmVzZXRKb2I7CmV4cG9ydHMuYWR2YW5jZWRTdGFydERhdGFmZWVkID0gYWR2YW5jZWRTdGFydERhdGFmZWVkOwpleHBvcnRzLmFnZ0ZpZWxkUGFpcnNDYW5CZUNoYXJ0ZWQgPSBhZ2dGaWVsZFBhaXJzQ2FuQmVDaGFydGVkOwpleHBvcnRzLmdldEpvYkNyZWF0b3JUaXRsZSA9IGdldEpvYkNyZWF0b3JUaXRsZTsKZXhwb3J0cy5jb2xsZWN0QWdncyA9IGNvbGxlY3RBZ2dzOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX25ld19qb2JfY2FwYWJpbGl0aWVzX3NlcnZpY2UgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi9zZXJ2aWNlcy9uZXdfam9iX2NhcGFiaWxpdGllc19zZXJ2aWNlIik7Cgp2YXIgX2FnZ3JlZ2F0aW9uX3R5cGVzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vY29tbW9uL2NvbnN0YW50cy9hZ2dyZWdhdGlvbl90eXBlcyIpOwoKdmFyIF9maWVsZF90eXBlcyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMvZmllbGRfdHlwZXMiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3BsdWdpbnMvZGF0YS9wdWJsaWMiKTsKCnZhciBfZmllbGRzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vY29tbW9uL3R5cGVzL2ZpZWxkcyIpOwoKdmFyIF9qb2Jfc2VydmljZSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uL3NlcnZpY2VzL2pvYl9zZXJ2aWNlIik7Cgp2YXIgX2luZGV4ID0gcmVxdWlyZSgiLi4vaW5kZXgiKTsKCnZhciBfbmV3X2pvYiA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMvbmV3X2pvYiIpOwoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKdmFyIGdldEZpZWxkQnlJZEZhY3RvcnkgPSBmdW5jdGlvbiBnZXRGaWVsZEJ5SWRGYWN0b3J5KGFkZGl0aW9uYWxGaWVsZHMpIHsKICByZXR1cm4gZnVuY3Rpb24gKGlkKSB7CiAgICB2YXIgZmllbGQgPSBfbmV3X2pvYl9jYXBhYmlsaXRpZXNfc2VydmljZS5uZXdKb2JDYXBzU2VydmljZS5nZXRGaWVsZEJ5SWQoaWQpOyAvLyBpZiBubyBmaWVsZCBjb3VsZCBiZSBmb3VuZCBpdCBtYXkgYmUgYSBwcmV0ZW5kIGZpZWxkLCBsaWtlIG1sY2F0ZWdvcnkgb3IgYSBzY3JpcHQgZmllbGQKCgogICAgaWYgKGZpZWxkID09PSBudWxsKSB7CiAgICAgIGlmIChpZCA9PT0gX2ZpZWxkX3R5cGVzLk1MQ0FURUdPUlkpIHsKICAgICAgICBmaWVsZCA9IF9maWVsZHMubWxDYXRlZ29yeTsKICAgICAgfSBlbHNlIGlmIChhZGRpdGlvbmFsRmllbGRzLmxlbmd0aCkgewogICAgICAgIGZpZWxkID0gYWRkaXRpb25hbEZpZWxkcy5maW5kKGZ1bmN0aW9uIChmKSB7CiAgICAgICAgICByZXR1cm4gZi5pZCA9PT0gaWQ7CiAgICAgICAgfSkgfHwgbnVsbDsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmaWVsZDsKICB9Owp9OyAvLyBwb3B1bGF0ZSB0aGUgZGV0ZWN0b3JzIHdpdGggRmllbGQgYW5kIEFnZyBvYmplY3RzIGxvYWRlZCBmcm9tIHRoZSBqb2IgY2FwYWJpbGl0aWVzIHNlcnZpY2UKCgpmdW5jdGlvbiBnZXRSaWNoRGV0ZWN0b3JzKGpvYiwgZGF0YWZlZWQsIGFkZGl0aW9uYWxGaWVsZHMpIHsKICB2YXIgYWR2YW5jZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogIHZhciBkZXRlY3RvcnMgPSBhZHZhbmNlZCA/IGdldERldGVjdG9yc0FkdmFuY2VkKGpvYiwgZGF0YWZlZWQpIDogZ2V0RGV0ZWN0b3JzKGpvYiwgZGF0YWZlZWQpOwogIHZhciBnZXRGaWVsZEJ5SWQgPSBnZXRGaWVsZEJ5SWRGYWN0b3J5KGFkZGl0aW9uYWxGaWVsZHMpOwogIHJldHVybiBkZXRlY3RvcnMubWFwKGZ1bmN0aW9uIChkKSB7CiAgICB2YXIgZmllbGQgPSBudWxsOwogICAgdmFyIGJ5RmllbGQgPSBudWxsOwogICAgdmFyIG92ZXJGaWVsZCA9IG51bGw7CiAgICB2YXIgcGFydGl0aW9uRmllbGQgPSBudWxsOwoKICAgIGlmIChkLmZpZWxkX25hbWUgIT09IHVuZGVmaW5lZCkgewogICAgICBmaWVsZCA9IGdldEZpZWxkQnlJZChkLmZpZWxkX25hbWUpOwogICAgfQoKICAgIGlmIChkLmJ5X2ZpZWxkX25hbWUgIT09IHVuZGVmaW5lZCkgewogICAgICBieUZpZWxkID0gZ2V0RmllbGRCeUlkKGQuYnlfZmllbGRfbmFtZSk7CiAgICB9CgogICAgaWYgKGQub3Zlcl9maWVsZF9uYW1lICE9PSB1bmRlZmluZWQpIHsKICAgICAgb3ZlckZpZWxkID0gZ2V0RmllbGRCeUlkKGQub3Zlcl9maWVsZF9uYW1lKTsKICAgIH0KCiAgICBpZiAoZC5wYXJ0aXRpb25fZmllbGRfbmFtZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHBhcnRpdGlvbkZpZWxkID0gZ2V0RmllbGRCeUlkKGQucGFydGl0aW9uX2ZpZWxkX25hbWUpOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGFnZzogX25ld19qb2JfY2FwYWJpbGl0aWVzX3NlcnZpY2UubmV3Sm9iQ2Fwc1NlcnZpY2UuZ2V0QWdnQnlJZChkLmZ1bmN0aW9uKSwKICAgICAgZmllbGQ6IGZpZWxkLAogICAgICBieUZpZWxkOiBieUZpZWxkLAogICAgICBvdmVyRmllbGQ6IG92ZXJGaWVsZCwKICAgICAgcGFydGl0aW9uRmllbGQ6IHBhcnRpdGlvbkZpZWxkLAogICAgICBleGNsdWRlRnJlcXVlbnQ6IGQuZXhjbHVkZV9mcmVxdWVudCB8fCBudWxsLAogICAgICBkZXNjcmlwdGlvbjogZC5kZXRlY3Rvcl9kZXNjcmlwdGlvbiB8fCBudWxsCiAgICB9OwogIH0pOwp9CgpmdW5jdGlvbiBjcmVhdGVGaWVsZE9wdGlvbnMoZmllbGRzLCBhZGRpdGlvbmFsRmllbGRzKSB7CiAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZmllbGRzLmZpbHRlcihmdW5jdGlvbiAoZikgewogICAgcmV0dXJuIGYuaWQgIT09IF9maWVsZHMuRVZFTlRfUkFURV9GSUVMRF9JRDsKICB9KS5tYXAoZnVuY3Rpb24gKGYpIHsKICAgIHJldHVybiB7CiAgICAgIGxhYmVsOiBmLm5hbWUKICAgIH07CiAgfSkpLCBfdG9Db25zdW1hYmxlQXJyYXkoYWRkaXRpb25hbEZpZWxkcy5maWx0ZXIoZnVuY3Rpb24gKGYpIHsKICAgIHJldHVybiBmaWVsZHMuc29tZShmdW5jdGlvbiAoZjIpIHsKICAgICAgcmV0dXJuIGYyLmlkID09PSBmLmlkOwogICAgfSkgPT09IGZhbHNlOwogIH0pLm1hcChmdW5jdGlvbiAoZikgewogICAgcmV0dXJuIHsKICAgICAgbGFiZWw6IGYuaWQKICAgIH07CiAgfSkpKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gYS5sYWJlbC5sb2NhbGVDb21wYXJlKGIubGFiZWwpOwogIH0pOwp9CgpmdW5jdGlvbiBjcmVhdGVNbGNhdGVnb3J5RmllbGRPcHRpb24oY2F0ZWdvcml6YXRpb25GaWVsZE5hbWUpIHsKICBpZiAoY2F0ZWdvcml6YXRpb25GaWVsZE5hbWUgPT09IG51bGwpIHsKICAgIHJldHVybiBbXTsKICB9CgogIHJldHVybiBbewogICAgbGFiZWw6IF9maWVsZF90eXBlcy5NTENBVEVHT1JZCiAgfV07Cn0KCmZ1bmN0aW9uIGNyZWF0ZURvY0NvdW50RmllbGRPcHRpb24odXNpbmdBZ2dyZWdhdGlvbnMpIHsKICByZXR1cm4gdXNpbmdBZ2dyZWdhdGlvbnMgPyBbewogICAgbGFiZWw6IF9maWVsZF90eXBlcy5ET0NfQ09VTlQKICB9XSA6IFtdOwp9CgpmdW5jdGlvbiBnZXREZXRlY3RvcnNBZHZhbmNlZChqb2IsIGRhdGFmZWVkKSB7CiAgcmV0dXJuIHByb2Nlc3NGaWVsZGxlc3NBZ2dzKGpvYi5hbmFseXNpc19jb25maWcuZGV0ZWN0b3JzKTsKfQoKZnVuY3Rpb24gZ2V0RGV0ZWN0b3JzKGpvYiwgZGF0YWZlZWQpIHsKICB2YXIgZGV0ZWN0b3JzID0gam9iLmFuYWx5c2lzX2NvbmZpZy5kZXRlY3RvcnM7CiAgdmFyIHNwYXJzZURhdGEgPSBpc1NwYXJzZURhdGFKb2Ioam9iLCBkYXRhZmVlZCk7IC8vIGlmIGFnZ3JlZ2F0aW9ucyBoYXZlIGJlZW4gdXNlZCBpbiBhIHNpbmdsZSBtZXRyaWMgam9iIGFuZCBhIGRpc3RpbmN0IGNvdW50IGRldGVjdG9yCiAgLy8gd2FzIHVzZWQsIHdlIG5lZWQgdG8gcmVidWlsZCB0aGUgZGV0ZWN0b3IuCgogIGlmIChkYXRhZmVlZC5hZ2dyZWdhdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBqb2IuYW5hbHlzaXNfY29uZmlnLmRldGVjdG9yc1swXS5mdW5jdGlvbiA9PT0gX2FnZ3JlZ2F0aW9uX3R5cGVzLk1MX0pPQl9BR0dSRUdBVElPTi5OT05fWkVST19DT1VOVCAmJiBzcGFyc2VEYXRhID09PSBmYWxzZSkgewogICAgdmFyIF9kYXRhZmVlZCRhZ2dyZWdhdGlvbiwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uMiwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uMywgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uNCwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uNTsgLy8gZGlzdGluY3QgY291bnQgZGV0ZWN0b3IsIGZpZWxkIGhhcyBiZWVuIHJlbW92ZWQuCiAgICAvLyBkZXRlcm1pbmUgZmllbGQgZnJvbSBkYXRhZmVlZCBhZ2dyZWdhdGlvbnMKCgogICAgdmFyIGZpZWxkID0gZGF0YWZlZWQgPT09IG51bGwgfHwgZGF0YWZlZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF0YWZlZWQkYWdncmVnYXRpb24gPSBkYXRhZmVlZC5hZ2dyZWdhdGlvbnMpID09PSBudWxsIHx8IF9kYXRhZmVlZCRhZ2dyZWdhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXRhZmVlZCRhZ2dyZWdhdGlvbjIgPSBfZGF0YWZlZWQkYWdncmVnYXRpb24uYnVja2V0cykgPT09IG51bGwgfHwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXRhZmVlZCRhZ2dyZWdhdGlvbjMgPSBfZGF0YWZlZWQkYWdncmVnYXRpb24yLmFnZ3JlZ2F0aW9ucykgPT09IG51bGwgfHwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXRhZmVlZCRhZ2dyZWdhdGlvbjQgPSBfZGF0YWZlZWQkYWdncmVnYXRpb24zLmRjX3JlZ2lvbikgPT09IG51bGwgfHwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXRhZmVlZCRhZ2dyZWdhdGlvbjUgPSBfZGF0YWZlZWQkYWdncmVnYXRpb240LmNhcmRpbmFsaXR5KSA9PT0gbnVsbCB8fCBfZGF0YWZlZWQkYWdncmVnYXRpb241ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF0YWZlZWQkYWdncmVnYXRpb241LmZpZWxkOwoKICAgIGlmIChmaWVsZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGRldGVjdG9ycyA9IFt7CiAgICAgICAgZnVuY3Rpb246IF9hZ2dyZWdhdGlvbl90eXBlcy5NTF9KT0JfQUdHUkVHQVRJT04uRElTVElOQ1RfQ09VTlQsCiAgICAgICAgZmllbGRfbmFtZTogZmllbGQKICAgICAgfV07CiAgICB9CiAgfSBlbHNlIHsKICAgIC8vIGFsbCBvdGhlciBkZXRlY3RvcnMuCiAgICBkZXRlY3RvcnMgPSBwcm9jZXNzRmllbGRsZXNzQWdncyhkZXRlY3RvcnMpOwogICAgZGV0ZWN0b3JzID0gZGV0ZWN0b3JzLm1hcChmdW5jdGlvbiAoZCkgewogICAgICBzd2l0Y2ggKGQuZnVuY3Rpb24pIHsKICAgICAgICAvLyBpZiBzcGFyc2UgZGF0YSBmdW5jdGlvbnMgd2VyZSB1c2VkLCByZXBsYWNlIHRoZW0gd2l0aCB0aGVpciBub24tc3BhcnNlIHZlcnNpb25zCiAgICAgICAgLy8gdGhlIHNwYXJzZSBkYXRhIGZsYWcgaGFzIGFscmVhZHkgYmVlbiBkZXRlcm1pbmVkIGFuZCBzZXQsIHNvIHRoaXMgaW5mb3JtYXRpb24gaXMgbm90IGJlaW5nIGxvc3QuCiAgICAgICAgY2FzZSBfYWdncmVnYXRpb25fdHlwZXMuTUxfSk9CX0FHR1JFR0FUSU9OLk5PTl9aRVJPX0NPVU5UOgogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGQsIHsKICAgICAgICAgICAgZmllbGRfbmFtZTogX2ZpZWxkcy5FVkVOVF9SQVRFX0ZJRUxEX0lELAogICAgICAgICAgICBmdW5jdGlvbjogX2FnZ3JlZ2F0aW9uX3R5cGVzLk1MX0pPQl9BR0dSRUdBVElPTi5DT1VOVAogICAgICAgICAgfSk7CgogICAgICAgIGNhc2UgX2FnZ3JlZ2F0aW9uX3R5cGVzLk1MX0pPQl9BR0dSRUdBVElPTi5ISUdIX05PTl9aRVJPX0NPVU5UOgogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGQsIHsKICAgICAgICAgICAgZmllbGRfbmFtZTogX2ZpZWxkcy5FVkVOVF9SQVRFX0ZJRUxEX0lELAogICAgICAgICAgICBmdW5jdGlvbjogX2FnZ3JlZ2F0aW9uX3R5cGVzLk1MX0pPQl9BR0dSRUdBVElPTi5ISUdIX0NPVU5UCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSBfYWdncmVnYXRpb25fdHlwZXMuTUxfSk9CX0FHR1JFR0FUSU9OLkxPV19OT05fWkVST19DT1VOVDoKICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBkLCB7CiAgICAgICAgICAgIGZpZWxkX25hbWU6IF9maWVsZHMuRVZFTlRfUkFURV9GSUVMRF9JRCwKICAgICAgICAgICAgZnVuY3Rpb246IF9hZ2dyZWdhdGlvbl90eXBlcy5NTF9KT0JfQUdHUkVHQVRJT04uTE9XX0NPVU5UCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSBfYWdncmVnYXRpb25fdHlwZXMuTUxfSk9CX0FHR1JFR0FUSU9OLk5PTl9OVUxMX1NVTToKICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBkLCB7CiAgICAgICAgICAgIGZ1bmN0aW9uOiBfYWdncmVnYXRpb25fdHlwZXMuTUxfSk9CX0FHR1JFR0FUSU9OLlNVTQogICAgICAgICAgfSk7CgogICAgICAgIGNhc2UgX2FnZ3JlZ2F0aW9uX3R5cGVzLk1MX0pPQl9BR0dSRUdBVElPTi5ISUdIX05PTl9OVUxMX1NVTToKICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBkLCB7CiAgICAgICAgICAgIGZ1bmN0aW9uOiBfYWdncmVnYXRpb25fdHlwZXMuTUxfSk9CX0FHR1JFR0FUSU9OLkhJR0hfU1VNCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSBfYWdncmVnYXRpb25fdHlwZXMuTUxfSk9CX0FHR1JFR0FUSU9OLkxPV19OT05fTlVMTF9TVU06CiAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgZCwgewogICAgICAgICAgICBmdW5jdGlvbjogX2FnZ3JlZ2F0aW9uX3R5cGVzLk1MX0pPQl9BR0dSRUdBVElPTi5MT1dfU1VNCiAgICAgICAgICB9KTsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBkOwogICAgICB9CiAgICB9KTsKICB9CgogIHJldHVybiBkZXRlY3RvcnM7Cn0gLy8gaWYgYSBmaWVsZGxlc3MgZnVuY3Rpb24gaXMgdXNlZCwgYWRkIEVWRU5UX1JBVEVfRklFTERfSUQgYXMgaXRzIGZpZWxkCgoKZnVuY3Rpb24gcHJvY2Vzc0ZpZWxkbGVzc0FnZ3MoZGV0ZWN0b3JzKSB7CiAgcmV0dXJuIGRldGVjdG9ycy5tYXAoZnVuY3Rpb24gKGQpIHsKICAgIHN3aXRjaCAoZC5mdW5jdGlvbikgewogICAgICBjYXNlIF9hZ2dyZWdhdGlvbl90eXBlcy5NTF9KT0JfQUdHUkVHQVRJT04uQ09VTlQ6CiAgICAgIGNhc2UgX2FnZ3JlZ2F0aW9uX3R5cGVzLk1MX0pPQl9BR0dSRUdBVElPTi5ISUdIX0NPVU5UOgogICAgICBjYXNlIF9hZ2dyZWdhdGlvbl90eXBlcy5NTF9KT0JfQUdHUkVHQVRJT04uTE9XX0NPVU5UOgogICAgICBjYXNlIF9hZ2dyZWdhdGlvbl90eXBlcy5NTF9KT0JfQUdHUkVHQVRJT04uTk9OX1pFUk9fQ09VTlQ6CiAgICAgIGNhc2UgX2FnZ3JlZ2F0aW9uX3R5cGVzLk1MX0pPQl9BR0dSRUdBVElPTi5ISUdIX05PTl9aRVJPX0NPVU5UOgogICAgICBjYXNlIF9hZ2dyZWdhdGlvbl90eXBlcy5NTF9KT0JfQUdHUkVHQVRJT04uTE9XX05PTl9aRVJPX0NPVU5UOgogICAgICBjYXNlIF9hZ2dyZWdhdGlvbl90eXBlcy5NTF9KT0JfQUdHUkVHQVRJT04uUkFSRToKICAgICAgY2FzZSBfYWdncmVnYXRpb25fdHlwZXMuTUxfSk9CX0FHR1JFR0FUSU9OLkZSRVFfUkFSRToKICAgICAgY2FzZSBfYWdncmVnYXRpb25fdHlwZXMuTUxfSk9CX0FHR1JFR0FUSU9OLlRJTUVfT0ZfREFZOgogICAgICBjYXNlIF9hZ2dyZWdhdGlvbl90eXBlcy5NTF9KT0JfQUdHUkVHQVRJT04uVElNRV9PRl9XRUVLOgogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBkLCB7CiAgICAgICAgICBmaWVsZF9uYW1lOiBfZmllbGRzLkVWRU5UX1JBVEVfRklFTERfSUQKICAgICAgICB9KTsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGQ7CiAgICB9CiAgfSk7Cn0gLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGpvYiBoYXMgYmVlbiBjb25maWd1cmVkIHRvIHJ1biBvbiBzcGFyc2UgZGF0YQovLyBieSBsb29raW5nIHRvIHNlZSB3aGV0aGVyIHRoZSBkYXRhZmVlZCBjb250YWlucyBhIGRjX3JlZ2lvbiBmaWVsZCBpbiBhbiBhZ2dyZWdhdGlvbgovLyBpZiBpdCBkb2VzLCBpdCBpcyBhIGRpc3RpbmN0IGNvdW50IHNpbmdsZSBtZXRyaWMgam9iIGFuZCBubyBhIHNwYXJzZSBkYXRhIGpvYi4KLy8gdGhpcyBjaGVjayBpcyBuZWVkZWQgYmVjYXVzZSBkaXN0aW5jdCBjb3VudCBqb2JzIGFsc28gdXNlIE5PTl9aRVJPX0NPVU5UCgoKZnVuY3Rpb24gaXNTcGFyc2VEYXRhSm9iKGpvYiwgZGF0YWZlZWQpIHsKICB2YXIgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uNiwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uNywgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uOCwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uOSwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uMTA7CgogIHZhciBkZXRlY3RvcnMgPSBqb2IuYW5hbHlzaXNfY29uZmlnLmRldGVjdG9yczsKICB2YXIgZGlzdGluY3RDb3VudEZpZWxkID0gZGF0YWZlZWQgPT09IG51bGwgfHwgZGF0YWZlZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF0YWZlZWQkYWdncmVnYXRpb242ID0gZGF0YWZlZWQuYWdncmVnYXRpb25zKSA9PT0gbnVsbCB8fCBfZGF0YWZlZWQkYWdncmVnYXRpb242ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uNyA9IF9kYXRhZmVlZCRhZ2dyZWdhdGlvbjYuYnVja2V0cykgPT09IG51bGwgfHwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXRhZmVlZCRhZ2dyZWdhdGlvbjggPSBfZGF0YWZlZWQkYWdncmVnYXRpb243LmFnZ3JlZ2F0aW9ucykgPT09IG51bGwgfHwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXRhZmVlZCRhZ2dyZWdhdGlvbjkgPSBfZGF0YWZlZWQkYWdncmVnYXRpb244LmRjX3JlZ2lvbikgPT09IG51bGwgfHwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXRhZmVlZCRhZ2dyZWdhdGlvbjEwID0gX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uOS5jYXJkaW5hbGl0eSkgPT09IG51bGwgfHwgX2RhdGFmZWVkJGFnZ3JlZ2F0aW9uMTAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXRhZmVlZCRhZ2dyZWdhdGlvbjEwLmZpZWxkOyAvLyBpZiBkaXN0aW5jdENvdW50RmllbGQgaXMgdW5kZWZpbmVkLCBhbmQgYW55IGRldGVjdG9ycyBjb250YWluIGEgc3BhcnNlIGRhdGEgZnVuY3Rpb24KICAvLyByZXR1cm4gdHJ1ZQoKICBpZiAoZGlzdGluY3RDb3VudEZpZWxkID09PSB1bmRlZmluZWQpIHsKICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlOwogICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkOwoKICAgIHRyeSB7CiAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IGRldGVjdG9yc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHsKICAgICAgICB2YXIgZGV0ZWN0b3IgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgaWYgKF9hZ2dyZWdhdGlvbl90eXBlcy5TUEFSU0VfREFUQV9BR0dSRUdBVElPTlMuaW5jbHVkZXMoZGV0ZWN0b3IuZnVuY3Rpb24pKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7CiAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyOwogICAgfSBmaW5hbGx5IHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgICAgfQogICAgICB9IGZpbmFsbHkgewogICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIHN0YXNoQ29tYmluZWRKb2Ioam9iQ3JlYXRvcikgewogIHZhciBza2lwVGltZVJhbmdlU3RlcCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgdmFyIGluY2x1ZGVUaW1lUmFuZ2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwoKICB2YXIgY29tYmluZWRKb2IgPSBfb2JqZWN0U3ByZWFkKHt9LCBqb2JDcmVhdG9yLmpvYkNvbmZpZywgewogICAgZGF0YWZlZWRfY29uZmlnOiBqb2JDcmVhdG9yLmRhdGFmZWVkQ29uZmlnCiAgfSk7CgogIF9qb2Jfc2VydmljZS5tbEpvYlNlcnZpY2UudGVtcEpvYkNsb25pbmdPYmplY3RzLmpvYiA9IGNvbWJpbmVkSm9iOyAvLyBza2lwIG92ZXIgdGhlIHRpbWUgcGlja2VyIHN0ZXAgb2YgdGhlIHdpemFyZAoKICBfam9iX3NlcnZpY2UubWxKb2JTZXJ2aWNlLnRlbXBKb2JDbG9uaW5nT2JqZWN0cy5za2lwVGltZVJhbmdlU3RlcCA9IHNraXBUaW1lUmFuZ2VTdGVwOwoKICBpZiAoaW5jbHVkZVRpbWVSYW5nZSA9PT0gdHJ1ZSkgewogICAgLy8gYXV0byBzZWxlY3QgdGhlIHN0YXJ0IGFuZCBlbmQgZGF0ZXMgb2YgdGhlIHRpbWUgcGlja2VyCiAgICBfam9iX3NlcnZpY2UubWxKb2JTZXJ2aWNlLnRlbXBKb2JDbG9uaW5nT2JqZWN0cy5zdGFydCA9IGpvYkNyZWF0b3Iuc3RhcnQ7CiAgICBfam9iX3NlcnZpY2UubWxKb2JTZXJ2aWNlLnRlbXBKb2JDbG9uaW5nT2JqZWN0cy5lbmQgPSBqb2JDcmVhdG9yLmVuZDsKICB9CgogIF9qb2Jfc2VydmljZS5tbEpvYlNlcnZpY2UudGVtcEpvYkNsb25pbmdPYmplY3RzLmNhbGVuZGFycyA9IGpvYkNyZWF0b3IuY2FsZW5kYXJzOwp9CgpmdW5jdGlvbiBjb252ZXJ0VG9NdWx0aU1ldHJpY0pvYihqb2JDcmVhdG9yKSB7CiAgam9iQ3JlYXRvci5jcmVhdGVkQnkgPSBfbmV3X2pvYi5DUkVBVEVEX0JZX0xBQkVMLk1VTFRJX01FVFJJQzsKICBqb2JDcmVhdG9yLm1vZGVsUGxvdCA9IGZhbHNlOwogIHN0YXNoQ29tYmluZWRKb2Ioam9iQ3JlYXRvciwgdHJ1ZSwgdHJ1ZSk7CiAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKF9uZXdfam9iLkpPQl9UWVBFLlNJTkdMRV9NRVRSSUMsIF9uZXdfam9iLkpPQl9UWVBFLk1VTFRJX01FVFJJQyk7Cn0KCmZ1bmN0aW9uIGNvbnZlcnRUb0FkdmFuY2VkSm9iKGpvYkNyZWF0b3IpIHsKICBqb2JDcmVhdG9yLmNyZWF0ZWRCeSA9IG51bGw7CiAgc3Rhc2hDb21iaW5lZEpvYihqb2JDcmVhdG9yLCB0cnVlLCB0cnVlKTsKICB2YXIgam9iVHlwZSA9IF9uZXdfam9iLkpPQl9UWVBFLlNJTkdMRV9NRVRSSUM7CgogIGlmICgoMCwgX2luZGV4LmlzTXVsdGlNZXRyaWNKb2JDcmVhdG9yKShqb2JDcmVhdG9yKSkgewogICAgam9iVHlwZSA9IF9uZXdfam9iLkpPQl9UWVBFLk1VTFRJX01FVFJJQzsKICB9IGVsc2UgaWYgKCgwLCBfaW5kZXguaXNQb3B1bGF0aW9uSm9iQ3JlYXRvcikoam9iQ3JlYXRvcikpIHsKICAgIGpvYlR5cGUgPSBfbmV3X2pvYi5KT0JfVFlQRS5QT1BVTEFUSU9OOwogIH0gZWxzZSBpZiAoKDAsIF9pbmRleC5pc0NhdGVnb3JpemF0aW9uSm9iQ3JlYXRvcikoam9iQ3JlYXRvcikpIHsKICAgIGpvYlR5cGUgPSBfbmV3X2pvYi5KT0JfVFlQRS5DQVRFR09SSVpBVElPTjsKICB9CgogIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZShqb2JUeXBlLCBfbmV3X2pvYi5KT0JfVFlQRS5BRFZBTkNFRCk7Cn0KCmZ1bmN0aW9uIHJlc2V0Sm9iKGpvYkNyZWF0b3IpIHsKICBqb2JDcmVhdG9yLmpvYklkID0gJyc7CiAgc3Rhc2hDb21iaW5lZEpvYihqb2JDcmVhdG9yLCB0cnVlLCB0cnVlKTsKICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL2pvYnMvbmV3X2pvYic7Cn0KCmZ1bmN0aW9uIGFkdmFuY2VkU3RhcnREYXRhZmVlZChqb2JDcmVhdG9yKSB7CiAgc3Rhc2hDb21iaW5lZEpvYihqb2JDcmVhdG9yLCBmYWxzZSwgZmFsc2UpOwogIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvam9icyc7Cn0KCmZ1bmN0aW9uIGFnZ0ZpZWxkUGFpcnNDYW5CZUNoYXJ0ZWQoYWZzKSB7CiAgcmV0dXJuIGFmcy5zb21lKGZ1bmN0aW9uIChhKSB7CiAgICByZXR1cm4gYS5hZ2cuZHNsTmFtZSA9PT0gbnVsbDsKICB9KSA9PT0gZmFsc2U7Cn0KCmZ1bmN0aW9uIGdldEpvYkNyZWF0b3JUaXRsZShqb2JDcmVhdG9yKSB7CiAgc3dpdGNoIChqb2JDcmVhdG9yLnR5cGUpIHsKICAgIGNhc2UgX25ld19qb2IuSk9CX1RZUEUuU0lOR0xFX01FVFJJQzoKICAgICAgcmV0dXJuIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5uZXdKb2Iud2l6YXJkLmpvYkNyZWF0b3JUaXRsZS5zaW5nbGVNZXRyaWMnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaW5nbGUgbWV0cmljJwogICAgICB9KTsKCiAgICBjYXNlIF9uZXdfam9iLkpPQl9UWVBFLk1VTFRJX01FVFJJQzoKICAgICAgcmV0dXJuIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5uZXdKb2Iud2l6YXJkLmpvYkNyZWF0b3JUaXRsZS5tdWx0aU1ldHJpYycsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ011bHRpIG1ldHJpYycKICAgICAgfSk7CgogICAgY2FzZSBfbmV3X2pvYi5KT0JfVFlQRS5QT1BVTEFUSU9OOgogICAgICByZXR1cm4gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLm5ld0pvYi53aXphcmQuam9iQ3JlYXRvclRpdGxlLnBvcHVsYXRpb24nLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQb3B1bGF0aW9uJwogICAgICB9KTsKCiAgICBjYXNlIF9uZXdfam9iLkpPQl9UWVBFLkFEVkFOQ0VEOgogICAgICByZXR1cm4gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLm5ld0pvYi53aXphcmQuam9iQ3JlYXRvclRpdGxlLmFkdmFuY2VkJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWR2YW5jZWQnCiAgICAgIH0pOwoKICAgIGNhc2UgX25ld19qb2IuSk9CX1RZUEUuQ0FURUdPUklaQVRJT046CiAgICAgIHJldHVybiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwubmV3Sm9iLndpemFyZC5qb2JDcmVhdG9yVGl0bGUuY2F0ZWdvcml6YXRpb24nLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDYXRlZ29yaXphdGlvbicKICAgICAgfSk7CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuICcnOwogIH0KfSAvLyByZWN1cnNlIHRocm91Z2ggYSBkYXRhZmVlZCBhZ2dyZWdhdGlvbiBvYmplY3QsCi8vIGFkZGluZyB0b3AgbGV2ZWwga2V5cyBmcm9tIGVhY2ggbmVzdGVkIGFnZyB0byBhbiBhcnJheQovLyBvZiBmaWVsZHMKCgpmdW5jdGlvbiBjb2xsZWN0QWdncyhvLCBhZ2dGaWVsZHMpIHsKICBmb3IgKHZhciBpIGluIG8pIHsKICAgIGlmIChvW2ldICE9PSBudWxsICYmIF90eXBlb2Yob1tpXSkgPT09ICdvYmplY3QnKSB7CiAgICAgIGlmIChpID09PSAnYWdncmVnYXRpb25zJyB8fCBpID09PSAnYWdncycpIHsKICAgICAgICBPYmplY3Qua2V5cyhvW2ldKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7CiAgICAgICAgICBpZiAoayAhPT0gJ2FnZ3JlZ2F0aW9ucycgJiYgayAhPT0gJ2FnZ3MnKSB7CiAgICAgICAgICAgIGFnZ0ZpZWxkcy5wdXNoKHsKICAgICAgICAgICAgICBpZDogaywKICAgICAgICAgICAgICBuYW1lOiBrLAogICAgICAgICAgICAgIHR5cGU6IF9wdWJsaWMuRVNfRklFTERfVFlQRVMuS0VZV09SRCwKICAgICAgICAgICAgICBhZ2dyZWdhdGFibGU6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGNvbGxlY3RBZ2dzKG9baV0sIGFnZ0ZpZWxkcyk7CiAgICB9CiAgfQp9"},null]}