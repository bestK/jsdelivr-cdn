{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/canvas/public/components/sidebar_header/sidebar_header.js","dependencies":[{"path":"x-pack/legacy/plugins/canvas/public/components/sidebar_header/sidebar_header.js","mtime":1585205043697},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuU2lkZWJhckhlYWRlciA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcHJvcFR5cGVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJwcm9wLXR5cGVzIikpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfcG9wb3ZlciA9IHJlcXVpcmUoIi4uL3BvcG92ZXIiKTsKCnZhciBfY3VzdG9tX2VsZW1lbnRfbW9kYWwgPSByZXF1aXJlKCIuLi9jdXN0b21fZWxlbWVudF9tb2RhbCIpOwoKdmFyIF90b29sX3RpcF9zaG9ydGN1dCA9IHJlcXVpcmUoIi4uL3Rvb2xfdGlwX3Nob3J0Y3V0LyIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiLi4vLi4vLi4vaTE4biIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogIGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiKSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0gZWxzZSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfQoKICByZXR1cm4gX3R5cGVvZihvYmopOwp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsKICBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7CiAgICByZXR1cm4gY2FsbDsKICB9CgogIHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOwp9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogIF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOwogIH07CiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsKfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7CiAgaWYgKHNlbGYgPT09IHZvaWQgMCkgewogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICB9CgogIHJldHVybiBzZWxmOwp9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9CiAgfSk7CiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7Cn0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgICBvLl9fcHJvdG9fXyA9IHA7CiAgICByZXR1cm4gbzsKICB9OwoKICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIHRvcEJvcmRlckNsYXNzTmFtZSA9ICdjYW52YXNDb250ZXh0TWVudS0tdG9wQm9yZGVyJzsKdmFyIHN0cmluZ3MgPSBfaTE4bi5Db21wb25lbnRTdHJpbmdzLlNpZGViYXJIZWFkZXI7Cgp2YXIgc2hvcnRjdXRIZWxwID0gX2kxOG4uU2hvcnRjdXRTdHJpbmdzLmdldFNob3J0Y3V0SGVscCgpOwoKdmFyIGNvbnRleHRNZW51QnV0dG9uID0gZnVuY3Rpb24gY29udGV4dE1lbnVCdXR0b24oaGFuZGxlQ2xpY2spIHsKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkljb24sIHsKICAgIGNvbG9yOiAidGV4dCIsCiAgICBpY29uVHlwZTogImJveGVzVmVydGljYWwiLAogICAgb25DbGljazogaGFuZGxlQ2xpY2ssCiAgICAiYXJpYS1sYWJlbCI6IHN0cmluZ3MuZ2V0Q29udGV4dE1lbnVUaXRsZSgpCiAgfSk7Cn07Cgp2YXIgU2lkZWJhckhlYWRlciA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoU2lkZWJhckhlYWRlciwgX0NvbXBvbmVudCk7CgogIGZ1bmN0aW9uIFNpZGViYXJIZWFkZXIoKSB7CiAgICB2YXIgX2dldFByb3RvdHlwZU9mMjsKCiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNpZGViYXJIZWFkZXIpOwoKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgfQoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9nZXRQcm90b3R5cGVPZjIgPSBfZ2V0UHJvdG90eXBlT2YoU2lkZWJhckhlYWRlcikpLmNhbGwuYXBwbHkoX2dldFByb3RvdHlwZU9mMiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInN0YXRlIiwgewogICAgICBpc01vZGFsVmlzaWJsZTogZmFsc2UKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9pc01vdW50ZWQiLCBmYWxzZSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX3Nob3dNb2RhbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLl9pc01vdW50ZWQgJiYgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGlzTW9kYWxWaXNpYmxlOiB0cnVlCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2hpZGVNb2RhbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLl9pc01vdW50ZWQgJiYgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGlzTW9kYWxWaXNpYmxlOiBmYWxzZQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9yZW5kZXJMYXlvdXRDb250cm9scyIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBicmluZ1RvRnJvbnQgPSBfdGhpcyRwcm9wcy5icmluZ1RvRnJvbnQsCiAgICAgICAgICBicmluZ0ZvcndhcmQgPSBfdGhpcyRwcm9wcy5icmluZ0ZvcndhcmQsCiAgICAgICAgICBzZW5kQmFja3dhcmQgPSBfdGhpcyRwcm9wcy5zZW5kQmFja3dhcmQsCiAgICAgICAgICBzZW5kVG9CYWNrID0gX3RoaXMkcHJvcHMuc2VuZFRvQmFjazsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVG9vbFRpcCwgewogICAgICAgIHBvc2l0aW9uOiAiYm90dG9tIiwKICAgICAgICBjb250ZW50OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgc2hvcnRjdXRIZWxwLkJSSU5HX1RPX0ZST05ULCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF90b29sX3RpcF9zaG9ydGN1dC5Ub29sVGlwU2hvcnRjdXQsIHsKICAgICAgICAgIG5hbWVzcGFjZTogIkVMRU1FTlQiLAogICAgICAgICAgYWN0aW9uOiAiQlJJTkdfVE9fRlJPTlQiCiAgICAgICAgfSkpCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b25JY29uLCB7CiAgICAgICAgY29sb3I6ICJ0ZXh0IiwKICAgICAgICBpY29uVHlwZTogInNvcnRVcCIsCiAgICAgICAgb25DbGljazogYnJpbmdUb0Zyb250LAogICAgICAgICJhcmlhLWxhYmVsIjogc3RyaW5ncy5nZXRCcmluZ1RvRnJvbnRBcmlhTGFiZWwoKQogICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVG9vbFRpcCwgewogICAgICAgIHBvc2l0aW9uOiAiYm90dG9tIiwKICAgICAgICBjb250ZW50OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgc2hvcnRjdXRIZWxwLkJSSU5HX0ZPUldBUkQsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3Rvb2xfdGlwX3Nob3J0Y3V0LlRvb2xUaXBTaG9ydGN1dCwgewogICAgICAgICAgbmFtZXNwYWNlOiAiRUxFTUVOVCIsCiAgICAgICAgICBhY3Rpb246ICJCUklOR19GT1JXQVJEIgogICAgICAgIH0pKQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uSWNvbiwgewogICAgICAgIGNvbG9yOiAidGV4dCIsCiAgICAgICAgaWNvblR5cGU6ICJhcnJvd1VwIiwKICAgICAgICBvbkNsaWNrOiBicmluZ0ZvcndhcmQsCiAgICAgICAgImFyaWEtbGFiZWwiOiBzdHJpbmdzLmdldEJyaW5nRm9yd2FyZEFyaWFMYWJlbCgpCiAgICAgIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUb29sVGlwLCB7CiAgICAgICAgcG9zaXRpb246ICJib3R0b20iLAogICAgICAgIGNvbnRlbnQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCBzaG9ydGN1dEhlbHAuU0VORF9CQUNLV0FSRCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdG9vbF90aXBfc2hvcnRjdXQuVG9vbFRpcFNob3J0Y3V0LCB7CiAgICAgICAgICBuYW1lc3BhY2U6ICJFTEVNRU5UIiwKICAgICAgICAgIGFjdGlvbjogIlNFTkRfQkFDS1dBUkQiCiAgICAgICAgfSkpCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b25JY29uLCB7CiAgICAgICAgY29sb3I6ICJ0ZXh0IiwKICAgICAgICBpY29uVHlwZTogImFycm93RG93biIsCiAgICAgICAgb25DbGljazogc2VuZEJhY2t3YXJkLAogICAgICAgICJhcmlhLWxhYmVsIjogc3RyaW5ncy5nZXRTZW5kQmFja3dhcmRBcmlhTGFiZWwoKQogICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVG9vbFRpcCwgewogICAgICAgIHBvc2l0aW9uOiAiYm90dG9tIiwKICAgICAgICBjb250ZW50OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgc2hvcnRjdXRIZWxwLlNFTkRfVE9fQkFDSywgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdG9vbF90aXBfc2hvcnRjdXQuVG9vbFRpcFNob3J0Y3V0LCB7CiAgICAgICAgICBuYW1lc3BhY2U6ICJFTEVNRU5UIiwKICAgICAgICAgIGFjdGlvbjogIlNFTkRfVE9fQkFDSyIKICAgICAgICB9KSkKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkljb24sIHsKICAgICAgICBjb2xvcjogInRleHQiLAogICAgICAgIGljb25UeXBlOiAic29ydERvd24iLAogICAgICAgIG9uQ2xpY2s6IHNlbmRUb0JhY2ssCiAgICAgICAgImFyaWEtbGFiZWwiOiBzdHJpbmdzLmdldFNlbmRUb0JhY2tBcmlhTGFiZWwoKQogICAgICB9KSkpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9nZXRMYXllck1lbnVJdGVtcyIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLAogICAgICAgICAgYnJpbmdUb0Zyb250ID0gX3RoaXMkcHJvcHMyLmJyaW5nVG9Gcm9udCwKICAgICAgICAgIGJyaW5nRm9yd2FyZCA9IF90aGlzJHByb3BzMi5icmluZ0ZvcndhcmQsCiAgICAgICAgICBzZW5kQmFja3dhcmQgPSBfdGhpcyRwcm9wczIuc2VuZEJhY2t3YXJkLAogICAgICAgICAgc2VuZFRvQmFjayA9IF90aGlzJHByb3BzMi5zZW5kVG9CYWNrOwogICAgICByZXR1cm4gewogICAgICAgIG1lbnVJdGVtOiB7CiAgICAgICAgICBuYW1lOiBzdHJpbmdzLmdldE9yZGVyTWVudUl0ZW1MYWJlbCgpLAogICAgICAgICAgY2xhc3NOYW1lOiB0b3BCb3JkZXJDbGFzc05hbWUsCiAgICAgICAgICBwYW5lbDogMQogICAgICAgIH0sCiAgICAgICAgcGFuZWw6IHsKICAgICAgICAgIGlkOiAxLAogICAgICAgICAgdGl0bGU6IHN0cmluZ3MuZ2V0T3JkZXJNZW51SXRlbUxhYmVsKCksCiAgICAgICAgICBpdGVtczogW3sKICAgICAgICAgICAgbmFtZTogc2hvcnRjdXRIZWxwLkJSSU5HX1RPX0ZST05ULAogICAgICAgICAgICAvLyBUT0RPOiBjaGVjayBhZ2FpbnN0IGN1cnJlbnQgZWxlbWVudCBwb3NpdGlvbiBhbmQgZGlzYWJsZSBpZiBhbHJlYWR5IHRvcCBsYXllcgogICAgICAgICAgICBpY29uOiAnc29ydFVwJywKICAgICAgICAgICAgb25DbGljazogYnJpbmdUb0Zyb250CiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIG5hbWU6IHNob3J0Y3V0SGVscC5CUklOR19UT19GUk9OVCwKICAgICAgICAgICAgLy8gVE9ETzogc2FtZSBhcyBhYm92ZQogICAgICAgICAgICBpY29uOiAnYXJyb3dVcCcsCiAgICAgICAgICAgIG9uQ2xpY2s6IGJyaW5nRm9yd2FyZAogICAgICAgICAgfSwgewogICAgICAgICAgICBuYW1lOiBzaG9ydGN1dEhlbHAuU0VORF9CQUNLV0FSRCwKICAgICAgICAgICAgLy8gVE9ETzogY2hlY2sgYWdhaW5zdCBjdXJyZW50IGVsZW1lbnQgcG9zaXRpb24gYW5kIGRpc2FibGUgaWYgYWxyZWFkeSBib3R0b20gbGF5ZXIKICAgICAgICAgICAgaWNvbjogJ2Fycm93RG93bicsCiAgICAgICAgICAgIG9uQ2xpY2s6IHNlbmRCYWNrd2FyZAogICAgICAgICAgfSwgewogICAgICAgICAgICBuYW1lOiBzaG9ydGN1dEhlbHAuU0VORF9UT19CQUNLLAogICAgICAgICAgICAvLyBUT0RPOiBzYW1lIGFzIGFib3ZlCiAgICAgICAgICAgIGljb246ICdzb3J0RG93bicsCiAgICAgICAgICAgIG9uQ2xpY2s6IHNlbmRUb0JhY2sKICAgICAgICAgIH1dCiAgICAgICAgfQogICAgICB9OwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2dldEFsaWdubWVudE1lbnVJdGVtcyIsIGZ1bmN0aW9uIChjbG9zZSkgewogICAgICB2YXIgX3RoaXMkcHJvcHMzID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBhbGlnbkxlZnQgPSBfdGhpcyRwcm9wczMuYWxpZ25MZWZ0LAogICAgICAgICAgYWxpZ25DZW50ZXIgPSBfdGhpcyRwcm9wczMuYWxpZ25DZW50ZXIsCiAgICAgICAgICBhbGlnblJpZ2h0ID0gX3RoaXMkcHJvcHMzLmFsaWduUmlnaHQsCiAgICAgICAgICBhbGlnblRvcCA9IF90aGlzJHByb3BzMy5hbGlnblRvcCwKICAgICAgICAgIGFsaWduTWlkZGxlID0gX3RoaXMkcHJvcHMzLmFsaWduTWlkZGxlLAogICAgICAgICAgYWxpZ25Cb3R0b20gPSBfdGhpcyRwcm9wczMuYWxpZ25Cb3R0b207CiAgICAgIHJldHVybiB7CiAgICAgICAgbWVudUl0ZW06IHsKICAgICAgICAgIG5hbWU6IHN0cmluZ3MuZ2V0QWxpZ25tZW50TWVudUl0ZW1MYWJlbCgpLAogICAgICAgICAgY2xhc3NOYW1lOiAnY2FudmFzQ29udGV4dE1lbnUnLAogICAgICAgICAgcGFuZWw6IDIKICAgICAgICB9LAogICAgICAgIHBhbmVsOiB7CiAgICAgICAgICBpZDogMiwKICAgICAgICAgIHRpdGxlOiBzdHJpbmdzLmdldEFsaWdubWVudE1lbnVJdGVtTGFiZWwoKSwKICAgICAgICAgIGl0ZW1zOiBbewogICAgICAgICAgICBuYW1lOiBzdHJpbmdzLmdldExlZnRBbGlnbk1lbnVJdGVtTGFiZWwoKSwKICAgICAgICAgICAgaWNvbjogJ2VkaXRvckl0ZW1BbGlnbkxlZnQnLAogICAgICAgICAgICBvbkNsaWNrOiBjbG9zZShhbGlnbkxlZnQpCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIG5hbWU6IHN0cmluZ3MuZ2V0Q2VudGVyQWxpZ25NZW51SXRlbUxhYmVsKCksCiAgICAgICAgICAgIGljb246ICdlZGl0b3JJdGVtQWxpZ25DZW50ZXInLAogICAgICAgICAgICBvbkNsaWNrOiBjbG9zZShhbGlnbkNlbnRlcikKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbmFtZTogc3RyaW5ncy5nZXRSaWdodEFsaWduTWVudUl0ZW1MYWJlbCgpLAogICAgICAgICAgICBpY29uOiAnZWRpdG9ySXRlbUFsaWduUmlnaHQnLAogICAgICAgICAgICBvbkNsaWNrOiBjbG9zZShhbGlnblJpZ2h0KQogICAgICAgICAgfSwgewogICAgICAgICAgICBuYW1lOiBzdHJpbmdzLmdldFRvcEFsaWduTWVudUl0ZW1MYWJlbCgpLAogICAgICAgICAgICBpY29uOiAnZWRpdG9ySXRlbUFsaWduVG9wJywKICAgICAgICAgICAgb25DbGljazogY2xvc2UoYWxpZ25Ub3ApCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIG5hbWU6IHN0cmluZ3MuZ2V0TWlkZGxlQWxpZ25NZW51SXRlbUxhYmVsKCksCiAgICAgICAgICAgIGljb246ICdlZGl0b3JJdGVtQWxpZ25NaWRkbGUnLAogICAgICAgICAgICBvbkNsaWNrOiBjbG9zZShhbGlnbk1pZGRsZSkKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbmFtZTogc3RyaW5ncy5nZXRCb3R0b21BbGlnbk1lbnVJdGVtTGFiZWwoKSwKICAgICAgICAgICAgaWNvbjogJ2VkaXRvckl0ZW1BbGlnbkJvdHRvbScsCiAgICAgICAgICAgIG9uQ2xpY2s6IGNsb3NlKGFsaWduQm90dG9tKQogICAgICAgICAgfV0KICAgICAgICB9CiAgICAgIH07CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfZ2V0RGlzdHJpYnV0aW9uTWVudUl0ZW1zIiwgZnVuY3Rpb24gKGNsb3NlKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczQgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIGRpc3RyaWJ1dGVIb3Jpem9udGFsbHkgPSBfdGhpcyRwcm9wczQuZGlzdHJpYnV0ZUhvcml6b250YWxseSwKICAgICAgICAgIGRpc3RyaWJ1dGVWZXJ0aWNhbGx5ID0gX3RoaXMkcHJvcHM0LmRpc3RyaWJ1dGVWZXJ0aWNhbGx5OwogICAgICByZXR1cm4gewogICAgICAgIG1lbnVJdGVtOiB7CiAgICAgICAgICBuYW1lOiBzdHJpbmdzLmdldERpc3RyaWJ1dGlvbk1lbnVJdGVtTGFiZWwoKSwKICAgICAgICAgIGNsYXNzTmFtZTogJ2NhbnZhc0NvbnRleHRNZW51JywKICAgICAgICAgIHBhbmVsOiAzCiAgICAgICAgfSwKICAgICAgICBwYW5lbDogewogICAgICAgICAgaWQ6IDMsCiAgICAgICAgICB0aXRsZTogc3RyaW5ncy5nZXREaXN0cmlidXRpb25NZW51SXRlbUxhYmVsKCksCiAgICAgICAgICBpdGVtczogW3sKICAgICAgICAgICAgbmFtZTogc3RyaW5ncy5nZXRIb3Jpem9udGFsRGlzdHJpYnV0aW9uTWVudUl0ZW1MYWJlbCgpLAogICAgICAgICAgICBpY29uOiAnZWRpdG9yRGlzdHJpYnV0ZUhvcml6b250YWwnLAogICAgICAgICAgICBvbkNsaWNrOiBjbG9zZShkaXN0cmlidXRlSG9yaXpvbnRhbGx5KQogICAgICAgICAgfSwgewogICAgICAgICAgICBuYW1lOiBzdHJpbmdzLmdldFZlcnRpY2FsRGlzdHJpYnV0aW9uTWVudUl0ZW1MYWJlbCgpLAogICAgICAgICAgICBpY29uOiAnZWRpdG9yRGlzdHJpYnV0ZVZlcnRpY2FsJywKICAgICAgICAgICAgb25DbGljazogY2xvc2UoZGlzdHJpYnV0ZVZlcnRpY2FsbHkpCiAgICAgICAgICB9XQogICAgICAgIH0KICAgICAgfTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9nZXRHcm91cE1lbnVJdGVtcyIsIGZ1bmN0aW9uIChjbG9zZSkgewogICAgICB2YXIgX3RoaXMkcHJvcHM1ID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBncm91cElzU2VsZWN0ZWQgPSBfdGhpcyRwcm9wczUuZ3JvdXBJc1NlbGVjdGVkLAogICAgICAgICAgdW5ncm91cE5vZGVzID0gX3RoaXMkcHJvcHM1LnVuZ3JvdXBOb2RlcywKICAgICAgICAgIGdyb3VwTm9kZXMgPSBfdGhpcyRwcm9wczUuZ3JvdXBOb2RlcywKICAgICAgICAgIHNlbGVjdGVkTm9kZXMgPSBfdGhpcyRwcm9wczUuc2VsZWN0ZWROb2RlczsKICAgICAgcmV0dXJuIGdyb3VwSXNTZWxlY3RlZCA/IFt7CiAgICAgICAgbmFtZTogc3RyaW5ncy5nZXRVbmdyb3VwTWVudUl0ZW1MYWJlbCgpLAogICAgICAgIGNsYXNzTmFtZTogdG9wQm9yZGVyQ2xhc3NOYW1lLAogICAgICAgIG9uQ2xpY2s6IGNsb3NlKHVuZ3JvdXBOb2RlcykKICAgICAgfV0gOiBzZWxlY3RlZE5vZGVzLmxlbmd0aCA+IDEgPyBbewogICAgICAgIG5hbWU6IHN0cmluZ3MuZ2V0R3JvdXBNZW51SXRlbUxhYmVsKCksCiAgICAgICAgY2xhc3NOYW1lOiB0b3BCb3JkZXJDbGFzc05hbWUsCiAgICAgICAgb25DbGljazogY2xvc2UoZ3JvdXBOb2RlcykKICAgICAgfV0gOiBbXTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9nZXRQYW5lbHMiLCBmdW5jdGlvbiAoY2xvc2VQb3BvdmVyKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczYgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIHNob3dMYXllckNvbnRyb2xzID0gX3RoaXMkcHJvcHM2LnNob3dMYXllckNvbnRyb2xzLAogICAgICAgICAgY3V0Tm9kZXMgPSBfdGhpcyRwcm9wczYuY3V0Tm9kZXMsCiAgICAgICAgICBjb3B5Tm9kZXMgPSBfdGhpcyRwcm9wczYuY29weU5vZGVzLAogICAgICAgICAgcGFzdGVOb2RlcyA9IF90aGlzJHByb3BzNi5wYXN0ZU5vZGVzLAogICAgICAgICAgZGVsZXRlTm9kZXMgPSBfdGhpcyRwcm9wczYuZGVsZXRlTm9kZXMsCiAgICAgICAgICBjbG9uZU5vZGVzID0gX3RoaXMkcHJvcHM2LmNsb25lTm9kZXM7IC8vIGNsb3NlcyBwb3BvdmVyIGFmdGVyIGludm9raW5nIGZuCgogICAgICB2YXIgY2xvc2UgPSBmdW5jdGlvbiBjbG9zZShmbikgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmbigpOwogICAgICAgICAgY2xvc2VQb3BvdmVyKCk7CiAgICAgICAgfTsKICAgICAgfTsKCiAgICAgIHZhciBpdGVtcyA9IFt7CiAgICAgICAgbmFtZTogc2hvcnRjdXRIZWxwLkNVVCwKICAgICAgICBpY29uOiAnY3V0JywKICAgICAgICBvbkNsaWNrOiBjbG9zZShjdXROb2RlcykKICAgICAgfSwgewogICAgICAgIG5hbWU6IHNob3J0Y3V0SGVscC5DT1BZLAogICAgICAgIGljb246ICdjb3B5JywKICAgICAgICBvbkNsaWNrOiBjb3B5Tm9kZXMKICAgICAgfSwgewogICAgICAgIG5hbWU6IHNob3J0Y3V0SGVscC5QQVNURSwKICAgICAgICAvLyBUT0RPOiBjYW4gdGhpcyBiZSBkaXNhYmxlZCBpZiBjbGlwYm9hcmQgaXMgZW1wdHk/CiAgICAgICAgaWNvbjogJ2NvcHlDbGlwYm9hcmQnLAogICAgICAgIG9uQ2xpY2s6IGNsb3NlKHBhc3RlTm9kZXMpCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiBzaG9ydGN1dEhlbHAuREVMRVRFLAogICAgICAgIGljb246ICd0cmFzaCcsCiAgICAgICAgb25DbGljazogY2xvc2UoZGVsZXRlTm9kZXMpCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiBzaG9ydGN1dEhlbHAuQ0xPTkUsCiAgICAgICAgb25DbGljazogY2xvc2UoY2xvbmVOb2RlcykKICAgICAgfV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShfdGhpcy5fZ2V0R3JvdXBNZW51SXRlbXMoY2xvc2UpKSk7CiAgICAgIHZhciBwYW5lbHMgPSBbewogICAgICAgIGlkOiAwLAogICAgICAgIHRpdGxlOiBzdHJpbmdzLmdldENvbnRleHRNZW51VGl0bGUoKSwKICAgICAgICBpdGVtczogaXRlbXMKICAgICAgfV07CgogICAgICB2YXIgZmlsbE1lbnUgPSBmdW5jdGlvbiBmaWxsTWVudShfcmVmKSB7CiAgICAgICAgdmFyIG1lbnVJdGVtID0gX3JlZi5tZW51SXRlbSwKICAgICAgICAgICAgcGFuZWwgPSBfcmVmLnBhbmVsOwogICAgICAgIGl0ZW1zLnB1c2gobWVudUl0ZW0pOyAvLyBhZGQgT3JkZXIgbWVudSBpdGVtIHRvIGZpcnN0IHBhbmVsCgogICAgICAgIHBhbmVscy5wdXNoKHBhbmVsKTsgLy8gYWRkIG5lc3RlZCBwYW5lbCBmb3IgbGF5ZXJzIGNvbnRyb2xzCiAgICAgIH07CgogICAgICBpZiAoc2hvd0xheWVyQ29udHJvbHMpIHsKICAgICAgICBmaWxsTWVudShfdGhpcy5fZ2V0TGF5ZXJNZW51SXRlbXMoKSk7CiAgICAgIH0KCiAgICAgIGlmIChfdGhpcy5wcm9wcy5zZWxlY3RlZE5vZGVzLmxlbmd0aCA+IDEpIHsKICAgICAgICBmaWxsTWVudShfdGhpcy5fZ2V0QWxpZ25tZW50TWVudUl0ZW1zKGNsb3NlKSk7CiAgICAgIH0KCiAgICAgIGlmIChfdGhpcy5wcm9wcy5zZWxlY3RlZE5vZGVzLmxlbmd0aCA+IDIpIHsKICAgICAgICBmaWxsTWVudShfdGhpcy5fZ2V0RGlzdHJpYnV0aW9uTWVudUl0ZW1zKGNsb3NlKSk7CiAgICAgIH0KCiAgICAgIGl0ZW1zLnB1c2goewogICAgICAgIG5hbWU6IHN0cmluZ3MuZ2V0U2F2ZUVsZW1lbnRNZW51SXRlbUxhYmVsKCksCiAgICAgICAgaWNvbjogJ2luZGV4T3BlbicsCiAgICAgICAgY2xhc3NOYW1lOiB0b3BCb3JkZXJDbGFzc05hbWUsCiAgICAgICAgb25DbGljazogX3RoaXMuX3Nob3dNb2RhbAogICAgICB9KTsKICAgICAgcmV0dXJuIHBhbmVsczsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9yZW5kZXJDb250ZXh0TWVudSIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3BvcG92ZXIuUG9wb3ZlciwgewogICAgICAgIGlkOiAic2lkZWJhci1jb250ZXh0LW1lbnUtcG9wb3ZlciIsCiAgICAgICAgY2xhc3NOYW1lOiAiY2FudmFzQ29udGV4dE1lbnUiLAogICAgICAgIGJ1dHRvbjogY29udGV4dE1lbnVCdXR0b24sCiAgICAgICAgcGFuZWxQYWRkaW5nU2l6ZTogIm5vbmUiLAogICAgICAgIHRvb2x0aXA6IHN0cmluZ3MuZ2V0Q29udGV4dE1lbnVUaXRsZSgpLAogICAgICAgIHRvb2x0aXBQb3NpdGlvbjogImJvdHRvbSIKICAgICAgfSwgZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgdmFyIGNsb3NlUG9wb3ZlciA9IF9yZWYyLmNsb3NlUG9wb3ZlcjsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvbnRleHRNZW51LCB7CiAgICAgICAgICBpbml0aWFsUGFuZWxJZDogMCwKICAgICAgICAgIHBhbmVsczogX3RoaXMuX2dldFBhbmVscyhjbG9zZVBvcG92ZXIpCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2hhbmRsZVNhdmUiLCBmdW5jdGlvbiAobmFtZSwgZGVzY3JpcHRpb24sIGltYWdlKSB7CiAgICAgIHZhciBjcmVhdGVDdXN0b21FbGVtZW50ID0gX3RoaXMucHJvcHMuY3JlYXRlQ3VzdG9tRWxlbWVudDsKICAgICAgY3JlYXRlQ3VzdG9tRWxlbWVudChuYW1lLCBkZXNjcmlwdGlvbiwgaW1hZ2UpOwoKICAgICAgX3RoaXMuX2hpZGVNb2RhbCgpOwogICAgfSk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFNpZGViYXJIZWFkZXIsIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHRoaXMuX2lzTW91bnRlZCA9IHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50V2lsbFVubW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkgewogICAgICB0aGlzLl9pc01vdW50ZWQgPSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzJHByb3BzNyA9IHRoaXMucHJvcHMsCiAgICAgICAgICB0aXRsZSA9IF90aGlzJHByb3BzNy50aXRsZSwKICAgICAgICAgIHNob3dMYXllckNvbnRyb2xzID0gX3RoaXMkcHJvcHM3LnNob3dMYXllckNvbnRyb2xzOwogICAgICB2YXIgaXNNb2RhbFZpc2libGUgPSB0aGlzLnN0YXRlLmlzTW9kYWxWaXNpYmxlOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgICAgICBjbGFzc05hbWU6ICJjYW52YXNMYXlvdXRfX3NpZGViYXJIZWFkZXIiLAogICAgICAgIGd1dHRlclNpemU6ICJub25lIiwKICAgICAgICBhbGlnbkl0ZW1zOiAiY2VudGVyIiwKICAgICAgICBqdXN0aWZ5Q29udGVudDogInNwYWNlQmV0d2VlbiIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogZmFsc2UKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRpdGxlLCB7CiAgICAgICAgc2l6ZTogInhzIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoMyIsIG51bGwsIHRpdGxlKSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgICAgYWxpZ25JdGVtczogImNlbnRlciIsCiAgICAgICAgZ3V0dGVyU2l6ZTogIm5vbmUiCiAgICAgIH0sIHNob3dMYXllckNvbnRyb2xzID8gdGhpcy5fcmVuZGVyTGF5b3V0Q29udHJvbHMoKSA6IG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUb29sVGlwLCB7CiAgICAgICAgcG9zaXRpb246ICJib3R0b20iLAogICAgICAgIGNvbnRlbnQ6IHN0cmluZ3MuZ2V0U2F2ZUVsZW1lbnRNZW51SXRlbUxhYmVsKCkKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkljb24sIHsKICAgICAgICBjb2xvcjogInRleHQiLAogICAgICAgIGljb25UeXBlOiAiaW5kZXhPcGVuIiwKICAgICAgICBvbkNsaWNrOiB0aGlzLl9zaG93TW9kYWwsCiAgICAgICAgImFyaWEtbGFiZWwiOiBzdHJpbmdzLmdldFNhdmVFbGVtZW50TWVudUl0ZW1MYWJlbCgpCiAgICAgIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIHRoaXMuX3JlbmRlckNvbnRleHRNZW51KCkpKSkpLCBpc01vZGFsVmlzaWJsZSA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlPdmVybGF5TWFzaywgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY3VzdG9tX2VsZW1lbnRfbW9kYWwuQ3VzdG9tRWxlbWVudE1vZGFsLCB7CiAgICAgICAgdGl0bGU6IHN0cmluZ3MuZ2V0Q3JlYXRlRWxlbWVudE1vZGFsVGl0bGUoKSwKICAgICAgICBvblNhdmU6IHRoaXMuX2hhbmRsZVNhdmUsCiAgICAgICAgb25DYW5jZWw6IHRoaXMuX2hpZGVNb2RhbAogICAgICB9KSkgOiBudWxsKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBTaWRlYmFySGVhZGVyOwp9KF9yZWFjdC5Db21wb25lbnQpOwoKZXhwb3J0cy5TaWRlYmFySGVhZGVyID0gU2lkZWJhckhlYWRlcjsKCl9kZWZpbmVQcm9wZXJ0eShTaWRlYmFySGVhZGVyLCAicHJvcFR5cGVzIiwgewogIHRpdGxlOiBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nLmlzUmVxdWlyZWQsCiAgc2hvd0xheWVyQ29udHJvbHM6IF9wcm9wVHlwZXMuZGVmYXVsdC5ib29sLAogIC8vIFRPRE86IHJlbW92ZSB3aGVuIHdlIHN1cHBvcnQgcmVsYXllcmluZyBtdWx0aXBsZSBlbGVtZW50cwogIGN1dE5vZGVzOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIGNvcHlOb2RlczogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCwKICBwYXN0ZU5vZGVzOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIGNsb25lTm9kZXM6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgZGVsZXRlTm9kZXM6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgYnJpbmdUb0Zyb250OiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIGJyaW5nRm9yd2FyZDogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCwKICBzZW5kQmFja3dhcmQ6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgc2VuZFRvQmFjazogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCwKICBjcmVhdGVDdXN0b21FbGVtZW50OiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIGdyb3VwSXNTZWxlY3RlZDogX3Byb3BUeXBlcy5kZWZhdWx0LmJvb2wsCiAgc2VsZWN0ZWROb2RlczogX3Byb3BUeXBlcy5kZWZhdWx0LmFycmF5LAogIGdyb3VwTm9kZXM6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgdW5ncm91cE5vZGVzOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIGFsaWduTGVmdDogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCwKICBhbGlnbkNlbnRlcjogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCwKICBhbGlnblJpZ2h0OiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIGFsaWduVG9wOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIGFsaWduTWlkZGxlOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIGFsaWduQm90dG9tOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIGRpc3RyaWJ1dGVIb3Jpem9udGFsbHk6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgZGlzdHJpYnV0ZVZlcnRpY2FsbHk6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQKfSk7CgpfZGVmaW5lUHJvcGVydHkoU2lkZWJhckhlYWRlciwgImRlZmF1bHRQcm9wcyIsIHsKICBncm91cElzU2VsZWN0ZWQ6IGZhbHNlLAogIHNob3dMYXllckNvbnRyb2xzOiBmYWxzZSwKICBzZWxlY3RlZE5vZGVzOiBbXQp9KTs="},null]}