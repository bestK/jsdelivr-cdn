{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/timelion/public/directives/timelion_expression_input_helpers.js","dependencies":[{"path":"src/legacy/core_plugins/timelion/public/directives/timelion_expression_input_helpers.js","mtime":1585205040135},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnN1Z2dlc3QgPSBzdWdnZXN0OwpleHBvcnRzLmluc2VydEF0TG9jYXRpb24gPSBpbnNlcnRBdExvY2F0aW9uOwpleHBvcnRzLlN1Z2dlc3Rpb25zID0gZXhwb3J0cy5TVUdHRVNUSU9OX1RZUEUgPSB2b2lkIDA7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9Cgp2YXIgU1VHR0VTVElPTl9UWVBFID0gewogIEFSR1VNRU5UUzogJ2FyZ3VtZW50cycsCiAgQVJHVU1FTlRfVkFMVUU6ICdhcmd1bWVudF92YWx1ZScsCiAgRlVOQ1RJT05TOiAnZnVuY3Rpb25zJwp9OwpleHBvcnRzLlNVR0dFU1RJT05fVFlQRSA9IFNVR0dFU1RJT05fVFlQRTsKCnZhciBTdWdnZXN0aW9ucyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFN1Z2dlc3Rpb25zKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN1Z2dlc3Rpb25zKTsKCiAgICB0aGlzLnJlc2V0KCk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoU3VnZ2VzdGlvbnMsIFt7CiAgICBrZXk6ICJyZXNldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuaW5kZXggPSAtMTsKICAgICAgdGhpcy5saXN0ID0gW107CiAgICAgIHRoaXMudHlwZSA9IG51bGw7CiAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0TGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TGlzdChsaXN0LCB0eXBlKSB7CiAgICAgIHRoaXMubGlzdCA9IGxpc3Quc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIGlmIChhLm5hbWUgPCBiLm5hbWUpIHsKICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CgogICAgICAgIGlmIChhLm5hbWUgPiBiLm5hbWUpIHsKICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0gLy8gbmFtZXMgbXVzdCBiZSBlcXVhbAoKCiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0pOwogICAgICB0aGlzLnR5cGUgPSB0eXBlOyAvLyBPbmx5IHRyeSB0byBwb3NpdGlvbiBpbmRleCBpbnNpZGUgb2YgbGlzdCByYW5nZSwgd2hlbiBpdCB3YXMgYWxyZWFkeSBmb2N1c2VkCiAgICAgIC8vIGJlZm9yZWhhbmQgKGkuZS4gbm90IC0xKQoKICAgICAgaWYgKHRoaXMuaW5kZXggPiAtMSkgewogICAgICAgIC8vIFdlIG1heSBnZXQgYSBzaG9ydGVyIGxpc3QgdGhhbiB0aGUgb25lIHdlIGhhdmUgbm93LCBzbyB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSBvdXIgaW5kZXggZG9lc24ndAogICAgICAgIC8vIGZhbGwgb3V0c2lkZSBvZiB0aGUgbmV3IGxpc3QncyByYW5nZS4KICAgICAgICB0aGlzLmluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy5pbmRleCwgdGhpcy5saXN0Lmxlbmd0aCAtIDEpKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldENvdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb3VudCgpIHsKICAgICAgcmV0dXJuIHRoaXMubGlzdC5sZW5ndGg7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNFbXB0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNFbXB0eSgpIHsKICAgICAgcmV0dXJuIHRoaXMubGlzdC5sZW5ndGggPT09IDA7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdygpIHsKICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImhpZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhpZGUoKSB7CiAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAic3RlcEZvcndhcmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0ZXBGb3J3YXJkKCkgewogICAgICBpZiAodGhpcy5pbmRleCA+IDApIHsKICAgICAgICB0aGlzLmluZGV4IC09IDE7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdGVwQmFja3dhcmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0ZXBCYWNrd2FyZCgpIHsKICAgICAgaWYgKHRoaXMuaW5kZXggPCB0aGlzLmxpc3QubGVuZ3RoIC0gMSkgewogICAgICAgIHRoaXMuaW5kZXggKz0gMTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIFN1Z2dlc3Rpb25zOwp9KCk7CgpleHBvcnRzLlN1Z2dlc3Rpb25zID0gU3VnZ2VzdGlvbnM7CgpmdW5jdGlvbiBpbkxvY2F0aW9uKGN1cnNvclBvc2l0aW9uLCBsb2NhdGlvbikgewogIHJldHVybiBjdXJzb3JQb3NpdGlvbiA+PSBsb2NhdGlvbi5taW4gJiYgY3Vyc29yUG9zaXRpb24gPD0gbG9jYXRpb24ubWF4Owp9CgpmdW5jdGlvbiBnZXRBcmd1bWVudHNIZWxwKGZ1bmN0aW9uSGVscCkgewogIHZhciBmdW5jdGlvbkFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdOwoKICBpZiAoIWZ1bmN0aW9uSGVscCkgewogICAgcmV0dXJuIFtdOwogIH0gLy8gRG8gbm90IHByb3ZpZGUgJ2lucHV0U2VyaWVzJyBhcyBhcmd1bWVudCBzdWdnZXN0aW9uIGZvciBjaGFpbmFibGUgZnVuY3Rpb25zCgoKICB2YXIgYXJnc0hlbHAgPSBmdW5jdGlvbkhlbHAuY2hhaW5hYmxlID8gZnVuY3Rpb25IZWxwLmFyZ3Muc2xpY2UoMSkgOiBmdW5jdGlvbkhlbHAuYXJncy5zbGljZSgwKTsgLy8gaWdub3JlIGFyZ3VtZW50cyB0aGF0IGFyZSBhbHJlYWR5IHByb3ZpZGVkIGluIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCgogIHZhciBmdW5jdGlvbkFyZ05hbWVzID0gZnVuY3Rpb25BcmdzLm1hcChmdW5jdGlvbiAoYXJnKSB7CiAgICByZXR1cm4gYXJnLm5hbWU7CiAgfSk7CiAgcmV0dXJuIGFyZ3NIZWxwLmZpbHRlcihmdW5jdGlvbiAoYXJnKSB7CiAgICByZXR1cm4gIWZ1bmN0aW9uQXJnTmFtZXMuaW5jbHVkZXMoYXJnLm5hbWUpOwogIH0pOwp9CgpmdW5jdGlvbiBleHRyYWN0U3VnZ2VzdGlvbnNGcm9tUGFyc2VkUmVzdWx0KHJlc3VsdCwgY3Vyc29yUG9zaXRpb24sIGZ1bmN0aW9uTGlzdCwgYXJnVmFsdWVTdWdnZXN0aW9ucykgewogIHZhciBhY3RpdmVGdW5jLCBmdW5jdGlvbkhlbHAsIG9wZW5QYXJlbiwgYWN0aXZlQXJnLCBmdW5jdGlvbk5hbWUsIGZ1bmN0aW9uQXJncywgYXJnTmFtZSwgcGFydGlhbElucHV0LCB2YWx1ZVN1Z2dlc3Rpb25zLCBfZnVuY3Rpb25IZWxwJGFyZ3MkZmksIHN0YXRpY1N1Z2dlc3Rpb25zLCBhcmdzSGVscCwgYXJndW1lbnRTdWdnZXN0aW9ucywgbG9jYXRpb247CgogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZXh0cmFjdFN1Z2dlc3Rpb25zRnJvbVBhcnNlZFJlc3VsdCQoX2NvbnRleHQpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBhY3RpdmVGdW5jID0gcmVzdWx0LmZ1bmN0aW9ucy5maW5kKGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICAgIHJldHVybiBjdXJzb3JQb3NpdGlvbiA+PSBmdW5jLmxvY2F0aW9uLm1pbiAmJiBjdXJzb3JQb3NpdGlvbiA8IGZ1bmMubG9jYXRpb24ubWF4OwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKGFjdGl2ZUZ1bmMpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBmdW5jdGlvbkhlbHAgPSBmdW5jdGlvbkxpc3QuZmluZChmdW5jdGlvbiAoZnVuYykgewogICAgICAgICAgICByZXR1cm4gZnVuYy5uYW1lID09PSBhY3RpdmVGdW5jLmZ1bmN0aW9uOwogICAgICAgICAgfSk7IC8vIHJldHVybiBmdW5jdGlvbiBzdWdnZXN0aW9uIHdoZW4gY3Vyc29yIGlzIG91dHNpZGUgb2YgcGFyZW50aGVzZXMKICAgICAgICAgIC8vIGxvY2F0aW9uIHJhbmdlIGluY2x1ZGVzICcuJywgZnVuY3Rpb24gbmFtZSwgYW5kICcoJy4KCiAgICAgICAgICBvcGVuUGFyZW4gPSBhY3RpdmVGdW5jLmxvY2F0aW9uLm1pbiArIGFjdGl2ZUZ1bmMuZnVuY3Rpb24ubGVuZ3RoICsgMjsKCiAgICAgICAgICBpZiAoIShjdXJzb3JQb3NpdGlvbiA8IG9wZW5QYXJlbikpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgbGlzdDogW2Z1bmN0aW9uSGVscF0sCiAgICAgICAgICAgIGxvY2F0aW9uOiBhY3RpdmVGdW5jLmxvY2F0aW9uLAogICAgICAgICAgICB0eXBlOiBTVUdHRVNUSU9OX1RZUEUuRlVOQ1RJT05TCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgLy8gcmV0dXJuIGFyZ3VtZW50IHZhbHVlIHN1Z2dlc3Rpb25zIHdoZW4gY3Vyc29yIGlzIGluc2lkZSBhcmd1bWVudCB2YWx1ZQogICAgICAgICAgYWN0aXZlQXJnID0gYWN0aXZlRnVuYy5hcmd1bWVudHMuZmluZChmdW5jdGlvbiAoYXJndW1lbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGluTG9jYXRpb24oY3Vyc29yUG9zaXRpb24sIGFyZ3VtZW50LmxvY2F0aW9uKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmICghKGFjdGl2ZUFyZyAmJiBhY3RpdmVBcmcudHlwZSA9PT0gJ25hbWVkQXJnJyAmJiBpbkxvY2F0aW9uKGN1cnNvclBvc2l0aW9uLCBhY3RpdmVBcmcudmFsdWUubG9jYXRpb24pKSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uTmFtZSA9IGFjdGl2ZUZ1bmMuZnVuY3Rpb24sIGZ1bmN0aW9uQXJncyA9IGFjdGl2ZUZ1bmMuYXJndW1lbnRzOwogICAgICAgICAgYXJnTmFtZSA9IGFjdGl2ZUFyZy5uYW1lLCBwYXJ0aWFsSW5wdXQgPSBhY3RpdmVBcmcudmFsdWUudGV4dDsKCiAgICAgICAgICBpZiAoIWFyZ1ZhbHVlU3VnZ2VzdGlvbnMuaGFzRHluYW1pY1N1Z2dlc3Rpb25zRm9yQXJndW1lbnQoZnVuY3Rpb25OYW1lLCBhcmdOYW1lKSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoYXJnVmFsdWVTdWdnZXN0aW9ucy5nZXREeW5hbWljU3VnZ2VzdGlvbnNGb3JBcmd1bWVudChmdW5jdGlvbk5hbWUsIGFyZ05hbWUsIGZ1bmN0aW9uQXJncywgcGFydGlhbElucHV0KSk7CgogICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICB2YWx1ZVN1Z2dlc3Rpb25zID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDE3OgogICAgICAgICAgX2Z1bmN0aW9uSGVscCRhcmdzJGZpID0gZnVuY3Rpb25IZWxwLmFyZ3MuZmluZChmdW5jdGlvbiAoYXJnKSB7CiAgICAgICAgICAgIHJldHVybiBhcmcubmFtZSA9PT0gYWN0aXZlQXJnLm5hbWU7CiAgICAgICAgICB9KSwgc3RhdGljU3VnZ2VzdGlvbnMgPSBfZnVuY3Rpb25IZWxwJGFyZ3MkZmkuc3VnZ2VzdGlvbnM7CiAgICAgICAgICB2YWx1ZVN1Z2dlc3Rpb25zID0gYXJnVmFsdWVTdWdnZXN0aW9ucy5nZXRTdGF0aWNTdWdnZXN0aW9uc0ZvcklucHV0KHBhcnRpYWxJbnB1dCwgc3RhdGljU3VnZ2VzdGlvbnMpOwoKICAgICAgICBjYXNlIDE5OgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICBsaXN0OiB2YWx1ZVN1Z2dlc3Rpb25zLAogICAgICAgICAgICBsb2NhdGlvbjogYWN0aXZlQXJnLnZhbHVlLmxvY2F0aW9uLAogICAgICAgICAgICB0eXBlOiBTVUdHRVNUSU9OX1RZUEUuQVJHVU1FTlRfVkFMVUUKICAgICAgICAgIH0pOwoKICAgICAgICBjYXNlIDIwOgogICAgICAgICAgLy8gcmV0dXJuIGFyZ3VtZW50IHN1Z2dlc3Rpb25zCiAgICAgICAgICBhcmdzSGVscCA9IGdldEFyZ3VtZW50c0hlbHAoZnVuY3Rpb25IZWxwLCBhY3RpdmVGdW5jLmFyZ3VtZW50cyk7CiAgICAgICAgICBhcmd1bWVudFN1Z2dlc3Rpb25zID0gYXJnc0hlbHAuZmlsdGVyKGZ1bmN0aW9uIChhcmcpIHsKICAgICAgICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5nZXQoYWN0aXZlQXJnLCAndHlwZScpID09PSAnbmFtZWRBcmcnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5zdGFydHNXaXRoKGFyZy5uYW1lLCBhY3RpdmVBcmcubmFtZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aXZlQXJnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5zdGFydHNXaXRoKGFyZy5uYW1lLCBhY3RpdmVBcmcudGV4dCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSk7CiAgICAgICAgICBsb2NhdGlvbiA9IGFjdGl2ZUFyZyA/IGFjdGl2ZUFyZy5sb2NhdGlvbiA6IHsKICAgICAgICAgICAgbWluOiBjdXJzb3JQb3NpdGlvbiwKICAgICAgICAgICAgbWF4OiBjdXJzb3JQb3NpdGlvbgogICAgICAgICAgfTsKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgbGlzdDogYXJndW1lbnRTdWdnZXN0aW9ucywKICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLAogICAgICAgICAgICB0eXBlOiBTVUdHRVNUSU9OX1RZUEUuQVJHVU1FTlRTCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSAyNDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBzdWdnZXN0KGV4cHJlc3Npb24sIGZ1bmN0aW9uTGlzdCwgUGFyc2VyLCBjdXJzb3JQb3NpdGlvbiwgYXJnVmFsdWVTdWdnZXN0aW9ucykgewogIHZhciByZXN1bHQsIG1lc3NhZ2UsIGxpc3QsIF9tZXNzYWdlLCBfZnVuY3Rpb25OYW1lLCBfZnVuY3Rpb25BcmdzLCBfZnVuY3Rpb25IZWxwLCBfbWVzc2FnZTIsIF9hcmdOYW1lLCBfZnVuY3Rpb25OYW1lMiwgX2Z1bmN0aW9uQXJnczIsIF92YWx1ZVN1Z2dlc3Rpb25zLCBfZnVuY3Rpb25IZWxwMiwgYXJnSGVscDsKCiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzdWdnZXN0JChfY29udGV4dDIpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoUGFyc2VyLnBhcnNlKGV4cHJlc3Npb24pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGV4dHJhY3RTdWdnZXN0aW9uc0Zyb21QYXJzZWRSZXN1bHQocmVzdWx0LCBjdXJzb3JQb3NpdGlvbiwgZnVuY3Rpb25MaXN0LCBhcmdWYWx1ZVN1Z2dlc3Rpb25zKSk7CgogICAgICAgIGNhc2UgNjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgIGNhc2UgOToKICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gOTsKICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTE7CiAgICAgICAgICAvLyBUaGUgZ3JhbW1hciB3aWxsIHRocm93IGFuIGVycm9yIGNvbnRhaW5pbmcgYSBtZXNzYWdlIGlmIHRoZSBleHByZXNzaW9uIGlzIGZvcm1hdHRlZAogICAgICAgICAgLy8gY29ycmVjdGx5IGFuZCBpcyBwcmVwYXJlZCB0byBhY2NlcHQgc3VnZ2VzdGlvbnMuIElmIHRoZSBleHByZXNzaW9uIGlzIG5vdCBmb3JtYXR0ZWQKICAgICAgICAgIC8vIGNvcnJlY3RseSB0aGUgZ3JhbW1hciB3aWxsIGp1c3QgdGhyb3cgYSByZWd1bGFyIFBFRyBTeW50YXhFcnJvciwgYW5kIHRoaXMgSlNPTi5wYXJzZQogICAgICAgICAgLy8gYXR0ZW1wdCB3aWxsIHRocm93IGFuIGVycm9yLgogICAgICAgICAgbWVzc2FnZSA9IEpTT04ucGFyc2UoX2NvbnRleHQyLnQwLm1lc3NhZ2UpOwogICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxODsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDE1OgogICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxNTsKICAgICAgICAgIF9jb250ZXh0Mi50MSA9IF9jb250ZXh0MlsiY2F0Y2giXSgxMSk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTg6CiAgICAgICAgICBfY29udGV4dDIudDIgPSBtZXNzYWdlLnR5cGU7CiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IF9jb250ZXh0Mi50MiA9PT0gJ2luY29tcGxldGVGdW5jdGlvbicgPyAyMSA6IF9jb250ZXh0Mi50MiA9PT0gJ2luY29tcGxldGVBcmd1bWVudCcgPyAyMyA6IF9jb250ZXh0Mi50MiA9PT0gJ2luY29tcGxldGVBcmd1bWVudFZhbHVlJyA/IDI2IDogMzc7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyMToKICAgICAgICAgIGlmIChtZXNzYWdlLmZ1bmN0aW9uKSB7CiAgICAgICAgICAgIC8vIFRoZSB1c2VyIGhhcyBzdGFydCB0eXBpbmcgYSBmdW5jdGlvbiBuYW1lLCBzbyB3ZSdsbCBmaWx0ZXIgdGhlIGxpc3QgZG93biB0byBvbmx5CiAgICAgICAgICAgIC8vIHBvc3NpYmxlIG1hdGNoZXMuCiAgICAgICAgICAgIGxpc3QgPSBmdW5jdGlvbkxpc3QuZmlsdGVyKGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5zdGFydHNXaXRoKGZ1bmMubmFtZSwgbWVzc2FnZS5mdW5jdGlvbik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gVGhlIHVzZXIgaGFzbid0IHR5cGVkIGFueXRoaW5nIHlldCwgc28gd2UnbGwganVzdCByZXR1cm4gdGhlIGVudGlyZSBsaXN0LgogICAgICAgICAgICBsaXN0ID0gZnVuY3Rpb25MaXN0OwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgIGxpc3Q6IGxpc3QsCiAgICAgICAgICAgIGxvY2F0aW9uOiBtZXNzYWdlLmxvY2F0aW9uLAogICAgICAgICAgICB0eXBlOiBTVUdHRVNUSU9OX1RZUEUuRlVOQ1RJT05TCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSAyMzoKICAgICAgICAgIF9tZXNzYWdlID0gbWVzc2FnZSwgX2Z1bmN0aW9uTmFtZSA9IF9tZXNzYWdlLmN1cnJlbnRGdW5jdGlvbiwgX2Z1bmN0aW9uQXJncyA9IF9tZXNzYWdlLmN1cnJlbnRBcmdzOwogICAgICAgICAgX2Z1bmN0aW9uSGVscCA9IGZ1bmN0aW9uTGlzdC5maW5kKGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICAgIHJldHVybiBmdW5jLm5hbWUgPT09IF9mdW5jdGlvbk5hbWU7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgIGxpc3Q6IGdldEFyZ3VtZW50c0hlbHAoX2Z1bmN0aW9uSGVscCwgX2Z1bmN0aW9uQXJncyksCiAgICAgICAgICAgIGxvY2F0aW9uOiBtZXNzYWdlLmxvY2F0aW9uLAogICAgICAgICAgICB0eXBlOiBTVUdHRVNUSU9OX1RZUEUuQVJHVU1FTlRTCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSAyNjoKICAgICAgICAgIF9tZXNzYWdlMiA9IG1lc3NhZ2UsIF9hcmdOYW1lID0gX21lc3NhZ2UyLm5hbWUsIF9mdW5jdGlvbk5hbWUyID0gX21lc3NhZ2UyLmN1cnJlbnRGdW5jdGlvbiwgX2Z1bmN0aW9uQXJnczIgPSBfbWVzc2FnZTIuY3VycmVudEFyZ3M7CiAgICAgICAgICBfdmFsdWVTdWdnZXN0aW9ucyA9IFtdOwoKICAgICAgICAgIGlmICghYXJnVmFsdWVTdWdnZXN0aW9ucy5oYXNEeW5hbWljU3VnZ2VzdGlvbnNGb3JBcmd1bWVudChfZnVuY3Rpb25OYW1lMiwgX2FyZ05hbWUpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzE7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGFyZ1ZhbHVlU3VnZ2VzdGlvbnMuZ2V0RHluYW1pY1N1Z2dlc3Rpb25zRm9yQXJndW1lbnQoX2Z1bmN0aW9uTmFtZTIsIF9hcmdOYW1lLCBfZnVuY3Rpb25BcmdzMikpOwoKICAgICAgICBjYXNlIDMxOgogICAgICAgICAgX3ZhbHVlU3VnZ2VzdGlvbnMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzY7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzNDoKICAgICAgICAgIF9mdW5jdGlvbkhlbHAyID0gZnVuY3Rpb25MaXN0LmZpbmQoZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmMubmFtZSA9PT0gX2Z1bmN0aW9uTmFtZTI7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoX2Z1bmN0aW9uSGVscDIpIHsKICAgICAgICAgICAgYXJnSGVscCA9IF9mdW5jdGlvbkhlbHAyLmFyZ3MuZmluZChmdW5jdGlvbiAoYXJnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGFyZy5uYW1lID09PSBfYXJnTmFtZTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoYXJnSGVscCAmJiBhcmdIZWxwLnN1Z2dlc3Rpb25zKSB7CiAgICAgICAgICAgICAgX3ZhbHVlU3VnZ2VzdGlvbnMgPSBhcmdIZWxwLnN1Z2dlc3Rpb25zOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgMzY6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICBsaXN0OiBfdmFsdWVTdWdnZXN0aW9ucywKICAgICAgICAgICAgbG9jYXRpb246IHsKICAgICAgICAgICAgICBtaW46IGN1cnNvclBvc2l0aW9uLAogICAgICAgICAgICAgIG1heDogY3Vyc29yUG9zaXRpb24KICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHlwZTogU1VHR0VTVElPTl9UWVBFLkFSR1VNRU5UX1ZBTFVFCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSAzNzoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDldLCBbMTEsIDE1XV0pOwp9CgpmdW5jdGlvbiBpbnNlcnRBdExvY2F0aW9uKHZhbHVlVG9JbnNlcnQsIGRlc3RpbmF0aW9uLCByZXBsYWNlbWVudFJhbmdlU3RhcnQsIHJlcGxhY2VtZW50UmFuZ2VFbmQpIHsKICAvLyBJbnNlcnQgdGhlIHZhbHVlIGF0IGEgbG9jYXRpb24gY2FyZXQgd2l0aGluIHRoZSBkZXN0aW5hdGlvbi4KICB2YXIgcHJlZml4ID0gZGVzdGluYXRpb24uc2xpY2UoMCwgcmVwbGFjZW1lbnRSYW5nZVN0YXJ0KTsKICB2YXIgc3VmZml4ID0gZGVzdGluYXRpb24uc2xpY2UocmVwbGFjZW1lbnRSYW5nZUVuZCwgZGVzdGluYXRpb24ubGVuZ3RoKTsKICB2YXIgcmVzdWx0ID0gIiIuY29uY2F0KHByZWZpeCkuY29uY2F0KHZhbHVlVG9JbnNlcnQpLmNvbmNhdChzdWZmaXgpOwogIHJldHVybiByZXN1bHQ7Cn0="},null]}