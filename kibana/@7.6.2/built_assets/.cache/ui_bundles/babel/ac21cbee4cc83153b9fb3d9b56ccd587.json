{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/state_management/state.js","dependencies":[{"path":"src/legacy/ui/public/state_management/state.js","mtime":1585205041147},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlN0YXRlUHJvdmlkZXIgPSBTdGF0ZVByb3ZpZGVyOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9hbmd1bGFyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJhbmd1bGFyIikpOwoKdmFyIF9yaXNvbk5vZGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJpc29uLW5vZGUiKSk7Cgp2YXIgX2RpZmZfb2JqZWN0ID0gcmVxdWlyZSgiLi91dGlscy9kaWZmX29iamVjdCIpOwoKdmFyIF9ldmVudHMgPSByZXF1aXJlKCIuLi9ldmVudHMiKTsKCnZhciBfbm90aWZ5ID0gcmVxdWlyZSgiLi4vbm90aWZ5Iik7CgpyZXF1aXJlKCIuL2NvbmZpZ19wcm92aWRlciIpOwoKdmFyIF9sZWdhY3lfY2xhc3MgPSByZXF1aXJlKCIuLi91dGlscy9sZWdhY3lfY2xhc3MiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vcGx1Z2lucy9raWJhbmFfdXRpbHMvcHVibGljIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoKICogTGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yCiAqIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoCiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0CiAqIG93bmVyc2hpcC4gRWxhc3RpY3NlYXJjaCBCLlYuIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIKICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkKICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICovCgovKioKICogQG5hbWUgU3RhdGUKICoKICogQGV4dGVuZHMgRXZlbnRzCiAqCiAqIEBkZXNjcmlwdGlvbiBQZXJzaXN0cyBnZW5lcmljICJzdGF0ZSIgdG8gYW5kIHJlYWRzIGl0IGZyb20gdGhlIFVSTC4KICovCmZ1bmN0aW9uIFN0YXRlUHJvdmlkZXIoUHJpdmF0ZSwgJHJvb3RTY29wZSwgJGxvY2F0aW9uLCBzdGF0ZU1hbmFnZW1lbnRDb25maWcsIGNvbmZpZywga2JuVXJsLCAkaW5qZWN0b3IpIHsKICB2YXIgRXZlbnRzID0gUHJpdmF0ZShfZXZlbnRzLkV2ZW50c1Byb3ZpZGVyKTsKCiAgdmFyIGlzRHVtbXlSb3V0ZSA9IGZ1bmN0aW9uIGlzRHVtbXlSb3V0ZSgpIHsKICAgIHJldHVybiAkaW5qZWN0b3IuaGFzKCckcm91dGUnKSAmJiAkaW5qZWN0b3IuZ2V0KCckcm91dGUnKS5jdXJyZW50ICYmICRpbmplY3Rvci5nZXQoJyRyb3V0ZScpLmN1cnJlbnQub3V0ZXJBbmd1bGFyV3JhcHBlclJvdXRlOwogIH07CgogICgwLCBfbGVnYWN5X2NsYXNzLmNyZWF0ZUxlZ2FjeUNsYXNzKShTdGF0ZSkuaW5oZXJpdHMoRXZlbnRzKTsKCiAgZnVuY3Rpb24gU3RhdGUodXJsUGFyYW0sIGRlZmF1bHRzKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBfaGFzaGVkSXRlbVN0b3JlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBfcHVibGljLmhhc2hlZEl0ZW1TdG9yZTsKCiAgICBTdGF0ZS5TdXBlci5jYWxsKHRoaXMpOwogICAgdGhpcy5zZXREZWZhdWx0cyhkZWZhdWx0cyk7CiAgICB0aGlzLl91cmxQYXJhbSA9IHVybFBhcmFtIHx8ICdfcyc7CiAgICB0aGlzLl9oYXNoZWRJdGVtU3RvcmUgPSBfaGFzaGVkSXRlbVN0b3JlOyAvLyBXaGVuIHRoZSBVUkwgdXBkYXRlcyB3ZSBuZWVkIHRvIGZldGNoIHRoZSB2YWx1ZXMgZnJvbSB0aGUgVVJMCgogICAgdGhpcy5fY2xlYW5VcExpc3RlbmVycyA9IFsvLyBwYXJ0aWFsIHJvdXRlIHVwZGF0ZSwgbm8gYXBwIHJlbG9hZAogICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZVVwZGF0ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuZmV0Y2goKTsKICAgIH0pLCAvLyBiZWdpbm5pbmcgb2YgZnVsbCByb3V0ZSB1cGRhdGUsIG5ldyBhcHAgd2lsbCBiZSBpbml0aWFsaXplZCBiZWZvcmUKICAgIC8vICRyb3V0ZUNoYW5nZVN1Y2Nlc3Mgb3IgJHJvdXRlQ2hhbmdlRXJyb3IKICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFfdGhpcy5fcGVyc2lzdEFjcm9zc0FwcHMpIHsKICAgICAgICBfdGhpcy5kZXN0cm95KCk7CiAgICAgIH0KICAgIH0pLCAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKF90aGlzLl9wZXJzaXN0QWNyb3NzQXBwcykgewogICAgICAgIF90aGlzLmZldGNoKCk7CiAgICAgIH0KICAgIH0pXTsgLy8gSW5pdGlhbGl6ZSB0aGUgU3RhdGUgd2l0aCBmZXRjaAoKICAgIHRoaXMuZmV0Y2goKTsKICB9CgogIFN0YXRlLnByb3RvdHlwZS5fcmVhZEZyb21VUkwgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2VhcmNoID0gJGxvY2F0aW9uLnNlYXJjaCgpOwogICAgdmFyIHVybFZhbCA9IHNlYXJjaFt0aGlzLl91cmxQYXJhbV07CgogICAgaWYgKCF1cmxWYWwpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgaWYgKCgwLCBfcHVibGljLmlzU3RhdGVIYXNoKSh1cmxWYWwpKSB7CiAgICAgIHJldHVybiB0aGlzLl9wYXJzZVN0YXRlSGFzaCh1cmxWYWwpOwogICAgfQoKICAgIHZhciByaXNvbkVuY29kZWQ7CiAgICB2YXIgdW5hYmxlVG9QYXJzZTsKCiAgICB0cnkgewogICAgICByaXNvbkVuY29kZWQgPSBfcmlzb25Ob2RlLmRlZmF1bHQuZGVjb2RlKHVybFZhbCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHVuYWJsZVRvUGFyc2UgPSB0cnVlOwogICAgfQoKICAgIGlmICh1bmFibGVUb1BhcnNlKSB7CiAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgnY29tbW9uLnVpLnN0YXRlTWFuYWdlbWVudC51bmFibGVUb1BhcnNlVXJsRXJyb3JNZXNzYWdlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVW5hYmxlIHRvIHBhcnNlIFVSTCcKICAgICAgfSkpOwoKICAgICAgc2VhcmNoW3RoaXMuX3VybFBhcmFtXSA9IHRoaXMudG9RdWVyeVBhcmFtKHRoaXMuX2RlZmF1bHRzKTsKICAgICAgJGxvY2F0aW9uLnNlYXJjaChzZWFyY2gpLnJlcGxhY2UoKTsKICAgIH0KCiAgICBpZiAoIXJpc29uRW5jb2RlZCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBpZiAodGhpcy5pc0hhc2hpbmdFbmFibGVkKCkpIHsKICAgICAgLy8gUklTT04gY2FuIGZpbmQgaXRzIHdheSBpbnRvIHRoZSBVUkwgYW55IG51bWJlciBvZiB3YXlzLCBpbmNsdWRpbmcgdGhlIG5hdmJhciBsaW5rcyBvcgogICAgICAvLyBzaGFyZWQgdXJscyB3aXRoIHRoZSBlbnRpcmUgc3RhdGUgZW1iZWRkZWQuIFRoZXNlIHZhbHVlcyBuZWVkIHRvIGJlIHRyYW5zbGF0ZWQgaW50bwogICAgICAvLyBoYXNoZXMgYW5kIHJlcGxhY2VkIGluIHRoZSBicm93c2VyIGhpc3Rvcnkgd2hlbiBzdGF0ZS1oYXNoaW5nIGlzIGVuYWJsZWQKICAgICAgc2VhcmNoW3RoaXMuX3VybFBhcmFtXSA9IHRoaXMudG9RdWVyeVBhcmFtKHJpc29uRW5jb2RlZCk7CiAgICAgICRsb2NhdGlvbi5zZWFyY2goc2VhcmNoKS5yZXBsYWNlKCk7CiAgICB9CgogICAgcmV0dXJuIHJpc29uRW5jb2RlZDsKICB9OwogIC8qKgogICAqIEZldGNoZXMgdGhlIHN0YXRlIGZyb20gdGhlIHVybAogICAqIEByZXR1cm5zIHt2b2lkfQogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24gKCkgewogICAgaWYgKCFzdGF0ZU1hbmFnZW1lbnRDb25maWcuZW5hYmxlZCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIHN0YXNoID0gdGhpcy5fcmVhZEZyb21VUkwoKTsgLy8gbm90aGluZyB0byByZWFkIGZyb20gdGhlIHVybD8gc2F2ZSBpZiBvcmRlcmVkIHRvIHBlcnNpc3QsIGJ1dCBvbmx5IGlmIGl0J3Mgbm90IG9uIGEgd3JhcHBlciByb3V0ZQoKCiAgICBpZiAoc3Rhc2ggPT09IG51bGwpIHsKICAgICAgaWYgKHRoaXMuX3BlcnNpc3RBY3Jvc3NBcHBzKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXNoID0ge307CiAgICAgIH0KICAgIH0KCiAgICBfbG9kYXNoLmRlZmF1bHQuZGVmYXVsdHMoc3Rhc2gsIHRoaXMuX2RlZmF1bHRzKTsgLy8gYXBwbHkgZGlmZiB0byBzdGF0ZSBmcm9tIHN0YXNoLCB3aWxsIGNoYW5nZSBzdGF0ZSBpbiBwbGFjZSB2aWEgc2lkZSBlZmZlY3QKCgogICAgdmFyIGRpZmZSZXN1bHRzID0gKDAsIF9kaWZmX29iamVjdC5hcHBseURpZmYpKHRoaXMsIHN0YXNoKTsKCiAgICBpZiAoIWlzRHVtbXlSb3V0ZSgpICYmIGRpZmZSZXN1bHRzLmtleXMubGVuZ3RoKSB7CiAgICAgIHRoaXMuZW1pdCgnZmV0Y2hfd2l0aF9jaGFuZ2VzJywgZGlmZlJlc3VsdHMua2V5cyk7CiAgICB9CiAgfTsKICAvKioKICAgKiBTYXZlcyB0aGUgc3RhdGUgdG8gdGhlIHVybAogICAqIEByZXR1cm5zIHt2b2lkfQogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAocmVwbGFjZSkgewogICAgaWYgKCFzdGF0ZU1hbmFnZW1lbnRDb25maWcuZW5hYmxlZCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKGlzRHVtbXlSb3V0ZSgpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgc3Rhc2ggPSB0aGlzLl9yZWFkRnJvbVVSTCgpOwoKICAgIHZhciBzdGF0ZSA9IHRoaXMudG9PYmplY3QoKTsKICAgIHJlcGxhY2UgPSByZXBsYWNlIHx8IGZhbHNlOwoKICAgIGlmICghc3Rhc2gpIHsKICAgICAgcmVwbGFjZSA9IHRydWU7CiAgICAgIHN0YXNoID0ge307CiAgICB9IC8vIGFwcGx5IGRpZmYgdG8gc3RhdGUgZnJvbSBzdGFzaCwgd2lsbCBjaGFuZ2Ugc3RhdGUgaW4gcGxhY2UgdmlhIHNpZGUgZWZmZWN0CgoKICAgIHZhciBkaWZmUmVzdWx0cyA9ICgwLCBfZGlmZl9vYmplY3QuYXBwbHlEaWZmKShzdGFzaCwgX2xvZGFzaC5kZWZhdWx0LmRlZmF1bHRzKHt9LCBzdGF0ZSwgdGhpcy5fZGVmYXVsdHMpKTsKCiAgICBpZiAoZGlmZlJlc3VsdHMua2V5cy5sZW5ndGgpIHsKICAgICAgdGhpcy5lbWl0KCdzYXZlX3dpdGhfY2hhbmdlcycsIGRpZmZSZXN1bHRzLmtleXMpOwogICAgfSAvLyBwZXJzaXN0IHRoZSBzdGF0ZSBpbiB0aGUgVVJMCgoKICAgIHZhciBzZWFyY2ggPSAkbG9jYXRpb24uc2VhcmNoKCk7CiAgICBzZWFyY2hbdGhpcy5fdXJsUGFyYW1dID0gdGhpcy50b1F1ZXJ5UGFyYW0oc3RhdGUpOwoKICAgIGlmIChyZXBsYWNlKSB7CiAgICAgICRsb2NhdGlvbi5zZWFyY2goc2VhcmNoKS5yZXBsYWNlKCk7CiAgICB9IGVsc2UgewogICAgICAkbG9jYXRpb24uc2VhcmNoKHNlYXJjaCk7CiAgICB9CiAgfTsKICAvKioKICAgKiBDYWxscyBzYXZlIHdpdGggYSBmb3JjZWQgcmVwbGFjZQogICAqIEByZXR1cm5zIHt2b2lkfQogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXN0YXRlTWFuYWdlbWVudENvbmZpZy5lbmFibGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLnNhdmUodHJ1ZSk7CiAgfTsKICAvKioKICAgKiBSZXNldHMgdGhlIHN0YXRlIHRvIHRoZSBkZWZhdWx0cwogICAqCiAgICogQHJldHVybnMge3ZvaWR9CiAgICovCgoKICBTdGF0ZS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXN0YXRlTWFuYWdlbWVudENvbmZpZy5lbmFibGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBrYm5VcmwucmVtb3ZlUGFyYW0odGhpcy5nZXRRdWVyeVBhcmFtTmFtZSgpKTsgLy8gYXBwbHkgZGlmZiB0byBhdHRyaWJ1dGVzIGZyb20gZGVmYXVsdHMsIHRoaXMgaXMgc2lkZSBlZmZlY3Rpbmcgc28KICAgIC8vIGl0IHdpbGwgY2hhbmdlIHRoZSBzdGF0ZSBpbiBwbGFjZS4KCiAgICB2YXIgZGlmZlJlc3VsdHMgPSAoMCwgX2RpZmZfb2JqZWN0LmFwcGx5RGlmZikodGhpcywgdGhpcy5fZGVmYXVsdHMpOwoKICAgIGlmIChkaWZmUmVzdWx0cy5rZXlzLmxlbmd0aCkgewogICAgICB0aGlzLmVtaXQoJ3Jlc2V0X3dpdGhfY2hhbmdlcycsIGRpZmZSZXN1bHRzLmtleXMpOwogICAgfQoKICAgIHRoaXMuc2F2ZSgpOwogIH07CiAgLyoqCiAgICogQ2xlYW5zIHVwIHRoZSBzdGF0ZSBvYmplY3QKICAgKiBAcmV0dXJucyB7dm9pZH0KICAgKi8KCgogIFN0YXRlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgdGhpcy5vZmYoKTsgLy8gcmVtb3ZlcyBhbGwgbGlzdGVuZXJzCiAgICAvLyBSZW1vdmVzIHRoZSAkcm91dGVVcGRhdGUgbGlzdGVuZXIKCiAgICB0aGlzLl9jbGVhblVwTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7CiAgICAgIHJldHVybiBsaXN0ZW5lcihfdGhpczIpOwogICAgfSk7CiAgfTsKCiAgU3RhdGUucHJvdG90eXBlLnNldERlZmF1bHRzID0gZnVuY3Rpb24gKGRlZmF1bHRzKSB7CiAgICB0aGlzLl9kZWZhdWx0cyA9IGRlZmF1bHRzIHx8IHt9OwogIH07CiAgLyoqCiAgICogIFBhcnNlIHRoZSBzdGF0ZSBoYXNoIHRvIGl0J3MgdW5zZXJpYWxpemVkIHZhbHVlLiBIYXNoZXMgYXJlIHJlc3RvcmVkCiAgICogIHRvIHRoZWlyIHByZS1oYXNoZWQgc3RhdGUuCiAgICoKICAgKiAgQHBhcmFtICB7c3RyaW5nfSBzdGF0ZUhhc2ggLSBzdGF0ZSBoYXNoIHZhbHVlIGZyb20gdGhlIHF1ZXJ5IHN0cmluZy4KICAgKiAgQHJldHVybiB7YW55fSAtIHRoZSBzdG9yZWQgdmFsdWUsIG9yIG51bGwgaWYgaGFzaCBkb2VzIG5vdCByZXNvbHZlLgogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLl9wYXJzZVN0YXRlSGFzaCA9IGZ1bmN0aW9uIChzdGF0ZUhhc2gpIHsKICAgIHZhciBqc29uID0gdGhpcy5faGFzaGVkSXRlbVN0b3JlLmdldEl0ZW0oc3RhdGVIYXNoKTsKCiAgICBpZiAoanNvbiA9PT0gbnVsbCkgewogICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGREYW5nZXIoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2NvbW1vbi51aS5zdGF0ZU1hbmFnZW1lbnQudW5hYmxlVG9SZXN0b3JlVXJsRXJyb3JNZXNzYWdlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVW5hYmxlIHRvIGNvbXBsZXRlbHkgcmVzdG9yZSB0aGUgVVJMLCBiZSBzdXJlIHRvIHVzZSB0aGUgc2hhcmUgZnVuY3Rpb25hbGl0eS4nCiAgICAgIH0pKTsKICAgIH0KCiAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uKTsKICB9OwogIC8qKgogICAqICBMb29rdXAgdGhlIHZhbHVlIGZvciBhIGhhc2ggYW5kIHJldHVybiBpdCdzIHZhbHVlIGluIHJpc29uIGZvcm1hdCBvciBqdXN0CiAgICogIHJldHVybiBwYXNzZWQgYXJndW1lbnQgaWYgaXQncyBub3QgcmVjb2duaXplZCBhcyBzdGF0ZSBoYXNoLgogICAqCiAgICogIEBwYXJhbSAge3N0cmluZ30gc3RhdGVIYXNoT3JSaXNvbiAtIGVpdGhlciBzdGF0ZSBoYXNoIHZhbHVlIG9yIHJpc29uIHN0cmluZy4KICAgKiAgQHJldHVybiB7c3RyaW5nfSByaXNvbgogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLnRyYW5zbGF0ZUhhc2hUb1Jpc29uID0gZnVuY3Rpb24gKHN0YXRlSGFzaE9yUmlzb24pIHsKICAgIGlmICgoMCwgX3B1YmxpYy5pc1N0YXRlSGFzaCkoc3RhdGVIYXNoT3JSaXNvbikpIHsKICAgICAgcmV0dXJuIF9yaXNvbk5vZGUuZGVmYXVsdC5lbmNvZGUodGhpcy5fcGFyc2VTdGF0ZUhhc2goc3RhdGVIYXNoT3JSaXNvbikpOwogICAgfQoKICAgIHJldHVybiBzdGF0ZUhhc2hPclJpc29uOwogIH07CgogIFN0YXRlLnByb3RvdHlwZS5pc0hhc2hpbmdFbmFibGVkID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuICEhY29uZmlnLmdldCgnc3RhdGU6c3RvcmVJblNlc3Npb25TdG9yYWdlJyk7CiAgfTsKICAvKioKICAgKiAgUHJvZHVjZSB0aGUgaGFzaCB2ZXJzaW9uIG9mIHRoZSBzdGF0ZSBpbiBpdCdzIGN1cnJlbnQgcG9zaXRpb24KICAgKgogICAqICBAcmV0dXJuIHtzdHJpbmd9CiAgICovCgoKICBTdGF0ZS5wcm90b3R5cGUudG9RdWVyeVBhcmFtID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLnRvT2JqZWN0KCk7CgogICAgaWYgKCF0aGlzLmlzSGFzaGluZ0VuYWJsZWQoKSkgewogICAgICByZXR1cm4gX3Jpc29uTm9kZS5kZWZhdWx0LmVuY29kZShzdGF0ZSk7CiAgICB9IC8vIFdlIG5lZWQgdG8gc3RyaXAgb3V0IEFuZ3VsYXItc3BlY2lmaWMgcHJvcGVydGllcy4KCgogICAgdmFyIGpzb24gPSBfYW5ndWxhci5kZWZhdWx0LnRvSnNvbihzdGF0ZSk7CgogICAgdmFyIGhhc2ggPSAoMCwgX3B1YmxpYy5jcmVhdGVTdGF0ZUhhc2gpKGpzb24pOwoKICAgIHZhciBpc0l0ZW1TZXQgPSB0aGlzLl9oYXNoZWRJdGVtU3RvcmUuc2V0SXRlbShoYXNoLCBqc29uKTsKCiAgICBpZiAoaXNJdGVtU2V0KSB7CiAgICAgIHJldHVybiBoYXNoOwogICAgfSAvLyBJZiB3ZSByYW4gb3V0IG9mIHNwYWNlIHRyeWluZyB0byBwZXJzaXN0IHRoZSBzdGF0ZSwgbm90aWZ5IHRoZSB1c2VyLgoKCiAgICB2YXIgbWVzc2FnZSA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCdjb21tb24udWkuc3RhdGVNYW5hZ2VtZW50LnVuYWJsZVRvU3RvcmVIaXN0b3J5SW5TZXNzaW9uRXJyb3JNZXNzYWdlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0tpYmFuYSBpcyB1bmFibGUgdG8gc3RvcmUgaGlzdG9yeSBpdGVtcyBpbiB5b3VyIHNlc3Npb24gJyArICJiZWNhdXNlIGl0IGlzIGZ1bGwgYW5kIHRoZXJlIGRvbid0IHNlZW0gdG8gYmUgaXRlbXMgYW55IGl0ZW1zIHNhZmUgIiArICd0byBkZWxldGUuXG5cbicgKyAnVGhpcyBjYW4gdXN1YWxseSBiZSBmaXhlZCBieSBtb3ZpbmcgdG8gYSBmcmVzaCB0YWIsIGJ1dCBjb3VsZCAnICsgJ2JlIGNhdXNlZCBieSBhIGxhcmdlciBpc3N1ZS4gSWYgeW91IGFyZSBzZWVpbmcgdGhpcyBtZXNzYWdlIHJlZ3VsYXJseSwgJyArICdwbGVhc2UgZmlsZSBhbiBpc3N1ZSBhdCB7Z2l0SHViSXNzdWVzVXJsfS4nLAogICAgICB2YWx1ZXM6IHsKICAgICAgICBnaXRIdWJJc3N1ZXNVcmw6ICdodHRwczovL2dpdGh1Yi5jb20vZWxhc3RpYy9raWJhbmEvaXNzdWVzJwogICAgICB9CiAgICB9KTsKCiAgICAoMCwgX25vdGlmeS5mYXRhbEVycm9yKShuZXcgRXJyb3IobWVzc2FnZSkpOwogIH07CiAgLyoqCiAgICogIEdldCB0aGUgcXVlcnkgc3RyaW5nIHBhcmFtZXRlciBuYW1lIHdoZXJlIHRoaXMgc3RhdGUgd3JpdGVzIGFuZCByZWFkcwogICAqICBAcmV0dXJuIHtzdHJpbmd9CiAgICovCgoKICBTdGF0ZS5wcm90b3R5cGUuZ2V0UXVlcnlQYXJhbU5hbWUgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5fdXJsUGFyYW07CiAgfTsKICAvKioKICAgKiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGVhY2ggcHJvcGVydHkgbmFtZSBhbmQgdmFsdWUgY29ycmVzcG9uZGluZyB0byB0aGUgZW50cmllcyBpbiB0aGlzIGNvbGxlY3Rpb24KICAgKiBleGNsdWRpbmcgZmllbGRzIHN0YXJ0ZWQgZnJvbSAnJCcsICdfJyBhbmQgYWxsIG1ldGhvZHMKICAgKgogICAqIEByZXR1cm4ge29iamVjdH0KICAgKi8KCgogIFN0YXRlLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBfbG9kYXNoLmRlZmF1bHQub21pdCh0aGlzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkgewogICAgICByZXR1cm4ga2V5LmNoYXJBdCgwKSA9PT0gJyQnIHx8IGtleS5jaGFyQXQoMCkgPT09ICdfJyB8fCBfbG9kYXNoLmRlZmF1bHQuaXNGdW5jdGlvbih2YWx1ZSk7CiAgICB9KTsKICB9OwogIC8qKiBBbGlhcyBmb3IgbWV0aG9kICd0b09iamVjdCcKICAgKgogICAqIEBvYnNvbGV0ZSBQbGVhc2UgdXNlICd0b09iamVjdCcgbWV0aG9kIGluc3RlYWQKICAgKiBAcmV0dXJuIHtvYmplY3R9CiAgICovCgoKICBTdGF0ZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMudG9PYmplY3QoKTsKICB9OwoKICByZXR1cm4gU3RhdGU7Cn0="},null]}