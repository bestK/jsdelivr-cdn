{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/datavisualizer/index_based/page.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/datavisualizer/index_based/page.js","mtime":1585205045668},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlBhZ2UgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3J4anMgPSByZXF1aXJlKCJyeGpzIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfdGltZWZpbHRlciA9IHJlcXVpcmUoInVpL3RpbWVmaWx0ZXIiKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3B1YmxpYyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9wbHVnaW5zL2RhdGEvcHVibGljIik7Cgp2YXIgX25hdmlnYXRpb25fbWVudSA9IHJlcXVpcmUoIi4uLy4uL2NvbXBvbmVudHMvbmF2aWdhdGlvbl9tZW51Iik7Cgp2YXIgX2ZpZWxkX3R5cGVzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tbW9uL2NvbnN0YW50cy9maWVsZF90eXBlcyIpOwoKdmFyIF9zZWFyY2ggPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vY29uc3RhbnRzL3NlYXJjaCIpOwoKdmFyIF9jaGVja19saWNlbnNlID0gcmVxdWlyZSgiLi4vLi4vbGljZW5zZS9jaGVja19saWNlbnNlIik7Cgp2YXIgX2NoZWNrX3ByaXZpbGVnZSA9IHJlcXVpcmUoIi4uLy4uL3ByaXZpbGVnZS9jaGVja19wcml2aWxlZ2UiKTsKCnZhciBfY2hlY2tfbWxfbm9kZXMgPSByZXF1aXJlKCIuLi8uLi9tbF9ub2Rlc19jaGVjay9jaGVja19tbF9ub2RlcyIpOwoKdmFyIF9mdWxsX3RpbWVfcmFuZ2Vfc2VsZWN0b3IgPSByZXF1aXJlKCIuLi8uLi9jb21wb25lbnRzL2Z1bGxfdGltZV9yYW5nZV9zZWxlY3RvciIpOwoKdmFyIF90aW1lZmlsdGVyX3JlZnJlc2hfc2VydmljZSA9IHJlcXVpcmUoIi4uLy4uL3NlcnZpY2VzL3RpbWVmaWx0ZXJfcmVmcmVzaF9zZXJ2aWNlIik7Cgp2YXIgX2tpYmFuYSA9IHJlcXVpcmUoIi4uLy4uL2NvbnRleHRzL2tpYmFuYSIpOwoKdmFyIF9maWVsZF90eXBlc191dGlscyA9IHJlcXVpcmUoIi4uLy4uL3V0aWwvZmllbGRfdHlwZXNfdXRpbHMiKTsKCnZhciBfaW5kZXhfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi91dGlsL2luZGV4X3V0aWxzIik7Cgp2YXIgX3RpbWVfYnVja2V0cyA9IHJlcXVpcmUoIi4uLy4uL3V0aWwvdGltZV9idWNrZXRzIik7Cgp2YXIgX3VybF9zdGF0ZSA9IHJlcXVpcmUoIi4uLy4uL3V0aWwvdXJsX3N0YXRlIik7Cgp2YXIgX2FjdGlvbnNfcGFuZWwgPSByZXF1aXJlKCIuL2NvbXBvbmVudHMvYWN0aW9uc19wYW5lbCIpOwoKdmFyIF9maWVsZHNfcGFuZWwgPSByZXF1aXJlKCIuL2NvbXBvbmVudHMvZmllbGRzX3BhbmVsIik7Cgp2YXIgX3NlYXJjaF9wYW5lbCA9IHJlcXVpcmUoIi4vY29tcG9uZW50cy9zZWFyY2hfcGFuZWwiKTsKCnZhciBfZGF0YV9sb2FkZXIgPSByZXF1aXJlKCIuL2RhdGFfbG9hZGVyIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9Cgp2YXIgZGVmYXVsdFNlYXJjaFF1ZXJ5ID0gewogIG1hdGNoX2FsbDoge30KfTsKCmZ1bmN0aW9uIGdldERlZmF1bHRQYWdlU3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHNlYXJjaFN0cmluZzogJycsCiAgICBzZWFyY2hRdWVyeTogZGVmYXVsdFNlYXJjaFF1ZXJ5LAogICAgc2VhcmNoUXVlcnlMYW5ndWFnZTogX3NlYXJjaC5TRUFSQ0hfUVVFUllfTEFOR1VBR0UuS1VFUlksCiAgICBzYW1wbGVyU2hhcmRTaXplOiA1MDAwLAogICAgb3ZlcmFsbFN0YXRzOiB7CiAgICAgIHRvdGFsQ291bnQ6IDAsCiAgICAgIGFnZ3JlZ2F0YWJsZUV4aXN0c0ZpZWxkczogW10sCiAgICAgIGFnZ3JlZ2F0YWJsZU5vdEV4aXN0c0ZpZWxkczogW10sCiAgICAgIG5vbkFnZ3JlZ2F0YWJsZUV4aXN0c0ZpZWxkczogW10sCiAgICAgIG5vbkFnZ3JlZ2F0YWJsZU5vdEV4aXN0c0ZpZWxkczogW10KICAgIH0sCiAgICBtZXRyaWNDb25maWdzOiBbXSwKICAgIHRvdGFsTWV0cmljRmllbGRDb3VudDogMCwKICAgIHBvcHVsYXRlZE1ldHJpY0ZpZWxkQ291bnQ6IDAsCiAgICBzaG93QWxsTWV0cmljczogZmFsc2UsCiAgICBub25NZXRyaWNDb25maWdzOiBbXSwKICAgIHRvdGFsTm9uTWV0cmljRmllbGRDb3VudDogMCwKICAgIHBvcHVsYXRlZE5vbk1ldHJpY0ZpZWxkQ291bnQ6IDAsCiAgICBzaG93QWxsTm9uTWV0cmljczogZmFsc2UsCiAgICBub25NZXRyaWNTaG93RmllbGRUeXBlOiAnKicKICB9Owp9Cgp2YXIgUGFnZSA9IGZ1bmN0aW9uIFBhZ2UoKSB7CiAgdmFyIF9nbG9iYWxTdGF0ZSR0aW1lLCBfZ2xvYmFsU3RhdGUkdGltZTIsIF9nbG9iYWxTdGF0ZSRyZWZyZXNoSSwgX2dsb2JhbFN0YXRlJHJlZnJlc2hJMjsKCiAgdmFyIGtpYmFuYUNvbnRleHQgPSAoMCwgX2tpYmFuYS51c2VLaWJhbmFDb250ZXh0KSgpOwogIHZhciBjb21iaW5lZFF1ZXJ5ID0ga2liYW5hQ29udGV4dC5jb21iaW5lZFF1ZXJ5LAogICAgICBjdXJyZW50SW5kZXhQYXR0ZXJuID0ga2liYW5hQ29udGV4dC5jdXJyZW50SW5kZXhQYXR0ZXJuLAogICAgICBjdXJyZW50U2F2ZWRTZWFyY2ggPSBraWJhbmFDb250ZXh0LmN1cnJlbnRTYXZlZFNlYXJjaCwKICAgICAga2liYW5hQ29uZmlnID0ga2liYW5hQ29udGV4dC5raWJhbmFDb25maWc7CiAgdmFyIGRhdGFMb2FkZXIgPSBuZXcgX2RhdGFfbG9hZGVyLkRhdGFMb2FkZXIoY3VycmVudEluZGV4UGF0dGVybiwga2liYW5hQ29uZmlnKTsKCiAgdmFyIF91c2VVcmxTdGF0ZSA9ICgwLCBfdXJsX3N0YXRlLnVzZVVybFN0YXRlKSgnX2cnKSwKICAgICAgX3VzZVVybFN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VVcmxTdGF0ZSwgMiksCiAgICAgIGdsb2JhbFN0YXRlID0gX3VzZVVybFN0YXRlMlswXSwKICAgICAgc2V0R2xvYmFsU3RhdGUgPSBfdXNlVXJsU3RhdGUyWzFdOwoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgaWYgKChnbG9iYWxTdGF0ZSA9PT0gbnVsbCB8fCBnbG9iYWxTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ2xvYmFsU3RhdGUudGltZSkgIT09IHVuZGVmaW5lZCkgewogICAgICBfdGltZWZpbHRlci50aW1lZmlsdGVyLnNldFRpbWUoewogICAgICAgIGZyb206IGdsb2JhbFN0YXRlLnRpbWUuZnJvbSwKICAgICAgICB0bzogZ2xvYmFsU3RhdGUudGltZS50bwogICAgICB9KTsKICAgIH0KICB9LCBbZ2xvYmFsU3RhdGUgPT09IG51bGwgfHwgZ2xvYmFsU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZ2xvYmFsU3RhdGUkdGltZSA9IGdsb2JhbFN0YXRlLnRpbWUpID09PSBudWxsIHx8IF9nbG9iYWxTdGF0ZSR0aW1lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2xvYmFsU3RhdGUkdGltZS5mcm9tLCBnbG9iYWxTdGF0ZSA9PT0gbnVsbCB8fCBnbG9iYWxTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9nbG9iYWxTdGF0ZSR0aW1lMiA9IGdsb2JhbFN0YXRlLnRpbWUpID09PSBudWxsIHx8IF9nbG9iYWxTdGF0ZSR0aW1lMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2dsb2JhbFN0YXRlJHRpbWUyLnRvXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGlmICgoZ2xvYmFsU3RhdGUgPT09IG51bGwgfHwgZ2xvYmFsU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdsb2JhbFN0YXRlLnJlZnJlc2hJbnRlcnZhbCkgIT09IHVuZGVmaW5lZCkgewogICAgICBfdGltZWZpbHRlci50aW1lZmlsdGVyLnNldFJlZnJlc2hJbnRlcnZhbChnbG9iYWxTdGF0ZS5yZWZyZXNoSW50ZXJ2YWwpOwogICAgfQogIH0sIFtnbG9iYWxTdGF0ZSA9PT0gbnVsbCB8fCBnbG9iYWxTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9nbG9iYWxTdGF0ZSRyZWZyZXNoSSA9IGdsb2JhbFN0YXRlLnJlZnJlc2hJbnRlcnZhbCkgPT09IG51bGwgfHwgX2dsb2JhbFN0YXRlJHJlZnJlc2hJID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2xvYmFsU3RhdGUkcmVmcmVzaEkucGF1c2UsIGdsb2JhbFN0YXRlID09PSBudWxsIHx8IGdsb2JhbFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2dsb2JhbFN0YXRlJHJlZnJlc2hJMiA9IGdsb2JhbFN0YXRlLnJlZnJlc2hJbnRlcnZhbCkgPT09IG51bGwgfHwgX2dsb2JhbFN0YXRlJHJlZnJlc2hJMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2dsb2JhbFN0YXRlJHJlZnJlc2hJMi52YWx1ZV0pOwoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoMCksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBsYXN0UmVmcmVzaCA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldExhc3RSZWZyZXNoID0gX3VzZVN0YXRlMlsxXTsKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGlmIChjdXJyZW50SW5kZXhQYXR0ZXJuLnRpbWVGaWVsZE5hbWUgIT09IHVuZGVmaW5lZCkgewogICAgICBfdGltZWZpbHRlci50aW1lZmlsdGVyLmVuYWJsZVRpbWVSYW5nZVNlbGVjdG9yKCk7CiAgICB9IGVsc2UgewogICAgICBfdGltZWZpbHRlci50aW1lZmlsdGVyLmRpc2FibGVUaW1lUmFuZ2VTZWxlY3RvcigpOwogICAgfQoKICAgIF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuZW5hYmxlQXV0b1JlZnJlc2hTZWxlY3RvcigpOwoKICAgICgwLCBfaW5kZXhfdXRpbHMudGltZUJhc2VkSW5kZXhDaGVjaykoY3VycmVudEluZGV4UGF0dGVybiwgdHJ1ZSk7CiAgfSwgW10pOyAvLyBPYnRhaW4gdGhlIGxpc3Qgb2Ygbm9uIG1ldHJpYyBmaWVsZCB0eXBlcyB3aGljaCBhcHBlYXIgaW4gdGhlIGluZGV4IHBhdHRlcm4uCgogIHZhciBpbmRleGVkRmllbGRUeXBlcyA9IFtdOwogIHZhciBpbmRleFBhdHRlcm5GaWVsZHMgPSBjdXJyZW50SW5kZXhQYXR0ZXJuLmZpZWxkczsKICBpbmRleFBhdHRlcm5GaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHsKICAgIGlmIChmaWVsZC5zY3JpcHRlZCAhPT0gdHJ1ZSkgewogICAgICB2YXIgZGF0YVZpc3VhbGl6ZXJUeXBlID0gKDAsIF9maWVsZF90eXBlc191dGlscy5rYm5UeXBlVG9NTEpvYlR5cGUpKGZpZWxkKTsKCiAgICAgIGlmIChkYXRhVmlzdWFsaXplclR5cGUgIT09IHVuZGVmaW5lZCAmJiAhaW5kZXhlZEZpZWxkVHlwZXMuaW5jbHVkZXMoZGF0YVZpc3VhbGl6ZXJUeXBlKSAmJiBkYXRhVmlzdWFsaXplclR5cGUgIT09IF9maWVsZF90eXBlcy5NTF9KT0JfRklFTERfVFlQRVMuTlVNQkVSKSB7CiAgICAgICAgaW5kZXhlZEZpZWxkVHlwZXMucHVzaChkYXRhVmlzdWFsaXplclR5cGUpOwogICAgICB9CiAgICB9CiAgfSk7CiAgaW5kZXhlZEZpZWxkVHlwZXMgPSBpbmRleGVkRmllbGRUeXBlcy5zb3J0KCk7CiAgdmFyIGRlZmF1bHRzID0gZ2V0RGVmYXVsdFBhZ2VTdGF0ZSgpOwogIHZhciBzaG93QWN0aW9uc1BhbmVsID0gKDAsIF9jaGVja19saWNlbnNlLmlzRnVsbExpY2Vuc2UpKCkgJiYgKDAsIF9jaGVja19wcml2aWxlZ2UuY2hlY2tQZXJtaXNzaW9uKSgnY2FuQ3JlYXRlSm9iJykgJiYgKDAsIF9jaGVja19tbF9ub2Rlcy5tbE5vZGVzQXZhaWxhYmxlKSgpICYmIGN1cnJlbnRJbmRleFBhdHRlcm4udGltZUZpZWxkTmFtZSAhPT0gdW5kZWZpbmVkOwoKICB2YXIgX2V4dHJhY3RTZWFyY2hEYXRhID0gZXh0cmFjdFNlYXJjaERhdGEoY3VycmVudFNhdmVkU2VhcmNoKSwKICAgICAgaW5pdFNlYXJjaFF1ZXJ5ID0gX2V4dHJhY3RTZWFyY2hEYXRhLnNlYXJjaFF1ZXJ5LAogICAgICBpbml0U2VhcmNoU3RyaW5nID0gX2V4dHJhY3RTZWFyY2hEYXRhLnNlYXJjaFN0cmluZywKICAgICAgaW5pdFF1ZXJ5TGFuZ3VhZ2UgPSBfZXh0cmFjdFNlYXJjaERhdGEucXVlcnlMYW5ndWFnZTsKCiAgdmFyIF91c2VTdGF0ZTMgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShpbml0U2VhcmNoU3RyaW5nKSwKICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLAogICAgICBzZWFyY2hTdHJpbmcgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRTZWFyY2hTdHJpbmcgPSBfdXNlU3RhdGU0WzFdOwoKICB2YXIgX3VzZVN0YXRlNSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGluaXRTZWFyY2hRdWVyeSksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgc2VhcmNoUXVlcnkgPSBfdXNlU3RhdGU2WzBdLAogICAgICBzZXRTZWFyY2hRdWVyeSA9IF91c2VTdGF0ZTZbMV07CgogIHZhciBfdXNlU3RhdGU3ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoaW5pdFF1ZXJ5TGFuZ3VhZ2UpLAogICAgICBfdXNlU3RhdGU4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNywgMSksCiAgICAgIHNlYXJjaFF1ZXJ5TGFuZ3VhZ2UgPSBfdXNlU3RhdGU4WzBdOwoKICB2YXIgX3VzZVN0YXRlOSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGRlZmF1bHRzLnNhbXBsZXJTaGFyZFNpemUpLAogICAgICBfdXNlU3RhdGUxMCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTksIDIpLAogICAgICBzYW1wbGVyU2hhcmRTaXplID0gX3VzZVN0YXRlMTBbMF0sCiAgICAgIHNldFNhbXBsZXJTaGFyZFNpemUgPSBfdXNlU3RhdGUxMFsxXTsgLy8gVE9ETyAtIHR5cGUgb3ZlcmFsbFN0YXRzIGFuZCBzdGF0cwoKCiAgdmFyIF91c2VTdGF0ZTExID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMub3ZlcmFsbFN0YXRzKSwKICAgICAgX3VzZVN0YXRlMTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxMSwgMiksCiAgICAgIG92ZXJhbGxTdGF0cyA9IF91c2VTdGF0ZTEyWzBdLAogICAgICBzZXRPdmVyYWxsU3RhdHMgPSBfdXNlU3RhdGUxMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTEzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMubWV0cmljQ29uZmlncyksCiAgICAgIF91c2VTdGF0ZTE0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTMsIDIpLAogICAgICBtZXRyaWNDb25maWdzID0gX3VzZVN0YXRlMTRbMF0sCiAgICAgIHNldE1ldHJpY0NvbmZpZ3MgPSBfdXNlU3RhdGUxNFsxXTsKCiAgdmFyIF91c2VTdGF0ZTE1ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMudG90YWxNZXRyaWNGaWVsZENvdW50KSwKICAgICAgX3VzZVN0YXRlMTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxNSwgMiksCiAgICAgIHRvdGFsTWV0cmljRmllbGRDb3VudCA9IF91c2VTdGF0ZTE2WzBdLAogICAgICBzZXRUb3RhbE1ldHJpY0ZpZWxkQ291bnQgPSBfdXNlU3RhdGUxNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTE3ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMucG9wdWxhdGVkTWV0cmljRmllbGRDb3VudCksCiAgICAgIF91c2VTdGF0ZTE4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTcsIDIpLAogICAgICBwb3B1bGF0ZWRNZXRyaWNGaWVsZENvdW50ID0gX3VzZVN0YXRlMThbMF0sCiAgICAgIHNldFBvcHVsYXRlZE1ldHJpY0ZpZWxkQ291bnQgPSBfdXNlU3RhdGUxOFsxXTsKCiAgdmFyIF91c2VTdGF0ZTE5ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMuc2hvd0FsbE1ldHJpY3MpLAogICAgICBfdXNlU3RhdGUyMCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTE5LCAyKSwKICAgICAgc2hvd0FsbE1ldHJpY3MgPSBfdXNlU3RhdGUyMFswXSwKICAgICAgc2V0U2hvd0FsbE1ldHJpY3MgPSBfdXNlU3RhdGUyMFsxXTsKCiAgdmFyIF91c2VTdGF0ZTIxID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMubWV0cmljRmllbGRRdWVyeSksCiAgICAgIF91c2VTdGF0ZTIyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMjEsIDIpLAogICAgICBtZXRyaWNGaWVsZFF1ZXJ5ID0gX3VzZVN0YXRlMjJbMF0sCiAgICAgIHNldE1ldHJpY0ZpZWxkUXVlcnkgPSBfdXNlU3RhdGUyMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTIzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMubm9uTWV0cmljQ29uZmlncyksCiAgICAgIF91c2VTdGF0ZTI0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMjMsIDIpLAogICAgICBub25NZXRyaWNDb25maWdzID0gX3VzZVN0YXRlMjRbMF0sCiAgICAgIHNldE5vbk1ldHJpY0NvbmZpZ3MgPSBfdXNlU3RhdGUyNFsxXTsKCiAgdmFyIF91c2VTdGF0ZTI1ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMudG90YWxOb25NZXRyaWNGaWVsZENvdW50KSwKICAgICAgX3VzZVN0YXRlMjYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUyNSwgMiksCiAgICAgIHRvdGFsTm9uTWV0cmljRmllbGRDb3VudCA9IF91c2VTdGF0ZTI2WzBdLAogICAgICBzZXRUb3RhbE5vbk1ldHJpY0ZpZWxkQ291bnQgPSBfdXNlU3RhdGUyNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTI3ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMucG9wdWxhdGVkTm9uTWV0cmljRmllbGRDb3VudCksCiAgICAgIF91c2VTdGF0ZTI4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMjcsIDIpLAogICAgICBwb3B1bGF0ZWROb25NZXRyaWNGaWVsZENvdW50ID0gX3VzZVN0YXRlMjhbMF0sCiAgICAgIHNldFBvcHVsYXRlZE5vbk1ldHJpY0ZpZWxkQ291bnQgPSBfdXNlU3RhdGUyOFsxXTsKCiAgdmFyIF91c2VTdGF0ZTI5ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMuc2hvd0FsbE5vbk1ldHJpY3MpLAogICAgICBfdXNlU3RhdGUzMCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTI5LCAyKSwKICAgICAgc2hvd0FsbE5vbk1ldHJpY3MgPSBfdXNlU3RhdGUzMFswXSwKICAgICAgc2V0U2hvd0FsbE5vbk1ldHJpY3MgPSBfdXNlU3RhdGUzMFsxXTsKCiAgdmFyIF91c2VTdGF0ZTMxID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMubm9uTWV0cmljU2hvd0ZpZWxkVHlwZSksCiAgICAgIF91c2VTdGF0ZTMyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMzEsIDIpLAogICAgICBub25NZXRyaWNTaG93RmllbGRUeXBlID0gX3VzZVN0YXRlMzJbMF0sCiAgICAgIHNldE5vbk1ldHJpY1Nob3dGaWVsZFR5cGUgPSBfdXNlU3RhdGUzMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTMzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdHMubm9uTWV0cmljRmllbGRRdWVyeSksCiAgICAgIF91c2VTdGF0ZTM0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMzMsIDIpLAogICAgICBub25NZXRyaWNGaWVsZFF1ZXJ5ID0gX3VzZVN0YXRlMzRbMF0sCiAgICAgIHNldE5vbk1ldHJpY0ZpZWxkUXVlcnkgPSBfdXNlU3RhdGUzNFsxXTsKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIHZhciB0aW1lVXBkYXRlU3Vic2NyaXB0aW9uID0gKDAsIF9yeGpzLm1lcmdlKShfdGltZWZpbHRlci50aW1lZmlsdGVyLmdldFRpbWVVcGRhdGUkKCksIF90aW1lZmlsdGVyX3JlZnJlc2hfc2VydmljZS5tbFRpbWVmaWx0ZXJSZWZyZXNoJCkuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsKICAgICAgc2V0R2xvYmFsU3RhdGUoewogICAgICAgIHRpbWU6IF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuZ2V0VGltZSgpLAogICAgICAgIHJlZnJlc2hJbnRlcnZhbDogX3RpbWVmaWx0ZXIudGltZWZpbHRlci5nZXRSZWZyZXNoSW50ZXJ2YWwoKQogICAgICB9KTsKICAgICAgc2V0TGFzdFJlZnJlc2goRGF0ZS5ub3coKSk7CiAgICB9KTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRpbWVVcGRhdGVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsKICAgIH07CiAgfSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGxvYWRPdmVyYWxsU3RhdHMoKTsKICB9LCBbc2VhcmNoUXVlcnksIHNhbXBsZXJTaGFyZFNpemUsIGxhc3RSZWZyZXNoXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGNyZWF0ZU1ldHJpY0NhcmRzKCk7CiAgICBjcmVhdGVOb25NZXRyaWNDYXJkcygpOwogIH0sIFtvdmVyYWxsU3RhdHNdKTsKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgbG9hZE1ldHJpY0ZpZWxkU3RhdHMoKTsKICB9LCBbbWV0cmljQ29uZmlnc10pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBsb2FkTm9uTWV0cmljRmllbGRTdGF0cygpOwogIH0sIFtub25NZXRyaWNDb25maWdzXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGNyZWF0ZU1ldHJpY0NhcmRzKCk7CiAgfSwgW3Nob3dBbGxNZXRyaWNzLCBtZXRyaWNGaWVsZFF1ZXJ5XSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGNyZWF0ZU5vbk1ldHJpY0NhcmRzKCk7CiAgfSwgW3Nob3dBbGxOb25NZXRyaWNzLCBub25NZXRyaWNTaG93RmllbGRUeXBlLCBub25NZXRyaWNGaWVsZFF1ZXJ5XSk7CiAgLyoqCiAgICogRXh0cmFjdCBxdWVyeSBkYXRhIGZyb20gdGhlIHNhdmVkIHNlYXJjaCBvYmplY3QuCiAgICovCgogIGZ1bmN0aW9uIGV4dHJhY3RTZWFyY2hEYXRhKHNhdmVkU2VhcmNoKSB7CiAgICBpZiAoIXNhdmVkU2VhcmNoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgc2VhcmNoUXVlcnk6IGRlZmF1bHRzLnNlYXJjaFF1ZXJ5LAogICAgICAgIHNlYXJjaFN0cmluZzogZGVmYXVsdHMuc2VhcmNoU3RyaW5nLAogICAgICAgIHF1ZXJ5TGFuZ3VhZ2U6IGRlZmF1bHRzLnNlYXJjaFF1ZXJ5TGFuZ3VhZ2UKICAgICAgfTsKICAgIH0KCiAgICB2YXIgX2dldFF1ZXJ5RnJvbVNhdmVkU2VhID0gKDAsIF9pbmRleF91dGlscy5nZXRRdWVyeUZyb21TYXZlZFNlYXJjaCkoc2F2ZWRTZWFyY2gpLAogICAgICAgIHF1ZXJ5ID0gX2dldFF1ZXJ5RnJvbVNhdmVkU2VhLnF1ZXJ5OwoKICAgIHZhciBxdWVyeUxhbmd1YWdlID0gcXVlcnkubGFuZ3VhZ2U7CiAgICB2YXIgcXJ5U3RyaW5nID0gcXVlcnkucXVlcnk7CiAgICB2YXIgcXJ5OwoKICAgIGlmIChxdWVyeUxhbmd1YWdlID09PSBfc2VhcmNoLlNFQVJDSF9RVUVSWV9MQU5HVUFHRS5LVUVSWSkgewogICAgICB2YXIgYXN0ID0gX3B1YmxpYy5lc0t1ZXJ5LmZyb21LdWVyeUV4cHJlc3Npb24ocXJ5U3RyaW5nKTsKCiAgICAgIHFyeSA9IF9wdWJsaWMuZXNLdWVyeS50b0VsYXN0aWNzZWFyY2hRdWVyeShhc3QsIGN1cnJlbnRJbmRleFBhdHRlcm4pOwogICAgfSBlbHNlIHsKICAgICAgcXJ5ID0gX3B1YmxpYy5lc1F1ZXJ5Lmx1Y2VuZVN0cmluZ1RvRHNsKHFyeVN0cmluZyk7CgogICAgICBfcHVibGljLmVzUXVlcnkuZGVjb3JhdGVRdWVyeShxcnksIGtpYmFuYUNvbmZpZy5nZXQoJ3F1ZXJ5OnF1ZXJ5U3RyaW5nOm9wdGlvbnMnKSk7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoUXVlcnk6IHFyeSwKICAgICAgc2VhcmNoU3RyaW5nOiBxcnlTdHJpbmcsCiAgICAgIHF1ZXJ5TGFuZ3VhZ2U6IHF1ZXJ5TGFuZ3VhZ2UKICAgIH07CiAgfQoKICBmdW5jdGlvbiBsb2FkT3ZlcmFsbFN0YXRzKCkgewogICAgdmFyIHRmLCBlYXJsaWVzdCwgbGF0ZXN0LCBhY3RpdmVCb3VuZHMsIGFsbFN0YXRzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBsb2FkT3ZlcmFsbFN0YXRzJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgdGYgPSBfdGltZWZpbHRlci50aW1lZmlsdGVyOwogICAgICAgICAgICBhY3RpdmVCb3VuZHMgPSB0Zi5nZXRBY3RpdmVCb3VuZHMoKTsKCiAgICAgICAgICAgIGlmICghKGN1cnJlbnRJbmRleFBhdHRlcm4udGltZUZpZWxkTmFtZSAhPT0gdW5kZWZpbmVkICYmIGFjdGl2ZUJvdW5kcyA9PT0gdW5kZWZpbmVkKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXhQYXR0ZXJuLnRpbWVGaWVsZE5hbWUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIGVhcmxpZXN0ID0gYWN0aXZlQm91bmRzLm1pbi52YWx1ZU9mKCk7CiAgICAgICAgICAgICAgbGF0ZXN0ID0gYWN0aXZlQm91bmRzLm1heC52YWx1ZU9mKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA1OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChkYXRhTG9hZGVyLmxvYWRPdmVyYWxsRGF0YShzZWFyY2hRdWVyeSwgc2FtcGxlclNoYXJkU2l6ZSwgZWFybGllc3QsIGxhdGVzdCkpOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgYWxsU3RhdHMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBzZXRPdmVyYWxsU3RhdHMoYWxsU3RhdHMpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMjsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSg1KTsKICAgICAgICAgICAgZGF0YUxvYWRlci5kaXNwbGF5RXJyb3IoX2NvbnRleHQudDApOwoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgbnVsbCwgbnVsbCwgW1s1LCAxMl1dKTsKICB9CgogIGZ1bmN0aW9uIGxvYWRNZXRyaWNGaWVsZFN0YXRzKCkgewogICAgdmFyIGNvbmZpZ3NUb0xvYWQsIGV4aXN0TWV0cmljRmllbGRzLCBidWNrZXRzLCB0ZiwgZWFybGllc3QsIGxhdGVzdCwgYm91bmRzLCBCQVJfVEFSR0VULCBhZ2dJbnRlcnZhbCwgbWV0cmljRmllbGRTdGF0cywgY29uZmlnczsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbG9hZE1ldHJpY0ZpZWxkU3RhdHMkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoIShtZXRyaWNDb25maWdzLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNvbmZpZ3NUb0xvYWQgPSBtZXRyaWNDb25maWdzLmZpbHRlcihmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5leGlzdHNJbkRvY3MgPT09IHRydWUgJiYgY29uZmlnLmxvYWRpbmcgPT09IHRydWU7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKCEoY29uZmlnc1RvTG9hZC5sZW5ndGggPT09IDApKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAvLyBQYXNzIHRoZSBmaWVsZCBuYW1lLCB0eXBlIGFuZCBjYXJkaW5hbGl0eSBpbiB0aGUgcmVxdWVzdC4KICAgICAgICAgICAgLy8gVG9wIHZhbHVlcyB3aWxsIGJlIG9idGFpbmVkIG9uIGEgc2FtcGxlIGlmIGNhcmRpbmFsaXR5ID4gMTAwMDAwLgogICAgICAgICAgICBleGlzdE1ldHJpY0ZpZWxkcyA9IGNvbmZpZ3NUb0xvYWQubWFwKGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICAgICAgICB2YXIgcHJvcHMgPSB7CiAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IGNvbmZpZy5maWVsZE5hbWUsCiAgICAgICAgICAgICAgICB0eXBlOiBjb25maWcudHlwZSwKICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAwCiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgaWYgKGNvbmZpZy5zdGF0cyAhPT0gdW5kZWZpbmVkICYmIGNvbmZpZy5zdGF0cy5jYXJkaW5hbGl0eSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBwcm9wcy5jYXJkaW5hbGl0eSA9IGNvbmZpZy5zdGF0cy5jYXJkaW5hbGl0eTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBwcm9wczsKICAgICAgICAgICAgfSk7IC8vIE9idGFpbiB0aGUgaW50ZXJ2YWwgdG8gdXNlIGZvciBkYXRlIGhpc3RvZ3JhbSBhZ2dyZWdhdGlvbnMKICAgICAgICAgICAgLy8gKHN1Y2ggYXMgdGhlIGRvY3VtZW50IGNvdW50IGNoYXJ0KS4gQWltIGZvciA3NSBiYXJzLgoKICAgICAgICAgICAgYnVja2V0cyA9IG5ldyBfdGltZV9idWNrZXRzLlRpbWVCdWNrZXRzKCk7CiAgICAgICAgICAgIHRmID0gX3RpbWVmaWx0ZXIudGltZWZpbHRlcjsKCiAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXhQYXR0ZXJuLnRpbWVGaWVsZE5hbWUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIGVhcmxpZXN0ID0gdGYuZ2V0QWN0aXZlQm91bmRzKCkubWluLnZhbHVlT2YoKTsKICAgICAgICAgICAgICBsYXRlc3QgPSB0Zi5nZXRBY3RpdmVCb3VuZHMoKS5tYXgudmFsdWVPZigpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBib3VuZHMgPSB0Zi5nZXRBY3RpdmVCb3VuZHMoKTsKICAgICAgICAgICAgQkFSX1RBUkdFVCA9IDc1OwogICAgICAgICAgICBidWNrZXRzLnNldEludGVydmFsKCdhdXRvJyk7CiAgICAgICAgICAgIGJ1Y2tldHMuc2V0Qm91bmRzKGJvdW5kcyk7CiAgICAgICAgICAgIGJ1Y2tldHMuc2V0QmFyVGFyZ2V0KEJBUl9UQVJHRVQpOwogICAgICAgICAgICBhZ2dJbnRlcnZhbCA9IGJ1Y2tldHMuZ2V0SW50ZXJ2YWwoKTsKICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxNTsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxODsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChkYXRhTG9hZGVyLmxvYWRGaWVsZFN0YXRzKHNlYXJjaFF1ZXJ5LCBzYW1wbGVyU2hhcmRTaXplLCBlYXJsaWVzdCwgbGF0ZXN0LCBleGlzdE1ldHJpY0ZpZWxkcywgYWdnSW50ZXJ2YWwuZXhwcmVzc2lvbikpOwoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIG1ldHJpY0ZpZWxkU3RhdHMgPSBfY29udGV4dDIuc2VudDsgLy8gQWRkIHRoZSBtZXRyaWMgc3RhdHMgdG8gdGhlIGV4aXN0aW5nIHN0YXRzIGluIHRoZSBjb3JyZXNwb25kaW5nIGNvbmZpZy4KCiAgICAgICAgICAgIGNvbmZpZ3MgPSBbXTsKICAgICAgICAgICAgbWV0cmljQ29uZmlncy5mb3JFYWNoKGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICAgICAgICB2YXIgY29uZmlnV2l0aFN0YXRzID0gX29iamVjdFNwcmVhZCh7fSwgY29uZmlnKTsKCiAgICAgICAgICAgICAgaWYgKGNvbmZpZy5maWVsZE5hbWUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgY29uZmlnV2l0aFN0YXRzLnN0YXRzID0gX29iamVjdFNwcmVhZCh7fSwgY29uZmlnV2l0aFN0YXRzLnN0YXRzLCB7fSwgbWV0cmljRmllbGRTdGF0cy5maW5kKGZ1bmN0aW9uIChmaWVsZFN0YXRzKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZFN0YXRzLmZpZWxkTmFtZSA9PT0gY29uZmlnLmZpZWxkTmFtZTsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gRG9jdW1lbnQgY291bnQgY2FyZC4KICAgICAgICAgICAgICAgIGNvbmZpZ1dpdGhTdGF0cy5zdGF0cyA9IG1ldHJpY0ZpZWxkU3RhdHMuZmluZChmdW5jdGlvbiAoZmllbGRTdGF0cykgewogICAgICAgICAgICAgICAgICByZXR1cm4gZmllbGRTdGF0cy5maWVsZE5hbWUgPT09IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIH0pOyAvLyBBZGQgZWFybGllc3QgLyBsYXRlc3Qgb2YgdGltZWZpbHRlciBmb3Igc2V0dGluZyB4IGF4aXMgZG9tYWluLgoKICAgICAgICAgICAgICAgIGNvbmZpZ1dpdGhTdGF0cy5zdGF0cy50aW1lUmFuZ2VFYXJsaWVzdCA9IGVhcmxpZXN0OwogICAgICAgICAgICAgICAgY29uZmlnV2l0aFN0YXRzLnN0YXRzLnRpbWVSYW5nZUxhdGVzdCA9IGxhdGVzdDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNvbmZpZ1dpdGhTdGF0cy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgY29uZmlncy5wdXNoKGNvbmZpZ1dpdGhTdGF0cyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzZXRNZXRyaWNDb25maWdzKGNvbmZpZ3MpOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDI0OwogICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMTUpOwogICAgICAgICAgICBkYXRhTG9hZGVyLmRpc3BsYXlFcnJvcihfY29udGV4dDIudDApOwoKICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIG51bGwsIG51bGwsIFtbMTUsIDI0XV0pOwogIH0KCiAgZnVuY3Rpb24gbG9hZE5vbk1ldHJpY0ZpZWxkU3RhdHMoKSB7CiAgICB2YXIgY29uZmlnc1RvTG9hZCwgZXhpc3ROb25NZXRyaWNGaWVsZHMsIHRmLCBlYXJsaWVzdCwgbGF0ZXN0LCBub25NZXRyaWNGaWVsZFN0YXRzLCBfY29uZmlnczsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGxvYWROb25NZXRyaWNGaWVsZFN0YXRzJChfY29udGV4dDMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaWYgKCEobm9uTWV0cmljQ29uZmlncy5sZW5ndGggPT09IDApKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjb25maWdzVG9Mb2FkID0gbm9uTWV0cmljQ29uZmlncy5maWx0ZXIoZnVuY3Rpb24gKGNvbmZpZykgewogICAgICAgICAgICAgIHJldHVybiBjb25maWcuZXhpc3RzSW5Eb2NzID09PSB0cnVlICYmIGNvbmZpZy5sb2FkaW5nID09PSB0cnVlOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmICghKGNvbmZpZ3NUb0xvYWQubGVuZ3RoID09PSAwKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgLy8gUGFzcyB0aGUgZmllbGQgbmFtZSwgdHlwZSBhbmQgY2FyZGluYWxpdHkgaW4gdGhlIHJlcXVlc3QuCiAgICAgICAgICAgIC8vIFRvcCB2YWx1ZXMgd2lsbCBiZSBvYnRhaW5lZCBvbiBhIHNhbXBsZSBpZiBjYXJkaW5hbGl0eSA+IDEwMDAwMC4KICAgICAgICAgICAgZXhpc3ROb25NZXRyaWNGaWVsZHMgPSBjb25maWdzVG9Mb2FkLm1hcChmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgICAgICAgdmFyIHByb3BzID0gewogICAgICAgICAgICAgICAgZmllbGROYW1lOiBjb25maWcuZmllbGROYW1lLAogICAgICAgICAgICAgICAgdHlwZTogY29uZmlnLnR5cGUsCiAgICAgICAgICAgICAgICBjYXJkaW5hbGl0eTogMAogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIGlmIChjb25maWcuc3RhdHMgIT09IHVuZGVmaW5lZCAmJiBjb25maWcuc3RhdHMuY2FyZGluYWxpdHkgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgcHJvcHMuY2FyZGluYWxpdHkgPSBjb25maWcuc3RhdHMuY2FyZGluYWxpdHk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gcHJvcHM7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0ZiA9IF90aW1lZmlsdGVyLnRpbWVmaWx0ZXI7CgogICAgICAgICAgICBpZiAoY3VycmVudEluZGV4UGF0dGVybi50aW1lRmllbGROYW1lICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBlYXJsaWVzdCA9IHRmLmdldEFjdGl2ZUJvdW5kcygpLm1pbi52YWx1ZU9mKCk7CiAgICAgICAgICAgICAgbGF0ZXN0ID0gdGYuZ2V0QWN0aXZlQm91bmRzKCkubWF4LnZhbHVlT2YoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA4OwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDExOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGRhdGFMb2FkZXIubG9hZEZpZWxkU3RhdHMoc2VhcmNoUXVlcnksIHNhbXBsZXJTaGFyZFNpemUsIGVhcmxpZXN0LCBsYXRlc3QsIGV4aXN0Tm9uTWV0cmljRmllbGRzKSk7CgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgbm9uTWV0cmljRmllbGRTdGF0cyA9IF9jb250ZXh0My5zZW50OyAvLyBBZGQgdGhlIGZpZWxkIHN0YXRzIHRvIHRoZSBleGlzdGluZyBzdGF0cyBpbiB0aGUgY29ycmVzcG9uZGluZyBjb25maWcuCgogICAgICAgICAgICBfY29uZmlncyA9IFtdOwogICAgICAgICAgICBub25NZXRyaWNDb25maWdzLmZvckVhY2goZnVuY3Rpb24gKGNvbmZpZykgewogICAgICAgICAgICAgIHZhciBjb25maWdXaXRoU3RhdHMgPSBfb2JqZWN0U3ByZWFkKHt9LCBjb25maWcpOwoKICAgICAgICAgICAgICBpZiAoY29uZmlnLmZpZWxkTmFtZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBjb25maWdXaXRoU3RhdHMuc3RhdHMgPSBfb2JqZWN0U3ByZWFkKHt9LCBjb25maWdXaXRoU3RhdHMuc3RhdHMsIHt9LCBub25NZXRyaWNGaWVsZFN0YXRzLmZpbmQoZnVuY3Rpb24gKGZpZWxkU3RhdHMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkU3RhdHMuZmllbGROYW1lID09PSBjb25maWcuZmllbGROYW1lOwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29uZmlnV2l0aFN0YXRzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgX2NvbmZpZ3MucHVzaChjb25maWdXaXRoU3RhdHMpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2V0Tm9uTWV0cmljQ29uZmlncyhfY29uZmlncyk7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjA7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTc7CiAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSg4KTsKICAgICAgICAgICAgZGF0YUxvYWRlci5kaXNwbGF5RXJyb3IoX2NvbnRleHQzLnQwKTsKCiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBudWxsLCBudWxsLCBbWzgsIDE3XV0pOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlTWV0cmljQ2FyZHMoKSB7CiAgICB2YXIgY29uZmlncyA9IFtdOwogICAgdmFyIGFnZ3JlZ2F0YWJsZUV4aXN0c0ZpZWxkcyA9IG92ZXJhbGxTdGF0cy5hZ2dyZWdhdGFibGVFeGlzdHNGaWVsZHMgfHwgW107CiAgICB2YXIgYWxsTWV0cmljRmllbGRzID0gaW5kZXhQYXR0ZXJuRmllbGRzLmZpbHRlcihmdW5jdGlvbiAoZikgewogICAgICByZXR1cm4gZi50eXBlID09PSBfcHVibGljLktCTl9GSUVMRF9UWVBFUy5OVU1CRVIgJiYgZi5kaXNwbGF5TmFtZSAhPT0gdW5kZWZpbmVkICYmIGRhdGFMb2FkZXIuaXNEaXNwbGF5RmllbGQoZi5kaXNwbGF5TmFtZSkgPT09IHRydWU7CiAgICB9KTsKCiAgICBpZiAobWV0cmljRmllbGRRdWVyeSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHZhciBtZXRyaWNGaWVsZFJlZ2V4cCA9IG5ldyBSZWdFeHAoIigiLmNvbmNhdChtZXRyaWNGaWVsZFF1ZXJ5LCAiKSIpLCAnZ2knKTsKICAgICAgYWxsTWV0cmljRmllbGRzID0gYWxsTWV0cmljRmllbGRzLmZpbHRlcihmdW5jdGlvbiAoZikgewogICAgICAgIHZhciBhZGRGaWVsZCA9IGYuZGlzcGxheU5hbWUgIT09IHVuZGVmaW5lZCAmJiAhIWYuZGlzcGxheU5hbWUubWF0Y2gobWV0cmljRmllbGRSZWdleHApOwogICAgICAgIHJldHVybiBhZGRGaWVsZDsKICAgICAgfSk7CiAgICB9CgogICAgdmFyIG1ldHJpY0V4aXN0c0ZpZWxkcyA9IGFsbE1ldHJpY0ZpZWxkcy5maWx0ZXIoZnVuY3Rpb24gKGYpIHsKICAgICAgcmV0dXJuIGFnZ3JlZ2F0YWJsZUV4aXN0c0ZpZWxkcy5maW5kKGZ1bmN0aW9uIChleGlzdHNGKSB7CiAgICAgICAgcmV0dXJuIGV4aXN0c0YuZmllbGROYW1lID09PSBmLmRpc3BsYXlOYW1lOwogICAgICB9KTsKICAgIH0pOyAvLyBBZGQgYSBjb25maWcgZm9yICdkb2N1bWVudCBjb3VudCcsIGlkZW50aWZpZWQgYnkgbm8gZmllbGQgbmFtZSBpZiBpbmRleHBhdHRlcm4gaXMgdGltZSBiYXNlZC4KCiAgICB2YXIgYWxsRmllbGRDb3VudCA9IGFsbE1ldHJpY0ZpZWxkcy5sZW5ndGg7CiAgICB2YXIgcG9wRmllbGRDb3VudCA9IG1ldHJpY0V4aXN0c0ZpZWxkcy5sZW5ndGg7CgogICAgaWYgKGN1cnJlbnRJbmRleFBhdHRlcm4udGltZUZpZWxkTmFtZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGNvbmZpZ3MucHVzaCh7CiAgICAgICAgdHlwZTogX2ZpZWxkX3R5cGVzLk1MX0pPQl9GSUVMRF9UWVBFUy5OVU1CRVIsCiAgICAgICAgZXhpc3RzSW5Eb2NzOiB0cnVlLAogICAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgICAgYWdncmVnYXRhYmxlOiB0cnVlCiAgICAgIH0pOwogICAgICBhbGxGaWVsZENvdW50Kys7CiAgICAgIHBvcEZpZWxkQ291bnQrKzsKICAgIH0gLy8gQWRkIG9uIDEgZm9yIHRoZSBkb2N1bWVudCBjb3VudCBjYXJkLgoKCiAgICBzZXRUb3RhbE1ldHJpY0ZpZWxkQ291bnQoYWxsRmllbGRDb3VudCk7CiAgICBzZXRQb3B1bGF0ZWRNZXRyaWNGaWVsZENvdW50KHBvcEZpZWxkQ291bnQpOwoKICAgIGlmIChhbGxNZXRyaWNGaWVsZHMubGVuZ3RoID09PSBtZXRyaWNFeGlzdHNGaWVsZHMubGVuZ3RoICYmIHNob3dBbGxNZXRyaWNzID09PSBmYWxzZSkgewogICAgICBzZXRTaG93QWxsTWV0cmljcyh0cnVlKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBhZ2dyZWdhdGFibGVGaWVsZHMgPSBvdmVyYWxsU3RhdHMuYWdncmVnYXRhYmxlRXhpc3RzRmllbGRzOwoKICAgIGlmIChhbGxNZXRyaWNGaWVsZHMubGVuZ3RoICE9PSBtZXRyaWNFeGlzdHNGaWVsZHMubGVuZ3RoICYmIHNob3dBbGxNZXRyaWNzID09PSB0cnVlKSB7CiAgICAgIGFnZ3JlZ2F0YWJsZUZpZWxkcyA9IGFnZ3JlZ2F0YWJsZUZpZWxkcy5jb25jYXQob3ZlcmFsbFN0YXRzLmFnZ3JlZ2F0YWJsZU5vdEV4aXN0c0ZpZWxkcyk7CiAgICB9CgogICAgdmFyIG1ldHJpY0ZpZWxkc1RvU2hvdyA9IHNob3dBbGxNZXRyaWNzID09PSB0cnVlID8gYWxsTWV0cmljRmllbGRzIDogbWV0cmljRXhpc3RzRmllbGRzOwogICAgbWV0cmljRmllbGRzVG9TaG93LmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgIHZhciBmaWVsZERhdGEgPSBhZ2dyZWdhdGFibGVGaWVsZHMuZmluZChmdW5jdGlvbiAoZikgewogICAgICAgIHJldHVybiBmLmZpZWxkTmFtZSA9PT0gZmllbGQuZGlzcGxheU5hbWU7CiAgICAgIH0pOwoKICAgICAgaWYgKGZpZWxkRGF0YSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFyIG1ldHJpY0NvbmZpZyA9IF9vYmplY3RTcHJlYWQoe30sIGZpZWxkRGF0YSwgewogICAgICAgICAgZmllbGRGb3JtYXQ6IGZpZWxkLmZvcm1hdCwKICAgICAgICAgIHR5cGU6IF9maWVsZF90eXBlcy5NTF9KT0JfRklFTERfVFlQRVMuTlVNQkVSLAogICAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICAgIGFnZ3JlZ2F0YWJsZTogdHJ1ZQogICAgICAgIH0pOwoKICAgICAgICBjb25maWdzLnB1c2gobWV0cmljQ29uZmlnKTsKICAgICAgfQogICAgfSk7CiAgICBzZXRNZXRyaWNDb25maWdzKGNvbmZpZ3MpOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlTm9uTWV0cmljQ2FyZHMoKSB7CiAgICB2YXIgYWxsTm9uTWV0cmljRmllbGRzID0gW107CgogICAgaWYgKG5vbk1ldHJpY1Nob3dGaWVsZFR5cGUgPT09ICcqJykgewogICAgICBhbGxOb25NZXRyaWNGaWVsZHMgPSBpbmRleFBhdHRlcm5GaWVsZHMuZmlsdGVyKGZ1bmN0aW9uIChmKSB7CiAgICAgICAgcmV0dXJuIGYudHlwZSAhPT0gX3B1YmxpYy5LQk5fRklFTERfVFlQRVMuTlVNQkVSICYmIGYuZGlzcGxheU5hbWUgIT09IHVuZGVmaW5lZCAmJiBkYXRhTG9hZGVyLmlzRGlzcGxheUZpZWxkKGYuZGlzcGxheU5hbWUpID09PSB0cnVlOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChub25NZXRyaWNTaG93RmllbGRUeXBlID09PSBfZmllbGRfdHlwZXMuTUxfSk9CX0ZJRUxEX1RZUEVTLlRFWFQgfHwgbm9uTWV0cmljU2hvd0ZpZWxkVHlwZSA9PT0gX2ZpZWxkX3R5cGVzLk1MX0pPQl9GSUVMRF9UWVBFUy5LRVlXT1JEKSB7CiAgICAgICAgdmFyIGFnZ3JlZ2F0YWJsZUNoZWNrID0gbm9uTWV0cmljU2hvd0ZpZWxkVHlwZSA9PT0gX2ZpZWxkX3R5cGVzLk1MX0pPQl9GSUVMRF9UWVBFUy5LRVlXT1JEID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgIGFsbE5vbk1ldHJpY0ZpZWxkcyA9IGluZGV4UGF0dGVybkZpZWxkcy5maWx0ZXIoZnVuY3Rpb24gKGYpIHsKICAgICAgICAgIHJldHVybiBmLmRpc3BsYXlOYW1lICE9PSB1bmRlZmluZWQgJiYgZGF0YUxvYWRlci5pc0Rpc3BsYXlGaWVsZChmLmRpc3BsYXlOYW1lKSA9PT0gdHJ1ZSAmJiBmLnR5cGUgPT09IF9wdWJsaWMuS0JOX0ZJRUxEX1RZUEVTLlNUUklORyAmJiBmLmFnZ3JlZ2F0YWJsZSA9PT0gYWdncmVnYXRhYmxlQ2hlY2s7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxsTm9uTWV0cmljRmllbGRzID0gaW5kZXhQYXR0ZXJuRmllbGRzLmZpbHRlcihmdW5jdGlvbiAoZikgewogICAgICAgICAgcmV0dXJuIGYudHlwZSA9PT0gbm9uTWV0cmljU2hvd0ZpZWxkVHlwZSAmJiBmLmRpc3BsYXlOYW1lICE9PSB1bmRlZmluZWQgJiYgZGF0YUxvYWRlci5pc0Rpc3BsYXlGaWVsZChmLmRpc3BsYXlOYW1lKSA9PT0gdHJ1ZTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSAvLyBJZiBhIGZpZWxkIGZpbHRlciBoYXMgYmVlbiBlbnRlcmVkLCBwZXJmb3JtIGFub3RoZXIgZmlsdGVyIG9uIHRoZSBlbnRlcmVkIHJlZ2V4cC4KCgogICAgaWYgKG5vbk1ldHJpY0ZpZWxkUXVlcnkgIT09IHVuZGVmaW5lZCkgewogICAgICB2YXIgbm9uTWV0cmljRmllbGRSZWdleHAgPSBuZXcgUmVnRXhwKCIoIi5jb25jYXQobm9uTWV0cmljRmllbGRRdWVyeSwgIikiKSwgJ2dpJyk7CiAgICAgIGFsbE5vbk1ldHJpY0ZpZWxkcyA9IGFsbE5vbk1ldHJpY0ZpZWxkcy5maWx0ZXIoZnVuY3Rpb24gKGYpIHsKICAgICAgICByZXR1cm4gZi5kaXNwbGF5TmFtZSAhPT0gdW5kZWZpbmVkICYmIGYuZGlzcGxheU5hbWUubWF0Y2gobm9uTWV0cmljRmllbGRSZWdleHApOwogICAgICB9KTsKICAgIH0gLy8gT2J0YWluIHRoZSBsaXN0IG9mIGFsbCBub24tbWV0cmljIGZpZWxkcyB3aGljaCBhcHBlYXIgaW4gZG9jdW1lbnRzCiAgICAvLyAoYWdncmVnYXRhYmxlIG9yIG5vdCBhZ2dyZWdhdGFibGUpLgoKCiAgICB2YXIgcG9wdWxhdGVkTm9uTWV0cmljRmllbGRzID0gW107IC8vIEtpYmFuYSBpbmRleCBwYXR0ZXJuIG5vbiBtZXRyaWMgZmllbGRzLgoKICAgIHZhciBub25NZXRyaWNGaWVsZERhdGEgPSBbXTsgLy8gQmFzaWMgbm9uIG1ldHJpYyBmaWVsZCBkYXRhIGxvYWRlZCBmcm9tIHJlcXVlc3Rpbmcgb3ZlcmFsbCBzdGF0cy4KCiAgICB2YXIgYWdncmVnYXRhYmxlRXhpc3RzRmllbGRzID0gb3ZlcmFsbFN0YXRzLmFnZ3JlZ2F0YWJsZUV4aXN0c0ZpZWxkcyB8fCBbXTsKICAgIHZhciBub25BZ2dyZWdhdGFibGVFeGlzdHNGaWVsZHMgPSBvdmVyYWxsU3RhdHMubm9uQWdncmVnYXRhYmxlRXhpc3RzRmllbGRzIHx8IFtdOwogICAgYWxsTm9uTWV0cmljRmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGYpIHsKICAgICAgdmFyIGNoZWNrQWdncmVnYXRhYmxlRmllbGQgPSBhZ2dyZWdhdGFibGVFeGlzdHNGaWVsZHMuZmluZChmdW5jdGlvbiAoZXhpc3RzRmllbGQpIHsKICAgICAgICByZXR1cm4gZXhpc3RzRmllbGQuZmllbGROYW1lID09PSBmLmRpc3BsYXlOYW1lOwogICAgICB9KTsKCiAgICAgIGlmIChjaGVja0FnZ3JlZ2F0YWJsZUZpZWxkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBwb3B1bGF0ZWROb25NZXRyaWNGaWVsZHMucHVzaChmKTsKICAgICAgICBub25NZXRyaWNGaWVsZERhdGEucHVzaChjaGVja0FnZ3JlZ2F0YWJsZUZpZWxkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgY2hlY2tOb25BZ2dyZWdhdGFibGVGaWVsZCA9IG5vbkFnZ3JlZ2F0YWJsZUV4aXN0c0ZpZWxkcy5maW5kKGZ1bmN0aW9uIChleGlzdHNGaWVsZCkgewogICAgICAgICAgcmV0dXJuIGV4aXN0c0ZpZWxkLmZpZWxkTmFtZSA9PT0gZi5kaXNwbGF5TmFtZTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKGNoZWNrTm9uQWdncmVnYXRhYmxlRmllbGQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcG9wdWxhdGVkTm9uTWV0cmljRmllbGRzLnB1c2goZik7CiAgICAgICAgICBub25NZXRyaWNGaWVsZERhdGEucHVzaChjaGVja05vbkFnZ3JlZ2F0YWJsZUZpZWxkKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgc2V0VG90YWxOb25NZXRyaWNGaWVsZENvdW50KGFsbE5vbk1ldHJpY0ZpZWxkcy5sZW5ndGgpOwogICAgc2V0UG9wdWxhdGVkTm9uTWV0cmljRmllbGRDb3VudChub25NZXRyaWNGaWVsZERhdGEubGVuZ3RoKTsKCiAgICBpZiAoYWxsTm9uTWV0cmljRmllbGRzLmxlbmd0aCA9PT0gbm9uTWV0cmljRmllbGREYXRhLmxlbmd0aCAmJiBzaG93QWxsTm9uTWV0cmljcyA9PT0gZmFsc2UpIHsKICAgICAgc2V0U2hvd0FsbE5vbk1ldHJpY3ModHJ1ZSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoYWxsTm9uTWV0cmljRmllbGRzLmxlbmd0aCAhPT0gbm9uTWV0cmljRmllbGREYXRhLmxlbmd0aCAmJiBzaG93QWxsTm9uTWV0cmljcyA9PT0gdHJ1ZSkgewogICAgICAvLyBDb21iaW5lIHRoZSBmaWVsZCBkYXRhIG9idGFpbmVkIGZyb20gRWxhc3RpY3NlYXJjaCBpbnRvIGEgc2luZ2xlIGFycmF5LgogICAgICBub25NZXRyaWNGaWVsZERhdGEgPSBub25NZXRyaWNGaWVsZERhdGEuY29uY2F0KG92ZXJhbGxTdGF0cy5hZ2dyZWdhdGFibGVOb3RFeGlzdHNGaWVsZHMsIG92ZXJhbGxTdGF0cy5ub25BZ2dyZWdhdGFibGVOb3RFeGlzdHNGaWVsZHMpOwogICAgfQoKICAgIHZhciBub25NZXRyaWNGaWVsZHNUb1Nob3cgPSBzaG93QWxsTm9uTWV0cmljcyA9PT0gdHJ1ZSA/IGFsbE5vbk1ldHJpY0ZpZWxkcyA6IHBvcHVsYXRlZE5vbk1ldHJpY0ZpZWxkczsKICAgIHZhciBjb25maWdzID0gW107CiAgICBub25NZXRyaWNGaWVsZHNUb1Nob3cuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgdmFyIGZpZWxkRGF0YSA9IG5vbk1ldHJpY0ZpZWxkRGF0YS5maW5kKGZ1bmN0aW9uIChmKSB7CiAgICAgICAgcmV0dXJuIGYuZmllbGROYW1lID09PSBmaWVsZC5kaXNwbGF5TmFtZTsKICAgICAgfSk7CgogICAgICB2YXIgbm9uTWV0cmljQ29uZmlnID0gX29iamVjdFNwcmVhZCh7fSwgZmllbGREYXRhLCB7CiAgICAgICAgZmllbGRGb3JtYXQ6IGZpZWxkLmZvcm1hdCwKICAgICAgICBhZ2dyZWdhdGFibGU6IGZpZWxkLmFnZ3JlZ2F0YWJsZSwKICAgICAgICBzY3JpcHRlZDogZmllbGQuc2NyaXB0ZWQsCiAgICAgICAgbG9hZGluZzogZmllbGREYXRhLmV4aXN0c0luRG9jcwogICAgICB9KTsgLy8gTWFwIHRoZSBmaWVsZCB0eXBlIGZyb20gdGhlIEtpYmFuYSBpbmRleCBwYXR0ZXJuIHRvIHRoZSBmaWVsZCB0eXBlCiAgICAgIC8vIHVzZWQgaW4gdGhlIGRhdGEgdmlzdWFsaXplci4KCgogICAgICB2YXIgZGF0YVZpc3VhbGl6ZXJUeXBlID0gKDAsIF9maWVsZF90eXBlc191dGlscy5rYm5UeXBlVG9NTEpvYlR5cGUpKGZpZWxkKTsKCiAgICAgIGlmIChkYXRhVmlzdWFsaXplclR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIG5vbk1ldHJpY0NvbmZpZy50eXBlID0gZGF0YVZpc3VhbGl6ZXJUeXBlOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEFkZCBhIGZsYWcgdG8gaW5kaWNhdGUgdGhhdCB0aGlzIGlzIG9uZSBvZiB0aGUgJ290aGVyJyBLaWJhbmEKICAgICAgICAvLyBmaWVsZCB0eXBlcyB0aGF0IGRvIG5vdCB5ZXQgaGF2ZSBhIHNwZWNpZmljIGNhcmQgdHlwZS4KICAgICAgICBub25NZXRyaWNDb25maWcudHlwZSA9IGZpZWxkLnR5cGU7CiAgICAgICAgbm9uTWV0cmljQ29uZmlnLmlzVW5zdXBwb3J0ZWRUeXBlID0gdHJ1ZTsKICAgICAgfQoKICAgICAgY29uZmlncy5wdXNoKG5vbk1ldHJpY0NvbmZpZyk7CiAgICB9KTsKICAgIHNldE5vbk1ldHJpY0NvbmZpZ3MoY29uZmlncyk7CiAgfQoKICB2YXIgd2l6YXJkUGFuZWxXaWR0aCA9ICcyODBweCc7CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9uYXZpZ2F0aW9uX21lbnUuTmF2aWdhdGlvbk1lbnUsIHsKICAgIHRhYklkOiAiZGF0YXZpc3VhbGl6ZXIiCiAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQYWdlLCB7CiAgICAiZGF0YS10ZXN0LXN1YmoiOiAibWxQYWdlSW5kZXhEYXRhVmlzdWFsaXplciIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFnZUJvZHksIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIGd1dHRlclNpemU6ICJtIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBhZ2VDb250ZW50SGVhZGVyLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFnZUNvbnRlbnRIZWFkZXJTZWN0aW9uLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGl0bGUsIHsKICAgIHNpemU6ICJsIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgxIiwgbnVsbCwgY3VycmVudEluZGV4UGF0dGVybi50aXRsZSkpKSwgY3VycmVudEluZGV4UGF0dGVybi50aW1lRmllbGROYW1lICE9PSB1bmRlZmluZWQgJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBhZ2VDb250ZW50SGVhZGVyU2VjdGlvbiwgewogICAgImRhdGEtdGVzdC1zdWJqIjogIm1sRGF0YVZpc3VhbGl6ZXJUaW1lUmFuZ2VTZWxlY3RvclNlY3Rpb24iCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZnVsbF90aW1lX3JhbmdlX3NlbGVjdG9yLkZ1bGxUaW1lUmFuZ2VTZWxlY3RvciwgewogICAgaW5kZXhQYXR0ZXJuOiBjdXJyZW50SW5kZXhQYXR0ZXJuLAogICAgcXVlcnk6IGNvbWJpbmVkUXVlcnksCiAgICBkaXNhYmxlZDogZmFsc2UKICB9KSkpKSwgc2hvd0FjdGlvbnNQYW5lbCA9PT0gdHJ1ZSAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgIGdyb3c6IGZhbHNlLAogICAgc3R5bGU6IHsKICAgICAgd2lkdGg6IHdpemFyZFBhbmVsV2lkdGgKICAgIH0KICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgIHNpemU6ICJtIgogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFnZUNvbnRlbnRCb2R5LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICBndXR0ZXJTaXplOiAibSIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQYW5lbCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2VhcmNoX3BhbmVsLlNlYXJjaFBhbmVsLCB7CiAgICBpbmRleFBhdHRlcm46IGN1cnJlbnRJbmRleFBhdHRlcm4sCiAgICBzZWFyY2hTdHJpbmc6IHNlYXJjaFN0cmluZywKICAgIHNldFNlYXJjaFN0cmluZzogc2V0U2VhcmNoU3RyaW5nLAogICAgc2VhcmNoUXVlcnk6IHNlYXJjaFF1ZXJ5LAogICAgc2V0U2VhcmNoUXVlcnk6IHNldFNlYXJjaFF1ZXJ5LAogICAgc2VhcmNoUXVlcnlMYW5ndWFnZTogc2VhcmNoUXVlcnlMYW5ndWFnZSwKICAgIHNhbXBsZXJTaGFyZFNpemU6IHNhbXBsZXJTaGFyZFNpemUsCiAgICBzZXRTYW1wbGVyU2hhcmRTaXplOiBzZXRTYW1wbGVyU2hhcmRTaXplLAogICAgdG90YWxDb3VudDogb3ZlcmFsbFN0YXRzLnRvdGFsQ291bnQKICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUhvcml6b250YWxSdWxlLCBudWxsKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgZ3V0dGVyU2l6ZTogIm0iCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCB0b3RhbE1ldHJpY0ZpZWxkQ291bnQgPiAwICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9maWVsZHNfcGFuZWwuRmllbGRzUGFuZWwsIHsKICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwuZGF0YXZpc3VhbGl6ZXIucGFnZS5tZXRyaWNzUGFuZWxUaXRsZScsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdNZXRyaWNzJwogICAgfSksCiAgICB0b3RhbEZpZWxkQ291bnQ6IHRvdGFsTWV0cmljRmllbGRDb3VudCwKICAgIHBvcHVsYXRlZEZpZWxkQ291bnQ6IHBvcHVsYXRlZE1ldHJpY0ZpZWxkQ291bnQsCiAgICBmaWVsZFR5cGVzOiBbX2ZpZWxkX3R5cGVzLk1MX0pPQl9GSUVMRF9UWVBFUy5OVU1CRVJdLAogICAgc2hvd0ZpZWxkVHlwZTogX2ZpZWxkX3R5cGVzLk1MX0pPQl9GSUVMRF9UWVBFUy5OVU1CRVIsCiAgICBzaG93QWxsRmllbGRzOiBzaG93QWxsTWV0cmljcywKICAgIHNldFNob3dBbGxGaWVsZHM6IHNldFNob3dBbGxNZXRyaWNzLAogICAgZmllbGRTZWFyY2hCYXJRdWVyeTogbWV0cmljRmllbGRRdWVyeSwKICAgIHNldEZpZWxkU2VhcmNoQmFyUXVlcnk6IHNldE1ldHJpY0ZpZWxkUXVlcnksCiAgICBmaWVsZFZpc0NvbmZpZ3M6IG1ldHJpY0NvbmZpZ3MKICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgc2l6ZTogInhsIgogIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZmllbGRzX3BhbmVsLkZpZWxkc1BhbmVsLCB7CiAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLmRhdGF2aXN1YWxpemVyLnBhZ2UuZmllbGRzUGFuZWxUaXRsZScsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdGaWVsZHMnCiAgICB9KSwKICAgIHRvdGFsRmllbGRDb3VudDogdG90YWxOb25NZXRyaWNGaWVsZENvdW50LAogICAgcG9wdWxhdGVkRmllbGRDb3VudDogcG9wdWxhdGVkTm9uTWV0cmljRmllbGRDb3VudCwKICAgIHNob3dBbGxGaWVsZHM6IHNob3dBbGxOb25NZXRyaWNzLAogICAgc2V0U2hvd0FsbEZpZWxkczogc2V0U2hvd0FsbE5vbk1ldHJpY3MsCiAgICBmaWVsZFR5cGVzOiBpbmRleGVkRmllbGRUeXBlcywKICAgIHNob3dGaWVsZFR5cGU6IG5vbk1ldHJpY1Nob3dGaWVsZFR5cGUsCiAgICBzZXRTaG93RmllbGRUeXBlOiBzZXROb25NZXRyaWNTaG93RmllbGRUeXBlLAogICAgZmllbGRTZWFyY2hCYXJRdWVyeTogbm9uTWV0cmljRmllbGRRdWVyeSwKICAgIHNldEZpZWxkU2VhcmNoQmFyUXVlcnk6IHNldE5vbk1ldHJpY0ZpZWxkUXVlcnksCiAgICBmaWVsZFZpc0NvbmZpZ3M6IG5vbk1ldHJpY0NvbmZpZ3MKICB9KSkpKSksIHNob3dBY3Rpb25zUGFuZWwgPT09IHRydWUgJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICBncm93OiBmYWxzZSwKICAgIHN0eWxlOiB7CiAgICAgIHdpZHRoOiB3aXphcmRQYW5lbFdpZHRoCiAgICB9CiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfYWN0aW9uc19wYW5lbC5BY3Rpb25zUGFuZWwsIHsKICAgIGluZGV4UGF0dGVybjogY3VycmVudEluZGV4UGF0dGVybgogIH0pKSkpKSkpOwp9OwoKZXhwb3J0cy5QYWdlID0gUGFnZTs="},null]}