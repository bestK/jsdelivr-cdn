{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/layers/sources/es_term_source.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/layers/sources/es_term_source.js","mtime":1585205045325},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmV4dHJhY3RQcm9wZXJ0aWVzTWFwID0gZXh0cmFjdFByb3BlcnRpZXNNYXA7CmV4cG9ydHMuRVNUZXJtU291cmNlID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfc2NoZW1hcyA9IHJlcXVpcmUoInVpL3Zpcy9lZGl0b3JzL2RlZmF1bHQvc2NoZW1hcyIpOwoKdmFyIF9hZ2dfdHlwZXMgPSByZXF1aXJlKCJ1aS9hZ2dfdHlwZXMiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX2VzX2RvY19maWVsZCA9IHJlcXVpcmUoIi4uL2ZpZWxkcy9lc19kb2NfZmllbGQiKTsKCnZhciBfZXNfYWdnX3NvdXJjZSA9IHJlcXVpcmUoIi4vZXNfYWdnX3NvdXJjZSIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gX29iamVjdERlc3RydWN0dXJpbmdFbXB0eShvYmopIHsgaWYgKG9iaiA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgZGVzdHJ1Y3R1cmUgdW5kZWZpbmVkIik7IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIFRFUk1TX0FHR19OQU1FID0gJ2pvaW4nOwp2YXIgRklFTERfTkFNRV9QUkVGSVggPSAnX19rYm5qb2luX18nOwp2YXIgR1JPVVBfQllfREVMSU1JVEVSID0gJ19ncm91cGJ5Xyc7CnZhciBhZ2dTY2hlbWFzID0gbmV3IF9zY2hlbWFzLlNjaGVtYXMoW19lc19hZ2dfc291cmNlLkFic3RyYWN0RVNBZ2dTb3VyY2UuTUVUUklDX1NDSEVNQV9DT05GSUcsIHsKICBncm91cDogJ2J1Y2tldHMnLAogIG5hbWU6ICdzZWdtZW50JywKICB0aXRsZTogJ1Rlcm1zJywKICBhZ2dGaWx0ZXI6ICd0ZXJtcycsCiAgbWluOiAxLAogIG1heDogMQp9XSk7CgpmdW5jdGlvbiBleHRyYWN0UHJvcGVydGllc01hcChyYXdFc0RhdGEsIHByb3BlcnR5TmFtZXMsIGNvdW50UHJvcGVydHlOYW1lKSB7CiAgdmFyIHByb3BlcnRpZXNNYXAgPSBuZXcgTWFwKCk7CgogIF9sb2Rhc2guZGVmYXVsdC5nZXQocmF3RXNEYXRhLCBbJ2FnZ3JlZ2F0aW9ucycsIFRFUk1TX0FHR19OQU1FLCAnYnVja2V0cyddLCBbXSkuZm9yRWFjaChmdW5jdGlvbiAodGVybUJ1Y2tldCkgewogICAgdmFyIHByb3BlcnRpZXMgPSB7fTsKCiAgICBpZiAoY291bnRQcm9wZXJ0eU5hbWUpIHsKICAgICAgcHJvcGVydGllc1tjb3VudFByb3BlcnR5TmFtZV0gPSB0ZXJtQnVja2V0LmRvY19jb3VudDsKICAgIH0KCiAgICBwcm9wZXJ0eU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkgewogICAgICBpZiAoX2xvZGFzaC5kZWZhdWx0Lmhhcyh0ZXJtQnVja2V0LCBbcHJvcGVydHlOYW1lLCAndmFsdWUnXSkpIHsKICAgICAgICBwcm9wZXJ0aWVzW3Byb3BlcnR5TmFtZV0gPSBfbG9kYXNoLmRlZmF1bHQuZ2V0KHRlcm1CdWNrZXQsIFtwcm9wZXJ0eU5hbWUsICd2YWx1ZSddKTsKICAgICAgfQogICAgfSk7CiAgICBwcm9wZXJ0aWVzTWFwLnNldCh0ZXJtQnVja2V0LmtleS50b1N0cmluZygpLCBwcm9wZXJ0aWVzKTsKICB9KTsKCiAgcmV0dXJuIHByb3BlcnRpZXNNYXA7Cn0KCnZhciBFU1Rlcm1Tb3VyY2UgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfQWJzdHJhY3RFU0FnZ1NvdXJjZSkgewogIF9pbmhlcml0cyhFU1Rlcm1Tb3VyY2UsIF9BYnN0cmFjdEVTQWdnU291cmNlKTsKCiAgZnVuY3Rpb24gRVNUZXJtU291cmNlKGRlc2NyaXB0b3IsIGluc3BlY3RvckFkYXB0ZXJzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVTVGVybVNvdXJjZSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoRVNUZXJtU291cmNlKS5jYWxsKHRoaXMsIGRlc2NyaXB0b3IsIGluc3BlY3RvckFkYXB0ZXJzKSk7CiAgICBfdGhpcy5fdGVybUZpZWxkID0gbmV3IF9lc19kb2NfZmllbGQuRVNEb2NGaWVsZCh7CiAgICAgIGZpZWxkTmFtZTogZGVzY3JpcHRvci50ZXJtLAogICAgICBzb3VyY2U6IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLAogICAgICBvcmlnaW46IF90aGlzLmdldE9yaWdpbkZvckZpZWxkKCkKICAgIH0pOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEVTVGVybVNvdXJjZSwgW3sKICAgIGtleTogImhhc0NvbXBsZXRlQ29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNDb21wbGV0ZUNvbmZpZygpIHsKICAgICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5oYXModGhpcy5fZGVzY3JpcHRvciwgJ2luZGV4UGF0dGVybklkJykgJiYgX2xvZGFzaC5kZWZhdWx0Lmhhcyh0aGlzLl9kZXNjcmlwdG9yLCAndGVybScpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEluZGV4UGF0dGVybklkcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5kZXhQYXR0ZXJuSWRzKCkgewogICAgICByZXR1cm4gW3RoaXMuX2Rlc2NyaXB0b3IuaW5kZXhQYXR0ZXJuSWRdOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFRlcm1GaWVsZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGVybUZpZWxkKCkgewogICAgICByZXR1cm4gdGhpcy5fdGVybUZpZWxkOwogICAgfQogIH0sIHsKICAgIGtleTogImdldE9yaWdpbkZvckZpZWxkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPcmlnaW5Gb3JGaWVsZCgpIHsKICAgICAgcmV0dXJuIF9jb25zdGFudHMuRklFTERfT1JJR0lOLkpPSU47CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0V2hlcmVRdWVyeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0V2hlcmVRdWVyeSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0b3Iud2hlcmVRdWVyeTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmb3JtYXRNZXRyaWNLZXkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1hdE1ldHJpY0tleShhZ2dUeXBlLCBmaWVsZE5hbWUpIHsKICAgICAgdmFyIG1ldHJpY0tleSA9IGFnZ1R5cGUgIT09IF9jb25zdGFudHMuTUVUUklDX1RZUEUuQ09VTlQgPyAiIi5jb25jYXQoYWdnVHlwZSkuY29uY2F0KF9lc19hZ2dfc291cmNlLkFHR19ERUxJTUlURVIpLmNvbmNhdChmaWVsZE5hbWUpIDogYWdnVHlwZTsKICAgICAgcmV0dXJuICIiLmNvbmNhdChGSUVMRF9OQU1FX1BSRUZJWCkuY29uY2F0KG1ldHJpY0tleSkuY29uY2F0KEdST1VQX0JZX0RFTElNSVRFUikuY29uY2F0KHRoaXMuX2Rlc2NyaXB0b3IuaW5kZXhQYXR0ZXJuVGl0bGUsICIuIikuY29uY2F0KHRoaXMuX3Rlcm1GaWVsZC5nZXROYW1lKCkpOwogICAgfQogIH0sIHsKICAgIGtleTogImZvcm1hdE1ldHJpY0xhYmVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JtYXRNZXRyaWNMYWJlbCh0eXBlLCBmaWVsZE5hbWUpIHsKICAgICAgdmFyIG1ldHJpY0xhYmVsID0gdHlwZSAhPT0gX2NvbnN0YW50cy5NRVRSSUNfVFlQRS5DT1VOVCA/ICIiLmNvbmNhdCh0eXBlLCAiICIpLmNvbmNhdChmaWVsZE5hbWUpIDogX2NvbnN0YW50cy5DT1VOVF9QUk9QX0xBQkVMOwogICAgICByZXR1cm4gIiIuY29uY2F0KG1ldHJpY0xhYmVsLCAiIG9mICIpLmNvbmNhdCh0aGlzLl9kZXNjcmlwdG9yLmluZGV4UGF0dGVyblRpdGxlLCAiOiIpLmNvbmNhdCh0aGlzLl90ZXJtRmllbGQuZ2V0TmFtZSgpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRQcm9wZXJ0aWVzTWFwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQcm9wZXJ0aWVzTWFwKHNlYXJjaEZpbHRlcnMsIGxlZnRTb3VyY2VOYW1lLCBsZWZ0RmllbGROYW1lLCByZWdpc3RlckNhbmNlbENhbGxiYWNrKSB7CiAgICAgIHZhciBpbmRleFBhdHRlcm4sIHNlYXJjaFNvdXJjZSwgY29uZmlnU3RhdGVzLCBhZ2dDb25maWdzLCByYXdFc0RhdGEsIG1ldHJpY1Byb3BlcnR5TmFtZXMsIGNvdW50Q29uZmlnU3RhdGUsIGNvdW50UHJvcGVydHlOYW1lOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldFByb3BlcnRpZXNNYXAkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICh0aGlzLmhhc0NvbXBsZXRlQ29uZmlnKCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBbXSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLmdldEluZGV4UGF0dGVybigpKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBpbmRleFBhdHRlcm4gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fbWFrZVNlYXJjaFNvdXJjZShzZWFyY2hGaWx0ZXJzLCAwKSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgc2VhcmNoU291cmNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBjb25maWdTdGF0ZXMgPSB0aGlzLl9tYWtlQWdnQ29uZmlncygpOwogICAgICAgICAgICAgIGFnZ0NvbmZpZ3MgPSBuZXcgX2FnZ190eXBlcy5BZ2dDb25maWdzKGluZGV4UGF0dGVybiwgY29uZmlnU3RhdGVzLCBhZ2dTY2hlbWFzLmFsbCk7CiAgICAgICAgICAgICAgc2VhcmNoU291cmNlLnNldEZpZWxkKCdhZ2dzJywgYWdnQ29uZmlncy50b0RzbCgpKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLl9ydW5Fc1F1ZXJ5KHsKICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogdGhpcy5nZXRJZCgpLAogICAgICAgICAgICAgICAgcmVxdWVzdE5hbWU6ICIiLmNvbmNhdCh0aGlzLl9kZXNjcmlwdG9yLmluZGV4UGF0dGVyblRpdGxlLCAiLiIpLmNvbmNhdCh0aGlzLl90ZXJtRmllbGQuZ2V0TmFtZSgpKSwKICAgICAgICAgICAgICAgIHNlYXJjaFNvdXJjZTogc2VhcmNoU291cmNlLAogICAgICAgICAgICAgICAgcmVnaXN0ZXJDYW5jZWxDYWxsYmFjazogcmVnaXN0ZXJDYW5jZWxDYWxsYmFjaywKICAgICAgICAgICAgICAgIHJlcXVlc3REZXNjcmlwdGlvbjogdGhpcy5fZ2V0UmVxdWVzdERlc2NyaXB0aW9uKGxlZnRTb3VyY2VOYW1lLCBsZWZ0RmllbGROYW1lKQogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgcmF3RXNEYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBtZXRyaWNQcm9wZXJ0eU5hbWVzID0gY29uZmlnU3RhdGVzLmZpbHRlcihmdW5jdGlvbiAoY29uZmlnU3RhdGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjb25maWdTdGF0ZS5zY2hlbWEgPT09ICdtZXRyaWMnICYmIGNvbmZpZ1N0YXRlLnR5cGUgIT09IF9jb25zdGFudHMuTUVUUklDX1RZUEUuQ09VTlQ7CiAgICAgICAgICAgICAgfSkubWFwKGZ1bmN0aW9uIChjb25maWdTdGF0ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZ1N0YXRlLmlkOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvdW50Q29uZmlnU3RhdGUgPSBjb25maWdTdGF0ZXMuZmluZChmdW5jdGlvbiAoY29uZmlnU3RhdGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjb25maWdTdGF0ZS50eXBlID09PSBfY29uc3RhbnRzLk1FVFJJQ19UWVBFLkNPVU5UOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvdW50UHJvcGVydHlOYW1lID0gX2xvZGFzaC5kZWZhdWx0LmdldChjb3VudENvbmZpZ1N0YXRlLCAnaWQnKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzTWFwOiBleHRyYWN0UHJvcGVydGllc01hcChyYXdFc0RhdGEsIG1ldHJpY1Byb3BlcnR5TmFtZXMsIGNvdW50UHJvcGVydHlOYW1lKQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNGaWx0ZXJCeU1hcEJvdW5kcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNGaWx0ZXJCeU1hcEJvdW5kcygpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXRSZXF1ZXN0RGVzY3JpcHRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRSZXF1ZXN0RGVzY3JpcHRpb24obGVmdFNvdXJjZU5hbWUsIGxlZnRGaWVsZE5hbWUpIHsKICAgICAgdmFyIG1ldHJpY3MgPSB0aGlzLmdldE1ldHJpY0ZpZWxkcygpLm1hcChmdW5jdGlvbiAoZXNBZ2dNZXRyaWMpIHsKICAgICAgICByZXR1cm4gZXNBZ2dNZXRyaWMuZ2V0UmVxdWVzdERlc2NyaXB0aW9uKCk7CiAgICAgIH0pOwogICAgICB2YXIgam9pblN0YXRlbWVudCA9IFtdOwogICAgICBqb2luU3RhdGVtZW50LnB1c2goX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMuc291cmNlLmVzSm9pbi5qb2luTGVmdERlc2NyaXB0aW9uJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSm9pbiB7bGVmdFNvdXJjZU5hbWV9OntsZWZ0RmllbGROYW1lfSB3aXRoIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGxlZnRTb3VyY2VOYW1lOiBsZWZ0U291cmNlTmFtZSwKICAgICAgICAgIGxlZnRGaWVsZE5hbWU6IGxlZnRGaWVsZE5hbWUKICAgICAgICB9CiAgICAgIH0pKTsKICAgICAgam9pblN0YXRlbWVudC5wdXNoKCIiLmNvbmNhdCh0aGlzLl9kZXNjcmlwdG9yLmluZGV4UGF0dGVyblRpdGxlLCAiOiIpLmNvbmNhdCh0aGlzLl90ZXJtRmllbGQuZ2V0TmFtZSgpKSk7CiAgICAgIGpvaW5TdGF0ZW1lbnQucHVzaChfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5zb3VyY2UuZXNKb2luLmpvaW5NZXRyaWNzRGVzY3JpcHRpb24nLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJmb3IgbWV0cmljcyB7bWV0cmljc30iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgbWV0cmljczogbWV0cmljcy5qb2luKCcsJykKICAgICAgICB9CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLnNvdXJjZS5lc0pvaW4uam9pbkRlc2NyaXB0aW9uJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRWxhc3RpY3NlYXJjaCB0ZXJtcyBhZ2dyZWdhdGlvbiByZXF1ZXN0IGZvciB7ZGVzY3JpcHRpb259IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGRlc2NyaXB0aW9uOiBqb2luU3RhdGVtZW50LmpvaW4oJyAnKQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX21ha2VBZ2dDb25maWdzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbWFrZUFnZ0NvbmZpZ3MoKSB7CiAgICAgIHZhciBtZXRyaWNBZ2dDb25maWdzID0gdGhpcy5jcmVhdGVNZXRyaWNBZ2dDb25maWdzKCk7CiAgICAgIHJldHVybiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KG1ldHJpY0FnZ0NvbmZpZ3MpLCBbewogICAgICAgIGlkOiBURVJNU19BR0dfTkFNRSwKICAgICAgICBlbmFibGVkOiB0cnVlLAogICAgICAgIHR5cGU6ICd0ZXJtcycsCiAgICAgICAgc2NoZW1hOiAnc2VnbWVudCcsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBmaWVsZDogdGhpcy5fdGVybUZpZWxkLmdldE5hbWUoKSwKICAgICAgICAgIHNpemU6IF9jb25zdGFudHMuREVGQVVMVF9NQVhfQlVDS0VUU19MSU1JVAogICAgICAgIH0KICAgICAgfV0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldERpc3BsYXlOYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREaXNwbGF5TmFtZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXREaXNwbGF5TmFtZSQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsICJlc190YWJsZSAiLmNvbmNhdCh0aGlzLl9kZXNjcmlwdG9yLmluZGV4UGF0dGVybklkKSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWx0ZXJBbmRGb3JtYXRQcm9wZXJ0aWVzVG9IdG1sIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaWx0ZXJBbmRGb3JtYXRQcm9wZXJ0aWVzVG9IdG1sKHByb3BlcnRpZXMpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBmaWx0ZXJBbmRGb3JtYXRQcm9wZXJ0aWVzVG9IdG1sJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLmZpbHRlckFuZEZvcm1hdFByb3BlcnRpZXNUb0h0bWxGb3JNZXRyaWNGaWVsZHMocHJvcGVydGllcykpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDMuc2VudCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRGaWVsZE5hbWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWVsZE5hbWVzKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRNZXRyaWNGaWVsZHMoKS5tYXAoZnVuY3Rpb24gKGVzQWdnTWV0cmljRmllbGQpIHsKICAgICAgICByZXR1cm4gZXNBZ2dNZXRyaWNGaWVsZC5nZXROYW1lKCk7CiAgICAgIH0pOwogICAgfQogIH1dLCBbewogICAga2V5OiAicmVuZGVyRWRpdG9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJFZGl0b3IoX3JlZikgewogICAgICBfb2JqZWN0RGVzdHJ1Y3R1cmluZ0VtcHR5KF9yZWYpOwoKICAgICAgLy9ubyBuZWVkIHRvIGxvY2FsaXplLiB0aGlzIGVkaXRvciBpcyBuZXZlciByZW5kZXJlZC4KICAgICAgcmV0dXJuICI8ZGl2PmVkaXRvciBkZXRhaWxzPC9kaXY+IjsKICAgIH0KICB9XSk7CgogIHJldHVybiBFU1Rlcm1Tb3VyY2U7Cn0oX2VzX2FnZ19zb3VyY2UuQWJzdHJhY3RFU0FnZ1NvdXJjZSk7CgpleHBvcnRzLkVTVGVybVNvdXJjZSA9IEVTVGVybVNvdXJjZTsKCl9kZWZpbmVQcm9wZXJ0eShFU1Rlcm1Tb3VyY2UsICJ0eXBlIiwgJ0VTX1RFUk1fU09VUkNFJyk7"},null]}