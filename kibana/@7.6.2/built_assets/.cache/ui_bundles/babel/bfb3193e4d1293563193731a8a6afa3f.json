{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/jobs/jobs_list/components/edit_job_flyout/edit_job_flyout.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/jobs/jobs_list/components/edit_job_flyout/edit_job_flyout.js","mtime":1585205045800},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkVkaXRKb2JGbHlvdXQgPSB2b2lkIDA7Cgp2YXIgX3Byb3BUeXBlcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicHJvcC10eXBlcyIpKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF90YWJzID0gcmVxdWlyZSgiLi90YWJzIik7Cgp2YXIgX2VkaXRfdXRpbHMgPSByZXF1aXJlKCIuL2VkaXRfdXRpbHMiKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCIuLi91dGlscyIpOwoKdmFyIF92YWxpZGF0ZV9qb2IgPSByZXF1aXJlKCIuLi92YWxpZGF0ZV9qb2IiKTsKCnZhciBfbWVzc2FnZWJhciA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvbWVzc2FnZWJhciIpOwoKdmFyIF9ub3RpZnkgPSByZXF1aXJlKCJ1aS9ub3RpZnkiKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX3N0YXRlcyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMvc3RhdGVzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OyBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIEVkaXRKb2JGbHlvdXRVSSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoRWRpdEpvYkZseW91dFVJLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gRWRpdEpvYkZseW91dFVJKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVkaXRKb2JGbHlvdXRVSSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoRWRpdEpvYkZseW91dFVJKS5jYWxsKHRoaXMsIHByb3BzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2luaXRpYWxKb2JGb3JtU3RhdGUiLCBudWxsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJjbG9zZUZseW91dCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGlzQ29uZmlybWVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTsKCiAgICAgIGlmIChfdGhpcy5jb250YWluc1Vuc2F2ZWRDaGFuZ2VzKCkgJiYgIWlzQ29uZmlybWVkKSB7CiAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgaXNDb25maXJtYXRpb25Nb2RhbFZpc2libGU6IHRydWUKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaXNDb25maXJtYXRpb25Nb2RhbFZpc2libGU6IGZhbHNlCiAgICAgIH0pOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGlzRmx5b3V0VmlzaWJsZTogZmFsc2UKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzaG93Rmx5b3V0IiwgZnVuY3Rpb24gKGpvYkxpdGUpIHsKICAgICAgdmFyIGhhc0RhdGFmZWVkID0gam9iTGl0ZS5oYXNEYXRhZmVlZDsKICAgICAgKDAsIF91dGlscy5sb2FkRnVsbEpvYikoam9iTGl0ZS5pZCkudGhlbihmdW5jdGlvbiAoam9iKSB7CiAgICAgICAgX3RoaXMuZXh0cmFjdEpvYihqb2IsIGhhc0RhdGFmZWVkKTsKCiAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgam9iOiBqb2IsCiAgICAgICAgICBpc0ZseW91dFZpc2libGU6IHRydWUKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic2V0Sm9iRGV0YWlscyIsIGZ1bmN0aW9uIChqb2JEZXRhaWxzKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IF90aGlzLnN0YXRlLAogICAgICAgICAgam9iTW9kZWxNZW1vcnlMaW1pdFZhbGlkYXRpb25FcnJvciA9IF90aGlzJHN0YXRlLmpvYk1vZGVsTWVtb3J5TGltaXRWYWxpZGF0aW9uRXJyb3IsCiAgICAgICAgICBqb2JHcm91cHNWYWxpZGF0aW9uRXJyb3IgPSBfdGhpcyRzdGF0ZS5qb2JHcm91cHNWYWxpZGF0aW9uRXJyb3I7CgogICAgICBpZiAoam9iRGV0YWlscy5qb2JNb2RlbE1lbW9yeUxpbWl0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBqb2JNb2RlbE1lbW9yeUxpbWl0VmFsaWRhdGlvbkVycm9yID0gKDAsIF92YWxpZGF0ZV9qb2IudmFsaWRhdGVNb2RlbE1lbW9yeUxpbWl0KShqb2JEZXRhaWxzLmpvYk1vZGVsTWVtb3J5TGltaXQpLm1lc3NhZ2U7CiAgICAgIH0KCiAgICAgIGlmIChqb2JEZXRhaWxzLmpvYkdyb3VwcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKGpvYkRldGFpbHMuam9iR3JvdXBzLnNvbWUoZnVuY3Rpb24gKGopIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5hbGxKb2JJZHMuaW5jbHVkZXMoaik7CiAgICAgICAgfSkpIHsKICAgICAgICAgIGpvYkdyb3Vwc1ZhbGlkYXRpb25FcnJvciA9IF90aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiAneHBhY2subWwuam9ic0xpc3QuZWRpdEpvYkZseW91dC5ncm91cHNBbmRKb2JzSGFzU2FtZUlkRXJyb3JNZXNzYWdlJywKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBIGpvYiB3aXRoIHRoaXMgSUQgYWxyZWFkeSBleGlzdHMuIEdyb3VwcyBhbmQgam9icyBjYW5ub3QgdXNlIHRoZSBzYW1lIElELicKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBqb2JHcm91cHNWYWxpZGF0aW9uRXJyb3IgPSAoMCwgX3ZhbGlkYXRlX2pvYi52YWxpZGF0ZUdyb3VwTmFtZXMpKGpvYkRldGFpbHMuam9iR3JvdXBzKS5tZXNzYWdlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGlzVmFsaWRKb2JEZXRhaWxzID0gam9iTW9kZWxNZW1vcnlMaW1pdFZhbGlkYXRpb25FcnJvciA9PT0gJycgJiYgam9iR3JvdXBzVmFsaWRhdGlvbkVycm9yID09PSAnJzsKCiAgICAgIF90aGlzLnNldFN0YXRlKF9vYmplY3RTcHJlYWQoe30sIGpvYkRldGFpbHMsIHsKICAgICAgICBqb2JNb2RlbE1lbW9yeUxpbWl0VmFsaWRhdGlvbkVycm9yOiBqb2JNb2RlbE1lbW9yeUxpbWl0VmFsaWRhdGlvbkVycm9yLAogICAgICAgIGpvYkdyb3Vwc1ZhbGlkYXRpb25FcnJvcjogam9iR3JvdXBzVmFsaWRhdGlvbkVycm9yLAogICAgICAgIGlzVmFsaWRKb2JEZXRhaWxzOiBpc1ZhbGlkSm9iRGV0YWlscwogICAgICB9KSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzZXREZXRlY3RvckRlc2NyaXB0aW9ucyIsIGZ1bmN0aW9uIChqb2JEZXRlY3RvckRlc2NyaXB0aW9ucykgewogICAgICBfdGhpcy5zZXRTdGF0ZShfb2JqZWN0U3ByZWFkKHt9LCBqb2JEZXRlY3RvckRlc2NyaXB0aW9ucykpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic2V0RGF0YWZlZWQiLCBmdW5jdGlvbiAoZGF0YWZlZWQpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoX29iamVjdFNwcmVhZCh7fSwgZGF0YWZlZWQpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNldEN1c3RvbVVybHMiLCBmdW5jdGlvbiAoam9iQ3VzdG9tVXJscykgewogICAgICB2YXIgaXNWYWxpZEpvYkN1c3RvbVVybHMgPSAoMCwgX3ZhbGlkYXRlX2pvYi5pc1ZhbGlkQ3VzdG9tVXJscykoam9iQ3VzdG9tVXJscyk7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgam9iQ3VzdG9tVXJsczogam9iQ3VzdG9tVXJscywKICAgICAgICBpc1ZhbGlkSm9iQ3VzdG9tVXJsczogaXNWYWxpZEpvYkN1c3RvbVVybHMKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzYXZlIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgbmV3Sm9iRGF0YSA9IHsKICAgICAgICBkZXNjcmlwdGlvbjogX3RoaXMuc3RhdGUuam9iRGVzY3JpcHRpb24sCiAgICAgICAgZ3JvdXBzOiBfdGhpcy5zdGF0ZS5qb2JHcm91cHMsCiAgICAgICAgbW1sOiBfdGhpcy5zdGF0ZS5qb2JNb2RlbE1lbW9yeUxpbWl0LAogICAgICAgIGRldGVjdG9yRGVzY3JpcHRpb25zOiBfdGhpcy5zdGF0ZS5qb2JEZXRlY3RvckRlc2NyaXB0aW9ucywKICAgICAgICBkYXRhZmVlZFF1ZXJ5OiBfdGhpcy5zdGF0ZS5kYXRhZmVlZFF1ZXJ5LAogICAgICAgIGRhdGFmZWVkUXVlcnlEZWxheTogX3RoaXMuc3RhdGUuZGF0YWZlZWRRdWVyeURlbGF5LAogICAgICAgIGRhdGFmZWVkRnJlcXVlbmN5OiBfdGhpcy5zdGF0ZS5kYXRhZmVlZEZyZXF1ZW5jeSwKICAgICAgICBkYXRhZmVlZFNjcm9sbFNpemU6IF90aGlzLnN0YXRlLmRhdGFmZWVkU2Nyb2xsU2l6ZSwKICAgICAgICBjdXN0b21VcmxzOiBfdGhpcy5zdGF0ZS5qb2JDdXN0b21VcmxzCiAgICAgIH07CiAgICAgICgwLCBfZWRpdF91dGlscy5zYXZlSm9iKShfdGhpcy5zdGF0ZS5qb2IsIG5ld0pvYkRhdGEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZFN1Y2Nlc3MoX3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsKICAgICAgICAgIGlkOiAneHBhY2subWwuam9ic0xpc3QuZWRpdEpvYkZseW91dC5jaGFuZ2VzU2F2ZWROb3RpZmljYXRpb25NZXNzYWdlJywKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ2hhbmdlcyB0byB7am9iSWR9IHNhdmVkJwogICAgICAgIH0sIHsKICAgICAgICAgIGpvYklkOiBfdGhpcy5zdGF0ZS5qb2Iuam9iX2lkCiAgICAgICAgfSkpOwoKICAgICAgICBfdGhpcy5yZWZyZXNoSm9icygpOwoKICAgICAgICBfdGhpcy5jbG9zZUZseW91dCh0cnVlKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CgogICAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcihfdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgaWQ6ICd4cGFjay5tbC5qb2JzTGlzdC5lZGl0Sm9iRmx5b3V0LmNoYW5nZXNOb3RTYXZlZE5vdGlmaWNhdGlvbk1lc3NhZ2UnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDb3VsZCBub3Qgc2F2ZSBjaGFuZ2VzIHRvIHtqb2JJZH0nCiAgICAgICAgfSwgewogICAgICAgICAgam9iSWQ6IF90aGlzLnN0YXRlLmpvYi5qb2JfaWQKICAgICAgICB9KSk7CgogICAgICAgIF9tZXNzYWdlYmFyLm1sTWVzc2FnZUJhclNlcnZpY2Uubm90aWZ5LmVycm9yKGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgam9iOiB7fSwKICAgICAgaGFzRGF0YWZlZWQ6IGZhbHNlLAogICAgICBkYXRhZmVlZFJ1bm5pbmc6IGZhbHNlLAogICAgICBpc0ZseW91dFZpc2libGU6IGZhbHNlLAogICAgICBpc0NvbmZpcm1hdGlvbk1vZGFsVmlzaWJsZTogZmFsc2UsCiAgICAgIGpvYkRlc2NyaXB0aW9uOiAnJywKICAgICAgam9iR3JvdXBzOiBbXSwKICAgICAgam9iTW9kZWxNZW1vcnlMaW1pdDogJycsCiAgICAgIGpvYkRldGVjdG9yczogW10sCiAgICAgIGpvYkRldGVjdG9yRGVzY3JpcHRpb25zOiBbXSwKICAgICAgam9iQ3VzdG9tVXJsczogW10sCiAgICAgIGRhdGFmZWVkUXVlcnk6ICcnLAogICAgICBkYXRhZmVlZFF1ZXJ5RGVsYXk6ICcnLAogICAgICBkYXRhZmVlZEZyZXF1ZW5jeTogJycsCiAgICAgIGRhdGFmZWVkU2Nyb2xsU2l6ZTogJycsCiAgICAgIGpvYk1vZGVsTWVtb3J5TGltaXRWYWxpZGF0aW9uRXJyb3I6ICcnLAogICAgICBqb2JHcm91cHNWYWxpZGF0aW9uRXJyb3I6ICcnLAogICAgICBpc1ZhbGlkSm9iRGV0YWlsczogdHJ1ZSwKICAgICAgaXNWYWxpZEpvYkN1c3RvbVVybHM6IHRydWUKICAgIH07CiAgICBfdGhpcy5yZWZyZXNoSm9icyA9IF90aGlzLnByb3BzLnJlZnJlc2hKb2JzOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEVkaXRKb2JGbHlvdXRVSSwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLnNldFNob3dGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHRoaXMucHJvcHMuc2V0U2hvd0Z1bmN0aW9uKHRoaXMuc2hvd0ZseW91dCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnRXaWxsVW5tb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7CiAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy51bnNldFNob3dGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHRoaXMucHJvcHMudW5zZXRTaG93RnVuY3Rpb24oKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbnRhaW5zVW5zYXZlZENoYW5nZXMiLAoKICAgIC8qKgogICAgICogQ2hlY2tzIGlmIHRoZXJlIGFyZSBhbnkgdW5zYXZlZCBjaGFuZ2VzLgogICAgICogQHJldHVybnMge2Jvb2xlYW59CiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBjb250YWluc1Vuc2F2ZWRDaGFuZ2VzKCkgewogICAgICByZXR1cm4gISgwLCBfbG9kYXNoLmlzRXF1YWwpKHRoaXMuX2luaXRpYWxKb2JGb3JtU3RhdGUsICgwLCBfbG9kYXNoLnBpY2spKHRoaXMuc3RhdGUsIFsnam9iRGVzY3JpcHRpb24nLCAnam9iR3JvdXBzJywgJ2pvYk1vZGVsTWVtb3J5TGltaXQnLCAnam9iQ3VzdG9tVXJscycsICdqb2JEZXRlY3RvcnMnLCAnam9iRGV0ZWN0b3JEZXNjcmlwdGlvbnMnLCAnam9iQnVja2V0U3BhbicsICdkYXRhZmVlZFF1ZXJ5JywgJ2RhdGFmZWVkUXVlcnlEZWxheScsICdkYXRhZmVlZEZyZXF1ZW5jeScsICdkYXRhZmVlZFNjcm9sbFNpemUnXSkpOwogICAgfQogIH0sIHsKICAgIGtleTogImV4dHJhY3RJbml0aWFsSm9iRm9ybVN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBleHRyYWN0SW5pdGlhbEpvYkZvcm1TdGF0ZShqb2IsIGhhc0RhdGFmZWVkKSB7CiAgICAgIHZhciBtbWwgPSBqb2IuYW5hbHlzaXNfbGltaXRzICYmIGpvYi5hbmFseXNpc19saW1pdHMubW9kZWxfbWVtb3J5X2xpbWl0ID8gam9iLmFuYWx5c2lzX2xpbWl0cy5tb2RlbF9tZW1vcnlfbGltaXQgOiAnJzsKICAgICAgdmFyIGRldGVjdG9ycyA9IGpvYi5hbmFseXNpc19jb25maWcgJiYgam9iLmFuYWx5c2lzX2NvbmZpZy5kZXRlY3RvcnMgPyBfdG9Db25zdW1hYmxlQXJyYXkoam9iLmFuYWx5c2lzX2NvbmZpZy5kZXRlY3RvcnMpIDogW107CiAgICAgIHZhciBidWNrZXRTcGFuID0gam9iLmFuYWx5c2lzX2NvbmZpZyA/IGpvYi5hbmFseXNpc19jb25maWcuYnVja2V0X3NwYW4gOiAnJzsKCiAgICAgIHZhciBkYXRhZmVlZENvbmZpZyA9IF9vYmplY3RTcHJlYWQoe30sIGpvYi5kYXRhZmVlZF9jb25maWcpOwoKICAgICAgdmFyIGZyZXF1ZW5jeSA9IGRhdGFmZWVkQ29uZmlnLmZyZXF1ZW5jeSAhPT0gdW5kZWZpbmVkID8gZGF0YWZlZWRDb25maWcuZnJlcXVlbmN5IDogJyc7CiAgICAgIHZhciBjdXN0b21VcmxzID0gam9iLmN1c3RvbV9zZXR0aW5ncyAmJiBqb2IuY3VzdG9tX3NldHRpbmdzLmN1c3RvbV91cmxzID8gX3RvQ29uc3VtYWJsZUFycmF5KGpvYi5jdXN0b21fc2V0dGluZ3MuY3VzdG9tX3VybHMpIDogW107CiAgICAgIHRoaXMuX2luaXRpYWxKb2JGb3JtU3RhdGUgPSBPYmplY3QuZnJlZXplKHsKICAgICAgICBqb2JEZXNjcmlwdGlvbjogam9iLmRlc2NyaXB0aW9uLAogICAgICAgIGpvYkdyb3Vwczogam9iLmdyb3VwcyAhPT0gdW5kZWZpbmVkID8gam9iLmdyb3VwcyA6IFtdLAogICAgICAgIGpvYk1vZGVsTWVtb3J5TGltaXQ6IG1tbCwKICAgICAgICBqb2JEZXRlY3RvcnM6IGRldGVjdG9ycywKICAgICAgICBqb2JEZXRlY3RvckRlc2NyaXB0aW9uczogZGV0ZWN0b3JzLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuIGQuZGV0ZWN0b3JfZGVzY3JpcHRpb247CiAgICAgICAgfSksCiAgICAgICAgam9iQnVja2V0U3BhbjogYnVja2V0U3BhbiwKICAgICAgICBqb2JDdXN0b21VcmxzOiBjdXN0b21VcmxzLAogICAgICAgIGRhdGFmZWVkUXVlcnk6IGhhc0RhdGFmZWVkID8gSlNPTi5zdHJpbmdpZnkoZGF0YWZlZWRDb25maWcucXVlcnksIG51bGwsIDIpIDogJycsCiAgICAgICAgZGF0YWZlZWRRdWVyeURlbGF5OiBoYXNEYXRhZmVlZCA/IGRhdGFmZWVkQ29uZmlnLnF1ZXJ5X2RlbGF5IDogJycsCiAgICAgICAgZGF0YWZlZWRGcmVxdWVuY3k6IGhhc0RhdGFmZWVkID8gZnJlcXVlbmN5IDogJycsCiAgICAgICAgZGF0YWZlZWRTY3JvbGxTaXplOiBoYXNEYXRhZmVlZCA/ICtkYXRhZmVlZENvbmZpZy5zY3JvbGxfc2l6ZSA6IG51bGwKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZXh0cmFjdEpvYiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXh0cmFjdEpvYihqb2IsIGhhc0RhdGFmZWVkKSB7CiAgICAgIHRoaXMuZXh0cmFjdEluaXRpYWxKb2JGb3JtU3RhdGUoam9iLCBoYXNEYXRhZmVlZCk7CiAgICAgIHZhciBkYXRhZmVlZFJ1bm5pbmcgPSBoYXNEYXRhZmVlZCAmJiBqb2IuZGF0YWZlZWRfY29uZmlnLnN0YXRlICE9PSBfc3RhdGVzLkRBVEFGRUVEX1NUQVRFLlNUT1BQRUQ7CiAgICAgIHRoaXMuc2V0U3RhdGUoX29iamVjdFNwcmVhZCh7CiAgICAgICAgam9iOiBqb2IsCiAgICAgICAgaGFzRGF0YWZlZWQ6IGhhc0RhdGFmZWVkLAogICAgICAgIGRhdGFmZWVkUnVubmluZzogZGF0YWZlZWRSdW5uaW5nLAogICAgICAgIGpvYk1vZGVsTWVtb3J5TGltaXRWYWxpZGF0aW9uRXJyb3I6ICcnLAogICAgICAgIGpvYkdyb3Vwc1ZhbGlkYXRpb25FcnJvcjogJycKICAgICAgfSwgKDAsIF9sb2Rhc2guY2xvbmVEZWVwKSh0aGlzLl9pbml0aWFsSm9iRm9ybVN0YXRlKSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBmbHlvdXQ7CiAgICAgIHZhciBjb25maXJtYXRpb25Nb2RhbDsKCiAgICAgIGlmICh0aGlzLnN0YXRlLmlzRmx5b3V0VmlzaWJsZSkgewogICAgICAgIHZhciBfdGhpcyRzdGF0ZTIgPSB0aGlzLnN0YXRlLAogICAgICAgICAgICBqb2IgPSBfdGhpcyRzdGF0ZTIuam9iLAogICAgICAgICAgICBqb2JEZXNjcmlwdGlvbiA9IF90aGlzJHN0YXRlMi5qb2JEZXNjcmlwdGlvbiwKICAgICAgICAgICAgam9iR3JvdXBzID0gX3RoaXMkc3RhdGUyLmpvYkdyb3VwcywKICAgICAgICAgICAgam9iTW9kZWxNZW1vcnlMaW1pdCA9IF90aGlzJHN0YXRlMi5qb2JNb2RlbE1lbW9yeUxpbWl0LAogICAgICAgICAgICBqb2JEZXRlY3RvcnMgPSBfdGhpcyRzdGF0ZTIuam9iRGV0ZWN0b3JzLAogICAgICAgICAgICBqb2JEZXRlY3RvckRlc2NyaXB0aW9ucyA9IF90aGlzJHN0YXRlMi5qb2JEZXRlY3RvckRlc2NyaXB0aW9ucywKICAgICAgICAgICAgam9iQnVja2V0U3BhbiA9IF90aGlzJHN0YXRlMi5qb2JCdWNrZXRTcGFuLAogICAgICAgICAgICBqb2JDdXN0b21VcmxzID0gX3RoaXMkc3RhdGUyLmpvYkN1c3RvbVVybHMsCiAgICAgICAgICAgIGRhdGFmZWVkUXVlcnkgPSBfdGhpcyRzdGF0ZTIuZGF0YWZlZWRRdWVyeSwKICAgICAgICAgICAgZGF0YWZlZWRRdWVyeURlbGF5ID0gX3RoaXMkc3RhdGUyLmRhdGFmZWVkUXVlcnlEZWxheSwKICAgICAgICAgICAgZGF0YWZlZWRGcmVxdWVuY3kgPSBfdGhpcyRzdGF0ZTIuZGF0YWZlZWRGcmVxdWVuY3ksCiAgICAgICAgICAgIGRhdGFmZWVkU2Nyb2xsU2l6ZSA9IF90aGlzJHN0YXRlMi5kYXRhZmVlZFNjcm9sbFNpemUsCiAgICAgICAgICAgIGpvYkdyb3Vwc1ZhbGlkYXRpb25FcnJvciA9IF90aGlzJHN0YXRlMi5qb2JHcm91cHNWYWxpZGF0aW9uRXJyb3IsCiAgICAgICAgICAgIGpvYk1vZGVsTWVtb3J5TGltaXRWYWxpZGF0aW9uRXJyb3IgPSBfdGhpcyRzdGF0ZTIuam9iTW9kZWxNZW1vcnlMaW1pdFZhbGlkYXRpb25FcnJvciwKICAgICAgICAgICAgaXNWYWxpZEpvYkRldGFpbHMgPSBfdGhpcyRzdGF0ZTIuaXNWYWxpZEpvYkRldGFpbHMsCiAgICAgICAgICAgIGlzVmFsaWRKb2JDdXN0b21VcmxzID0gX3RoaXMkc3RhdGUyLmlzVmFsaWRKb2JDdXN0b21VcmxzLAogICAgICAgICAgICBkYXRhZmVlZFJ1bm5pbmcgPSBfdGhpcyRzdGF0ZTIuZGF0YWZlZWRSdW5uaW5nOwogICAgICAgIHZhciBpbnRsID0gdGhpcy5wcm9wcy5pbnRsOwogICAgICAgIHZhciB0YWJzID0gW3sKICAgICAgICAgIGlkOiAnam9iLWRldGFpbHMnLAogICAgICAgICAgbmFtZTogaW50bC5mb3JtYXRNZXNzYWdlKHsKICAgICAgICAgICAgaWQ6ICd4cGFjay5tbC5qb2JzTGlzdC5lZGl0Sm9iRmx5b3V0LmpvYkRldGFpbHNUaXRsZScsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSm9iIGRldGFpbHMnCiAgICAgICAgICB9KSwKICAgICAgICAgIGNvbnRlbnQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3RhYnMuSm9iRGV0YWlscywgewogICAgICAgICAgICBkYXRhZmVlZFJ1bm5pbmc6IGRhdGFmZWVkUnVubmluZywKICAgICAgICAgICAgam9iRGVzY3JpcHRpb246IGpvYkRlc2NyaXB0aW9uLAogICAgICAgICAgICBqb2JHcm91cHM6IGpvYkdyb3VwcywKICAgICAgICAgICAgam9iTW9kZWxNZW1vcnlMaW1pdDogam9iTW9kZWxNZW1vcnlMaW1pdCwKICAgICAgICAgICAgc2V0Sm9iRGV0YWlsczogdGhpcy5zZXRKb2JEZXRhaWxzLAogICAgICAgICAgICBqb2JHcm91cHNWYWxpZGF0aW9uRXJyb3I6IGpvYkdyb3Vwc1ZhbGlkYXRpb25FcnJvciwKICAgICAgICAgICAgam9iTW9kZWxNZW1vcnlMaW1pdFZhbGlkYXRpb25FcnJvcjogam9iTW9kZWxNZW1vcnlMaW1pdFZhbGlkYXRpb25FcnJvcgogICAgICAgICAgfSkKICAgICAgICB9LCB7CiAgICAgICAgICBpZDogJ2RldGVjdG9ycycsCiAgICAgICAgICBuYW1lOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogJ3hwYWNrLm1sLmpvYnNMaXN0LmVkaXRKb2JGbHlvdXQuZGV0ZWN0b3JzVGl0bGUnLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0RldGVjdG9ycycKICAgICAgICAgIH0pLAogICAgICAgICAgY29udGVudDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdGFicy5EZXRlY3RvcnMsIHsKICAgICAgICAgICAgam9iRGV0ZWN0b3JzOiBqb2JEZXRlY3RvcnMsCiAgICAgICAgICAgIGpvYkRldGVjdG9yRGVzY3JpcHRpb25zOiBqb2JEZXRlY3RvckRlc2NyaXB0aW9ucywKICAgICAgICAgICAgc2V0RGV0ZWN0b3JEZXNjcmlwdGlvbnM6IHRoaXMuc2V0RGV0ZWN0b3JEZXNjcmlwdGlvbnMKICAgICAgICAgIH0pCiAgICAgICAgfSwgewogICAgICAgICAgaWQ6ICdkYXRhZmVlZCcsCiAgICAgICAgICBuYW1lOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogJ3hwYWNrLm1sLmpvYnNMaXN0LmVkaXRKb2JGbHlvdXQuZGF0YWZlZWRUaXRsZScsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGF0YWZlZWQnCiAgICAgICAgICB9KSwKICAgICAgICAgIGNvbnRlbnQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3RhYnMuRGF0YWZlZWQsIHsKICAgICAgICAgICAgZGF0YWZlZWRRdWVyeTogZGF0YWZlZWRRdWVyeSwKICAgICAgICAgICAgZGF0YWZlZWRRdWVyeURlbGF5OiBkYXRhZmVlZFF1ZXJ5RGVsYXksCiAgICAgICAgICAgIGRhdGFmZWVkRnJlcXVlbmN5OiBkYXRhZmVlZEZyZXF1ZW5jeSwKICAgICAgICAgICAgZGF0YWZlZWRTY3JvbGxTaXplOiBkYXRhZmVlZFNjcm9sbFNpemUsCiAgICAgICAgICAgIGpvYkJ1Y2tldFNwYW46IGpvYkJ1Y2tldFNwYW4sCiAgICAgICAgICAgIHNldERhdGFmZWVkOiB0aGlzLnNldERhdGFmZWVkLAogICAgICAgICAgICBkYXRhZmVlZFJ1bm5pbmc6IGRhdGFmZWVkUnVubmluZwogICAgICAgICAgfSkKICAgICAgICB9LCB7CiAgICAgICAgICBpZDogJ2N1c3RvbS11cmxzJywKICAgICAgICAgIG5hbWU6IGludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiAneHBhY2subWwuam9ic0xpc3QuZWRpdEpvYkZseW91dC5jdXN0b21VcmxzVGl0bGUnLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0N1c3RvbSBVUkxzJwogICAgICAgICAgfSksCiAgICAgICAgICBjb250ZW50OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF90YWJzLkN1c3RvbVVybHMsIHsKICAgICAgICAgICAgam9iOiBqb2IsCiAgICAgICAgICAgIGpvYkN1c3RvbVVybHM6IGpvYkN1c3RvbVVybHMsCiAgICAgICAgICAgIHNldEN1c3RvbVVybHM6IHRoaXMuc2V0Q3VzdG9tVXJscwogICAgICAgICAgfSkKICAgICAgICB9XTsKICAgICAgICBmbHlvdXQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmx5b3V0LCB7CiAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbiBvbkNsb3NlKCkgewogICAgICAgICAgICBfdGhpczIuY2xvc2VGbHlvdXQoKTsKICAgICAgICAgIH0sCiAgICAgICAgICBzaXplOiAibSIKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmx5b3V0SGVhZGVyLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGl0bGUsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgyIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2subWwuam9ic0xpc3QuZWRpdEpvYkZseW91dC5wYWdlVGl0bGUiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFZGl0IHtqb2JJZH0iLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGpvYklkOiBqb2IuaWQKICAgICAgICAgIH0KICAgICAgICB9KSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZseW91dEJvZHksIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUYWJiZWRDb250ZW50LCB7CiAgICAgICAgICB0YWJzOiB0YWJzLAogICAgICAgICAgaW5pdGlhbFNlbGVjdGVkVGFiOiB0YWJzWzBdLAogICAgICAgICAgb25UYWJDbGljazogZnVuY3Rpb24gb25UYWJDbGljaygpIHt9CiAgICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmx5b3V0Rm9vdGVyLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgICAgICBqdXN0aWZ5Q29udGVudDogInNwYWNlQmV0d2VlbiIKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICAgIGdyb3c6IGZhbHNlCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkVtcHR5LCB7CiAgICAgICAgICBpY29uVHlwZTogImNyb3NzIiwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgIF90aGlzMi5jbG9zZUZseW91dCgpOwogICAgICAgICAgfSwKICAgICAgICAgIGZsdXNoOiAibGVmdCIKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5tbC5qb2JzTGlzdC5lZGl0Sm9iRmx5b3V0LmNsb3NlQnV0dG9uTGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDbG9zZSIKICAgICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICAgIGdyb3c6IGZhbHNlCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbiwgewogICAgICAgICAgb25DbGljazogdGhpcy5zYXZlLAogICAgICAgICAgZmlsbDogdHJ1ZSwKICAgICAgICAgIGlzRGlzYWJsZWQ6IGlzVmFsaWRKb2JEZXRhaWxzID09PSBmYWxzZSB8fCBpc1ZhbGlkSm9iQ3VzdG9tVXJscyA9PT0gZmFsc2UKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5tbC5qb2JzTGlzdC5lZGl0Sm9iRmx5b3V0LnNhdmVCdXR0b25MYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNhdmUiCiAgICAgICAgfSkpKSkpKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDb25maXJtYXRpb25Nb2RhbFZpc2libGUpIHsKICAgICAgICBjb25maXJtYXRpb25Nb2RhbCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlPdmVybGF5TWFzaywgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvbmZpcm1Nb2RhbCwgewogICAgICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAieHBhY2subWwuam9ic0xpc3QuZWRpdEpvYkZseW91dC51bnNhdmVkQ2hhbmdlc0RpYWxvZ1RpdGxlIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTYXZlIGNoYW5nZXMgYmVmb3JlIGxlYXZpbmc/IgogICAgICAgICAgfSksCiAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczIuY2xvc2VGbHlvdXQodHJ1ZSk7CiAgICAgICAgICB9LAogICAgICAgICAgb25Db25maXJtOiBmdW5jdGlvbiBvbkNvbmZpcm0oKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczIuc2F2ZSgpOwogICAgICAgICAgfSwKICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAieHBhY2subWwuam9ic0xpc3QuZWRpdEpvYkZseW91dC5sZWF2ZUFueXdheUJ1dHRvbkxhYmVsIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJMZWF2ZSBhbnl3YXkiCiAgICAgICAgICB9KSwKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogInhwYWNrLm1sLmpvYnNMaXN0LmVkaXRKb2JGbHlvdXQuc2F2ZUNoYW5nZXNCdXR0b25MYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2F2ZSBjaGFuZ2VzIgogICAgICAgICAgfSksCiAgICAgICAgICBkZWZhdWx0Rm9jdXNlZEJ1dHRvbjogImNvbmZpcm0iCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLm1sLmpvYnNMaXN0LmVkaXRKb2JGbHlvdXQudW5zYXZlZENoYW5nZXNEaWFsb2dNZXNzYWdlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSWYgeW91IGRvbid0IHNhdmUsIHlvdXIgY2hhbmdlcyB3aWxsIGJlIGxvc3QuIgogICAgICAgIH0pKSkpOwogICAgICB9CgogICAgICB7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIGZseW91dCwgY29uZmlybWF0aW9uTW9kYWwpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRWRpdEpvYkZseW91dFVJOwp9KF9yZWFjdC5Db21wb25lbnQpOwoKRWRpdEpvYkZseW91dFVJLnByb3BUeXBlcyA9IHsKICBzZXRTaG93RnVuY3Rpb246IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgdW5zZXRTaG93RnVuY3Rpb246IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgcmVmcmVzaEpvYnM6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgYWxsSm9iSWRzOiBfcHJvcFR5cGVzLmRlZmF1bHQuYXJyYXkuaXNSZXF1aXJlZAp9Owp2YXIgRWRpdEpvYkZseW91dCA9ICgwLCBfcmVhY3QyLmluamVjdEkxOG4pKEVkaXRKb2JGbHlvdXRVSSk7CmV4cG9ydHMuRWRpdEpvYkZseW91dCA9IEVkaXRKb2JGbHlvdXQ7"},null]}