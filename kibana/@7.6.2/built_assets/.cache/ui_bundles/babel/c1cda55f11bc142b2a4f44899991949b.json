{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/cross_cluster_replication/public/app/store/actions/follower_index.js","dependencies":[{"path":"x-pack/legacy/plugins/cross_cluster_replication/public/app/store/actions/follower_index.js","mtime":1585205044157},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnVuZm9sbG93TGVhZGVySW5kZXggPSBleHBvcnRzLnJlc3VtZUZvbGxvd2VySW5kZXggPSBleHBvcnRzLnBhdXNlRm9sbG93ZXJJbmRleCA9IGV4cG9ydHMuc2F2ZUZvbGxvd2VySW5kZXggPSBleHBvcnRzLmdldEZvbGxvd2VySW5kZXggPSBleHBvcnRzLmxvYWRGb2xsb3dlckluZGljZXMgPSBleHBvcnRzLnNlbGVjdEVkaXRGb2xsb3dlckluZGV4ID0gZXhwb3J0cy5zZWxlY3REZXRhaWxGb2xsb3dlckluZGV4ID0gdm9pZCAwOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX25vdGlmeSA9IHJlcXVpcmUoInVpL25vdGlmeSIpOwoKdmFyIF9yb3V0aW5nID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuLi8uLi9zZXJ2aWNlcy9yb3V0aW5nIikpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi9jb25zdGFudHMiKTsKCnZhciBfYXBpID0gcmVxdWlyZSgiLi4vLi4vc2VydmljZXMvYXBpIik7Cgp2YXIgdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoIi4uL2FjdGlvbl90eXBlcyIpKTsKCnZhciBfYXBpMiA9IHJlcXVpcmUoIi4vYXBpIik7Cgp2YXIgX3NlbGVjdG9ycyA9IHJlcXVpcmUoIi4uL3NlbGVjdG9ycyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBzY29wZSA9IF9jb25zdGFudHMuU0VDVElPTlMuRk9MTE9XRVJfSU5ERVg7Cgp2YXIgc2VsZWN0RGV0YWlsRm9sbG93ZXJJbmRleCA9IGZ1bmN0aW9uIHNlbGVjdERldGFpbEZvbGxvd2VySW5kZXgoaWQpIHsKICByZXR1cm4gewogICAgdHlwZTogdC5GT0xMT1dFUl9JTkRFWF9TRUxFQ1RfREVUQUlMLAogICAgcGF5bG9hZDogaWQKICB9Owp9OwoKZXhwb3J0cy5zZWxlY3REZXRhaWxGb2xsb3dlckluZGV4ID0gc2VsZWN0RGV0YWlsRm9sbG93ZXJJbmRleDsKCnZhciBzZWxlY3RFZGl0Rm9sbG93ZXJJbmRleCA9IGZ1bmN0aW9uIHNlbGVjdEVkaXRGb2xsb3dlckluZGV4KGlkKSB7CiAgcmV0dXJuIHsKICAgIHR5cGU6IHQuRk9MTE9XRVJfSU5ERVhfU0VMRUNUX0VESVQsCiAgICBwYXlsb2FkOiBpZAogIH07Cn07CgpleHBvcnRzLnNlbGVjdEVkaXRGb2xsb3dlckluZGV4ID0gc2VsZWN0RWRpdEZvbGxvd2VySW5kZXg7Cgp2YXIgbG9hZEZvbGxvd2VySW5kaWNlcyA9IGZ1bmN0aW9uIGxvYWRGb2xsb3dlckluZGljZXMoKSB7CiAgdmFyIGlzVXBkYXRpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlOwogIHJldHVybiAoMCwgX2FwaTIuc2VuZEFwaVJlcXVlc3QpKHsKICAgIGxhYmVsOiB0LkZPTExPV0VSX0lOREVYX0xPQUQsCiAgICBzY29wZTogc2NvcGUsCiAgICBzdGF0dXM6IGlzVXBkYXRpbmcgPyBfY29uc3RhbnRzLkFQSV9TVEFUVVMuVVBEQVRJTkcgOiBfY29uc3RhbnRzLkFQSV9TVEFUVVMuTE9BRElORywKICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gaGFuZGxlciQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCgoMCwgX2FwaS5sb2FkRm9sbG93ZXJJbmRpY2VzKSgpKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLmxvYWRGb2xsb3dlckluZGljZXMgPSBsb2FkRm9sbG93ZXJJbmRpY2VzOwoKdmFyIGdldEZvbGxvd2VySW5kZXggPSBmdW5jdGlvbiBnZXRGb2xsb3dlckluZGV4KGlkKSB7CiAgcmV0dXJuICgwLCBfYXBpMi5zZW5kQXBpUmVxdWVzdCkoewogICAgbGFiZWw6IHQuRk9MTE9XRVJfSU5ERVhfR0VULAogICAgc2NvcGU6ICIiLmNvbmNhdChzY29wZSwgIi1nZXQiKSwKICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gaGFuZGxlciQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoKDAsIF9hcGkuZ2V0Rm9sbG93ZXJJbmRleCkoaWQpKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyLnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLmdldEZvbGxvd2VySW5kZXggPSBnZXRGb2xsb3dlckluZGV4OwoKdmFyIHNhdmVGb2xsb3dlckluZGV4ID0gZnVuY3Rpb24gc2F2ZUZvbGxvd2VySW5kZXgobmFtZSwgZm9sbG93ZXJJbmRleCkgewogIHZhciBpc1VwZGF0aW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICByZXR1cm4gKDAsIF9hcGkyLnNlbmRBcGlSZXF1ZXN0KSh7CiAgICBsYWJlbDogdC5GT0xMT1dFUl9JTkRFWF9DUkVBVEUsCiAgICBzdGF0dXM6IF9jb25zdGFudHMuQVBJX1NUQVRVUy5TQVZJTkcsCiAgICBzY29wZTogIiIuY29uY2F0KHNjb3BlLCAiLXNhdmUiKSwKICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gaGFuZGxlciQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCFpc1VwZGF0aW5nKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKCgwLCBfYXBpLnVwZGF0ZUZvbGxvd2VySW5kZXgpKG5hbWUsIGZvbGxvd2VySW5kZXgpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzLnNlbnQpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKCgwLCBfYXBpLmNyZWF0ZUZvbGxvd2VySW5kZXgpKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgICAgbmFtZTogbmFtZQogICAgICAgICAgICAgIH0sIGZvbGxvd2VySW5kZXgpKSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0My5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKCkgewogICAgICB2YXIgc3VjY2Vzc01lc3NhZ2UgPSBpc1VwZGF0aW5nID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLmZvbGxvd2VySW5kZXgudXBkYXRlQWN0aW9uLnN1Y2Nlc3NOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkZvbGxvd2VyIGluZGV4ICd7bmFtZX0nIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIG5hbWU6IG5hbWUKICAgICAgICB9CiAgICAgIH0pIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLmZvbGxvd2VySW5kZXguYWRkQWN0aW9uLnN1Y2Nlc3NOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFkZGVkIGZvbGxvd2VyIGluZGV4ICd7bmFtZX0nIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIG5hbWU6IG5hbWUKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkU3VjY2VzcyhzdWNjZXNzTWVzc2FnZSk7CgogICAgICBfcm91dGluZy5kZWZhdWx0Lm5hdmlnYXRlKCIvZm9sbG93ZXJfaW5kaWNlcyIsIHVuZGVmaW5lZCwgewogICAgICAgIG5hbWU6IGVuY29kZVVSSUNvbXBvbmVudChuYW1lKQogICAgICB9KTsKICAgIH0KICB9KTsKfTsKCmV4cG9ydHMuc2F2ZUZvbGxvd2VySW5kZXggPSBzYXZlRm9sbG93ZXJJbmRleDsKCnZhciBwYXVzZUZvbGxvd2VySW5kZXggPSBmdW5jdGlvbiBwYXVzZUZvbGxvd2VySW5kZXgoaWQpIHsKICByZXR1cm4gKDAsIF9hcGkyLnNlbmRBcGlSZXF1ZXN0KSh7CiAgICBsYWJlbDogdC5GT0xMT1dFUl9JTkRFWF9QQVVTRSwKICAgIHN0YXR1czogX2NvbnN0YW50cy5BUElfU1RBVFVTLlNBVklORywKICAgIHNjb3BlOiBzY29wZSwKICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gaGFuZGxlciQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsICgwLCBfYXBpLnBhdXNlRm9sbG93ZXJJbmRleCkoaWQpKTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKHJlc3BvbnNlLCBkaXNwYXRjaCkgewogICAgICAvKioKICAgICAgICogV2UgY2FuIGhhdmUgMSBvciBtb3JlIGZvbGxvd2VyIGluZGV4IHBhdXNlIG9wZXJhdGlvbgogICAgICAgKiB0aGF0IGNhbiBmYWlsIG9yIHN1Y2NlZWQuIFdlIHdpbGwgc2hvdyAxIHRvYXN0IG5vdGlmaWNhdGlvbiBmb3IgZWFjaC4KICAgICAgICovCiAgICAgIGlmIChyZXNwb25zZS5lcnJvcnMubGVuZ3RoKSB7CiAgICAgICAgdmFyIGhhc011bHRpcGxlRXJyb3JzID0gcmVzcG9uc2UuZXJyb3JzLmxlbmd0aCA+IDE7CiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGhhc011bHRpcGxlRXJyb3JzID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLmZvbGxvd2VySW5kZXgucGF1c2VBY3Rpb24uZXJyb3JNdWx0aXBsZU5vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFcnJvciBwYXVzaW5nIHtjb3VudH0gZm9sbG93ZXIgaW5kaWNlcyIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgY291bnQ6IHJlc3BvbnNlLmVycm9ycy5sZW5ndGgKICAgICAgICAgIH0KICAgICAgICB9KSA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5jcm9zc0NsdXN0ZXJSZXBsaWNhdGlvbi5mb2xsb3dlckluZGV4LnBhdXNlQWN0aW9uLmVycm9yU2luZ2xlTm90aWZpY2F0aW9uVGl0bGUnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkVycm9yIHBhdXNpbmcgZm9sbG93ZXIgaW5kZXggJ3tuYW1lfSciLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIG5hbWU6IHJlc3BvbnNlLmVycm9yc1swXS5pZAogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGREYW5nZXIoZXJyb3JNZXNzYWdlKTsKICAgICAgfQoKICAgICAgaWYgKHJlc3BvbnNlLml0ZW1zUGF1c2VkLmxlbmd0aCkgewogICAgICAgIHZhciBoYXNNdWx0aXBsZVBhdXNlZCA9IHJlc3BvbnNlLml0ZW1zUGF1c2VkLmxlbmd0aCA+IDE7CiAgICAgICAgdmFyIHN1Y2Nlc3NNZXNzYWdlID0gaGFzTXVsdGlwbGVQYXVzZWQgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uZm9sbG93ZXJJbmRleC5wYXVzZUFjdGlvbi5zdWNjZXNzTXVsdGlwbGVOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAie2NvdW50fSBmb2xsb3dlciBpbmRpY2VzIHdlcmUgcGF1c2VkIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBjb3VudDogcmVzcG9uc2UuaXRlbXNQYXVzZWQubGVuZ3RoCiAgICAgICAgICB9CiAgICAgICAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uZm9sbG93ZXJJbmRleC5wYXVzZUFjdGlvbi5zdWNjZXNzU2luZ2xlTm90aWZpY2F0aW9uVGl0bGUnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkZvbGxvd2VyIGluZGV4ICd7bmFtZX0nIHdhcyBwYXVzZWQiLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIG5hbWU6IHJlc3BvbnNlLml0ZW1zUGF1c2VkWzBdCiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZFN1Y2Nlc3Moc3VjY2Vzc01lc3NhZ2UpOyAvLyBSZWZyZXNoIGxpc3QKCgogICAgICAgIGRpc3BhdGNoKGxvYWRGb2xsb3dlckluZGljZXModHJ1ZSkpOwogICAgICB9CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLnBhdXNlRm9sbG93ZXJJbmRleCA9IHBhdXNlRm9sbG93ZXJJbmRleDsKCnZhciByZXN1bWVGb2xsb3dlckluZGV4ID0gZnVuY3Rpb24gcmVzdW1lRm9sbG93ZXJJbmRleChpZCkgewogIHJldHVybiAoMCwgX2FwaTIuc2VuZEFwaVJlcXVlc3QpKHsKICAgIGxhYmVsOiB0LkZPTExPV0VSX0lOREVYX1JFU1VNRSwKICAgIHN0YXR1czogX2NvbnN0YW50cy5BUElfU1RBVFVTLlNBVklORywKICAgIHNjb3BlOiBzY29wZSwKICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gaGFuZGxlciQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsICgwLCBfYXBpLnJlc3VtZUZvbGxvd2VySW5kZXgpKGlkKSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXNwb25zZSwgZGlzcGF0Y2gpIHsKICAgICAgLyoqCiAgICAgICAqIFdlIGNhbiBoYXZlIDEgb3IgbW9yZSBmb2xsb3dlciBpbmRleCByZXN1bWUgb3BlcmF0aW9uCiAgICAgICAqIHRoYXQgY2FuIGZhaWwgb3Igc3VjY2VlZC4gV2Ugd2lsbCBzaG93IDEgdG9hc3Qgbm90aWZpY2F0aW9uIGZvciBlYWNoLgogICAgICAgKi8KICAgICAgaWYgKHJlc3BvbnNlLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICB2YXIgaGFzTXVsdGlwbGVFcnJvcnMgPSByZXNwb25zZS5lcnJvcnMubGVuZ3RoID4gMTsKICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gaGFzTXVsdGlwbGVFcnJvcnMgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uZm9sbG93ZXJJbmRleC5yZXN1bWVBY3Rpb24uZXJyb3JNdWx0aXBsZU5vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFcnJvciByZXN1bWluZyB7Y291bnR9IGZvbGxvd2VyIGluZGljZXMiLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGNvdW50OiByZXNwb25zZS5lcnJvcnMubGVuZ3RoCiAgICAgICAgICB9CiAgICAgICAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uZm9sbG93ZXJJbmRleC5yZXN1bWVBY3Rpb24uZXJyb3JTaW5nbGVOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRXJyb3IgcmVzdW1pbmcgZm9sbG93ZXIgaW5kZXggJ3tuYW1lfSciLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIG5hbWU6IHJlc3BvbnNlLmVycm9yc1swXS5pZAogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGREYW5nZXIoZXJyb3JNZXNzYWdlKTsKICAgICAgfQoKICAgICAgaWYgKHJlc3BvbnNlLml0ZW1zUmVzdW1lZC5sZW5ndGgpIHsKICAgICAgICB2YXIgaGFzTXVsdGlwbGVSZXN1bWVkID0gcmVzcG9uc2UuaXRlbXNSZXN1bWVkLmxlbmd0aCA+IDE7CiAgICAgICAgdmFyIHN1Y2Nlc3NNZXNzYWdlID0gaGFzTXVsdGlwbGVSZXN1bWVkID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLmZvbGxvd2VySW5kZXgucmVzdW1lQWN0aW9uLnN1Y2Nlc3NNdWx0aXBsZU5vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJ7Y291bnR9IGZvbGxvd2VyIGluZGljZXMgd2VyZSByZXN1bWVkIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBjb3VudDogcmVzcG9uc2UuaXRlbXNSZXN1bWVkLmxlbmd0aAogICAgICAgICAgfQogICAgICAgIH0pIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLmZvbGxvd2VySW5kZXgucmVzdW1lQWN0aW9uLnN1Y2Nlc3NTaW5nbGVOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRm9sbG93ZXIgaW5kZXggJ3tuYW1lfScgd2FzIHJlc3VtZWQiLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIG5hbWU6IHJlc3BvbnNlLml0ZW1zUmVzdW1lZFswXQogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGRTdWNjZXNzKHN1Y2Nlc3NNZXNzYWdlKTsKICAgICAgfSAvLyBSZWZyZXNoIGxpc3QKCgogICAgICBkaXNwYXRjaChsb2FkRm9sbG93ZXJJbmRpY2VzKHRydWUpKTsKICAgIH0KICB9KTsKfTsKCmV4cG9ydHMucmVzdW1lRm9sbG93ZXJJbmRleCA9IHJlc3VtZUZvbGxvd2VySW5kZXg7Cgp2YXIgdW5mb2xsb3dMZWFkZXJJbmRleCA9IGZ1bmN0aW9uIHVuZm9sbG93TGVhZGVySW5kZXgoaWQpIHsKICByZXR1cm4gKDAsIF9hcGkyLnNlbmRBcGlSZXF1ZXN0KSh7CiAgICBsYWJlbDogdC5GT0xMT1dFUl9JTkRFWF9VTkZPTExPVywKICAgIHN0YXR1czogX2NvbnN0YW50cy5BUElfU1RBVFVTLkRFTEVUSU5HLAogICAgc2NvcGU6ICIiLmNvbmNhdChzY29wZSwgIi1kZWxldGUiKSwKICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gaGFuZGxlciQoX2NvbnRleHQ2KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsICgwLCBfYXBpLnVuZm9sbG93TGVhZGVySW5kZXgpKGlkKSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXNwb25zZSwgZGlzcGF0Y2gsIGdldFN0YXRlKSB7CiAgICAgIC8qKgogICAgICAgKiBXZSBjYW4gaGF2ZSAxIG9yIG1vcmUgZm9sbG93ZXIgaW5kZXggdW5mb2xsb3cgb3BlcmF0aW9uCiAgICAgICAqIHRoYXQgY2FuIGZhaWwgb3Igc3VjY2VlZC4gV2Ugd2lsbCBzaG93IDEgdG9hc3Qgbm90aWZpY2F0aW9uIGZvciBlYWNoLgogICAgICAgKi8KICAgICAgaWYgKHJlc3BvbnNlLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICB2YXIgaGFzTXVsdGlwbGVFcnJvcnMgPSByZXNwb25zZS5lcnJvcnMubGVuZ3RoID4gMTsKICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gaGFzTXVsdGlwbGVFcnJvcnMgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uZm9sbG93ZXJJbmRleC51bmZvbGxvd0FjdGlvbi5lcnJvck11bHRpcGxlTm90aWZpY2F0aW9uVGl0bGUnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkVycm9yIHVuZm9sbG93aW5nIGxlYWRlciBpbmRleCBvZiB7Y291bnR9IGZvbGxvd2VyIGluZGljZXMiLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGNvdW50OiByZXNwb25zZS5lcnJvcnMubGVuZ3RoCiAgICAgICAgICB9CiAgICAgICAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uZm9sbG93ZXJJbmRleC51bmZvbGxvd0FjdGlvbi5lcnJvclNpbmdsZU5vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFcnJvciB1bmZvbGxvd2luZyBsZWFkZXIgaW5kZXggb2YgZm9sbG93ZXIgaW5kZXggJ3tuYW1lfSciLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIG5hbWU6IHJlc3BvbnNlLmVycm9yc1swXS5pZAogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGREYW5nZXIoZXJyb3JNZXNzYWdlKTsKICAgICAgfQoKICAgICAgaWYgKHJlc3BvbnNlLml0ZW1zVW5mb2xsb3dlZC5sZW5ndGgpIHsKICAgICAgICB2YXIgaGFzTXVsdGlwbGVVbmZvbGxvdyA9IHJlc3BvbnNlLml0ZW1zVW5mb2xsb3dlZC5sZW5ndGggPiAxOwogICAgICAgIHZhciBzdWNjZXNzTWVzc2FnZSA9IGhhc011bHRpcGxlVW5mb2xsb3cgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uZm9sbG93ZXJJbmRleC51bmZvbGxvd0FjdGlvbi5zdWNjZXNzTXVsdGlwbGVOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTGVhZGVyIGluZGljZXMgb2Yge2NvdW50fSBmb2xsb3dlciBpbmRpY2VzIHdlcmUgdW5mb2xsb3dlZCIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgY291bnQ6IHJlc3BvbnNlLml0ZW1zVW5mb2xsb3dlZC5sZW5ndGgKICAgICAgICAgIH0KICAgICAgICB9KSA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5jcm9zc0NsdXN0ZXJSZXBsaWNhdGlvbi5mb2xsb3dlckluZGV4LnVuZm9sbG93QWN0aW9uLnN1Y2Nlc3NTaW5nbGVOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTGVhZGVyIGluZGV4IG9mIGZvbGxvd2VyIGluZGV4ICd7bmFtZX0nIHdhcyB1bmZvbGxvd2VkIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBuYW1lOiByZXNwb25zZS5pdGVtc1VuZm9sbG93ZWRbMF0KICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkU3VjY2VzcyhzdWNjZXNzTWVzc2FnZSk7CiAgICAgIH0KCiAgICAgIGlmIChyZXNwb25zZS5pdGVtc05vdE9wZW4ubGVuZ3RoKSB7CiAgICAgICAgdmFyIGhhc011bHRpcGxlTm90T3BlbiA9IHJlc3BvbnNlLml0ZW1zTm90T3Blbi5sZW5ndGggPiAxOwogICAgICAgIHZhciB3YXJuaW5nTWVzc2FnZSA9IGhhc011bHRpcGxlTm90T3BlbiA/IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5jcm9zc0NsdXN0ZXJSZXBsaWNhdGlvbi5mb2xsb3dlckluZGV4LnVuZm9sbG93QWN0aW9uLm5vdE9wZW5XYXJuaW5nTXVsdGlwbGVOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAie2NvdW50fSBpbmRpY2VzIGNvdWxkIG5vdCBiZSByZS1vcGVuZWQiLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGNvdW50OiByZXNwb25zZS5pdGVtc05vdE9wZW4ubGVuZ3RoCiAgICAgICAgICB9CiAgICAgICAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uZm9sbG93ZXJJbmRleC51bmZvbGxvd0FjdGlvbi5ub3RPcGVuV2FybmluZ1NpbmdsZU5vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJJbmRleCAne25hbWV9JyBjb3VsZCBub3QgYmUgcmUtb3BlbmVkIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBuYW1lOiByZXNwb25zZS5pdGVtc05vdE9wZW5bMF0KICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkV2FybmluZyh3YXJuaW5nTWVzc2FnZSk7CiAgICAgIH0gLy8gSWYgd2UndmUganVzdCB1bmZvbGxvd2VkIGEgZm9sbG93ZXIgaW5kZXggd2Ugd2VyZSBsb29raW5nIGF0LCB3ZSBuZWVkIHRvIGNsb3NlIHRoZSBwYW5lbC4KCgogICAgICB2YXIgZm9sbG93ZXJJbmRleElkID0gKDAsIF9zZWxlY3RvcnMuZ2V0U2VsZWN0ZWRGb2xsb3dlckluZGV4SWQpKCdkZXRhaWwnKShnZXRTdGF0ZSgpKTsKCiAgICAgIGlmIChyZXNwb25zZS5pdGVtc1VuZm9sbG93ZWQuaW5jbHVkZXMoZm9sbG93ZXJJbmRleElkKSkgewogICAgICAgIGRpc3BhdGNoKHNlbGVjdERldGFpbEZvbGxvd2VySW5kZXgobnVsbCkpOwogICAgICB9CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLnVuZm9sbG93TGVhZGVySW5kZXggPSB1bmZvbGxvd0xlYWRlckluZGV4Ow=="},null]}