{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/canvas/public/components/element_types/element_types.js","dependencies":[{"path":"x-pack/legacy/plugins/canvas/public/components/element_types/element_types.js","mtime":1585205043641},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkVsZW1lbnRUeXBlcyA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcHJvcFR5cGVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJwcm9wLXR5cGVzIikpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2NvbmZpcm1fbW9kYWwgPSByZXF1aXJlKCIuLi9jb25maXJtX21vZGFsL2NvbmZpcm1fbW9kYWwiKTsKCnZhciBfY3VzdG9tX2VsZW1lbnRfbW9kYWwgPSByZXF1aXJlKCIuLi9jdXN0b21fZWxlbWVudF9tb2RhbCIpOwoKdmFyIF9nZXRfdGFnc19maWx0ZXIgPSByZXF1aXJlKCIuLi8uLi9saWIvZ2V0X3RhZ3NfZmlsdGVyIik7Cgp2YXIgX2V4dHJhY3Rfc2VhcmNoID0gcmVxdWlyZSgiLi4vLi4vbGliL2V4dHJhY3Rfc2VhcmNoIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCIuLi8uLi8uLi9pMThuIik7Cgp2YXIgX2VsZW1lbnRfZ3JpZCA9IHJlcXVpcmUoIi4vZWxlbWVudF9ncmlkIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIHN0cmluZ3MgPSBfaTE4bi5Db21wb25lbnRTdHJpbmdzLkVsZW1lbnRUeXBlczsKdmFyIHRhZ1R5cGUgPSAnYmFkZ2UnOwoKdmFyIEVsZW1lbnRUeXBlcyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoRWxlbWVudFR5cGVzLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gRWxlbWVudFR5cGVzKCkgewogICAgdmFyIF9nZXRQcm90b3R5cGVPZjI7CgogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFbGVtZW50VHlwZXMpOwoKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgfQoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9nZXRQcm90b3R5cGVPZjIgPSBfZ2V0UHJvdG90eXBlT2YoRWxlbWVudFR5cGVzKSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB7CiAgICAgIGVsZW1lbnRUb0RlbGV0ZTogbnVsbCwKICAgICAgZWxlbWVudFRvRWRpdDogbnVsbAogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX3Nob3dFZGl0TW9kYWwiLCBmdW5jdGlvbiAoZWxlbWVudFRvRWRpdCkgewogICAgICByZXR1cm4gX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGVsZW1lbnRUb0VkaXQ6IGVsZW1lbnRUb0VkaXQKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfaGlkZUVkaXRNb2RhbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBlbGVtZW50VG9FZGl0OiBudWxsCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2hhbmRsZUVkaXQiLCBmdW5jdGlvbiBfY2FsbGVlKG5hbWUsIGRlc2NyaXB0aW9uLCBpbWFnZSkgewogICAgICB2YXIgdXBkYXRlQ3VzdG9tRWxlbWVudCwgZWxlbWVudFRvRWRpdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB1cGRhdGVDdXN0b21FbGVtZW50ID0gX3RoaXMucHJvcHMudXBkYXRlQ3VzdG9tRWxlbWVudDsKICAgICAgICAgICAgICBlbGVtZW50VG9FZGl0ID0gX3RoaXMuc3RhdGUuZWxlbWVudFRvRWRpdDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHVwZGF0ZUN1c3RvbUVsZW1lbnQoZWxlbWVudFRvRWRpdC5pZCwgbmFtZSwgZGVzY3JpcHRpb24sIGltYWdlKSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgX3RoaXMuX2hpZGVFZGl0TW9kYWwoKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfc2hvd0RlbGV0ZU1vZGFsIiwgZnVuY3Rpb24gKGVsZW1lbnRUb0RlbGV0ZSkgewogICAgICByZXR1cm4gX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGVsZW1lbnRUb0RlbGV0ZTogZWxlbWVudFRvRGVsZXRlCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2hpZGVEZWxldGVNb2RhbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBlbGVtZW50VG9EZWxldGU6IG51bGwKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfaGFuZGxlRGVsZXRlIiwgZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciByZW1vdmVDdXN0b21FbGVtZW50LCBlbGVtZW50VG9EZWxldGU7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHJlbW92ZUN1c3RvbUVsZW1lbnQgPSBfdGhpcy5wcm9wcy5yZW1vdmVDdXN0b21FbGVtZW50OwogICAgICAgICAgICAgIGVsZW1lbnRUb0RlbGV0ZSA9IF90aGlzLnN0YXRlLmVsZW1lbnRUb0RlbGV0ZTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChyZW1vdmVDdXN0b21FbGVtZW50KGVsZW1lbnRUb0RlbGV0ZS5pZCkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF90aGlzLl9oaWRlRGVsZXRlTW9kYWwoKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX3JlbmRlckVkaXRNb2RhbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGVsZW1lbnRUb0VkaXQgPSBfdGhpcy5zdGF0ZS5lbGVtZW50VG9FZGl0OwoKICAgICAgaWYgKCFlbGVtZW50VG9FZGl0KSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpT3ZlcmxheU1hc2ssIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2N1c3RvbV9lbGVtZW50X21vZGFsLkN1c3RvbUVsZW1lbnRNb2RhbCwgewogICAgICAgIHRpdGxlOiBzdHJpbmdzLmdldEVkaXRFbGVtZW50VGl0bGUoKSwKICAgICAgICBuYW1lOiBlbGVtZW50VG9FZGl0LmRpc3BsYXlOYW1lLAogICAgICAgIGRlc2NyaXB0aW9uOiBlbGVtZW50VG9FZGl0LmhlbHAsCiAgICAgICAgaW1hZ2U6IGVsZW1lbnRUb0VkaXQuaW1hZ2UsCiAgICAgICAgb25TYXZlOiBfdGhpcy5faGFuZGxlRWRpdCwKICAgICAgICBvbkNhbmNlbDogX3RoaXMuX2hpZGVFZGl0TW9kYWwKICAgICAgfSkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX3JlbmRlckRlbGV0ZU1vZGFsIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgZWxlbWVudFRvRGVsZXRlID0gX3RoaXMuc3RhdGUuZWxlbWVudFRvRGVsZXRlOwoKICAgICAgaWYgKCFlbGVtZW50VG9EZWxldGUpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbmZpcm1fbW9kYWwuQ29uZmlybU1vZGFsLCB7CiAgICAgICAgaXNPcGVuOiB0cnVlLAogICAgICAgIHRpdGxlOiBzdHJpbmdzLmdldERlbGV0ZUVsZW1lbnRUaXRsZShlbGVtZW50VG9EZWxldGUuZGlzcGxheU5hbWUpLAogICAgICAgIG1lc3NhZ2U6IHN0cmluZ3MuZ2V0RGVsZXRlRWxlbWVudERlc2NyaXB0aW9uKCksCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHN0cmluZ3MuZ2V0RGVsZXRlQnV0dG9uTGFiZWwoKSwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiBzdHJpbmdzLmdldENhbmNlbEJ1dHRvbkxhYmVsKCksCiAgICAgICAgb25Db25maXJtOiBfdGhpcy5faGFuZGxlRGVsZXRlLAogICAgICAgIG9uQ2FuY2VsOiBfdGhpcy5faGlkZURlbGV0ZU1vZGFsCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX3NvcnRFbGVtZW50cyIsIGZ1bmN0aW9uIChlbGVtZW50cykgewogICAgICByZXR1cm4gKDAsIF9sb2Rhc2guc29ydEJ5KSgoMCwgX2xvZGFzaC5tYXApKGVsZW1lbnRzLCBmdW5jdGlvbiAoZWxlbWVudCwgbmFtZSkgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIG5hbWU6IG5hbWUKICAgICAgICB9LCBlbGVtZW50KTsKICAgICAgfSksICdkaXNwbGF5TmFtZScpOwogICAgfSk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEVsZW1lbnRUeXBlcywgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgLy8gZmV0Y2ggY3VzdG9tIGVsZW1lbnRzCiAgICAgIHRoaXMucHJvcHMuZmluZEN1c3RvbUVsZW1lbnRzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsCiAgICAgICAgICBzZWFyY2ggPSBfdGhpcyRwcm9wcy5zZWFyY2gsCiAgICAgICAgICBzZXRTZWFyY2ggPSBfdGhpcyRwcm9wcy5zZXRTZWFyY2gsCiAgICAgICAgICBhZGRFbGVtZW50ID0gX3RoaXMkcHJvcHMuYWRkRWxlbWVudCwKICAgICAgICAgIGFkZEN1c3RvbUVsZW1lbnQgPSBfdGhpcyRwcm9wcy5hZGRDdXN0b21FbGVtZW50LAogICAgICAgICAgZmlsdGVyVGFncyA9IF90aGlzJHByb3BzLmZpbHRlclRhZ3MsCiAgICAgICAgICBzZXRGaWx0ZXJUYWdzID0gX3RoaXMkcHJvcHMuc2V0RmlsdGVyVGFnczsKICAgICAgdmFyIF90aGlzJHByb3BzMiA9IHRoaXMucHJvcHMsCiAgICAgICAgICBlbGVtZW50cyA9IF90aGlzJHByb3BzMi5lbGVtZW50cywKICAgICAgICAgIGN1c3RvbUVsZW1lbnRzID0gX3RoaXMkcHJvcHMyLmN1c3RvbUVsZW1lbnRzOwogICAgICBlbGVtZW50cyA9IHRoaXMuX3NvcnRFbGVtZW50cyhlbGVtZW50cyk7CgogICAgICB2YXIgY3VzdG9tRWxlbWVudENvbnRlbnQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRW1wdHlQcm9tcHQsIHsKICAgICAgICBpY29uVHlwZTogInZlY3RvciIsCiAgICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgyIiwgbnVsbCwgc3RyaW5ncy5nZXRBZGROZXdFbGVtZW50VGl0bGUoKSksCiAgICAgICAgYm9keTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIHN0cmluZ3MuZ2V0QWRkTmV3RWxlbWVudERlc2NyaXB0aW9uKCkpLAogICAgICAgIHRpdGxlU2l6ZTogInMiCiAgICAgIH0pOwoKICAgICAgaWYgKGN1c3RvbUVsZW1lbnRzLmxlbmd0aCkgewogICAgICAgIGN1c3RvbUVsZW1lbnRzID0gdGhpcy5fc29ydEVsZW1lbnRzKGN1c3RvbUVsZW1lbnRzKTsKICAgICAgICBjdXN0b21FbGVtZW50Q29udGVudCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2VsZW1lbnRfZ3JpZC5FbGVtZW50R3JpZCwgewogICAgICAgICAgZWxlbWVudHM6IGN1c3RvbUVsZW1lbnRzLAogICAgICAgICAgZmlsdGVyOiBzZWFyY2gsCiAgICAgICAgICBoYW5kbGVDbGljazogYWRkQ3VzdG9tRWxlbWVudCwKICAgICAgICAgIHNob3dDb250cm9sczogdHJ1ZSwKICAgICAgICAgIG9uRWRpdDogdGhpcy5fc2hvd0VkaXRNb2RhbCwKICAgICAgICAgIG9uRGVsZXRlOiB0aGlzLl9zaG93RGVsZXRlTW9kYWwKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdmFyIGZpbHRlcnMgPSBbKDAsIF9nZXRfdGFnc19maWx0ZXIuZ2V0VGFnc0ZpbHRlcikodGFnVHlwZSldOwoKICAgICAgdmFyIG9uU2VhcmNoID0gZnVuY3Rpb24gb25TZWFyY2goX3JlZikgewogICAgICAgIHZhciBxdWVyeVRleHQgPSBfcmVmLnF1ZXJ5VGV4dDsKCiAgICAgICAgdmFyIF9leHRyYWN0U2VhcmNoID0gKDAsIF9leHRyYWN0X3NlYXJjaC5leHRyYWN0U2VhcmNoKShxdWVyeVRleHQpLAogICAgICAgICAgICBzZWFyY2hUZXJtID0gX2V4dHJhY3RTZWFyY2guc2VhcmNoVGVybSwKICAgICAgICAgICAgZmlsdGVyVGFncyA9IF9leHRyYWN0U2VhcmNoLmZpbHRlclRhZ3M7CgogICAgICAgIHNldFNlYXJjaChzZWFyY2hUZXJtKTsKICAgICAgICBzZXRGaWx0ZXJUYWdzKGZpbHRlclRhZ3MpOwogICAgICB9OwoKICAgICAgdmFyIHRhYnMgPSBbewogICAgICAgIGlkOiAnZWxlbWVudHMnLAogICAgICAgIG5hbWU6IHN0cmluZ3MuZ2V0RWxlbWVudHNUaXRsZSgpLAogICAgICAgIGNvbnRlbnQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImNhbnZhc0VsZW1lbnRzX19maWx0ZXIiCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgbnVsbCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTZWFyY2hCYXIsIHsKICAgICAgICAgIGRlZmF1bHRRdWVyeTogc2VhcmNoLAogICAgICAgICAgYm94OiB7CiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBzdHJpbmdzLmdldEZpbmRFbGVtZW50UGxhY2Vob2xkZXIoKSwKICAgICAgICAgICAgaW5jcmVtZW50YWw6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBmaWx0ZXJzOiBmaWx0ZXJzLAogICAgICAgICAgb25DaGFuZ2U6IG9uU2VhcmNoCiAgICAgICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIG51bGwpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9lbGVtZW50X2dyaWQuRWxlbWVudEdyaWQsIHsKICAgICAgICAgIGVsZW1lbnRzOiBlbGVtZW50cywKICAgICAgICAgIGZpbHRlclRleHQ6IHNlYXJjaCwKICAgICAgICAgIGZpbHRlclRhZ3M6IGZpbHRlclRhZ3MsCiAgICAgICAgICBoYW5kbGVDbGljazogYWRkRWxlbWVudAogICAgICAgIH0pKQogICAgICB9LCB7CiAgICAgICAgaWQ6ICdjdXN0b21FbGVtZW50cycsCiAgICAgICAgbmFtZTogc3RyaW5ncy5nZXRNeUVsZW1lbnRzVGl0bGUoKSwKICAgICAgICBjb250ZW50OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgbnVsbCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTZWFyY2hCYXIsIHsKICAgICAgICAgIGRlZmF1bHRRdWVyeTogc2VhcmNoLAogICAgICAgICAgYm94OiB7CiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBzdHJpbmdzLmdldEZpbmRFbGVtZW50UGxhY2Vob2xkZXIoKSwKICAgICAgICAgICAgaW5jcmVtZW50YWw6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBvbkNoYW5nZTogb25TZWFyY2gKICAgICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgbnVsbCksIGN1c3RvbUVsZW1lbnRDb250ZW50KQogICAgICB9XTsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTW9kYWxCb2R5LCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIHBhZGRpbmdSaWdodDogJzFweCcKICAgICAgICB9CiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUYWJiZWRDb250ZW50LCB7CiAgICAgICAgdGFiczogdGFicywKICAgICAgICBpbml0aWFsU2VsZWN0ZWRUYWI6IHRhYnNbMF0KICAgICAgfSkpLCB0aGlzLl9yZW5kZXJEZWxldGVNb2RhbCgpLCB0aGlzLl9yZW5kZXJFZGl0TW9kYWwoKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRWxlbWVudFR5cGVzOwp9KF9yZWFjdC5Db21wb25lbnQpOwoKZXhwb3J0cy5FbGVtZW50VHlwZXMgPSBFbGVtZW50VHlwZXM7CgpfZGVmaW5lUHJvcGVydHkoRWxlbWVudFR5cGVzLCAicHJvcFR5cGVzIiwgewogIGFkZEN1c3RvbUVsZW1lbnQ6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgYWRkRWxlbWVudDogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCwKICBjdXN0b21FbGVtZW50czogX3Byb3BUeXBlcy5kZWZhdWx0LmFycmF5LmlzUmVxdWlyZWQsCiAgZWxlbWVudHM6IF9wcm9wVHlwZXMuZGVmYXVsdC5vYmplY3QsCiAgZmlsdGVyVGFnczogX3Byb3BUeXBlcy5kZWZhdWx0LmFycmF5T2YoX3Byb3BUeXBlcy5kZWZhdWx0LnN0cmluZykuaXNSZXF1aXJlZCwKICBmaW5kQ3VzdG9tRWxlbWVudHM6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgb25DbG9zZTogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCwKICByZW1vdmVDdXN0b21FbGVtZW50OiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIHNlYXJjaDogX3Byb3BUeXBlcy5kZWZhdWx0LnN0cmluZywKICBzZXRDdXN0b21FbGVtZW50czogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCwKICBzZXRTZWFyY2g6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgc2V0RmlsdGVyVGFnczogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCwKICB1cGRhdGVDdXN0b21FbGVtZW50OiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkCn0pOw=="},null]}