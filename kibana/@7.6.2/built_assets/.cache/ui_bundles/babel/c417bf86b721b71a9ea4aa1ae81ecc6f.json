{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/security/public/views/management/edit_role/components/privileges/kibana/space_aware_privilege_section/privilege_space_table.js","dependencies":[{"path":"x-pack/legacy/plugins/security/public/views/management/edit_role/components/privileges/kibana/space_aware_privilege_section/privilege_space_table.js","mtime":1585205047204},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuUHJpdmlsZWdlU3BhY2VUYWJsZSA9IHZvaWQgMDsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3JlYWN0ID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9zcGFjZV9hdmF0YXIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9zcGFjZXMvcHVibGljL3NwYWNlX2F2YXRhciIpOwoKdmFyIF9wcml2aWxlZ2VfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWIvcHJpdmlsZWdlX3V0aWxzIik7Cgp2YXIgX3JvbGVfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWIvcm9sZV91dGlscyIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9saWIvY29uc3RhbnRzIik7Cgp2YXIgX3NwYWNlc19wb3BvdmVyX2xpc3QgPSByZXF1aXJlKCIuLi8uLi8uLi9zcGFjZXNfcG9wb3Zlcl9saXN0Iik7Cgp2YXIgX3ByaXZpbGVnZV9kaXNwbGF5ID0gcmVxdWlyZSgiLi9wcml2aWxlZ2VfZGlzcGxheSIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogIGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiKSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0gZWxzZSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfQoKICByZXR1cm4gX3R5cGVvZihvYmopOwp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIF9leHRlbmRzKCkgewogIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOwoKICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7CiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiB0YXJnZXQ7CiAgfTsKCiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsKICBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7CiAgICByZXR1cm4gY2FsbDsKICB9CgogIHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOwp9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogIF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOwogIH07CiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsKfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7CiAgaWYgKHNlbGYgPT09IHZvaWQgMCkgewogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICB9CgogIHJldHVybiBzZWxmOwp9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9CiAgfSk7CiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7Cn0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgICBvLl9fcHJvdG9fXyA9IHA7CiAgICByZXR1cm4gbzsKICB9OwoKICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIFNQQUNFU19ESVNQTEFZX0NPVU5UID0gNDsKCnZhciBQcml2aWxlZ2VTcGFjZVRhYmxlID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhQcml2aWxlZ2VTcGFjZVRhYmxlLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gUHJpdmlsZWdlU3BhY2VUYWJsZSgpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJpdmlsZWdlU3BhY2VUYWJsZSk7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX2dldFByb3RvdHlwZU9mMiA9IF9nZXRQcm90b3R5cGVPZihQcml2aWxlZ2VTcGFjZVRhYmxlKSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB7CiAgICAgIGV4cGFuZGVkU3BhY2VzR3JvdXBzOiBbXQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVuZGVyS2liYW5hUHJpdmlsZWdlcyIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBwcml2aWxlZ2VDYWxjdWxhdG9yRmFjdG9yeSA9IF90aGlzJHByb3BzLnByaXZpbGVnZUNhbGN1bGF0b3JGYWN0b3J5LAogICAgICAgICAgZGlzcGxheVNwYWNlcyA9IF90aGlzJHByb3BzLmRpc3BsYXlTcGFjZXMsCiAgICAgICAgICBpbnRsID0gX3RoaXMkcHJvcHMuaW50bDsKCiAgICAgIHZhciBzcGFjZVByaXZpbGVnZXMgPSBfdGhpcy5nZXRTb3J0ZWRQcml2aWxlZ2VzKCk7CgogICAgICB2YXIgcHJpdmlsZWdlQ2FsY3VsYXRvciA9IHByaXZpbGVnZUNhbGN1bGF0b3JGYWN0b3J5LmdldEluc3RhbmNlKF90aGlzLnByb3BzLnJvbGUpOwogICAgICB2YXIgZWZmZWN0aXZlUHJpdmlsZWdlcyA9IHByaXZpbGVnZUNhbGN1bGF0b3IuY2FsY3VsYXRlRWZmZWN0aXZlUHJpdmlsZWdlcyhmYWxzZSk7CiAgICAgIHZhciByb3dzID0gc3BhY2VQcml2aWxlZ2VzLm1hcChmdW5jdGlvbiAoc3BhY2VQcml2cywgc3BhY2VzSW5kZXgpIHsKICAgICAgICB2YXIgc3BhY2VzID0gc3BhY2VQcml2cy5zcGFjZXMubWFwKGZ1bmN0aW9uIChzcGFjZUlkKSB7CiAgICAgICAgICByZXR1cm4gZGlzcGxheVNwYWNlcy5maW5kKGZ1bmN0aW9uIChzcGFjZSkgewogICAgICAgICAgICByZXR1cm4gc3BhY2UuaWQgPT09IHNwYWNlSWQ7CiAgICAgICAgICB9KSB8fCB7CiAgICAgICAgICAgIGlkOiBzcGFjZUlkLAogICAgICAgICAgICBuYW1lOiBzcGFjZUlkLAogICAgICAgICAgICBkaXNhYmxlZEZlYXR1cmVzOiBbXSwKICAgICAgICAgICAgZGVsZXRlZDogdHJ1ZQogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgc3BhY2VzOiBzcGFjZXMsCiAgICAgICAgICBzcGFjZXNJbmRleDogc3BhY2VzSW5kZXgsCiAgICAgICAgICBpc0dsb2JhbDogKDAsIF9wcml2aWxlZ2VfdXRpbHMuaXNHbG9iYWxQcml2aWxlZ2VEZWZpbml0aW9uKShzcGFjZVByaXZzKSwKICAgICAgICAgIHByaXZpbGVnZXM6IHsKICAgICAgICAgICAgc3BhY2VzOiBzcGFjZVByaXZzLnNwYWNlcywKICAgICAgICAgICAgYmFzZTogc3BhY2VQcml2cy5iYXNlIHx8IFtdLAogICAgICAgICAgICBmZWF0dXJlOiBzcGFjZVByaXZzLmZlYXR1cmUgfHwge30KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9KTsKCiAgICAgIHZhciBnZXRFeHRyYUJhZGdlUHJvcHMgPSBmdW5jdGlvbiBnZXRFeHRyYUJhZGdlUHJvcHMoc3BhY2UpIHsKICAgICAgICBpZiAoc3BhY2UuZGVsZXRlZCkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaWNvblR5cGU6ICd0cmFzaCcKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4ge307CiAgICAgIH07CgogICAgICB2YXIgY29sdW1ucyA9IFt7CiAgICAgICAgZmllbGQ6ICdzcGFjZXMnLAogICAgICAgIG5hbWU6ICdTcGFjZXMnLAogICAgICAgIHdpZHRoOiAnNjAlJywKICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihzcGFjZXMsIHJlY29yZCkgewogICAgICAgICAgdmFyIGlzRXhwYW5kZWQgPSBfdGhpcy5zdGF0ZS5leHBhbmRlZFNwYWNlc0dyb3Vwcy5pbmNsdWRlcyhyZWNvcmQuc3BhY2VzSW5kZXgpOwoKICAgICAgICAgIHZhciBkaXNwbGF5ZWRTcGFjZXMgPSBpc0V4cGFuZGVkID8gc3BhY2VzIDogc3BhY2VzLnNsaWNlKDAsIFNQQUNFU19ESVNQTEFZX0NPVU5UKTsKICAgICAgICAgIHZhciBidXR0b24gPSBudWxsOwoKICAgICAgICAgIGlmIChyZWNvcmQuaXNHbG9iYWwpIHsKICAgICAgICAgICAgYnV0dG9uID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3NwYWNlc19wb3BvdmVyX2xpc3QuU3BhY2VzUG9wb3Zlckxpc3QsIHsKICAgICAgICAgICAgICBzcGFjZXM6IF90aGlzLnByb3BzLmRpc3BsYXlTcGFjZXMsCiAgICAgICAgICAgICAgaW50bDogX3RoaXMucHJvcHMuaW50bCwKICAgICAgICAgICAgICBidXR0b25UZXh0OiBfdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgaWQ6ICd4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LmVkaXRSb2xlLnNwYWNlUHJpdmlsZWdlVGFibGUuc2hvd0FsbFNwYWNlc0xpbmsnLAogICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdzaG93IHNwYWNlcycKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAoc3BhY2VzLmxlbmd0aCA+IGRpc3BsYXllZFNwYWNlcy5sZW5ndGgpIHsKICAgICAgICAgICAgYnV0dG9uID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b25FbXB0eSwgewogICAgICAgICAgICAgIHNpemU6ICJ4cyIsCiAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50b2dnbGVFeHBhbmRTcGFjZXNHcm91cChyZWNvcmQuc3BhY2VzSW5kZXgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGUuc3BhY2VQcml2aWxlZ2VUYWJsZS5zaG93Tk1vcmVTcGFjZXNMaW5rIiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIit7Y291bnR9IG1vcmUiLAogICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgY291bnQ6IHNwYWNlcy5sZW5ndGggLSBkaXNwbGF5ZWRTcGFjZXMubGVuZ3RoCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGlzRXhwYW5kZWQpIHsKICAgICAgICAgICAgYnV0dG9uID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b25FbXB0eSwgewogICAgICAgICAgICAgIHNpemU6ICJ4cyIsCiAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50b2dnbGVFeHBhbmRTcGFjZXNHcm91cChyZWNvcmQuc3BhY2VzSW5kZXgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGUuc3BhY2VQcml2aWxlZ2VUYWJsZS5zaG93TGVzc1NwYWNlc0xpbmsiLAogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAic2hvdyBsZXNzIgogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBkaXNwbGF5ZWRTcGFjZXMubWFwKGZ1bmN0aW9uIChzcGFjZSkgewogICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCYWRnZSwgX2V4dGVuZHMoewogICAgICAgICAgICAgIGtleTogc3BhY2UuaWQKICAgICAgICAgICAgfSwgZ2V0RXh0cmFCYWRnZVByb3BzKHNwYWNlKSwgewogICAgICAgICAgICAgIGNvbG9yOiAoMCwgX3NwYWNlX2F2YXRhci5nZXRTcGFjZUNvbG9yKShzcGFjZSkKICAgICAgICAgICAgfSksIHNwYWNlLm5hbWUpOwogICAgICAgICAgfSksIGJ1dHRvbik7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgZmllbGQ6ICdwcml2aWxlZ2VzJywKICAgICAgICBuYW1lOiAnUHJpdmlsZWdlcycsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIocHJpdmlsZWdlcywgcmVjb3JkKSB7CiAgICAgICAgICB2YXIgZWZmZWN0aXZlUHJpdmlsZWdlID0gZWZmZWN0aXZlUHJpdmlsZWdlc1tyZWNvcmQuc3BhY2VzSW5kZXhdOwogICAgICAgICAgdmFyIGJhc2VQcml2aWxlZ2UgPSBlZmZlY3RpdmVQcml2aWxlZ2UuYmFzZTsKCiAgICAgICAgICBpZiAoZWZmZWN0aXZlUHJpdmlsZWdlLnJlc2VydmVkICE9IG51bGwgJiYgZWZmZWN0aXZlUHJpdmlsZWdlLnJlc2VydmVkLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9wcml2aWxlZ2VfZGlzcGxheS5Qcml2aWxlZ2VEaXNwbGF5LCB7CiAgICAgICAgICAgICAgcHJpdmlsZWdlOiBlZmZlY3RpdmVQcml2aWxlZ2UucmVzZXJ2ZWQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC5pc0dsb2JhbCkgewogICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3ByaXZpbGVnZV9kaXNwbGF5LlByaXZpbGVnZURpc3BsYXksIHsKICAgICAgICAgICAgICBwcml2aWxlZ2U6ICgwLCBfcHJpdmlsZWdlX3V0aWxzLmhhc0Fzc2lnbmVkRmVhdHVyZVByaXZpbGVnZXMpKHByaXZpbGVnZXMpID8gX2NvbnN0YW50cy5DVVNUT01fUFJJVklMRUdFX1ZBTFVFIDogYmFzZVByaXZpbGVnZS5hY3R1YWxQcml2aWxlZ2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgaGFzTm9uU3VwZXJzZWRlZEN1c3RvbWl6YXRpb25zID0gT2JqZWN0LmtleXMocHJpdmlsZWdlcy5mZWF0dXJlKS5zb21lKGZ1bmN0aW9uIChmZWF0dXJlSWQpIHsKICAgICAgICAgICAgICB2YXIgZmVhdHVyZUVmZmVjdGl2ZVByaXZpbGVnZSA9IGVmZmVjdGl2ZVByaXZpbGVnZS5mZWF0dXJlW2ZlYXR1cmVJZF07CiAgICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmVFZmZlY3RpdmVQcml2aWxlZ2UgJiYgZmVhdHVyZUVmZmVjdGl2ZVByaXZpbGVnZS5kaXJlY3RseUFzc2lnbmVkRmVhdHVyZVByaXZpbGVnZU1vcmVQZXJtaXNzaXZlVGhhbkJhc2U7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdmFyIHNob3dDdXN0b20gPSBoYXNOb25TdXBlcnNlZGVkQ3VzdG9taXphdGlvbnMgfHwgKDAsIF9wcml2aWxlZ2VfdXRpbHMuaGFzQXNzaWduZWRGZWF0dXJlUHJpdmlsZWdlcykocHJpdmlsZWdlcykgJiYgZWZmZWN0aXZlUHJpdmlsZWdlLmJhc2UuYWN0dWFsUHJpdmlsZWdlID09PSBfY29uc3RhbnRzLk5PX1BSSVZJTEVHRV9WQUxVRTsKCiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcHJpdmlsZWdlX2Rpc3BsYXkuUHJpdmlsZWdlRGlzcGxheSwgewogICAgICAgICAgICAgIGV4cGxhbmF0aW9uOiBoYXNOb25TdXBlcnNlZGVkQ3VzdG9taXphdGlvbnMgPyB1bmRlZmluZWQgOiBiYXNlUHJpdmlsZWdlLAogICAgICAgICAgICAgIHByaXZpbGVnZTogc2hvd0N1c3RvbSA/IF9jb25zdGFudHMuQ1VTVE9NX1BSSVZJTEVHRV9WQUxVRSA6IGJhc2VQcml2aWxlZ2UuYWN0dWFsUHJpdmlsZWdlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfV07CgogICAgICBpZiAoIV90aGlzLnByb3BzLmRpc2FibGVkKSB7CiAgICAgICAgY29sdW1ucy5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdBY3Rpb25zJywKICAgICAgICAgIGFjdGlvbnM6IFt7CiAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHJlY29yZCkgewogICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkljb24sIHsKICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogaW50bC5mb3JtYXRNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgaWQ6ICd4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LmVkaXRSb2xlLnNwYWNlUHJpdmlsZWdlVGFibGUuZWRpdFByaXZpbGVnZXNMYWJlbCcsCiAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRWRpdCBwcml2aWxlZ2VzIGZvciB0aGUgZm9sbG93aW5nIHNwYWNlczoge3NwYWNlTmFtZXN9LiIKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgc3BhY2VOYW1lczogcmVjb3JkLnNwYWNlcy5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5uYW1lOwogICAgICAgICAgICAgICAgICB9KS5qb2luKCcsICcpCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIGNvbG9yOiAncHJpbWFyeScsCiAgICAgICAgICAgICAgICBpY29uVHlwZTogJ3BlbmNpbCcsCiAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucHJvcHMub25FZGl0KHJlY29yZC5zcGFjZXNJbmRleCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIocmVjb3JkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uSWNvbiwgewogICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICBpZDogJ3hwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGUuc3BhY2VQcml2aWxlZ2VUYWJsZS5kZWxldGVQcml2aWxlZ2VzTGFiZWwnLAogICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRlbGV0ZSBwcml2aWxlZ2VzIGZvciB0aGUgZm9sbG93aW5nIHNwYWNlczoge3NwYWNlTmFtZXN9LiIKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgc3BhY2VOYW1lczogcmVjb3JkLnNwYWNlcy5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5uYW1lOwogICAgICAgICAgICAgICAgICB9KS5qb2luKCcsICcpCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgICAgICAgIGljb25UeXBlOiAndHJhc2gnLAogICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9uRGVsZXRlU3BhY2VQcml2aWxlZ2UocmVjb3JkKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfV0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSW5NZW1vcnlUYWJsZSwgewogICAgICAgIGNvbHVtbnM6IGNvbHVtbnMsCiAgICAgICAgaXRlbXM6IHJvd3MsCiAgICAgICAgaGFzQWN0aW9uczogdHJ1ZSwKICAgICAgICByb3dQcm9wczogZnVuY3Rpb24gcm93UHJvcHMoaXRlbSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAoMCwgX3ByaXZpbGVnZV91dGlscy5pc0dsb2JhbFByaXZpbGVnZURlZmluaXRpb24pKGl0ZW0ucHJpdmlsZWdlcykgPyAnc2VjUHJpdmlsZWdlVGFibGVfX3Jvdy0taXNHbG9iYWxTcGFjZScgOiAnJwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0U29ydGVkUHJpdmlsZWdlcyIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHNwYWNlUHJpdmlsZWdlcyA9IF90aGlzLnByb3BzLnJvbGUua2liYW5hOwogICAgICByZXR1cm4gc3BhY2VQcml2aWxlZ2VzLnNvcnQoZnVuY3Rpb24gKHByaXYxLCBwcml2MikgewogICAgICAgIHJldHVybiAoMCwgX3ByaXZpbGVnZV91dGlscy5pc0dsb2JhbFByaXZpbGVnZURlZmluaXRpb24pKHByaXYxKSA/IC0xIDogKDAsIF9wcml2aWxlZ2VfdXRpbHMuaXNHbG9iYWxQcml2aWxlZ2VEZWZpbml0aW9uKShwcml2MikgPyAxIDogMDsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ0b2dnbGVFeHBhbmRTcGFjZXNHcm91cCIsIGZ1bmN0aW9uIChzcGFjZXNJbmRleCkgewogICAgICBpZiAoX3RoaXMuc3RhdGUuZXhwYW5kZWRTcGFjZXNHcm91cHMuaW5jbHVkZXMoc3BhY2VzSW5kZXgpKSB7CiAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgZXhwYW5kZWRTcGFjZXNHcm91cHM6IF90aGlzLnN0YXRlLmV4cGFuZGVkU3BhY2VzR3JvdXBzLmZpbHRlcihmdW5jdGlvbiAoaSkgewogICAgICAgICAgICByZXR1cm4gaSAhPT0gc3BhY2VzSW5kZXg7CiAgICAgICAgICB9KQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGV4cGFuZGVkU3BhY2VzR3JvdXBzOiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzLnN0YXRlLmV4cGFuZGVkU3BhY2VzR3JvdXBzKSwgW3NwYWNlc0luZGV4XSkKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25EZWxldGVTcGFjZVByaXZpbGVnZSIsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHZhciByb2xlQ29weSA9ICgwLCBfcm9sZV91dGlscy5jb3B5Um9sZSkoX3RoaXMucHJvcHMucm9sZSk7CiAgICAgIHJvbGVDb3B5LmtpYmFuYS5zcGxpY2UoaXRlbS5zcGFjZXNJbmRleCwgMSk7CgogICAgICBfdGhpcy5wcm9wcy5vbkNoYW5nZShyb2xlQ29weSk7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZXhwYW5kZWRTcGFjZXNHcm91cHM6IF90aGlzLnN0YXRlLmV4cGFuZGVkU3BhY2VzR3JvdXBzLmZpbHRlcihmdW5jdGlvbiAoaSkgewogICAgICAgICAgcmV0dXJuIGkgIT09IGl0ZW0uc3BhY2VzSW5kZXg7CiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9KTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUHJpdmlsZWdlU3BhY2VUYWJsZSwgW3sKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICByZXR1cm4gdGhpcy5yZW5kZXJLaWJhbmFQcml2aWxlZ2VzKCk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUHJpdmlsZWdlU3BhY2VUYWJsZTsKfShfcmVhY3QyLkNvbXBvbmVudCk7CgpleHBvcnRzLlByaXZpbGVnZVNwYWNlVGFibGUgPSBQcml2aWxlZ2VTcGFjZVRhYmxlOw=="},null]}