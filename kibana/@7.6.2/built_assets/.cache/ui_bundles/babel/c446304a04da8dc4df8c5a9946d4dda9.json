{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/snapshot_restore/public/app/components/policy_form/steps/step_retention.js","dependencies":[{"path":"x-pack/legacy/plugins/snapshot_restore/public/app/components/policy_form/steps/step_retention.js","mtime":1585205048207},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlBvbGljeVN0ZXBSZXRlbnRpb24gPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX2RvY3VtZW50YXRpb24gPSByZXF1aXJlKCIuLi8uLi8uLi9zZXJ2aWNlcy9kb2N1bWVudGF0aW9uIik7Cgp2YXIgX2luZGV4ID0gcmVxdWlyZSgiLi4vLi4vLi4vaW5kZXgiKTsKCnZhciBfdGV4dCA9IHJlcXVpcmUoIi4uLy4uLy4uL3NlcnZpY2VzL3RleHQiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCnZhciBnZXRFeHBpcmF0aW9uVGltZU9wdGlvbnMgPSBmdW5jdGlvbiBnZXRFeHBpcmF0aW9uVGltZU9wdGlvbnMoKSB7CiAgdmFyIHVuaXRTaXplID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnMCc7CiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKF9jb25zdGFudHMuVElNRV9VTklUUykubWFwKGZ1bmN0aW9uIChfcmVmKSB7CiAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSwKICAgICAgICBfa2V5ID0gX3JlZjJbMF0sCiAgICAgICAgdmFsdWUgPSBfcmVmMlsxXTsKCiAgICByZXR1cm4gewogICAgICB0ZXh0OiBfdGV4dC50ZXh0U2VydmljZS5nZXRUaW1lVW5pdExhYmVsKHZhbHVlLCB1bml0U2l6ZSksCiAgICAgIHZhbHVlOiB2YWx1ZQogICAgfTsKICB9KTsKfTsKCnZhciBQb2xpY3lTdGVwUmV0ZW50aW9uID0gZnVuY3Rpb24gUG9saWN5U3RlcFJldGVudGlvbihfcmVmMykgewogIHZhciBwb2xpY3kgPSBfcmVmMy5wb2xpY3ksCiAgICAgIHVwZGF0ZVBvbGljeSA9IF9yZWYzLnVwZGF0ZVBvbGljeSwKICAgICAgZXJyb3JzID0gX3JlZjMuZXJyb3JzOwoKICB2YXIgX3VzZUFwcERlcGVuZGVuY2llcyA9ICgwLCBfaW5kZXgudXNlQXBwRGVwZW5kZW5jaWVzKSgpLAogICAgICBpMThuID0gX3VzZUFwcERlcGVuZGVuY2llcy5jb3JlLmkxOG47CgogIHZhciBGb3JtYXR0ZWRNZXNzYWdlID0gaTE4bi5Gb3JtYXR0ZWRNZXNzYWdlOwogIHZhciBfcG9saWN5JHJldGVudGlvbiA9IHBvbGljeS5yZXRlbnRpb24sCiAgICAgIHJldGVudGlvbiA9IF9wb2xpY3kkcmV0ZW50aW9uID09PSB2b2lkIDAgPyB7fSA6IF9wb2xpY3kkcmV0ZW50aW9uOwoKICB2YXIgdXBkYXRlUG9saWN5UmV0ZW50aW9uID0gZnVuY3Rpb24gdXBkYXRlUG9saWN5UmV0ZW50aW9uKHVwZGF0ZWRGaWVsZHMpIHsKICAgIHZhciBuZXdSZXRlbnRpb24gPSBfb2JqZWN0U3ByZWFkKHt9LCByZXRlbnRpb24sIHt9LCB1cGRhdGVkRmllbGRzKTsKCiAgICB1cGRhdGVQb2xpY3koewogICAgICByZXRlbnRpb246IG5ld1JldGVudGlvbgogICAgfSk7CiAgfTsgLy8gU3RhdGUgZm9yIHRvdWNoZWQgaW5wdXRzCgoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoewogICAgZXhwaXJlQWZ0ZXJWYWx1ZTogZmFsc2UsCiAgICBtaW5Db3VudDogZmFsc2UsCiAgICBtYXhDb3VudDogZmFsc2UKICB9KSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIHRvdWNoZWQgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRUb3VjaGVkID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIHJlbmRlckV4cGlyZUFmdGVyRmllbGQgPSBmdW5jdGlvbiByZW5kZXJFeHBpcmVBZnRlckZpZWxkKCkgewogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlEZXNjcmliZWRGb3JtR3JvdXAsIHsKICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUaXRsZSwgewogICAgICAgIHNpemU6ICJzIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoMyIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnBvbGljeUZvcm0uc3RlcFJldGVudGlvbi5leHBpcmF0aW9uVGl0bGUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRXhwaXJhdGlvbiIKICAgICAgfSkpKSwKICAgICAgZGVzY3JpcHRpb246IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnBvbGljeUZvcm0uc3RlcFJldGVudGlvbi5leHBpcmF0aW9uRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVGhlIHRpbWUgdG8gd2FpdCBiZWZvcmUgZGVsZXRpbmcgc25hcHNob3RzLiIKICAgICAgfSksCiAgICAgIGlkQXJpYTogImV4cGlyYXRpb25EZXNjcmlwdGlvbiIsCiAgICAgIGZ1bGxXaWR0aDogdHJ1ZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgICAgbGFiZWw6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnBvbGljeUZvcm0uc3RlcFJldGVudGlvbi5leHBpcmVBZnRlckxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRlbGV0ZSBhZnRlciIKICAgICAgfSksCiAgICAgIGRlc2NyaWJlZEJ5SWRzOiBbJ2V4cGlyYXRpb25EZXNjcmlwdGlvbiddLAogICAgICBpc0ludmFsaWQ6IHRvdWNoZWQuZXhwaXJlQWZ0ZXJWYWx1ZSAmJiBCb29sZWFuKGVycm9ycy5leHBpcmVBZnRlclZhbHVlKSwKICAgICAgZXJyb3I6IGVycm9ycy5leHBpcmVBZnRlclZhbHVlLAogICAgICBmdWxsV2lkdGg6IHRydWUKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkTnVtYmVyLCB7CiAgICAgIHZhbHVlOiByZXRlbnRpb24uZXhwaXJlQWZ0ZXJWYWx1ZSB8fCAnJywKICAgICAgb25CbHVyOiBmdW5jdGlvbiBvbkJsdXIoKSB7CiAgICAgICAgcmV0dXJuIHNldFRvdWNoZWQoX29iamVjdFNwcmVhZCh7fSwgdG91Y2hlZCwgewogICAgICAgICAgZXhwaXJlQWZ0ZXJWYWx1ZTogdHJ1ZQogICAgICAgIH0pKTsKICAgICAgfSwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICB2YXIgdmFsdWUgPSBlLnRhcmdldC52YWx1ZTsKICAgICAgICB1cGRhdGVQb2xpY3lSZXRlbnRpb24oewogICAgICAgICAgZXhwaXJlQWZ0ZXJWYWx1ZTogdmFsdWUgIT09ICcnID8gTnVtYmVyKHZhbHVlKSA6IHZhbHVlCiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJleHBpcmVBZnRlclZhbHVlSW5wdXQiLAogICAgICBtaW46IDAKICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU2VsZWN0LCB7CiAgICAgIHZhbHVlOiByZXRlbnRpb24uZXhwaXJlQWZ0ZXJVbml0LAogICAgICBvcHRpb25zOiBnZXRFeHBpcmF0aW9uVGltZU9wdGlvbnMocmV0ZW50aW9uLmV4cGlyZUFmdGVyVmFsdWUgPyByZXRlbnRpb24uZXhwaXJlQWZ0ZXJWYWx1ZS50b1N0cmluZygpIDogdW5kZWZpbmVkKSwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICB1cGRhdGVQb2xpY3lSZXRlbnRpb24oewogICAgICAgICAgZXhwaXJlQWZ0ZXJVbml0OiBlLnRhcmdldC52YWx1ZQogICAgICAgIH0pOwogICAgICB9LAogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZXhwaXJlQWZ0ZXJVbml0U2VsZWN0IgogICAgfSkpKSkpOwogIH07CgogIHZhciByZW5kZXJDb3VudEZpZWxkcyA9IGZ1bmN0aW9uIHJlbmRlckNvdW50RmllbGRzKCkgewogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlEZXNjcmliZWRGb3JtR3JvdXAsIHsKICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUaXRsZSwgewogICAgICAgIHNpemU6ICJzIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoMyIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnBvbGljeUZvcm0uc3RlcFJldGVudGlvbi5jb3VudFRpdGxlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNuYXBzaG90cyB0byByZXRhaW4iCiAgICAgIH0pKSksCiAgICAgIGRlc2NyaXB0aW9uOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBSZXRlbnRpb24uY291bnREZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJUaGUgbWluaW11bSBhbmQgbWF4aW11bSBudW1iZXIgb2Ygc25hcHNob3RzIHRvIHN0b3JlIGluIHlvdXIgY2x1c3Rlci4iCiAgICAgIH0pLAogICAgICBpZEFyaWE6ICJjb3VudERlc2NyaXB0aW9uIiwKICAgICAgZnVsbFdpZHRoOiB0cnVlCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgIGxhYmVsOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBSZXRlbnRpb24ubWluQ291bnRMYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJNaW5pbnVtIGNvdW50IgogICAgICB9KSwKICAgICAgZGVzY3JpYmVkQnlJZHM6IFsnY291bnREZXNjcmlwdGlvbiddLAogICAgICBpc0ludmFsaWQ6IHRvdWNoZWQubWluQ291bnQgJiYgQm9vbGVhbihlcnJvcnMubWluQ291bnQpLAogICAgICBlcnJvcjogZXJyb3JzLm1pbkNvdW50LAogICAgICBmdWxsV2lkdGg6IHRydWUKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGaWVsZE51bWJlciwgewogICAgICBmdWxsV2lkdGg6IHRydWUsCiAgICAgIHZhbHVlOiByZXRlbnRpb24ubWluQ291bnQgfHwgJycsCiAgICAgIG9uQmx1cjogZnVuY3Rpb24gb25CbHVyKCkgewogICAgICAgIHJldHVybiBzZXRUb3VjaGVkKF9vYmplY3RTcHJlYWQoe30sIHRvdWNoZWQsIHsKICAgICAgICAgIG1pbkNvdW50OiB0cnVlCiAgICAgICAgfSkpOwogICAgICB9LAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgIHZhciB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlOwogICAgICAgIHVwZGF0ZVBvbGljeVJldGVudGlvbih7CiAgICAgICAgICBtaW5Db3VudDogdmFsdWUgIT09ICcnID8gTnVtYmVyKHZhbHVlKSA6IHZhbHVlCiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJtaW5Db3VudElucHV0IiwKICAgICAgbWluOiAwCiAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgIGxhYmVsOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNuYXBzaG90UmVzdG9yZS5wb2xpY3lGb3JtLnN0ZXBSZXRlbnRpb24ubWF4Q291bnRMYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJNYXhpbXVtIGNvdW50IgogICAgICB9KSwKICAgICAgZGVzY3JpYmVkQnlJZHM6IFsnY291bnREZXNjcmlwdGlvbiddLAogICAgICBpc0ludmFsaWQ6IHRvdWNoZWQubWF4Q291bnQgJiYgQm9vbGVhbihlcnJvcnMubWF4Q291bnQpLAogICAgICBlcnJvcjogZXJyb3JzLm1heENvdW50LAogICAgICBmdWxsV2lkdGg6IHRydWUKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGaWVsZE51bWJlciwgewogICAgICBmdWxsV2lkdGg6IHRydWUsCiAgICAgIHZhbHVlOiByZXRlbnRpb24ubWF4Q291bnQgfHwgJycsCiAgICAgIG9uQmx1cjogZnVuY3Rpb24gb25CbHVyKCkgewogICAgICAgIHJldHVybiBzZXRUb3VjaGVkKF9vYmplY3RTcHJlYWQoe30sIHRvdWNoZWQsIHsKICAgICAgICAgIG1heENvdW50OiB0cnVlCiAgICAgICAgfSkpOwogICAgICB9LAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgIHZhciB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlOwogICAgICAgIHVwZGF0ZVBvbGljeVJldGVudGlvbih7CiAgICAgICAgICBtYXhDb3VudDogdmFsdWUgIT09ICcnID8gTnVtYmVyKHZhbHVlKSA6IHZhbHVlCiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJtYXhDb3VudElucHV0IiwKICAgICAgbWluOiAwCiAgICB9KSkpKSk7CiAgfTsKCiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICBqdXN0aWZ5Q29udGVudDogInNwYWNlQmV0d2VlbiIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgIGdyb3c6IGZhbHNlCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRpdGxlLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoMiIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgaWQ6ICJ4cGFjay5zbmFwc2hvdFJlc3RvcmUucG9saWN5Rm9ybS5zdGVwUmV0ZW50aW9uVGl0bGUiLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJTbmFwc2hvdCByZXRlbnRpb24gKG9wdGlvbmFsKSIKICB9KSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICBncm93OiBmYWxzZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b25FbXB0eSwgewogICAgc2l6ZTogInMiLAogICAgZmx1c2g6ICJyaWdodCIsCiAgICBocmVmOiBfZG9jdW1lbnRhdGlvbi5kb2N1bWVudGF0aW9uTGlua3NTZXJ2aWNlLmdldFNsbVVybCgpLAogICAgdGFyZ2V0OiAiX2JsYW5rIiwKICAgIGljb25UeXBlOiAiaGVscCIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgIGlkOiAieHBhY2suc25hcHNob3RSZXN0b3JlLnBvbGljeUZvcm0uc3RlcFJldGVudGlvbi5kb2NzQnV0dG9uTGFiZWwiLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJTbmFwc2hvdCByZXRlbnRpb24gZG9jcyIKICB9KSkpKSwgcmVuZGVyRXhwaXJlQWZ0ZXJGaWVsZCgpLCByZW5kZXJDb3VudEZpZWxkcygpKTsKfTsKCmV4cG9ydHMuUG9saWN5U3RlcFJldGVudGlvbiA9IFBvbGljeVN0ZXBSZXRlbnRpb247"},null]}