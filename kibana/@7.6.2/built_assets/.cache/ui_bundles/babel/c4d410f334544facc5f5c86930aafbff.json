{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/components/super_date_picker/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/components/super_date_picker/index.js","mtime":1585205047659},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlN1cGVyRGF0ZVBpY2tlciA9IGV4cG9ydHMubWFrZU1hcFN0YXRlVG9Qcm9wcyA9IGV4cG9ydHMuZGlzcGF0Y2hVcGRhdGVSZWR1eFRpbWUgPSBleHBvcnRzLmZvcm1hdERhdGUgPSBleHBvcnRzLlN1cGVyRGF0ZVBpY2tlckNvbXBvbmVudCA9IHZvaWQgMDsKCnZhciBfZGF0ZW1hdGggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBlbGFzdGljL2RhdGVtYXRoIikpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfZnAgPSByZXF1aXJlKCJsb2Rhc2gvZnAiKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcmVhY3RSZWR1eCA9IHJlcXVpcmUoInJlYWN0LXJlZHV4Iik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMiKTsKCnZhciBfa2liYW5hID0gcmVxdWlyZSgiLi4vLi4vbGliL2tpYmFuYSIpOwoKdmFyIF9hY3Rpb25zID0gcmVxdWlyZSgiLi4vLi4vc3RvcmUvYWN0aW9ucyIpOwoKdmFyIF9zZWxlY3RvcnMgPSByZXF1aXJlKCIuL3NlbGVjdG9ycyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCnZhciBNQVhfUkVDRU5UTFlfVVNFRF9SQU5HRVMgPSA5OwoKdmFyIFN1cGVyRGF0ZVBpY2tlckNvbXBvbmVudCA9IF9yZWFjdC5kZWZhdWx0Lm1lbW8oZnVuY3Rpb24gKF9yZWYpIHsKICB2YXIgZHVyYXRpb24gPSBfcmVmLmR1cmF0aW9uLAogICAgICBlbmQgPSBfcmVmLmVuZCwKICAgICAgZnJvbVN0ciA9IF9yZWYuZnJvbVN0ciwKICAgICAgaWQgPSBfcmVmLmlkLAogICAgICBpc0xvYWRpbmcgPSBfcmVmLmlzTG9hZGluZywKICAgICAga2luZCA9IF9yZWYua2luZCwKICAgICAga3FsUXVlcnkgPSBfcmVmLmtxbFF1ZXJ5LAogICAgICBwb2xpY3kgPSBfcmVmLnBvbGljeSwKICAgICAgcXVlcmllcyA9IF9yZWYucXVlcmllcywKICAgICAgc2V0RHVyYXRpb24gPSBfcmVmLnNldER1cmF0aW9uLAogICAgICBzdGFydCA9IF9yZWYuc3RhcnQsCiAgICAgIHN0YXJ0QXV0b1JlbG9hZCA9IF9yZWYuc3RhcnRBdXRvUmVsb2FkLAogICAgICBzdG9wQXV0b1JlbG9hZCA9IF9yZWYuc3RvcEF1dG9SZWxvYWQsCiAgICAgIHRpbWVsaW5lSWQgPSBfcmVmLnRpbWVsaW5lSWQsCiAgICAgIHRvU3RyID0gX3JlZi50b1N0ciwKICAgICAgdXBkYXRlUmVkdXhUaW1lID0gX3JlZi51cGRhdGVSZWR1eFRpbWU7CgogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh0cnVlKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGlzUXVpY2tTZWxlY3Rpb24gPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRJc1F1aWNrU2VsZWN0aW9uID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTMgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShbXSksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgcmVjZW50bHlVc2VkUmFuZ2VzID0gX3VzZVN0YXRlNFswXSwKICAgICAgc2V0UmVjZW50bHlVc2VkUmFuZ2VzID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIG9uUmVmcmVzaCA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChfcmVmMikgewogICAgdmFyIG5ld1N0YXJ0ID0gX3JlZjIuc3RhcnQsCiAgICAgICAgbmV3RW5kID0gX3JlZjIuZW5kOwoKICAgIHZhciBfdXBkYXRlUmVkdXhUaW1lID0gdXBkYXRlUmVkdXhUaW1lKHsKICAgICAgZW5kOiBuZXdFbmQsCiAgICAgIGlkOiBpZCwKICAgICAgaXNJbnZhbGlkOiBmYWxzZSwKICAgICAgaXNRdWlja1NlbGVjdGlvbjogaXNRdWlja1NlbGVjdGlvbiwKICAgICAga3FsOiBrcWxRdWVyeSwKICAgICAgc3RhcnQ6IG5ld1N0YXJ0LAogICAgICB0aW1lbGluZUlkOiB0aW1lbGluZUlkCiAgICB9KSwKICAgICAgICBrcWxIYXZlQmVlblVwZGF0ZWQgPSBfdXBkYXRlUmVkdXhUaW1lLmtxbEhhdmVCZWVuVXBkYXRlZDsKCiAgICB2YXIgY3VycmVudFN0YXJ0ID0gZm9ybWF0RGF0ZShuZXdTdGFydCk7CiAgICB2YXIgY3VycmVudEVuZCA9IGlzUXVpY2tTZWxlY3Rpb24gPyBmb3JtYXREYXRlKG5ld0VuZCwgewogICAgICByb3VuZFVwOiB0cnVlCiAgICB9KSA6IGZvcm1hdERhdGUobmV3RW5kKTsKCiAgICBpZiAoIWtxbEhhdmVCZWVuVXBkYXRlZCAmJiAoIWlzUXVpY2tTZWxlY3Rpb24gfHwgc3RhcnQgPT09IGN1cnJlbnRTdGFydCAmJiBlbmQgPT09IGN1cnJlbnRFbmQpKSB7CiAgICAgIHJlZmV0Y2hRdWVyeShxdWVyaWVzKTsKICAgIH0KICB9LCBbZW5kLCBpZCwgaXNRdWlja1NlbGVjdGlvbiwga3FsUXVlcnksIHN0YXJ0LCB0aW1lbGluZUlkXSk7CiAgdmFyIG9uUmVmcmVzaENoYW5nZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChfcmVmMykgewogICAgdmFyIGlzUGF1c2VkID0gX3JlZjMuaXNQYXVzZWQsCiAgICAgICAgcmVmcmVzaEludGVydmFsID0gX3JlZjMucmVmcmVzaEludGVydmFsOwoKICAgIGlmIChkdXJhdGlvbiAhPT0gcmVmcmVzaEludGVydmFsKSB7CiAgICAgIHNldER1cmF0aW9uKHsKICAgICAgICBpZDogaWQsCiAgICAgICAgZHVyYXRpb246IHJlZnJlc2hJbnRlcnZhbAogICAgICB9KTsKICAgIH0KCiAgICBpZiAoaXNQYXVzZWQgJiYgcG9saWN5ID09PSAnaW50ZXJ2YWwnKSB7CiAgICAgIHN0b3BBdXRvUmVsb2FkKHsKICAgICAgICBpZDogaWQKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKCFpc1BhdXNlZCAmJiBwb2xpY3kgPT09ICdtYW51YWwnKSB7CiAgICAgIHN0YXJ0QXV0b1JlbG9hZCh7CiAgICAgICAgaWQ6IGlkCiAgICAgIH0pOwogICAgfQoKICAgIGlmICghaXNQYXVzZWQgJiYgKCFpc1F1aWNrU2VsZWN0aW9uIHx8IGlzUXVpY2tTZWxlY3Rpb24gJiYgdG9TdHIgIT09ICdub3cnKSkgewogICAgICByZWZldGNoUXVlcnkocXVlcmllcyk7CiAgICB9CiAgfSwgW2lkLCBpc1F1aWNrU2VsZWN0aW9uLCBkdXJhdGlvbiwgcG9saWN5LCB0b1N0cl0pOwoKICB2YXIgcmVmZXRjaFF1ZXJ5ID0gZnVuY3Rpb24gcmVmZXRjaFF1ZXJ5KG5ld1F1ZXJpZXMpIHsKICAgIG5ld1F1ZXJpZXMuZm9yRWFjaChmdW5jdGlvbiAocSkgewogICAgICByZXR1cm4gcS5yZWZldGNoICYmIHEucmVmZXRjaCgpOwogICAgfSk7CiAgfTsKCiAgdmFyIG9uVGltZUNoYW5nZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChfcmVmNCkgewogICAgdmFyIG5ld1N0YXJ0ID0gX3JlZjQuc3RhcnQsCiAgICAgICAgbmV3RW5kID0gX3JlZjQuZW5kLAogICAgICAgIG5ld0lzUXVpY2tTZWxlY3Rpb24gPSBfcmVmNC5pc1F1aWNrU2VsZWN0aW9uLAogICAgICAgIGlzSW52YWxpZCA9IF9yZWY0LmlzSW52YWxpZDsKCiAgICBpZiAoIWlzSW52YWxpZCkgewogICAgICB1cGRhdGVSZWR1eFRpbWUoewogICAgICAgIGVuZDogbmV3RW5kLAogICAgICAgIGlkOiBpZCwKICAgICAgICBpc0ludmFsaWQ6IGlzSW52YWxpZCwKICAgICAgICBpc1F1aWNrU2VsZWN0aW9uOiBuZXdJc1F1aWNrU2VsZWN0aW9uLAogICAgICAgIGtxbDoga3FsUXVlcnksCiAgICAgICAgc3RhcnQ6IG5ld1N0YXJ0LAogICAgICAgIHRpbWVsaW5lSWQ6IHRpbWVsaW5lSWQKICAgICAgfSk7CiAgICAgIHZhciBuZXdSZWNlbnRseVVzZWRSYW5nZXMgPSBbewogICAgICAgIHN0YXJ0OiBuZXdTdGFydCwKICAgICAgICBlbmQ6IG5ld0VuZAogICAgICB9XS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KCgwLCBfZnAudGFrZSkoTUFYX1JFQ0VOVExZX1VTRURfUkFOR0VTLCByZWNlbnRseVVzZWRSYW5nZXMuZmlsdGVyKGZ1bmN0aW9uIChyZWNlbnRseVVzZWRSYW5nZSkgewogICAgICAgIHJldHVybiAhKHJlY2VudGx5VXNlZFJhbmdlLnN0YXJ0ID09PSBuZXdTdGFydCAmJiByZWNlbnRseVVzZWRSYW5nZS5lbmQgPT09IG5ld0VuZCk7CiAgICAgIH0pKSkpOwogICAgICBzZXRSZWNlbnRseVVzZWRSYW5nZXMobmV3UmVjZW50bHlVc2VkUmFuZ2VzKTsKICAgICAgc2V0SXNRdWlja1NlbGVjdGlvbihuZXdJc1F1aWNrU2VsZWN0aW9uKTsKICAgIH0KICB9LCBbcmVjZW50bHlVc2VkUmFuZ2VzLCBrcWxRdWVyeV0pOwogIHZhciBlbmREYXRlID0ga2luZCA9PT0gJ3JlbGF0aXZlJyA/IHRvU3RyIDogbmV3IERhdGUoZW5kKS50b0lTT1N0cmluZygpOwogIHZhciBzdGFydERhdGUgPSBraW5kID09PSAncmVsYXRpdmUnID8gZnJvbVN0ciA6IG5ldyBEYXRlKHN0YXJ0KS50b0lTT1N0cmluZygpOwoKICB2YXIgX3VzZVVpU2V0dGluZyQgPSAoMCwgX2tpYmFuYS51c2VVaVNldHRpbmckKShfY29uc3RhbnRzLkRFRkFVTFRfVElNRVBJQ0tFUl9RVUlDS19SQU5HRVMpLAogICAgICBfdXNlVWlTZXR0aW5nJDIgPSBfc2xpY2VkVG9BcnJheShfdXNlVWlTZXR0aW5nJCwgMSksCiAgICAgIHF1aWNrUmFuZ2VzID0gX3VzZVVpU2V0dGluZyQyWzBdOwoKICB2YXIgY29tbW9ubHlVc2VkUmFuZ2VzID0gKDAsIF9mcC5pc0VtcHR5KShxdWlja1JhbmdlcykgPyBbXSA6IHF1aWNrUmFuZ2VzLm1hcChmdW5jdGlvbiAoX3JlZjUpIHsKICAgIHZhciBmcm9tID0gX3JlZjUuZnJvbSwKICAgICAgICB0byA9IF9yZWY1LnRvLAogICAgICAgIGRpc3BsYXkgPSBfcmVmNS5kaXNwbGF5OwogICAgcmV0dXJuIHsKICAgICAgc3RhcnQ6IGZyb20sCiAgICAgIGVuZDogdG8sCiAgICAgIGxhYmVsOiBkaXNwbGF5CiAgICB9OwogIH0pOwogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3VwZXJEYXRlUGlja2VyLCB7CiAgICBjb21tb25seVVzZWRSYW5nZXM6IGNvbW1vbmx5VXNlZFJhbmdlcywKICAgIGVuZDogZW5kRGF0ZSwKICAgIGlzTG9hZGluZzogaXNMb2FkaW5nLAogICAgaXNQYXVzZWQ6IHBvbGljeSA9PT0gJ21hbnVhbCcsCiAgICBvblJlZnJlc2g6IG9uUmVmcmVzaCwKICAgIG9uUmVmcmVzaENoYW5nZTogb25SZWZyZXNoQ2hhbmdlLAogICAgb25UaW1lQ2hhbmdlOiBvblRpbWVDaGFuZ2UsCiAgICByZWNlbnRseVVzZWRSYW5nZXM6IHJlY2VudGx5VXNlZFJhbmdlcywKICAgIHJlZnJlc2hJbnRlcnZhbDogZHVyYXRpb24sCiAgICBzaG93VXBkYXRlQnV0dG9uOiB0cnVlLAogICAgc3RhcnQ6IHN0YXJ0RGF0ZQogIH0pOwp9KTsKCmV4cG9ydHMuU3VwZXJEYXRlUGlja2VyQ29tcG9uZW50ID0gU3VwZXJEYXRlUGlja2VyQ29tcG9uZW50OwoKdmFyIGZvcm1hdERhdGUgPSBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUsIG9wdGlvbnMpIHsKICB2YXIgbW9tZW50RGF0ZSA9IF9kYXRlbWF0aC5kZWZhdWx0LnBhcnNlKGRhdGUsIG9wdGlvbnMpOwoKICByZXR1cm4gbW9tZW50RGF0ZSAhPSBudWxsICYmIG1vbWVudERhdGUuaXNWYWxpZCgpID8gbW9tZW50RGF0ZS52YWx1ZU9mKCkgOiAwOwp9OwoKZXhwb3J0cy5mb3JtYXREYXRlID0gZm9ybWF0RGF0ZTsKCnZhciBkaXNwYXRjaFVwZGF0ZVJlZHV4VGltZSA9IGZ1bmN0aW9uIGRpc3BhdGNoVXBkYXRlUmVkdXhUaW1lKGRpc3BhdGNoKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmNikgewogICAgdmFyIGVuZCA9IF9yZWY2LmVuZCwKICAgICAgICBpZCA9IF9yZWY2LmlkLAogICAgICAgIGlzUXVpY2tTZWxlY3Rpb24gPSBfcmVmNi5pc1F1aWNrU2VsZWN0aW9uLAogICAgICAgIGtxbCA9IF9yZWY2LmtxbCwKICAgICAgICBzdGFydCA9IF9yZWY2LnN0YXJ0LAogICAgICAgIHRpbWVsaW5lSWQgPSBfcmVmNi50aW1lbGluZUlkOwogICAgdmFyIGZyb21EYXRlID0gZm9ybWF0RGF0ZShzdGFydCk7CiAgICB2YXIgdG9EYXRlID0gZm9ybWF0RGF0ZShlbmQsIHsKICAgICAgcm91bmRVcDogdHJ1ZQogICAgfSk7CgogICAgaWYgKGlzUXVpY2tTZWxlY3Rpb24pIHsKICAgICAgZGlzcGF0Y2goX2FjdGlvbnMuaW5wdXRzQWN0aW9ucy5zZXRSZWxhdGl2ZVJhbmdlRGF0ZVBpY2tlcih7CiAgICAgICAgaWQ6IGlkLAogICAgICAgIGZyb21TdHI6IHN0YXJ0LAogICAgICAgIHRvU3RyOiBlbmQsCiAgICAgICAgZnJvbTogZnJvbURhdGUsCiAgICAgICAgdG86IHRvRGF0ZQogICAgICB9KSk7CiAgICB9IGVsc2UgewogICAgICB0b0RhdGUgPSBmb3JtYXREYXRlKGVuZCk7CiAgICAgIGRpc3BhdGNoKF9hY3Rpb25zLmlucHV0c0FjdGlvbnMuc2V0QWJzb2x1dGVSYW5nZURhdGVQaWNrZXIoewogICAgICAgIGlkOiBpZCwKICAgICAgICBmcm9tOiBmb3JtYXREYXRlKHN0YXJ0KSwKICAgICAgICB0bzogZm9ybWF0RGF0ZShlbmQpCiAgICAgIH0pKTsKICAgIH0KCiAgICBpZiAodGltZWxpbmVJZCAhPSBudWxsKSB7CiAgICAgIGRpc3BhdGNoKF9hY3Rpb25zLnRpbWVsaW5lQWN0aW9ucy51cGRhdGVSYW5nZSh7CiAgICAgICAgaWQ6IHRpbWVsaW5lSWQsCiAgICAgICAgc3RhcnQ6IGZyb21EYXRlLAogICAgICAgIGVuZDogdG9EYXRlCiAgICAgIH0pKTsKICAgIH0KCiAgICBpZiAoa3FsKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAga3FsSGF2ZUJlZW5VcGRhdGVkOiBrcWwucmVmZXRjaChkaXNwYXRjaCkKICAgICAgfTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBrcWxIYXZlQmVlblVwZGF0ZWQ6IGZhbHNlCiAgICB9OwogIH07Cn07CgpleHBvcnRzLmRpc3BhdGNoVXBkYXRlUmVkdXhUaW1lID0gZGlzcGF0Y2hVcGRhdGVSZWR1eFRpbWU7Cgp2YXIgbWFrZU1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1ha2VNYXBTdGF0ZVRvUHJvcHMoKSB7CiAgdmFyIGdldER1cmF0aW9uU2VsZWN0b3IgPSAoMCwgX3NlbGVjdG9ycy5kdXJhdGlvblNlbGVjdG9yKSgpOwogIHZhciBnZXRFbmRTZWxlY3RvciA9ICgwLCBfc2VsZWN0b3JzLmVuZFNlbGVjdG9yKSgpOwogIHZhciBnZXRGcm9tU3RyU2VsZWN0b3IgPSAoMCwgX3NlbGVjdG9ycy5mcm9tU3RyU2VsZWN0b3IpKCk7CiAgdmFyIGdldElzTG9hZGluZ1NlbGVjdG9yID0gKDAsIF9zZWxlY3RvcnMuaXNMb2FkaW5nU2VsZWN0b3IpKCk7CiAgdmFyIGdldEtpbmRTZWxlY3RvciA9ICgwLCBfc2VsZWN0b3JzLmtpbmRTZWxlY3RvcikoKTsKICB2YXIgZ2V0S3FsUXVlcnlTZWxlY3RvciA9ICgwLCBfc2VsZWN0b3JzLmtxbFF1ZXJ5U2VsZWN0b3IpKCk7CiAgdmFyIGdldFBvbGljeVNlbGVjdG9yID0gKDAsIF9zZWxlY3RvcnMucG9saWN5U2VsZWN0b3IpKCk7CiAgdmFyIGdldFF1ZXJpZXNTZWxlY3RvciA9ICgwLCBfc2VsZWN0b3JzLnF1ZXJpZXNTZWxlY3RvcikoKTsKICB2YXIgZ2V0U3RhcnRTZWxlY3RvciA9ICgwLCBfc2VsZWN0b3JzLnN0YXJ0U2VsZWN0b3IpKCk7CiAgdmFyIGdldFRvU3RyU2VsZWN0b3IgPSAoMCwgX3NlbGVjdG9ycy50b1N0clNlbGVjdG9yKSgpOwogIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIF9yZWY3KSB7CiAgICB2YXIgaWQgPSBfcmVmNy5pZDsKICAgIHZhciBpbnB1dHNSYW5nZSA9ICgwLCBfZnAuZ2V0T3IpKHt9LCAiaW5wdXRzLiIuY29uY2F0KGlkKSwgc3RhdGUpOwogICAgcmV0dXJuIHsKICAgICAgZHVyYXRpb246IGdldER1cmF0aW9uU2VsZWN0b3IoaW5wdXRzUmFuZ2UpLAogICAgICBlbmQ6IGdldEVuZFNlbGVjdG9yKGlucHV0c1JhbmdlKSwKICAgICAgZnJvbVN0cjogZ2V0RnJvbVN0clNlbGVjdG9yKGlucHV0c1JhbmdlKSwKICAgICAgaXNMb2FkaW5nOiBnZXRJc0xvYWRpbmdTZWxlY3RvcihpbnB1dHNSYW5nZSksCiAgICAgIGtpbmQ6IGdldEtpbmRTZWxlY3RvcihpbnB1dHNSYW5nZSksCiAgICAgIGtxbFF1ZXJ5OiBnZXRLcWxRdWVyeVNlbGVjdG9yKGlucHV0c1JhbmdlKSwKICAgICAgcG9saWN5OiBnZXRQb2xpY3lTZWxlY3RvcihpbnB1dHNSYW5nZSksCiAgICAgIHF1ZXJpZXM6IGdldFF1ZXJpZXNTZWxlY3RvcihpbnB1dHNSYW5nZSksCiAgICAgIHN0YXJ0OiBnZXRTdGFydFNlbGVjdG9yKGlucHV0c1JhbmdlKSwKICAgICAgdG9TdHI6IGdldFRvU3RyU2VsZWN0b3IoaW5wdXRzUmFuZ2UpCiAgICB9OwogIH07Cn07CgpleHBvcnRzLm1ha2VNYXBTdGF0ZVRvUHJvcHMgPSBtYWtlTWFwU3RhdGVUb1Byb3BzOwpTdXBlckRhdGVQaWNrZXJDb21wb25lbnQuZGlzcGxheU5hbWUgPSAnU3VwZXJEYXRlUGlja2VyQ29tcG9uZW50JzsKCnZhciBtYXBEaXNwYXRjaFRvUHJvcHMgPSBmdW5jdGlvbiBtYXBEaXNwYXRjaFRvUHJvcHMoZGlzcGF0Y2gpIHsKICByZXR1cm4gewogICAgc3RhcnRBdXRvUmVsb2FkOiBmdW5jdGlvbiBzdGFydEF1dG9SZWxvYWQoX3JlZjgpIHsKICAgICAgdmFyIGlkID0gX3JlZjguaWQ7CiAgICAgIHJldHVybiBkaXNwYXRjaChfYWN0aW9ucy5pbnB1dHNBY3Rpb25zLnN0YXJ0QXV0b1JlbG9hZCh7CiAgICAgICAgaWQ6IGlkCiAgICAgIH0pKTsKICAgIH0sCiAgICBzdG9wQXV0b1JlbG9hZDogZnVuY3Rpb24gc3RvcEF1dG9SZWxvYWQoX3JlZjkpIHsKICAgICAgdmFyIGlkID0gX3JlZjkuaWQ7CiAgICAgIHJldHVybiBkaXNwYXRjaChfYWN0aW9ucy5pbnB1dHNBY3Rpb25zLnN0b3BBdXRvUmVsb2FkKHsKICAgICAgICBpZDogaWQKICAgICAgfSkpOwogICAgfSwKICAgIHNldER1cmF0aW9uOiBmdW5jdGlvbiBzZXREdXJhdGlvbihfcmVmMTApIHsKICAgICAgdmFyIGlkID0gX3JlZjEwLmlkLAogICAgICAgICAgZHVyYXRpb24gPSBfcmVmMTAuZHVyYXRpb247CiAgICAgIHJldHVybiBkaXNwYXRjaChfYWN0aW9ucy5pbnB1dHNBY3Rpb25zLnNldER1cmF0aW9uKHsKICAgICAgICBpZDogaWQsCiAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uCiAgICAgIH0pKTsKICAgIH0sCiAgICB1cGRhdGVSZWR1eFRpbWU6IGRpc3BhdGNoVXBkYXRlUmVkdXhUaW1lKGRpc3BhdGNoKQogIH07Cn07Cgp2YXIgU3VwZXJEYXRlUGlja2VyID0gKDAsIF9yZWFjdFJlZHV4LmNvbm5lY3QpKG1ha2VNYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoU3VwZXJEYXRlUGlja2VyQ29tcG9uZW50KTsKZXhwb3J0cy5TdXBlckRhdGVQaWNrZXIgPSBTdXBlckRhdGVQaWNrZXI7"},null]}