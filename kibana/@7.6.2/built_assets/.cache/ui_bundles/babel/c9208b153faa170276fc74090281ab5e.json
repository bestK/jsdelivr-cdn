{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/dashboard/np_ready/dashboard_state_manager.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/dashboard/np_ready/dashboard_state_manager.js","mtime":1585205039428},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkRhc2hib2FyZFN0YXRlTWFuYWdlciA9IHZvaWQgMDsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9lbWJlZGRhYmxlL3B1YmxpYyIpOwoKdmFyIF9sZWdhY3lfaW1wb3J0cyA9IHJlcXVpcmUoIi4uL2xlZ2FjeV9pbXBvcnRzIik7Cgp2YXIgX2xpYiA9IHJlcXVpcmUoIi4vbGliIik7Cgp2YXIgX2VtYmVkZGFibGVfc2F2ZWRfb2JqZWN0X2NvbnZlcnRlcnMgPSByZXF1aXJlKCIuL2xpYi9lbWJlZGRhYmxlX3NhdmVkX29iamVjdF9jb252ZXJ0ZXJzIik7Cgp2YXIgX2ZpbHRlcl91dGlscyA9IHJlcXVpcmUoIi4vbGliL2ZpbHRlcl91dGlscyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQovKioKICogRGFzaGJvYXJkIHN0YXRlIG1hbmFnZXIgaGFuZGxlcyBjb25uZWN0aW5nIGFuZ3VsYXIgYW5kIHJlZHV4IHN0YXRlIGJldHdlZW4gdGhlIGFuZ3VsYXIgYW5kIHJlYWN0IHBvcnRpb25zIG9mIHRoZQogKiBhcHAuIFRoZXJlIGFyZSB0d28gInNvdXJjZXMgb2YgdHJ1dGgiIHRoYXQgbmVlZCB0byBzdGF5IGluIHN5bmMgLSBBcHBTdGF0ZSAoYWthIHRoZSBgX2FgIHBvcnRpb24gb2YgdGhlIHVybCkgYW5kCiAqIHRoZSBTdG9yZS4gVGhleSBhcmVuJ3QgY29tcGxldGUgZHVwbGljYXRlcyBvZiBlYWNoIG90aGVyIGFzIEFwcFN0YXRlIGhhcyBzdGF0ZSB0aGF0IHRoZSBTdG9yZSBkb2Vzbid0LCBhbmQgdmljZQogKiB2ZXJzYS4gVGhleSBzaG91bGQgYmUgYXMgZGVjb3VwbGVkIGFzIHBvc3NpYmxlIHNvIHVwZGF0aW5nIHRoZSBzdG9yZSB3b24ndCBhZmZlY3QgYndjIG9mIHVybHMuCiAqLwoKCnZhciBEYXNoYm9hcmRTdGF0ZU1hbmFnZXIgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICAvKioKICAgKgogICAqIEBwYXJhbSBzYXZlZERhc2hib2FyZAogICAqIEBwYXJhbSBBcHBTdGF0ZSBUaGUgQXBwU3RhdGUgY2xhc3MgdG8gdXNlIHdoZW4gaW5zdGFudGlhdGluZyBhIG5ldyBBcHBTdGF0ZSBpbnN0YW5jZS4KICAgKiBAcGFyYW0gaGlkZVdyaXRlQ29udHJvbHMgdHJ1ZSBpZiB3cml0ZSBjb250cm9scyBzaG91bGQgYmUgaGlkZGVuLgogICAqLwogIGZ1bmN0aW9uIERhc2hib2FyZFN0YXRlTWFuYWdlcihfcmVmKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBzYXZlZERhc2hib2FyZCA9IF9yZWYuc2F2ZWREYXNoYm9hcmQsCiAgICAgICAgQXBwU3RhdGVDbGFzcyA9IF9yZWYuQXBwU3RhdGVDbGFzcywKICAgICAgICBoaWRlV3JpdGVDb250cm9scyA9IF9yZWYuaGlkZVdyaXRlQ29udHJvbHMsCiAgICAgICAga2liYW5hVmVyc2lvbiA9IF9yZWYua2liYW5hVmVyc2lvbjsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGFzaGJvYXJkU3RhdGVNYW5hZ2VyKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInNhdmVkRGFzaGJvYXJkIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImFwcFN0YXRlIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImxhc3RTYXZlZERhc2hib2FyZEZpbHRlcnMiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic3RhdGVEZWZhdWx0cyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJoaWRlV3JpdGVDb250cm9scyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJraWJhbmFWZXJzaW9uIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImlzRGlydHkiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY2hhbmdlTGlzdGVuZXJzIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInN0YXRlTW9uaXRvciIsIHZvaWQgMCk7CgogICAgdGhpcy5raWJhbmFWZXJzaW9uID0ga2liYW5hVmVyc2lvbjsKICAgIHRoaXMuc2F2ZWREYXNoYm9hcmQgPSBzYXZlZERhc2hib2FyZDsKICAgIHRoaXMuaGlkZVdyaXRlQ29udHJvbHMgPSBoaWRlV3JpdGVDb250cm9sczsKICAgIHRoaXMuc3RhdGVEZWZhdWx0cyA9ICgwLCBfbGliLmdldEFwcFN0YXRlRGVmYXVsdHMpKHRoaXMuc2F2ZWREYXNoYm9hcmQsIHRoaXMuaGlkZVdyaXRlQ29udHJvbHMpOwogICAgdGhpcy5hcHBTdGF0ZSA9IG5ldyBBcHBTdGF0ZUNsYXNzKHRoaXMuc3RhdGVEZWZhdWx0cyk7IC8vIEluaXRpYWxpemluZyBhcHBTdGF0ZSBkb2VzIHR3byB0aGluZ3MgLSBmaXJzdCBpdCB0cmFuc2xhdGVzIHRoZSBkZWZhdWx0cyBpbnRvIEFwcFN0YXRlLCBzZWNvbmQgaXQgdXBkYXRlcwogICAgLy8gYXBwU3RhdGUgYmFzZWQgb24gdGhlIFVSTCAodGhlIHVybCB0cnVtcHMgdGhlIGRlZmF1bHRzKS4gVGhpcyBtZWFucyBpZiB3ZSB1cGRhdGUgdGhlIHN0YXRlIGZvcm1hdCBhdCBhbGwgYW5kCiAgICAvLyB3YW50IHRvIGhhbmRsZSBCV0MsIHdlIG11c3Qgbm90IG9ubHkgbWlncmF0ZSB0aGUgZGF0YSBzdG9yZWQgd2l0aCBzYXZlZCBEYXNoYm9hcmQsIGJ1dCBhbHNvIGFueSBvbGQgc3RhdGUgaW4gdGhlCiAgICAvLyB1cmwuCgogICAgKDAsIF9saWIubWlncmF0ZUFwcFN0YXRlKSh0aGlzLmFwcFN0YXRlLCBraWJhbmFWZXJzaW9uKTsKICAgIHRoaXMuaXNEaXJ0eSA9IGZhbHNlOyAvLyBXZSBjYW4ndCBjb21wYXJlIHRoZSBmaWx0ZXJzIHN0b3JlZCBvbiB0aGlzLmFwcFN0YXRlIHRvIHRoaXMuc2F2ZWREYXNoYm9hcmQgYmVjYXVzZSBpbiBvcmRlciB0byBhcHBseQogICAgLy8gdGhlIGZpbHRlcnMgdG8gdGhlIHZpc3VhbGl6YXRpb25zLCB3ZSBuZWVkIHRvIHNhdmUgaXQgb24gdGhlIGRhc2hib2FyZC4gV2Uga2VlcCB0cmFjayBvZiB0aGUgb3JpZ2luYWwKICAgIC8vIGZpbHRlciBzdGF0ZSBpbiBvcmRlciB0byBsZXQgdGhlIHVzZXIga25vdyBpZiB0aGVpciBmaWx0ZXJzIGNoYW5nZWQgYW5kIHByb3ZpZGUgdGhpcyBzcGVjaWZpYyBpbmZvcm1hdGlvbgogICAgLy8gaW4gdGhlICdsb3NlIGNoYW5nZXMnIHdhcm5pbmcgbWVzc2FnZS4KCiAgICB0aGlzLmxhc3RTYXZlZERhc2hib2FyZEZpbHRlcnMgPSB0aGlzLmdldEZpbHRlclN0YXRlKCk7CiAgICAvKioKICAgICAqIENyZWF0ZXMgYSBzdGF0ZSBtb25pdG9yIGFuZCBzYXZlcyBpdCB0byB0aGlzLnN0YXRlTW9uaXRvci4gVXNlZCB0byB0cmFjayB1bnNhdmVkIGNoYW5nZXMgbWFkZSB0byBhcHBTdGF0ZS4KICAgICAqLwoKICAgIHRoaXMuc3RhdGVNb25pdG9yID0gX2xlZ2FjeV9pbXBvcnRzLnN0YXRlTW9uaXRvckZhY3RvcnkuY3JlYXRlKHRoaXMuYXBwU3RhdGUsIHRoaXMuc3RhdGVEZWZhdWx0cyk7CiAgICB0aGlzLnN0YXRlTW9uaXRvci5pZ25vcmVQcm9wcygndmlld01vZGUnKTsgLy8gRmlsdGVycyBuZWVkIHRvIGJlIGNvbXBhcmVkIG1hbnVhbGx5IGJlY2F1c2UgdGhleSBzb21ldGltZXMgaGF2ZSBhICQkaGFzaGtleSBzdG9yZWQgb24gdGhlIG9iamVjdC4KCiAgICB0aGlzLnN0YXRlTW9uaXRvci5pZ25vcmVQcm9wcygnZmlsdGVycycpOyAvLyBRdWVyeSBuZWVkcyB0byBiZSBjb21wYXJlZCBtYW51YWxseSBiZWNhdXNlIHNhdmVkIGxlZ2FjeSBxdWVyaWVzIGdldCBtaWdyYXRlZCBpbiBhcHAgc3RhdGUgYXV0b21hdGljYWxseQoKICAgIHRoaXMuc3RhdGVNb25pdG9yLmlnbm9yZVByb3BzKCdxdWVyeScpOwogICAgdGhpcy5zdGF0ZU1vbml0b3Iub25DaGFuZ2UoZnVuY3Rpb24gKHN0YXR1cykgewogICAgICBfdGhpcy5pc0RpcnR5ID0gc3RhdHVzLmRpcnR5OwogICAgfSk7CiAgICB0aGlzLmNoYW5nZUxpc3RlbmVycyA9IFtdOwogICAgdGhpcy5zdGF0ZU1vbml0b3Iub25DaGFuZ2UoZnVuY3Rpb24gKHN0YXR1cykgewogICAgICBfdGhpcy5jaGFuZ2VMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsKICAgICAgICByZXR1cm4gbGlzdGVuZXIoc3RhdHVzKTsKICAgICAgfSk7CiAgICB9KTsKICB9CgogIF9jcmVhdGVDbGFzcyhEYXNoYm9hcmRTdGF0ZU1hbmFnZXIsIFt7CiAgICBrZXk6ICJyZWdpc3RlckNoYW5nZUxpc3RlbmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlckNoYW5nZUxpc3RlbmVyKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spOwogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZURhc2hib2FyZENvbnRhaW5lckNoYW5nZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURhc2hib2FyZENvbnRhaW5lckNoYW5nZXMoZGFzaGJvYXJkQ29udGFpbmVyKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGRpcnR5ID0gZmFsc2U7CiAgICAgIHZhciBzYXZlZERhc2hib2FyZFBhbmVsTWFwID0ge307CiAgICAgIHZhciBpbnB1dCA9IGRhc2hib2FyZENvbnRhaW5lci5nZXRJbnB1dCgpOwogICAgICB0aGlzLmdldFBhbmVscygpLmZvckVhY2goZnVuY3Rpb24gKHNhdmVkRGFzaGJvYXJkUGFuZWwpIHsKICAgICAgICBpZiAoaW5wdXQucGFuZWxzW3NhdmVkRGFzaGJvYXJkUGFuZWwucGFuZWxJbmRleF0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgc2F2ZWREYXNoYm9hcmRQYW5lbE1hcFtzYXZlZERhc2hib2FyZFBhbmVsLnBhbmVsSW5kZXhdID0gc2F2ZWREYXNoYm9hcmRQYW5lbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gQSBwYW5lbCB3YXMgZGVsZXRlZC4KICAgICAgICAgIGRpcnR5ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB2YXIgY29udmVydGVkUGFuZWxTdGF0ZU1hcCA9IHt9OwogICAgICBPYmplY3QudmFsdWVzKGlucHV0LnBhbmVscykuZm9yRWFjaChmdW5jdGlvbiAocGFuZWxTdGF0ZSkgewogICAgICAgIGlmIChzYXZlZERhc2hib2FyZFBhbmVsTWFwW3BhbmVsU3RhdGUuZXhwbGljaXRJbnB1dC5pZF0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgZGlydHkgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29udmVydGVkUGFuZWxTdGF0ZU1hcFtwYW5lbFN0YXRlLmV4cGxpY2l0SW5wdXQuaWRdID0gKDAsIF9lbWJlZGRhYmxlX3NhdmVkX29iamVjdF9jb252ZXJ0ZXJzLmNvbnZlcnRQYW5lbFN0YXRlVG9TYXZlZERhc2hib2FyZFBhbmVsKShwYW5lbFN0YXRlLCBfdGhpczIua2liYW5hVmVyc2lvbik7CgogICAgICAgIGlmICghX2xvZGFzaC5kZWZhdWx0LmlzRXF1YWwoY29udmVydGVkUGFuZWxTdGF0ZU1hcFtwYW5lbFN0YXRlLmV4cGxpY2l0SW5wdXQuaWRdLCBzYXZlZERhc2hib2FyZFBhbmVsTWFwW3BhbmVsU3RhdGUuZXhwbGljaXRJbnB1dC5pZF0pKSB7CiAgICAgICAgICAvLyBBIHBhbmVsIHdhcyBjaGFuZ2VkCiAgICAgICAgICBkaXJ0eSA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIGlmIChkaXJ0eSkgewogICAgICAgIHRoaXMuYXBwU3RhdGUucGFuZWxzID0gT2JqZWN0LnZhbHVlcyhjb252ZXJ0ZWRQYW5lbFN0YXRlTWFwKTsKICAgICAgfQoKICAgICAgaWYgKGlucHV0LmlzRnVsbFNjcmVlbk1vZGUgIT09IHRoaXMuZ2V0RnVsbFNjcmVlbk1vZGUoKSkgewogICAgICAgIHRoaXMuc2V0RnVsbFNjcmVlbk1vZGUoaW5wdXQuaXNGdWxsU2NyZWVuTW9kZSk7CiAgICAgIH0KCiAgICAgIGlmICghX2xvZGFzaC5kZWZhdWx0LmlzRXF1YWwoaW5wdXQucXVlcnksIHRoaXMuZ2V0UXVlcnkoKSkpIHsKICAgICAgICB0aGlzLnNldFF1ZXJ5KGlucHV0LnF1ZXJ5KTsKICAgICAgfQoKICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsKICAgICAgICByZXR1cm4gbGlzdGVuZXIoewogICAgICAgICAgZGlydHk6IGRpcnR5CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNhdmVTdGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEZ1bGxTY3JlZW5Nb2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGdWxsU2NyZWVuTW9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBwU3RhdGUuZnVsbFNjcmVlbk1vZGU7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0RnVsbFNjcmVlbk1vZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEZ1bGxTY3JlZW5Nb2RlKGZ1bGxTY3JlZW5Nb2RlKSB7CiAgICAgIHRoaXMuYXBwU3RhdGUuZnVsbFNjcmVlbk1vZGUgPSBmdWxsU2NyZWVuTW9kZTsKICAgICAgdGhpcy5zYXZlU3RhdGUoKTsKICAgIH0KICAgIC8qKgogICAgICogUmVzZXRzIHRoZSBzdGF0ZSBiYWNrIHRvIHRoZSBsYXN0IHNhdmVkIHZlcnNpb24gb2YgdGhlIGRhc2hib2FyZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZXNldFN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldFN0YXRlKCkgewogICAgICAvLyBJbiBvcmRlciB0byBzaG93IHRoZSBjb3JyZWN0IHdhcm5pbmcsIHdlIGhhdmUgdG8gc3RvcmUgdGhlIHVuc2F2ZWQKICAgICAgLy8gdGl0bGUgb24gdGhlIGRhc2hib2FyZCBvYmplY3QuIFdlIHNob3VsZCBmaXggdGhpcyBhdCBzb21lIHBvaW50LCBidXQgdGhpcyBpcyBob3cgYWxsIHRoZSBvdGhlciBvYmplY3QKICAgICAgLy8gc2F2ZSBwYW5lbHMgd29yayBhdCB0aGUgbW9tZW50LgogICAgICB0aGlzLnNhdmVkRGFzaGJvYXJkLnRpdGxlID0gdGhpcy5zYXZlZERhc2hib2FyZC5sYXN0U2F2ZWRUaXRsZTsgLy8gYXBwU3RhdGUucmVzZXQgdXNlcyB0aGUgaW50ZXJuYWwgZGVmYXVsdHMgdG8gcmVzZXQgdGhlIHN0YXRlLCBidXQgc29tZSBvZiB0aGUgZGVmYXVsdCBzZXR0aW5ncyAoZS5nLiB0aGUgcGFuZWxzCiAgICAgIC8vIGFycmF5KSBwb2ludCB0byB0aGUgc2FtZSBvYmplY3QgdGhhdCBpcyBzdG9yZWQgb24gYXBwU3RhdGUgYW5kIGlzIGdldHRpbmcgbW9kaWZpZWQuCiAgICAgIC8vIFRoZSByaWdodCB3YXkgdG8gZml4IHRoaXMgbWlnaHQgYmUgdG8gZW5zdXJlIHRoZSBkZWZhdWx0cyBvYmplY3Qgc3RvcmVkIG9uIHN0YXRlIGlzIGEgZGVlcAogICAgICAvLyBjbG9uZSwgYnV0IGdpdmVuIGhvdyBtdWNoIGNvZGUgdXNlcyB0aGUgc3RhdGUgb2JqZWN0LCBJIGRldGVybWluZWQgdGhhdCB0byBiZSB0b28gcmlza3kgb2YgYSBjaGFuZ2UgZm9yCiAgICAgIC8vIG5vdy4gIFRPRE86IHJldmlzaXQgdGhpcyEKCiAgICAgIHRoaXMuc3RhdGVEZWZhdWx0cyA9ICgwLCBfbGliLmdldEFwcFN0YXRlRGVmYXVsdHMpKHRoaXMuc2F2ZWREYXNoYm9hcmQsIHRoaXMuaGlkZVdyaXRlQ29udHJvbHMpOyAvLyBUaGUgb3JpZ2luYWwgcXVlcnkgd29uJ3QgYmUgcmVzdG9yZWQgYnkgdGhlIGFib3ZlIGJlY2F1c2UgdGhlIHF1ZXJ5IG9uIHRoaXMuc2F2ZWREYXNoYm9hcmQgaXMgYXBwbGllZAogICAgICAvLyBpbiBwbGFjZSBpbiBvcmRlciBmb3IgaXQgdG8gYWZmZWN0IHRoZSB2aXN1YWxpemF0aW9ucy4KCiAgICAgIHRoaXMuc3RhdGVEZWZhdWx0cy5xdWVyeSA9IHRoaXMubGFzdFNhdmVkRGFzaGJvYXJkRmlsdGVycy5xdWVyeTsgLy8gTmVlZCB0byBtYWtlIGEgY29weSB0byBlbnN1cmUgdGhleSBhcmUgbm90IG92ZXJ3cml0dGVuLgoKICAgICAgdGhpcy5zdGF0ZURlZmF1bHRzLmZpbHRlcnMgPSBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5nZXRMYXN0U2F2ZWRGaWx0ZXJCYXJzKCkpOwogICAgICB0aGlzLmlzRGlydHkgPSBmYWxzZTsKICAgICAgdGhpcy5hcHBTdGF0ZS5zZXREZWZhdWx0cyh0aGlzLnN0YXRlRGVmYXVsdHMpOwogICAgICB0aGlzLmFwcFN0YXRlLnJlc2V0KCk7CiAgICAgIHRoaXMuc3RhdGVNb25pdG9yLnNldEluaXRpYWxTdGF0ZSh0aGlzLmFwcFN0YXRlLnRvSlNPTigpKTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbiBvYmplY3Qgd2hpY2ggY29udGFpbnMgdGhlIGN1cnJlbnQgZmlsdGVyIHN0YXRlIG9mIHRoaXMuc2F2ZWREYXNoYm9hcmQuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0RmlsdGVyU3RhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZpbHRlclN0YXRlKCkgewogICAgICByZXR1cm4gewogICAgICAgIHRpbWVUbzogdGhpcy5zYXZlZERhc2hib2FyZC50aW1lVG8sCiAgICAgICAgdGltZUZyb206IHRoaXMuc2F2ZWREYXNoYm9hcmQudGltZUZyb20sCiAgICAgICAgZmlsdGVyQmFyczogdGhpcy5zYXZlZERhc2hib2FyZC5nZXRGaWx0ZXJzKCksCiAgICAgICAgcXVlcnk6IHRoaXMuc2F2ZWREYXNoYm9hcmQuZ2V0UXVlcnkoKQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImdldFRpdGxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaXRsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBwU3RhdGUudGl0bGU7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNTYXZlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNTYXZlZCgpIHsKICAgICAgcmV0dXJuICEhdGhpcy5zYXZlZERhc2hib2FyZC5pZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc05ldyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNOZXcoKSB7CiAgICAgIHJldHVybiAhdGhpcy5pc1NhdmVkKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0RGVzY3JpcHRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5hcHBTdGF0ZS5kZXNjcmlwdGlvbjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXREZXNjcmlwdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGVzY3JpcHRpb24oZGVzY3JpcHRpb24pIHsKICAgICAgdGhpcy5hcHBTdGF0ZS5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uOwogICAgICB0aGlzLnNhdmVTdGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFRpdGxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUaXRsZSh0aXRsZSkgewogICAgICB0aGlzLmFwcFN0YXRlLnRpdGxlID0gdGl0bGU7CiAgICAgIHRoaXMuc2F2ZWREYXNoYm9hcmQudGl0bGUgPSB0aXRsZTsKICAgICAgdGhpcy5zYXZlU3RhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRBcHBTdGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QXBwU3RhdGUoKSB7CiAgICAgIHJldHVybiB0aGlzLmFwcFN0YXRlOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFF1ZXJ5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRRdWVyeSgpIHsKICAgICAgcmV0dXJuICgwLCBfbGVnYWN5X2ltcG9ydHMubWlncmF0ZUxlZ2FjeVF1ZXJ5KSh0aGlzLmFwcFN0YXRlLnF1ZXJ5KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRTYXZlZFF1ZXJ5SWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNhdmVkUXVlcnlJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBwU3RhdGUuc2F2ZWRRdWVyeTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRTYXZlZFF1ZXJ5SWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNhdmVkUXVlcnlJZChpZCkgewogICAgICB0aGlzLmFwcFN0YXRlLnNhdmVkUXVlcnkgPSBpZDsKICAgICAgdGhpcy5zYXZlU3RhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRVc2VNYXJnaW5zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVc2VNYXJnaW5zKCkgewogICAgICAvLyBFeGlzdGluZyBkYXNoYm9hcmRzIHRoYXQgZG9uJ3QgZGVmaW5lIHRoaXMgc2hvdWxkIGRlZmF1bHQgdG8gZmFsc2UuCiAgICAgIHJldHVybiB0aGlzLmFwcFN0YXRlLm9wdGlvbnMudXNlTWFyZ2lucyA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiB0aGlzLmFwcFN0YXRlLm9wdGlvbnMudXNlTWFyZ2luczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRVc2VNYXJnaW5zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRVc2VNYXJnaW5zKHVzZU1hcmdpbnMpIHsKICAgICAgdGhpcy5hcHBTdGF0ZS5vcHRpb25zLnVzZU1hcmdpbnMgPSB1c2VNYXJnaW5zOwogICAgICB0aGlzLnNhdmVTdGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEhpZGVQYW5lbFRpdGxlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SGlkZVBhbmVsVGl0bGVzKCkgewogICAgICByZXR1cm4gdGhpcy5hcHBTdGF0ZS5vcHRpb25zLmhpZGVQYW5lbFRpdGxlczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRIaWRlUGFuZWxUaXRsZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEhpZGVQYW5lbFRpdGxlcyhoaWRlUGFuZWxUaXRsZXMpIHsKICAgICAgdGhpcy5hcHBTdGF0ZS5vcHRpb25zLmhpZGVQYW5lbFRpdGxlcyA9IGhpZGVQYW5lbFRpdGxlczsKICAgICAgdGhpcy5zYXZlU3RhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRUaW1lUmVzdG9yZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGltZVJlc3RvcmUoKSB7CiAgICAgIHJldHVybiB0aGlzLmFwcFN0YXRlLnRpbWVSZXN0b3JlOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFRpbWVSZXN0b3JlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUaW1lUmVzdG9yZSh0aW1lUmVzdG9yZSkgewogICAgICB0aGlzLmFwcFN0YXRlLnRpbWVSZXN0b3JlID0gdGltZVJlc3RvcmU7CiAgICAgIHRoaXMuc2F2ZVN0YXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0SXNUaW1lU2F2ZWRXaXRoRGFzaGJvYXJkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJc1RpbWVTYXZlZFdpdGhEYXNoYm9hcmQoKSB7CiAgICAgIHJldHVybiB0aGlzLnNhdmVkRGFzaGJvYXJkLnRpbWVSZXN0b3JlOwogICAgfQogIH0sIHsKICAgIGtleTogImdldExhc3RTYXZlZEZpbHRlckJhcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldExhc3RTYXZlZEZpbHRlckJhcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmxhc3RTYXZlZERhc2hib2FyZEZpbHRlcnMuZmlsdGVyQmFyczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRMYXN0U2F2ZWRRdWVyeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TGFzdFNhdmVkUXVlcnkoKSB7CiAgICAgIHJldHVybiB0aGlzLmxhc3RTYXZlZERhc2hib2FyZEZpbHRlcnMucXVlcnk7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHF1ZXJ5IGNoYW5nZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGFzaGJvYXJkIHdhcyBzYXZlZCwgb3IgaWYgaXQncyBhCiAgICAgKiBuZXcgZGFzaGJvYXJkLCBpZiB0aGUgcXVlcnkgZGlmZmVycyBmcm9tIHRoZSBkZWZhdWx0LgogICAgICovCgogIH0sIHsKICAgIGtleTogImdldFF1ZXJ5Q2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UXVlcnlDaGFuZ2VkKCkgewogICAgICB2YXIgY3VycmVudFF1ZXJ5ID0gdGhpcy5hcHBTdGF0ZS5xdWVyeTsKICAgICAgdmFyIGxhc3RTYXZlZFF1ZXJ5ID0gdGhpcy5nZXRMYXN0U2F2ZWRRdWVyeSgpOwogICAgICB2YXIgcXVlcnkgPSAoMCwgX2xlZ2FjeV9pbXBvcnRzLm1pZ3JhdGVMZWdhY3lRdWVyeSkoY3VycmVudFF1ZXJ5KTsKCiAgICAgIHZhciBpc0xlZ2FjeVN0cmluZ1F1ZXJ5ID0gX2xvZGFzaC5kZWZhdWx0LmlzU3RyaW5nKGxhc3RTYXZlZFF1ZXJ5KSAmJiBfbG9kYXNoLmRlZmF1bHQuaXNQbGFpbk9iamVjdChjdXJyZW50UXVlcnkpICYmIF9sb2Rhc2guZGVmYXVsdC5oYXMoY3VycmVudFF1ZXJ5LCAncXVlcnknKTsKCiAgICAgIGlmIChpc0xlZ2FjeVN0cmluZ1F1ZXJ5KSB7CiAgICAgICAgcmV0dXJuIGxhc3RTYXZlZFF1ZXJ5ICE9PSBxdWVyeS5xdWVyeTsKICAgICAgfQoKICAgICAgcmV0dXJuICFfbG9kYXNoLmRlZmF1bHQuaXNFcXVhbChjdXJyZW50UXVlcnksIGxhc3RTYXZlZFF1ZXJ5KTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgZmlsdGVyIGJhciBzdGF0ZSBoYXMgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkYXNoYm9hcmQgd2FzIHNhdmVkLAogICAgICogb3IgaWYgaXQncyBhIG5ldyBkYXNoYm9hcmQsIGlmIHRoZSBxdWVyeSBkaWZmZXJzIGZyb20gdGhlIGRlZmF1bHQuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0RmlsdGVyQmFyQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmlsdGVyQmFyQ2hhbmdlZCgpIHsKICAgICAgcmV0dXJuICFfbG9kYXNoLmRlZmF1bHQuaXNFcXVhbChfZmlsdGVyX3V0aWxzLkZpbHRlclV0aWxzLmNsZWFuRmlsdGVyc0ZvckNvbXBhcmlzb24odGhpcy5hcHBTdGF0ZS5maWx0ZXJzKSwgX2ZpbHRlcl91dGlscy5GaWx0ZXJVdGlscy5jbGVhbkZpbHRlcnNGb3JDb21wYXJpc29uKHRoaXMuZ2V0TGFzdFNhdmVkRmlsdGVyQmFycygpKSk7CiAgICB9CiAgICAvKioKICAgICAqIEBwYXJhbSB0aW1lRmlsdGVyCiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB0aW1lIHN0YXRlIGhhcyBjaGFuZ2VkIHNpbmNlIHRoZSB0aW1lIHNhdmVkIHdpdGggdGhlIGRhc2hib2FyZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRUaW1lQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGltZUNoYW5nZWQodGltZUZpbHRlcikgewogICAgICByZXR1cm4gIV9maWx0ZXJfdXRpbHMuRmlsdGVyVXRpbHMuYXJlVGltZXNFcXVhbCh0aGlzLmxhc3RTYXZlZERhc2hib2FyZEZpbHRlcnMudGltZUZyb20sIHRpbWVGaWx0ZXIuZ2V0VGltZSgpLmZyb20pIHx8ICFfZmlsdGVyX3V0aWxzLkZpbHRlclV0aWxzLmFyZVRpbWVzRXF1YWwodGhpcy5sYXN0U2F2ZWREYXNoYm9hcmRGaWx0ZXJzLnRpbWVUbywgdGltZUZpbHRlci5nZXRUaW1lKCkudG8pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFZpZXdNb2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWaWV3TW9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGlkZVdyaXRlQ29udHJvbHMgPyBfcHVibGljLlZpZXdNb2RlLlZJRVcgOiB0aGlzLmFwcFN0YXRlLnZpZXdNb2RlOwogICAgfQogIH0sIHsKICAgIGtleTogImdldElzVmlld01vZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldElzVmlld01vZGUoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldFZpZXdNb2RlKCkgPT09IF9wdWJsaWMuVmlld01vZGUuVklFVzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJc0VkaXRNb2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJc0VkaXRNb2RlKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRWaWV3TW9kZSgpID09PSBfcHVibGljLlZpZXdNb2RlLkVESVQ7CiAgICB9CiAgICAvKioKICAgICAqCiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBkYXNoYm9hcmQgaGFzIGNoYW5nZWQgc2luY2UgdGhlIGxhc3Qgc2F2ZSAob3IsIGlzIG5ldykuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0SXNEaXJ0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SXNEaXJ0eSh0aW1lRmlsdGVyKSB7CiAgICAgIC8vIEZpbHRlciBiYXIgY29tcGFyaXNvbiBpcyBkb25lIG1hbnVhbGx5IChzZWUgY2xlYW5GaWx0ZXJzRm9yQ29tcGFyaXNvbiBmb3IgdGhlIHJlYXNvbikgYW5kIHRpbWUgcGlja2VyCiAgICAgIC8vIGNoYW5nZXMgYXJlIG5vdCB0cmFja2VkIGJ5IHRoZSBzdGF0ZSBtb25pdG9yLgogICAgICB2YXIgaGFzVGltZUZpbHRlckNoYW5nZWQgPSB0aW1lRmlsdGVyID8gdGhpcy5nZXRGaWx0ZXJzQ2hhbmdlZCh0aW1lRmlsdGVyKSA6IGZhbHNlOwogICAgICByZXR1cm4gdGhpcy5nZXRJc0VkaXRNb2RlKCkgJiYgKHRoaXMuaXNEaXJ0eSB8fCBoYXNUaW1lRmlsdGVyQ2hhbmdlZCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UGFuZWxzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYW5lbHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmFwcFN0YXRlLnBhbmVsczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVQYW5lbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlUGFuZWwocGFuZWxJbmRleCwgcGFuZWxBdHRyaWJ1dGVzKSB7CiAgICAgIHZhciBmb3VuZFBhbmVsID0gdGhpcy5nZXRQYW5lbHMoKS5maW5kKGZ1bmN0aW9uIChwYW5lbCkgewogICAgICAgIHJldHVybiBwYW5lbC5wYW5lbEluZGV4ID09PSBwYW5lbEluZGV4OwogICAgICB9KTsKICAgICAgT2JqZWN0LmFzc2lnbihmb3VuZFBhbmVsLCBwYW5lbEF0dHJpYnV0ZXMpOwogICAgICB0aGlzLnNhdmVTdGF0ZSgpOwogICAgICByZXR1cm4gZm91bmRQYW5lbDsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIHRpbWVGaWx0ZXIKICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHVzZXIgZnJpZW5kbHkgc3RyaW5ncyBpbmRpY2F0aW5nIHRoZSBmaWx0ZXIgdHlwZXMgdGhhdCBoYXZlIGNoYW5nZWQuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0Q2hhbmdlZEZpbHRlclR5cGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDaGFuZ2VkRmlsdGVyVHlwZXModGltZUZpbHRlcikgewogICAgICB2YXIgY2hhbmdlZEZpbHRlcnMgPSBbXTsKCiAgICAgIGlmICh0aGlzLmdldEZpbHRlckJhckNoYW5nZWQoKSkgewogICAgICAgIGNoYW5nZWRGaWx0ZXJzLnB1c2goJ2ZpbHRlcicpOwogICAgICB9CgogICAgICBpZiAodGhpcy5nZXRRdWVyeUNoYW5nZWQoKSkgewogICAgICAgIGNoYW5nZWRGaWx0ZXJzLnB1c2goJ3F1ZXJ5Jyk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNhdmVkRGFzaGJvYXJkLnRpbWVSZXN0b3JlICYmIHRoaXMuZ2V0VGltZUNoYW5nZWQodGltZUZpbHRlcikpIHsKICAgICAgICBjaGFuZ2VkRmlsdGVycy5wdXNoKCd0aW1lIHJhbmdlJyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjaGFuZ2VkRmlsdGVyczsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybnMgVHJ1ZSBpZiBmaWx0ZXJzIChxdWVyeSwgZmlsdGVyIGJhciBmaWx0ZXJzLCBhbmQgdGltZSBwaWNrZXIgaWYgdGltZSBpcyBzdG9yZWQKICAgICAqIHdpdGggdGhlIGRhc2hib2FyZCkgaGF2ZSBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IHNhdmVkIHN0YXRlIChvciBpZiB0aGUgZGFzaGJvYXJkIGhhc24ndCBiZWVuIHNhdmVkLAogICAgICogdGhlIGRlZmF1bHQgc3RhdGUpLgogICAgICovCgogIH0sIHsKICAgIGtleTogImdldEZpbHRlcnNDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXJzQ2hhbmdlZCh0aW1lRmlsdGVyKSB7CiAgICAgIHJldHVybiB0aGlzLmdldENoYW5nZWRGaWx0ZXJUeXBlcyh0aW1lRmlsdGVyKS5sZW5ndGggPiAwOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGVzIHRpbWVGaWx0ZXIgdG8gbWF0Y2ggdGhlIHRpbWUgc2F2ZWQgd2l0aCB0aGUgZGFzaGJvYXJkLgogICAgICogQHBhcmFtIHRpbWVGaWx0ZXIKICAgICAqIEBwYXJhbSB0aW1lRmlsdGVyLnNldFRpbWUKICAgICAqIEBwYXJhbSB0aW1lRmlsdGVyLnNldFJlZnJlc2hJbnRlcnZhbAogICAgICovCgogIH0sIHsKICAgIGtleTogInN5bmNUaW1lZmlsdGVyV2l0aERhc2hib2FyZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3luY1RpbWVmaWx0ZXJXaXRoRGFzaGJvYXJkKHRpbWVGaWx0ZXIpIHsKICAgICAgaWYgKCF0aGlzLmdldElzVGltZVNhdmVkV2l0aERhc2hib2FyZCgpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4uZGFzaGJvYXJkLnN0YXRlTWFuYWdlci50aW1lTm90U2F2ZWRXaXRoRGFzaGJvYXJkRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUaGUgdGltZSBpcyBub3Qgc2F2ZWQgd2l0aCB0aGlzIGRhc2hib2FyZCBzbyBzaG91bGQgbm90IGJlIHN5bmNlZC4nCiAgICAgICAgfSkpOwogICAgICB9CgogICAgICBpZiAodGhpcy5zYXZlZERhc2hib2FyZC50aW1lRnJvbSAmJiB0aGlzLnNhdmVkRGFzaGJvYXJkLnRpbWVUbykgewogICAgICAgIHRpbWVGaWx0ZXIuc2V0VGltZSh7CiAgICAgICAgICBmcm9tOiB0aGlzLnNhdmVkRGFzaGJvYXJkLnRpbWVGcm9tLAogICAgICAgICAgdG86IHRoaXMuc2F2ZWREYXNoYm9hcmQudGltZVRvCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNhdmVkRGFzaGJvYXJkLnJlZnJlc2hJbnRlcnZhbCkgewogICAgICAgIHRpbWVGaWx0ZXIuc2V0UmVmcmVzaEludGVydmFsKHRoaXMuc2F2ZWREYXNoYm9hcmQucmVmcmVzaEludGVydmFsKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTYXZlcyB0aGUgY3VycmVudCBhcHBsaWNhdGlvbiBzdGF0ZSB0byB0aGUgVVJMLgogICAgICovCgogIH0sIHsKICAgIGtleTogInNhdmVTdGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZVN0YXRlKCkgewogICAgICB0aGlzLmFwcFN0YXRlLnNhdmUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRRdWVyeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UXVlcnkocXVlcnkpIHsKICAgICAgdGhpcy5hcHBTdGF0ZS5xdWVyeSA9IHF1ZXJ5OwogICAgICB0aGlzLnNhdmVTdGF0ZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBsaWVzIHRoZSBjdXJyZW50IGZpbHRlciBzdGF0ZSB0byB0aGUgZGFzaGJvYXJkLgogICAgICogQHBhcmFtIGZpbHRlciBBbiBhcnJheSBvZiBmaWx0ZXIgYmFyIGZpbHRlcnMuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiYXBwbHlGaWx0ZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBseUZpbHRlcnMocXVlcnksIGZpbHRlcnMpIHsKICAgICAgdGhpcy5hcHBTdGF0ZS5xdWVyeSA9IHF1ZXJ5OwogICAgICB0aGlzLnNhdmVkRGFzaGJvYXJkLnNlYXJjaFNvdXJjZS5zZXRGaWVsZCgncXVlcnknLCBxdWVyeSk7CiAgICAgIHRoaXMuc2F2ZWREYXNoYm9hcmQuc2VhcmNoU291cmNlLnNldEZpZWxkKCdmaWx0ZXInLCBmaWx0ZXJzKTsKICAgICAgdGhpcy5zYXZlU3RhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzd2l0Y2hWaWV3TW9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3dpdGNoVmlld01vZGUobmV3TW9kZSkgewogICAgICB0aGlzLmFwcFN0YXRlLnZpZXdNb2RlID0gbmV3TW9kZTsKICAgICAgdGhpcy5zYXZlU3RhdGUoKTsKICAgIH0KICAgIC8qKgogICAgICogRGVzdHJveXMgYW5kIGNsZWFucyB1cCB0aGlzIG9iamVjdCB3aGVuIGl0J3Mgbm8gbG9uZ2VyIHVzZWQuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZGVzdHJveSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsKICAgICAgaWYgKHRoaXMuc3RhdGVNb25pdG9yKSB7CiAgICAgICAgdGhpcy5zdGF0ZU1vbml0b3IuZGVzdHJveSgpOwogICAgICB9CgogICAgICB0aGlzLnNhdmVkRGFzaGJvYXJkLmRlc3Ryb3koKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBEYXNoYm9hcmRTdGF0ZU1hbmFnZXI7Cn0oKTsKCmV4cG9ydHMuRGFzaGJvYXJkU3RhdGVNYW5hZ2VyID0gRGFzaGJvYXJkU3RhdGVNYW5hZ2VyOw=="},null]}