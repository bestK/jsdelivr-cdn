{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/monitoring/public/lib/setup_mode.js","dependencies":[{"path":"x-pack/legacy/plugins/monitoring/public/lib/setup_mode.js","mtime":1585205046328},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmlzSW5TZXR1cE1vZGUgPSBleHBvcnRzLmluaXRTZXR1cE1vZGVTdGF0ZSA9IGV4cG9ydHMuc2V0U2V0dXBNb2RlTWVudUl0ZW0gPSBleHBvcnRzLnRvZ2dsZVNldHVwTW9kZSA9IGV4cG9ydHMuZGlzYWJsZUVsYXN0aWNzZWFyY2hJbnRlcm5hbENvbGxlY3Rpb24gPSBleHBvcnRzLnVwZGF0ZVNldHVwTW9kZURhdGEgPSBleHBvcnRzLmZldGNoQ29sbGVjdGlvbkRhdGEgPSBleHBvcnRzLnNldE5ld2x5RGlzY292ZXJlZENsdXN0ZXJVdWlkID0gZXhwb3J0cy5nZXRTZXR1cE1vZGVTdGF0ZSA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoInJlYWN0LWRvbSIpOwoKdmFyIF9hamF4X2Vycm9yX2hhbmRsZXIgPSByZXF1aXJlKCIuL2FqYXhfZXJyb3JfaGFuZGxlciIpOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfY2hyb21lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJ1aS9jaHJvbWUiKSk7Cgp2YXIgX25vdGlmeSA9IHJlcXVpcmUoInVpL25vdGlmeSIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2VudGVyX2J1dHRvbiA9IHJlcXVpcmUoIi4uL2NvbXBvbmVudHMvc2V0dXBfbW9kZS9lbnRlcl9idXR0b24iKTsKCnZhciBfbmV3X3BsYXRmb3JtID0gcmVxdWlyZSgidWkvbmV3X3BsYXRmb3JtIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoKICogQ29weXJpZ2h0IEVsYXN0aWNzZWFyY2ggQi5WLiBhbmQvb3IgbGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gTGljZW5zZWQgdW5kZXIgdGhlIEVsYXN0aWMgTGljZW5zZTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBFbGFzdGljIExpY2Vuc2UuCiAqLwpmdW5jdGlvbiBpc09uUGFnZShoYXNoKSB7CiAgcmV0dXJuICgwLCBfbG9kYXNoLmNvbnRhaW5zKSh3aW5kb3cubG9jYXRpb24uaGFzaCwgaGFzaCk7Cn0KCnZhciBhbmd1bGFyU3RhdGUgPSB7CiAgaW5qZWN0b3I6IG51bGwsCiAgc2NvcGU6IG51bGwKfTsKCnZhciBjaGVja0FuZ3VsYXJTdGF0ZSA9IGZ1bmN0aW9uIGNoZWNrQW5ndWxhclN0YXRlKCkgewogIGlmICghYW5ndWxhclN0YXRlLmluamVjdG9yIHx8ICFhbmd1bGFyU3RhdGUuc2NvcGUpIHsKICAgIHRocm93ICdVbmFibGUgdG8gaW50ZXJhY3Qgd2l0aCBzZXR1cCBtb2RlIGJlY2F1c2UgdGhlIGFuZ3VsYXIgaW5qZWN0b3Igd2FzIG5vdCBwcmV2aW91c2x5IHNldC4nICsgJyBUaGlzIG5lZWRzIHRvIGJlIHNldCBieSBjYWxsaW5nIGBpbml0U2V0dXBNb2RlU3RhdGVgLic7CiAgfQp9OwoKdmFyIHNldHVwTW9kZVN0YXRlID0gewogIGVuYWJsZWQ6IGZhbHNlLAogIGRhdGE6IG51bGwsCiAgY2FsbGJhY2tzOiBbXQp9OwoKdmFyIGdldFNldHVwTW9kZVN0YXRlID0gZnVuY3Rpb24gZ2V0U2V0dXBNb2RlU3RhdGUoKSB7CiAgcmV0dXJuIHNldHVwTW9kZVN0YXRlOwp9OwoKZXhwb3J0cy5nZXRTZXR1cE1vZGVTdGF0ZSA9IGdldFNldHVwTW9kZVN0YXRlOwoKdmFyIHNldE5ld2x5RGlzY292ZXJlZENsdXN0ZXJVdWlkID0gZnVuY3Rpb24gc2V0TmV3bHlEaXNjb3ZlcmVkQ2x1c3RlclV1aWQoY2x1c3RlclV1aWQpIHsKICB2YXIgZ2xvYmFsU3RhdGUgPSBhbmd1bGFyU3RhdGUuaW5qZWN0b3IuZ2V0KCdnbG9iYWxTdGF0ZScpOwogIHZhciBleGVjdXRvciA9IGFuZ3VsYXJTdGF0ZS5pbmplY3Rvci5nZXQoJyRleGVjdXRvcicpOwogIGFuZ3VsYXJTdGF0ZS5zY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkgewogICAgZ2xvYmFsU3RhdGUuY2x1c3Rlcl91dWlkID0gY2x1c3RlclV1aWQ7CiAgICBnbG9iYWxTdGF0ZS5zYXZlKCk7CiAgfSk7CiAgZXhlY3V0b3IucnVuKCk7Cn07CgpleHBvcnRzLnNldE5ld2x5RGlzY292ZXJlZENsdXN0ZXJVdWlkID0gc2V0TmV3bHlEaXNjb3ZlcmVkQ2x1c3RlclV1aWQ7Cgp2YXIgZmV0Y2hDb2xsZWN0aW9uRGF0YSA9IGZ1bmN0aW9uIGZldGNoQ29sbGVjdGlvbkRhdGEodXVpZCkgewogIHZhciBmZXRjaFdpdGhvdXRDbHVzdGVyVXVpZCwKICAgICAgaHR0cCwKICAgICAgZ2xvYmFsU3RhdGUsCiAgICAgIGNsdXN0ZXJVdWlkLAogICAgICBjY3MsCiAgICAgIHVybCwKICAgICAgcmVzcG9uc2UsCiAgICAgIFByaXZhdGUsCiAgICAgIGFqYXhFcnJvckhhbmRsZXJzLAogICAgICBfYXJncyA9IGFyZ3VtZW50czsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGZldGNoQ29sbGVjdGlvbkRhdGEkKF9jb250ZXh0KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgZmV0Y2hXaXRob3V0Q2x1c3RlclV1aWQgPSBfYXJncy5sZW5ndGggPiAxICYmIF9hcmdzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJnc1sxXSA6IGZhbHNlOwogICAgICAgICAgY2hlY2tBbmd1bGFyU3RhdGUoKTsKICAgICAgICAgIGh0dHAgPSBhbmd1bGFyU3RhdGUuaW5qZWN0b3IuZ2V0KCckaHR0cCcpOwogICAgICAgICAgZ2xvYmFsU3RhdGUgPSBhbmd1bGFyU3RhdGUuaW5qZWN0b3IuZ2V0KCdnbG9iYWxTdGF0ZScpOwogICAgICAgICAgY2x1c3RlclV1aWQgPSBnbG9iYWxTdGF0ZS5jbHVzdGVyX3V1aWQ7CiAgICAgICAgICBjY3MgPSBnbG9iYWxTdGF0ZS5jY3M7CiAgICAgICAgICB1cmwgPSAnLi4vYXBpL21vbml0b3JpbmcvdjEvc2V0dXAvY29sbGVjdGlvbic7CgogICAgICAgICAgaWYgKHV1aWQpIHsKICAgICAgICAgICAgdXJsICs9ICIvbm9kZS8iLmNvbmNhdCh1dWlkKTsKICAgICAgICAgIH0gZWxzZSBpZiAoIWZldGNoV2l0aG91dENsdXN0ZXJVdWlkICYmIGNsdXN0ZXJVdWlkKSB7CiAgICAgICAgICAgIHVybCArPSAiL2NsdXN0ZXIvIi5jb25jYXQoY2x1c3RlclV1aWQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdXJsICs9ICcvY2x1c3Rlcic7CiAgICAgICAgICB9CgogICAgICAgICAgX2NvbnRleHQucHJldiA9IDg7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGh0dHAucG9zdCh1cmwsIHsKICAgICAgICAgICAgY2NzOiBjY3MKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAxMToKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICBjYXNlIDE1OgogICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSg4KTsKICAgICAgICAgIFByaXZhdGUgPSBhbmd1bGFyU3RhdGUuaW5qZWN0b3IuZ2V0KCdQcml2YXRlJyk7CiAgICAgICAgICBhamF4RXJyb3JIYW5kbGVycyA9IFByaXZhdGUoX2FqYXhfZXJyb3JfaGFuZGxlci5hamF4RXJyb3JIYW5kbGVyc1Byb3ZpZGVyKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGFqYXhFcnJvckhhbmRsZXJzKF9jb250ZXh0LnQwKSk7CgogICAgICAgIGNhc2UgMjA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzgsIDE1XV0pOwp9OwoKZXhwb3J0cy5mZXRjaENvbGxlY3Rpb25EYXRhID0gZmV0Y2hDb2xsZWN0aW9uRGF0YTsKCnZhciBub3RpZnlTZXR1cE1vZGVEYXRhQ2hhbmdlID0gZnVuY3Rpb24gbm90aWZ5U2V0dXBNb2RlRGF0YUNoYW5nZShvbGREYXRhKSB7CiAgc2V0dXBNb2RlU3RhdGUuY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7CiAgICByZXR1cm4gY2Iob2xkRGF0YSk7CiAgfSk7Cn07Cgp2YXIgdXBkYXRlU2V0dXBNb2RlRGF0YSA9IGZ1bmN0aW9uIHVwZGF0ZVNldHVwTW9kZURhdGEodXVpZCkgewogIHZhciBmZXRjaFdpdGhvdXRDbHVzdGVyVXVpZCwKICAgICAgb2xkRGF0YSwKICAgICAgZGF0YSwKICAgICAgY2xvdWQsCiAgICAgIGlzQ2xvdWRFbmFibGVkLAogICAgICBoYXNQZXJtaXNzaW9ucywKICAgICAgdGV4dCwKICAgICAgZ2xvYmFsU3RhdGUsCiAgICAgIGNsdXN0ZXJVdWlkLAogICAgICBsaXZlQ2x1c3RlclV1aWQsCiAgICAgIG1pZ3JhdGVkRXNOb2RlcywKICAgICAgX2FyZ3MyID0gYXJndW1lbnRzOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gdXBkYXRlU2V0dXBNb2RlRGF0YSQoX2NvbnRleHQyKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBmZXRjaFdpdGhvdXRDbHVzdGVyVXVpZCA9IF9hcmdzMi5sZW5ndGggPiAxICYmIF9hcmdzMlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MyWzFdIDogZmFsc2U7CiAgICAgICAgICBvbGREYXRhID0gc2V0dXBNb2RlU3RhdGUuZGF0YTsKICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoZmV0Y2hDb2xsZWN0aW9uRGF0YSh1dWlkLCBmZXRjaFdpdGhvdXRDbHVzdGVyVXVpZCkpOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBkYXRhID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICBzZXR1cE1vZGVTdGF0ZS5kYXRhID0gZGF0YTsKICAgICAgICAgIGNsb3VkID0gX25ld19wbGF0Zm9ybS5ucFNldHVwLnBsdWdpbnMuY2xvdWQ7CiAgICAgICAgICBpc0Nsb3VkRW5hYmxlZCA9ICEhKGNsb3VkICYmIGNsb3VkLmlzQ2xvdWRFbmFibGVkKTsKICAgICAgICAgIGhhc1Blcm1pc3Npb25zID0gKDAsIF9sb2Rhc2guZ2V0KShkYXRhLCAnX21ldGEuaGFzUGVybWlzc2lvbnMnLCBmYWxzZSk7CgogICAgICAgICAgaWYgKCEoaXNDbG91ZEVuYWJsZWQgfHwgIWhhc1Blcm1pc3Npb25zKSkgewogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICB0ZXh0ID0gbnVsbDsKCiAgICAgICAgICBpZiAoIWhhc1Blcm1pc3Npb25zKSB7CiAgICAgICAgICAgIHRleHQgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5zZXR1cE1vZGUubm90QXZhaWxhYmxlUGVybWlzc2lvbnMnLCB7CiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdZb3UgZG8gbm90IGhhdmUgdGhlIG5lY2Vzc2FyeSBwZXJtaXNzaW9ucyB0byBkbyB0aGlzLicKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0ZXh0ID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3Jpbmcuc2V0dXBNb2RlLm5vdEF2YWlsYWJsZUNsb3VkJywgewogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVGhpcyBmZWF0dXJlIGlzIG5vdCBhdmFpbGFibGUgb24gY2xvdWQuJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBhbmd1bGFyU3RhdGUuc2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcih7CiAgICAgICAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLnNldHVwTW9kZS5ub3RBdmFpbGFibGVUaXRsZScsIHsKICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2V0dXAgbW9kZSBpcyBub3QgYXZhaWxhYmxlJwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHRleHQ6IHRleHQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB0b2dnbGVTZXR1cE1vZGUoZmFsc2UpKTsKCiAgICAgICAgY2FzZSAxNDoKICAgICAgICAgIG5vdGlmeVNldHVwTW9kZURhdGFDaGFuZ2Uob2xkRGF0YSk7CiAgICAgICAgICBnbG9iYWxTdGF0ZSA9IGFuZ3VsYXJTdGF0ZS5pbmplY3Rvci5nZXQoJ2dsb2JhbFN0YXRlJyk7CiAgICAgICAgICBjbHVzdGVyVXVpZCA9IGdsb2JhbFN0YXRlLmNsdXN0ZXJfdXVpZDsKCiAgICAgICAgICBpZiAoIWNsdXN0ZXJVdWlkKSB7CiAgICAgICAgICAgIGxpdmVDbHVzdGVyVXVpZCA9ICgwLCBfbG9kYXNoLmdldCkoZGF0YSwgJ19tZXRhLmxpdmVDbHVzdGVyVXVpZCcpOwogICAgICAgICAgICBtaWdyYXRlZEVzTm9kZXMgPSBPYmplY3QudmFsdWVzKCgwLCBfbG9kYXNoLmdldCkoZGF0YSwgJ2VsYXN0aWNzZWFyY2guYnlVdWlkJywge30pKS5maWx0ZXIoZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgICByZXR1cm4gbm9kZS5pc1BhcnRpYWxseU1pZ3JhdGVkIHx8IG5vZGUuaXNGdWxseU1pZ3JhdGVkOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmIChsaXZlQ2x1c3RlclV1aWQgJiYgbWlncmF0ZWRFc05vZGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBzZXROZXdseURpc2NvdmVyZWRDbHVzdGVyVXVpZChsaXZlQ2x1c3RlclV1aWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgMTg6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLnVwZGF0ZVNldHVwTW9kZURhdGEgPSB1cGRhdGVTZXR1cE1vZGVEYXRhOwoKdmFyIGRpc2FibGVFbGFzdGljc2VhcmNoSW50ZXJuYWxDb2xsZWN0aW9uID0gZnVuY3Rpb24gZGlzYWJsZUVsYXN0aWNzZWFyY2hJbnRlcm5hbENvbGxlY3Rpb24oKSB7CiAgdmFyIGh0dHAsIGdsb2JhbFN0YXRlLCBjbHVzdGVyVXVpZCwgdXJsLCBfcmVzcG9uc2UsIF9Qcml2YXRlLCBfYWpheEVycm9ySGFuZGxlcnM7CgogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZGlzYWJsZUVsYXN0aWNzZWFyY2hJbnRlcm5hbENvbGxlY3Rpb24kKF9jb250ZXh0MykgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgY2hlY2tBbmd1bGFyU3RhdGUoKTsKICAgICAgICAgIGh0dHAgPSBhbmd1bGFyU3RhdGUuaW5qZWN0b3IuZ2V0KCckaHR0cCcpOwogICAgICAgICAgZ2xvYmFsU3RhdGUgPSBhbmd1bGFyU3RhdGUuaW5qZWN0b3IuZ2V0KCdnbG9iYWxTdGF0ZScpOwogICAgICAgICAgY2x1c3RlclV1aWQgPSBnbG9iYWxTdGF0ZS5jbHVzdGVyX3V1aWQ7CiAgICAgICAgICB1cmwgPSAiLi4vYXBpL21vbml0b3JpbmcvdjEvc2V0dXAvY29sbGVjdGlvbi8iLmNvbmNhdChjbHVzdGVyVXVpZCwgIi9kaXNhYmxlX2ludGVybmFsX2NvbGxlY3Rpb24iKTsKICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNTsKICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoaHR0cC5wb3N0KHVybCkpOwoKICAgICAgICBjYXNlIDg6CiAgICAgICAgICBfcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfcmVzcG9uc2UuZGF0YSk7CgogICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBfY29udGV4dDMucHJldiA9IDEyOwogICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDUpOwogICAgICAgICAgX1ByaXZhdGUgPSBhbmd1bGFyU3RhdGUuaW5qZWN0b3IuZ2V0KCdQcml2YXRlJyk7CiAgICAgICAgICBfYWpheEVycm9ySGFuZGxlcnMgPSBfUHJpdmF0ZShfYWpheF9lcnJvcl9oYW5kbGVyLmFqYXhFcnJvckhhbmRsZXJzUHJvdmlkZXIpOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIF9hamF4RXJyb3JIYW5kbGVycyhfY29udGV4dDMudDApKTsKCiAgICAgICAgY2FzZSAxNzoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzUsIDEyXV0pOwp9OwoKZXhwb3J0cy5kaXNhYmxlRWxhc3RpY3NlYXJjaEludGVybmFsQ29sbGVjdGlvbiA9IGRpc2FibGVFbGFzdGljc2VhcmNoSW50ZXJuYWxDb2xsZWN0aW9uOwoKdmFyIHRvZ2dsZVNldHVwTW9kZSA9IGZ1bmN0aW9uIHRvZ2dsZVNldHVwTW9kZShpblNldHVwTW9kZSkgewogIGNoZWNrQW5ndWxhclN0YXRlKCk7CiAgdmFyIGdsb2JhbFN0YXRlID0gYW5ndWxhclN0YXRlLmluamVjdG9yLmdldCgnZ2xvYmFsU3RhdGUnKTsKICBzZXR1cE1vZGVTdGF0ZS5lbmFibGVkID0gaW5TZXR1cE1vZGU7CiAgZ2xvYmFsU3RhdGUuaW5TZXR1cE1vZGUgPSBpblNldHVwTW9kZTsKICBnbG9iYWxTdGF0ZS5zYXZlKCk7CiAgc2V0U2V0dXBNb2RlTWVudUl0ZW0oKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSAgbm8tdXNlLWJlZm9yZS1kZWZpbmUKCiAgbm90aWZ5U2V0dXBNb2RlRGF0YUNoYW5nZSgpOwoKICBpZiAoaW5TZXR1cE1vZGUpIHsKICAgIC8vIEludGVudGlvbmFsbHkgZG8gbm90IGF3YWl0IHRoaXMgc28gd2UgZG9uJ3QgYmxvY2sgVUkgb3BlcmF0aW9ucwogICAgdXBkYXRlU2V0dXBNb2RlRGF0YSgpOwogIH0KfTsKCmV4cG9ydHMudG9nZ2xlU2V0dXBNb2RlID0gdG9nZ2xlU2V0dXBNb2RlOwoKdmFyIHNldFNldHVwTW9kZU1lbnVJdGVtID0gZnVuY3Rpb24gc2V0U2V0dXBNb2RlTWVudUl0ZW0oKSB7CiAgY2hlY2tBbmd1bGFyU3RhdGUoKTsKCiAgaWYgKGlzT25QYWdlKCduby1kYXRhJykpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBnbG9iYWxTdGF0ZSA9IGFuZ3VsYXJTdGF0ZS5pbmplY3Rvci5nZXQoJ2dsb2JhbFN0YXRlJyk7CiAgdmFyIGNsb3VkID0gX25ld19wbGF0Zm9ybS5ucFNldHVwLnBsdWdpbnMuY2xvdWQ7CiAgdmFyIGlzQ2xvdWRFbmFibGVkID0gISEoY2xvdWQgJiYgY2xvdWQuaXNDbG91ZEVuYWJsZWQpOwogIHZhciBlbmFibGVkID0gIWdsb2JhbFN0YXRlLmluU2V0dXBNb2RlICYmICFpc0Nsb3VkRW5hYmxlZDsKICAoMCwgX3JlYWN0RG9tLnJlbmRlcikoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZW50ZXJfYnV0dG9uLlNldHVwTW9kZUVudGVyQnV0dG9uLCB7CiAgICBlbmFibGVkOiBlbmFibGVkLAogICAgdG9nZ2xlU2V0dXBNb2RlOiB0b2dnbGVTZXR1cE1vZGUKICB9KSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHVwTW9kZU5hdicpKTsKfTsKCmV4cG9ydHMuc2V0U2V0dXBNb2RlTWVudUl0ZW0gPSBzZXRTZXR1cE1vZGVNZW51SXRlbTsKCnZhciBpbml0U2V0dXBNb2RlU3RhdGUgPSBmdW5jdGlvbiBpbml0U2V0dXBNb2RlU3RhdGUoJHNjb3BlLCAkaW5qZWN0b3IsIGNhbGxiYWNrKSB7CiAgdmFyIGdsb2JhbFN0YXRlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gaW5pdFNldHVwTW9kZVN0YXRlJChfY29udGV4dDQpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGFuZ3VsYXJTdGF0ZS5zY29wZSA9ICRzY29wZTsKICAgICAgICAgIGFuZ3VsYXJTdGF0ZS5pbmplY3RvciA9ICRpbmplY3RvcjsKICAgICAgICAgIGNhbGxiYWNrICYmIHNldHVwTW9kZVN0YXRlLmNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTsKICAgICAgICAgIGdsb2JhbFN0YXRlID0gJGluamVjdG9yLmdldCgnZ2xvYmFsU3RhdGUnKTsKCiAgICAgICAgICBpZiAoIWdsb2JhbFN0YXRlLmluU2V0dXBNb2RlKSB7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0b2dnbGVTZXR1cE1vZGUodHJ1ZSkpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLmluaXRTZXR1cE1vZGVTdGF0ZSA9IGluaXRTZXR1cE1vZGVTdGF0ZTsKCnZhciBpc0luU2V0dXBNb2RlID0gZnVuY3Rpb24gaXNJblNldHVwTW9kZSgpIHsKICB2YXIgJGluamVjdG9yLCBnbG9iYWxTdGF0ZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGlzSW5TZXR1cE1vZGUkKF9jb250ZXh0NSkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgaWYgKCFzZXR1cE1vZGVTdGF0ZS5lbmFibGVkKSB7CiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHRydWUpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBfY29udGV4dDUudDAgPSBhbmd1bGFyU3RhdGUuaW5qZWN0b3I7CgogICAgICAgICAgaWYgKF9jb250ZXh0NS50MCkgewogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX2Nocm9tZS5kZWZhdWx0LmRhbmdlcm91c2x5R2V0QWN0aXZlSW5qZWN0b3IoKSk7CgogICAgICAgIGNhc2UgNjoKICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NS5zZW50OwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICAkaW5qZWN0b3IgPSBfY29udGV4dDUudDA7CiAgICAgICAgICBnbG9iYWxTdGF0ZSA9ICRpbmplY3Rvci5nZXQoJ2dsb2JhbFN0YXRlJyk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgZ2xvYmFsU3RhdGUuaW5TZXR1cE1vZGUpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKZXhwb3J0cy5pc0luU2V0dXBNb2RlID0gaXNJblNldHVwTW9kZTs="},null]}