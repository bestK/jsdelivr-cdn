{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/kibana_react/public/table_list_view/table_list_view.js","dependencies":[{"path":"src/plugins/kibana_react/public/table_list_view/table_list_view.js","mtime":1585205041838},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuVGFibGVMaXN0VmlldyA9IGV4cG9ydHMuRU1QVFlfRklMVEVSID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfdXRpbCA9IHJlcXVpcmUoIi4uL3V0aWwiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gInN5bWJvbCIpIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfSBlbHNlIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9CgogIHJldHVybiBfdHlwZW9mKG9iaik7Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsKICBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7CiAgICByZXR1cm4gY2FsbDsKICB9CgogIHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOwp9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogIF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOwogIH07CiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsKfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7CiAgaWYgKHNlbGYgPT09IHZvaWQgMCkgewogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICB9CgogIHJldHVybiBzZWxmOwp9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9CiAgfSk7CiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7Cn0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgICBvLl9fcHJvdG9fXyA9IHA7CiAgICByZXR1cm4gbzsKICB9OwoKICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIEVNUFRZX0ZJTFRFUiA9ICcnOwpleHBvcnRzLkVNUFRZX0ZJTFRFUiA9IEVNUFRZX0ZJTFRFUjsgLy8gc2F2ZWQgb2JqZWN0IGNsaWVudCBkb2VzIG5vdCBzdXBwb3J0IHNvcnRpbmcgYnkgdGl0bGUgYmVjYXVzZSB0aXRsZSBpcyBvbmx5IG1hcHBlZCBhcyBhbmFseXplZAovLyB0aGUgbGVnYWN5IGltcGxlbWVudGF0aW9uIGdvdCBhcm91bmQgdGhpcyBieSBwdWxsaW5nIGBsaXN0aW5nTGltaXRgIGl0ZW1zIGFuZCBkb2luZyBjbGllbnQgc2lkZSBzb3J0aW5nCi8vIGFuZCBub3Qgc3VwcG9ydGluZyBzZXJ2ZXItc2lkZSBwYWdpbmcuCi8vIFRoaXMgY29tcG9uZW50IGRvZXMgbm90IHRyeSB0byB0YWNrbGUgdGhlc2UgcHJvYmxlbXMgKHlldCkgYW5kIGlzIGp1c3QgZmVhdHVyZSBtYXRjaGluZyB0aGUgbGVnYWN5IGNvbXBvbmVudAovLyBUT0RPIHN1cHBvcnQgc2VydmVyIHNpZGUgc29ydGluZy9wYWdpbmcgb25jZSB0aXRsZSBhbmQgZGVzY3JpcHRpb24gYXJlIHNvcnRhYmxlIG9uIHRoZSBzZXJ2ZXIuCgp2YXIgVGFibGVMaXN0VmlldyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHsKICBfaW5oZXJpdHMoVGFibGVMaXN0VmlldywgX1JlYWN0JENvbXBvbmVudCk7CgogIGZ1bmN0aW9uIFRhYmxlTGlzdFZpZXcocHJvcHMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFibGVMaXN0Vmlldyk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVGFibGVMaXN0VmlldykuY2FsbCh0aGlzLCBwcm9wcykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInBhZ2luYXRpb24iLCB7fSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2lzTW91bnRlZCIsIGZhbHNlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkZWJvdW5jZWRGZXRjaCIsICgwLCBfbG9kYXNoLmRlYm91bmNlKShmdW5jdGlvbiBfY2FsbGVlKGZpbHRlcikgewogICAgICB2YXIgcmVzcG9uc2U7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfdGhpcy5wcm9wcy5maW5kSXRlbXMoZmlsdGVyKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAoX3RoaXMuX2lzTW91bnRlZCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIC8vIFdlIG5lZWQgdGhpcyBjaGVjayB0byBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgc2VhcmNoIHJlc3VsdHMgY29tZSBiYWNrIGluIGEgZGlmZmVyZW50CiAgICAgICAgICAgICAgLy8gb3JkZXIgdGhhbiB0aGV5IHdlcmUgc2VudCBvdXQuIE9ubHkgbG9hZCByZXN1bHRzIGZvciB0aGUgbW9zdCByZWNlbnQgc2VhcmNoLgogICAgICAgICAgICAgIC8vIEFsc28sIGluIGNhc2UgZmlsdGVyIGlzIGVtcHR5LCBpdGVtcyBhcmUgYmVpbmcgcHJlLXNvcnRlZCBhbHBoYWJldGljYWxseS4KICAgICAgICAgICAgICBpZiAoZmlsdGVyID09PSBfdGhpcy5zdGF0ZS5maWx0ZXIpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgaGFzSW5pdGlhbEZldGNoUmV0dXJuZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgIGlzRmV0Y2hpbmdJdGVtczogZmFsc2UsCiAgICAgICAgICAgICAgICAgIGl0ZW1zOiAhZmlsdGVyID8gKDAsIF9sb2Rhc2guc29ydEJ5KShyZXNwb25zZS5oaXRzLCAndGl0bGUnKSA6IHJlc3BvbnNlLmhpdHMsCiAgICAgICAgICAgICAgICAgIHRvdGFsSXRlbXM6IHJlc3BvbnNlLnRvdGFsLAogICAgICAgICAgICAgICAgICBzaG93TGltaXRFcnJvcjogcmVzcG9uc2UudG90YWwgPiBfdGhpcy5wcm9wcy5saXN0aW5nTGltaXQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCAzMDApKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJmZXRjaEl0ZW1zIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaXNGZXRjaGluZ0l0ZW1zOiB0cnVlCiAgICAgIH0sIF90aGlzLmRlYm91bmNlZEZldGNoLmJpbmQobnVsbCwgX3RoaXMuc3RhdGUuZmlsdGVyKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkZWxldGVTZWxlY3RlZEl0ZW1zIiwgZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBpdGVtc0J5SWQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghKF90aGlzLnN0YXRlLmlzRGVsZXRpbmdJdGVtcyB8fCAhX3RoaXMucHJvcHMuZGVsZXRlSXRlbXMpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc0RlbGV0aW5nSXRlbXM6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAzOwogICAgICAgICAgICAgIGl0ZW1zQnlJZCA9ICgwLCBfbG9kYXNoLmluZGV4QnkpKF90aGlzLnN0YXRlLml0ZW1zLCAnaWQnKTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfdGhpcy5wcm9wcy5kZWxldGVJdGVtcyhfdGhpcy5zdGF0ZS5zZWxlY3RlZElkcy5tYXAoZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbXNCeUlkW2lkXTsKICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA5OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgzKTsKCiAgICAgICAgICAgICAgX3RoaXMucHJvcHMudG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcih7CiAgICAgICAgICAgICAgICB0aXRsZTogKDAsIF91dGlsLnRvTW91bnRQb2ludCkoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgICAgaWQ6ICJraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLnVuYWJsZVRvRGVsZXRlRGFuZ2VyTWVzc2FnZSIsCiAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVW5hYmxlIHRvIGRlbGV0ZSB7ZW50aXR5TmFtZX0ocykiLAogICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICBlbnRpdHlOYW1lOiBfdGhpcy5wcm9wcy5lbnRpdHlOYW1lCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgIHRleHQ6ICIiLmNvbmNhdChfY29udGV4dDIudDApCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF90aGlzLmZldGNoSXRlbXMoKTsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNEZWxldGluZ0l0ZW1zOiBmYWxzZSwKICAgICAgICAgICAgICAgIHNlbGVjdGVkSWRzOiBbXQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfdGhpcy5jbG9zZURlbGV0ZU1vZGFsKCk7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgbnVsbCwgW1szLCA5XV0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY2xvc2VEZWxldGVNb2RhbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHNob3dEZWxldGVNb2RhbDogZmFsc2UKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvcGVuRGVsZXRlTW9kYWwiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBzaG93RGVsZXRlTW9kYWw6IHRydWUKICAgICAgfSk7CiAgICB9KTsKCiAgICB2YXIgaW5pdGlhbFBhZ2VTaXplID0gcHJvcHMudWlTZXR0aW5ncy5nZXQoJ3NhdmVkT2JqZWN0czpwZXJQYWdlJyk7CiAgICBfdGhpcy5wYWdpbmF0aW9uID0gewogICAgICBpbml0aWFsUGFnZUluZGV4OiAwLAogICAgICBpbml0aWFsUGFnZVNpemU6IGluaXRpYWxQYWdlU2l6ZSwKICAgICAgcGFnZVNpemVPcHRpb25zOiAoMCwgX2xvZGFzaC51bmlxKShbMTAsIDIwLCA1MCwgaW5pdGlhbFBhZ2VTaXplXSkuc29ydCgpCiAgICB9OwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGl0ZW1zOiBbXSwKICAgICAgdG90YWxJdGVtczogMCwKICAgICAgaGFzSW5pdGlhbEZldGNoUmV0dXJuZWQ6IGZhbHNlLAogICAgICBpc0ZldGNoaW5nSXRlbXM6IGZhbHNlLAogICAgICBpc0RlbGV0aW5nSXRlbXM6IGZhbHNlLAogICAgICBzaG93RGVsZXRlTW9kYWw6IGZhbHNlLAogICAgICBzaG93TGltaXRFcnJvcjogZmFsc2UsCiAgICAgIGZpbHRlcjogcHJvcHMuaW5pdGlhbEZpbHRlciwKICAgICAgc2VsZWN0ZWRJZHM6IFtdCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFRhYmxlTGlzdFZpZXcsIFt7CiAgICBrZXk6ICJVTlNBRkVfY29tcG9uZW50V2lsbE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBVTlNBRkVfY29tcG9uZW50V2lsbE1vdW50KCkgewogICAgICB0aGlzLl9pc01vdW50ZWQgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgdGhpcy5faXNNb3VudGVkID0gZmFsc2U7CiAgICAgIHRoaXMuZGVib3VuY2VkRmV0Y2guY2FuY2VsKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLmZldGNoSXRlbXMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRGaWx0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEZpbHRlcihfcmVmKSB7CiAgICAgIHZhciBxdWVyeVRleHQgPSBfcmVmLnF1ZXJ5VGV4dDsgLy8gSWYgdGhlIHVzZXIgaXMgc2VhcmNoaW5nLCB3ZSB3YW50IHRvIGNsZWFyIHRoZSBzb3J0IG9yZGVyIHNvIHRoYXQKICAgICAgLy8gcmVzdWx0cyBhcmUgb3JkZXJlZCBieSBFbGFzdGljc2VhcmNoJ3MgcmVsZXZhbmNlLgoKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZmlsdGVyOiBxdWVyeVRleHQKICAgICAgfSwgdGhpcy5mZXRjaEl0ZW1zKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYXNOb0l0ZW1zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNOb0l0ZW1zKCkgewogICAgICBpZiAoIXRoaXMuc3RhdGUuaXNGZXRjaGluZ0l0ZW1zICYmIHRoaXMuc3RhdGUuaXRlbXMubGVuZ3RoID09PSAwICYmICF0aGlzLnN0YXRlLmZpbHRlcikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyQ29uZmlybURlbGV0ZU1vZGFsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJDb25maXJtRGVsZXRlTW9kYWwoKSB7CiAgICAgIHZhciBkZWxldGVCdXR0b24gPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAia2liYW5hLXJlYWN0LnRhYmxlTGlzdFZpZXcubGlzdGluZy5kZWxldGVTZWxlY3RlZEl0ZW1zQ29uZmlybU1vZGFsLmNvbmZpcm1CdXR0b25MYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJEZWxldGUiCiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuc3RhdGUuaXNEZWxldGluZ0l0ZW1zKSB7CiAgICAgICAgZGVsZXRlQnV0dG9uID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAia2liYW5hLXJlYWN0LnRhYmxlTGlzdFZpZXcubGlzdGluZy5kZWxldGVTZWxlY3RlZEl0ZW1zQ29uZmlybU1vZGFsLmNvbmZpcm1CdXR0b25MYWJlbERlbGV0aW5nIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRGVsZXRpbmciCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpT3ZlcmxheU1hc2ssIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb25maXJtTW9kYWwsIHsKICAgICAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAia2liYW5hLXJlYWN0LnRhYmxlTGlzdFZpZXcubGlzdGluZy5kZWxldGVTZWxlY3RlZENvbmZpcm1Nb2RhbC50aXRsZSIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRlbGV0ZSB7aXRlbUNvdW50fSB7ZW50aXR5TmFtZX0/IiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBpdGVtQ291bnQ6IHRoaXMuc3RhdGUuc2VsZWN0ZWRJZHMubGVuZ3RoLAogICAgICAgICAgICBlbnRpdHlOYW1lOiB0aGlzLnN0YXRlLnNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMSA/IHRoaXMucHJvcHMuZW50aXR5TmFtZSA6IHRoaXMucHJvcHMuZW50aXR5TmFtZVBsdXJhbAogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgIGJ1dHRvbkNvbG9yOiAiZGFuZ2VyIiwKICAgICAgICBvbkNhbmNlbDogdGhpcy5jbG9zZURlbGV0ZU1vZGFsLAogICAgICAgIG9uQ29uZmlybTogdGhpcy5kZWxldGVTZWxlY3RlZEl0ZW1zLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogImtpYmFuYS1yZWFjdC50YWJsZUxpc3RWaWV3Lmxpc3RpbmcuZGVsZXRlU2VsZWN0ZWRJdGVtc0NvbmZpcm1Nb2RhbC5jYW5jZWxCdXR0b25MYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNhbmNlbCIKICAgICAgICB9KSwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogZGVsZXRlQnV0dG9uLAogICAgICAgIGRlZmF1bHRGb2N1c2VkQnV0dG9uOiAiY2FuY2VsIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImtpYmFuYS1yZWFjdC50YWJsZUxpc3RWaWV3Lmxpc3RpbmcuZGVsZXRlQ29uZmlybU1vZGFsRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiWW91IGNhbid0IHJlY292ZXIgZGVsZXRlZCB7ZW50aXR5TmFtZVBsdXJhbH0uIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGVudGl0eU5hbWVQbHVyYWw6IHRoaXMucHJvcHMuZW50aXR5TmFtZVBsdXJhbAogICAgICAgIH0KICAgICAgfSkpKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyTGlzdGluZ0xpbWl0V2FybmluZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyTGlzdGluZ0xpbWl0V2FybmluZygpIHsKICAgICAgaWYgKHRoaXMuc3RhdGUuc2hvd0xpbWl0RXJyb3IpIHsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgICAgICAgIHRpdGxlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogImtpYmFuYS1yZWFjdC50YWJsZUxpc3RWaWV3Lmxpc3RpbmcubGlzdGluZ0xpbWl0RXhjZWVkZWRUaXRsZSIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTGlzdGluZyBsaW1pdCBleGNlZWRlZCIKICAgICAgICAgIH0pLAogICAgICAgICAgY29sb3I6ICJ3YXJuaW5nIiwKICAgICAgICAgIGljb25UeXBlOiAiaGVscCIKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAia2liYW5hLXJlYWN0LnRhYmxlTGlzdFZpZXcubGlzdGluZy5saXN0aW5nTGltaXRFeGNlZWRlZERlc2NyaXB0aW9uIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiWW91IGhhdmUge3RvdGFsSXRlbXN9IHtlbnRpdHlOYW1lUGx1cmFsfSwgYnV0IHlvdXIge2xpc3RpbmdMaW1pdFRleHR9IHNldHRpbmcgcHJldmVudHMgdGhlIHRhYmxlIGJlbG93IGZyb20gZGlzcGxheWluZyBtb3JlIHRoYW4ge2xpc3RpbmdMaW1pdFZhbHVlfS4gWW91IGNhbiBjaGFuZ2UgdGhpcyBzZXR0aW5nIHVuZGVyIHthZHZhbmNlZFNldHRpbmdzTGlua30uIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBlbnRpdHlOYW1lUGx1cmFsOiB0aGlzLnByb3BzLmVudGl0eU5hbWVQbHVyYWwsCiAgICAgICAgICAgIHRvdGFsSXRlbXM6IHRoaXMuc3RhdGUudG90YWxJdGVtcywKICAgICAgICAgICAgbGlzdGluZ0xpbWl0VmFsdWU6IHRoaXMucHJvcHMubGlzdGluZ0xpbWl0LAogICAgICAgICAgICBsaXN0aW5nTGltaXRUZXh0OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAibGlzdGluZ0xpbWl0IiksCiAgICAgICAgICAgIGFkdmFuY2VkU2V0dGluZ3NMaW5rOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgICAgICAgIGhyZWY6ICIjL21hbmFnZW1lbnQva2liYW5hL3NldHRpbmdzIgogICAgICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgIGlkOiAia2liYW5hLXJlYWN0LnRhYmxlTGlzdFZpZXcubGlzdGluZy5saXN0aW5nTGltaXRFeGNlZWRlZC5hZHZhbmNlZFNldHRpbmdzTGlua1RleHQiLAogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQWR2YW5jZWQgU2V0dGluZ3MiCiAgICAgICAgICAgIH0pKQogICAgICAgICAgfQogICAgICAgIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgICAgICAgIHNpemU6ICJtIgogICAgICAgIH0pKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlck5vSXRlbXNNZXNzYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJOb0l0ZW1zTWVzc2FnZSgpIHsKICAgICAgaWYgKHRoaXMucHJvcHMubm9JdGVtc0ZyYWdtZW50KSB7CiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMubm9JdGVtc0ZyYWdtZW50OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLm5vQXZhaWxhYmxlSXRlbXNNZXNzYWdlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTm8ge2VudGl0eU5hbWVQbHVyYWx9IGF2YWlsYWJsZS4iLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGVudGl0eU5hbWVQbHVyYWw6IHRoaXMucHJvcHMuZW50aXR5TmFtZVBsdXJhbAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyVG9vbHNMZWZ0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJUb29sc0xlZnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHNlbGVjdGlvbiA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRJZHM7CgogICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG9uQ2xpY2sgPSBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgIF90aGlzMi5vcGVuRGVsZXRlTW9kYWwoKTsKICAgICAgfTsKCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uLCB7CiAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgIGljb25UeXBlOiAidHJhc2giLAogICAgICAgIG9uQ2xpY2s6IG9uQ2xpY2ssCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImRlbGV0ZVNlbGVjdGVkSXRlbXMiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLmRlbGV0ZUJ1dHRvbk1lc3NhZ2UiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRGVsZXRlIHtpdGVtQ291bnR9IHtlbnRpdHlOYW1lfSIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBpdGVtQ291bnQ6IHNlbGVjdGlvbi5sZW5ndGgsCiAgICAgICAgICBlbnRpdHlOYW1lOiBzZWxlY3Rpb24ubGVuZ3RoID09PSAxID8gdGhpcy5wcm9wcy5lbnRpdHlOYW1lIDogdGhpcy5wcm9wcy5lbnRpdHlOYW1lUGx1cmFsCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyVGFibGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclRhYmxlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBzZWxlY3Rpb24gPSB0aGlzLnByb3BzLmRlbGV0ZUl0ZW1zID8gewogICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbiBvblNlbGVjdGlvbkNoYW5nZShvYmopIHsKICAgICAgICAgIF90aGlzMy5zZXRTdGF0ZSh7CiAgICAgICAgICAgIHNlbGVjdGVkSWRzOiBvYmoubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQ7CiAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbihpZCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gOiB1bmRlZmluZWQ7CiAgICAgIHZhciBhY3Rpb25zID0gW3sKICAgICAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2liYW5hLXJlYWN0LnRhYmxlTGlzdFZpZXcubGlzdGluZy50YWJsZS5lZGl0QWN0aW9uTmFtZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRWRpdCcKICAgICAgICB9KSwKICAgICAgICBkZXNjcmlwdGlvbjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tpYmFuYS1yZWFjdC50YWJsZUxpc3RWaWV3Lmxpc3RpbmcudGFibGUuZWRpdEFjdGlvbkRlc2NyaXB0aW9uJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFZGl0JwogICAgICAgIH0pLAogICAgICAgIGljb246ICdwZW5jaWwnLAogICAgICAgIHR5cGU6ICdpY29uJywKICAgICAgICBvbkNsaWNrOiB0aGlzLnByb3BzLmVkaXRJdGVtCiAgICAgIH1dOwogICAgICB2YXIgc2VhcmNoID0gewogICAgICAgIG9uQ2hhbmdlOiB0aGlzLnNldEZpbHRlci5iaW5kKHRoaXMpLAogICAgICAgIHRvb2xzTGVmdDogdGhpcy5yZW5kZXJUb29sc0xlZnQoKSwKICAgICAgICBkZWZhdWx0UXVlcnk6IHRoaXMuc3RhdGUuZmlsdGVyLAogICAgICAgIGJveDogewogICAgICAgICAgaW5jcmVtZW50YWw6IHRydWUKICAgICAgICB9CiAgICAgIH07CiAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5wcm9wcy50YWJsZUNvbHVtbnMuc2xpY2UoKTsKCiAgICAgIGlmICh0aGlzLnByb3BzLmVkaXRJdGVtKSB7CiAgICAgICAgY29sdW1ucy5wdXNoKHsKICAgICAgICAgIG5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLnRhYmxlLmFjdGlvblRpdGxlJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0FjdGlvbnMnCiAgICAgICAgICB9KSwKICAgICAgICAgIHdpZHRoOiAnMTAwcHgnLAogICAgICAgICAgYWN0aW9uczogYWN0aW9ucwogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgbm9JdGVtc01lc3NhZ2UgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAia2liYW5hLXJlYWN0LnRhYmxlTGlzdFZpZXcubGlzdGluZy5ub01hdGNoZWRJdGVtc01lc3NhZ2UiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTm8ge2VudGl0eU5hbWVQbHVyYWx9IG1hdGNoZWQgeW91ciBzZWFyY2guIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGVudGl0eU5hbWVQbHVyYWw6IHRoaXMucHJvcHMuZW50aXR5TmFtZVBsdXJhbAogICAgICAgIH0KICAgICAgfSk7CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUluTWVtb3J5VGFibGUsIHsKICAgICAgICBpdGVtSWQ6ICJpZCIsCiAgICAgICAgaXRlbXM6IHRoaXMuc3RhdGUuaXRlbXMsCiAgICAgICAgY29sdW1uczogY29sdW1ucyAvLyBFdWlCYXNpY1RhYmxlQ29sdW1uIGlzIHN0cmljdGVyIHRoYW4gQ29sdW1uCiAgICAgICAgLAogICAgICAgIHBhZ2luYXRpb246IHRoaXMucGFnaW5hdGlvbiwKICAgICAgICBsb2FkaW5nOiB0aGlzLnN0YXRlLmlzRmV0Y2hpbmdJdGVtcywKICAgICAgICBtZXNzYWdlOiBub0l0ZW1zTWVzc2FnZSwKICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvbiwKICAgICAgICBzZWFyY2g6IHNlYXJjaCwKICAgICAgICBzb3J0aW5nOiB0cnVlLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJpdGVtc0luTWVtVGFibGUiCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlckxpc3RpbmdPckVtcHR5U3RhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckxpc3RpbmdPckVtcHR5U3RhdGUoKSB7CiAgICAgIGlmICh0aGlzLmhhc05vSXRlbXMoKSkgewogICAgICAgIHJldHVybiB0aGlzLnJlbmRlck5vSXRlbXNNZXNzYWdlKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnJlbmRlckxpc3RpbmcoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJMaXN0aW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJMaXN0aW5nKCkgewogICAgICB2YXIgY3JlYXRlQnV0dG9uOwoKICAgICAgaWYgKHRoaXMucHJvcHMuY3JlYXRlSXRlbSkgewogICAgICAgIGNyZWF0ZUJ1dHRvbiA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgICAgZ3JvdzogZmFsc2UKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uLCB7CiAgICAgICAgICBvbkNsaWNrOiB0aGlzLnByb3BzLmNyZWF0ZUl0ZW0sCiAgICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAibmV3SXRlbUJ1dHRvbiIsCiAgICAgICAgICBpY29uVHlwZTogInBsdXNJbkNpcmNsZSIsCiAgICAgICAgICBmaWxsOiB0cnVlCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAia2liYW5hLXJlYWN0LnRhYmxlTGlzdFZpZXcubGlzdGluZy5jcmVhdGVOZXdJdGVtQnV0dG9uTGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDcmVhdGUge2VudGl0eU5hbWV9IiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBlbnRpdHlOYW1lOiB0aGlzLnByb3BzLmVudGl0eU5hbWUKICAgICAgICAgIH0KICAgICAgICB9KSkpOwogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgdGhpcy5zdGF0ZS5zaG93RGVsZXRlTW9kYWwgJiYgdGhpcy5yZW5kZXJDb25maXJtRGVsZXRlTW9kYWwoKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICAgIGp1c3RpZnlDb250ZW50OiAic3BhY2VCZXR3ZWVuIiwKICAgICAgICBhbGlnbkl0ZW1zOiAiZmxleEVuZCIsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInRvcC1uYXYiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUaXRsZSwgewogICAgICAgIHNpemU6ICJsIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoMSIsIHsKICAgICAgICBpZDogdGhpcy5wcm9wcy5oZWFkaW5nSWQKICAgICAgfSwgdGhpcy5wcm9wcy50YWJsZUxpc3RUaXRsZSkpKSwgY3JlYXRlQnV0dG9uKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICAgIHNpemU6ICJtIgogICAgICB9KSwgdGhpcy5yZW5kZXJMaXN0aW5nTGltaXRXYXJuaW5nKCksIHRoaXMucmVuZGVyVGFibGUoKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyUGFnZUNvbnRlbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclBhZ2VDb250ZW50KCkgewogICAgICBpZiAoIXRoaXMuc3RhdGUuaGFzSW5pdGlhbEZldGNoUmV0dXJuZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFnZUNvbnRlbnQsIHsKICAgICAgICBob3Jpem9udGFsUG9zaXRpb246ICJjZW50ZXIiCiAgICAgIH0sIHRoaXMucmVuZGVyTGlzdGluZ09yRW1wdHlTdGF0ZSgpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQYWdlLCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogdGhpcy5wcm9wcy5lbnRpdHlOYW1lICsgJ0xhbmRpbmdQYWdlJywKICAgICAgICBjbGFzc05hbWU6ICJpdGVtTGlzdGluZ19fcGFnZSIsCiAgICAgICAgcmVzdHJpY3RXaWR0aDogdHJ1ZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFnZUJvZHksIHsKICAgICAgICAiYXJpYS1sYWJlbGxlZGJ5IjogdGhpcy5zdGF0ZS5oYXNJbml0aWFsRmV0Y2hSZXR1cm5lZCA/IHRoaXMucHJvcHMuaGVhZGluZ0lkIDogdW5kZWZpbmVkCiAgICAgIH0sIHRoaXMucmVuZGVyUGFnZUNvbnRlbnQoKSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFRhYmxlTGlzdFZpZXc7Cn0oX3JlYWN0LmRlZmF1bHQuQ29tcG9uZW50KTsKCmV4cG9ydHMuVGFibGVMaXN0VmlldyA9IFRhYmxlTGlzdFZpZXc7"},null]}