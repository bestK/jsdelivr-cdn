{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/security/public/session/session_timeout.js","dependencies":[{"path":"x-pack/plugins/security/public/session/session_timeout.js","mtime":1585205049095},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlNlc3Npb25UaW1lb3V0ID0gdm9pZCAwOwoKdmFyIF9icm9hZGNhc3RDaGFubmVsID0gcmVxdWlyZSgiYnJvYWRjYXN0LWNoYW5uZWwiKTsKCnZhciBfc2Vzc2lvbl9pZGxlX3RpbWVvdXRfd2FybmluZyA9IHJlcXVpcmUoIi4vc2Vzc2lvbl9pZGxlX3RpbWVvdXRfd2FybmluZyIpOwoKdmFyIF9zZXNzaW9uX2xpZmVzcGFuX3dhcm5pbmcgPSByZXF1aXJlKCIuL3Nlc3Npb25fbGlmZXNwYW5fd2FybmluZyIpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KLyoqCiAqIENsaWVudCBzZXNzaW9uIHRpbWVvdXQgaXMgZGVjcmVhc2VkIGJ5IHRoaXMgbnVtYmVyIHNvIHRoYXQgS2liYW5hIHNlcnZlcgogKiBjYW4gc3RpbGwgYWNjZXNzIHNlc3Npb24gY29udGVudCBkdXJpbmcgbG9nb3V0IHJlcXVlc3QgdG8gcHJvcGVybHkgY2xlYW4KICogdXNlciBzZXNzaW9uIHVwIChpbnZhbGlkYXRlIGFjY2VzcyB0b2tlbnMsIHJlZGlyZWN0IHRvIGxvZ291dCBwb3J0YWwgZXRjLikuCiAqLwoKCnZhciBHUkFDRV9QRVJJT0RfTVMgPSA1ICogMTAwMDsKLyoqCiAqIER1cmF0aW9uIHdlJ2xsIG5vcm1hbGx5IGRpc3BsYXkgdGhlIHdhcm5pbmcgdG9hc3QKICovCgp2YXIgV0FSTklOR19NUyA9IDYwICogMTAwMDsKLyoqCiAqIEN1cnJlbnQgc2Vzc2lvbiBpbmZvIGlzIGNoZWNrZWQgdGhpcyBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJlZm9yZSB0aGUKICogd2FybmluZyB0b2FzdCBzaG93cy4gVGhpcyB3aWxsIHByZXZlbnQgdGhlIHRvYXN0IGZyb20gYmVpbmcgc2hvd24gaWYgdGhlCiAqIHNlc3Npb24gaGFzIGFscmVhZHkgYmVlbiBleHRlbmRlZC4KICovCgp2YXIgU0VTU0lPTl9DSEVDS19NUyA9IDEwMDA7Ci8qKgogKiBSb3V0ZSB0byBnZXQgc2Vzc2lvbiBpbmZvIGFuZCBleHRlbmQgc2Vzc2lvbiBleHBpcmF0aW9uCiAqLwoKdmFyIFNFU1NJT05fUk9VVEUgPSAnL2ludGVybmFsL3NlY3VyaXR5L3Nlc3Npb24nOwoKdmFyIFNlc3Npb25UaW1lb3V0ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU2Vzc2lvblRpbWVvdXQobm90aWZpY2F0aW9ucywgc2Vzc2lvbkV4cGlyZWQsIGh0dHAsIHRlbmFudCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2Vzc2lvblRpbWVvdXQpOwoKICAgIHRoaXMubm90aWZpY2F0aW9ucyA9IG5vdGlmaWNhdGlvbnM7CiAgICB0aGlzLnNlc3Npb25FeHBpcmVkID0gc2Vzc2lvbkV4cGlyZWQ7CiAgICB0aGlzLmh0dHAgPSBodHRwOwogICAgdGhpcy50ZW5hbnQgPSB0ZW5hbnQ7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjaGFubmVsIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInNlc3Npb25JbmZvIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImZldGNoVGltZXIiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAid2FybmluZ1RpbWVyIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImV4cGlyYXRpb25UaW1lciIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ3YXJuaW5nVG9hc3QiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZmV0Y2hTZXNzaW9uSW5mb0FuZFJlc2V0VGltZXJzIiwgZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGV4dGVuZCwKICAgICAgICAgIG1ldGhvZCwKICAgICAgICAgIGhlYWRlcnMsCiAgICAgICAgICByZXN1bHQsCiAgICAgICAgICBfYXJncyA9IGFyZ3VtZW50czsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBleHRlbmQgPSBfYXJncy5sZW5ndGggPiAwICYmIF9hcmdzWzBdICE9PSB1bmRlZmluZWQgPyBfYXJnc1swXSA6IGZhbHNlOwogICAgICAgICAgICAgIG1ldGhvZCA9IGV4dGVuZCA/ICdQT1NUJyA6ICdHRVQnOwogICAgICAgICAgICAgIGhlYWRlcnMgPSBleHRlbmQgPyB7fSA6IHsKICAgICAgICAgICAgICAgICdrYm4tc3lzdGVtLWFwaSc6ICd0cnVlJwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfdGhpcy5odHRwLmZldGNoKFNFU1NJT05fUk9VVEUsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLAogICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVTZXNzaW9uSW5mb0FuZFJlc2V0VGltZXJzKHJlc3VsdCk7IC8vIHNoYXJlIHRoaXMgdXBkYXRlZCBzZXNzaW9uIGluZm8gd2l0aCBhbnkgb3RoZXIgdGFicyB0byBzeW5jIHRoZSBVWAoKCiAgICAgICAgICAgICAgaWYgKF90aGlzLmNoYW5uZWwpIHsKICAgICAgICAgICAgICAgIF90aGlzLmNoYW5uZWwucG9zdE1lc3NhZ2UocmVzdWx0KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMyk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCBudWxsLCBbWzMsIDExXV0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJoYW5kbGVTZXNzaW9uSW5mb0FuZFJlc2V0VGltZXJzIiwgZnVuY3Rpb24gKHNlc3Npb25JbmZvKSB7CiAgICAgIF90aGlzLnNlc3Npb25JbmZvID0gc2Vzc2lvbkluZm87IC8vIHNhdmUgdGhlIHByb3ZpZGVyIG5hbWUgaW4gc2Vzc2lvbiBzdG9yYWdlLCB3ZSB3aWxsIG5lZWQgaXQgd2hlbiB3ZSBsb2cgb3V0CgogICAgICB2YXIga2V5ID0gIiIuY29uY2F0KF90aGlzLnRlbmFudCwgIi9zZXNzaW9uX3Byb3ZpZGVyIik7CiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oa2V5LCBzZXNzaW9uSW5mby5wcm92aWRlcik7CgogICAgICB2YXIgX3RoaXMkZ2V0VGltZW91dCA9IF90aGlzLmdldFRpbWVvdXQoKSwKICAgICAgICAgIHRpbWVvdXQgPSBfdGhpcyRnZXRUaW1lb3V0LnRpbWVvdXQsCiAgICAgICAgICBpc0xpZmVzcGFuVGltZW91dCA9IF90aGlzJGdldFRpbWVvdXQuaXNMaWZlc3BhblRpbWVvdXQ7CgogICAgICBpZiAodGltZW91dCA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBfdGhpcy5jbGVhbnVwKCk7IC8vIHNldCB0aW1lcnMKCgogICAgICB2YXIgdGltZW91dFZhbCA9IHRpbWVvdXQgLSBXQVJOSU5HX01TIC0gR1JBQ0VfUEVSSU9EX01TIC0gU0VTU0lPTl9DSEVDS19NUzsKCiAgICAgIGlmICh0aW1lb3V0VmFsID4gMCAmJiAhaXNMaWZlc3BhblRpbWVvdXQpIHsKICAgICAgICAvLyB3ZSBzaG91bGQgY2hlY2sgZm9yIHRoZSBsYXRlc3Qgc2Vzc2lvbiBpbmZvIGJlZm9yZSB0aGUgd2FybmluZyBkaXNwbGF5cwogICAgICAgIF90aGlzLmZldGNoVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChfdGhpcy5mZXRjaFNlc3Npb25JbmZvQW5kUmVzZXRUaW1lcnMsIHRpbWVvdXRWYWwpOwogICAgICB9CgogICAgICBfdGhpcy53YXJuaW5nVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChfdGhpcy5zaG93V2FybmluZywgTWF0aC5tYXgodGltZW91dCAtIFdBUk5JTkdfTVMgLSBHUkFDRV9QRVJJT0RfTVMsIDApKTsKICAgICAgX3RoaXMuZXhwaXJhdGlvblRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpcy5zZXNzaW9uRXhwaXJlZC5sb2dvdXQoKTsKICAgICAgfSwgTWF0aC5tYXgodGltZW91dCAtIEdSQUNFX1BFUklPRF9NUywgMCkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjbGVhbnVwIiwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoX3RoaXMuZmV0Y2hUaW1lcikgewogICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoX3RoaXMuZmV0Y2hUaW1lcik7CiAgICAgIH0KCiAgICAgIGlmIChfdGhpcy53YXJuaW5nVGltZXIpIHsKICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KF90aGlzLndhcm5pbmdUaW1lcik7CiAgICAgIH0KCiAgICAgIGlmIChfdGhpcy5leHBpcmF0aW9uVGltZXIpIHsKICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KF90aGlzLmV4cGlyYXRpb25UaW1lcik7CiAgICAgIH0KCiAgICAgIGlmIChfdGhpcy53YXJuaW5nVG9hc3QpIHsKICAgICAgICBfdGhpcy5ub3RpZmljYXRpb25zLnRvYXN0cy5yZW1vdmUoX3RoaXMud2FybmluZ1RvYXN0KTsKCiAgICAgICAgX3RoaXMud2FybmluZ1RvYXN0ID0gdW5kZWZpbmVkOwogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImdldFRpbWVvdXQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB0aW1lb3V0ID0gbnVsbDsKICAgICAgdmFyIGlzTGlmZXNwYW5UaW1lb3V0ID0gZmFsc2U7CgogICAgICBpZiAoX3RoaXMuc2Vzc2lvbkluZm8pIHsKICAgICAgICB2YXIgX3RoaXMkc2Vzc2lvbkluZm8gPSBfdGhpcy5zZXNzaW9uSW5mbywKICAgICAgICAgICAgbm93ID0gX3RoaXMkc2Vzc2lvbkluZm8ubm93LAogICAgICAgICAgICBpZGxlVGltZW91dEV4cGlyYXRpb24gPSBfdGhpcyRzZXNzaW9uSW5mby5pZGxlVGltZW91dEV4cGlyYXRpb24sCiAgICAgICAgICAgIGxpZmVzcGFuRXhwaXJhdGlvbiA9IF90aGlzJHNlc3Npb25JbmZvLmxpZmVzcGFuRXhwaXJhdGlvbjsKCiAgICAgICAgaWYgKGlkbGVUaW1lb3V0RXhwaXJhdGlvbikgewogICAgICAgICAgdGltZW91dCA9IGlkbGVUaW1lb3V0RXhwaXJhdGlvbiAtIG5vdzsKICAgICAgICB9CgogICAgICAgIGlmIChsaWZlc3BhbkV4cGlyYXRpb24gJiYgKGlkbGVUaW1lb3V0RXhwaXJhdGlvbiA9PT0gbnVsbCB8fCBsaWZlc3BhbkV4cGlyYXRpb24gPD0gaWRsZVRpbWVvdXRFeHBpcmF0aW9uKSkgewogICAgICAgICAgdGltZW91dCA9IGxpZmVzcGFuRXhwaXJhdGlvbiAtIG5vdzsKICAgICAgICAgIGlzTGlmZXNwYW5UaW1lb3V0ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgdGltZW91dDogdGltZW91dCwKICAgICAgICBpc0xpZmVzcGFuVGltZW91dDogaXNMaWZlc3BhblRpbWVvdXQKICAgICAgfTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic2hvd1dhcm5pbmciLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRnZXRUaW1lb3V0MiA9IF90aGlzLmdldFRpbWVvdXQoKSwKICAgICAgICAgIHRpbWVvdXQgPSBfdGhpcyRnZXRUaW1lb3V0Mi50aW1lb3V0LAogICAgICAgICAgaXNMaWZlc3BhblRpbWVvdXQgPSBfdGhpcyRnZXRUaW1lb3V0Mi5pc0xpZmVzcGFuVGltZW91dDsKCiAgICAgIHZhciB0b2FzdExpZmVUaW1lTXMgPSBNYXRoLm1pbih0aW1lb3V0IC0gR1JBQ0VfUEVSSU9EX01TLCBXQVJOSU5HX01TKTsKICAgICAgdmFyIHRvYXN0OwoKICAgICAgaWYgKCFpc0xpZmVzcGFuVGltZW91dCkgewogICAgICAgIHZhciByZWZyZXNoID0gZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5mZXRjaFNlc3Npb25JbmZvQW5kUmVzZXRUaW1lcnModHJ1ZSk7CiAgICAgICAgfTsKCiAgICAgICAgdG9hc3QgPSAoMCwgX3Nlc3Npb25faWRsZV90aW1lb3V0X3dhcm5pbmcuY3JlYXRlVG9hc3QpKHRvYXN0TGlmZVRpbWVNcywgcmVmcmVzaCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdG9hc3QgPSAoMCwgX3Nlc3Npb25fbGlmZXNwYW5fd2FybmluZy5jcmVhdGVUb2FzdCkodG9hc3RMaWZlVGltZU1zKTsKICAgICAgfQoKICAgICAgX3RoaXMud2FybmluZ1RvYXN0ID0gX3RoaXMubm90aWZpY2F0aW9ucy50b2FzdHMuYWRkKHRvYXN0KTsKICAgIH0pOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFNlc3Npb25UaW1lb3V0LCBbewogICAga2V5OiAic3RhcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KCkgewogICAgICBpZiAodGhpcy5odHRwLmFub255bW91c1BhdGhzLmlzQW5vbnltb3VzKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gc3Vic2NyaWJlIHRvIGEgYnJvYWRjYXN0IGNoYW5uZWwgZm9yIHNlc3Npb24gdGltZW91dCBtZXNzYWdlcwogICAgICAvLyB0aGlzIGFsbG93cyB1cyB0byBzeW5jaHJvbml6ZSB0aGUgVVggYWNyb3NzIHRhYnMgYW5kIGF2b2lkIHJlcGV0aXRpdmUgQVBJIGNhbGxzCgoKICAgICAgdmFyIG5hbWUgPSAiIi5jb25jYXQodGhpcy50ZW5hbnQsICIvc2Vzc2lvbl90aW1lb3V0Iik7CiAgICAgIHRoaXMuY2hhbm5lbCA9IG5ldyBfYnJvYWRjYXN0Q2hhbm5lbC5Ccm9hZGNhc3RDaGFubmVsKG5hbWUsIHsKICAgICAgICB3ZWJXb3JrZXJTdXBwb3J0OiBmYWxzZQogICAgICB9KTsKICAgICAgdGhpcy5jaGFubmVsLm9ubWVzc2FnZSA9IHRoaXMuaGFuZGxlU2Vzc2lvbkluZm9BbmRSZXNldFRpbWVyczsgLy8gVHJpZ2dlcnMgYW4gaW5pdGlhbCBjYWxsIHRvIHRoZSBlbmRwb2ludCB0byBnZXQgc2Vzc2lvbiBpbmZvOwogICAgICAvLyB3aGVuIHRoYXQgcmV0dXJucywgaXQgd2lsbCBzZXQgdGhlIHRpbWVvdXQKCiAgICAgIHJldHVybiB0aGlzLmZldGNoU2Vzc2lvbkluZm9BbmRSZXNldFRpbWVycygpOwogICAgfQogIH0sIHsKICAgIGtleTogInN0b3AiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3AoKSB7CiAgICAgIGlmICh0aGlzLmNoYW5uZWwpIHsKICAgICAgICB0aGlzLmNoYW5uZWwuY2xvc2UoKTsKICAgICAgfQoKICAgICAgdGhpcy5jbGVhbnVwKCk7CiAgICB9CiAgICAvKioKICAgICAqIFdoZW4gdGhlIHVzZXIgbWFrZXMgYW4gYXV0aGVudGljYXRlZCwgbm9uLXN5c3RlbSBBUEkgY2FsbCwgdGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGNoZWNrCiAgICAgKiBhbmQgc2VlIGlmIHRoZSBzZXNzaW9uIGhhcyBiZWVuIGV4dGVuZGVkLgogICAgICogQHBhcmFtIHVybCBUaGUgVVJMIHRoYXQgd2FzIGNhbGxlZAogICAgICovCgogIH0sIHsKICAgIGtleTogImV4dGVuZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXh0ZW5kKHVybCkgewogICAgICAvLyBhdm9pZCBhbiBhZGRpdGlvbmFsIEFQSSBjYWxscyB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgYnV0dG9uIG9uIHRoZSBzZXNzaW9uIGlkbGUgdGltZW91dAogICAgICBpZiAodXJsLmVuZHNXaXRoKFNFU1NJT05fUk9VVEUpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgX3RoaXMkZ2V0VGltZW91dDMgPSB0aGlzLmdldFRpbWVvdXQoKSwKICAgICAgICAgIGlzTGlmZXNwYW5UaW1lb3V0ID0gX3RoaXMkZ2V0VGltZW91dDMuaXNMaWZlc3BhblRpbWVvdXQ7CgogICAgICBpZiAodGhpcy53YXJuaW5nVG9hc3QgJiYgIWlzTGlmZXNwYW5UaW1lb3V0KSB7CiAgICAgICAgLy8gdGhlIGlkbGUgdGltZW91dCB3YXJuaW5nIGlzIGN1cnJlbnRseSBzaG93aW5nIGFuZCB0aGUgdXNlciBoYXMgY2xpY2tlZCBlbHNld2hlcmUgb24gdGhlIHBhZ2U7CiAgICAgICAgLy8gbWFrZSBhIG5ldyBjYWxsIHRvIGdldCB0aGUgbGF0ZXN0IHNlc3Npb24gaW5mbwogICAgICAgIHJldHVybiB0aGlzLmZldGNoU2Vzc2lvbkluZm9BbmRSZXNldFRpbWVycygpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEZldGNoIGxhdGVzdCBzZXNzaW9uIGluZm9ybWF0aW9uIGZyb20gdGhlIHNlcnZlciwgYW5kIG9wdGlvbmFsbHkgYXR0ZW1wdCB0byBleHRlbmQKICAgICAqIHRoZSBzZXNzaW9uIGV4cGlyYXRpb24uCiAgICAgKi8KCiAgfV0pOwoKICByZXR1cm4gU2Vzc2lvblRpbWVvdXQ7Cn0oKTsKCmV4cG9ydHMuU2Vzc2lvblRpbWVvdXQgPSBTZXNzaW9uVGltZW91dDs="},null]}