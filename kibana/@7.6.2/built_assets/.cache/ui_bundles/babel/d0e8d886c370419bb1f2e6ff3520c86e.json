{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/security/public/components/management/change_password_form/change_password_form.js","dependencies":[{"path":"x-pack/legacy/plugins/security/public/components/management/change_password_form/change_password_form.js","mtime":1585205047116},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuQ2hhbmdlUGFzc3dvcmRGb3JtID0gdm9pZCAwOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9yZWFjdCA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfbm90aWZ5ID0gcmVxdWlyZSgidWkvbm90aWZ5Iik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gInN5bWJvbCIpIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfSBlbHNlIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9CgogIHJldHVybiBfdHlwZW9mKG9iaik7Cn0KCmZ1bmN0aW9uIF9leHRlbmRzKCkgewogIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOwoKICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7CiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiB0YXJnZXQ7CiAgfTsKCiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsKICBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7CiAgICByZXR1cm4gY2FsbDsKICB9CgogIHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOwp9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogIF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOwogIH07CiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsKfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7CiAgaWYgKHNlbGYgPT09IHZvaWQgMCkgewogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICB9CgogIHJldHVybiBzZWxmOwp9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9CiAgfSk7CiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7Cn0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgICBvLl9fcHJvdG9fXyA9IHA7CiAgICByZXR1cm4gbzsKICB9OwoKICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkgewogIHJldHVybiB7CiAgICBzaG91bGRWYWxpZGF0ZTogZmFsc2UsCiAgICBjdXJyZW50UGFzc3dvcmQ6ICcnLAogICAgbmV3UGFzc3dvcmQ6ICcnLAogICAgY29uZmlybVBhc3N3b3JkOiAnJywKICAgIGN1cnJlbnRQYXNzd29yZEVycm9yOiBmYWxzZSwKICAgIGNoYW5nZUluUHJvZ3Jlc3M6IGZhbHNlCiAgfTsKfQoKdmFyIENoYW5nZVBhc3N3b3JkRm9ybSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoQ2hhbmdlUGFzc3dvcmRGb3JtLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gQ2hhbmdlUGFzc3dvcmRGb3JtKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENoYW5nZVBhc3N3b3JkRm9ybSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoQ2hhbmdlUGFzc3dvcmRGb3JtKS5jYWxsKHRoaXMsIHByb3BzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0Rm9ybSIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybSwgbnVsbCwgX3RoaXMucHJvcHMuaXNVc2VyQ2hhbmdpbmdPd25QYXNzd29yZCAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIF9leHRlbmRzKHt9LCBfdGhpcy52YWxpZGF0ZUN1cnJlbnRQYXNzd29yZCgpLCB7CiAgICAgICAgZnVsbFdpZHRoOiB0cnVlLAogICAgICAgIGxhYmVsOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5hY2NvdW50LmNoYW5nZVBhc3N3b3JkRm9ybS5jdXJyZW50UGFzc3dvcmRMYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkN1cnJlbnQgcGFzc3dvcmQiCiAgICAgICAgfSkKICAgICAgfSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmllbGRUZXh0LCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImN1cnJlbnRQYXNzd29yZCIsCiAgICAgICAgdHlwZTogInBhc3N3b3JkIiwKICAgICAgICB2YWx1ZTogX3RoaXMuc3RhdGUuY3VycmVudFBhc3N3b3JkLAogICAgICAgIG9uQ2hhbmdlOiBfdGhpcy5vbkN1cnJlbnRQYXNzd29yZENoYW5nZSwKICAgICAgICBkaXNhYmxlZDogX3RoaXMuc3RhdGUuY2hhbmdlSW5Qcm9ncmVzcywKICAgICAgICBmdWxsV2lkdGg6IHRydWUKICAgICAgfSkpLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIF9leHRlbmRzKHsKICAgICAgICBoZWxwVGV4dDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suc2VjdXJpdHkuYWNjb3VudC5jaGFuZ2VQYXNzd29yZEZvcm0ucGFzc3dvcmRSZXF1aXJlbWVudHMiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJVc2UgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzLiIKICAgICAgICB9KQogICAgICB9LCBfdGhpcy52YWxpZGF0ZU5ld1Bhc3N3b3JkKCksIHsKICAgICAgICBmdWxsV2lkdGg6IHRydWUsCiAgICAgICAgbGFiZWw6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5LmFjY291bnQuY2hhbmdlUGFzc3dvcmRGb3JtLm5ld1Bhc3N3b3JkTGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJOZXcgcGFzc3dvcmQiCiAgICAgICAgfSkKICAgICAgfSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmllbGRUZXh0LCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogIm5ld1Bhc3N3b3JkIiwKICAgICAgICB0eXBlOiAicGFzc3dvcmQiLAogICAgICAgIHZhbHVlOiBfdGhpcy5zdGF0ZS5uZXdQYXNzd29yZCwKICAgICAgICBvbkNoYW5nZTogX3RoaXMub25OZXdQYXNzd29yZENoYW5nZSwKICAgICAgICBkaXNhYmxlZDogX3RoaXMuc3RhdGUuY2hhbmdlSW5Qcm9ncmVzcywKICAgICAgICBmdWxsV2lkdGg6IHRydWUKICAgICAgfSkpLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIF9leHRlbmRzKHt9LCBfdGhpcy52YWxpZGF0ZUNvbmZpcm1QYXNzd29yZCgpLCB7CiAgICAgICAgZnVsbFdpZHRoOiB0cnVlLAogICAgICAgIGxhYmVsOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5hY2NvdW50LmNoYW5nZVBhc3N3b3JkRm9ybS5jb25maXJtUGFzc3dvcmRMYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNvbmZpcm0gbmV3IHBhc3N3b3JkIgogICAgICAgIH0pCiAgICAgIH0pLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkVGV4dCwgewogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJjb25maXJtTmV3UGFzc3dvcmQiLAogICAgICAgIHR5cGU6ICJwYXNzd29yZCIsCiAgICAgICAgdmFsdWU6IF90aGlzLnN0YXRlLmNvbmZpcm1QYXNzd29yZCwKICAgICAgICBvbkNoYW5nZTogX3RoaXMub25Db25maXJtUGFzc3dvcmRDaGFuZ2UsCiAgICAgICAgZGlzYWJsZWQ6IF90aGlzLnN0YXRlLmNoYW5nZUluUHJvZ3Jlc3MsCiAgICAgICAgZnVsbFdpZHRoOiB0cnVlCiAgICAgIH0pKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiLAogICAgICAgIHJlc3BvbnNpdmU6IGZhbHNlCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbiwgewogICAgICAgIG9uQ2xpY2s6IF90aGlzLm9uQ2hhbmdlUGFzc3dvcmRDbGljaywKICAgICAgICBmaWxsOiB0cnVlLAogICAgICAgIGlzTG9hZGluZzogX3RoaXMuc3RhdGUuY2hhbmdlSW5Qcm9ncmVzcywKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiY2hhbmdlUGFzc3dvcmRCdXR0b24iCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5hY2NvdW50LmNoYW5nZVBhc3N3b3JkRm9ybS5zYXZlQ2hhbmdlc0J1dHRvbkxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNoYW5nZSBwYXNzd29yZCIKICAgICAgfSkpKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uRW1wdHksIHsKICAgICAgICBvbkNsaWNrOiBfdGhpcy5vbkNhbmNlbENsaWNrLAogICAgICAgIGlzRGlzYWJsZWQ6IF90aGlzLnN0YXRlLmNoYW5nZUluUHJvZ3Jlc3MKICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5LmFjY291bnQuY2hhbmdlUGFzc3dvcmRGb3JtLmNhbmNlbEJ1dHRvbkxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlJlc2V0IgogICAgICB9KSkpKSkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25DdXJyZW50UGFzc3dvcmRDaGFuZ2UiLCBmdW5jdGlvbiAoZSkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgY3VycmVudFBhc3N3b3JkOiBlLnRhcmdldC52YWx1ZSwKICAgICAgICBjdXJyZW50UGFzc3dvcmRFcnJvcjogZmFsc2UKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvbk5ld1Bhc3N3b3JkQ2hhbmdlIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIG5ld1Bhc3N3b3JkOiBlLnRhcmdldC52YWx1ZQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uQ29uZmlybVBhc3N3b3JkQ2hhbmdlIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGNvbmZpcm1QYXNzd29yZDogZS50YXJnZXQudmFsdWUKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvbkNhbmNlbENsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZXRTdGF0ZShnZXRJbml0aWFsU3RhdGUoKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvbkNoYW5nZVBhc3N3b3JkQ2xpY2siLCBmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHNob3VsZFZhbGlkYXRlOiB0cnVlLAogICAgICAgICAgICAgICAgY3VycmVudFBhc3N3b3JkRXJyb3I6IGZhbHNlCiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF90aGlzJHZhbGlkYXRlRm9ybSA9IF90aGlzLnZhbGlkYXRlRm9ybSgpLAogICAgICAgICAgICAgICAgICAgIGlzSW52YWxpZCA9IF90aGlzJHZhbGlkYXRlRm9ybS5pc0ludmFsaWQ7CgogICAgICAgICAgICAgICAgaWYgKGlzSW52YWxpZCkgewogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBjaGFuZ2VJblByb2dyZXNzOiB0cnVlCiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wZXJmb3JtUGFzc3dvcmRDaGFuZ2UoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInZhbGlkYXRlQ3VycmVudFBhc3N3b3JkIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgc2hvdWxkVmFsaWRhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IF90aGlzLnN0YXRlLnNob3VsZFZhbGlkYXRlOwoKICAgICAgaWYgKCFzaG91bGRWYWxpZGF0ZSB8fCAhX3RoaXMucHJvcHMuaXNVc2VyQ2hhbmdpbmdPd25QYXNzd29yZCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpc0ludmFsaWQ6IGZhbHNlCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKF90aGlzLnN0YXRlLmN1cnJlbnRQYXNzd29yZEVycm9yKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlzSW52YWxpZDogdHJ1ZSwKICAgICAgICAgIGVycm9yOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5LmFjY291bnQuY2hhbmdlUGFzc3dvcmRGb3JtLmludmFsaWRQYXNzd29yZCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ3VycmVudCBwYXNzd29yZCBpcyBpbmNvcnJlY3QuIgogICAgICAgICAgfSkKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoIV90aGlzLnN0YXRlLmN1cnJlbnRQYXNzd29yZCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpc0ludmFsaWQ6IHRydWUsCiAgICAgICAgICBlcnJvcjogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5hY2NvdW50LmN1cnJlbnRQYXNzd29yZFJlcXVpcmVkIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDdXJyZW50IHBhc3N3b3JkIGlzIHJlcXVpcmVkLiIKICAgICAgICAgIH0pCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBpc0ludmFsaWQ6IGZhbHNlCiAgICAgIH07CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ2YWxpZGF0ZU5ld1Bhc3N3b3JkIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgc2hvdWxkVmFsaWRhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IF90aGlzLnN0YXRlLnNob3VsZFZhbGlkYXRlOwogICAgICB2YXIgbmV3UGFzc3dvcmQgPSBfdGhpcy5zdGF0ZS5uZXdQYXNzd29yZDsKICAgICAgdmFyIG1pblBhc3N3b3JkTGVuZ3RoID0gNjsKCiAgICAgIGlmIChzaG91bGRWYWxpZGF0ZSAmJiBuZXdQYXNzd29yZC5sZW5ndGggPCBtaW5QYXNzd29yZExlbmd0aCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpc0ludmFsaWQ6IHRydWUsCiAgICAgICAgICBlcnJvcjogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5hY2NvdW50LnBhc3N3b3JkTGVuZ3RoRGVzY3JpcHRpb24iLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlBhc3N3b3JkIGlzIHRvbyBzaG9ydC4iCiAgICAgICAgICB9KQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgaXNJbnZhbGlkOiBmYWxzZQogICAgICB9OwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidmFsaWRhdGVDb25maXJtUGFzc3dvcmQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzaG91bGRWYWxpZGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogX3RoaXMuc3RhdGUuc2hvdWxkVmFsaWRhdGU7CiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IF90aGlzLnN0YXRlLAogICAgICAgICAgbmV3UGFzc3dvcmQgPSBfdGhpcyRzdGF0ZS5uZXdQYXNzd29yZCwKICAgICAgICAgIGNvbmZpcm1QYXNzd29yZCA9IF90aGlzJHN0YXRlLmNvbmZpcm1QYXNzd29yZDsKCiAgICAgIGlmIChzaG91bGRWYWxpZGF0ZSAmJiBuZXdQYXNzd29yZCAhPT0gY29uZmlybVBhc3N3b3JkKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlzSW52YWxpZDogdHJ1ZSwKICAgICAgICAgIGVycm9yOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5LmFjY291bnQucGFzc3dvcmRzRG9Ob3RNYXRjaCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUGFzc3dvcmRzIGRvIG5vdCBtYXRjaC4iCiAgICAgICAgICB9KQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgaXNJbnZhbGlkOiBmYWxzZQogICAgICB9OwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidmFsaWRhdGVGb3JtIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgdmFsaWRhdGlvbiA9IFtfdGhpcy52YWxpZGF0ZUN1cnJlbnRQYXNzd29yZCh0cnVlKSwgX3RoaXMudmFsaWRhdGVOZXdQYXNzd29yZCh0cnVlKSwgX3RoaXMudmFsaWRhdGVDb25maXJtUGFzc3dvcmQodHJ1ZSldOwogICAgICB2YXIgZmlyc3RGYWlsdXJlID0gdmFsaWRhdGlvbi5maW5kKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gcmVzdWx0LmlzSW52YWxpZDsKICAgICAgfSk7CgogICAgICBpZiAoZmlyc3RGYWlsdXJlKSB7CiAgICAgICAgcmV0dXJuIGZpcnN0RmFpbHVyZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBpc0ludmFsaWQ6IGZhbHNlCiAgICAgIH07CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJwZXJmb3JtUGFzc3dvcmRDaGFuZ2UiLCBmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKF90aGlzLnByb3BzLmFwaUNsaWVudC5jaGFuZ2VQYXNzd29yZChfdGhpcy5wcm9wcy51c2VyLnVzZXJuYW1lLCBfdGhpcy5zdGF0ZS5uZXdQYXNzd29yZCwgX3RoaXMuc3RhdGUuY3VycmVudFBhc3N3b3JkKSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlQ2hhbmdlUGFzc3dvcmRTdWNjZXNzKCk7CgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDApOwoKICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVDaGFuZ2VQYXNzd29yZEZhaWx1cmUoX2NvbnRleHQyLnQwKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDk7CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGNoYW5nZUluUHJvZ3Jlc3M6IGZhbHNlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuZmluaXNoKDkpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIG51bGwsIFtbMCwgNiwgOSwgMTJdXSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVDaGFuZ2VQYXNzd29yZFN1Y2Nlc3MiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZFN1Y2Nlc3MoewogICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suc2VjdXJpdHkuYWNjb3VudC5jaGFuZ2VQYXNzd29yZFN1Y2Nlc3MnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1lvdXIgcGFzc3dvcmQgaGFzIGJlZW4gY2hhbmdlZC4nCiAgICAgICAgfSksCiAgICAgICAgJ2RhdGEtdGVzdC1zdWJqJzogJ3Bhc3N3b3JkVXBkYXRlU3VjY2VzcycKICAgICAgfSk7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgY3VycmVudFBhc3N3b3JkRXJyb3I6IGZhbHNlLAogICAgICAgIHNob3VsZFZhbGlkYXRlOiBmYWxzZSwKICAgICAgICBuZXdQYXNzd29yZDogJycsCiAgICAgICAgY3VycmVudFBhc3N3b3JkOiAnJywKICAgICAgICBjb25maXJtUGFzc3dvcmQ6ICcnCiAgICAgIH0pOwoKICAgICAgaWYgKF90aGlzLnByb3BzLm9uQ2hhbmdlUGFzc3dvcmQpIHsKICAgICAgICBfdGhpcy5wcm9wcy5vbkNoYW5nZVBhc3N3b3JkKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUNoYW5nZVBhc3N3b3JkRmFpbHVyZSIsIGZ1bmN0aW9uIChlcnJvcikgewogICAgICBpZiAoZXJyb3IuYm9keSAmJiBlcnJvci5ib2R5LnN0YXR1c0NvZGUgPT09IDQwMykgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGN1cnJlbnRQYXNzd29yZEVycm9yOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkRGFuZ2VyKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LnVzZXJzLmVkaXRVc2VyLnNldHRpbmdQYXNzd29yZEVycm9yTWVzc2FnZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRXJyb3Igc2V0dGluZyBwYXNzd29yZDoge21lc3NhZ2V9JywKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBtZXNzYWdlOiBfLmdldChlcnJvciwgJ2JvZHkubWVzc2FnZScpCiAgICAgICAgICB9CiAgICAgICAgfSkpOwogICAgICB9CiAgICB9KTsKCiAgICBfdGhpcy5zdGF0ZSA9IGdldEluaXRpYWxTdGF0ZSgpOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKENoYW5nZVBhc3N3b3JkRm9ybSwgW3sKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRGb3JtKCk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQ2hhbmdlUGFzc3dvcmRGb3JtOwp9KF9yZWFjdDIuQ29tcG9uZW50KTsKCmV4cG9ydHMuQ2hhbmdlUGFzc3dvcmRGb3JtID0gQ2hhbmdlUGFzc3dvcmRGb3JtOw=="},null]}