{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/routing/routes/explorer.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/routing/routes/explorer.js","mtime":1585205045936},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmV4cGxvcmVyUm91dGUgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3VzZU9ic2VydmFibGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0LXVzZS9saWIvdXNlT2JzZXJ2YWJsZSIpKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF90aW1lZmlsdGVyID0gcmVxdWlyZSgidWkvdGltZWZpbHRlciIpOwoKdmFyIF9yb3V0ZXIgPSByZXF1aXJlKCIuLi9yb3V0ZXIiKTsKCnZhciBfdXNlX3JlZnJlc2ggPSByZXF1aXJlKCIuLi91c2VfcmVmcmVzaCIpOwoKdmFyIF91c2VfcmVzb2x2ZXIgPSByZXF1aXJlKCIuLi91c2VfcmVzb2x2ZXIiKTsKCnZhciBfcmVzb2x2ZXJzID0gcmVxdWlyZSgiLi4vcmVzb2x2ZXJzIik7Cgp2YXIgX2V4cGxvcmVyID0gcmVxdWlyZSgiLi4vLi4vZXhwbG9yZXIiKTsKCnZhciBfdXNlX3NlbGVjdGVkX2NlbGxzID0gcmVxdWlyZSgiLi4vLi4vZXhwbG9yZXIvaG9va3MvdXNlX3NlbGVjdGVkX2NlbGxzIik7Cgp2YXIgX2pvYl9zZXJ2aWNlID0gcmVxdWlyZSgiLi4vLi4vc2VydmljZXMvam9iX3NlcnZpY2UiKTsKCnZhciBfbWxfYXBpX3NlcnZpY2UgPSByZXF1aXJlKCIuLi8uLi9zZXJ2aWNlcy9tbF9hcGlfc2VydmljZSIpOwoKdmFyIF9hY3Rpb25zID0gcmVxdWlyZSgiLi4vLi4vZXhwbG9yZXIvYWN0aW9ucyIpOwoKdmFyIF9leHBsb3Jlcl9kYXNoYm9hcmRfc2VydmljZSA9IHJlcXVpcmUoIi4uLy4uL2V4cGxvcmVyL2V4cGxvcmVyX2Rhc2hib2FyZF9zZXJ2aWNlIik7Cgp2YXIgX2V4cGxvcmVyX3V0aWxzID0gcmVxdWlyZSgiLi4vLi4vZXhwbG9yZXIvZXhwbG9yZXJfdXRpbHMiKTsKCnZhciBfc2VsZWN0X2xpbWl0ID0gcmVxdWlyZSgiLi4vLi4vZXhwbG9yZXIvc2VsZWN0X2xpbWl0Iik7Cgp2YXIgX3VzZV9qb2Jfc2VsZWN0aW9uID0gcmVxdWlyZSgiLi4vLi4vY29tcG9uZW50cy9qb2Jfc2VsZWN0b3IvdXNlX2pvYl9zZWxlY3Rpb24iKTsKCnZhciBfY2hlY2tib3hfc2hvd2NoYXJ0cyA9IHJlcXVpcmUoIi4uLy4uL2NvbXBvbmVudHMvY29udHJvbHMvY2hlY2tib3hfc2hvd2NoYXJ0cyIpOwoKdmFyIF9zZWxlY3RfaW50ZXJ2YWwgPSByZXF1aXJlKCIuLi8uLi9jb21wb25lbnRzL2NvbnRyb2xzL3NlbGVjdF9pbnRlcnZhbCIpOwoKdmFyIF9zZWxlY3Rfc2V2ZXJpdHkgPSByZXF1aXJlKCIuLi8uLi9jb21wb25lbnRzL2NvbnRyb2xzL3NlbGVjdF9zZXZlcml0eSIpOwoKdmFyIF91cmxfc3RhdGUgPSByZXF1aXJlKCIuLi8uLi91dGlsL3VybF9zdGF0ZSIpOwoKdmFyIF9icmVhZGNydW1icyA9IHJlcXVpcmUoIi4uL2JyZWFkY3J1bWJzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfZXh0ZW5kcygpIHsKICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgewogICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsKCiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgewogICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGFyZ2V0OwogIH07CgogIHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9Cgp2YXIgYnJlYWRjcnVtYnMgPSBbX2JyZWFkY3J1bWJzLk1MX0JSRUFEQ1JVTUIsIF9icmVhZGNydW1icy5BTk9NQUxZX0RFVEVDVElPTl9CUkVBRENSVU1CLCB7CiAgdGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLmFub21hbHlEZXRlY3Rpb24uYW5vbWFseUV4cGxvcmVyTGFiZWwnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ0Fub21hbHkgRXhwbG9yZXInCiAgfSksCiAgaHJlZjogJycKfV07CnZhciBleHBsb3JlclJvdXRlID0gewogIHBhdGg6ICcvZXhwbG9yZXInLAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHByb3BzLCBjb25maWcsIGRlcHMpIHsKICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFBhZ2VXcmFwcGVyLCBfZXh0ZW5kcyh7CiAgICAgIGNvbmZpZzogY29uZmlnCiAgICB9LCBwcm9wcywgewogICAgICBkZXBzOiBkZXBzCiAgICB9KSk7CiAgfSwKICBicmVhZGNydW1iczogYnJlYWRjcnVtYnMKfTsKZXhwb3J0cy5leHBsb3JlclJvdXRlID0gZXhwbG9yZXJSb3V0ZTsKCnZhciBQYWdlV3JhcHBlciA9IGZ1bmN0aW9uIFBhZ2VXcmFwcGVyKF9yZWYpIHsKICB2YXIgY29uZmlnID0gX3JlZi5jb25maWcsCiAgICAgIGRlcHMgPSBfcmVmLmRlcHM7CgogIHZhciBfdXNlUmVzb2x2ZXIgPSAoMCwgX3VzZV9yZXNvbHZlci51c2VSZXNvbHZlcikodW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZywgX29iamVjdFNwcmVhZCh7fSwgKDAsIF9yZXNvbHZlcnMuYmFzaWNSZXNvbHZlcnMpKGRlcHMpLCB7CiAgICBqb2JzOiBfam9iX3NlcnZpY2UubWxKb2JTZXJ2aWNlLmxvYWRKb2JzV3JhcHBlciwKICAgIGpvYnNXaXRoVGltZVJhbmdlOiBmdW5jdGlvbiBqb2JzV2l0aFRpbWVSYW5nZSgpIHsKICAgICAgcmV0dXJuIF9tbF9hcGlfc2VydmljZS5tbC5qb2JzLmpvYnNXaXRoVGltZXJhbmdlKCgwLCBfZXhwbG9yZXJfdXRpbHMuZ2V0RGF0ZUZvcm1hdFR6KSgpKTsKICAgIH0KICB9KSksCiAgICAgIGNvbnRleHQgPSBfdXNlUmVzb2x2ZXIuY29udGV4dCwKICAgICAgcmVzdWx0cyA9IF91c2VSZXNvbHZlci5yZXN1bHRzOwoKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcm91dGVyLlBhZ2VMb2FkZXIsIHsKICAgIGNvbnRleHQ6IGNvbnRleHQKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEV4cGxvcmVyVXJsU3RhdGVNYW5hZ2VyLCB7CiAgICBqb2JzV2l0aFRpbWVSYW5nZTogcmVzdWx0cy5qb2JzV2l0aFRpbWVSYW5nZS5qb2JzCiAgfSkpOwp9OwoKdmFyIEV4cGxvcmVyVXJsU3RhdGVNYW5hZ2VyID0gZnVuY3Rpb24gRXhwbG9yZXJVcmxTdGF0ZU1hbmFnZXIoX3JlZjIpIHsKICB2YXIgX2dsb2JhbFN0YXRlJHRpbWUsIF9nbG9iYWxTdGF0ZSR0aW1lMjsKCiAgdmFyIGpvYnNXaXRoVGltZVJhbmdlID0gX3JlZjIuam9ic1dpdGhUaW1lUmFuZ2U7CgogIHZhciBfdXNlVXJsU3RhdGUgPSAoMCwgX3VybF9zdGF0ZS51c2VVcmxTdGF0ZSkoJ19hJyksCiAgICAgIF91c2VVcmxTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlVXJsU3RhdGUsIDIpLAogICAgICBhcHBTdGF0ZSA9IF91c2VVcmxTdGF0ZTJbMF0sCiAgICAgIHNldEFwcFN0YXRlID0gX3VzZVVybFN0YXRlMlsxXTsKCiAgdmFyIF91c2VVcmxTdGF0ZTMgPSAoMCwgX3VybF9zdGF0ZS51c2VVcmxTdGF0ZSkoJ19nJyksCiAgICAgIF91c2VVcmxTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlVXJsU3RhdGUzLCAyKSwKICAgICAgZ2xvYmFsU3RhdGUgPSBfdXNlVXJsU3RhdGU0WzBdLAogICAgICBzZXRHbG9iYWxTdGF0ZSA9IF91c2VVcmxTdGF0ZTRbMV07CgogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSgwKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGxhc3RSZWZyZXNoID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0TGFzdFJlZnJlc2ggPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZUpvYlNlbGVjdGlvbiA9ICgwLCBfdXNlX2pvYl9zZWxlY3Rpb24udXNlSm9iU2VsZWN0aW9uKShqb2JzV2l0aFRpbWVSYW5nZSwgKDAsIF9leHBsb3Jlcl91dGlscy5nZXREYXRlRm9ybWF0VHopKCkpLAogICAgICBqb2JJZHMgPSBfdXNlSm9iU2VsZWN0aW9uLmpvYklkczsKCiAgdmFyIHJlZnJlc2ggPSAoMCwgX3VzZV9yZWZyZXNoLnVzZVJlZnJlc2gpKCk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGlmIChyZWZyZXNoICE9PSB1bmRlZmluZWQpIHsKICAgICAgc2V0TGFzdFJlZnJlc2gocmVmcmVzaCA9PT0gbnVsbCB8fCByZWZyZXNoID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZWZyZXNoLmxhc3RSZWZyZXNoKTsKCiAgICAgIGlmIChyZWZyZXNoLnRpbWVSYW5nZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFyIF9yZWZyZXNoJHRpbWVSYW5nZSA9IHJlZnJlc2gudGltZVJhbmdlLAogICAgICAgICAgICBzdGFydCA9IF9yZWZyZXNoJHRpbWVSYW5nZS5zdGFydCwKICAgICAgICAgICAgZW5kID0gX3JlZnJlc2gkdGltZVJhbmdlLmVuZDsKICAgICAgICBzZXRHbG9iYWxTdGF0ZSgndGltZScsIHsKICAgICAgICAgIGZyb206IHN0YXJ0LAogICAgICAgICAgdG86IGVuZAogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgW3JlZnJlc2ggPT09IG51bGwgfHwgcmVmcmVzaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVmcmVzaC5sYXN0UmVmcmVzaF0pOyAvLyBXZSBjYW5ub3Qgc2ltcGx5IGluZmVyIGJvdW5kcyBmcm9tIHRoZSBnbG9iYWxTdGF0ZSdzIGB0aW1lYCBhdHRyaWJ1dGUKICAvLyB3aXRoIGBtb21lbnRgIHNpbmNlIGl0IGNhbiBjb250YWluIGN1c3RvbSBzdHJpbmdzIHN1Y2ggYXMgYG5vdy0xNW1gLgogIC8vIFNvIHdoZW4gZ2xvYmFsU3RhdGUncyBgdGltZWAgY2hhbmdlcywgd2UgdXBkYXRlIHRoZSB0aW1lZmlsdGVyIGFuZCB1c2UKICAvLyBgdGltZWZpbHRlci5nZXRCb3VuZHMoKWAgdG8gdXBkYXRlIGBib3VuZHNgIGluIHRoaXMgY29tcG9uZW50J3Mgc3RhdGUuCgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBpZiAoKGdsb2JhbFN0YXRlID09PSBudWxsIHx8IGdsb2JhbFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBnbG9iYWxTdGF0ZS50aW1lKSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuc2V0VGltZSh7CiAgICAgICAgZnJvbTogZ2xvYmFsU3RhdGUudGltZS5mcm9tLAogICAgICAgIHRvOiBnbG9iYWxTdGF0ZS50aW1lLnRvCiAgICAgIH0pOwoKICAgICAgdmFyIHRpbWVmaWx0ZXJCb3VuZHMgPSBfdGltZWZpbHRlci50aW1lZmlsdGVyLmdldEJvdW5kcygpOyAvLyBPbmx5IGlmIGJvdGggbWluL21heCBib3VuZHMgYXJlIHZhbGlkIG1vbWVudCB0aW1lcyBzZXQgdGhlIGJvdW5kcy4KICAgICAgLy8gQW4gaW52YWxpZCBzdHJpbmcgcmVzdG9yZWQgZnJvbSBnbG9iYWxTdGF0ZSBtaWdodCByZXR1cm4gYHVuZGVmaW5lZGAuCgoKICAgICAgaWYgKCh0aW1lZmlsdGVyQm91bmRzID09PSBudWxsIHx8IHRpbWVmaWx0ZXJCb3VuZHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRpbWVmaWx0ZXJCb3VuZHMubWluKSAhPT0gdW5kZWZpbmVkICYmICh0aW1lZmlsdGVyQm91bmRzID09PSBudWxsIHx8IHRpbWVmaWx0ZXJCb3VuZHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRpbWVmaWx0ZXJCb3VuZHMubWF4KSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgX2V4cGxvcmVyX2Rhc2hib2FyZF9zZXJ2aWNlLmV4cGxvcmVyU2VydmljZS5zZXRCb3VuZHModGltZWZpbHRlckJvdW5kcyk7CiAgICAgIH0KICAgIH0KICB9LCBbZ2xvYmFsU3RhdGUgPT09IG51bGwgfHwgZ2xvYmFsU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZ2xvYmFsU3RhdGUkdGltZSA9IGdsb2JhbFN0YXRlLnRpbWUpID09PSBudWxsIHx8IF9nbG9iYWxTdGF0ZSR0aW1lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2xvYmFsU3RhdGUkdGltZS5mcm9tLCBnbG9iYWxTdGF0ZSA9PT0gbnVsbCB8fCBnbG9iYWxTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9nbG9iYWxTdGF0ZSR0aW1lMiA9IGdsb2JhbFN0YXRlLnRpbWUpID09PSBudWxsIHx8IF9nbG9iYWxTdGF0ZSR0aW1lMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2dsb2JhbFN0YXRlJHRpbWUyLnRvXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIHZhciBfYXBwU3RhdGUkbWxFeHBsb3JlclM7CgogICAgX3RpbWVmaWx0ZXIudGltZWZpbHRlci5lbmFibGVUaW1lUmFuZ2VTZWxlY3RvcigpOwoKICAgIF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuZW5hYmxlQXV0b1JlZnJlc2hTZWxlY3RvcigpOwoKICAgIHZhciB2aWV3QnlGaWVsZE5hbWUgPSBhcHBTdGF0ZSA9PT0gbnVsbCB8fCBhcHBTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9hcHBTdGF0ZSRtbEV4cGxvcmVyUyA9IGFwcFN0YXRlLm1sRXhwbG9yZXJTd2ltbGFuZSkgPT09IG51bGwgfHwgX2FwcFN0YXRlJG1sRXhwbG9yZXJTID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXBwU3RhdGUkbWxFeHBsb3JlclMudmlld0J5RmllbGROYW1lOwoKICAgIGlmICh2aWV3QnlGaWVsZE5hbWUgIT09IHVuZGVmaW5lZCkgewogICAgICBfZXhwbG9yZXJfZGFzaGJvYXJkX3NlcnZpY2UuZXhwbG9yZXJTZXJ2aWNlLnNldFZpZXdCeVN3aW1sYW5lRmllbGROYW1lKHZpZXdCeUZpZWxkTmFtZSk7CiAgICB9CgogICAgdmFyIGZpbHRlckRhdGEgPSBhcHBTdGF0ZSA9PT0gbnVsbCB8fCBhcHBTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXBwU3RhdGUubWxFeHBsb3JlckZpbHRlcjsKCiAgICBpZiAoZmlsdGVyRGF0YSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIF9leHBsb3Jlcl9kYXNoYm9hcmRfc2VydmljZS5leHBsb3JlclNlcnZpY2Uuc2V0RmlsdGVyRGF0YShmaWx0ZXJEYXRhKTsKICAgIH0KICB9LCBbXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGlmIChqb2JJZHMubGVuZ3RoID4gMCkgewogICAgICBfZXhwbG9yZXJfZGFzaGJvYXJkX3NlcnZpY2UuZXhwbG9yZXJTZXJ2aWNlLnVwZGF0ZUpvYlNlbGVjdGlvbihqb2JJZHMpOwogICAgfSBlbHNlIHsKICAgICAgX2V4cGxvcmVyX2Rhc2hib2FyZF9zZXJ2aWNlLmV4cGxvcmVyU2VydmljZS5jbGVhckpvYnMoKTsKICAgIH0KICB9LCBbSlNPTi5zdHJpbmdpZnkoam9iSWRzKV0pOwoKICB2YXIgX3VzZUV4cGxvcmVyRGF0YSA9ICgwLCBfYWN0aW9ucy51c2VFeHBsb3JlckRhdGEpKCksCiAgICAgIF91c2VFeHBsb3JlckRhdGEyID0gX3NsaWNlZFRvQXJyYXkoX3VzZUV4cGxvcmVyRGF0YSwgMiksCiAgICAgIGV4cGxvcmVyRGF0YSA9IF91c2VFeHBsb3JlckRhdGEyWzBdLAogICAgICBsb2FkRXhwbG9yZXJEYXRhID0gX3VzZUV4cGxvcmVyRGF0YTJbMV07CgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBpZiAoZXhwbG9yZXJEYXRhICE9PSB1bmRlZmluZWQgJiYgT2JqZWN0LmtleXMoZXhwbG9yZXJEYXRhKS5sZW5ndGggPiAwKSB7CiAgICAgIF9leHBsb3Jlcl9kYXNoYm9hcmRfc2VydmljZS5leHBsb3JlclNlcnZpY2Uuc2V0RXhwbG9yZXJEYXRhKGV4cGxvcmVyRGF0YSk7CiAgICB9CiAgfSwgW2V4cGxvcmVyRGF0YV0pOwogIHZhciBleHBsb3JlckFwcFN0YXRlID0gKDAsIF91c2VPYnNlcnZhYmxlLmRlZmF1bHQpKF9leHBsb3Jlcl9kYXNoYm9hcmRfc2VydmljZS5leHBsb3JlclNlcnZpY2UuYXBwU3RhdGUkKTsKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgaWYgKGV4cGxvcmVyQXBwU3RhdGUgIT09IHVuZGVmaW5lZCAmJiBleHBsb3JlckFwcFN0YXRlLm1sRXhwbG9yZXJTd2ltbGFuZS52aWV3QnlGaWVsZE5hbWUgIT09IHVuZGVmaW5lZCkgewogICAgICBzZXRBcHBTdGF0ZShleHBsb3JlckFwcFN0YXRlKTsKICAgIH0KICB9LCBbZXhwbG9yZXJBcHBTdGF0ZV0pOwogIHZhciBleHBsb3JlclN0YXRlID0gKDAsIF91c2VPYnNlcnZhYmxlLmRlZmF1bHQpKF9leHBsb3Jlcl9kYXNoYm9hcmRfc2VydmljZS5leHBsb3JlclNlcnZpY2Uuc3RhdGUkKTsKCiAgdmFyIF91c2VTaG93Q2hhcnRzID0gKDAsIF9jaGVja2JveF9zaG93Y2hhcnRzLnVzZVNob3dDaGFydHMpKCksCiAgICAgIF91c2VTaG93Q2hhcnRzMiA9IF9zbGljZWRUb0FycmF5KF91c2VTaG93Q2hhcnRzLCAxKSwKICAgICAgc2hvd0NoYXJ0cyA9IF91c2VTaG93Q2hhcnRzMlswXTsKCiAgdmFyIF91c2VUYWJsZUludGVydmFsID0gKDAsIF9zZWxlY3RfaW50ZXJ2YWwudXNlVGFibGVJbnRlcnZhbCkoKSwKICAgICAgX3VzZVRhYmxlSW50ZXJ2YWwyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVRhYmxlSW50ZXJ2YWwsIDEpLAogICAgICB0YWJsZUludGVydmFsID0gX3VzZVRhYmxlSW50ZXJ2YWwyWzBdOwoKICB2YXIgX3VzZVRhYmxlU2V2ZXJpdHkgPSAoMCwgX3NlbGVjdF9zZXZlcml0eS51c2VUYWJsZVNldmVyaXR5KSgpLAogICAgICBfdXNlVGFibGVTZXZlcml0eTIgPSBfc2xpY2VkVG9BcnJheShfdXNlVGFibGVTZXZlcml0eSwgMSksCiAgICAgIHRhYmxlU2V2ZXJpdHkgPSBfdXNlVGFibGVTZXZlcml0eTJbMF07CgogIHZhciBfdXNlU3dpbWxhbmVMaW1pdCA9ICgwLCBfc2VsZWN0X2xpbWl0LnVzZVN3aW1sYW5lTGltaXQpKCksCiAgICAgIF91c2VTd2ltbGFuZUxpbWl0MiA9IF9zbGljZWRUb0FycmF5KF91c2VTd2ltbGFuZUxpbWl0LCAxKSwKICAgICAgc3dpbWxhbmVMaW1pdCA9IF91c2VTd2ltbGFuZUxpbWl0MlswXTsKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIF9leHBsb3Jlcl9kYXNoYm9hcmRfc2VydmljZS5leHBsb3JlclNlcnZpY2Uuc2V0U3dpbWxhbmVMaW1pdChzd2ltbGFuZUxpbWl0KTsKICB9LCBbc3dpbWxhbmVMaW1pdF0pOwoKICB2YXIgX3VzZVNlbGVjdGVkQ2VsbHMgPSAoMCwgX3VzZV9zZWxlY3RlZF9jZWxscy51c2VTZWxlY3RlZENlbGxzKSgpLAogICAgICBfdXNlU2VsZWN0ZWRDZWxsczIgPSBfc2xpY2VkVG9BcnJheShfdXNlU2VsZWN0ZWRDZWxscywgMiksCiAgICAgIHNlbGVjdGVkQ2VsbHMgPSBfdXNlU2VsZWN0ZWRDZWxsczJbMF0sCiAgICAgIHNldFNlbGVjdGVkQ2VsbHMgPSBfdXNlU2VsZWN0ZWRDZWxsczJbMV07CgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBfZXhwbG9yZXJfZGFzaGJvYXJkX3NlcnZpY2UuZXhwbG9yZXJTZXJ2aWNlLnNldFNlbGVjdGVkQ2VsbHMoc2VsZWN0ZWRDZWxscyk7CiAgfSwgW0pTT04uc3RyaW5naWZ5KHNlbGVjdGVkQ2VsbHMpXSk7CiAgdmFyIGxvYWRFeHBsb3JlckRhdGFDb25maWcgPSBleHBsb3JlclN0YXRlICE9PSB1bmRlZmluZWQgJiYgewogICAgYm91bmRzOiBleHBsb3JlclN0YXRlLmJvdW5kcywKICAgIGxhc3RSZWZyZXNoOiBsYXN0UmVmcmVzaCwKICAgIGluZmx1ZW5jZXJzRmlsdGVyUXVlcnk6IGV4cGxvcmVyU3RhdGUuaW5mbHVlbmNlcnNGaWx0ZXJRdWVyeSwKICAgIG5vSW5mbHVlbmNlcnNDb25maWd1cmVkOiBleHBsb3JlclN0YXRlLm5vSW5mbHVlbmNlcnNDb25maWd1cmVkLAogICAgc2VsZWN0ZWRDZWxsczogc2VsZWN0ZWRDZWxscywKICAgIHNlbGVjdGVkSm9iczogZXhwbG9yZXJTdGF0ZS5zZWxlY3RlZEpvYnMsCiAgICBzd2ltbGFuZUJ1Y2tldEludGVydmFsOiBleHBsb3JlclN0YXRlLnN3aW1sYW5lQnVja2V0SW50ZXJ2YWwsCiAgICBzd2ltbGFuZUxpbWl0OiBleHBsb3JlclN0YXRlLnN3aW1sYW5lTGltaXQsCiAgICB0YWJsZUludGVydmFsOiB0YWJsZUludGVydmFsLnZhbCwKICAgIHRhYmxlU2V2ZXJpdHk6IHRhYmxlU2V2ZXJpdHkudmFsLAogICAgdmlld0J5U3dpbWxhbmVGaWVsZE5hbWU6IGV4cGxvcmVyU3RhdGUudmlld0J5U3dpbWxhbmVGaWVsZE5hbWUKICB9IHx8IHVuZGVmaW5lZDsKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgbG9hZEV4cGxvcmVyRGF0YShsb2FkRXhwbG9yZXJEYXRhQ29uZmlnKTsKICB9LCBbSlNPTi5zdHJpbmdpZnkobG9hZEV4cGxvcmVyRGF0YUNvbmZpZyldKTsKCiAgaWYgKGV4cGxvcmVyU3RhdGUgPT09IHVuZGVmaW5lZCB8fCByZWZyZXNoID09PSB1bmRlZmluZWQgfHwgc2hvd0NoYXJ0cyA9PT0gdW5kZWZpbmVkKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6ICJtbC1leHBsb3JlciIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9leHBsb3Jlci5FeHBsb3JlciwgewogICAgZXhwbG9yZXJTdGF0ZTogZXhwbG9yZXJTdGF0ZSwKICAgIHNldFNlbGVjdGVkQ2VsbHM6IHNldFNlbGVjdGVkQ2VsbHMsCiAgICBzaG93Q2hhcnRzOiBzaG93Q2hhcnRzLAogICAgc2V2ZXJpdHk6IHRhYmxlU2V2ZXJpdHkudmFsCiAgfSkpOwp9Ow=="},null]}