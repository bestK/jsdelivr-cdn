{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/vis_type_timeseries/public/components/vis_editor_visualization.js","dependencies":[{"path":"src/legacy/core_plugins/vis_type_timeseries/public/components/vis_editor_visualization.js","mtime":1585205040343},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlZpc0VkaXRvclZpc3VhbGl6YXRpb24gPSB2b2lkIDA7Cgp2YXIgX3Byb3BUeXBlcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicHJvcC10eXBlcyIpKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfZ2V0X2ludGVydmFsID0gcmVxdWlyZSgiLi9saWIvZ2V0X2ludGVydmFsIik7Cgp2YXIgX3BhbmVsX3R5cGVzID0gcmVxdWlyZSgiLi4vLi4vY29tbW9uL3BhbmVsX3R5cGVzIik7Cgp2YXIgX2xlZ2FjeSA9IHJlcXVpcmUoIi4uLy4uLy4uL2VtYmVkZGFibGVfYXBpL3B1YmxpYy9ucF9yZWFkeS9wdWJsaWMvbGVnYWN5Iik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OyBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBNSU5fQ0hBUlRfSEVJR0hUID0gMzAwOwoKdmFyIFZpc0VkaXRvclZpc3VhbGl6YXRpb25VSSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoVmlzRWRpdG9yVmlzdWFsaXphdGlvblVJLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gVmlzRWRpdG9yVmlzdWFsaXphdGlvblVJKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZpc0VkaXRvclZpc3VhbGl6YXRpb25VSSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVmlzRWRpdG9yVmlzdWFsaXphdGlvblVJKS5jYWxsKHRoaXMsIHByb3BzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlTW91c2VEb3duIiwgZnVuY3Rpb24gKCkgewogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIF90aGlzLmhhbmRsZU1vdXNlVXApOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGRyYWdnaW5nOiB0cnVlCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlTW91c2VVcCIsIGZ1bmN0aW9uICgpIHsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBfdGhpcy5oYW5kbGVNb3VzZVVwKTsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBkcmFnZ2luZzogZmFsc2UKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVNb3VzZU1vdmUiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgaWYgKF90aGlzLnN0YXRlLmRyYWdnaW5nKSB7CiAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLm1heChNSU5fQ0hBUlRfSEVJR0hULCBwcmV2U3RhdGUuaGVpZ2h0ICsgZXZlbnQubW92ZW1lbnRZKQogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25TaXplSGFuZGxlS2V5RG93biIsIGZ1bmN0aW9uIChldikgewogICAgICB2YXIga2V5Q29kZSA9IGV2LmtleUNvZGU7CgogICAgICBpZiAoa2V5Q29kZSA9PT0gX2V1aS5rZXlDb2Rlcy5VUCB8fCBrZXlDb2RlID09PSBfZXVpLmtleUNvZGVzLkRPV04pIHsKICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAocHJldlN0YXRlKSB7CiAgICAgICAgICB2YXIgbmV3SGVpZ2h0ID0gcHJldlN0YXRlLmhlaWdodCArIChrZXlDb2RlID09PSBfZXVpLmtleUNvZGVzLlVQID8gLTE1IDogMTUpOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLm1heChNSU5fQ0hBUlRfSEVJR0hULCBuZXdIZWlnaHQpCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKCiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgaGVpZ2h0OiBNSU5fQ0hBUlRfSEVJR0hULAogICAgICBkcmFnZ2luZzogZmFsc2UsCiAgICAgIHBhbmVsSW50ZXJ2YWw6IDAKICAgIH07CiAgICBfdGhpcy5fdmlzRWwgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVSZWYoKTsKICAgIF90aGlzLl9zdWJzY3JpcHRpb24gPSBudWxsOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFZpc0VkaXRvclZpc3VhbGl6YXRpb25VSSwgW3sKICAgIGtleTogIl9sb2FkVmlzdWFsaXphdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2xvYWRWaXN1YWxpemF0aW9uKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRwcm9wcywgdGltZVJhbmdlLCBzYXZlZE9iaiwgb25EYXRhQ2hhbmdlOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfbG9hZFZpc3VhbGl6YXRpb24kKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICh0aGlzLl92aXNFbC5jdXJyZW50KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgX3RoaXMkcHJvcHMgPSB0aGlzLnByb3BzLCB0aW1lUmFuZ2UgPSBfdGhpcyRwcm9wcy50aW1lUmFuZ2UsIHNhdmVkT2JqID0gX3RoaXMkcHJvcHMuc2F2ZWRPYmosIG9uRGF0YUNoYW5nZSA9IF90aGlzJHByb3BzLm9uRGF0YUNoYW5nZTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKF9sZWdhY3kuc3RhcnQuZ2V0RW1iZWRkYWJsZUZhY3RvcnkoJ3Zpc3VhbGl6YXRpb24nKS5jcmVhdGVGcm9tT2JqZWN0KHNhdmVkT2JqLCB7CiAgICAgICAgICAgICAgICB2aXM6IHt9LAogICAgICAgICAgICAgICAgdGltZVJhbmdlOiB0aW1lUmFuZ2UsCiAgICAgICAgICAgICAgICBmaWx0ZXJzOiBbXQogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuX2hhbmRsZXIucmVuZGVyKHRoaXMuX3Zpc0VsLmN1cnJlbnQpKTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb24gPSB0aGlzLl9oYW5kbGVyLmhhbmRsZXIuZGF0YSQuc3Vic2NyaWJlKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICBfdGhpczIuc2V0UGFuZWxJbnRlcnZhbChkYXRhLnZhbHVlLnZpc0RhdGEpOwoKICAgICAgICAgICAgICAgIG9uRGF0YUNoYW5nZShkYXRhLnZhbHVlKTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0UGFuZWxJbnRlcnZhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UGFuZWxJbnRlcnZhbCh2aXNEYXRhKSB7CiAgICAgIHZhciBwYW5lbEludGVydmFsID0gKDAsIF9nZXRfaW50ZXJ2YWwuZ2V0SW50ZXJ2YWwpKHZpc0RhdGEsIHRoaXMucHJvcHMubW9kZWwpOwoKICAgICAgaWYgKHRoaXMuc3RhdGUucGFuZWxJbnRlcnZhbCAhPT0gcGFuZWxJbnRlcnZhbCkgewogICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgcGFuZWxJbnRlcnZhbDogcGFuZWxJbnRlcnZhbAogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJlc2l6ZSB0aGUgY2hhcnQgaGVpZ2h0IHdoZW4gcHJlc3NpbmcgdXAvZG93biB3aGlsZSB0aGUgZHJhZyBoYW5kbGUKICAgICAqIGZvciByZXNpemluZyBoYXMgdGhlIGZvY3VzLgogICAgICogV2UgdXNlIDE1cHggc3RlcHMgdG8gZG8gdGhlIHNjYWxpbmcgYW5kIG1ha2Ugc3VyZSB0aGUgY2hhcnQgaGFzIGF0IGxlYXN0IGl0cwogICAgICogZGVmaW5lZCBtaW5pbXVtIHdpZHRoIChNSU5fQ0hBUlRfSEVJR0hUKS4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJoYXNTaG93UGFuZWxJbnRlcnZhbFZhbHVlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNTaG93UGFuZWxJbnRlcnZhbFZhbHVlKCkgewogICAgICB2YXIgdHlwZSA9ICgwLCBfbG9kYXNoLmdldCkodGhpcy5wcm9wcywgJ21vZGVsLnR5cGUnLCAnJyk7CiAgICAgIHZhciBpbnRlcnZhbCA9ICgwLCBfbG9kYXNoLmdldCkodGhpcy5wcm9wcywgJ21vZGVsLmludGVydmFsJywgX2dldF9pbnRlcnZhbC5BVVRPX0lOVEVSVkFMKTsKICAgICAgcmV0dXJuIFtfcGFuZWxfdHlwZXMuUEFORUxfVFlQRVMuTUVUUklDLCBfcGFuZWxfdHlwZXMuUEFORUxfVFlQRVMuVE9QX04sIF9wYW5lbF90eXBlcy5QQU5FTF9UWVBFUy5HQVVHRSwgX3BhbmVsX3R5cGVzLlBBTkVMX1RZUEVTLk1BUktET1dOLCBfcGFuZWxfdHlwZXMuUEFORUxfVFlQRVMuVEFCTEVdLmluY2x1ZGVzKHR5cGUpICYmICgoMCwgX2dldF9pbnRlcnZhbC5pc0F1dG9JbnRlcnZhbCkoaW50ZXJ2YWwpIHx8ICgwLCBfZ2V0X2ludGVydmFsLmlzR3RlSW50ZXJ2YWwpKGludGVydmFsKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Rm9ybWF0dGVkUGFuZWxJbnRlcnZhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkUGFuZWxJbnRlcnZhbCgpIHsKICAgICAgdmFyIGludGVydmFsID0gKDAsIF9nZXRfaW50ZXJ2YWwuY29udmVydEludGVydmFsSW50b1VuaXQpKHRoaXMuc3RhdGUucGFuZWxJbnRlcnZhbCwgZmFsc2UpOwogICAgICByZXR1cm4gaW50ZXJ2YWwgPyAiIi5jb25jYXQoaW50ZXJ2YWwudW5pdFZhbHVlKS5jb25jYXQoaW50ZXJ2YWwudW5pdFN0cmluZykgOiBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuaGFuZGxlTW91c2VNb3ZlKTsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLmhhbmRsZU1vdXNlVXApOwoKICAgICAgaWYgKHRoaXMuX2hhbmRsZXIpIHsKICAgICAgICB0aGlzLl9oYW5kbGVyLmRlc3Ryb3koKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX3N1YnNjcmlwdGlvbikgewogICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUpOwoKICAgICAgdGhpcy5fbG9hZFZpc3VhbGl6YXRpb24oKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRVcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuX2hhbmRsZXIpIHsKICAgICAgICB0aGlzLl9oYW5kbGVyLnVwZGF0ZUlucHV0KHsKICAgICAgICAgIHRpbWVSYW5nZTogdGhpcy5wcm9wcy50aW1lUmFuZ2UsCiAgICAgICAgICBmaWx0ZXJzOiB0aGlzLnByb3BzLmZpbHRlcnMgfHwgW10sCiAgICAgICAgICBxdWVyeTogdGhpcy5wcm9wcy5xdWVyeQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLAogICAgICAgICAgZGlydHkgPSBfdGhpcyRwcm9wczIuZGlydHksCiAgICAgICAgICBhdXRvQXBwbHkgPSBfdGhpcyRwcm9wczIuYXV0b0FwcGx5LAogICAgICAgICAgdGl0bGUgPSBfdGhpcyRwcm9wczIudGl0bGUsCiAgICAgICAgICBkZXNjcmlwdGlvbiA9IF90aGlzJHByb3BzMi5kZXNjcmlwdGlvbiwKICAgICAgICAgIG9uVG9nZ2xlQXV0b0FwcGx5ID0gX3RoaXMkcHJvcHMyLm9uVG9nZ2xlQXV0b0FwcGx5LAogICAgICAgICAgb25Db21taXQgPSBfdGhpcyRwcm9wczIub25Db21taXQ7CiAgICAgIHZhciBzdHlsZSA9IHsKICAgICAgICBoZWlnaHQ6IHRoaXMuc3RhdGUuaGVpZ2h0CiAgICAgIH07CgogICAgICBpZiAodGhpcy5zdGF0ZS5kcmFnZ2luZykgewogICAgICAgIHN0eWxlLnVzZXJTZWxlY3QgPSAnbm9uZSc7CiAgICAgIH0KCiAgICAgIHZhciBwYW5lbEludGVydmFsID0gdGhpcy5oYXNTaG93UGFuZWxJbnRlcnZhbFZhbHVlKCkgJiYgdGhpcy5nZXRGb3JtYXR0ZWRQYW5lbEludGVydmFsKCk7CgogICAgICB2YXIgYXBwbHlNZXNzYWdlID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInZpc1R5cGVUaW1lc2VyaWVzLnZpc0VkaXRvclZpc3VhbGl6YXRpb24uY2hhbmdlc1N1Y2Nlc3NmdWxseUFwcGxpZWRNZXNzYWdlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRoZSBsYXRlc3QgY2hhbmdlcyBoYXZlIGJlZW4gYXBwbGllZC4iCiAgICAgIH0pOwoKICAgICAgaWYgKGRpcnR5KSB7CiAgICAgICAgYXBwbHlNZXNzYWdlID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAidmlzVHlwZVRpbWVzZXJpZXMudmlzRWRpdG9yVmlzdWFsaXphdGlvbi5jaGFuZ2VzSGF2ZU5vdEJlZW5BcHBsaWVkTWVzc2FnZSIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRoZSBjaGFuZ2VzIHRvIHRoaXMgdmlzdWFsaXphdGlvbiBoYXZlIG5vdCBiZWVuIGFwcGxpZWQuIgogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoYXV0b0FwcGx5KSB7CiAgICAgICAgYXBwbHlNZXNzYWdlID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAidmlzVHlwZVRpbWVzZXJpZXMudmlzRWRpdG9yVmlzdWFsaXphdGlvbi5jaGFuZ2VzV2lsbEJlQXV0b21hdGljYWxseUFwcGxpZWRNZXNzYWdlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVGhlIGNoYW5nZXMgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGFwcGxpZWQuIgogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgYXBwbHlCdXR0b24gPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgICAgY2xhc3NOYW1lOiAidHZiRWRpdG9yVmlzdWFsaXphdGlvbl9fYXBwbHkiLAogICAgICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IHRydWUKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVN3aXRjaCwgewogICAgICAgIGlkOiAidHN2YkF1dG9BcHBseUlucHV0IiwKICAgICAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAidmlzVHlwZVRpbWVzZXJpZXMudmlzRWRpdG9yVmlzdWFsaXphdGlvbi5hdXRvQXBwbHlMYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkF1dG8gYXBwbHkiCiAgICAgICAgfSksCiAgICAgICAgY2hlY2tlZDogYXV0b0FwcGx5LAogICAgICAgIG9uQ2hhbmdlOiBvblRvZ2dsZUF1dG9BcHBseQogICAgICB9KSksIHBhbmVsSW50ZXJ2YWwgJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogZmFsc2UKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIHsKICAgICAgICBjb2xvcjogImRlZmF1bHQiLAogICAgICAgIHNpemU6ICJ4cyIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ2aXNUeXBlVGltZXNlcmllcy52aXNFZGl0b3JWaXN1YWxpemF0aW9uLnBhbmVsSW50ZXJ2YWwiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSW50ZXJ2YWw6IHtwYW5lbEludGVydmFsfSIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBwYW5lbEludGVydmFsOiBwYW5lbEludGVydmFsCiAgICAgICAgfQogICAgICB9KSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogZmFsc2UKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIHsKICAgICAgICBjb2xvcjogZGlydHkgPyAnZGVmYXVsdCcgOiAnc3ViZHVlZCcsCiAgICAgICAgc2l6ZTogInhzIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgYXBwbHlNZXNzYWdlKSkpLCAhYXV0b0FwcGx5ICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICBpY29uVHlwZTogInBsYXkiLAogICAgICAgIGZpbGw6IHRydWUsCiAgICAgICAgc2l6ZTogInMiLAogICAgICAgIG9uQ2xpY2s6IG9uQ29tbWl0LAogICAgICAgIGRpc2FibGVkOiAhZGlydHksCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImFwcGx5QnRuIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAidmlzVHlwZVRpbWVzZXJpZXMudmlzRWRpdG9yVmlzdWFsaXphdGlvbi5hcHBseUNoYW5nZXNMYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBcHBseSBjaGFuZ2VzIgogICAgICB9KSkpKTsKCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGU6IHN0eWxlLAogICAgICAgIGNsYXNzTmFtZTogInR2YkVkaXRvclZpc3VhbGl6YXRpb24iLAogICAgICAgICJkYXRhLXNoYXJlZC1pdGVtcy1jb250YWluZXIiOiB0cnVlLAogICAgICAgICJkYXRhLXRpdGxlIjogdGl0bGUsCiAgICAgICAgImRhdGEtZGVzY3JpcHRpb24iOiBkZXNjcmlwdGlvbiwKICAgICAgICByZWY6IHRoaXMuX3Zpc0VsCiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAidHZiRWRpdG9yLS1oaWRlRm9yUmVwb3J0aW5nIgogICAgICB9LCBhcHBseUJ1dHRvbiwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgIGNsYXNzTmFtZTogInR2YkVkaXRvclZpc3VhbGl6YXRpb25fX2RyYWdoYW5kbGUiLAogICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZU1vdXNlRG93biwKICAgICAgICBvbk1vdXNlVXA6IHRoaXMuaGFuZGxlTW91c2VVcCwKICAgICAgICBvbktleURvd246IHRoaXMub25TaXplSGFuZGxlS2V5RG93biwKICAgICAgICAiYXJpYS1sYWJlbCI6IHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsKICAgICAgICAgIGlkOiAndmlzVHlwZVRpbWVzZXJpZXMuY29sb3JSdWxlcy5hZGp1c3RDaGFydFNpemVBcmlhTGFiZWwnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQcmVzcyB1cC9kb3duIHRvIGFkanVzdCB0aGUgY2hhcnQgc2l6ZScKICAgICAgICB9KQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJpIiwgewogICAgICAgIGNsYXNzTmFtZTogImZhIGZhLWVsbGlwc2lzLWgiCiAgICAgIH0pKSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFZpc0VkaXRvclZpc3VhbGl6YXRpb25VSTsKfShfcmVhY3QuQ29tcG9uZW50KTsKClZpc0VkaXRvclZpc3VhbGl6YXRpb25VSS5wcm9wVHlwZXMgPSB7CiAgbW9kZWw6IF9wcm9wVHlwZXMuZGVmYXVsdC5vYmplY3QsCiAgb25Db21taXQ6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLAogIHVpU3RhdGU6IF9wcm9wVHlwZXMuZGVmYXVsdC5vYmplY3QsCiAgb25Ub2dnbGVBdXRvQXBwbHk6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLAogIHNhdmVkT2JqOiBfcHJvcFR5cGVzLmRlZmF1bHQub2JqZWN0LAogIHRpbWVSYW5nZTogX3Byb3BUeXBlcy5kZWZhdWx0Lm9iamVjdCwKICBkaXJ0eTogX3Byb3BUeXBlcy5kZWZhdWx0LmJvb2wsCiAgYXV0b0FwcGx5OiBfcHJvcFR5cGVzLmRlZmF1bHQuYm9vbAp9Owp2YXIgVmlzRWRpdG9yVmlzdWFsaXphdGlvbiA9ICgwLCBfcmVhY3QyLmluamVjdEkxOG4pKFZpc0VkaXRvclZpc3VhbGl6YXRpb25VSSk7CmV4cG9ydHMuVmlzRWRpdG9yVmlzdWFsaXphdGlvbiA9IFZpc0VkaXRvclZpc3VhbGl6YXRpb247"},null]}