{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/graph/public/state_management/fields.js","dependencies":[{"path":"x-pack/legacy/plugins/graph/public/state_management/fields.js","mtime":1585205044245},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnN5bmNOb2RlU3R5bGVTYWdhID0gZXhwb3J0cy5zeW5jRmllbGRzU2FnYSA9IGV4cG9ydHMudXBkYXRlU2F2ZUJ1dHRvblNhZ2EgPSBleHBvcnRzLmhhc0ZpZWxkc1NlbGVjdG9yID0gZXhwb3J0cy5saXZlUmVzcG9uc2VGaWVsZHNTZWxlY3RvciA9IGV4cG9ydHMuc2VsZWN0ZWRGaWVsZHNTZWxlY3RvciA9IGV4cG9ydHMuZmllbGRzU2VsZWN0b3IgPSBleHBvcnRzLmZpZWxkTWFwU2VsZWN0b3IgPSBleHBvcnRzLmZpZWxkc1JlZHVjZXIgPSBleHBvcnRzLmRlc2VsZWN0RmllbGQgPSBleHBvcnRzLnNlbGVjdEZpZWxkID0gZXhwb3J0cy51cGRhdGVGaWVsZFByb3BlcnRpZXMgPSBleHBvcnRzLmxvYWRGaWVsZHMgPSB2b2lkIDA7Cgp2YXIgX3R5cGVzY3JpcHRGc2EgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInR5cGVzY3JpcHQtZnNhIikpOwoKdmFyIF9kaXN0ID0gcmVxdWlyZSgidHlwZXNjcmlwdC1mc2EtcmVkdWNlcnMvZGlzdCIpOwoKdmFyIF9yZXNlbGVjdCA9IHJlcXVpcmUoInJlc2VsZWN0Iik7Cgp2YXIgX2VmZmVjdHMgPSByZXF1aXJlKCJyZWR1eC1zYWdhL2VmZmVjdHMiKTsKCnZhciBfZ2xvYmFsID0gcmVxdWlyZSgiLi9nbG9iYWwiKTsKCnZhciBfZGF0YXNvdXJjZSA9IHJlcXVpcmUoIi4vZGF0YXNvdXJjZSIpOwoKdmFyIF9oZWxwZXJzID0gcmVxdWlyZSgiLi9oZWxwZXJzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIGFjdGlvbkNyZWF0b3IgPSAoMCwgX3R5cGVzY3JpcHRGc2EuZGVmYXVsdCkoJ3gtcGFjay9ncmFwaC9maWVsZHMnKTsKdmFyIGxvYWRGaWVsZHMgPSBhY3Rpb25DcmVhdG9yKCdMT0FEX0ZJRUxEUycpOwpleHBvcnRzLmxvYWRGaWVsZHMgPSBsb2FkRmllbGRzOwp2YXIgdXBkYXRlRmllbGRQcm9wZXJ0aWVzID0gYWN0aW9uQ3JlYXRvcignVVBEQVRFX0ZJRUxEX1BST1BFUlRJRVMnKTsKZXhwb3J0cy51cGRhdGVGaWVsZFByb3BlcnRpZXMgPSB1cGRhdGVGaWVsZFByb3BlcnRpZXM7CnZhciBzZWxlY3RGaWVsZCA9IGFjdGlvbkNyZWF0b3IoJ1NFTEVDVF9GSUVMRCcpOwpleHBvcnRzLnNlbGVjdEZpZWxkID0gc2VsZWN0RmllbGQ7CnZhciBkZXNlbGVjdEZpZWxkID0gYWN0aW9uQ3JlYXRvcignREVTRUxFQ1RfRklFTEQnKTsKZXhwb3J0cy5kZXNlbGVjdEZpZWxkID0gZGVzZWxlY3RGaWVsZDsKdmFyIGluaXRpYWxGaWVsZHMgPSB7fTsKdmFyIGZpZWxkc1JlZHVjZXIgPSAoMCwgX2Rpc3QucmVkdWNlcldpdGhJbml0aWFsU3RhdGUpKGluaXRpYWxGaWVsZHMpLmNhc2UoX2dsb2JhbC5yZXNldCwgZnVuY3Rpb24gKCkgewogIHJldHVybiBpbml0aWFsRmllbGRzOwp9KS5jYXNlKF9kYXRhc291cmNlLnNldERhdGFzb3VyY2UsIGZ1bmN0aW9uICgpIHsKICByZXR1cm4gaW5pdGlhbEZpZWxkczsKfSkuY2FzZShsb2FkRmllbGRzLCBmdW5jdGlvbiAoX2N1cnJlbnRGaWVsZHMsIG5ld0ZpZWxkcykgewogIHZhciBuZXdGaWVsZE1hcCA9IHt9OwogIG5ld0ZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkgewogICAgbmV3RmllbGRNYXBbZmllbGQubmFtZV0gPSBmaWVsZDsKICB9KTsKICByZXR1cm4gbmV3RmllbGRNYXA7Cn0pLmNhc2UodXBkYXRlRmllbGRQcm9wZXJ0aWVzLCBmdW5jdGlvbiAoZmllbGRzLCBfcmVmKSB7CiAgdmFyIGZpZWxkTmFtZSA9IF9yZWYuZmllbGROYW1lLAogICAgICBmaWVsZFByb3BlcnRpZXMgPSBfcmVmLmZpZWxkUHJvcGVydGllczsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgZmllbGRzLCBfZGVmaW5lUHJvcGVydHkoe30sIGZpZWxkTmFtZSwgX29iamVjdFNwcmVhZCh7fSwgZmllbGRzW2ZpZWxkTmFtZV0sIHt9LCBmaWVsZFByb3BlcnRpZXMpKSk7Cn0pLmNhc2Uoc2VsZWN0RmllbGQsIGZ1bmN0aW9uIChmaWVsZHMsIGZpZWxkTmFtZSkgewogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBmaWVsZHMsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgZmllbGROYW1lLCBfb2JqZWN0U3ByZWFkKHt9LCBmaWVsZHNbZmllbGROYW1lXSwgewogICAgc2VsZWN0ZWQ6IHRydWUKICB9KSkpOwp9KS5jYXNlKGRlc2VsZWN0RmllbGQsIGZ1bmN0aW9uIChmaWVsZHMsIGZpZWxkTmFtZSkgewogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBmaWVsZHMsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgZmllbGROYW1lLCBfb2JqZWN0U3ByZWFkKHt9LCBmaWVsZHNbZmllbGROYW1lXSwgewogICAgc2VsZWN0ZWQ6IGZhbHNlCiAgfSkpKTsKfSkuYnVpbGQoKTsKZXhwb3J0cy5maWVsZHNSZWR1Y2VyID0gZmllbGRzUmVkdWNlcjsKCnZhciBmaWVsZE1hcFNlbGVjdG9yID0gZnVuY3Rpb24gZmllbGRNYXBTZWxlY3RvcihzdGF0ZSkgewogIHJldHVybiBzdGF0ZS5maWVsZHM7Cn07CgpleHBvcnRzLmZpZWxkTWFwU2VsZWN0b3IgPSBmaWVsZE1hcFNlbGVjdG9yOwp2YXIgZmllbGRzU2VsZWN0b3IgPSAoMCwgX3Jlc2VsZWN0LmNyZWF0ZVNlbGVjdG9yKShmaWVsZE1hcFNlbGVjdG9yLCBmdW5jdGlvbiAoZmllbGRzKSB7CiAgcmV0dXJuIE9iamVjdC52YWx1ZXMoZmllbGRzKTsKfSk7CmV4cG9ydHMuZmllbGRzU2VsZWN0b3IgPSBmaWVsZHNTZWxlY3RvcjsKdmFyIHNlbGVjdGVkRmllbGRzU2VsZWN0b3IgPSAoMCwgX3Jlc2VsZWN0LmNyZWF0ZVNlbGVjdG9yKShmaWVsZHNTZWxlY3RvciwgZnVuY3Rpb24gKGZpZWxkcykgewogIHJldHVybiBmaWVsZHMuZmlsdGVyKGZ1bmN0aW9uIChmaWVsZCkgewogICAgcmV0dXJuIGZpZWxkLnNlbGVjdGVkOwogIH0pOwp9KTsKZXhwb3J0cy5zZWxlY3RlZEZpZWxkc1NlbGVjdG9yID0gc2VsZWN0ZWRGaWVsZHNTZWxlY3RvcjsKdmFyIGxpdmVSZXNwb25zZUZpZWxkc1NlbGVjdG9yID0gKDAsIF9yZXNlbGVjdC5jcmVhdGVTZWxlY3Rvcikoc2VsZWN0ZWRGaWVsZHNTZWxlY3RvciwgZnVuY3Rpb24gKGZpZWxkcykgewogIHJldHVybiBmaWVsZHMuZmlsdGVyKGZ1bmN0aW9uIChmaWVsZCkgewogICAgcmV0dXJuIGZpZWxkLmhvcFNpemUgJiYgZmllbGQuaG9wU2l6ZSA+IDA7CiAgfSk7Cn0pOwpleHBvcnRzLmxpdmVSZXNwb25zZUZpZWxkc1NlbGVjdG9yID0gbGl2ZVJlc3BvbnNlRmllbGRzU2VsZWN0b3I7CnZhciBoYXNGaWVsZHNTZWxlY3RvciA9ICgwLCBfcmVzZWxlY3QuY3JlYXRlU2VsZWN0b3IpKHNlbGVjdGVkRmllbGRzU2VsZWN0b3IsIGZ1bmN0aW9uIChmaWVsZHMpIHsKICByZXR1cm4gZmllbGRzLmxlbmd0aCA+IDA7Cn0pOwovKioKICogU2FnYSBtYWtpbmcgbm90aWZ5aW5nIGFuZ3VsYXIgd2hlbiBmaWVsZHMgYXJlIHNlbGVjdGVkIHRvIHJlLWNhbGN1bGF0ZSB0aGUgc3RhdGUgb2YgdGhlIHNhdmUgYnV0dG9uLgogKgogKiBXb24ndCBiZSBuZWNlc3Nhcnkgb25jZSB0aGUgd29ya3NwYWNlIGlzIG1vdmVkIHRvIHJlZHV4CiAqLwoKZXhwb3J0cy5oYXNGaWVsZHNTZWxlY3RvciA9IGhhc0ZpZWxkc1NlbGVjdG9yOwoKdmFyIHVwZGF0ZVNhdmVCdXR0b25TYWdhID0gZnVuY3Rpb24gdXBkYXRlU2F2ZUJ1dHRvblNhZ2EoX3JlZjIpIHsKICB2YXIgX21hcmtlZCA9CiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKG5vdGlmeSk7CgogIHZhciBub3RpZnlBbmd1bGFyID0gX3JlZjIubm90aWZ5QW5ndWxhcjsKCiAgZnVuY3Rpb24gbm90aWZ5KCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIG5vdGlmeSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIG5vdGlmeUFuZ3VsYXIoKTsKCiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX21hcmtlZCk7CiAgfQoKICByZXR1cm4gKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gKDAsIF9lZmZlY3RzLnRha2VMYXRlc3QpKCgwLCBfaGVscGVycy5tYXRjaGVzT25lKShzZWxlY3RGaWVsZCwgZGVzZWxlY3RGaWVsZCksIG5vdGlmeSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pCiAgKTsKfTsKLyoqCiAqIFNhZ2EgbWFraW5nIHN1cmUgdGhlIGZpZWxkcyBpbiB0aGUgc3RvcmUgYXJlIGFsd2F5cyBzeW5jZWQgd2l0aCB0aGUgZmllbGRzCiAqIGtub3duIHRvIHRoZSB3b3Jrc3BhY2UuCiAqCiAqIFdvbid0IGJlIG5lY2Vzc2FyeSBvbmNlIHRoZSB3b3Jrc3BhY2UgaXMgbW92ZWQgdG8gcmVkdXgKICovCgoKZXhwb3J0cy51cGRhdGVTYXZlQnV0dG9uU2FnYSA9IHVwZGF0ZVNhdmVCdXR0b25TYWdhOwoKdmFyIHN5bmNGaWVsZHNTYWdhID0gZnVuY3Rpb24gc3luY0ZpZWxkc1NhZ2EoX3JlZjMpIHsKICB2YXIgX21hcmtlZDIgPQogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhzeW5jRmllbGRzKTsKCiAgdmFyIGdldFdvcmtzcGFjZSA9IF9yZWYzLmdldFdvcmtzcGFjZSwKICAgICAgc2V0TGl2ZVJlc3BvbnNlRmllbGRzID0gX3JlZjMuc2V0TGl2ZVJlc3BvbnNlRmllbGRzOwoKICBmdW5jdGlvbiBzeW5jRmllbGRzKCkgewogICAgdmFyIHdvcmtzcGFjZSwgY3VycmVudFN0YXRlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIHN5bmNGaWVsZHMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB3b3Jrc3BhY2UgPSBnZXRXb3Jrc3BhY2UoKTsKCiAgICAgICAgICAgIGlmICh3b3Jrc3BhY2UpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuICgwLCBfZWZmZWN0cy5zZWxlY3QpKCk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgd29ya3NwYWNlLm9wdGlvbnMudmVydGV4X2ZpZWxkcyA9IHNlbGVjdGVkRmllbGRzU2VsZWN0b3IoY3VycmVudFN0YXRlKTsKICAgICAgICAgICAgc2V0TGl2ZVJlc3BvbnNlRmllbGRzKGxpdmVSZXNwb25zZUZpZWxkc1NlbGVjdG9yKGN1cnJlbnRTdGF0ZSkpOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX21hcmtlZDIpOwogIH0KCiAgcmV0dXJuICgKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gKDAsIF9lZmZlY3RzLnRha2VFdmVyeSkoKDAsIF9oZWxwZXJzLm1hdGNoZXNPbmUpKGxvYWRGaWVsZHMsIHNlbGVjdEZpZWxkLCBkZXNlbGVjdEZpZWxkLCB1cGRhdGVGaWVsZFByb3BlcnRpZXMpLCBzeW5jRmllbGRzKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pCiAgKTsKfTsKLyoqCiAqIFNhZ2EgbWFraW5nIHN1cmUgdGhlIGZpZWxkIHN0eWxlcyAoaWNvbnMgYW5kIGNvbG9ycykgYXJlIGFwcGxpZWQgdG8gbm9kZXMgY3VycmVudGx5IGFjdGl2ZQogKiBpbiB0aGUgd29ya3NwYWNlLgogKgogKiBXb24ndCBiZSBuZWNlc3Nhcnkgb25jZSB0aGUgd29ya3NwYWNlIGlzIG1vdmVkIHRvIHJlZHV4CiAqLwoKCmV4cG9ydHMuc3luY0ZpZWxkc1NhZ2EgPSBzeW5jRmllbGRzU2FnYTsKCnZhciBzeW5jTm9kZVN0eWxlU2FnYSA9IGZ1bmN0aW9uIHN5bmNOb2RlU3R5bGVTYWdhKF9yZWY0KSB7CiAgdmFyIF9tYXJrZWQzID0KICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoc3luY05vZGVTdHlsZSk7CgogIHZhciBnZXRXb3Jrc3BhY2UgPSBfcmVmNC5nZXRXb3Jrc3BhY2UsCiAgICAgIG5vdGlmeUFuZ3VsYXIgPSBfcmVmNC5ub3RpZnlBbmd1bGFyOwoKICBmdW5jdGlvbiBzeW5jTm9kZVN0eWxlKGFjdGlvbikgewogICAgdmFyIHdvcmtzcGFjZSwgbmV3Q29sb3IsIG5ld0ljb24sIHNlbGVjdGVkRmllbGRzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIHN5bmNOb2RlU3R5bGUkKF9jb250ZXh0NSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB3b3Jrc3BhY2UgPSBnZXRXb3Jrc3BhY2UoKTsKCiAgICAgICAgICAgIGlmICh3b3Jrc3BhY2UpIHsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIG5ld0NvbG9yID0gYWN0aW9uLnBheWxvYWQuZmllbGRQcm9wZXJ0aWVzLmNvbG9yOwoKICAgICAgICAgICAgaWYgKG5ld0NvbG9yKSB7CiAgICAgICAgICAgICAgd29ya3NwYWNlLm5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgICAgIGlmIChub2RlLmRhdGEuZmllbGQgPT09IGFjdGlvbi5wYXlsb2FkLmZpZWxkTmFtZSkgewogICAgICAgICAgICAgICAgICBub2RlLmNvbG9yID0gbmV3Q29sb3I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5ld0ljb24gPSBhY3Rpb24ucGF5bG9hZC5maWVsZFByb3BlcnRpZXMuaWNvbjsKCiAgICAgICAgICAgIGlmIChuZXdJY29uKSB7CiAgICAgICAgICAgICAgd29ya3NwYWNlLm5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgICAgIGlmIChub2RlLmRhdGEuZmllbGQgPT09IGFjdGlvbi5wYXlsb2FkLmZpZWxkTmFtZSkgewogICAgICAgICAgICAgICAgICBub2RlLmljb24gPSBuZXdJY29uOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBub3RpZnlBbmd1bGFyKCk7CiAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IHNlbGVjdGVkRmllbGRzU2VsZWN0b3I7CiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTE7CiAgICAgICAgICAgIHJldHVybiAoMCwgX2VmZmVjdHMuc2VsZWN0KSgpOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIF9jb250ZXh0NS50MSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICBzZWxlY3RlZEZpZWxkcyA9ICgwLCBfY29udGV4dDUudDApKF9jb250ZXh0NS50MSk7CiAgICAgICAgICAgIHdvcmtzcGFjZS5vcHRpb25zLnZlcnRleF9maWVsZHMgPSBzZWxlY3RlZEZpZWxkczsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfbWFya2VkMyk7CiAgfQoKICByZXR1cm4gKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQ2KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiAoMCwgX2VmZmVjdHMudGFrZUxhdGVzdCkodXBkYXRlRmllbGRQcm9wZXJ0aWVzLm1hdGNoLCBzeW5jTm9kZVN0eWxlKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pCiAgKTsKfTsKCmV4cG9ydHMuc3luY05vZGVTdHlsZVNhZ2EgPSBzeW5jTm9kZVN0eWxlU2FnYTs="},null]}