{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/tile_map/public/tile_map_visualization.js","dependencies":[{"path":"src/legacy/core_plugins/tile_map/public/tile_map_visualization.js","mtime":1585205040103},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmNyZWF0ZVRpbGVNYXBWaXN1YWxpemF0aW9uID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfZ2VvaGFzaF9sYXllciA9IHJlcXVpcmUoIi4vZ2VvaGFzaF9sYXllciIpOwoKdmFyIF9iYXNlX21hcHNfdmlzdWFsaXphdGlvbiA9IHJlcXVpcmUoIi4vYmFzZV9tYXBzX3Zpc3VhbGl6YXRpb24iKTsKCnZhciBfdG9vbHRpcF9mb3JtYXR0ZXIgPSByZXF1aXJlKCIuL2VkaXRvcnMvX3Rvb2x0aXBfZm9ybWF0dGVyIik7Cgp2YXIgX25ld19wbGF0Zm9ybSA9IHJlcXVpcmUoInVpL25ld19wbGF0Zm9ybSIpOwoKdmFyIF91dGlsaXRpZXMgPSByZXF1aXJlKCIuLi8uLi8uLi91aS9wdWJsaWMvdmlzdWFsaXplL2xvYWRlci9waXBlbGluZV9oZWxwZXJzL3V0aWxpdGllcyIpOwoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKSB7IGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gInVuZGVmaW5lZCIgJiYgUmVmbGVjdC5nZXQpIHsgX2dldCA9IFJlZmxlY3QuZ2V0OyB9IGVsc2UgeyBfZ2V0ID0gZnVuY3Rpb24gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcikgeyB2YXIgYmFzZSA9IF9zdXBlclByb3BCYXNlKHRhcmdldCwgcHJvcGVydHkpOyBpZiAoIWJhc2UpIHJldHVybjsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGJhc2UsIHByb3BlcnR5KTsgaWYgKGRlc2MuZ2V0KSB7IHJldHVybiBkZXNjLmdldC5jYWxsKHJlY2VpdmVyKTsgfSByZXR1cm4gZGVzYy52YWx1ZTsgfTsgfSByZXR1cm4gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlciB8fCB0YXJnZXQpOyB9CgpmdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QsIHByb3BlcnR5KSB7IHdoaWxlICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7IG9iamVjdCA9IF9nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAob2JqZWN0ID09PSBudWxsKSBicmVhazsgfSByZXR1cm4gb2JqZWN0OyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKdmFyIGNyZWF0ZVRpbGVNYXBWaXN1YWxpemF0aW9uID0gZnVuY3Rpb24gY3JlYXRlVGlsZU1hcFZpc3VhbGl6YXRpb24oX3JlZikgewogIHZhciBzZXJ2aWNlU2V0dGluZ3MgPSBfcmVmLnNlcnZpY2VTZXR0aW5ncywKICAgICAgJGluamVjdG9yID0gX3JlZi4kaW5qZWN0b3I7CiAgdmFyIEJhc2VNYXBzVmlzdWFsaXphdGlvbiA9IG5ldyBfYmFzZV9tYXBzX3Zpc3VhbGl6YXRpb24uQmFzZU1hcHNWaXN1YWxpemF0aW9uUHJvdmlkZXIoc2VydmljZVNldHRpbmdzKTsKICB2YXIgdG9vbHRpcEZvcm1hdHRlciA9IG5ldyBfdG9vbHRpcF9mb3JtYXR0ZXIuVGlsZU1hcFRvb2x0aXBGb3JtYXR0ZXJQcm92aWRlcigkaW5qZWN0b3IpOwogIHJldHVybiAoCiAgICAvKiNfX1BVUkVfXyovCiAgICBmdW5jdGlvbiAoX0Jhc2VNYXBzVmlzdWFsaXphdGlvKSB7CiAgICAgIF9pbmhlcml0cyhDb29yZGluYXRlTWFwc1Zpc3VhbGl6YXRpb24sIF9CYXNlTWFwc1Zpc3VhbGl6YXRpbyk7CgogICAgICBmdW5jdGlvbiBDb29yZGluYXRlTWFwc1Zpc3VhbGl6YXRpb24oZWxlbWVudCwgdmlzKSB7CiAgICAgICAgdmFyIF90aGlzOwoKICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29vcmRpbmF0ZU1hcHNWaXN1YWxpemF0aW9uKTsKCiAgICAgICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoQ29vcmRpbmF0ZU1hcHNWaXN1YWxpemF0aW9uKS5jYWxsKHRoaXMsIGVsZW1lbnQsIHZpcykpOwogICAgICAgIF90aGlzLl9nZW9oYXNoTGF5ZXIgPSBudWxsOwogICAgICAgIHJldHVybiBfdGhpczsKICAgICAgfQoKICAgICAgX2NyZWF0ZUNsYXNzKENvb3JkaW5hdGVNYXBzVmlzdWFsaXphdGlvbiwgW3sKICAgICAgICBrZXk6ICJfbWFrZUtpYmFuYU1hcCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9tYWtlS2liYW5hTWFwKCkgewogICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgICAgdmFyIHVwZGF0ZUdlb2hhc2hBZ2csIHVpU3RhdGUsIHByZXZpb3VzUHJlY2lzaW9uLCBwcmVjaXNpb25DaGFuZ2U7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9tYWtlS2liYW5hTWFwJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX2dldChfZ2V0UHJvdG90eXBlT2YoQ29vcmRpbmF0ZU1hcHNWaXN1YWxpemF0aW9uLnByb3RvdHlwZSksICJfbWFrZUtpYmFuYU1hcCIsIHRoaXMpLmNhbGwodGhpcykpOwoKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgdXBkYXRlR2VvaGFzaEFnZyA9IGZ1bmN0aW9uIHVwZGF0ZUdlb2hhc2hBZ2coKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGdlb2hhc2hBZ2cgPSBfdGhpczIuX2dldEdlb0hhc2hBZ2coKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZW9oYXNoQWdnKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgZ2VvaGFzaEFnZy5wYXJhbXMubWFwQm91bmRzID0gX3RoaXMyLl9raWJhbmFNYXAuZ2V0Qm91bmRzKCk7CiAgICAgICAgICAgICAgICAgICAgZ2VvaGFzaEFnZy5wYXJhbXMubWFwWm9vbSA9IF90aGlzMi5fa2liYW5hTWFwLmdldFpvb21MZXZlbCgpOwogICAgICAgICAgICAgICAgICAgIGdlb2hhc2hBZ2cucGFyYW1zLm1hcENlbnRlciA9IF90aGlzMi5fa2liYW5hTWFwLmdldENlbnRlcigpOwogICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgdXBkYXRlR2VvaGFzaEFnZygpOwogICAgICAgICAgICAgICAgICB1aVN0YXRlID0gdGhpcy52aXMuZ2V0VWlTdGF0ZSgpOwogICAgICAgICAgICAgICAgICB1aVN0YXRlLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAocHJvcCkgewogICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSAnbWFwWm9vbScgfHwgcHJvcCA9PT0gJ21hcENlbnRlcicpIHsKICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUdlb2hhc2hBZ2coKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBwcmV2aW91c1ByZWNpc2lvbiA9IHRoaXMuX2tpYmFuYU1hcC5nZXRHZW9oYXNoUHJlY2lzaW9uKCk7CiAgICAgICAgICAgICAgICAgIHByZWNpc2lvbkNoYW5nZSA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLm9uKCd6b29tY2hhbmdlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBnZW9oYXNoQWdnID0gX3RoaXMyLl9nZXRHZW9IYXNoQWdnKCk7CgogICAgICAgICAgICAgICAgICAgIHByZWNpc2lvbkNoYW5nZSA9IHByZXZpb3VzUHJlY2lzaW9uICE9PSBfdGhpczIuX2tpYmFuYU1hcC5nZXRHZW9oYXNoUHJlY2lzaW9uKCk7CiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNQcmVjaXNpb24gPSBfdGhpczIuX2tpYmFuYU1hcC5nZXRHZW9oYXNoUHJlY2lzaW9uKCk7CgogICAgICAgICAgICAgICAgICAgIGlmICghZ2VvaGFzaEFnZykgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzQXV0b1ByZWNpc2lvbiA9IHR5cGVvZiBnZW9oYXNoQWdnLnBhcmFtcy5hdXRvUHJlY2lzaW9uID09PSAnYm9vbGVhbicgPyBnZW9oYXNoQWdnLnBhcmFtcy5hdXRvUHJlY2lzaW9uIDogdHJ1ZTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXV0b1ByZWNpc2lvbikgewogICAgICAgICAgICAgICAgICAgICAgZ2VvaGFzaEFnZy5wYXJhbXMucHJlY2lzaW9uID0gcHJldmlvdXNQcmVjaXNpb247CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5vbignem9vbWVuZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvaGFzaEFnZyA9IF90aGlzMi5fZ2V0R2VvSGFzaEFnZygpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoIWdlb2hhc2hBZ2cpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBpc0F1dG9QcmVjaXNpb24gPSB0eXBlb2YgZ2VvaGFzaEFnZy5wYXJhbXMuYXV0b1ByZWNpc2lvbiA9PT0gJ2Jvb2xlYW4nID8gZ2VvaGFzaEFnZy5wYXJhbXMuYXV0b1ByZWNpc2lvbiA6IHRydWU7CgogICAgICAgICAgICAgICAgICAgIGlmICghaXNBdXRvUHJlY2lzaW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAocHJlY2lzaW9uQ2hhbmdlKSB7CiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVHZW9oYXNoQWdnKCk7CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnZpcy51cGRhdGVTdGF0ZSgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAvL3doZW4gd2UgZmlsdGVyIHF1ZXJpZXMgYnkgY29sbGFyCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuX3VwZGF0ZURhdGEoX3RoaXMyLl9nZW9Kc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLmFkZERyYXdDb250cm9sKCk7CgogICAgICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAub24oJ2RyYXdDcmVhdGVkOnJlY3RhbmdsZScsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgIHZhciBnZW9oYXNoQWdnID0gX3RoaXMyLl9nZXRHZW9IYXNoQWdnKCk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMi5hZGRTcGF0aWFsRmlsdGVyKGdlb2hhc2hBZ2csICdnZW9fYm91bmRpbmdfYm94JywgZXZlbnQuYm91bmRzKTsKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAub24oJ2RyYXdDcmVhdGVkOnBvbHlnb24nLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvaGFzaEFnZyA9IF90aGlzMi5fZ2V0R2VvSGFzaEFnZygpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczIuYWRkU3BhdGlhbEZpbHRlcihnZW9oYXNoQWdnLCAnZ2VvX3BvbHlnb24nLCB7CiAgICAgICAgICAgICAgICAgICAgICBwb2ludHM6IGV2ZW50LnBvaW50cwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIl91cGRhdGVEYXRhIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZURhdGEoZ2VvanNvbkZlYXR1cmVDb2xsZWN0aW9uQW5kTWV0YSkgewogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfdXBkYXRlRGF0YSQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMuX2dldE1hcHNQYXJhbXMoKS5tYXBUeXBlICE9PSAnSGVhdG1hcCcgJiYgZ2VvanNvbkZlYXR1cmVDb2xsZWN0aW9uQW5kTWV0YSA9PT0gdGhpcy5fZ2VvSnNvbkZlYXR1cmVDb2xsZWN0aW9uQW5kTWV0YSkpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9nZW9oYXNoTGF5ZXIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAucmVtb3ZlTGF5ZXIodGhpcy5fZ2VvaGFzaExheWVyKTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2VvaGFzaExheWVyID0gbnVsbDsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKGdlb2pzb25GZWF0dXJlQ29sbGVjdGlvbkFuZE1ldGEpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHRoaXMuX2dlb0pzb25GZWF0dXJlQ29sbGVjdGlvbkFuZE1ldGEgPSBudWxsOwoKICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLnJlbW92ZUxheWVyKHRoaXMuX2dlb2hhc2hMYXllcik7CgogICAgICAgICAgICAgICAgICB0aGlzLl9nZW9oYXNoTGF5ZXIgPSBudWxsOwogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICB0aGlzLl9nZW9Kc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhID0gZ2VvanNvbkZlYXR1cmVDb2xsZWN0aW9uQW5kTWV0YTsKCiAgICAgICAgICAgICAgICAgIHRoaXMuX3JlY3JlYXRlR2VvaGFzaExheWVyKCk7CgogICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3JlY3JlYXRlR2VvaGFzaExheWVyIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlY3JlYXRlR2VvaGFzaExheWVyKCkgewogICAgICAgICAgaWYgKHRoaXMuX2dlb2hhc2hMYXllcikgewogICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAucmVtb3ZlTGF5ZXIodGhpcy5fZ2VvaGFzaExheWVyKTsKCiAgICAgICAgICAgIHRoaXMuX2dlb2hhc2hMYXllciA9IG51bGw7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGdlb2hhc2hPcHRpb25zID0gdGhpcy5fZ2V0R2VvaGFzaE9wdGlvbnMoKTsKCiAgICAgICAgICB0aGlzLl9nZW9oYXNoTGF5ZXIgPSBuZXcgX2dlb2hhc2hfbGF5ZXIuR2VvaGFzaExheWVyKHRoaXMuX2dlb0pzb25GZWF0dXJlQ29sbGVjdGlvbkFuZE1ldGEuZmVhdHVyZUNvbGxlY3Rpb24sIHRoaXMuX2dlb0pzb25GZWF0dXJlQ29sbGVjdGlvbkFuZE1ldGEubWV0YSwgZ2VvaGFzaE9wdGlvbnMsIHRoaXMuX2tpYmFuYU1hcC5nZXRab29tTGV2ZWwoKSwgdGhpcy5fa2liYW5hTWFwKTsKCiAgICAgICAgICB0aGlzLl9raWJhbmFNYXAuYWRkTGF5ZXIodGhpcy5fZ2VvaGFzaExheWVyKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfdXBkYXRlUGFyYW1zIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZVBhcmFtcygpIHsKICAgICAgICAgIHZhciBnZW9oYXNoT3B0aW9uczsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX3VwZGF0ZVBhcmFtcyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfZ2V0KF9nZXRQcm90b3R5cGVPZihDb29yZGluYXRlTWFwc1Zpc3VhbGl6YXRpb24ucHJvdG90eXBlKSwgIl91cGRhdGVQYXJhbXMiLCB0aGlzKS5jYWxsKHRoaXMpKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5zZXREZXNhdHVyYXRlQmFzZUxheWVyKHRoaXMuX3BhcmFtcy5pc0Rlc2F0dXJhdGVkKTsgLy9hdm9pZCByZWNyZWF0aW5nIHRoZSBsZWFmbGV0IGxheWVyIHdoZW4gdGhlcmUgYXJlIG9wdGlvbi1jaGFuZ2VzIHRoYXQgZG8gbm90IGVmZmVjdCB0aGUgcmVwcmVzZW50YXRpb24KICAgICAgICAgICAgICAgICAgLy9lLmcuIHRvb2x0aXAtdmlzaWJpbGl0eSwgbGVnZW5kIHBvc2l0aW9uLCBiYXNlbWFwLWRlc2F0dXJhdGlvbiwgLi4uCgoKICAgICAgICAgICAgICAgICAgZ2VvaGFzaE9wdGlvbnMgPSB0aGlzLl9nZXRHZW9oYXNoT3B0aW9ucygpOwoKICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9nZW9oYXNoTGF5ZXIgfHwgIXRoaXMuX2dlb2hhc2hMYXllci5pc1JldXNhYmxlKGdlb2hhc2hPcHRpb25zKSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9nZW9Kc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWNyZWF0ZUdlb2hhc2hMYXllcigpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlRGF0YSh0aGlzLl9nZW9Kc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX2dldEdlb2hhc2hPcHRpb25zIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldEdlb2hhc2hPcHRpb25zKCkgewogICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHRoaXMuX2dldE1hcHNQYXJhbXMoKTsKCiAgICAgICAgICB2YXIgbWV0cmljRGltZW5zaW9uID0gdGhpcy5fcGFyYW1zLmRpbWVuc2lvbnMubWV0cmljOwogICAgICAgICAgdmFyIG1ldHJpY0xhYmVsID0gbWV0cmljRGltZW5zaW9uID8gbWV0cmljRGltZW5zaW9uLmxhYmVsIDogJyc7CiAgICAgICAgICB2YXIgbWV0cmljRm9ybWF0ID0gKDAsIF91dGlsaXRpZXMuZ2V0Rm9ybWF0KShtZXRyaWNEaW1lbnNpb24gJiYgbWV0cmljRGltZW5zaW9uLmZvcm1hdCk7CiAgICAgICAgICB2YXIgYm91bmRUb29sdGlwRm9ybWF0dGVyID0gdG9vbHRpcEZvcm1hdHRlci5iaW5kKG51bGwsIG1ldHJpY0xhYmVsLCBtZXRyaWNGb3JtYXQuZ2V0Q29udmVydGVyRm9yKCd0ZXh0JykpOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbGFiZWw6IG1ldHJpY0xhYmVsLAogICAgICAgICAgICB2YWx1ZUZvcm1hdHRlcjogdGhpcy5fZ2VvSnNvbkZlYXR1cmVDb2xsZWN0aW9uQW5kTWV0YSA/IG1ldHJpY0Zvcm1hdC5nZXRDb252ZXJ0ZXJGb3IoJ3RleHQnKSA6IG51bGwsCiAgICAgICAgICAgIHRvb2x0aXBGb3JtYXR0ZXI6IHRoaXMuX2dlb0pzb25GZWF0dXJlQ29sbGVjdGlvbkFuZE1ldGEgPyBib3VuZFRvb2x0aXBGb3JtYXR0ZXIgOiBudWxsLAogICAgICAgICAgICBtYXBUeXBlOiBuZXdQYXJhbXMubWFwVHlwZSwKICAgICAgICAgICAgaXNGaWx0ZXJlZEJ5Q29sbGFyOiB0aGlzLl9pc0ZpbHRlcmVkQnlDb2xsYXIoKSwKICAgICAgICAgICAgZmV0Y2hCb3VuZHM6IGZ1bmN0aW9uIGZldGNoQm91bmRzKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczMudmlzLkFQSS5nZXRHZW9oYXNoQm91bmRzKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzIChlbGFzdGljL2tpYmFuYSMzMDU5MykKICAgICAgICAgICAgY29sb3JSYW1wOiBuZXdQYXJhbXMuY29sb3JTY2hlbWEsCiAgICAgICAgICAgIGhlYXRtYXA6IHsKICAgICAgICAgICAgICBoZWF0Q2x1c3RlclNpemU6IG5ld1BhcmFtcy5oZWF0Q2x1c3RlclNpemUKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJhZGRTcGF0aWFsRmlsdGVyIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkU3BhdGlhbEZpbHRlcihhZ2csIGZpbHRlck5hbWUsIGZpbHRlckRhdGEpIHsKICAgICAgICAgIGlmICghYWdnKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgaW5kZXhQYXR0ZXJuTmFtZSA9IGFnZy5nZXRJbmRleFBhdHRlcm4oKS5pZDsKICAgICAgICAgIHZhciBmaWVsZCA9IGFnZy5maWVsZE5hbWUoKTsKICAgICAgICAgIHZhciBmaWx0ZXIgPSB7CiAgICAgICAgICAgIG1ldGE6IHsKICAgICAgICAgICAgICBuZWdhdGU6IGZhbHNlLAogICAgICAgICAgICAgIGluZGV4OiBpbmRleFBhdHRlcm5OYW1lCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICBmaWx0ZXJbZmlsdGVyTmFtZV0gPSB7CiAgICAgICAgICAgIGlnbm9yZV91bm1hcHBlZDogdHJ1ZQogICAgICAgICAgfTsKICAgICAgICAgIGZpbHRlcltmaWx0ZXJOYW1lXVtmaWVsZF0gPSBmaWx0ZXJEYXRhOwogICAgICAgICAgdmFyIGZpbHRlck1hbmFnZXIgPSBfbmV3X3BsYXRmb3JtLm5wU3RhcnQucGx1Z2lucy5kYXRhLnF1ZXJ5LmZpbHRlck1hbmFnZXI7CiAgICAgICAgICBmaWx0ZXJNYW5hZ2VyLmFkZEZpbHRlcnMoW2ZpbHRlcl0pOwogICAgICAgICAgdGhpcy52aXMudXBkYXRlU3RhdGUoKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfZ2V0R2VvSGFzaEFnZyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRHZW9IYXNoQWdnKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMudmlzLmdldEFnZ0NvbmZpZygpLmFnZ3MuZmluZChmdW5jdGlvbiAoYWdnKSB7CiAgICAgICAgICAgIHJldHVybiAoMCwgX2xvZGFzaC5nZXQpKGFnZywgJ3R5cGUuZHNsTmFtZScpID09PSAnZ2VvaGFzaF9ncmlkJzsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIl9pc0ZpbHRlcmVkQnlDb2xsYXIiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNGaWx0ZXJlZEJ5Q29sbGFyKCkgewogICAgICAgICAgdmFyIERFRkFVTFQgPSBmYWxzZTsKCiAgICAgICAgICB2YXIgYWdnID0gdGhpcy5fZ2V0R2VvSGFzaEFnZygpOwoKICAgICAgICAgIGlmIChhZ2cpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBfbG9kYXNoLmdldCkoYWdnLCAncGFyYW1zLmlzRmlsdGVyZWRCeUNvbGxhcicsIERFRkFVTFQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIERFRkFVTFQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9XSk7CgogICAgICByZXR1cm4gQ29vcmRpbmF0ZU1hcHNWaXN1YWxpemF0aW9uOwogICAgfShCYXNlTWFwc1Zpc3VhbGl6YXRpb24pCiAgKTsKfTsKCmV4cG9ydHMuY3JlYXRlVGlsZU1hcFZpc3VhbGl6YXRpb24gPSBjcmVhdGVUaWxlTWFwVmlzdWFsaXphdGlvbjs="},null]}