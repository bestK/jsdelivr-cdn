{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/jobs/components/custom_url_editor/utils.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/jobs/components/custom_url_editor/utils.js","mtime":1585205045772},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmdldE5ld0N1c3RvbVVybERlZmF1bHRzID0gZ2V0TmV3Q3VzdG9tVXJsRGVmYXVsdHM7CmV4cG9ydHMuZ2V0UXVlcnlFbnRpdHlGaWVsZE5hbWVzID0gZ2V0UXVlcnlFbnRpdHlGaWVsZE5hbWVzOwpleHBvcnRzLmlzVmFsaWRDdXN0b21VcmxTZXR0aW5nc1RpbWVSYW5nZSA9IGlzVmFsaWRDdXN0b21VcmxTZXR0aW5nc1RpbWVSYW5nZTsKZXhwb3J0cy5pc1ZhbGlkQ3VzdG9tVXJsU2V0dGluZ3MgPSBpc1ZhbGlkQ3VzdG9tVXJsU2V0dGluZ3M7CmV4cG9ydHMuYnVpbGRDdXN0b21VcmxGcm9tU2V0dGluZ3MgPSBidWlsZEN1c3RvbVVybEZyb21TZXR0aW5nczsKZXhwb3J0cy5nZXRUZXN0VXJsID0gZ2V0VGVzdFVybDsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi9jb25zdGFudHMiKTsKCnZhciBfY2hyb21lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJ1aS9jaHJvbWUiKSk7Cgp2YXIgX3Jpc29uTm9kZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmlzb24tbm9kZSIpKTsKCnZhciBfaW5kZXhfcGF0dGVybnMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi9jb21tb24vY29uc3RhbnRzL2luZGV4X3BhdHRlcm5zIik7Cgp2YXIgX2pvYl91dGlscyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uL2NvbW1vbi91dGlsL2pvYl91dGlscyIpOwoKdmFyIF9wYXJzZV9pbnRlcnZhbCA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uL2NvbW1vbi91dGlsL3BhcnNlX2ludGVydmFsIik7Cgp2YXIgX2N1c3RvbV91cmxfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi8uLi91dGlsL2N1c3RvbV91cmxfdXRpbHMiKTsKCnZhciBfbWxfYXBpX3NlcnZpY2UgPSByZXF1aXJlKCIuLi8uLi8uLi9zZXJ2aWNlcy9tbF9hcGlfc2VydmljZSIpOwoKdmFyIF9qb2Jfc2VydmljZSA9IHJlcXVpcmUoIi4uLy4uLy4uL3NlcnZpY2VzL2pvYl9zZXJ2aWNlIik7Cgp2YXIgX3N0cmluZ191dGlscyA9IHJlcXVpcmUoIi4uLy4uLy4uL3V0aWwvc3RyaW5nX3V0aWxzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIGdldE5ld0N1c3RvbVVybERlZmF1bHRzKGpvYiwgZGFzaGJvYXJkcywgaW5kZXhQYXR0ZXJucykgewogIC8vIFJldHVybnMgdGhlIHNldHRpbmdzIG9iamVjdCBpbiB0aGUgZm9ybWF0IHVzZWQgYnkgdGhlIGN1c3RvbSBVUkwgZWRpdG9yCiAgLy8gZm9yIGEgbmV3IGN1c3RvbSBVUkwuCiAgdmFyIGtpYmFuYVNldHRpbmdzID0gewogICAgcXVlcnlGaWVsZE5hbWVzOiBbXQogIH07IC8vIFNldCB0aGUgZGVmYXVsdCB0eXBlLgoKICB2YXIgdXJsVHlwZSA9IF9jb25zdGFudHMuVVJMX1RZUEUuT1RIRVI7CgogIGlmIChkYXNoYm9hcmRzICE9PSB1bmRlZmluZWQgJiYgZGFzaGJvYXJkcy5sZW5ndGggPiAwKSB7CiAgICB1cmxUeXBlID0gX2NvbnN0YW50cy5VUkxfVFlQRS5LSUJBTkFfREFTSEJPQVJEOwogICAga2liYW5hU2V0dGluZ3MuZGFzaGJvYXJkSWQgPSBkYXNoYm9hcmRzWzBdLmlkOwogIH0gZWxzZSBpZiAoaW5kZXhQYXR0ZXJucyAhPT0gdW5kZWZpbmVkICYmIGluZGV4UGF0dGVybnMubGVuZ3RoID4gMCkgewogICAgdXJsVHlwZSA9IF9jb25zdGFudHMuVVJMX1RZUEUuS0lCQU5BX0RJU0NPVkVSOwogIH0gLy8gRm9yIHRoZSBEaXNjb3ZlciBvcHRpb24sIHNldCB0aGUgZGVmYXVsdCBpbmRleCBwYXR0ZXJuIHRvIHRoYXQKICAvLyB3aGljaCBtYXRjaGVzIHRoZSAoZmlyc3QpIGluZGV4IGNvbmZpZ3VyZWQgaW4gdGhlIGpvYiBkYXRhZmVlZC4KCgogIHZhciBkYXRhZmVlZENvbmZpZyA9IGpvYi5kYXRhZmVlZF9jb25maWc7CgogIGlmIChpbmRleFBhdHRlcm5zICE9PSB1bmRlZmluZWQgJiYgaW5kZXhQYXR0ZXJucy5sZW5ndGggPiAwICYmIGRhdGFmZWVkQ29uZmlnICE9PSB1bmRlZmluZWQgJiYgZGF0YWZlZWRDb25maWcuaW5kaWNlcyAhPT0gdW5kZWZpbmVkICYmIGRhdGFmZWVkQ29uZmlnLmluZGljZXMubGVuZ3RoID4gMCkgewogICAgdmFyIGRhdGFmZWVkSW5kZXggPSBkYXRhZmVlZENvbmZpZy5pbmRpY2VzWzBdOwogICAgdmFyIGRlZmF1bHRJbmRleFBhdHRlcm4gPSBpbmRleFBhdHRlcm5zLmZpbmQoZnVuY3Rpb24gKGluZGV4UGF0dGVybikgewogICAgICByZXR1cm4gaW5kZXhQYXR0ZXJuLnRpdGxlID09PSBkYXRhZmVlZEluZGV4OwogICAgfSk7CgogICAgaWYgKGRlZmF1bHRJbmRleFBhdHRlcm4gPT09IHVuZGVmaW5lZCkgewogICAgICBkZWZhdWx0SW5kZXhQYXR0ZXJuID0gaW5kZXhQYXR0ZXJuc1swXTsKICAgIH0KCiAgICBraWJhbmFTZXR0aW5ncy5kaXNjb3ZlckluZGV4UGF0dGVybklkID0gZGVmYXVsdEluZGV4UGF0dGVybi5pZDsKICB9CgogIHJldHVybiB7CiAgICBsYWJlbDogJycsCiAgICB0eXBlOiB1cmxUeXBlLAogICAgLy8gTm90ZSB0aW1lUmFuZ2UgaXMgb25seSBlZGl0YWJsZSBpbiBuZXcgVVJMcyBmb3IgRGFzaGJvYXJkIGFuZCBEaXNjb3ZlciBVUkxzLAogICAgLy8gYXMgZm9yIG90aGVyIFVSTHMgd2UgaGF2ZSBubyB3YXkgb2Yga25vd2luZyBob3cgdGhlIGZpZWxkIHdpbGwgYmUgdXNlZCBpbiB0aGUgVVJMLgogICAgdGltZVJhbmdlOiB7CiAgICAgIHR5cGU6IF9jb25zdGFudHMuVElNRV9SQU5HRV9UWVBFLkFVVE8sCiAgICAgIGludGVydmFsOiAnJwogICAgfSwKICAgIGtpYmFuYVNldHRpbmdzOiBraWJhbmFTZXR0aW5ncywKICAgIG90aGVyVXJsU2V0dGluZ3M6IHsKICAgICAgdXJsVmFsdWU6ICcnCiAgICB9CiAgfTsKfQoKZnVuY3Rpb24gZ2V0UXVlcnlFbnRpdHlGaWVsZE5hbWVzKGpvYikgewogIC8vIFJldHVybnMgdGhlIGxpc3Qgb2YgcGFydGl0aW9uaW5nIGFuZCBpbmZsdWVuY2VyIGZpZWxkIG5hbWVzIHRoYXQgY2FuIGJlIHVzZWQKICAvLyBhcyBlbnRpdGllcyB0byBhZGQgdG8gdGhlIHF1ZXJ5IHVzZWQgd2hlbiBsaW5raW5nIHRvIGEgS2liYW5hIGRhc2hib2FyZCBvciBEaXNjb3Zlci4KICB2YXIgaW5mbHVlbmNlcnMgPSBqb2IuYW5hbHlzaXNfY29uZmlnLmluZmx1ZW5jZXJzOwogIHZhciBkZXRlY3RvcnMgPSBqb2IuYW5hbHlzaXNfY29uZmlnLmRldGVjdG9yczsKICB2YXIgZW50aXR5RmllbGROYW1lcyA9IFtdOwoKICBpZiAoaW5mbHVlbmNlcnMgIT09IHVuZGVmaW5lZCkgewogICAgZW50aXR5RmllbGROYW1lcy5wdXNoLmFwcGx5KGVudGl0eUZpZWxkTmFtZXMsIF90b0NvbnN1bWFibGVBcnJheShpbmZsdWVuY2VycykpOwogIH0KCiAgZGV0ZWN0b3JzLmZvckVhY2goZnVuY3Rpb24gKGRldGVjdG9yLCBkZXRlY3RvckluZGV4KSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCiAgICB2YXIgcGFydGl0aW9uaW5nRmllbGRzID0gKDAsIF9qb2JfdXRpbHMuZ2V0UGFydGl0aW9uaW5nRmllbGROYW1lcykoam9iLCBkZXRlY3RvckluZGV4KTsKICAgIHBhcnRpdGlvbmluZ0ZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZE5hbWUpIHsKICAgICAgaWYgKGVudGl0eUZpZWxkTmFtZXMuaW5kZXhPZihmaWVsZE5hbWUpID09PSAtMSkgewogICAgICAgIGVudGl0eUZpZWxkTmFtZXMucHVzaChmaWVsZE5hbWUpOwogICAgICB9CiAgICB9KTsKICB9KTsKICByZXR1cm4gZW50aXR5RmllbGROYW1lczsKfQoKZnVuY3Rpb24gaXNWYWxpZEN1c3RvbVVybFNldHRpbmdzVGltZVJhbmdlKHRpbWVSYW5nZVNldHRpbmdzKSB7CiAgaWYgKHRpbWVSYW5nZVNldHRpbmdzLnR5cGUgPT09IF9jb25zdGFudHMuVElNRV9SQU5HRV9UWVBFLklOVEVSVkFMKSB7CiAgICB2YXIgaW50ZXJ2YWwgPSAoMCwgX3BhcnNlX2ludGVydmFsLnBhcnNlSW50ZXJ2YWwpKHRpbWVSYW5nZVNldHRpbmdzLmludGVydmFsKTsKICAgIHJldHVybiBpbnRlcnZhbCAhPT0gbnVsbDsKICB9CgogIHJldHVybiB0cnVlOwp9CgpmdW5jdGlvbiBpc1ZhbGlkQ3VzdG9tVXJsU2V0dGluZ3Moc2V0dGluZ3MsIHNhdmVkQ3VzdG9tVXJscykgewogIHZhciBpc1ZhbGlkID0gKDAsIF9jdXN0b21fdXJsX3V0aWxzLmlzVmFsaWRMYWJlbCkoc2V0dGluZ3MubGFiZWwsIHNhdmVkQ3VzdG9tVXJscyk7CgogIGlmIChpc1ZhbGlkID09PSB0cnVlKSB7CiAgICBpc1ZhbGlkID0gaXNWYWxpZEN1c3RvbVVybFNldHRpbmdzVGltZVJhbmdlKHNldHRpbmdzLnRpbWVSYW5nZSk7CiAgfQoKICByZXR1cm4gaXNWYWxpZDsKfQoKZnVuY3Rpb24gYnVpbGRDdXN0b21VcmxGcm9tU2V0dGluZ3Moc2V0dGluZ3MpIHsKICAvLyBEYXNoYm9hcmQgVVJMIHJldHVybnMgYSBQcm9taXNlIGFzIGEgcXVlcnkgaXMgbWFkZSB0byBvYnRhaW4gdGhlIGZ1bGwgZGFzaGJvYXJkIGNvbmZpZy4KICAvLyBTbyB3cmFwIHRoZSBvdGhlciB0d28gcmV0dXJuIHR5cGVzIGluIGEgUHJvbWlzZSBmb3IgY29uc2lzdGVudCByZXR1cm4gdHlwZS4KICBpZiAoc2V0dGluZ3MudHlwZSA9PT0gX2NvbnN0YW50cy5VUkxfVFlQRS5LSUJBTkFfREFTSEJPQVJEKSB7CiAgICByZXR1cm4gYnVpbGREYXNoYm9hcmRVcmxGcm9tU2V0dGluZ3Moc2V0dGluZ3MpOwogIH0gZWxzZSBpZiAoc2V0dGluZ3MudHlwZSA9PT0gX2NvbnN0YW50cy5VUkxfVFlQRS5LSUJBTkFfRElTQ09WRVIpIHsKICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYnVpbGREaXNjb3ZlclVybEZyb21TZXR0aW5ncyhzZXR0aW5ncykpOwogIH0gZWxzZSB7CiAgICB2YXIgdXJsVG9BZGQgPSB7CiAgICAgIHVybF9uYW1lOiBzZXR0aW5ncy5sYWJlbCwKICAgICAgdXJsX3ZhbHVlOiBzZXR0aW5ncy5vdGhlclVybFNldHRpbmdzLnVybFZhbHVlCiAgICB9OwogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1cmxUb0FkZCk7CiAgfQp9CgpmdW5jdGlvbiBidWlsZERhc2hib2FyZFVybEZyb21TZXR0aW5ncyhzZXR0aW5ncykgewogIC8vIEdldCB0aGUgY29tcGxldGUgbGlzdCBvZiBhdHRyaWJ1dGVzIGZvciB0aGUgc2VsZWN0ZWQgZGFzaGJvYXJkIChxdWVyeSwgZmlsdGVycykuCiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciBfc2V0dGluZ3Mka2liYW5hU2V0dGkgPSBzZXR0aW5ncy5raWJhbmFTZXR0aW5ncywKICAgICAgICBkYXNoYm9hcmRJZCA9IF9zZXR0aW5ncyRraWJhbmFTZXR0aS5kYXNoYm9hcmRJZCwKICAgICAgICBxdWVyeUZpZWxkTmFtZXMgPSBfc2V0dGluZ3Mka2liYW5hU2V0dGkucXVlcnlGaWVsZE5hbWVzOwoKICAgIHZhciBzYXZlZE9iamVjdHNDbGllbnQgPSBfY2hyb21lLmRlZmF1bHQuZ2V0U2F2ZWRPYmplY3RzQ2xpZW50KCk7CgogICAgc2F2ZWRPYmplY3RzQ2xpZW50LmdldCgnZGFzaGJvYXJkJywgZGFzaGJvYXJkSWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIC8vIFVzZSB0aGUgZmlsdGVycyBmcm9tIHRoZSBzYXZlZCBkYXNoYm9hcmQgaWYgdGhlcmUgYXJlIGFueS4KICAgICAgdmFyIGZpbHRlcnMgPSBbXTsgLy8gVXNlIHRoZSBxdWVyeSBmcm9tIHRoZSBkYXNoYm9hcmQgb25seSBpZiBubyBqb2IgZW50aXRpZXMgYXJlIHNlbGVjdGVkLgoKICAgICAgdmFyIHF1ZXJ5ID0gdW5kZWZpbmVkOwogICAgICB2YXIgc2VhcmNoU291cmNlSlNPTiA9IHJlc3BvbnNlLmdldCgna2liYW5hU2F2ZWRPYmplY3RNZXRhLnNlYXJjaFNvdXJjZUpTT04nKTsKCiAgICAgIGlmIChzZWFyY2hTb3VyY2VKU09OICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB2YXIgc2VhcmNoU291cmNlRGF0YSA9IEpTT04ucGFyc2Uoc2VhcmNoU291cmNlSlNPTik7CgogICAgICAgIGlmIChzZWFyY2hTb3VyY2VEYXRhLmZpbHRlciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBmaWx0ZXJzID0gc2VhcmNoU291cmNlRGF0YS5maWx0ZXI7CiAgICAgICAgfQoKICAgICAgICBxdWVyeSA9IHNlYXJjaFNvdXJjZURhdGEucXVlcnk7CiAgICAgIH0gLy8gQWRkIHRpbWUgc2V0dGluZ3MgdG8gdGhlIGdsb2JhbCBzdGF0ZSBVUkwgcGFyYW1ldGVyIHdpdGggJGVhcmxpZXN0JCBhbmQKICAgICAgLy8gJGxhdGVzdCQgdG9rZW5zIHdoaWNoIGdldCBzdWJzdGl0dXRlZCBmb3IgdGltZXMgYXJvdW5kIHRoZSB0aW1lIG9mIHRoZQogICAgICAvLyBhbm9tYWx5IG9uIHdoaWNoIHRoZSBVUkwgd2lsbCBiZSBydW4gYWdhaW5zdC4KCgogICAgICB2YXIgX2cgPSBfcmlzb25Ob2RlLmRlZmF1bHQuZW5jb2RlKHsKICAgICAgICB0aW1lOiB7CiAgICAgICAgICBmcm9tOiAnJGVhcmxpZXN0JCcsCiAgICAgICAgICB0bzogJyRsYXRlc3QkJywKICAgICAgICAgIG1vZGU6ICdhYnNvbHV0ZScKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgdmFyIGFwcFN0YXRlID0gewogICAgICAgIGZpbHRlcnM6IGZpbHRlcnMKICAgICAgfTsgLy8gVG8gcHV0IGVudGl0aWVzIGluIGZpbHRlcnMgc2VjdGlvbiB3b3VsZCBpbnZvbHZlIGNyZWF0aW5nIHBhcmFtZXRlcnMgb2YgdGhlIGZvcm0KICAgICAgLy8gZmlsdGVyczohKCgnJHN0YXRlJzooc3RvcmU6YXBwU3RhdGUpLG1ldGE6KGFsaWFzOiFuLGRpc2FibGVkOiFmLGluZGV4OmIzMGZkMzQwLWVmYjQtMTFlNy1hNjAwLTBmNThiMTQyMmI4NywKICAgICAgLy8ga2V5OmFpcmxpbmUsbmVnYXRlOiFmLHBhcmFtczoocXVlcnk6QUFMLHR5cGU6cGhyYXNlKSx0eXBlOnBocmFzZSx2YWx1ZTpBQUwpLHF1ZXJ5OihtYXRjaDooYWlybGluZToocXVlcnk6QUFMLHR5cGU6cGhyYXNlKSkpKSkKICAgICAgLy8gd2hpY2ggaW5jbHVkZXMgdGhlIElEIG9mIHRoZSBpbmRleCBob2xkaW5nIHRoZSBmaWVsZCB1c2VkIGluIHRoZSBmaWx0ZXIuCiAgICAgIC8vIFNvIGZvciBzaW1wbGljaXR5LCBwdXQgZW50aXRpZXMgaW4gdGhlIHF1ZXJ5LCByZXBsYWNpbmcgYW55IHF1ZXJ5IHdoaWNoIGlzIHRoZXJlIGFscmVhZHkuCiAgICAgIC8vIGUuZy4gcXVlcnk6KGxhbmd1YWdlOmt1ZXJ5LHF1ZXJ5OidyZWdpb246dXMtZWFzdC0xJTIwYW5kJTIwaW5zdGFuY2U6aS0yMGQwNjFmYScpCgogICAgICB2YXIgcXVlcnlGcm9tRW50aXR5RmllbGROYW1lcyA9IGJ1aWxkQXBwU3RhdGVRdWVyeVBhcmFtKHF1ZXJ5RmllbGROYW1lcyk7CgogICAgICBpZiAocXVlcnlGcm9tRW50aXR5RmllbGROYW1lcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcXVlcnkgPSBxdWVyeUZyb21FbnRpdHlGaWVsZE5hbWVzOwogICAgICB9CgogICAgICBpZiAocXVlcnkgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGFwcFN0YXRlLnF1ZXJ5ID0gcXVlcnk7CiAgICAgIH0KCiAgICAgIHZhciBfYSA9IF9yaXNvbk5vZGUuZGVmYXVsdC5lbmNvZGUoYXBwU3RhdGUpOwoKICAgICAgdmFyIHVybFZhbHVlID0gImtpYmFuYSMvZGFzaGJvYXJkLyIuY29uY2F0KGRhc2hib2FyZElkLCAiP19nPSIpLmNvbmNhdChfZywgIiZfYT0iKS5jb25jYXQoX2EpOwogICAgICB2YXIgdXJsVG9BZGQgPSB7CiAgICAgICAgdXJsX25hbWU6IHNldHRpbmdzLmxhYmVsLAogICAgICAgIHVybF92YWx1ZTogdXJsVmFsdWUsCiAgICAgICAgdGltZV9yYW5nZTogX2NvbnN0YW50cy5USU1FX1JBTkdFX1RZUEUuQVVUTwogICAgICB9OwoKICAgICAgaWYgKHNldHRpbmdzLnRpbWVSYW5nZS50eXBlID09PSBfY29uc3RhbnRzLlRJTUVfUkFOR0VfVFlQRS5JTlRFUlZBTCkgewogICAgICAgIHVybFRvQWRkLnRpbWVfcmFuZ2UgPSBzZXR0aW5ncy50aW1lUmFuZ2UuaW50ZXJ2YWw7CiAgICAgIH0KCiAgICAgIHJlc29sdmUodXJsVG9BZGQpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgcmVqZWN0KHJlc3ApOwogICAgfSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIGJ1aWxkRGlzY292ZXJVcmxGcm9tU2V0dGluZ3Moc2V0dGluZ3MpIHsKICB2YXIgX3NldHRpbmdzJGtpYmFuYVNldHRpMiA9IHNldHRpbmdzLmtpYmFuYVNldHRpbmdzLAogICAgICBkaXNjb3ZlckluZGV4UGF0dGVybklkID0gX3NldHRpbmdzJGtpYmFuYVNldHRpMi5kaXNjb3ZlckluZGV4UGF0dGVybklkLAogICAgICBxdWVyeUZpZWxkTmFtZXMgPSBfc2V0dGluZ3Mka2liYW5hU2V0dGkyLnF1ZXJ5RmllbGROYW1lczsgLy8gQWRkIHRpbWUgc2V0dGluZ3MgdG8gdGhlIGdsb2JhbCBzdGF0ZSBVUkwgcGFyYW1ldGVyIHdpdGggJGVhcmxpZXN0JCBhbmQKICAvLyAkbGF0ZXN0JCB0b2tlbnMgd2hpY2ggZ2V0IHN1YnN0aXR1dGVkIGZvciB0aW1lcyBhcm91bmQgdGhlIHRpbWUgb2YgdGhlCiAgLy8gYW5vbWFseSBvbiB3aGljaCB0aGUgVVJMIHdpbGwgYmUgcnVuIGFnYWluc3QuCgogIHZhciBfZyA9IF9yaXNvbk5vZGUuZGVmYXVsdC5lbmNvZGUoewogICAgdGltZTogewogICAgICBmcm9tOiAnJGVhcmxpZXN0JCcsCiAgICAgIHRvOiAnJGxhdGVzdCQnLAogICAgICBtb2RlOiAnYWJzb2x1dGUnCiAgICB9CiAgfSk7IC8vIEFkZCB0aGUgaW5kZXggcGF0dGVybiBhbmQgcXVlcnkgdG8gdGhlIGFwcFN0YXRlIHBhcnQgb2YgdGhlIFVSTC4KCgogIHZhciBhcHBTdGF0ZSA9IHsKICAgIGluZGV4OiBkaXNjb3ZlckluZGV4UGF0dGVybklkCiAgfTsgLy8gSWYgcGFydGl0aW9uaW5nIGZpZWxkIGVudGl0aWVzIGhhdmUgYmVlbiBjb25maWd1cmVkIGFkZCB0b2tlbnMKICAvLyB0byB0aGUgVVJMIHRvIHVzZSBpbiB0aGUgRGlzY292ZXIgcGFnZSBzZWFyY2guCiAgLy8gSWRlYWxseSB3ZSB3b3VsZCBwdXQgZW50aXRpZXMgaW4gdGhlIGZpbHRlcnMgc2VjdGlvbiwgYnV0IGN1cnJlbnRseSB0aGlzIGludm9sdmVzIGNyZWF0aW5nIHBhcmFtZXRlcnMgb2YgdGhlIGZvcm0KICAvLyBmaWx0ZXJzOiEoKCckc3RhdGUnOihzdG9yZTphcHBTdGF0ZSksbWV0YTooYWxpYXM6IW4sZGlzYWJsZWQ6IWYsaW5kZXg6YjMwZmQzNDAtZWZiNC0xMWU3LWE2MDAtMGY1OGIxNDIyYjg3LAogIC8vIGtleTphaXJsaW5lLG5lZ2F0ZTohZixwYXJhbXM6KHF1ZXJ5OkFBTCx0eXBlOnBocmFzZSksdHlwZTpwaHJhc2UsdmFsdWU6QUFMKSxxdWVyeToobWF0Y2g6KGFpcmxpbmU6KHF1ZXJ5OkFBTCx0eXBlOnBocmFzZSkpKSkpCiAgLy8gd2hpY2ggaW5jbHVkZXMgdGhlIElEIG9mIHRoZSBpbmRleCBob2xkaW5nIHRoZSBmaWVsZCB1c2VkIGluIHRoZSBmaWx0ZXIuCiAgLy8gU28gZm9yIHNpbXBsaWNpdHksIHB1dCBlbnRpdGllcyBpbiB0aGUgcXVlcnksIHJlcGxhY2luZyBhbnkgcXVlcnkgd2hpY2ggaXMgdGhlcmUgYWxyZWFkeS4KICAvLyBlLmcuIHF1ZXJ5OihsYW5ndWFnZTprdWVyeSxxdWVyeToncmVnaW9uOnVzLWVhc3QtMSUyMGFuZCUyMGluc3RhbmNlOmktMjBkMDYxZmEnKQoKICB2YXIgcXVlcnlGcm9tRW50aXR5RmllbGROYW1lcyA9IGJ1aWxkQXBwU3RhdGVRdWVyeVBhcmFtKHF1ZXJ5RmllbGROYW1lcyk7CgogIGlmIChxdWVyeUZyb21FbnRpdHlGaWVsZE5hbWVzICE9PSB1bmRlZmluZWQpIHsKICAgIGFwcFN0YXRlLnF1ZXJ5ID0gcXVlcnlGcm9tRW50aXR5RmllbGROYW1lczsKICB9CgogIHZhciBfYSA9IF9yaXNvbk5vZGUuZGVmYXVsdC5lbmNvZGUoYXBwU3RhdGUpOwoKICB2YXIgdXJsVmFsdWUgPSAia2liYW5hIy9kaXNjb3Zlcj9fZz0iLmNvbmNhdChfZywgIiZfYT0iKS5jb25jYXQoX2EpOwogIHZhciB1cmxUb0FkZCA9IHsKICAgIHVybF9uYW1lOiBzZXR0aW5ncy5sYWJlbCwKICAgIHVybF92YWx1ZTogdXJsVmFsdWUsCiAgICB0aW1lX3JhbmdlOiBfY29uc3RhbnRzLlRJTUVfUkFOR0VfVFlQRS5BVVRPCiAgfTsKCiAgaWYgKHNldHRpbmdzLnRpbWVSYW5nZS50eXBlID09PSBfY29uc3RhbnRzLlRJTUVfUkFOR0VfVFlQRS5JTlRFUlZBTCkgewogICAgdXJsVG9BZGQudGltZV9yYW5nZSA9IHNldHRpbmdzLnRpbWVSYW5nZS5pbnRlcnZhbDsKICB9CgogIHJldHVybiB1cmxUb0FkZDsKfSAvLyBCdWlsZHMgdGhlIHF1ZXJ5IHBhcmFtZXRlciBmb3IgdXNlIGluIHRoZSBfYSBBcHBTdGF0ZSBwYXJ0IG9mIGEgS2liYW5hIERhc2hib2FyZCBvciBEaXNjb3ZlciBVUkwuCgoKZnVuY3Rpb24gYnVpbGRBcHBTdGF0ZVF1ZXJ5UGFyYW0ocXVlcnlGaWVsZE5hbWVzKSB7CiAgdmFyIHF1ZXJ5UGFyYW07CgogIGlmIChxdWVyeUZpZWxkTmFtZXMgIT09IHVuZGVmaW5lZCAmJiBxdWVyeUZpZWxkTmFtZXMubGVuZ3RoID4gMCkgewogICAgdmFyIHF1ZXJ5U3RyaW5nID0gJyc7CiAgICBxdWVyeUZpZWxkTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGROYW1lLCBpKSB7CiAgICAgIGlmIChpID4gMCkgewogICAgICAgIHF1ZXJ5U3RyaW5nICs9ICcgYW5kICc7CiAgICAgIH0KCiAgICAgIHF1ZXJ5U3RyaW5nICs9ICIiLmNvbmNhdCgoMCwgX3N0cmluZ191dGlscy5lc2NhcGVGb3JFbGFzdGljc2VhcmNoUXVlcnkpKGZpZWxkTmFtZSksICI6XCIkIikuY29uY2F0KGZpZWxkTmFtZSwgIiRcIiIpOwogICAgfSk7CiAgICBxdWVyeVBhcmFtID0gewogICAgICBsYW5ndWFnZTogJ2t1ZXJ5JywKICAgICAgcXVlcnk6IHF1ZXJ5U3RyaW5nCiAgICB9OwogIH0KCiAgcmV0dXJuIHF1ZXJ5UGFyYW07Cn0gLy8gQnVpbGRzIHRoZSBmdWxsIFVSTCBmb3IgdGVzdGluZyBvdXQgYSBjdXN0b20gVVJMIGNvbmZpZ3VyYXRpb24sIHdoaWNoCi8vIG1heSBjb250YWluIGRvbGxhciBkZWxpbWl0ZWQgcGFydGl0aW9uIC8gaW5mbHVlbmNlciBlbnRpdHkgdG9rZW5zIGFuZAovLyBkcmlsbGRvd24gdGltZSByYW5nZSBzZXR0aW5ncy4KCgpmdW5jdGlvbiBnZXRUZXN0VXJsKGpvYiwgY3VzdG9tVXJsKSB7CiAgdmFyIHVybFZhbHVlID0gY3VzdG9tVXJsLnVybF92YWx1ZTsKICB2YXIgYnVja2V0U3BhblNlY3MgPSAoMCwgX3BhcnNlX2ludGVydmFsLnBhcnNlSW50ZXJ2YWwpKGpvYi5hbmFseXNpc19jb25maWcuYnVja2V0X3NwYW4pLmFzU2Vjb25kcygpOyAvLyBCeSBkZWZhdWx0LCByZXR1cm4gY29uZmlndXJlZCB1cmxfdmFsdWUuIExvb2sgdG8gc3Vic3RpdHV0ZSBhbnkgZG9sbGFyLWRlbGltaXRlZAogIC8vIHRva2VucyB3aXRoIHZhbHVlcyBmcm9tIHRoZSBoaWdoZXN0IHNjb3JpbmcgYW5vbWFseSwgb3IgaWYgbm8gYW5vbWFsaWVzLCB3aXRoCiAgLy8gdmFsdWVzIGZyb20gYSBkb2N1bWVudCByZXR1cm5lZCBieSB0aGUgc2VhcmNoIGluIHRoZSBqb2IgZGF0YWZlZWQuCgogIHZhciB0ZXN0VXJsID0gY3VzdG9tVXJsLnVybF92YWx1ZTsgLy8gUXVlcnkgdG8gbG9vayBmb3IgdGhlIGhpZ2hlc3Qgc2NvcmluZyBhbm9tYWx5LgoKICB2YXIgYm9keSA9IHsKICAgIHF1ZXJ5OiB7CiAgICAgIGJvb2w6IHsKICAgICAgICBtdXN0OiBbewogICAgICAgICAgdGVybTogewogICAgICAgICAgICBqb2JfaWQ6IGpvYi5qb2JfaWQKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICB0ZXJtOiB7CiAgICAgICAgICAgIHJlc3VsdF90eXBlOiAncmVjb3JkJwogICAgICAgICAgfQogICAgICAgIH1dCiAgICAgIH0KICAgIH0sCiAgICBzaXplOiAxLAogICAgX3NvdXJjZTogewogICAgICBleGNsdWRlczogW10KICAgIH0sCiAgICBzb3J0OiBbewogICAgICByZWNvcmRfc2NvcmU6IHsKICAgICAgICBvcmRlcjogJ2Rlc2MnCiAgICAgIH0KICAgIH1dCiAgfTsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgX21sX2FwaV9zZXJ2aWNlLm1sLmVzU2VhcmNoKHsKICAgICAgaW5kZXg6IF9pbmRleF9wYXR0ZXJucy5NTF9SRVNVTFRTX0lOREVYX1BBVFRFUk4sCiAgICAgIHJlc3RfdG90YWxfaGl0c19hc19pbnQ6IHRydWUsCiAgICAgIGJvZHk6IGJvZHkKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgaWYgKHJlc3AuaGl0cy50b3RhbCA+IDApIHsKICAgICAgICB2YXIgcmVjb3JkID0gcmVzcC5oaXRzLmhpdHNbMF0uX3NvdXJjZTsKICAgICAgICB0ZXN0VXJsID0gKDAsIF9jdXN0b21fdXJsX3V0aWxzLnJlcGxhY2VUb2tlbnNJblVybFZhbHVlKShjdXN0b21VcmwsIGJ1Y2tldFNwYW5TZWNzLCByZWNvcmQsICd0aW1lc3RhbXAnKTsKICAgICAgICByZXNvbHZlKHRlc3RVcmwpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIE5vIGFub21hbGllcyB5ZXQgZm9yIHRoaXMgam9iLCBzbyBkbyBhIHByZXZpZXcgb2YgdGhlIHNlYXJjaAogICAgICAgIC8vIGNvbmZpZ3VyZWQgaW4gdGhlIGpvYiBkYXRhZmVlZCB0byBvYnRhaW4gc2FtcGxlIGRvY3MuCiAgICAgICAgX2pvYl9zZXJ2aWNlLm1sSm9iU2VydmljZS5zZWFyY2hQcmV2aWV3KGpvYikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHZhciB0ZXN0RG9jOwogICAgICAgICAgdmFyIGRvY1RpbWVGaWVsZE5hbWUgPSBqb2IuZGF0YV9kZXNjcmlwdGlvbi50aW1lX2ZpZWxkOyAvLyBIYW5kbGUgZGF0YWZlZWRzIHdoaWNoIHVzZSBhZ2dyZWdhdGlvbnMgb3IgZG9jdW1lbnRzLgoKICAgICAgICAgIGlmIChyZXNwb25zZS5hZ2dyZWdhdGlvbnMpIHsKICAgICAgICAgICAgLy8gQ3JlYXRlIGEgZHVtbXkgb2JqZWN0IHdoaWNoIGNvbnRhaW5zIHRoZSBmaWVsZHMgbmVjZXNzYXJ5IHRvIGJ1aWxkIHRoZSBVUkwuCiAgICAgICAgICAgIHZhciBmaXJzdEJ1Y2tldCA9IHJlc3BvbnNlLmFnZ3JlZ2F0aW9ucy5idWNrZXRzLmJ1Y2tldHNbMF07CiAgICAgICAgICAgIHRlc3REb2MgPSBfZGVmaW5lUHJvcGVydHkoe30sIGRvY1RpbWVGaWVsZE5hbWUsIGZpcnN0QnVja2V0LmtleSk7IC8vIExvb2sgZm9yIGJ1Y2tldCBhZ2dyZWdhdGlvbnMgd2hpY2ggbWF0Y2ggdGhlIHRva2VucyBpbiB0aGUgVVJMLgoKICAgICAgICAgICAgdXJsVmFsdWUucmVwbGFjZSgvXCQoW14/JiRcJyJdezEsNDB9KVwkL2csIGZ1bmN0aW9uIChtYXRjaCwgbmFtZSkgewogICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgICAgICAgICBpZiAobmFtZSAhPT0gJ2VhcmxpZXN0JyAmJiBuYW1lICE9PSAnbGF0ZXN0JyAmJiBmaXJzdEJ1Y2tldFtuYW1lXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB2YXIgdG9rZW5CdWNrZXRzID0gZmlyc3RCdWNrZXRbbmFtZV07CgogICAgICAgICAgICAgICAgaWYgKHRva2VuQnVja2V0cy5idWNrZXRzKSB7CiAgICAgICAgICAgICAgICAgIHRlc3REb2NbbmFtZV0gPSB0b2tlbkJ1Y2tldHMuYnVja2V0c1swXS5rZXk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5oaXRzLnRvdGFsLnZhbHVlID4gMCkgewogICAgICAgICAgICAgIHRlc3REb2MgPSByZXNwb25zZS5oaXRzLmhpdHNbMF0uX3NvdXJjZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0ZXN0RG9jICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgdGVzdFVybCA9ICgwLCBfY3VzdG9tX3VybF91dGlscy5yZXBsYWNlVG9rZW5zSW5VcmxWYWx1ZSkoY3VzdG9tVXJsLCBidWNrZXRTcGFuU2VjcywgdGVzdERvYywgZG9jVGltZUZpZWxkTmFtZSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmVzb2x2ZSh0ZXN0VXJsKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgcmVqZWN0KHJlc3ApOwogICAgfSk7CiAgfSk7Cn0="},null]}