{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/jobs/jobs_list/components/jobs_list_view/jobs_list_view.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/jobs/jobs_list/components/jobs_list_view/jobs_list_view.js","mtime":1585205045812},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkpvYnNMaXN0VmlldyA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9tbF9hcGlfc2VydmljZSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL3NlcnZpY2VzL21sX2FwaV9zZXJ2aWNlIik7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgiLi4vdXRpbHMiKTsKCnZhciBfam9ic19saXN0ID0gcmVxdWlyZSgiLi4vam9ic19saXN0Iik7Cgp2YXIgX2pvYl9kZXRhaWxzID0gcmVxdWlyZSgiLi4vam9iX2RldGFpbHMiKTsKCnZhciBfam9iX2ZpbHRlcl9iYXIgPSByZXF1aXJlKCIuLi9qb2JfZmlsdGVyX2JhciIpOwoKdmFyIF9lZGl0X2pvYl9mbHlvdXQgPSByZXF1aXJlKCIuLi9lZGl0X2pvYl9mbHlvdXQiKTsKCnZhciBfZGVsZXRlX2pvYl9tb2RhbCA9IHJlcXVpcmUoIi4uL2RlbGV0ZV9qb2JfbW9kYWwiKTsKCnZhciBfc3RhcnRfZGF0YWZlZWRfbW9kYWwgPSByZXF1aXJlKCIuLi9zdGFydF9kYXRhZmVlZF9tb2RhbCIpOwoKdmFyIF9jcmVhdGVfd2F0Y2hfZmx5b3V0ID0gcmVxdWlyZSgiLi4vY3JlYXRlX3dhdGNoX2ZseW91dCIpOwoKdmFyIF9tdWx0aV9qb2JfYWN0aW9ucyA9IHJlcXVpcmUoIi4uL211bHRpX2pvYl9hY3Rpb25zIik7Cgp2YXIgX25ld19qb2JfYnV0dG9uID0gcmVxdWlyZSgiLi4vbmV3X2pvYl9idXR0b24iKTsKCnZhciBfam9ic19zdGF0c19iYXIgPSByZXF1aXJlKCIuLi9qb2JzX3N0YXRzX2JhciIpOwoKdmFyIF9ub2RlX2F2YWlsYWJsZV93YXJuaW5nID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9ub2RlX2F2YWlsYWJsZV93YXJuaW5nIik7Cgp2YXIgX3VwZ3JhZGUgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL3VwZ3JhZGUiKTsKCnZhciBfcmVmcmVzaF9qb2JzX2xpc3RfYnV0dG9uID0gcmVxdWlyZSgiLi4vcmVmcmVzaF9qb2JzX2xpc3RfYnV0dG9uIik7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIF9qb2JzX2xpc3QyID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vY29tbW9uL2NvbnN0YW50cy9qb2JzX2xpc3QiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307IGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBkZWxldGluZ0pvYnNSZWZyZXNoVGltZW91dCA9IG51bGw7IC8vICdpc01hbmFnZW1lbnRUYWJsZScgYm9vbCBwcm9wIHRvIGRldGVybWluZSB3aGVuIHRvIGNvbmZpZ3VyZSB0YWJsZSBmb3IgdXNlIGluIEtpYmFuYSBtYW5hZ2VtZW50IHBhZ2UKCnZhciBKb2JzTGlzdFZpZXcgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKEpvYnNMaXN0VmlldywgX0NvbXBvbmVudCk7CgogIGZ1bmN0aW9uIEpvYnNMaXN0Vmlldyhwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBKb2JzTGlzdFZpZXcpOwoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKEpvYnNMaXN0VmlldykuY2FsbCh0aGlzLCBwcm9wcykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInRvZ2dsZVJvdyIsIGZ1bmN0aW9uIChqb2JJZCkgewogICAgICBpZiAoX3RoaXMuc3RhdGUuaXRlbUlkVG9FeHBhbmRlZFJvd01hcFtqb2JJZF0pIHsKICAgICAgICB2YXIgaXRlbUlkVG9FeHBhbmRlZFJvd01hcCA9IF9vYmplY3RTcHJlYWQoe30sIF90aGlzLnN0YXRlLml0ZW1JZFRvRXhwYW5kZWRSb3dNYXApOwoKICAgICAgICBkZWxldGUgaXRlbUlkVG9FeHBhbmRlZFJvd01hcFtqb2JJZF07CgogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGl0ZW1JZFRvRXhwYW5kZWRSb3dNYXA6IGl0ZW1JZFRvRXhwYW5kZWRSb3dNYXAKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgX2l0ZW1JZFRvRXhwYW5kZWRSb3dNYXAgPSBfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5zdGF0ZS5pdGVtSWRUb0V4cGFuZGVkUm93TWFwKTsKCiAgICAgICAgaWYgKF90aGlzLnN0YXRlLmZ1bGxKb2JzTGlzdFtqb2JJZF0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgX2l0ZW1JZFRvRXhwYW5kZWRSb3dNYXBbam9iSWRdID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfam9iX2RldGFpbHMuSm9iRGV0YWlscywgewogICAgICAgICAgICBqb2JJZDogam9iSWQsCiAgICAgICAgICAgIGpvYjogX3RoaXMuc3RhdGUuZnVsbEpvYnNMaXN0W2pvYklkXSwKICAgICAgICAgICAgYWRkWW91cnNlbGY6IF90aGlzLmFkZFVwZGF0ZUZ1bmN0aW9uLAogICAgICAgICAgICByZW1vdmVZb3Vyc2VsZjogX3RoaXMucmVtb3ZlVXBkYXRlRnVuY3Rpb24sCiAgICAgICAgICAgIHNob3dGdWxsRGV0YWlsczogX3RoaXMucHJvcHMuaXNNYW5hZ2VtZW50VGFibGUgIT09IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfaXRlbUlkVG9FeHBhbmRlZFJvd01hcFtqb2JJZF0gPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9qb2JfZGV0YWlscy5Kb2JEZXRhaWxzLCB7CiAgICAgICAgICAgIGpvYklkOiBqb2JJZCwKICAgICAgICAgICAgYWRkWW91cnNlbGY6IF90aGlzLmFkZFVwZGF0ZUZ1bmN0aW9uLAogICAgICAgICAgICByZW1vdmVZb3Vyc2VsZjogX3RoaXMucmVtb3ZlVXBkYXRlRnVuY3Rpb24sCiAgICAgICAgICAgIHNob3dGdWxsRGV0YWlsczogX3RoaXMucHJvcHMuaXNNYW5hZ2VtZW50VGFibGUgIT09IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgaXRlbUlkVG9FeHBhbmRlZFJvd01hcDogX2l0ZW1JZFRvRXhwYW5kZWRSb3dNYXAKICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAoMCwgX3V0aWxzLmxvYWRGdWxsSm9iKShqb2JJZCkudGhlbihmdW5jdGlvbiAoam9iKSB7CiAgICAgICAgICAgIHZhciBmdWxsSm9ic0xpc3QgPSBfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5zdGF0ZS5mdWxsSm9ic0xpc3QpOwoKICAgICAgICAgICAgZnVsbEpvYnNMaXN0W2pvYklkXSA9IGpvYjsKCiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICBmdWxsSm9ic0xpc3Q6IGZ1bGxKb2JzTGlzdAogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgLy8gdGFrZSBhIGZyZXNoIGNvcHkgb2YgdGhlIGl0ZW1JZFRvRXhwYW5kZWRSb3dNYXAgb2JqZWN0CiAgICAgICAgICAgICAgX2l0ZW1JZFRvRXhwYW5kZWRSb3dNYXAgPSBfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5zdGF0ZS5pdGVtSWRUb0V4cGFuZGVkUm93TWFwKTsKCiAgICAgICAgICAgICAgaWYgKF9pdGVtSWRUb0V4cGFuZGVkUm93TWFwW2pvYklkXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAvLyB3cmFwIGluIGEgY2hlY2ssIGluIGNhc2UgdGhlIHVzZXIgY2xvc2VzIHRoZSBleHBhbnNpb24gYmVmb3JlIHRoZQogICAgICAgICAgICAgICAgLy8gbG9hZGluZyBoYXMgZmluaXNoZWQKICAgICAgICAgICAgICAgIF9pdGVtSWRUb0V4cGFuZGVkUm93TWFwW2pvYklkXSA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2pvYl9kZXRhaWxzLkpvYkRldGFpbHMsIHsKICAgICAgICAgICAgICAgICAgam9iSWQ6IGpvYklkLAogICAgICAgICAgICAgICAgICBqb2I6IGpvYiwKICAgICAgICAgICAgICAgICAgYWRkWW91cnNlbGY6IF90aGlzLmFkZFVwZGF0ZUZ1bmN0aW9uLAogICAgICAgICAgICAgICAgICByZW1vdmVZb3Vyc2VsZjogX3RoaXMucmVtb3ZlVXBkYXRlRnVuY3Rpb24sCiAgICAgICAgICAgICAgICAgIHNob3dGdWxsRGV0YWlsczogX3RoaXMucHJvcHMuaXNNYW5hZ2VtZW50VGFibGUgIT09IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXRlbUlkVG9FeHBhbmRlZFJvd01hcDogX2l0ZW1JZFRvRXhwYW5kZWRSb3dNYXAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiYWRkVXBkYXRlRnVuY3Rpb24iLCBmdW5jdGlvbiAoaWQsIGYpIHsKICAgICAgX3RoaXMudXBkYXRlRnVuY3Rpb25zW2lkXSA9IGY7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW1vdmVVcGRhdGVGdW5jdGlvbiIsIGZ1bmN0aW9uIChpZCkgewogICAgICBkZWxldGUgX3RoaXMudXBkYXRlRnVuY3Rpb25zW2lkXTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNldFNob3dFZGl0Sm9iRmx5b3V0RnVuY3Rpb24iLCBmdW5jdGlvbiAoZnVuYykgewogICAgICBfdGhpcy5zaG93RWRpdEpvYkZseW91dCA9IGZ1bmM7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ1bnNldFNob3dFZGl0Sm9iRmx5b3V0RnVuY3Rpb24iLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNob3dFZGl0Sm9iRmx5b3V0ID0gZnVuY3Rpb24gKCkge307CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzZXRTaG93RGVsZXRlSm9iTW9kYWxGdW5jdGlvbiIsIGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgIF90aGlzLnNob3dEZWxldGVKb2JNb2RhbCA9IGZ1bmM7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ1bnNldFNob3dEZWxldGVKb2JNb2RhbEZ1bmN0aW9uIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zaG93RGVsZXRlSm9iTW9kYWwgPSBmdW5jdGlvbiAoKSB7fTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNldFNob3dTdGFydERhdGFmZWVkTW9kYWxGdW5jdGlvbiIsIGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgIF90aGlzLnNob3dTdGFydERhdGFmZWVkTW9kYWwgPSBmdW5jOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidW5zZXRTaG93U3RhcnREYXRhZmVlZE1vZGFsRnVuY3Rpb24iLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNob3dTdGFydERhdGFmZWVkTW9kYWwgPSBmdW5jdGlvbiAoKSB7fTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNldFNob3dDcmVhdGVXYXRjaEZseW91dEZ1bmN0aW9uIiwgZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgX3RoaXMuc2hvd0NyZWF0ZVdhdGNoRmx5b3V0ID0gZnVuYzsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInVuc2V0U2hvd0NyZWF0ZVdhdGNoRmx5b3V0RnVuY3Rpb24iLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNob3dDcmVhdGVXYXRjaEZseW91dCA9IGZ1bmN0aW9uICgpIHt9OwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0U2hvd0NyZWF0ZVdhdGNoRmx5b3V0RnVuY3Rpb24iLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy5zaG93Q3JlYXRlV2F0Y2hGbHlvdXQ7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzZWxlY3RKb2JDaGFuZ2UiLCBmdW5jdGlvbiAoc2VsZWN0ZWRKb2JzKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBzZWxlY3RlZEpvYnM6IHNlbGVjdGVkSm9icwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNldEZpbHRlcnMiLCBmdW5jdGlvbiAoZmlsdGVyQ2xhdXNlcykgewogICAgICB2YXIgZmlsdGVyZWRKb2JzU3VtbWFyeUxpc3QgPSAoMCwgX3V0aWxzLmZpbHRlckpvYnMpKF90aGlzLnN0YXRlLmpvYnNTdW1tYXJ5TGlzdCwgZmlsdGVyQ2xhdXNlcyk7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZmlsdGVyZWRKb2JzU3VtbWFyeUxpc3Q6IGZpbHRlcmVkSm9ic1N1bW1hcnlMaXN0LAogICAgICAgIGZpbHRlckNsYXVzZXM6IGZpbHRlckNsYXVzZXMKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnJlZnJlc2hTZWxlY3RlZEpvYnMoKTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvblJlZnJlc2hDbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGlzUmVmcmVzaGluZzogdHJ1ZQogICAgICB9KTsKCiAgICAgIF90aGlzLnJlZnJlc2hKb2JTdW1tYXJ5TGlzdCh0cnVlKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImlzRG9uZVJlZnJlc2hpbmciLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBpc1JlZnJlc2hpbmc6IGZhbHNlCiAgICAgIH0pOwogICAgfSk7CgogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGlzUmVmcmVzaGluZzogZmFsc2UsCiAgICAgIGxvYWRpbmc6IG51bGwsCiAgICAgIGpvYnNTdW1tYXJ5TGlzdDogW10sCiAgICAgIGZpbHRlcmVkSm9ic1N1bW1hcnlMaXN0OiBbXSwKICAgICAgZnVsbEpvYnNMaXN0OiB7fSwKICAgICAgc2VsZWN0ZWRKb2JzOiBbXSwKICAgICAgaXRlbUlkVG9FeHBhbmRlZFJvd01hcDoge30sCiAgICAgIGZpbHRlckNsYXVzZXM6IFtdLAogICAgICBkZWxldGluZ0pvYklkczogW10KICAgIH07CiAgICBfdGhpcy51cGRhdGVGdW5jdGlvbnMgPSB7fTsKCiAgICBfdGhpcy5zaG93RWRpdEpvYkZseW91dCA9IGZ1bmN0aW9uICgpIHt9OwoKICAgIF90aGlzLnNob3dEZWxldGVKb2JNb2RhbCA9IGZ1bmN0aW9uICgpIHt9OwoKICAgIF90aGlzLnNob3dTdGFydERhdGFmZWVkTW9kYWwgPSBmdW5jdGlvbiAoKSB7fTsKCiAgICBfdGhpcy5zaG93Q3JlYXRlV2F0Y2hGbHlvdXQgPSBmdW5jdGlvbiAoKSB7fTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoSm9ic0xpc3RWaWV3LCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLnJlZnJlc2hKb2JTdW1tYXJ5TGlzdCh0cnVlKTsKCiAgICAgIGlmICh0aGlzLnByb3BzLmlzTWFuYWdlbWVudFRhYmxlICE9PSB0cnVlKSB7CiAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIHdlIG5lZWQgdG8gb3BlbiB0aGUgc3RhcnQgZGF0YWZlZWQgbW9kYWwKICAgICAgICAvLyBhZnRlciB0aGUgcGFnZSBoYXMgcmVuZGVyZWQuIFRoaXMgd2lsbCBoYXBwZW4gaWYgdGhlIHVzZXIKICAgICAgICAvLyBoYXMganVzdCBjcmVhdGVkIGEgam9iIGluIHRoZSBhZHZhbmNlZCB3aXphcmQgYW5kIHNlbGVjdGVkIHRvCiAgICAgICAgLy8gc3RhcnQgdGhlIGRhdGFmZWVkIG5vdy4KICAgICAgICB0aGlzLm9wZW5BdXRvU3RhcnREYXRhZmVlZE1vZGFsKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRVcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHsKICAgICAgaWYgKHByZXZQcm9wcy5sYXN0UmVmcmVzaCAhPT0gdGhpcy5wcm9wcy5sYXN0UmVmcmVzaCkgewogICAgICAgIHRoaXMucmVmcmVzaEpvYlN1bW1hcnlMaXN0KCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnRXaWxsVW5tb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7CiAgICAgIGlmICh0aGlzLnByb3BzLmlzTWFuYWdlbWVudFRhYmxlID09PSB1bmRlZmluZWQpIHsKICAgICAgICBkZWxldGluZ0pvYnNSZWZyZXNoVGltZW91dCA9IG51bGw7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJvcGVuQXV0b1N0YXJ0RGF0YWZlZWRNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbkF1dG9TdGFydERhdGFmZWVkTW9kYWwoKSB7CiAgICAgIHZhciBqb2IgPSAoMCwgX3V0aWxzLmNoZWNrRm9yQXV0b1N0YXJ0RGF0YWZlZWQpKCk7CgogICAgICBpZiAoam9iICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLnNob3dTdGFydERhdGFmZWVkTW9kYWwoW2pvYl0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVmcmVzaFNlbGVjdGVkSm9icyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVmcmVzaFNlbGVjdGVkSm9icygpIHsKICAgICAgdmFyIHNlbGVjdGVkSm9ic0lkcyA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRKb2JzLm1hcChmdW5jdGlvbiAoaikgewogICAgICAgIHJldHVybiBqLmlkOwogICAgICB9KTsKICAgICAgdmFyIGZpbHRlcmVkSm9iSWRzID0gdGhpcy5zdGF0ZS5maWx0ZXJlZEpvYnNTdW1tYXJ5TGlzdC5tYXAoZnVuY3Rpb24gKGopIHsKICAgICAgICByZXR1cm4gai5pZDsKICAgICAgfSk7IC8vIHJlZnJlc2ggdGhlIGpvYnMgc3RvcmVkIGFzIHNlbGVjdGVkCiAgICAgIC8vIG9ubHkgc2VsZWN0IHRob3NlIHdoaWNoIGFyZSBhbHNvIGluIHRoZSBmaWx0ZXJlZCBsaXN0CgogICAgICB2YXIgc2VsZWN0ZWRKb2JzID0gdGhpcy5zdGF0ZS5qb2JzU3VtbWFyeUxpc3QuZmlsdGVyKGZ1bmN0aW9uIChqKSB7CiAgICAgICAgcmV0dXJuIHNlbGVjdGVkSm9ic0lkcy5maW5kKGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgcmV0dXJuIGlkID09PSBqLmlkOwogICAgICAgIH0pOwogICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGopIHsKICAgICAgICByZXR1cm4gZmlsdGVyZWRKb2JJZHMuZmluZChmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgIHJldHVybiBpZCA9PT0gai5pZDsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIHNlbGVjdGVkSm9iczogc2VsZWN0ZWRKb2JzCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlZnJlc2hKb2JTdW1tYXJ5TGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVmcmVzaEpvYlN1bW1hcnlMaXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBmb3JjZVJlZnJlc2gsCiAgICAgICAgICBleHBhbmRlZEpvYnNJZHMsCiAgICAgICAgICBqb2JzLAogICAgICAgICAgZnVsbEpvYnNMaXN0LAogICAgICAgICAgam9ic1N1bW1hcnlMaXN0LAogICAgICAgICAgZmlsdGVyZWRKb2JzU3VtbWFyeUxpc3QsCiAgICAgICAgICBfYXJncyA9IGFyZ3VtZW50czsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiByZWZyZXNoSm9iU3VtbWFyeUxpc3QkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGZvcmNlUmVmcmVzaCA9IF9hcmdzLmxlbmd0aCA+IDAgJiYgX2FyZ3NbMF0gIT09IHVuZGVmaW5lZCA/IF9hcmdzWzBdIDogZmFsc2U7CgogICAgICAgICAgICAgIGlmICghKGZvcmNlUmVmcmVzaCA9PT0gdHJ1ZSB8fCB0aGlzLnByb3BzLmJsb2NrUmVmcmVzaCAhPT0gdHJ1ZSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gU2V0IGxvYWRpbmcgdG8gdHJ1ZSBmb3Igam9ic19saXN0IHRhYmxlIGZvciBpbml0aWFsIGpvYiBsb2FkaW5nCiAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUubG9hZGluZyA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGxvYWRpbmc6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZXhwYW5kZWRKb2JzSWRzID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZS5pdGVtSWRUb0V4cGFuZGVkUm93TWFwKTsKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKF9tbF9hcGlfc2VydmljZS5tbC5qb2JzLmpvYnNTdW1tYXJ5KGV4cGFuZGVkSm9ic0lkcykpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGpvYnMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGZ1bGxKb2JzTGlzdCA9IHt9OwogICAgICAgICAgICAgIGpvYnNTdW1tYXJ5TGlzdCA9IGpvYnMubWFwKGZ1bmN0aW9uIChqb2IpIHsKICAgICAgICAgICAgICAgIGlmIChqb2IuZnVsbEpvYiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIGZ1bGxKb2JzTGlzdFtqb2IuaWRdID0gam9iLmZ1bGxKb2I7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBqb2IuZnVsbEpvYjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBqb2IubGF0ZXN0VGltZXN0YW1wU29ydFZhbHVlID0gam9iLmxhdGVzdFRpbWVzdGFtcE1zIHx8IDA7CiAgICAgICAgICAgICAgICByZXR1cm4gam9iOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGZpbHRlcmVkSm9ic1N1bW1hcnlMaXN0ID0gKDAsIF91dGlscy5maWx0ZXJKb2JzKShqb2JzU3VtbWFyeUxpc3QsIHRoaXMuc3RhdGUuZmlsdGVyQ2xhdXNlcyk7CiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBqb2JzU3VtbWFyeUxpc3Q6IGpvYnNTdW1tYXJ5TGlzdCwKICAgICAgICAgICAgICAgIGZpbHRlcmVkSm9ic1N1bW1hcnlMaXN0OiBmaWx0ZXJlZEpvYnNTdW1tYXJ5TGlzdCwKICAgICAgICAgICAgICAgIGZ1bGxKb2JzTGlzdDogZnVsbEpvYnNMaXN0LAogICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczIucmVmcmVzaFNlbGVjdGVkSm9icygpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMudXBkYXRlRnVuY3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChqKSB7CiAgICAgICAgICAgICAgICBfdGhpczIudXBkYXRlRnVuY3Rpb25zW2pdLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgam9iOiBmdWxsSm9ic0xpc3Rbal0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGpvYnMuZm9yRWFjaChmdW5jdGlvbiAoam9iKSB7CiAgICAgICAgICAgICAgICBpZiAoam9iLmRlbGV0aW5nICYmIF90aGlzMi5zdGF0ZS5pdGVtSWRUb0V4cGFuZGVkUm93TWFwW2pvYi5pZF0pIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLnRvZ2dsZVJvdyhqb2IuaWQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuaXNEb25lUmVmcmVzaGluZygpOwoKICAgICAgICAgICAgICBpZiAoam9ic1N1bW1hcnlMaXN0LnNvbWUoZnVuY3Rpb24gKGopIHsKICAgICAgICAgICAgICAgIHJldHVybiBqLmRlbGV0aW5nID09PSB0cnVlOwogICAgICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgc29tZSBqb2JzIGluIGEgZGVsZXRpbmcgc3RhdGUsIHN0YXJ0IHBvbGxpbmcgZm9yCiAgICAgICAgICAgICAgICAvLyBkZWxldGluZyBqb2JzIHNvIHdlIGNhbiB1cGRhdGUgdGhlIGpvYnMgbGlzdCBvbmNlIHRoZQogICAgICAgICAgICAgICAgLy8gZGVsZXRpbmcgdGFza3MgYXJlIG92ZXIKICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tEZWxldGluZ0pvYlRhc2tzKGZvcmNlUmVmcmVzaCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxODsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDQpOwogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQudDApOwogICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMsIFtbNCwgMThdXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2hlY2tEZWxldGluZ0pvYlRhc2tzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0RlbGV0aW5nSm9iVGFza3MoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGZvcmNlUmVmcmVzaCwKICAgICAgICAgIF9yZWYsCiAgICAgICAgICB0YXNrSm9iSWRzLAogICAgICAgICAgdGFza0xpc3RIYXNDaGFuZ2VkLAogICAgICAgICAgX2FyZ3MyID0gYXJndW1lbnRzOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjaGVja0RlbGV0aW5nSm9iVGFza3MkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGZvcmNlUmVmcmVzaCA9IF9hcmdzMi5sZW5ndGggPiAwICYmIF9hcmdzMlswXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MyWzBdIDogZmFsc2U7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX21sX2FwaV9zZXJ2aWNlLm1sLmpvYnMuZGVsZXRpbmdKb2JUYXNrcygpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBfcmVmID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgdGFza0pvYklkcyA9IF9yZWYuam9iSWRzOwogICAgICAgICAgICAgIHRhc2tMaXN0SGFzQ2hhbmdlZCA9ICgwLCBfbG9kYXNoLmlzRXF1YWwpKHRhc2tKb2JJZHMuc29ydCgpLCB0aGlzLnN0YXRlLmRlbGV0aW5nSm9iSWRzLnNvcnQoKSkgPT09IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgZGVsZXRpbmdKb2JJZHM6IHRhc2tKb2JJZHMKICAgICAgICAgICAgICB9KTsgLy8gb25seSByZWxvYWQgdGhlIGpvYnMgbGlzdCBpZiB0aGUgY29udGVudHMgb2YgdGhlIHRhc2sgbGlzdCBoYXMgY2hhbmdlZAogICAgICAgICAgICAgIC8vIG9yIHRoZSBjaGVjayByZWZyZXNoIGhhcyBiZWVuIGZvcmNlZCBpLmUuIGZyb20gYSB1c2VyIGFjdGlvbgoKICAgICAgICAgICAgICBpZiAodGFza0xpc3RIYXNDaGFuZ2VkIHx8IGZvcmNlUmVmcmVzaCkgewogICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoSm9iU3VtbWFyeUxpc3QoKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICh0YXNrSm9iSWRzLmxlbmd0aCA+IDAgJiYgZGVsZXRpbmdKb2JzUmVmcmVzaFRpbWVvdXQgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgIGRlbGV0aW5nSm9ic1JlZnJlc2hUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGRlbGV0aW5nSm9ic1JlZnJlc2hUaW1lb3V0ID0gbnVsbDsKCiAgICAgICAgICAgICAgICAgIF90aGlzMy5jaGVja0RlbGV0aW5nSm9iVGFza3MoKTsKICAgICAgICAgICAgICAgIH0sIF9qb2JzX2xpc3QyLkRFTEVUSU5HX0pPQlNfUkVGUkVTSF9JTlRFUlZBTF9NUyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyTWFuYWdlbWVudEpvYnNMaXN0Q29tcG9uZW50cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyTWFuYWdlbWVudEpvYnNMaXN0Q29tcG9uZW50cygpIHsKICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIGxvYWRpbmcgPSBfdGhpcyRzdGF0ZS5sb2FkaW5nLAogICAgICAgICAgaXRlbUlkVG9FeHBhbmRlZFJvd01hcCA9IF90aGlzJHN0YXRlLml0ZW1JZFRvRXhwYW5kZWRSb3dNYXAsCiAgICAgICAgICBmaWx0ZXJlZEpvYnNTdW1tYXJ5TGlzdCA9IF90aGlzJHN0YXRlLmZpbHRlcmVkSm9ic1N1bW1hcnlMaXN0LAogICAgICAgICAgZnVsbEpvYnNMaXN0ID0gX3RoaXMkc3RhdGUuZnVsbEpvYnNMaXN0LAogICAgICAgICAgc2VsZWN0ZWRKb2JzID0gX3RoaXMkc3RhdGUuc2VsZWN0ZWRKb2JzOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogIm1hbmFnZW1lbnRKb2JzTGlzdCIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfam9iX2ZpbHRlcl9iYXIuSm9iRmlsdGVyQmFyLCB7CiAgICAgICAgc2V0RmlsdGVyczogdGhpcy5zZXRGaWx0ZXJzCiAgICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfam9ic19saXN0LkpvYnNMaXN0LCB7CiAgICAgICAgam9ic1N1bW1hcnlMaXN0OiBmaWx0ZXJlZEpvYnNTdW1tYXJ5TGlzdCwKICAgICAgICBmdWxsSm9ic0xpc3Q6IGZ1bGxKb2JzTGlzdCwKICAgICAgICBpdGVtSWRUb0V4cGFuZGVkUm93TWFwOiBpdGVtSWRUb0V4cGFuZGVkUm93TWFwLAogICAgICAgIHRvZ2dsZVJvdzogdGhpcy50b2dnbGVSb3csCiAgICAgICAgc2VsZWN0Sm9iQ2hhbmdlOiB0aGlzLnNlbGVjdEpvYkNoYW5nZSwKICAgICAgICBzZWxlY3RlZEpvYnNDb3VudDogc2VsZWN0ZWRKb2JzLmxlbmd0aCwKICAgICAgICBsb2FkaW5nOiBsb2FkaW5nLAogICAgICAgIGlzTWFuYWdlbWVudFRhYmxlOiB0cnVlLAogICAgICAgIGlzTWxFbmFibGVkSW5TcGFjZTogdGhpcy5wcm9wcy5pc01sRW5hYmxlZEluU3BhY2UKICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlckpvYnNMaXN0Q29tcG9uZW50cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVySm9ic0xpc3RDb21wb25lbnRzKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRzdGF0ZTIgPSB0aGlzLnN0YXRlLAogICAgICAgICAgbG9hZGluZyA9IF90aGlzJHN0YXRlMi5sb2FkaW5nLAogICAgICAgICAgam9ic1N1bW1hcnlMaXN0ID0gX3RoaXMkc3RhdGUyLmpvYnNTdW1tYXJ5TGlzdDsKICAgICAgdmFyIGpvYklkcyA9IGpvYnNTdW1tYXJ5TGlzdC5tYXAoZnVuY3Rpb24gKGopIHsKICAgICAgICByZXR1cm4gai5pZDsKICAgICAgfSk7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiYWN0aW9ucy1iYXIiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX211bHRpX2pvYl9hY3Rpb25zLk11bHRpSm9iQWN0aW9ucywgewogICAgICAgIHNlbGVjdGVkSm9iczogdGhpcy5zdGF0ZS5zZWxlY3RlZEpvYnMsCiAgICAgICAgYWxsSm9iSWRzOiBqb2JJZHMsCiAgICAgICAgc2hvd1N0YXJ0RGF0YWZlZWRNb2RhbDogdGhpcy5zaG93U3RhcnREYXRhZmVlZE1vZGFsLAogICAgICAgIHNob3dEZWxldGVKb2JNb2RhbDogdGhpcy5zaG93RGVsZXRlSm9iTW9kYWwsCiAgICAgICAgcmVmcmVzaEpvYnM6IGZ1bmN0aW9uIHJlZnJlc2hKb2JzKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5yZWZyZXNoSm9iU3VtbWFyeUxpc3QodHJ1ZSk7CiAgICAgICAgfQogICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfam9iX2ZpbHRlcl9iYXIuSm9iRmlsdGVyQmFyLCB7CiAgICAgICAgc2V0RmlsdGVyczogdGhpcy5zZXRGaWx0ZXJzCiAgICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfam9ic19saXN0LkpvYnNMaXN0LCB7CiAgICAgICAgam9ic1N1bW1hcnlMaXN0OiB0aGlzLnN0YXRlLmZpbHRlcmVkSm9ic1N1bW1hcnlMaXN0LAogICAgICAgIGZ1bGxKb2JzTGlzdDogdGhpcy5zdGF0ZS5mdWxsSm9ic0xpc3QsCiAgICAgICAgaXRlbUlkVG9FeHBhbmRlZFJvd01hcDogdGhpcy5zdGF0ZS5pdGVtSWRUb0V4cGFuZGVkUm93TWFwLAogICAgICAgIHRvZ2dsZVJvdzogdGhpcy50b2dnbGVSb3csCiAgICAgICAgc2VsZWN0Sm9iQ2hhbmdlOiB0aGlzLnNlbGVjdEpvYkNoYW5nZSwKICAgICAgICBzaG93RWRpdEpvYkZseW91dDogdGhpcy5zaG93RWRpdEpvYkZseW91dCwKICAgICAgICBzaG93RGVsZXRlSm9iTW9kYWw6IHRoaXMuc2hvd0RlbGV0ZUpvYk1vZGFsLAogICAgICAgIHNob3dTdGFydERhdGFmZWVkTW9kYWw6IHRoaXMuc2hvd1N0YXJ0RGF0YWZlZWRNb2RhbCwKICAgICAgICByZWZyZXNoSm9iczogZnVuY3Rpb24gcmVmcmVzaEpvYnMoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM0LnJlZnJlc2hKb2JTdW1tYXJ5TGlzdCh0cnVlKTsKICAgICAgICB9LAogICAgICAgIHNlbGVjdGVkSm9ic0NvdW50OiB0aGlzLnN0YXRlLnNlbGVjdGVkSm9icy5sZW5ndGgsCiAgICAgICAgbG9hZGluZzogbG9hZGluZwogICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZWRpdF9qb2JfZmx5b3V0LkVkaXRKb2JGbHlvdXQsIHsKICAgICAgICBzZXRTaG93RnVuY3Rpb246IHRoaXMuc2V0U2hvd0VkaXRKb2JGbHlvdXRGdW5jdGlvbiwKICAgICAgICB1bnNldFNob3dGdW5jdGlvbjogdGhpcy51bnNldFNob3dFZGl0Sm9iRmx5b3V0RnVuY3Rpb24sCiAgICAgICAgcmVmcmVzaEpvYnM6IGZ1bmN0aW9uIHJlZnJlc2hKb2JzKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5yZWZyZXNoSm9iU3VtbWFyeUxpc3QodHJ1ZSk7CiAgICAgICAgfSwKICAgICAgICBhbGxKb2JJZHM6IGpvYklkcwogICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZGVsZXRlX2pvYl9tb2RhbC5EZWxldGVKb2JNb2RhbCwgewogICAgICAgIHNldFNob3dGdW5jdGlvbjogdGhpcy5zZXRTaG93RGVsZXRlSm9iTW9kYWxGdW5jdGlvbiwKICAgICAgICB1bnNldFNob3dGdW5jdGlvbjogdGhpcy51bnNldFNob3dEZWxldGVKb2JNb2RhbEZ1bmN0aW9uLAogICAgICAgIHJlZnJlc2hKb2JzOiBmdW5jdGlvbiByZWZyZXNoSm9icygpIHsKICAgICAgICAgIHJldHVybiBfdGhpczQucmVmcmVzaEpvYlN1bW1hcnlMaXN0KHRydWUpOwogICAgICAgIH0KICAgICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3N0YXJ0X2RhdGFmZWVkX21vZGFsLlN0YXJ0RGF0YWZlZWRNb2RhbCwgewogICAgICAgIHNldFNob3dGdW5jdGlvbjogdGhpcy5zZXRTaG93U3RhcnREYXRhZmVlZE1vZGFsRnVuY3Rpb24sCiAgICAgICAgdW5zZXRTaG93RnVuY3Rpb246IHRoaXMudW5zZXRTaG93RGVsZXRlSm9iTW9kYWxGdW5jdGlvbiwKICAgICAgICBnZXRTaG93Q3JlYXRlV2F0Y2hGbHlvdXRGdW5jdGlvbjogdGhpcy5nZXRTaG93Q3JlYXRlV2F0Y2hGbHlvdXRGdW5jdGlvbiwKICAgICAgICByZWZyZXNoSm9iczogZnVuY3Rpb24gcmVmcmVzaEpvYnMoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM0LnJlZnJlc2hKb2JTdW1tYXJ5TGlzdCh0cnVlKTsKICAgICAgICB9CiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jcmVhdGVfd2F0Y2hfZmx5b3V0LkNyZWF0ZVdhdGNoRmx5b3V0LCB7CiAgICAgICAgc2V0U2hvd0Z1bmN0aW9uOiB0aGlzLnNldFNob3dDcmVhdGVXYXRjaEZseW91dEZ1bmN0aW9uLAogICAgICAgIHVuc2V0U2hvd0Z1bmN0aW9uOiB0aGlzLnVuc2V0U2hvd0NyZWF0ZVdhdGNoRmx5b3V0RnVuY3Rpb24KICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkc3RhdGUzID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIGlzUmVmcmVzaGluZyA9IF90aGlzJHN0YXRlMy5pc1JlZnJlc2hpbmcsCiAgICAgICAgICBqb2JzU3VtbWFyeUxpc3QgPSBfdGhpcyRzdGF0ZTMuam9ic1N1bW1hcnlMaXN0OwogICAgICB2YXIgaXNNYW5hZ2VtZW50VGFibGUgPSB0aGlzLnByb3BzLmlzTWFuYWdlbWVudFRhYmxlOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogImpvYi1tYW5hZ2VtZW50IiwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAibWwtam9icy1saXN0IgogICAgICB9LCAhaXNNYW5hZ2VtZW50VGFibGUgJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRpdGxlLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoMSIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5tbC5qb2JzTGlzdC50aXRsZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBbm9tYWx5IGRldGVjdGlvbiBqb2JzIgogICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgICAgc2l6ZTogIm0iCiAgICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbm9kZV9hdmFpbGFibGVfd2FybmluZy5Ob2RlQXZhaWxhYmxlV2FybmluZywgbnVsbCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3VwZ3JhZGUuVXBncmFkZVdhcm5pbmcsIG51bGwpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICJzcGFjZUJldHdlZW4iCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2pvYnNfc3RhdHNfYmFyLkpvYlN0YXRzQmFyLCB7CiAgICAgICAgam9ic1N1bW1hcnlMaXN0OiBqb2JzU3VtbWFyeUxpc3QKICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgICAgYWxpZ25JdGVtczogImNlbnRlciIsCiAgICAgICAgZ3V0dGVyU2l6ZTogInMiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlZnJlc2hfam9ic19saXN0X2J1dHRvbi5SZWZyZXNoSm9ic0xpc3RCdXR0b24sIHsKICAgICAgICBvblJlZnJlc2hDbGljazogdGhpcy5vblJlZnJlc2hDbGljaywKICAgICAgICBpc1JlZnJlc2hpbmc6IGlzUmVmcmVzaGluZwogICAgICB9KSksICFpc01hbmFnZW1lbnRUYWJsZSAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9uZXdfam9iX2J1dHRvbi5OZXdKb2JCdXR0b24sIG51bGwpKSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICAgIHNpemU6ICJzIgogICAgICB9KSwgIWlzTWFuYWdlbWVudFRhYmxlICYmIHRoaXMucmVuZGVySm9ic0xpc3RDb21wb25lbnRzKCksIGlzTWFuYWdlbWVudFRhYmxlICYmIHRoaXMucmVuZGVyTWFuYWdlbWVudEpvYnNMaXN0Q29tcG9uZW50cygpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBKb2JzTGlzdFZpZXc7Cn0oX3JlYWN0LkNvbXBvbmVudCk7CgpleHBvcnRzLkpvYnNMaXN0VmlldyA9IEpvYnNMaXN0Vmlldzs="},null]}