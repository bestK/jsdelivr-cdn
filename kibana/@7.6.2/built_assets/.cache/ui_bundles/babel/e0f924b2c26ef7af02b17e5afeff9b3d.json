{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/core/public/chrome/chrome_service.js","dependencies":[{"path":"src/core/public/chrome/chrome_service.js","mtime":1585205038716},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIkNocm9tZVJlY2VudGx5QWNjZXNzZWQiLCB7CiAgZW51bWVyYWJsZTogdHJ1ZSwKICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgIHJldHVybiBfcmVjZW50bHlfYWNjZXNzZWQuQ2hyb21lUmVjZW50bHlBY2Nlc3NlZDsKICB9Cn0pOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIkNocm9tZU5hdkNvbnRyb2xzIiwgewogIGVudW1lcmFibGU6IHRydWUsCiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICByZXR1cm4gX25hdl9jb250cm9scy5DaHJvbWVOYXZDb250cm9sczsKICB9Cn0pOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIkNocm9tZURvY1RpdGxlIiwgewogIGVudW1lcmFibGU6IHRydWUsCiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICByZXR1cm4gX2RvY190aXRsZS5DaHJvbWVEb2NUaXRsZTsKICB9Cn0pOwpleHBvcnRzLkNocm9tZVNlcnZpY2UgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcnhqcyA9IHJlcXVpcmUoInJ4anMiKTsKCnZhciBfb3BlcmF0b3JzID0gcmVxdWlyZSgicnhqcy9vcGVyYXRvcnMiKTsKCnZhciBfdXJsID0gcmVxdWlyZSgidXJsIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfbmF2X2xpbmtzID0gcmVxdWlyZSgiLi9uYXZfbGlua3MiKTsKCnZhciBfcmVjZW50bHlfYWNjZXNzZWQgPSByZXF1aXJlKCIuL3JlY2VudGx5X2FjY2Vzc2VkIik7Cgp2YXIgX25hdl9jb250cm9scyA9IHJlcXVpcmUoIi4vbmF2X2NvbnRyb2xzIik7Cgp2YXIgX2RvY190aXRsZSA9IHJlcXVpcmUoIi4vZG9jX3RpdGxlIik7Cgp2YXIgX3VpID0gcmVxdWlyZSgiLi91aSIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuL2NvbnN0YW50cyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIElTX0NPTExBUFNFRF9LRVkgPSAnY29yZS5jaHJvbWUuaXNDb2xsYXBzZWQnOwovKiogQHB1YmxpYyAqLwoKLyoqIEBpbnRlcm5hbCAqLwoKdmFyIENocm9tZVNlcnZpY2UgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBDaHJvbWVTZXJ2aWNlKHBhcmFtcykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENocm9tZVNlcnZpY2UpOwoKICAgIHRoaXMucGFyYW1zID0gcGFyYW1zOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaXNWaXNpYmxlJCIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhcHBIaWRkZW4kIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRvZ2dsZUhpZGRlbiQiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic3RvcCQiLCBuZXcgX3J4anMuUmVwbGF5U3ViamVjdCgxKSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJuYXZDb250cm9scyIsIG5ldyBfbmF2X2NvbnRyb2xzLk5hdkNvbnRyb2xzU2VydmljZSgpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm5hdkxpbmtzIiwgbmV3IF9uYXZfbGlua3MuTmF2TGlua3NTZXJ2aWNlKCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicmVjZW50bHlBY2Nlc3NlZCIsIG5ldyBfcmVjZW50bHlfYWNjZXNzZWQuUmVjZW50bHlBY2Nlc3NlZFNlcnZpY2UoKSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkb2NUaXRsZSIsIG5ldyBfZG9jX3RpdGxlLkRvY1RpdGxlU2VydmljZSgpKTsKICB9CiAgLyoqCiAgICogVGhlc2Ugb2JzZXJ2YWJsZXMgYWxsb3cgY29uc3VtZXJzIHRvIHRvZ2dsZSB0aGUgY2hyb21lIHZpc2liaWxpdHkgdmlhIGVpdGhlcjoKICAgKiAgIDEuIFVzaW5nIHNldElzVmlzaWJsZSgpIHRvIHRyaWdnZXIgdGhlIG5leHQgY2hyb21lSGlkZGVuJAogICAqICAgMi4gU2V0dGluZyBgY2hyb21lbGVzc2Agd2hlbiByZWdpc3RlcmluZyBhbiBhcHBsaWNhdGlvbiwgd2hpY2ggd2lsbAogICAqICAgICAgcmVzZXQgdGhlIHZpc2liaWxpdHkgd2hlbmV2ZXIgdGhlIG5leHQgYXBwbGljYXRpb24gaXMgbW91bnRlZAogICAqICAgMy4gSGF2aW5nICJlbWJlZCIgaW4gdGhlIHF1ZXJ5IHN0cmluZwogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKENocm9tZVNlcnZpY2UsIFt7CiAgICBrZXk6ICJpbml0VmlzaWJpbGl0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFZpc2liaWxpdHkoYXBwbGljYXRpb24pIHsKICAgICAgLy8gU3RhcnQgb2ZmIHRoZSBjaHJvbWUgc2VydmljZSBoaWRkZW4gaWYgImVtYmVkIiBpcyBpbiB0aGUgaGFzaCBxdWVyeSBzdHJpbmcuCiAgICAgIHZhciBpc0VtYmVkZGVkID0gJ2VtYmVkJyBpbiAoMCwgX3VybC5wYXJzZSkobG9jYXRpb24uaGFzaC5zbGljZSgxKSwgdHJ1ZSkucXVlcnk7CiAgICAgIHRoaXMudG9nZ2xlSGlkZGVuJCA9IG5ldyBfcnhqcy5CZWhhdmlvclN1YmplY3QoaXNFbWJlZGRlZCk7CiAgICAgIHRoaXMuYXBwSGlkZGVuJCA9ICgwLCBfcnhqcy5tZXJnZSkoIC8vIERlZmF1bHQgdGhlIGFwcCBiZWluZyBoaWRkZW4gdG8gdGhlIHNhbWUgdmFsdWUgaW5pdGlhbCB2YWx1ZSBhcyB0aGUgY2hyb21lIHZpc2liaWxpdHkKICAgICAgLy8gaW4gY2FzZSB0aGUgYXBwbGljYXRpb24gc2VydmljZSBoYXMgbm90IGVtaXR0ZWQgYW4gYXBwIElEIHlldCwgc2luY2Ugd2Ugd2FudCB0byB0cmlnZ2VyCiAgICAgIC8vIGNvbWJpbmVMYXRlc3QgYmVsb3cgcmVnYXJkbGVzcyBvZiBoYXZpbmcgYW4gYXBwbGljYXRpb24gdmFsdWUgeWV0LgogICAgICAoMCwgX3J4anMub2YpKGlzRW1iZWRkZWQpLCBhcHBsaWNhdGlvbi5jdXJyZW50QXBwSWQkLnBpcGUoKDAsIF9vcGVyYXRvcnMuZmxhdE1hcCkoZnVuY3Rpb24gKGFwcElkKSB7CiAgICAgICAgcmV0dXJuIGFwcGxpY2F0aW9uLmFwcGxpY2F0aW9ucyQucGlwZSgoMCwgX29wZXJhdG9ycy5tYXApKGZ1bmN0aW9uIChhcHBsaWNhdGlvbnMpIHsKICAgICAgICAgIHJldHVybiAhIWFwcElkICYmIGFwcGxpY2F0aW9ucy5oYXMoYXBwSWQpICYmICEhYXBwbGljYXRpb25zLmdldChhcHBJZCkuY2hyb21lbGVzczsKICAgICAgICB9KSk7CiAgICAgIH0pKSk7CiAgICAgIHRoaXMuaXNWaXNpYmxlJCA9ICgwLCBfcnhqcy5jb21iaW5lTGF0ZXN0KShbdGhpcy5hcHBIaWRkZW4kLCB0aGlzLnRvZ2dsZUhpZGRlbiRdKS5waXBlKCgwLCBfb3BlcmF0b3JzLm1hcCkoZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSwKICAgICAgICAgICAgYXBwSGlkZGVuID0gX3JlZjJbMF0sCiAgICAgICAgICAgIHRvZ2dsZUhpZGRlbiA9IF9yZWYyWzFdOwoKICAgICAgICByZXR1cm4gIShhcHBIaWRkZW4gfHwgdG9nZ2xlSGlkZGVuKTsKICAgICAgfSksICgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkodGhpcy5zdG9wJCkpOwogICAgfQogIH0sIHsKICAgIGtleTogInN0YXJ0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydChfcmVmMykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGFwcGxpY2F0aW9uLCBkb2NMaW5rcywgaHR0cCwgaW5qZWN0ZWRNZXRhZGF0YSwgbm90aWZpY2F0aW9ucywgYXBwVGl0bGUkLCBicmFuZCQsIGlzQ29sbGFwc2VkJCwgYXBwbGljYXRpb25DbGFzc2VzJCwgaGVscEV4dGVuc2lvbiQsIGJyZWFkY3J1bWJzJCwgYmFkZ2UkLCBoZWxwU3VwcG9ydFVybCQsIG5hdkNvbnRyb2xzLCBuYXZMaW5rcywgcmVjZW50bHlBY2Nlc3NlZCwgZG9jVGl0bGU7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc3RhcnQkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGFwcGxpY2F0aW9uID0gX3JlZjMuYXBwbGljYXRpb24sIGRvY0xpbmtzID0gX3JlZjMuZG9jTGlua3MsIGh0dHAgPSBfcmVmMy5odHRwLCBpbmplY3RlZE1ldGFkYXRhID0gX3JlZjMuaW5qZWN0ZWRNZXRhZGF0YSwgbm90aWZpY2F0aW9ucyA9IF9yZWYzLm5vdGlmaWNhdGlvbnM7CiAgICAgICAgICAgICAgdGhpcy5pbml0VmlzaWJpbGl0eShhcHBsaWNhdGlvbik7CiAgICAgICAgICAgICAgYXBwVGl0bGUkID0gbmV3IF9yeGpzLkJlaGF2aW9yU3ViamVjdCgnS2liYW5hJyk7CiAgICAgICAgICAgICAgYnJhbmQkID0gbmV3IF9yeGpzLkJlaGF2aW9yU3ViamVjdCh7fSk7CiAgICAgICAgICAgICAgaXNDb2xsYXBzZWQkID0gbmV3IF9yeGpzLkJlaGF2aW9yU3ViamVjdCghIWxvY2FsU3RvcmFnZS5nZXRJdGVtKElTX0NPTExBUFNFRF9LRVkpKTsKICAgICAgICAgICAgICBhcHBsaWNhdGlvbkNsYXNzZXMkID0gbmV3IF9yeGpzLkJlaGF2aW9yU3ViamVjdChuZXcgU2V0KCkpOwogICAgICAgICAgICAgIGhlbHBFeHRlbnNpb24kID0gbmV3IF9yeGpzLkJlaGF2aW9yU3ViamVjdCh1bmRlZmluZWQpOwogICAgICAgICAgICAgIGJyZWFkY3J1bWJzJCA9IG5ldyBfcnhqcy5CZWhhdmlvclN1YmplY3QoW10pOwogICAgICAgICAgICAgIGJhZGdlJCA9IG5ldyBfcnhqcy5CZWhhdmlvclN1YmplY3QodW5kZWZpbmVkKTsKICAgICAgICAgICAgICBoZWxwU3VwcG9ydFVybCQgPSBuZXcgX3J4anMuQmVoYXZpb3JTdWJqZWN0KF9jb25zdGFudHMuS0lCQU5BX0FTS19FTEFTVElDX0xJTkspOwogICAgICAgICAgICAgIG5hdkNvbnRyb2xzID0gdGhpcy5uYXZDb250cm9scy5zdGFydCgpOwogICAgICAgICAgICAgIG5hdkxpbmtzID0gdGhpcy5uYXZMaW5rcy5zdGFydCh7CiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbjogYXBwbGljYXRpb24sCiAgICAgICAgICAgICAgICBodHRwOiBodHRwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5yZWNlbnRseUFjY2Vzc2VkLnN0YXJ0KHsKICAgICAgICAgICAgICAgIGh0dHA6IGh0dHAKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIHJlY2VudGx5QWNjZXNzZWQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGRvY1RpdGxlID0gdGhpcy5kb2NUaXRsZS5zdGFydCh7CiAgICAgICAgICAgICAgICBkb2N1bWVudDogd2luZG93LmRvY3VtZW50CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGlmICghdGhpcy5wYXJhbXMuYnJvd3NlclN1cHBvcnRzQ3NwICYmIGluamVjdGVkTWV0YWRhdGEuZ2V0Q3NwQ29uZmlnKCkud2FybkxlZ2FjeUJyb3dzZXJzKSB7CiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zLnRvYXN0cy5hZGRXYXJuaW5nKF9pMThuLmkxOG4udHJhbnNsYXRlKCdjb3JlLmNocm9tZS5sZWdhY3lCcm93c2VyV2FybmluZycsIHsKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdZb3VyIGJyb3dzZXIgZG9lcyBub3QgbWVldCB0aGUgc2VjdXJpdHkgcmVxdWlyZW1lbnRzIGZvciBLaWJhbmEuJwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgbmF2Q29udHJvbHM6IG5hdkNvbnRyb2xzLAogICAgICAgICAgICAgICAgbmF2TGlua3M6IG5hdkxpbmtzLAogICAgICAgICAgICAgICAgcmVjZW50bHlBY2Nlc3NlZDogcmVjZW50bHlBY2Nlc3NlZCwKICAgICAgICAgICAgICAgIGRvY1RpdGxlOiBkb2NUaXRsZSwKICAgICAgICAgICAgICAgIGdldEhlYWRlckNvbXBvbmVudDogZnVuY3Rpb24gZ2V0SGVhZGVyQ29tcG9uZW50KCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdWkuTG9hZGluZ0luZGljYXRvciwgewogICAgICAgICAgICAgICAgICAgIGxvYWRpbmdDb3VudCQ6IGh0dHAuZ2V0TG9hZGluZ0NvdW50JCgpCiAgICAgICAgICAgICAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF91aS5IZWFkZXJXcmFwcGVyLCB7CiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb246IGFwcGxpY2F0aW9uLAogICAgICAgICAgICAgICAgICAgIGFwcFRpdGxlJDogYXBwVGl0bGUkLnBpcGUoKDAsIF9vcGVyYXRvcnMudGFrZVVudGlsKShfdGhpcy5zdG9wJCkpLAogICAgICAgICAgICAgICAgICAgIGJhZGdlJDogYmFkZ2UkLnBpcGUoKDAsIF9vcGVyYXRvcnMudGFrZVVudGlsKShfdGhpcy5zdG9wJCkpLAogICAgICAgICAgICAgICAgICAgIGJhc2VQYXRoOiBodHRwLmJhc2VQYXRoLAogICAgICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJzJDogYnJlYWRjcnVtYnMkLnBpcGUoKDAsIF9vcGVyYXRvcnMudGFrZVVudGlsKShfdGhpcy5zdG9wJCkpLAogICAgICAgICAgICAgICAgICAgIGtpYmFuYURvY0xpbms6IGRvY0xpbmtzLmxpbmtzLmtpYmFuYSwKICAgICAgICAgICAgICAgICAgICBmb3JjZUFwcFN3aXRjaGVyTmF2aWdhdGlvbiQ6IG5hdkxpbmtzLmdldEZvcmNlQXBwU3dpdGNoZXJOYXZpZ2F0aW9uJCgpLAogICAgICAgICAgICAgICAgICAgIGhlbHBFeHRlbnNpb24kOiBoZWxwRXh0ZW5zaW9uJC5waXBlKCgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkoX3RoaXMuc3RvcCQpKSwKICAgICAgICAgICAgICAgICAgICBoZWxwU3VwcG9ydFVybCQ6IGhlbHBTdXBwb3J0VXJsJC5waXBlKCgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkoX3RoaXMuc3RvcCQpKSwKICAgICAgICAgICAgICAgICAgICBob21lSHJlZjogaHR0cC5iYXNlUGF0aC5wcmVwZW5kKCcvYXBwL2tpYmFuYSMvaG9tZScpLAogICAgICAgICAgICAgICAgICAgIGlzVmlzaWJsZSQ6IF90aGlzLmlzVmlzaWJsZSQsCiAgICAgICAgICAgICAgICAgICAga2liYW5hVmVyc2lvbjogaW5qZWN0ZWRNZXRhZGF0YS5nZXRLaWJhbmFWZXJzaW9uKCksCiAgICAgICAgICAgICAgICAgICAgbGVnYWN5TW9kZTogaW5qZWN0ZWRNZXRhZGF0YS5nZXRMZWdhY3lNb2RlKCksCiAgICAgICAgICAgICAgICAgICAgbmF2TGlua3MkOiBuYXZMaW5rcy5nZXROYXZMaW5rcyQoKSwKICAgICAgICAgICAgICAgICAgICByZWNlbnRseUFjY2Vzc2VkJDogcmVjZW50bHlBY2Nlc3NlZC5nZXQkKCksCiAgICAgICAgICAgICAgICAgICAgbmF2Q29udHJvbHNMZWZ0JDogbmF2Q29udHJvbHMuZ2V0TGVmdCQoKSwKICAgICAgICAgICAgICAgICAgICBuYXZDb250cm9sc1JpZ2h0JDogbmF2Q29udHJvbHMuZ2V0UmlnaHQkKCkKICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNldEFwcFRpdGxlOiBmdW5jdGlvbiBzZXRBcHBUaXRsZShhcHBUaXRsZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gYXBwVGl0bGUkLm5leHQoYXBwVGl0bGUpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGdldEJyYW5kJDogZnVuY3Rpb24gZ2V0QnJhbmQkKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gYnJhbmQkLnBpcGUoKDAsIF9vcGVyYXRvcnMudGFrZVVudGlsKShfdGhpcy5zdG9wJCkpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNldEJyYW5kOiBmdW5jdGlvbiBzZXRCcmFuZChicmFuZCkgewogICAgICAgICAgICAgICAgICBicmFuZCQubmV4dChPYmplY3QuZnJlZXplKHsKICAgICAgICAgICAgICAgICAgICBsb2dvOiBicmFuZC5sb2dvLAogICAgICAgICAgICAgICAgICAgIHNtYWxsTG9nbzogYnJhbmQuc21hbGxMb2dvCiAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBnZXRJc1Zpc2libGUkOiBmdW5jdGlvbiBnZXRJc1Zpc2libGUkKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaXNWaXNpYmxlJDsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZXRJc1Zpc2libGU6IGZ1bmN0aW9uIHNldElzVmlzaWJsZShpc1Zpc2libGUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRvZ2dsZUhpZGRlbiQubmV4dCghaXNWaXNpYmxlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBnZXRJc0NvbGxhcHNlZCQ6IGZ1bmN0aW9uIGdldElzQ29sbGFwc2VkJCgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzQ29sbGFwc2VkJC5waXBlKCgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkoX3RoaXMuc3RvcCQpKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZXRJc0NvbGxhcHNlZDogZnVuY3Rpb24gc2V0SXNDb2xsYXBzZWQoaXNDb2xsYXBzZWQpIHsKICAgICAgICAgICAgICAgICAgaXNDb2xsYXBzZWQkLm5leHQoaXNDb2xsYXBzZWQpOwoKICAgICAgICAgICAgICAgICAgaWYgKGlzQ29sbGFwc2VkKSB7CiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oSVNfQ09MTEFQU0VEX0tFWSwgJ3RydWUnKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShJU19DT0xMQVBTRURfS0VZKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGdldEFwcGxpY2F0aW9uQ2xhc3NlcyQ6IGZ1bmN0aW9uIGdldEFwcGxpY2F0aW9uQ2xhc3NlcyQoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhcHBsaWNhdGlvbkNsYXNzZXMkLnBpcGUoKDAsIF9vcGVyYXRvcnMubWFwKShmdW5jdGlvbiAoc2V0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90b0NvbnN1bWFibGVBcnJheShzZXQpOwogICAgICAgICAgICAgICAgICB9KSwgKDAsIF9vcGVyYXRvcnMudGFrZVVudGlsKShfdGhpcy5zdG9wJCkpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFkZEFwcGxpY2F0aW9uQ2xhc3M6IGZ1bmN0aW9uIGFkZEFwcGxpY2F0aW9uQ2xhc3MoY2xhc3NOYW1lKSB7CiAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGUgPSBuZXcgU2V0KF90b0NvbnN1bWFibGVBcnJheShhcHBsaWNhdGlvbkNsYXNzZXMkLmdldFZhbHVlKCkpKTsKICAgICAgICAgICAgICAgICAgdXBkYXRlLmFkZChjbGFzc05hbWUpOwogICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkNsYXNzZXMkLm5leHQodXBkYXRlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZW1vdmVBcHBsaWNhdGlvbkNsYXNzOiBmdW5jdGlvbiByZW1vdmVBcHBsaWNhdGlvbkNsYXNzKGNsYXNzTmFtZSkgewogICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlID0gbmV3IFNldChfdG9Db25zdW1hYmxlQXJyYXkoYXBwbGljYXRpb25DbGFzc2VzJC5nZXRWYWx1ZSgpKSk7CiAgICAgICAgICAgICAgICAgIHVwZGF0ZS5kZWxldGUoY2xhc3NOYW1lKTsKICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25DbGFzc2VzJC5uZXh0KHVwZGF0ZSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ2V0QmFkZ2UkOiBmdW5jdGlvbiBnZXRCYWRnZSQoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBiYWRnZSQucGlwZSgoMCwgX29wZXJhdG9ycy50YWtlVW50aWwpKF90aGlzLnN0b3AkKSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2V0QmFkZ2U6IGZ1bmN0aW9uIHNldEJhZGdlKGJhZGdlKSB7CiAgICAgICAgICAgICAgICAgIGJhZGdlJC5uZXh0KGJhZGdlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBnZXRCcmVhZGNydW1icyQ6IGZ1bmN0aW9uIGdldEJyZWFkY3J1bWJzJCgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGJyZWFkY3J1bWJzJC5waXBlKCgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkoX3RoaXMuc3RvcCQpKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZXRCcmVhZGNydW1iczogZnVuY3Rpb24gc2V0QnJlYWRjcnVtYnMobmV3QnJlYWRjcnVtYnMpIHsKICAgICAgICAgICAgICAgICAgYnJlYWRjcnVtYnMkLm5leHQobmV3QnJlYWRjcnVtYnMpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGdldEhlbHBFeHRlbnNpb24kOiBmdW5jdGlvbiBnZXRIZWxwRXh0ZW5zaW9uJCgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGhlbHBFeHRlbnNpb24kLnBpcGUoKDAsIF9vcGVyYXRvcnMudGFrZVVudGlsKShfdGhpcy5zdG9wJCkpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNldEhlbHBFeHRlbnNpb246IGZ1bmN0aW9uIHNldEhlbHBFeHRlbnNpb24oaGVscEV4dGVuc2lvbikgewogICAgICAgICAgICAgICAgICBoZWxwRXh0ZW5zaW9uJC5uZXh0KGhlbHBFeHRlbnNpb24pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNldEhlbHBTdXBwb3J0VXJsOiBmdW5jdGlvbiBzZXRIZWxwU3VwcG9ydFVybCh1cmwpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGhlbHBTdXBwb3J0VXJsJC5uZXh0KHVybCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdG9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkgewogICAgICB0aGlzLm5hdkxpbmtzLnN0b3AoKTsKICAgICAgdGhpcy5zdG9wJC5uZXh0KCk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQ2hyb21lU2VydmljZTsKfSgpOwovKioKICogQ2hyb21lU3RhcnQgYWxsb3dzIHBsdWdpbnMgdG8gY3VzdG9taXplIHRoZSBnbG9iYWwgY2hyb21lIGhlYWRlciBVSSBhbmQKICogZW5yaWNoIHRoZSBVWCB3aXRoIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnQgbG9jYXRpb24gb2YgdGhlCiAqIGJyb3dzZXIuCiAqCiAqIEByZW1hcmtzCiAqIFdoaWxlIENocm9tZVN0YXJ0IGV4cG9zZXMgbWFueSBBUElzLCB0aGV5IHNob3VsZCBiZSB1c2VkIHNwYXJpbmdseSBhbmQgdGhlCiAqIGRldmVsb3BlciBzaG91bGQgdW5kZXJzdGFuZCBob3cgdGhleSBhZmZlY3Qgb3RoZXIgcGx1Z2lucyBhbmQgYXBwbGljYXRpb25zLgogKgogKiBAZXhhbXBsZQogKiBIb3cgdG8gYWRkIGEgcmVjZW50bHkgYWNjZXNzZWQgaXRlbSB0byB0aGUgc2lkZWJhcjoKICogYGBgdHMKICogY29yZS5jaHJvbWUucmVjZW50bHlBY2Nlc3NlZC5hZGQoJy9hcHAvbWFwLzEyMzQnLCAnTWFwIDEyMzQnLCAnMTIzNCcpOwogKiBgYGAKICoKICogQGV4YW1wbGUKICogSG93IHRvIHNldCB0aGUgaGVscCBkcm9wZG93biBleHRlbnNpb246CiAqIGBgYHRzeAogKiBjb3JlLmNocm9tZS5zZXRIZWxwRXh0ZW5zaW9uKGVsZW0gPT4gewogKiAgIFJlYWN0RE9NLnJlbmRlcig8TXlIZWxwQ29tcG9uZW50IC8+LCBlbGVtKTsKICogICByZXR1cm4gKCkgPT4gUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZShlbGVtKTsKICogfSk7CiAqIGBgYAogKgogKiBAcHVibGljCiAqLwoKCmV4cG9ydHMuQ2hyb21lU2VydmljZSA9IENocm9tZVNlcnZpY2U7"},null]}