{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/components/search_bar/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/components/search_bar/index.js","mtime":1585205047647},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlNpZW1TZWFyY2hCYXIgPSBleHBvcnRzLmRpc3BhdGNoVXBkYXRlU2VhcmNoID0gZXhwb3J0cy5zYXZlZFF1ZXJ5U2VydmljZSA9IGV4cG9ydHMuc2llbUZpbHRlck1hbmFnZXIgPSB2b2lkIDA7Cgp2YXIgX2ZwID0gcmVxdWlyZSgibG9kYXNoL2ZwIik7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0UmVkdXggPSByZXF1aXJlKCJyZWFjdC1yZWR1eCIpOwoKdmFyIF9yeGpzID0gcmVxdWlyZSgicnhqcyIpOwoKdmFyIF9zdHlsZWRDb21wb25lbnRzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJzdHlsZWQtY29tcG9uZW50cyIpKTsKCnZhciBfbmV3X3BsYXRmb3JtID0gcmVxdWlyZSgidWkvbmV3X3BsYXRmb3JtIik7Cgp2YXIgX2lucHV0cyA9IHJlcXVpcmUoIi4uLy4uL3N0b3JlL2lucHV0cyIpOwoKdmFyIF9zdXBlcl9kYXRlX3BpY2tlciA9IHJlcXVpcmUoIi4uL3N1cGVyX2RhdGVfcGlja2VyIik7Cgp2YXIgX3NlbGVjdG9ycyA9IHJlcXVpcmUoIi4vc2VsZWN0b3JzIik7Cgp2YXIgX2FjdGlvbnMgPSByZXF1aXJlKCIuLi8uLi9zdG9yZS9hY3Rpb25zIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgc2llbUZpbHRlck1hbmFnZXIgPSBfbmV3X3BsYXRmb3JtLm5wU3RhcnQucGx1Z2lucy5kYXRhLnF1ZXJ5LmZpbHRlck1hbmFnZXI7CmV4cG9ydHMuc2llbUZpbHRlck1hbmFnZXIgPSBzaWVtRmlsdGVyTWFuYWdlcjsKdmFyIHNhdmVkUXVlcnlTZXJ2aWNlID0gX25ld19wbGF0Zm9ybS5ucFN0YXJ0LnBsdWdpbnMuZGF0YS5xdWVyeS5zYXZlZFF1ZXJpZXM7CmV4cG9ydHMuc2F2ZWRRdWVyeVNlcnZpY2UgPSBzYXZlZFF1ZXJ5U2VydmljZTsKdmFyIFNlYXJjaEJhciA9IF9uZXdfcGxhdGZvcm0ubnBTdGFydC5wbHVnaW5zLmRhdGEudWkuU2VhcmNoQmFyOwoKdmFyIFNlYXJjaEJhckNvbnRhaW5lciA9IF9zdHlsZWRDb21wb25lbnRzLmRlZmF1bHQuZGl2LndpdGhDb25maWcoewogIGRpc3BsYXlOYW1lOiAiU2VhcmNoQmFyQ29udGFpbmVyIiwKICBjb21wb25lbnRJZDogInNqMTI1ZC0wIgp9KShbIi5nbG9iYWxRdWVyeUJhcntwYWRkaW5nOjBweDt9Il0pOwoKdmFyIFNlYXJjaEJhckNvbXBvbmVudCA9ICgwLCBfcmVhY3QubWVtbykoZnVuY3Rpb24gKF9yZWYpIHsKICB2YXIgZW5kID0gX3JlZi5lbmQsCiAgICAgIGZpbHRlclF1ZXJ5ID0gX3JlZi5maWx0ZXJRdWVyeSwKICAgICAgZnJvbVN0ciA9IF9yZWYuZnJvbVN0ciwKICAgICAgaWQgPSBfcmVmLmlkLAogICAgICBpbmRleFBhdHRlcm4gPSBfcmVmLmluZGV4UGF0dGVybiwKICAgICAgX3JlZiRpc0xvYWRpbmcgPSBfcmVmLmlzTG9hZGluZywKICAgICAgaXNMb2FkaW5nID0gX3JlZiRpc0xvYWRpbmcgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRpc0xvYWRpbmcsCiAgICAgIHF1ZXJpZXMgPSBfcmVmLnF1ZXJpZXMsCiAgICAgIHNhdmVkUXVlcnkgPSBfcmVmLnNhdmVkUXVlcnksCiAgICAgIHNldFNhdmVkUXVlcnkgPSBfcmVmLnNldFNhdmVkUXVlcnksCiAgICAgIHNldFNlYXJjaEJhckZpbHRlciA9IF9yZWYuc2V0U2VhcmNoQmFyRmlsdGVyLAogICAgICBzdGFydCA9IF9yZWYuc3RhcnQsCiAgICAgIHRpbWVsaW5lSWQgPSBfcmVmLnRpbWVsaW5lSWQsCiAgICAgIHRvU3RyID0gX3JlZi50b1N0ciwKICAgICAgdXBkYXRlU2VhcmNoID0gX3JlZi51cGRhdGVTZWFyY2gsCiAgICAgIGRhdGFUZXN0U3ViaiA9IF9yZWYuZGF0YVRlc3RTdWJqOwogIHZhciB0aW1lZmlsdGVyID0gX25ld19wbGF0Zm9ybS5ucFN0YXJ0LnBsdWdpbnMuZGF0YS5xdWVyeS50aW1lZmlsdGVyLnRpbWVmaWx0ZXI7CgogIGlmIChmcm9tU3RyICE9IG51bGwgJiYgdG9TdHIgIT0gbnVsbCkgewogICAgdGltZWZpbHRlci5zZXRUaW1lKHsKICAgICAgZnJvbTogZnJvbVN0ciwKICAgICAgdG86IHRvU3RyCiAgICB9KTsKICB9IGVsc2UgaWYgKHN0YXJ0ICE9IG51bGwgJiYgZW5kICE9IG51bGwpIHsKICAgIHRpbWVmaWx0ZXIuc2V0VGltZSh7CiAgICAgIGZyb206IG5ldyBEYXRlKHN0YXJ0KS50b0lTT1N0cmluZygpLAogICAgICB0bzogbmV3IERhdGUoZW5kKS50b0lTT1N0cmluZygpCiAgICB9KTsKICB9CgogIHZhciBvblF1ZXJ5U3VibWl0ID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgIHZhciBpc1F1aWNrU2VsZWN0aW9uID0gcGF5bG9hZC5kYXRlUmFuZ2UuZnJvbS5pbmNsdWRlcygnbm93JykgfHwgcGF5bG9hZC5kYXRlUmFuZ2UudG8uaW5jbHVkZXMoJ25vdycpOwogICAgdmFyIHVwZGF0ZVNlYXJjaEJhciA9IHsKICAgICAgaWQ6IGlkLAogICAgICBlbmQ6IHRvU3RyICE9IG51bGwgPyB0b1N0ciA6IG5ldyBEYXRlKGVuZCkudG9JU09TdHJpbmcoKSwKICAgICAgc3RhcnQ6IGZyb21TdHIgIT0gbnVsbCA/IGZyb21TdHIgOiBuZXcgRGF0ZShzdGFydCkudG9JU09TdHJpbmcoKSwKICAgICAgaXNJbnZhbGlkOiBmYWxzZSwKICAgICAgaXNRdWlja1NlbGVjdGlvbjogaXNRdWlja1NlbGVjdGlvbiwKICAgICAgdXBkYXRlVGltZTogZmFsc2UKICAgIH07CiAgICB2YXIgaXNTdGF0ZVVwZGF0ZWQgPSBmYWxzZTsKCiAgICBpZiAoaXNRdWlja1NlbGVjdGlvbiAmJiAoZnJvbVN0ciAhPT0gcGF5bG9hZC5kYXRlUmFuZ2UuZnJvbSB8fCB0b1N0ciAhPT0gcGF5bG9hZC5kYXRlUmFuZ2UudG8pIHx8ICFpc1F1aWNrU2VsZWN0aW9uICYmIChzdGFydCAhPT0gKDAsIF9zdXBlcl9kYXRlX3BpY2tlci5mb3JtYXREYXRlKShwYXlsb2FkLmRhdGVSYW5nZS5mcm9tKSB8fCBlbmQgIT09ICgwLCBfc3VwZXJfZGF0ZV9waWNrZXIuZm9ybWF0RGF0ZSkocGF5bG9hZC5kYXRlUmFuZ2UudG8pKSkgewogICAgICBpc1N0YXRlVXBkYXRlZCA9IHRydWU7CiAgICAgIHVwZGF0ZVNlYXJjaEJhci51cGRhdGVUaW1lID0gdHJ1ZTsKICAgICAgdXBkYXRlU2VhcmNoQmFyLmVuZCA9IHBheWxvYWQuZGF0ZVJhbmdlLnRvOwogICAgICB1cGRhdGVTZWFyY2hCYXIuc3RhcnQgPSBwYXlsb2FkLmRhdGVSYW5nZS5mcm9tOwogICAgfQoKICAgIGlmIChwYXlsb2FkLnF1ZXJ5ICE9IG51bGwgJiYgISgwLCBfZnAuaXNFcXVhbCkocGF5bG9hZC5xdWVyeSwgZmlsdGVyUXVlcnkpKSB7CiAgICAgIGlzU3RhdGVVcGRhdGVkID0gdHJ1ZTsKICAgICAgdXBkYXRlU2VhcmNoQmFyID0gKDAsIF9mcC5zZXQpKCdxdWVyeScsIHBheWxvYWQucXVlcnksIHVwZGF0ZVNlYXJjaEJhcik7CiAgICB9CgogICAgaWYgKCFpc1N0YXRlVXBkYXRlZCkgewogICAgICAvLyBUaGF0IG1lYW4gd2UgYXJlIGRvaW5nIGEgcmVmcmVzaCEKICAgICAgaWYgKGlzUXVpY2tTZWxlY3Rpb24pIHsKICAgICAgICB1cGRhdGVTZWFyY2hCYXIudXBkYXRlVGltZSA9IHRydWU7CiAgICAgICAgdXBkYXRlU2VhcmNoQmFyLmVuZCA9IHBheWxvYWQuZGF0ZVJhbmdlLnRvOwogICAgICAgIHVwZGF0ZVNlYXJjaEJhci5zdGFydCA9IHBheWxvYWQuZGF0ZVJhbmdlLmZyb207CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcXVlcmllcy5mb3JFYWNoKGZ1bmN0aW9uIChxKSB7CiAgICAgICAgICByZXR1cm4gcS5yZWZldGNoICYmIHEucmVmZXRjaCgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdXBkYXRlU2VhcmNoKHVwZGF0ZVNlYXJjaEJhcik7CiAgICB9LCAwKTsKICB9LCBbaWQsIGVuZCwgZmlsdGVyUXVlcnksIGZyb21TdHIsIHF1ZXJpZXMsIHN0YXJ0LCB0b1N0cl0pOwogIHZhciBvblJlZnJlc2ggPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAocGF5bG9hZCkgewogICAgaWYgKHBheWxvYWQuZGF0ZVJhbmdlLmZyb20uaW5jbHVkZXMoJ25vdycpIHx8IHBheWxvYWQuZGF0ZVJhbmdlLnRvLmluY2x1ZGVzKCdub3cnKSkgewogICAgICB1cGRhdGVTZWFyY2goewogICAgICAgIGlkOiBpZCwKICAgICAgICBlbmQ6IHBheWxvYWQuZGF0ZVJhbmdlLnRvLAogICAgICAgIHN0YXJ0OiBwYXlsb2FkLmRhdGVSYW5nZS5mcm9tLAogICAgICAgIGlzSW52YWxpZDogZmFsc2UsCiAgICAgICAgaXNRdWlja1NlbGVjdGlvbjogdHJ1ZSwKICAgICAgICB1cGRhdGVUaW1lOiB0cnVlCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgcXVlcmllcy5mb3JFYWNoKGZ1bmN0aW9uIChxKSB7CiAgICAgICAgcmV0dXJuIHEucmVmZXRjaCAmJiBxLnJlZmV0Y2goKTsKICAgICAgfSk7CiAgICB9CiAgfSwgW2lkLCBxdWVyaWVzXSk7CiAgdmFyIG9uU2F2ZWQgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAobmV3U2F2ZWRRdWVyeSkgewogICAgc2V0U2F2ZWRRdWVyeSh7CiAgICAgIGlkOiBpZCwKICAgICAgc2F2ZWRRdWVyeTogbmV3U2F2ZWRRdWVyeQogICAgfSk7CiAgfSwgW2lkXSk7CiAgdmFyIG9uU2F2ZWRRdWVyeVVwZGF0ZWQgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoc2F2ZWRRdWVyeVVwZGF0ZWQpIHsKICAgIHZhciBpc1F1aWNrU2VsZWN0aW9uID0gc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy50aW1lZmlsdGVyID8gc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy50aW1lZmlsdGVyLmZyb20uaW5jbHVkZXMoJ25vdycpIHx8IHNhdmVkUXVlcnlVcGRhdGVkLmF0dHJpYnV0ZXMudGltZWZpbHRlci50by5pbmNsdWRlcygnbm93JykgOiBmYWxzZTsKICAgIHZhciB1cGRhdGVTZWFyY2hCYXIgPSB7CiAgICAgIGlkOiBpZCwKICAgICAgZmlsdGVyczogc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy5maWx0ZXJzIHx8IFtdLAogICAgICBlbmQ6IHRvU3RyICE9IG51bGwgPyB0b1N0ciA6IG5ldyBEYXRlKGVuZCkudG9JU09TdHJpbmcoKSwKICAgICAgc3RhcnQ6IGZyb21TdHIgIT0gbnVsbCA/IGZyb21TdHIgOiBuZXcgRGF0ZShzdGFydCkudG9JU09TdHJpbmcoKSwKICAgICAgaXNJbnZhbGlkOiBmYWxzZSwKICAgICAgaXNRdWlja1NlbGVjdGlvbjogaXNRdWlja1NlbGVjdGlvbiwKICAgICAgdXBkYXRlVGltZTogZmFsc2UKICAgIH07CgogICAgaWYgKHNhdmVkUXVlcnlVcGRhdGVkLmF0dHJpYnV0ZXMudGltZWZpbHRlcikgewogICAgICB1cGRhdGVTZWFyY2hCYXIuZW5kID0gc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy50aW1lZmlsdGVyID8gc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy50aW1lZmlsdGVyLnRvIDogdXBkYXRlU2VhcmNoQmFyLmVuZDsKICAgICAgdXBkYXRlU2VhcmNoQmFyLnN0YXJ0ID0gc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy50aW1lZmlsdGVyID8gc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy50aW1lZmlsdGVyLmZyb20gOiB1cGRhdGVTZWFyY2hCYXIuc3RhcnQ7CiAgICAgIHVwZGF0ZVNlYXJjaEJhci51cGRhdGVUaW1lID0gdHJ1ZTsKICAgIH0KCiAgICB1cGRhdGVTZWFyY2hCYXIgPSAoMCwgX2ZwLnNldCkoJ3F1ZXJ5Jywgc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy5xdWVyeSwgdXBkYXRlU2VhcmNoQmFyKTsKICAgIHVwZGF0ZVNlYXJjaEJhciA9ICgwLCBfZnAuc2V0KSgnc2F2ZWRRdWVyeScsIHNhdmVkUXVlcnlVcGRhdGVkLCB1cGRhdGVTZWFyY2hCYXIpOwogICAgdXBkYXRlU2VhcmNoKHVwZGF0ZVNlYXJjaEJhcik7CiAgfSwgW2lkLCBlbmQsIGZyb21TdHIsIHN0YXJ0LCB0b1N0cl0pOwogIHZhciBvbkNsZWFyU2F2ZWRRdWVyeSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICgpIHsKICAgIGlmIChzYXZlZFF1ZXJ5ICE9IG51bGwpIHsKICAgICAgdXBkYXRlU2VhcmNoKHsKICAgICAgICBpZDogaWQsCiAgICAgICAgZmlsdGVyczogW10sCiAgICAgICAgZW5kOiB0b1N0ciAhPSBudWxsID8gdG9TdHIgOiBuZXcgRGF0ZShlbmQpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgc3RhcnQ6IGZyb21TdHIgIT0gbnVsbCA/IGZyb21TdHIgOiBuZXcgRGF0ZShzdGFydCkudG9JU09TdHJpbmcoKSwKICAgICAgICBpc0ludmFsaWQ6IGZhbHNlLAogICAgICAgIGlzUXVpY2tTZWxlY3Rpb246IGZhbHNlLAogICAgICAgIHVwZGF0ZVRpbWU6IGZhbHNlLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBxdWVyeTogJycsCiAgICAgICAgICBsYW5ndWFnZTogc2F2ZWRRdWVyeS5hdHRyaWJ1dGVzLnF1ZXJ5Lmxhbmd1YWdlCiAgICAgICAgfSwKICAgICAgICByZXNldFNhdmVkUXVlcnk6IHRydWUsCiAgICAgICAgc2F2ZWRRdWVyeTogdW5kZWZpbmVkCiAgICAgIH0pOwogICAgfQogIH0sIFtpZCwgZW5kLCBmcm9tU3RyLCBzdGFydCwgdG9TdHIsIHNhdmVkUXVlcnldKTsKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgdmFyIGlzU3Vic2NyaWJlZCA9IHRydWU7CiAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IG5ldyBfcnhqcy5TdWJzY3JpcHRpb24oKTsKICAgIHN1YnNjcmlwdGlvbnMuYWRkKHNpZW1GaWx0ZXJNYW5hZ2VyLmdldFVwZGF0ZXMkKCkuc3Vic2NyaWJlKHsKICAgICAgbmV4dDogZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgICBpZiAoaXNTdWJzY3JpYmVkKSB7CiAgICAgICAgICBzZXRTZWFyY2hCYXJGaWx0ZXIoewogICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgIGZpbHRlcnM6IHNpZW1GaWx0ZXJNYW5hZ2VyLmdldEZpbHRlcnMoKQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KSk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBpc1N1YnNjcmliZWQgPSBmYWxzZTsKICAgICAgc3Vic2NyaXB0aW9ucy51bnN1YnNjcmliZSgpOwogICAgfTsKICB9LCBbXSk7CiAgdmFyIGluZGV4UGF0dGVybnMgPSAoMCwgX3JlYWN0LnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBbaW5kZXhQYXR0ZXJuXTsKICB9LCBbaW5kZXhQYXR0ZXJuXSk7CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoU2VhcmNoQmFyQ29udGFpbmVyLCB7CiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiIi5jb25jYXQoaWQsICJEYXRlUGlja2VyIikKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFNlYXJjaEJhciwgewogICAgYXBwTmFtZTogInNpZW0iLAogICAgaXNMb2FkaW5nOiBpc0xvYWRpbmcsCiAgICBpbmRleFBhdHRlcm5zOiBpbmRleFBhdHRlcm5zLAogICAgcXVlcnk6IGZpbHRlclF1ZXJ5LAogICAgb25DbGVhclNhdmVkUXVlcnk6IG9uQ2xlYXJTYXZlZFF1ZXJ5LAogICAgb25RdWVyeVN1Ym1pdDogb25RdWVyeVN1Ym1pdCwKICAgIG9uUmVmcmVzaDogb25SZWZyZXNoLAogICAgb25TYXZlZDogb25TYXZlZCwKICAgIG9uU2F2ZWRRdWVyeVVwZGF0ZWQ6IG9uU2F2ZWRRdWVyeVVwZGF0ZWQsCiAgICBzYXZlZFF1ZXJ5OiBzYXZlZFF1ZXJ5LAogICAgc2hvd0ZpbHRlckJhcjogdHJ1ZSwKICAgIHNob3dEYXRlUGlja2VyOiB0cnVlLAogICAgc2hvd1F1ZXJ5QmFyOiB0cnVlLAogICAgc2hvd1F1ZXJ5SW5wdXQ6IHRydWUsCiAgICBzaG93U2F2ZVF1ZXJ5OiB0cnVlLAogICAgZGF0YVRlc3RTdWJqOiBkYXRhVGVzdFN1YmoKICB9KSk7Cn0pOwoKdmFyIG1ha2VNYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiBtYWtlTWFwU3RhdGVUb1Byb3BzKCkgewogIHZhciBnZXRFbmRTZWxlY3RvciA9ICgwLCBfc2VsZWN0b3JzLmVuZFNlbGVjdG9yKSgpOwogIHZhciBnZXRGcm9tU3RyU2VsZWN0b3IgPSAoMCwgX3NlbGVjdG9ycy5mcm9tU3RyU2VsZWN0b3IpKCk7CiAgdmFyIGdldElzTG9hZGluZ1NlbGVjdG9yID0gKDAsIF9zZWxlY3RvcnMuaXNMb2FkaW5nU2VsZWN0b3IpKCk7CiAgdmFyIGdldEtpbmRTZWxlY3RvciA9ICgwLCBfc2VsZWN0b3JzLmtpbmRTZWxlY3RvcikoKTsKICB2YXIgZ2V0UXVlcmllc1NlbGVjdG9yID0gKDAsIF9zZWxlY3RvcnMucXVlcmllc1NlbGVjdG9yKSgpOwogIHZhciBnZXRTdGFydFNlbGVjdG9yID0gKDAsIF9zZWxlY3RvcnMuc3RhcnRTZWxlY3RvcikoKTsKICB2YXIgZ2V0VG9TdHJTZWxlY3RvciA9ICgwLCBfc2VsZWN0b3JzLnRvU3RyU2VsZWN0b3IpKCk7CiAgdmFyIGdldEZpbHRlclF1ZXJ5U2VsZWN0b3IgPSAoMCwgX3NlbGVjdG9ycy5maWx0ZXJRdWVyeVNlbGVjdG9yKSgpOwogIHZhciBnZXRTYXZlZFF1ZXJ5U2VsZWN0b3IgPSAoMCwgX3NlbGVjdG9ycy5zYXZlZFF1ZXJ5U2VsZWN0b3IpKCk7CiAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjIpIHsKICAgIHZhciBpZCA9IF9yZWYyLmlkOwogICAgdmFyIGlucHV0c1JhbmdlID0gKDAsIF9mcC5nZXRPcikoe30sICJpbnB1dHMuIi5jb25jYXQoaWQpLCBzdGF0ZSk7CiAgICByZXR1cm4gewogICAgICBlbmQ6IGdldEVuZFNlbGVjdG9yKGlucHV0c1JhbmdlKSwKICAgICAgZnJvbVN0cjogZ2V0RnJvbVN0clNlbGVjdG9yKGlucHV0c1JhbmdlKSwKICAgICAgZmlsdGVyUXVlcnk6IGdldEZpbHRlclF1ZXJ5U2VsZWN0b3IoaW5wdXRzUmFuZ2UpLAogICAgICBpc0xvYWRpbmc6IGdldElzTG9hZGluZ1NlbGVjdG9yKGlucHV0c1JhbmdlKSwKICAgICAga2luZDogZ2V0S2luZFNlbGVjdG9yKGlucHV0c1JhbmdlKSwKICAgICAgcXVlcmllczogZ2V0UXVlcmllc1NlbGVjdG9yKGlucHV0c1JhbmdlKSwKICAgICAgc2F2ZWRRdWVyeTogZ2V0U2F2ZWRRdWVyeVNlbGVjdG9yKGlucHV0c1JhbmdlKSwKICAgICAgc3RhcnQ6IGdldFN0YXJ0U2VsZWN0b3IoaW5wdXRzUmFuZ2UpLAogICAgICB0b1N0cjogZ2V0VG9TdHJTZWxlY3RvcihpbnB1dHNSYW5nZSkKICAgIH07CiAgfTsKfTsKClNlYXJjaEJhckNvbXBvbmVudC5kaXNwbGF5TmFtZSA9ICdTaWVtU2VhcmNoQmFyJzsKCnZhciBkaXNwYXRjaFVwZGF0ZVNlYXJjaCA9IGZ1bmN0aW9uIGRpc3BhdGNoVXBkYXRlU2VhcmNoKGRpc3BhdGNoKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmMykgewogICAgdmFyIGVuZCA9IF9yZWYzLmVuZCwKICAgICAgICBmaWx0ZXJzID0gX3JlZjMuZmlsdGVycywKICAgICAgICBpZCA9IF9yZWYzLmlkLAogICAgICAgIGlzUXVpY2tTZWxlY3Rpb24gPSBfcmVmMy5pc1F1aWNrU2VsZWN0aW9uLAogICAgICAgIHF1ZXJ5ID0gX3JlZjMucXVlcnksCiAgICAgICAgcmVzZXRTYXZlZFF1ZXJ5ID0gX3JlZjMucmVzZXRTYXZlZFF1ZXJ5LAogICAgICAgIHNhdmVkUXVlcnkgPSBfcmVmMy5zYXZlZFF1ZXJ5LAogICAgICAgIHN0YXJ0ID0gX3JlZjMuc3RhcnQsCiAgICAgICAgdGltZWxpbmVJZCA9IF9yZWYzLnRpbWVsaW5lSWQsCiAgICAgICAgX3JlZjMkdXBkYXRlVGltZSA9IF9yZWYzLnVwZGF0ZVRpbWUsCiAgICAgICAgdXBkYXRlVGltZSA9IF9yZWYzJHVwZGF0ZVRpbWUgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjMkdXBkYXRlVGltZTsKCiAgICBpZiAodXBkYXRlVGltZSkgewogICAgICB2YXIgZnJvbURhdGUgPSAoMCwgX3N1cGVyX2RhdGVfcGlja2VyLmZvcm1hdERhdGUpKHN0YXJ0KTsKICAgICAgdmFyIHRvRGF0ZSA9ICgwLCBfc3VwZXJfZGF0ZV9waWNrZXIuZm9ybWF0RGF0ZSkoZW5kLCB7CiAgICAgICAgcm91bmRVcDogdHJ1ZQogICAgICB9KTsKCiAgICAgIGlmIChpc1F1aWNrU2VsZWN0aW9uKSB7CiAgICAgICAgZGlzcGF0Y2goX2lucHV0cy5pbnB1dHNBY3Rpb25zLnNldFJlbGF0aXZlUmFuZ2VEYXRlUGlja2VyKHsKICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgIGZyb21TdHI6IHN0YXJ0LAogICAgICAgICAgdG9TdHI6IGVuZCwKICAgICAgICAgIGZyb206IGZyb21EYXRlLAogICAgICAgICAgdG86IHRvRGF0ZQogICAgICAgIH0pKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0b0RhdGUgPSAoMCwgX3N1cGVyX2RhdGVfcGlja2VyLmZvcm1hdERhdGUpKGVuZCk7CiAgICAgICAgZGlzcGF0Y2goX2lucHV0cy5pbnB1dHNBY3Rpb25zLnNldEFic29sdXRlUmFuZ2VEYXRlUGlja2VyKHsKICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgIGZyb206ICgwLCBfc3VwZXJfZGF0ZV9waWNrZXIuZm9ybWF0RGF0ZSkoc3RhcnQpLAogICAgICAgICAgdG86ICgwLCBfc3VwZXJfZGF0ZV9waWNrZXIuZm9ybWF0RGF0ZSkoZW5kKQogICAgICAgIH0pKTsKICAgICAgfQoKICAgICAgaWYgKHRpbWVsaW5lSWQgIT0gbnVsbCkgewogICAgICAgIGRpc3BhdGNoKF9hY3Rpb25zLnRpbWVsaW5lQWN0aW9ucy51cGRhdGVSYW5nZSh7CiAgICAgICAgICBpZDogdGltZWxpbmVJZCwKICAgICAgICAgIHN0YXJ0OiBmcm9tRGF0ZSwKICAgICAgICAgIGVuZDogdG9EYXRlCiAgICAgICAgfSkpOwogICAgICB9CiAgICB9CgogICAgaWYgKHF1ZXJ5ICE9IG51bGwpIHsKICAgICAgZGlzcGF0Y2goX2lucHV0cy5pbnB1dHNBY3Rpb25zLnNldEZpbHRlclF1ZXJ5KF9vYmplY3RTcHJlYWQoewogICAgICAgIGlkOiBpZAogICAgICB9LCBxdWVyeSkpKTsKICAgIH0KCiAgICBpZiAoZmlsdGVycyAhPSBudWxsKSB7CiAgICAgIHNpZW1GaWx0ZXJNYW5hZ2VyLnNldEZpbHRlcnMoZmlsdGVycyk7CiAgICB9CgogICAgaWYgKHNhdmVkUXVlcnkgIT0gbnVsbCB8fCByZXNldFNhdmVkUXVlcnkpIHsKICAgICAgZGlzcGF0Y2goX2lucHV0cy5pbnB1dHNBY3Rpb25zLnNldFNhdmVkUXVlcnkoewogICAgICAgIGlkOiBpZCwKICAgICAgICBzYXZlZFF1ZXJ5OiBzYXZlZFF1ZXJ5CiAgICAgIH0pKTsKICAgIH0KCiAgICBkaXNwYXRjaChfYWN0aW9ucy5ob3N0c0FjdGlvbnMuc2V0SG9zdFRhYmxlc0FjdGl2ZVBhZ2VUb1plcm8oKSk7CiAgICBkaXNwYXRjaChfYWN0aW9ucy5uZXR3b3JrQWN0aW9ucy5zZXROZXR3b3JrVGFibGVzQWN0aXZlUGFnZVRvWmVybygpKTsKICB9Owp9OwoKZXhwb3J0cy5kaXNwYXRjaFVwZGF0ZVNlYXJjaCA9IGRpc3BhdGNoVXBkYXRlU2VhcmNoOwoKdmFyIG1hcERpc3BhdGNoVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCkgewogIHJldHVybiB7CiAgICB1cGRhdGVTZWFyY2g6IGRpc3BhdGNoVXBkYXRlU2VhcmNoKGRpc3BhdGNoKSwKICAgIHNldFNhdmVkUXVlcnk6IGZ1bmN0aW9uIHNldFNhdmVkUXVlcnkoX3JlZjQpIHsKICAgICAgdmFyIGlkID0gX3JlZjQuaWQsCiAgICAgICAgICBzYXZlZFF1ZXJ5ID0gX3JlZjQuc2F2ZWRRdWVyeTsKICAgICAgcmV0dXJuIGRpc3BhdGNoKF9pbnB1dHMuaW5wdXRzQWN0aW9ucy5zZXRTYXZlZFF1ZXJ5KHsKICAgICAgICBpZDogaWQsCiAgICAgICAgc2F2ZWRRdWVyeTogc2F2ZWRRdWVyeQogICAgICB9KSk7CiAgICB9LAogICAgc2V0U2VhcmNoQmFyRmlsdGVyOiBmdW5jdGlvbiBzZXRTZWFyY2hCYXJGaWx0ZXIoX3JlZjUpIHsKICAgICAgdmFyIGlkID0gX3JlZjUuaWQsCiAgICAgICAgICBmaWx0ZXJzID0gX3JlZjUuZmlsdGVyczsKICAgICAgcmV0dXJuIGRpc3BhdGNoKF9pbnB1dHMuaW5wdXRzQWN0aW9ucy5zZXRTZWFyY2hCYXJGaWx0ZXIoewogICAgICAgIGlkOiBpZCwKICAgICAgICBmaWx0ZXJzOiBmaWx0ZXJzCiAgICAgIH0pKTsKICAgIH0KICB9Owp9OwoKdmFyIFNpZW1TZWFyY2hCYXIgPSAoMCwgX3JlYWN0UmVkdXguY29ubmVjdCkobWFrZU1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShTZWFyY2hCYXJDb21wb25lbnQpOwpleHBvcnRzLlNpZW1TZWFyY2hCYXIgPSBTaWVtU2VhcmNoQmFyOw=="},null]}