{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/input_control_vis/public/components/editor/controls_tab.js","dependencies":[{"path":"src/legacy/core_plugins/input_control_vis/public/components/editor/controls_tab.js","mtime":1585205039336},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZ2V0Q29udHJvbHNUYWIgPSBleHBvcnRzLkNvbnRyb2xzVGFiID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2NvbnRyb2xfZWRpdG9yID0gcmVxdWlyZSgiLi9jb250cm9sX2VkaXRvciIpOwoKdmFyIF9lZGl0b3JfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi9lZGl0b3JfdXRpbHMiKTsKCnZhciBfbGluZWFnZSA9IHJlcXVpcmUoIi4uLy4uL2xpbmVhZ2UiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX2V4dGVuZHMoKSB7CiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CgogICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsKICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRhcmdldDsKICB9OwoKICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgQ29udHJvbHNUYWJVaSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9QdXJlQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKENvbnRyb2xzVGFiVWksIF9QdXJlQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gQ29udHJvbHNUYWJVaSgpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udHJvbHNUYWJVaSk7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX2dldFByb3RvdHlwZU9mMiA9IF9nZXRQcm90b3R5cGVPZihDb250cm9sc1RhYlVpKSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB7CiAgICAgIHR5cGU6IF9lZGl0b3JfdXRpbHMuQ09OVFJPTF9UWVBFUy5MSVNUCiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnZXRJbmRleFBhdHRlcm4iLCBmdW5jdGlvbiBfY2FsbGVlKGluZGV4UGF0dGVybklkKSB7CiAgICAgIHZhciBfcmVmLCBfcmVmMiwgc3RhcnREZXBzOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKF90aGlzLnByb3BzLmRlcHMuY29yZS5nZXRTdGFydFNlcnZpY2VzKCkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIF9yZWYgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMik7CiAgICAgICAgICAgICAgc3RhcnREZXBzID0gX3JlZjJbMV07CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzdGFydERlcHMuZGF0YS5pbmRleFBhdHRlcm5zLmdldChpbmRleFBhdHRlcm5JZCkpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnNlbnQpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uQ2hhbmdlIiwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5zZXRWYWx1ZSgnY29udHJvbHMnLCB2YWx1ZSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVMYWJlbENoYW5nZSIsIGZ1bmN0aW9uIChjb250cm9sSW5kZXgsIGV2ZW50KSB7CiAgICAgIHZhciB1cGRhdGVkQ29udHJvbCA9IF90aGlzLnByb3BzLnN0YXRlUGFyYW1zLmNvbnRyb2xzW2NvbnRyb2xJbmRleF07CiAgICAgIHVwZGF0ZWRDb250cm9sLmxhYmVsID0gZXZlbnQudGFyZ2V0LnZhbHVlOwoKICAgICAgX3RoaXMub25DaGFuZ2UoKDAsIF9lZGl0b3JfdXRpbHMuc2V0Q29udHJvbCkoX3RoaXMucHJvcHMuc3RhdGVQYXJhbXMuY29udHJvbHMsIGNvbnRyb2xJbmRleCwgdXBkYXRlZENvbnRyb2wpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUluZGV4UGF0dGVybkNoYW5nZSIsIGZ1bmN0aW9uIChjb250cm9sSW5kZXgsIGluZGV4UGF0dGVybklkKSB7CiAgICAgIHZhciB1cGRhdGVkQ29udHJvbCA9IF90aGlzLnByb3BzLnN0YXRlUGFyYW1zLmNvbnRyb2xzW2NvbnRyb2xJbmRleF07CiAgICAgIHVwZGF0ZWRDb250cm9sLmluZGV4UGF0dGVybiA9IGluZGV4UGF0dGVybklkOwogICAgICB1cGRhdGVkQ29udHJvbC5maWVsZE5hbWUgPSAnJzsKCiAgICAgIF90aGlzLm9uQ2hhbmdlKCgwLCBfZWRpdG9yX3V0aWxzLnNldENvbnRyb2wpKF90aGlzLnByb3BzLnN0YXRlUGFyYW1zLmNvbnRyb2xzLCBjb250cm9sSW5kZXgsIHVwZGF0ZWRDb250cm9sKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVGaWVsZE5hbWVDaGFuZ2UiLCBmdW5jdGlvbiAoY29udHJvbEluZGV4LCBmaWVsZE5hbWUpIHsKICAgICAgdmFyIHVwZGF0ZWRDb250cm9sID0gX3RoaXMucHJvcHMuc3RhdGVQYXJhbXMuY29udHJvbHNbY29udHJvbEluZGV4XTsKICAgICAgdXBkYXRlZENvbnRyb2wuZmllbGROYW1lID0gZmllbGROYW1lOwoKICAgICAgX3RoaXMub25DaGFuZ2UoKDAsIF9lZGl0b3JfdXRpbHMuc2V0Q29udHJvbCkoX3RoaXMucHJvcHMuc3RhdGVQYXJhbXMuY29udHJvbHMsIGNvbnRyb2xJbmRleCwgdXBkYXRlZENvbnRyb2wpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUNoZWNrYm94T3B0aW9uQ2hhbmdlIiwgZnVuY3Rpb24gKGNvbnRyb2xJbmRleCwgb3B0aW9uTmFtZSwgZXZlbnQpIHsKICAgICAgdmFyIHVwZGF0ZWRDb250cm9sID0gX3RoaXMucHJvcHMuc3RhdGVQYXJhbXMuY29udHJvbHNbY29udHJvbEluZGV4XTsgLy8gQHRzLWlnbm9yZQoKICAgICAgdXBkYXRlZENvbnRyb2wub3B0aW9uc1tvcHRpb25OYW1lXSA9IGV2ZW50LnRhcmdldC5jaGVja2VkOwoKICAgICAgX3RoaXMub25DaGFuZ2UoKDAsIF9lZGl0b3JfdXRpbHMuc2V0Q29udHJvbCkoX3RoaXMucHJvcHMuc3RhdGVQYXJhbXMuY29udHJvbHMsIGNvbnRyb2xJbmRleCwgdXBkYXRlZENvbnRyb2wpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZU51bWJlck9wdGlvbkNoYW5nZSIsIGZ1bmN0aW9uIChjb250cm9sSW5kZXgsIG9wdGlvbk5hbWUsIGV2ZW50KSB7CiAgICAgIHZhciB1cGRhdGVkQ29udHJvbCA9IF90aGlzLnByb3BzLnN0YXRlUGFyYW1zLmNvbnRyb2xzW2NvbnRyb2xJbmRleF07IC8vIEB0cy1pZ25vcmUKCiAgICAgIHVwZGF0ZWRDb250cm9sLm9wdGlvbnNbb3B0aW9uTmFtZV0gPSBwYXJzZUZsb2F0KGV2ZW50LnRhcmdldC52YWx1ZSk7CgogICAgICBfdGhpcy5vbkNoYW5nZSgoMCwgX2VkaXRvcl91dGlscy5zZXRDb250cm9sKShfdGhpcy5wcm9wcy5zdGF0ZVBhcmFtcy5jb250cm9scywgY29udHJvbEluZGV4LCB1cGRhdGVkQ29udHJvbCkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlUmVtb3ZlQ29udHJvbCIsIGZ1bmN0aW9uIChjb250cm9sSW5kZXgpIHsKICAgICAgX3RoaXMub25DaGFuZ2UoKDAsIF9lZGl0b3JfdXRpbHMucmVtb3ZlQ29udHJvbCkoX3RoaXMucHJvcHMuc3RhdGVQYXJhbXMuY29udHJvbHMsIGNvbnRyb2xJbmRleCkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAibW92ZUNvbnRyb2wiLCBmdW5jdGlvbiAoY29udHJvbEluZGV4LCBkaXJlY3Rpb24pIHsKICAgICAgX3RoaXMub25DaGFuZ2UoKDAsIF9lZGl0b3JfdXRpbHMubW92ZUNvbnRyb2wpKF90aGlzLnByb3BzLnN0YXRlUGFyYW1zLmNvbnRyb2xzLCBjb250cm9sSW5kZXgsIGRpcmVjdGlvbikpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQWRkQ29udHJvbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMub25DaGFuZ2UoKDAsIF9lZGl0b3JfdXRpbHMuYWRkQ29udHJvbCkoX3RoaXMucHJvcHMuc3RhdGVQYXJhbXMuY29udHJvbHMsICgwLCBfZWRpdG9yX3V0aWxzLm5ld0NvbnRyb2wpKF90aGlzLnN0YXRlLnR5cGUpKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVQYXJlbnRDaGFuZ2UiLCBmdW5jdGlvbiAoY29udHJvbEluZGV4LCBldmVudCkgewogICAgICB2YXIgdXBkYXRlZENvbnRyb2wgPSBfdGhpcy5wcm9wcy5zdGF0ZVBhcmFtcy5jb250cm9sc1tjb250cm9sSW5kZXhdOwogICAgICB1cGRhdGVkQ29udHJvbC5wYXJlbnQgPSBldmVudC50YXJnZXQudmFsdWU7CgogICAgICBfdGhpcy5vbkNoYW5nZSgoMCwgX2VkaXRvcl91dGlscy5zZXRDb250cm9sKShfdGhpcy5wcm9wcy5zdGF0ZVBhcmFtcy5jb250cm9scywgY29udHJvbEluZGV4LCB1cGRhdGVkQ29udHJvbCkpOwogICAgfSk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKENvbnRyb2xzVGFiVWksIFt7CiAgICBrZXk6ICJyZW5kZXJDb250cm9scyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyQ29udHJvbHMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGxpbmVhZ2VNYXAgPSAoMCwgX2xpbmVhZ2UuZ2V0TGluZWFnZU1hcCkodGhpcy5wcm9wcy5zdGF0ZVBhcmFtcy5jb250cm9scyk7CiAgICAgIHJldHVybiB0aGlzLnByb3BzLnN0YXRlUGFyYW1zLmNvbnRyb2xzLm1hcChmdW5jdGlvbiAoY29udHJvbFBhcmFtcywgY29udHJvbEluZGV4KSB7CiAgICAgICAgdmFyIHBhcmVudENhbmRpZGF0ZXMgPSAoMCwgX2xpbmVhZ2UuZ2V0UGFyZW50Q2FuZGlkYXRlcykoX3RoaXMyLnByb3BzLnN0YXRlUGFyYW1zLmNvbnRyb2xzLCBjb250cm9sUGFyYW1zLmlkLCBsaW5lYWdlTWFwKTsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29udHJvbF9lZGl0b3IuQ29udHJvbEVkaXRvciwgewogICAgICAgICAga2V5OiBjb250cm9sUGFyYW1zLmlkLAogICAgICAgICAgY29udHJvbEluZGV4OiBjb250cm9sSW5kZXgsCiAgICAgICAgICBjb250cm9sUGFyYW1zOiBjb250cm9sUGFyYW1zLAogICAgICAgICAgaGFuZGxlTGFiZWxDaGFuZ2U6IF90aGlzMi5oYW5kbGVMYWJlbENoYW5nZSwKICAgICAgICAgIG1vdmVDb250cm9sOiBfdGhpczIubW92ZUNvbnRyb2wsCiAgICAgICAgICBoYW5kbGVSZW1vdmVDb250cm9sOiBfdGhpczIuaGFuZGxlUmVtb3ZlQ29udHJvbCwKICAgICAgICAgIGhhbmRsZUluZGV4UGF0dGVybkNoYW5nZTogX3RoaXMyLmhhbmRsZUluZGV4UGF0dGVybkNoYW5nZSwKICAgICAgICAgIGhhbmRsZUZpZWxkTmFtZUNoYW5nZTogX3RoaXMyLmhhbmRsZUZpZWxkTmFtZUNoYW5nZSwKICAgICAgICAgIGdldEluZGV4UGF0dGVybjogX3RoaXMyLmdldEluZGV4UGF0dGVybiwKICAgICAgICAgIGhhbmRsZUNoZWNrYm94T3B0aW9uQ2hhbmdlOiBfdGhpczIuaGFuZGxlQ2hlY2tib3hPcHRpb25DaGFuZ2UsCiAgICAgICAgICBoYW5kbGVOdW1iZXJPcHRpb25DaGFuZ2U6IF90aGlzMi5oYW5kbGVOdW1iZXJPcHRpb25DaGFuZ2UsCiAgICAgICAgICBwYXJlbnRDYW5kaWRhdGVzOiBwYXJlbnRDYW5kaWRhdGVzLAogICAgICAgICAgaGFuZGxlUGFyZW50Q2hhbmdlOiBfdGhpczIuaGFuZGxlUGFyZW50Q2hhbmdlLAogICAgICAgICAgZGVwczogX3RoaXMyLnByb3BzLmRlcHMKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGludGwgPSB0aGlzLnByb3BzLmludGw7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCB0aGlzLnJlbmRlckNvbnRyb2xzKCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQYW5lbCwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgICAgICBpZDogInNlbGVjdENvbnRyb2xUeXBlIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU2VsZWN0LCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInNlbGVjdENvbnRyb2xUeXBlIiwKICAgICAgICBvcHRpb25zOiBbewogICAgICAgICAgdmFsdWU6IF9lZGl0b3JfdXRpbHMuQ09OVFJPTF9UWVBFUy5SQU5HRSwKICAgICAgICAgIHRleHQ6IGludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiAnaW5wdXRDb250cm9sLmVkaXRvci5jb250cm9sc1RhYi5zZWxlY3QucmFuZ2VEcm9wRG93bk9wdGlvbkxhYmVsJywKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSYW5nZSBzbGlkZXInCiAgICAgICAgICB9KQogICAgICAgIH0sIHsKICAgICAgICAgIHZhbHVlOiBfZWRpdG9yX3V0aWxzLkNPTlRST0xfVFlQRVMuTElTVCwKICAgICAgICAgIHRleHQ6IGludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiAnaW5wdXRDb250cm9sLmVkaXRvci5jb250cm9sc1RhYi5zZWxlY3QubGlzdERyb3BEb3duT3B0aW9uTGFiZWwnLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ09wdGlvbnMgbGlzdCcKICAgICAgICAgIH0pCiAgICAgICAgfV0sCiAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUudHlwZSwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfdGhpczMuc2V0U3RhdGUoewogICAgICAgICAgICB0eXBlOiBldmVudC50YXJnZXQudmFsdWUKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgImFyaWEtbGFiZWwiOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgaWQ6ICdpbnB1dENvbnRyb2wuZWRpdG9yLmNvbnRyb2xzVGFiLnNlbGVjdC5jb250cm9sVHlwZUFyaWFMYWJlbCcsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NlbGVjdCBjb250cm9sIHR5cGUnCiAgICAgICAgfSkKICAgICAgfSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogZmFsc2UKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgICAgICBpZDogImFkZENvbnRyb2wiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICBmaWxsOiB0cnVlLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQWRkQ29udHJvbCwKICAgICAgICBpY29uVHlwZTogInBsdXNJbkNpcmNsZSIsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImlucHV0Q29udHJvbEVkaXRvckFkZEJ0biIsCiAgICAgICAgImFyaWEtbGFiZWwiOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgaWQ6ICdpbnB1dENvbnRyb2wuZWRpdG9yLmNvbnRyb2xzVGFiLnNlbGVjdC5hZGRDb250cm9sQXJpYUxhYmVsJywKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWRkIGNvbnRyb2wnCiAgICAgICAgfSkKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImlucHV0Q29udHJvbC5lZGl0b3IuY29udHJvbHNUYWIuYWRkQnV0dG9uTGFiZWwiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQWRkIgogICAgICB9KSkpKSkpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBDb250cm9sc1RhYlVpOwp9KF9yZWFjdC5QdXJlQ29tcG9uZW50KTsKCnZhciBDb250cm9sc1RhYiA9ICgwLCBfcmVhY3QyLmluamVjdEkxOG4pKENvbnRyb2xzVGFiVWkpOwpleHBvcnRzLkNvbnRyb2xzVGFiID0gQ29udHJvbHNUYWI7Cgp2YXIgZ2V0Q29udHJvbHNUYWIgPSBmdW5jdGlvbiBnZXRDb250cm9sc1RhYihkZXBzKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChwcm9wcykgewogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQ29udHJvbHNUYWIsIF9leHRlbmRzKHt9LCBwcm9wcywgewogICAgICBkZXBzOiBkZXBzCiAgICB9KSk7CiAgfTsKfTsKCmV4cG9ydHMuZ2V0Q29udHJvbHNUYWIgPSBnZXRDb250cm9sc1RhYjs="},null]}