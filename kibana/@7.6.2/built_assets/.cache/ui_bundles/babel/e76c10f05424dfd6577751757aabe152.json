{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/util/time_buckets.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/util/time_buckets.js","mtime":1585205046012},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRpbWVCdWNrZXRzID0gVGltZUJ1Y2tldHM7CmV4cG9ydHMuZ2V0Qm91bmRzUm91bmRlZFRvSW50ZXJ2YWwgPSBnZXRCb3VuZHNSb3VuZGVkVG9JbnRlcnZhbDsKZXhwb3J0cy5jYWxjRXNJbnRlcnZhbCA9IGNhbGNFc0ludGVydmFsOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfbW9tZW50ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJtb21lbnQiKSk7Cgp2YXIgX2RhdGVtYXRoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAZWxhc3RpYy9kYXRlbWF0aCIpKTsKCnZhciBfY2hyb21lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJ1aS9jaHJvbWUiKSk7Cgp2YXIgX25ld19wbGF0Zm9ybSA9IHJlcXVpcmUoInVpL25ld19wbGF0Zm9ybSIpOwoKdmFyIF9jYWxjX2F1dG9faW50ZXJ2YWwgPSByZXF1aXJlKCIuL2NhbGNfYXV0b19pbnRlcnZhbCIpOwoKdmFyIF9wYXJzZV9pbnRlcnZhbCA9IHJlcXVpcmUoIi4uLy4uLy4uL2NvbW1vbi91dGlsL3BhcnNlX2ludGVydmFsIik7Cgp2YXIgX3B1YmxpYyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9wbHVnaW5zL2RhdGEvcHVibGljIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoKICogQ29weXJpZ2h0IEVsYXN0aWNzZWFyY2ggQi5WLiBhbmQvb3IgbGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gTGljZW5zZWQgdW5kZXIgdGhlIEVsYXN0aWMgTGljZW5zZTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBFbGFzdGljIExpY2Vuc2UuCiAqLwp2YXIgdW5pdHNEZXNjID0gX2RhdGVtYXRoLmRlZmF1bHQudW5pdHNEZXNjOwp2YXIgbGFyZ2VNYXggPSB1bml0c0Rlc2MuaW5kZXhPZigndycpOyAvLyBNdWx0aXBsZSB1bml0cyBvZiB3ZWVrIG9yIGxvbmdlciBjb252ZXJ0ZWQgdG8gZGF5cyBmb3IgRVMgaW50ZXJ2YWxzLgoKdmFyIGNvbmZpZyA9IF9jaHJvbWUuZGVmYXVsdC5nZXRVaVNldHRpbmdzQ2xpZW50KCk7Cgp2YXIgZ2V0Q29uZmlnID0gZnVuY3Rpb24gZ2V0Q29uZmlnKCkgewogIHJldHVybiBjb25maWcuZ2V0LmFwcGx5KGNvbmZpZywgYXJndW1lbnRzKTsKfTsKCnZhciBjYWxjQXV0byA9ICgwLCBfY2FsY19hdXRvX2ludGVydmFsLnRpbWVCdWNrZXRzQ2FsY0F1dG9JbnRlcnZhbFByb3ZpZGVyKSgpOwovKioKICogSGVscGVyIG9iamVjdCBmb3Igd3JhcHBpbmcgdGhlIGNvbmNlcHQgb2YgYW4gIkludGVydmFsIiwgd2hpY2gKICogZGVzY3JpYmVzIGEgdGltZXNwYW4gdGhhdCB3aWxsIHNlcGFyYXRlIGJ1Y2tldHMgb2YgdGltZSwKICogZm9yIGV4YW1wbGUgdGhlIGludGVydmFsIGJldHdlZW4gcG9pbnRzIG9uIGEgdGltZSBzZXJpZXMgY2hhcnQuCiAqLwoKZnVuY3Rpb24gVGltZUJ1Y2tldHMoKSB7CiAgdGhpcy5iYXJUYXJnZXQgPSBjb25maWcuZ2V0KCdoaXN0b2dyYW06YmFyVGFyZ2V0Jyk7CiAgdGhpcy5tYXhCYXJzID0gY29uZmlnLmdldCgnaGlzdG9ncmFtOm1heEJhcnMnKTsKfQovKioKICogU2V0IHRoZSB0YXJnZXQgbnVtYmVyIG9mIGJhcnMuCiAqCiAqIEBwYXJhbSB7bnVtYmVyfSBidCAtIHRhcmdldCBudW1iZXIgb2YgYmFycyAoYnVja2V0cykuCiAqCiAqIEByZXR1cm5zIHt1bmRlZmluZWR9CiAqLwoKClRpbWVCdWNrZXRzLnByb3RvdHlwZS5zZXRCYXJUYXJnZXQgPSBmdW5jdGlvbiAoYnQpIHsKICB0aGlzLmJhclRhcmdldCA9IGJ0Owp9OwovKioKICogU2V0IHRoZSBtYXhpbXVtIG51bWJlciBvZiBiYXJzLgogKgogKiBAcGFyYW0ge251bWJlcn0gbWIgLSBtYXhpbXVtIG51bWJlciBvZiBiYXJzIChidWNrZXRzKS4KICoKICogQHJldHVybnMge3VuZGVmaW5lZH0KICovCgoKVGltZUJ1Y2tldHMucHJvdG90eXBlLnNldE1heEJhcnMgPSBmdW5jdGlvbiAobWIpIHsKICB0aGlzLm1heEJhcnMgPSBtYjsKfTsKLyoqCiAqIFNldCB0aGUgYm91bmRzIHRoYXQgdGhlc2UgYnVja2V0cyBhcmUgZXhwZWN0ZWQgdG8gY292ZXIuCiAqIFRoaXMgaXMgcmVxdWlyZWQgdG8gc3VwcG9ydCBpbnRlcnZhbCAiYXV0byIgYXMgd2VsbAogKiBhcyBpbnRlcnZhbCBzY2FsaW5nLgogKgogKiBAcGFyYW0ge29iamVjdH0gaW5wdXQgLSBhbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIG1pbiBhbmQgbWF4LAogKiAgICAgICAgICAgICAgICAgICAgICAgcmVwcmVzZW50aW5nIHRoZSBlZGdlcyBmb3IgdGhlIHRpbWUgc3BhbgogKiAgICAgICAgICAgICAgICAgICAgICAgd2Ugc2hvdWxkIGNvdmVyCiAqCiAqIEByZXR1cm5zIHt1bmRlZmluZWR9CiAqLwoKClRpbWVCdWNrZXRzLnByb3RvdHlwZS5zZXRCb3VuZHMgPSBmdW5jdGlvbiAoaW5wdXQpIHsKICBpZiAoIWlucHV0KSByZXR1cm4gdGhpcy5jbGVhckJvdW5kcygpOwogIHZhciBib3VuZHM7CgogIGlmIChfbG9kYXNoLmRlZmF1bHQuaXNQbGFpbk9iamVjdChpbnB1dCkpIHsKICAgIC8vIGFjY2VwdCB0aGUgcmVzcG9uc2UgZnJvbSB0aW1lZmlsdGVyLmdldEFjdGl2ZUJvdW5kcygpCiAgICBib3VuZHMgPSBbaW5wdXQubWluLCBpbnB1dC5tYXhdOwogIH0gZWxzZSB7CiAgICBib3VuZHMgPSBBcnJheS5pc0FycmF5KGlucHV0KSA/IGlucHV0IDogW107CiAgfQoKICB2YXIgbW9tZW50cyA9ICgwLCBfbG9kYXNoLmRlZmF1bHQpKGJvdW5kcykubWFwKF9sb2Rhc2guZGVmYXVsdC5hcnkoX21vbWVudC5kZWZhdWx0LCAxKSkuc29ydEJ5KE51bWJlcik7CiAgdmFyIHZhbGlkID0gbW9tZW50cy5zaXplKCkgPT09IDIgJiYgbW9tZW50cy5ldmVyeShpc1ZhbGlkTW9tZW50KTsKCiAgaWYgKCF2YWxpZCkgewogICAgdGhpcy5jbGVhckJvdW5kcygpOwogICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGJvdW5kcyBzZXQ6ICcgKyBpbnB1dCk7CiAgfQoKICB0aGlzLl9sYiA9IG1vbWVudHMuc2hpZnQoKTsKICB0aGlzLl91YiA9IG1vbWVudHMucG9wKCk7CgogIGlmICh0aGlzLmdldER1cmF0aW9uKCkuYXNTZWNvbmRzKCkgPCAwKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnRlcnZhbHMgbXVzdCBiZSBwb3NpdGl2ZScpOwogIH0KfTsKLyoqCiAqIENsZWFyIHRoZSBzdG9yZWQgYm91bmRzCiAqCiAqIEByZXR1cm4ge3VuZGVmaW5lZH0KICovCgoKVGltZUJ1Y2tldHMucHJvdG90eXBlLmNsZWFyQm91bmRzID0gZnVuY3Rpb24gKCkgewogIHRoaXMuX2xiID0gdGhpcy5fdWIgPSBudWxsOwp9OwovKioKICogQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgcmVjZWl2ZWQgYm91bmRzIHlldAogKgogKiBAcmV0dXJuIHtCb29sZWFufQogKi8KCgpUaW1lQnVja2V0cy5wcm90b3R5cGUuaGFzQm91bmRzID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBpc1ZhbGlkTW9tZW50KHRoaXMuX3ViKSAmJiBpc1ZhbGlkTW9tZW50KHRoaXMuX2xiKTsKfTsKLyoqCiAqIFJldHVybiB0aGUgY3VycmVudCBib3VuZHMsIGlmIHdlIGhhdmUgYW55LgogKgogKiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdCBjbG9uZSB0aGUgYm91bmRzLCBzbyBlZGl0aW5nIHRoZW0gbWF5IGhhdmUgdW5leHBlY3RlZCBzaWRlLWVmZmVjdHMuCiAqIEFsd2F5cyBjYWxsIGJvdW5kcy5taW4uY2xvbmUoKSBiZWZvcmUgZWRpdGluZy4KICoKICogQHJldHVybiB7b2JqZWN0fHVuZGVmaW5lZH0gLSBJZiBib3VuZHMgYXJlIG5vdCBkZWZpbmVkLCB0aGlzCiAqICAgICAgICAgICAgICAgICAgICAgIHJldHVybnMgdW5kZWZpbmVkLCBlbHNlIGl0IHJldHVybnMgdGhlIGJvdW5kcwogKiAgICAgICAgICAgICAgICAgICAgICBmb3IgdGhlc2UgYnVja2V0cy4gVGhpcyBvYmplY3QgaGFzIHR3byBwcm9wcywKICogICAgICAgICAgICAgICAgICAgICAgbWluIGFuZCBtYXguIEVhY2ggcHJvcGVydHkgd2lsbCBiZSBhIG1vbWVudCgpCiAqICAgICAgICAgICAgICAgICAgICAgIG9iamVjdAogKi8KCgpUaW1lQnVja2V0cy5wcm90b3R5cGUuZ2V0Qm91bmRzID0gZnVuY3Rpb24gKCkgewogIGlmICghdGhpcy5oYXNCb3VuZHMoKSkgcmV0dXJuOwogIHJldHVybiB7CiAgICBtaW46IHRoaXMuX2xiLAogICAgbWF4OiB0aGlzLl91YgogIH07Cn07Ci8qKgogKiBHZXQgYSBtb21lbnQgZHVyYXRpb24gb2JqZWN0IHJlcHJlc2VudGluZwogKiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgYm91bmRzLCBpZiB0aGUgYm91bmRzCiAqIGFyZSBzZXQuCiAqCiAqIEByZXR1cm4ge21vbWVudC5kdXJhdGlvbnx1bmRlZmluZWR9CiAqLwoKClRpbWVCdWNrZXRzLnByb3RvdHlwZS5nZXREdXJhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICBpZiAoIXRoaXMuaGFzQm91bmRzKCkpIHJldHVybjsKICByZXR1cm4gX21vbWVudC5kZWZhdWx0LmR1cmF0aW9uKHRoaXMuX3ViIC0gdGhpcy5fbGIsICdtcycpOwp9OwovKioKICogVXBkYXRlIHRoZSBpbnRlcnZhbCBhdCB3aGljaCBidWNrZXRzIHNob3VsZCBiZQogKiBnZW5lcmF0ZWQuCiAqCiAqIElucHV0IGNhbiBiZSBvbmUgb2YgdGhlIGZvbGxvd2luZzoKICogIC0gImF1dG8iCiAqICAtIGFuIGludGVydmFsIFN0cmluZywgc3VjaCBhcyA3ZCwgMWggb3IgMzBtIHdoaWNoIGNhbiBiZSBwYXJzZWQgdG8gYSBtb21lbnQgZHVyYXRpb24gdXNpbmcgbWwvY29tbW9uL3V0aWwvcGFyc2VfaW50ZXJ2YWwKICogIC0gYSBtb21lbnQuZHVyYXRpb24gb2JqZWN0LgogKgogKiBAcGFyYW0ge3N0cmluZ3xtb21lbnQuZHVyYXRpb259IGlucHV0IC0gc2VlIGRlc2MKICovCgoKVGltZUJ1Y2tldHMucHJvdG90eXBlLnNldEludGVydmFsID0gZnVuY3Rpb24gKGlucHV0KSB7CiAgLy8gUHJlc2VydmUgdGhlIG9yaWdpbmFsIHVuaXRzIGJlY2F1c2UgdGhleSdyZSBsb3N0IHdoZW4gdGhlIGludGVydmFsIGlzIGNvbnZlcnRlZCB0byBhCiAgLy8gbW9tZW50IGR1cmF0aW9uIG9iamVjdC4KICB0aGlzLm9yaWdpbmFsSW50ZXJ2YWwgPSBpbnB1dDsKICB2YXIgaW50ZXJ2YWwgPSBpbnB1dDsKCiAgaWYgKCFpbnRlcnZhbCB8fCBpbnRlcnZhbCA9PT0gJ2F1dG8nKSB7CiAgICB0aGlzLl9pID0gJ2F1dG8nOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKF9sb2Rhc2guZGVmYXVsdC5pc1N0cmluZyhpbnRlcnZhbCkpIHsKICAgIGlucHV0ID0gaW50ZXJ2YWw7CiAgICBpbnRlcnZhbCA9ICgwLCBfcGFyc2VfaW50ZXJ2YWwucGFyc2VJbnRlcnZhbCkoaW50ZXJ2YWwpOwoKICAgIGlmICgraW50ZXJ2YWwgPT09IDApIHsKICAgICAgaW50ZXJ2YWwgPSBudWxsOwogICAgfQogIH0gLy8gSWYgdGhlIHZhbHVlIHdhc24ndCBjb252ZXJ0ZWQgdG8gYSBkdXJhdGlvbiwgYW5kIGlzbid0IGFscmVhZHkgYSBkdXJhdGlvbiwgd2UgaGF2ZSBhIHByb2JsZW0KCgogIGlmICghX21vbWVudC5kZWZhdWx0LmlzRHVyYXRpb24oaW50ZXJ2YWwpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCciJyArIGlucHV0ICsgJyIgaXMgbm90IGEgdmFsaWQgaW50ZXJ2YWwuJyk7CiAgfQoKICB0aGlzLl9pID0gaW50ZXJ2YWw7Cn07Ci8qKgogKiBHZXQgdGhlIGludGVydmFsIGZvciB0aGUgYnVja2V0cy4gSWYgdGhlCiAqIG51bWJlciBvZiBidWNrZXRzIGNyZWF0ZWQgYnkgdGhlIGludGVydmFsIHNldAogKiBpcyBsYXJnZXIgdGhhbiBjb25maWc6aGlzdG9ncmFtOm1heEJhcnMgdGhlbiB0aGUKICogaW50ZXJ2YWwgd2lsbCBiZSBzY2FsZWQgdXAuIElmIHRoZSBudW1iZXIgb2YgYnVja2V0cwogKiBjcmVhdGVkIGlzIGxlc3MgdGhhbiBvbmUsIHRoZSBpbnRlcnZhbCBpcyBzY2FsZWQgYmFjay4KICoKICogVGhlIGludGVydmFsIG9iamVjdCByZXR1cm5lZCBpcyBhIG1vbWVudC5kdXJhdGlvbgogKiBvYmplY3QgdGhhdCBoYXMgYmVlbiBkZWNvcmF0ZWQgd2l0aCB0aGUgZm9sbG93aW5nCiAqIHByb3BlcnRpZXMuCiAqCiAqIGludGVydmFsLmRlc2NyaXB0aW9uOiBhIHRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGludGVydmFsLgogKiAgIGRlc2lnbmVkIHRvIGJlIHVzZWQgbGlzdCAiZmllbGQgcGVyIHt7IGRlc2MgfX0iLgogKiAgICAgLSAibWludXRlIgogKiAgICAgLSAiMTAgZGF5cyIKICogICAgIC0gIjMgeWVhcnMiCiAqCiAqIGludGVydmFsLmV4cHI6IHRoZSBlbGFzdGljc2VhcmNoIGV4cHJlc3Npb24gdGhhdCBjcmVhdGVzIHRoaXMKICogICBpbnRlcnZhbC4gSWYgdGhlIGludGVydmFsIGRvZXMgbm90IHByb3Blcmx5IGZvcm0gYW4gZWxhc3RpY3NlYXJjaAogKiAgIGV4cHJlc3Npb24gaXQgd2lsbCBiZSBmb3JjZWQgaW50byBvbmUuCiAqCiAqIGludGVydmFsLnNjYWxlZDogdGhlIGludGVydmFsIHdhcyBhZGp1c3RlZCB0bwogKiAgIGFjY29tbW9kYXRlIHRoZSBtYXhCYXJzIHNldHRpbmcuCiAqCiAqIGludGVydmFsLnNjYWxlOiB0aGUgbnVtYmVyIHRoYXQgeS12YWx1ZXMgc2hvdWxkIGJlCiAqICAgbXVsdGlwbGllZCBieQogKgogKiBpbnRlcnZhbC5zY2FsZURlc2NyaXB0aW9uOiBhIGRlc2NyaXB0aW9uIHRoYXQgcmVmbGVjdHMKICogICB0aGUgdmFsdWVzIHdoaWNoIHdpbGwgYmUgcHJvZHVjZWQgYnkgdXNpbmcgdGhlCiAqICAgaW50ZXJ2YWwuc2NhbGUuCiAqCiAqCiAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXQogKi8KCgpUaW1lQnVja2V0cy5wcm90b3R5cGUuZ2V0SW50ZXJ2YWwgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHNlbGYgPSB0aGlzOwogIHZhciBkdXJhdGlvbiA9IHNlbGYuZ2V0RHVyYXRpb24oKTsKICByZXR1cm4gZGVjb3JhdGVJbnRlcnZhbChtYXliZVNjYWxlSW50ZXJ2YWwocmVhZEludGVydmFsKCkpLCBkdXJhdGlvbik7IC8vIGVpdGhlciBwdWxsIHRoZSBpbnRlcnZhbCBmcm9tIHN0YXRlIG9yIGNhbGN1bGF0ZSB0aGUgYXV0by1pbnRlcnZhbAoKICBmdW5jdGlvbiByZWFkSW50ZXJ2YWwoKSB7CiAgICB2YXIgaW50ZXJ2YWwgPSBzZWxmLl9pOwogICAgaWYgKF9tb21lbnQuZGVmYXVsdC5pc0R1cmF0aW9uKGludGVydmFsKSkgcmV0dXJuIGludGVydmFsOwogICAgcmV0dXJuIGNhbGNBdXRvLm5lYXIoc2VsZi5iYXJUYXJnZXQsIGR1cmF0aW9uKTsKICB9IC8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgaW50ZXJ2YWwgc2hvdWxkIGJlIHNjYWxlZCwgYW5kIHNjYWxlIGl0IGlmIHNvCgoKICBmdW5jdGlvbiBtYXliZVNjYWxlSW50ZXJ2YWwoaW50ZXJ2YWwpIHsKICAgIGlmICghc2VsZi5oYXNCb3VuZHMoKSkgcmV0dXJuIGludGVydmFsOwogICAgdmFyIG1heExlbmd0aCA9IHNlbGYubWF4QmFyczsKICAgIHZhciBhcHByb3hMZW4gPSBkdXJhdGlvbiAvIGludGVydmFsOwogICAgdmFyIHNjYWxlZDsgLy8gSWYgdGhlIG51bWJlciBvZiBidWNrZXRzIHdlIGdvdCBiYWNrIGZyb20gdXNpbmcgdGhlIGJhclRhcmdldCBpcyBsZXNzIHRoYW4KICAgIC8vIG1heEJhcnMsIHRoYW4gdXNlIHRoZSBsZXNzVGhhbiBydWxlIHRvIHRyeSBhbmQgZ2V0IGNsb3NlciB0byBtYXhCYXJzLgoKICAgIGlmIChhcHByb3hMZW4gPiBtYXhMZW5ndGgpIHsKICAgICAgc2NhbGVkID0gY2FsY0F1dG8ubGVzc1RoYW4obWF4TGVuZ3RoLCBkdXJhdGlvbik7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gaW50ZXJ2YWw7CiAgICB9CgogICAgaWYgKCtzY2FsZWQgPT09ICtpbnRlcnZhbCkgcmV0dXJuIGludGVydmFsOwogICAgZGVjb3JhdGVJbnRlcnZhbChpbnRlcnZhbCwgZHVyYXRpb24pOwogICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5hc3NpZ24oc2NhbGVkLCB7CiAgICAgIHByZVNjYWxlZDogaW50ZXJ2YWwsCiAgICAgIHNjYWxlOiBpbnRlcnZhbCAvIHNjYWxlZCwKICAgICAgc2NhbGVkOiB0cnVlCiAgICB9KTsKICB9Cn07Ci8qKgogKiBSZXR1cm5zIGFuIGludGVydmFsIHdoaWNoIGluIHRoZSBsYXN0IHN0ZXAgb2YgY2FsY3VsYXRpb24gaXMgcm91bmRlZCB0bwogKiB0aGUgY2xvc2VzdCBtdWx0aXBsZSBvZiB0aGUgc3VwcGxpZWQgZGl2aXNvciAoaW4gc2Vjb25kcykuCiAqCiAqIEByZXR1cm4ge21vbWVudC5kdXJhdGlvbnx1bmRlZmluZWR9CiAqLwoKClRpbWVCdWNrZXRzLnByb3RvdHlwZS5nZXRJbnRlcnZhbFRvTmVhcmVzdE11bHRpcGxlID0gZnVuY3Rpb24gKGRpdmlzb3JTZWNzKSB7CiAgdmFyIGludGVydmFsID0gdGhpcy5nZXRJbnRlcnZhbCgpOwogIHZhciBpbnRlcnZhbFNlY3MgPSBpbnRlcnZhbC5hc1NlY29uZHMoKTsKICB2YXIgcmVtYWluZGVyID0gaW50ZXJ2YWxTZWNzICUgZGl2aXNvclNlY3M7CgogIGlmIChyZW1haW5kZXIgPT09IDApIHsKICAgIHJldHVybiBpbnRlcnZhbDsKICB9IC8vIENyZWF0ZSBhIG5ldyBpbnRlcnZhbCB3aGljaCBpcyBhIG11bHRpcGxlIG9mIHRoZSBzdXBwbGllZCBkaXZpc29yIChub3QgemVybykuCgoKICB2YXIgbmVhcmVzdE11bHRpcGxlID0gcmVtYWluZGVyID4gZGl2aXNvclNlY3MgLyAyID8gaW50ZXJ2YWxTZWNzICsgZGl2aXNvclNlY3MgLSByZW1haW5kZXIgOiBpbnRlcnZhbFNlY3MgLSByZW1haW5kZXI7CiAgbmVhcmVzdE11bHRpcGxlID0gbmVhcmVzdE11bHRpcGxlID09PSAwID8gZGl2aXNvclNlY3MgOiBuZWFyZXN0TXVsdGlwbGU7CgogIHZhciBuZWFyZXN0TXVsdGlwbGVJbnQgPSBfbW9tZW50LmRlZmF1bHQuZHVyYXRpb24obmVhcmVzdE11bHRpcGxlLCAnc2Vjb25kcycpOwoKICBkZWNvcmF0ZUludGVydmFsKG5lYXJlc3RNdWx0aXBsZUludCwgdGhpcy5nZXREdXJhdGlvbigpKTsgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSBuZXcgaW50ZXJ2YWwgaXMgc2NhbGVkIGNvbXBhcmVkIHRvIHRoZSBvcmlnaW5hbC4KCiAgdmFyIHByZVNjYWxlZCA9IF9sb2Rhc2guZGVmYXVsdC5nZXQoaW50ZXJ2YWwsICdwcmVTY2FsZWQnKTsKCiAgaWYgKHByZVNjYWxlZCAhPT0gdW5kZWZpbmVkICYmIHByZVNjYWxlZCA8IG5lYXJlc3RNdWx0aXBsZUludCkgewogICAgbmVhcmVzdE11bHRpcGxlSW50LnByZVNjYWxlZCA9IHByZVNjYWxlZDsKICAgIG5lYXJlc3RNdWx0aXBsZUludC5zY2FsZSA9IHByZVNjYWxlZCAvIG5lYXJlc3RNdWx0aXBsZUludDsKICAgIG5lYXJlc3RNdWx0aXBsZUludC5zY2FsZWQgPSB0cnVlOwogIH0KCiAgcmV0dXJuIG5lYXJlc3RNdWx0aXBsZUludDsKfTsKLyoqCiAqIEdldCBhIGRhdGUgZm9ybWF0IHN0cmluZyB0aGF0IHdpbGwgcmVwcmVzZW50IGRhdGVzIHRoYXQKICogcHJvZ3Jlc3MgYXQgb3VyIGludGVydmFsLgogKgogKiBTaW5jZSBvdXIgaW50ZXJ2YWwgY2FuIGJlIGFzIHNtYWxsIGFzIDFtcywgdGhlIGRlZmF1bHQKICogZGF0ZSBmb3JtYXQgaXMgdXN1YWxseSB3YXkgdG9vIG11Y2guIHdpdGggYGRhdGVGb3JtYXQ6c2NhbGVkYAogKiB1c2VycyBjYW4gbW9kaWZ5IGhvdyBkYXRlcyBhcmUgZm9ybWF0dGVkIHdpdGhpbiBzZXJpZXMKICogcHJvZHVjZWQgYnkgVGltZUJ1Y2tldHMKICoKICogQHJldHVybiB7c3RyaW5nfQogKi8KCgpUaW1lQnVja2V0cy5wcm90b3R5cGUuZ2V0U2NhbGVkRGF0ZUZvcm1hdCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgaW50ZXJ2YWwgPSB0aGlzLmdldEludGVydmFsKCk7CiAgdmFyIHJ1bGVzID0gY29uZmlnLmdldCgnZGF0ZUZvcm1hdDpzY2FsZWQnKTsKCiAgZm9yICh2YXIgaSA9IHJ1bGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICB2YXIgcnVsZSA9IHJ1bGVzW2ldOwoKICAgIGlmICghcnVsZVswXSB8fCBpbnRlcnZhbCA+PSBfbW9tZW50LmRlZmF1bHQuZHVyYXRpb24ocnVsZVswXSkpIHsKICAgICAgcmV0dXJuIHJ1bGVbMV07CiAgICB9CiAgfQoKICByZXR1cm4gY29uZmlnLmdldCgnZGF0ZUZvcm1hdCcpOwp9OwoKVGltZUJ1Y2tldHMucHJvdG90eXBlLmdldFNjYWxlZERhdGVGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGZpZWxkRm9ybWF0cyA9IF9uZXdfcGxhdGZvcm0ubnBTdGFydC5wbHVnaW5zLmRhdGEuZmllbGRGb3JtYXRzOwogIHZhciBEYXRlRmllbGRGb3JtYXQgPSBmaWVsZEZvcm1hdHMuZ2V0VHlwZShfcHVibGljLkZJRUxEX0ZPUk1BVF9JRFMuREFURSk7CiAgcmV0dXJuIG5ldyBEYXRlRmllbGRGb3JtYXQoewogICAgcGF0dGVybjogdGhpcy5nZXRTY2FsZWREYXRlRm9ybWF0KCkKICB9LCBnZXRDb25maWcpOwp9OyAvLyBBcHBlbmRzIHNvbWUgVGltZUJ1Y2tldHMgc3BlY2lmaWMgcHJvcGVydGllcyB0byB0aGUgbW9tZW50LmpzIGR1cmF0aW9uIGludGVydmFsLgovLyBVc2VzIHRoZSBvcmlnaW5hbER1cmF0aW9uIGZyb20gd2hpY2ggdGhlIHRpbWUgYnVja2V0IHdhcyBjcmVhdGVkIHRvIGNhbGN1bGF0ZSB0aGUgb3ZlcmZsb3cKLy8gcHJvcGVydHkgKGkuZS4gZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBzdXBwbGllZCBkdXJhdGlvbiBhbmQgdGhlIGNhbGN1bGF0ZWQgYnVja2V0IGludGVydmFsKS4KCgpmdW5jdGlvbiBkZWNvcmF0ZUludGVydmFsKGludGVydmFsLCBvcmlnaW5hbER1cmF0aW9uKSB7CiAgdmFyIGVzSW50ZXJ2YWwgPSBjYWxjRXNJbnRlcnZhbChpbnRlcnZhbCk7CiAgaW50ZXJ2YWwuZXNWYWx1ZSA9IGVzSW50ZXJ2YWwudmFsdWU7CiAgaW50ZXJ2YWwuZXNVbml0ID0gZXNJbnRlcnZhbC51bml0OwogIGludGVydmFsLmV4cHJlc3Npb24gPSBlc0ludGVydmFsLmV4cHJlc3Npb247CiAgaW50ZXJ2YWwub3ZlcmZsb3cgPSBvcmlnaW5hbER1cmF0aW9uID4gaW50ZXJ2YWwgPyBfbW9tZW50LmRlZmF1bHQuZHVyYXRpb24oaW50ZXJ2YWwgLSBvcmlnaW5hbER1cmF0aW9uKSA6IGZhbHNlOwoKICB2YXIgcHJldHR5VW5pdHMgPSBfbW9tZW50LmRlZmF1bHQubm9ybWFsaXplVW5pdHMoZXNJbnRlcnZhbC51bml0KTsKCiAgaWYgKGVzSW50ZXJ2YWwudmFsdWUgPT09IDEpIHsKICAgIGludGVydmFsLmRlc2NyaXB0aW9uID0gcHJldHR5VW5pdHM7CiAgfSBlbHNlIHsKICAgIGludGVydmFsLmRlc2NyaXB0aW9uID0gIiIuY29uY2F0KGVzSW50ZXJ2YWwudmFsdWUsICIgIikuY29uY2F0KHByZXR0eVVuaXRzLCAicyIpOwogIH0KCiAgcmV0dXJuIGludGVydmFsOwp9CgpmdW5jdGlvbiBpc1ZhbGlkTW9tZW50KG0pIHsKICByZXR1cm4gbSAmJiAnaXNWYWxpZCcgaW4gbSAmJiBtLmlzVmFsaWQoKTsKfQoKZnVuY3Rpb24gZ2V0Qm91bmRzUm91bmRlZFRvSW50ZXJ2YWwoYm91bmRzLCBpbnRlcnZhbCkgewogIHZhciBpbmNsdXNpdmVFbmQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwogIC8vIFJldHVybnMgbmV3IGJvdW5kcywgY3JlYXRlZCBieSBmbG9vcmluZyB0aGUgbWluIG9mIHRoZSBwcm92aWRlZCBib3VuZHMgdG8gdGhlIHN0YXJ0IG9mCiAgLy8gdGhlIHNwZWNpZmllZCBpbnRlcnZhbCAoYSBtb21lbnQgZHVyYXRpb24pLCBhbmQgcm91bmRlZCB1cHdhcmRzIChNYXRoLmNlaWwpIHRvIDFtcyBiZWZvcmUKICAvLyB0aGUgc3RhcnQgb2YgdGhlIG5leHQgaW50ZXJ2YWwgKEtpYmFuYSBkYXNoYm9hcmRzIHNlYXJjaCA+PSBib3VuZHMgbWluLCBhbmQgPD0gYm91bmRzIG1heCwKICAvLyBzbyB3ZSBzdWJ0cmFjdCAxbXMgb2ZmIHRoZSBtYXggdG8gYXZvaWQgcXVlcnlpbmcgc3RhcnQgb2YgdGhlIG5ldyBFbGFzdGljc2VhcmNoIGFnZ3JlZ2F0aW9uIGJ1Y2tldCkuCiAgdmFyIGludGVydmFsTXMgPSBpbnRlcnZhbC5hc01pbGxpc2Vjb25kcygpOwogIHZhciBhZGp1c3RlZE1pbk1zID0gTWF0aC5mbG9vcihib3VuZHMubWluLnZhbHVlT2YoKSAvIGludGVydmFsTXMpICogaW50ZXJ2YWxNczsKICB2YXIgYWRqdXN0ZWRNYXhNcyA9IE1hdGguY2VpbChib3VuZHMubWF4LnZhbHVlT2YoKSAvIGludGVydmFsTXMpICogaW50ZXJ2YWxNczsgLy8gRG9uJ3QgaW5jbHVkZSB0aGUgc3RhcnQgbXMgb2YgdGhlIG5leHQgYnVja2V0IHVubGVzcyBzcGVjaWZpZWQuLgoKICBpZiAoaW5jbHVzaXZlRW5kID09PSBmYWxzZSkgewogICAgYWRqdXN0ZWRNYXhNcyA9IGFkanVzdGVkTWF4TXMgLSAxOwogIH0KCiAgcmV0dXJuIHsKICAgIG1pbjogKDAsIF9tb21lbnQuZGVmYXVsdCkoYWRqdXN0ZWRNaW5NcyksCiAgICBtYXg6ICgwLCBfbW9tZW50LmRlZmF1bHQpKGFkanVzdGVkTWF4TXMpCiAgfTsKfQoKZnVuY3Rpb24gY2FsY0VzSW50ZXJ2YWwoZHVyYXRpb24pIHsKICAvLyBDb252ZXJ0cyBhIG1vbWVudC5kdXJhdGlvbiBpbnRvIGFuIEVsYXN0aWNzZWFyY2ggY29tcGF0aWJsZSBpbnRlcnZhbCBleHByZXNzaW9uLAogIC8vIGFuZCBwcm92aWRlcyBhc3NvY2lhdGVkIG1ldGFkYXRhLgogIC8vIE5vdGUgdGhpcyB3YXMgYSBjb3B5IG9mIEtpYmFuYSdzIG9yaWdpbmFsIHVpL3RpbWVfYnVja2V0cy9jYWxjX2VzX2ludGVydmFsLAogIC8vIGJ1dCB3aXRoIHRoZSBkZWZpbml0aW9uIG9mIGEgJ2xhcmdlJyB1bml0IGNoYW5nZWQgZnJvbSAnTScgdG8gJ3cnLAogIC8vIGJyaW5naW5nIGl0IGludG8gbGluZSB3aXRoIHRoZSB0aW1lIHVuaXRzIHN1cHBvcnRlZCBieSBFbGFzdGljc2VhcmNoCiAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bml0c0Rlc2MubGVuZ3RoOyBpKyspIHsKICAgIHZhciB1bml0ID0gdW5pdHNEZXNjW2ldOwogICAgdmFyIHZhbCA9IGR1cmF0aW9uLmFzKHVuaXQpOyAvLyBmaW5kIGEgdW5pdCB0aGF0IHJvdW5kcyBuZWF0bHkKCiAgICBpZiAodmFsID49IDEgJiYgTWF0aC5mbG9vcih2YWwpID09PSB2YWwpIHsKICAgICAgLy8gaWYgdGhlIHVuaXQgaXMgImxhcmdlIiwgbGlrZSB5ZWFycywgYnV0IGlzbid0IHNldCB0byAxLCBFUyB3aWxsIHRocm93IGFuIGVycm9yLgogICAgICAvLyBTbyBrZWVwIGdvaW5nIHVudGlsIHdlIGdldCBvdXQgb2YgdGhlICJsYXJnZSIgdW5pdHMuCiAgICAgIGlmIChpIDw9IGxhcmdlTWF4ICYmIHZhbCAhPT0gMSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIHZhbHVlOiB2YWwsCiAgICAgICAgdW5pdDogdW5pdCwKICAgICAgICBleHByZXNzaW9uOiB2YWwgKyB1bml0CiAgICAgIH07CiAgICB9CiAgfQoKICB2YXIgbXMgPSBkdXJhdGlvbi5hcygnbXMnKTsKICByZXR1cm4gewogICAgdmFsdWU6IG1zLAogICAgdW5pdDogJ21zJywKICAgIGV4cHJlc3Npb246IG1zICsgJ21zJwogIH07Cn0="},null]}