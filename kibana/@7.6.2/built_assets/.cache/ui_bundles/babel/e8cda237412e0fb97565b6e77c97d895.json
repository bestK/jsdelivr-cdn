{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/index_management/public/app/sections/home/index_list/index_table/index_table.js","dependencies":[{"path":"x-pack/legacy/plugins/index_management/public/app/sections/home/index_list/index_table/index_table.js","mtime":1585205044457},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkluZGV4VGFibGUgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX3JlYWN0Um91dGVyRG9tID0gcmVxdWlyZSgicmVhY3Qtcm91dGVyLWRvbSIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vY29tbW9uL2NvbnN0YW50cyIpOwoKdmFyIF9jb25zdGFudHMyID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29uc3RhbnRzIik7Cgp2YXIgX3NlcnZpY2VzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vc2VydmljZXMiKTsKCnZhciBfdWlfbWV0cmljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vc2VydmljZXMvdWlfbWV0cmljIik7Cgp2YXIgX2luZGV4X21hbmFnZW1lbnRfZXh0ZW5zaW9ucyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uL2luZGV4X21hbmFnZW1lbnRfZXh0ZW5zaW9ucyIpOwoKdmFyIF9yZW5kZXJfYmFkZ2VzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vbGliL3JlbmRlcl9iYWRnZXMiKTsKCnZhciBfY29tcG9uZW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMiKTsKCnZhciBfaW5kZXhfYWN0aW9uc19jb250ZXh0X21lbnUgPSByZXF1aXJlKCIuLi9pbmRleF9hY3Rpb25zX2NvbnRleHRfbWVudSIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9Cgp2YXIgSEVBREVSUyA9IHsKICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleFRhYmxlLmhlYWRlcnMubmFtZUhlYWRlcicsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnTmFtZScKICB9KSwKICBoZWFsdGg6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4VGFibGUuaGVhZGVycy5oZWFsdGhIZWFkZXInLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ0hlYWx0aCcKICB9KSwKICBzdGF0dXM6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4VGFibGUuaGVhZGVycy5zdGF0dXNIZWFkZXInLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ1N0YXR1cycKICB9KSwKICBwcmltYXJ5OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleFRhYmxlLmhlYWRlcnMucHJpbWFyeUhlYWRlcicsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnUHJpbWFyaWVzJwogIH0pLAogIHJlcGxpY2E6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4VGFibGUuaGVhZGVycy5yZXBsaWNhSGVhZGVyJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdSZXBsaWNhcycKICB9KSwKICBkb2N1bWVudHM6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4VGFibGUuaGVhZGVycy5kb2N1bWVudHNIZWFkZXInLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ0RvY3MgY291bnQnCiAgfSksCiAgc2l6ZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhUYWJsZS5oZWFkZXJzLnN0b3JhZ2VTaXplSGVhZGVyJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdTdG9yYWdlIHNpemUnCiAgfSkKfTsKCnZhciBJbmRleFRhYmxlID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhJbmRleFRhYmxlLCBfQ29tcG9uZW50KTsKCiAgX2NyZWF0ZUNsYXNzKEluZGV4VGFibGUsIG51bGwsIFt7CiAgICBrZXk6ICJnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhwcm9wcywgc3RhdGUpIHsKICAgICAgLy8gRGVzZWxjdCBhbnkgaW5kaWNlcyB3aGljaCBubyBsb25nZXIgZXhpc3QsIGUuZy4gdGhleSd2ZSBiZWVuIGRlbGV0ZWQuCiAgICAgIHZhciBzZWxlY3RlZEluZGljZXNNYXAgPSBzdGF0ZS5zZWxlY3RlZEluZGljZXNNYXA7CiAgICAgIHZhciBpbmRleE5hbWVzID0gcHJvcHMuaW5kaWNlcy5tYXAoZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgcmV0dXJuIGluZGV4Lm5hbWU7CiAgICAgIH0pOwogICAgICB2YXIgc2VsZWN0ZWRJbmRleE5hbWVzID0gT2JqZWN0LmtleXMoc2VsZWN0ZWRJbmRpY2VzTWFwKTsKICAgICAgdmFyIG1pc3NpbmdJbmRleE5hbWVzID0gc2VsZWN0ZWRJbmRleE5hbWVzLmZpbHRlcihmdW5jdGlvbiAoc2VsZWN0ZWRJbmRleE5hbWUpIHsKICAgICAgICByZXR1cm4gIWluZGV4TmFtZXMuaW5jbHVkZXMoc2VsZWN0ZWRJbmRleE5hbWUpOwogICAgICB9KTsKCiAgICAgIGlmIChtaXNzaW5nSW5kZXhOYW1lcy5sZW5ndGgpIHsKICAgICAgICB2YXIgbmV3TWFwID0gX29iamVjdFNwcmVhZCh7fSwgc2VsZWN0ZWRJbmRpY2VzTWFwKTsKCiAgICAgICAgbWlzc2luZ0luZGV4TmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobWlzc2luZ0luZGV4TmFtZSkgewogICAgICAgICAgcmV0dXJuIGRlbGV0ZSBuZXdNYXBbbWlzc2luZ0luZGV4TmFtZV07CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHNlbGVjdGVkSW5kaWNlc01hcDogbmV3TWFwCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfV0pOwoKICBmdW5jdGlvbiBJbmRleFRhYmxlKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEluZGV4VGFibGUpOwoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKEluZGV4VGFibGUpLmNhbGwodGhpcywgcHJvcHMpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvblNvcnQiLCBmdW5jdGlvbiAoY29sdW1uKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLAogICAgICAgICAgc29ydEZpZWxkID0gX3RoaXMkcHJvcHMuc29ydEZpZWxkLAogICAgICAgICAgaXNTb3J0QXNjZW5kaW5nID0gX3RoaXMkcHJvcHMuaXNTb3J0QXNjZW5kaW5nLAogICAgICAgICAgc29ydENoYW5nZWQgPSBfdGhpcyRwcm9wcy5zb3J0Q2hhbmdlZDsKICAgICAgdmFyIG5ld0lzU29ydEFzY2VuZGluZyA9IHNvcnRGaWVsZCA9PT0gY29sdW1uID8gIWlzU29ydEFzY2VuZGluZyA6IHRydWU7CiAgICAgIHNvcnRDaGFuZ2VkKGNvbHVtbiwgbmV3SXNTb3J0QXNjZW5kaW5nKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uRmlsdGVyQ2hhbmdlZCIsIGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBxdWVyeSA9IF9yZWYucXVlcnksCiAgICAgICAgICBlcnJvciA9IF9yZWYuZXJyb3I7CgogICAgICBpZiAoZXJyb3IpIHsKICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBmaWx0ZXJFcnJvcjogZXJyb3IKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5wcm9wcy5maWx0ZXJDaGFuZ2VkKHF1ZXJ5KTsKCiAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgZmlsdGVyRXJyb3I6IG51bGwKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0RmlsdGVycyIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGFsbEluZGljZXMgPSBfdGhpcy5wcm9wcy5hbGxJbmRpY2VzOwogICAgICByZXR1cm4gKDAsIF9pbmRleF9tYW5hZ2VtZW50X2V4dGVuc2lvbnMuZ2V0RmlsdGVyRXh0ZW5zaW9ucykoKS5yZWR1Y2UoZnVuY3Rpb24gKGFjY3VtLCBmaWx0ZXJFeHRlbnNpb24pIHsKICAgICAgICB2YXIgZmlsdGVyc1RvQWRkID0gZmlsdGVyRXh0ZW5zaW9uKGFsbEluZGljZXMpOwogICAgICAgIHJldHVybiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFjY3VtKSwgX3RvQ29uc3VtYWJsZUFycmF5KGZpbHRlcnNUb0FkZCkpOwogICAgICB9LCBbXSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ0b2dnbGVBbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhbGxTZWxlY3RlZCA9IF90aGlzLmFyZUFsbEl0ZW1zU2VsZWN0ZWQoKTsKCiAgICAgIGlmIChhbGxTZWxlY3RlZCkgewogICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBzZWxlY3RlZEluZGljZXNNYXA6IHt9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBpbmRpY2VzID0gX3RoaXMucHJvcHMuaW5kaWNlczsKICAgICAgdmFyIHNlbGVjdGVkSW5kaWNlc01hcCA9IHt9OwogICAgICBpbmRpY2VzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgdmFyIG5hbWUgPSBfcmVmMi5uYW1lOwogICAgICAgIHNlbGVjdGVkSW5kaWNlc01hcFtuYW1lXSA9IHRydWU7CiAgICAgIH0pOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHNlbGVjdGVkSW5kaWNlc01hcDogc2VsZWN0ZWRJbmRpY2VzTWFwCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidG9nZ2xlSXRlbSIsIGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChfcmVmMykgewogICAgICAgIHZhciBzZWxlY3RlZEluZGljZXNNYXAgPSBfcmVmMy5zZWxlY3RlZEluZGljZXNNYXA7CgogICAgICAgIHZhciBuZXdNYXAgPSBfb2JqZWN0U3ByZWFkKHt9LCBzZWxlY3RlZEluZGljZXNNYXApOwoKICAgICAgICBpZiAobmV3TWFwW25hbWVdKSB7CiAgICAgICAgICBkZWxldGUgbmV3TWFwW25hbWVdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBuZXdNYXBbbmFtZV0gPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHNlbGVjdGVkSW5kaWNlc01hcDogbmV3TWFwCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJpc0l0ZW1TZWxlY3RlZCIsIGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIHJldHVybiAhIV90aGlzLnN0YXRlLnNlbGVjdGVkSW5kaWNlc01hcFtuYW1lXTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImFyZUFsbEl0ZW1zU2VsZWN0ZWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBpbmRpY2VzID0gX3RoaXMucHJvcHMuaW5kaWNlczsKICAgICAgdmFyIGluZGV4T2ZVbnNlbGVjdGVkSXRlbSA9IGluZGljZXMuZmluZEluZGV4KGZ1bmN0aW9uIChpbmRleCkgewogICAgICAgIHJldHVybiAhX3RoaXMuaXNJdGVtU2VsZWN0ZWQoaW5kZXgubmFtZSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gaW5kZXhPZlVuc2VsZWN0ZWRJdGVtID09PSAtMTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uSXRlbVNlbGVjdGlvbkNoYW5nZWQiLCBmdW5jdGlvbiAoc2VsZWN0ZWRJbmRpY2VzKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBzZWxlY3RlZEluZGljZXM6IHNlbGVjdGVkSW5kaWNlcwogICAgICB9KTsKICAgIH0pOwoKICAgIF90aGlzLnN0YXRlID0gewogICAgICBzZWxlY3RlZEluZGljZXNNYXA6IHt9CiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEluZGV4VGFibGUsIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHRoaXMucHJvcHMubG9hZEluZGljZXMoKTsKICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMucHJvcHMucmVsb2FkSW5kaWNlcywgX2NvbnN0YW50czIuUkVGUkVTSF9SQVRFX0lOREVYX0xJU1QpOwogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gdGhpcy5wcm9wcywKICAgICAgICAgIGZpbHRlckNoYW5nZWQgPSBfdGhpcyRwcm9wczIuZmlsdGVyQ2hhbmdlZCwKICAgICAgICAgIGZpbHRlckZyb21VUkkgPSBfdGhpcyRwcm9wczIuZmlsdGVyRnJvbVVSSTsKCiAgICAgIGlmIChmaWx0ZXJGcm9tVVJJKSB7CiAgICAgICAgdmFyIGRlY29kZWRGaWx0ZXIgPSBkZWNvZGVVUklDb21wb25lbnQoZmlsdGVyRnJvbVVSSSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgZmlsdGVyID0gX2V1aS5FdWlTZWFyY2hCYXIuUXVlcnkucGFyc2UoZGVjb2RlZEZpbHRlcik7CgogICAgICAgICAgZmlsdGVyQ2hhbmdlZChmaWx0ZXIpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICBmaWx0ZXJFcnJvcjogZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50V2lsbFVubW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkgewogICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlckZpbHRlckVycm9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJGaWx0ZXJFcnJvcigpIHsKICAgICAgdmFyIGZpbHRlckVycm9yID0gdGhpcy5zdGF0ZS5maWx0ZXJFcnJvcjsKCiAgICAgIGlmICghZmlsdGVyRXJyb3IpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5kZWZhdWx0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgICAgICBpY29uVHlwZTogImZhY2VTYWQiLAogICAgICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhUYWJsZS5pbnZhbGlkU2VhcmNoRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdJbnZhbGlkIHNlYXJjaDoge2Vycm9yTWVzc2FnZX0nLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZmlsdGVyRXJyb3IubWVzc2FnZQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYnVpbGRIZWFkZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkSGVhZGVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRwcm9wczMgPSB0aGlzLnByb3BzLAogICAgICAgICAgc29ydEZpZWxkID0gX3RoaXMkcHJvcHMzLnNvcnRGaWVsZCwKICAgICAgICAgIGlzU29ydEFzY2VuZGluZyA9IF90aGlzJHByb3BzMy5pc1NvcnRBc2NlbmRpbmc7CiAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhIRUFERVJTKS5tYXAoZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgICAgdmFyIF9yZWY1ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjQsIDIpLAogICAgICAgICAgICBmaWVsZE5hbWUgPSBfcmVmNVswXSwKICAgICAgICAgICAgbGFiZWwgPSBfcmVmNVsxXTsKCiAgICAgICAgdmFyIGlzU29ydGVkID0gc29ydEZpZWxkID09PSBmaWVsZE5hbWU7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUYWJsZUhlYWRlckNlbGwsIHsKICAgICAgICAgIGtleTogZmllbGROYW1lLAogICAgICAgICAgb25Tb3J0OiBmdW5jdGlvbiBvblNvcnQoKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczIub25Tb3J0KGZpZWxkTmFtZSk7CiAgICAgICAgICB9LAogICAgICAgICAgaXNTb3J0ZWQ6IGlzU29ydGVkLAogICAgICAgICAgaXNTb3J0QXNjZW5kaW5nOiBpc1NvcnRBc2NlbmRpbmcsCiAgICAgICAgICBjbGFzc05hbWU6ICdpbmRUYWJsZV9faGVhZGVyLS0nICsgZmllbGROYW1lLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImluZGV4VGFibGVIZWFkZXJDZWxsLSIuY29uY2F0KGZpZWxkTmFtZSkKICAgICAgICB9LCBsYWJlbCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImJ1aWxkUm93Q2VsbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRSb3dDZWxsKGZpZWxkTmFtZSwgdmFsdWUsIGluZGV4KSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczQgPSB0aGlzLnByb3BzLAogICAgICAgICAgb3BlbkRldGFpbFBhbmVsID0gX3RoaXMkcHJvcHM0Lm9wZW5EZXRhaWxQYW5lbCwKICAgICAgICAgIGZpbHRlckNoYW5nZWQgPSBfdGhpcyRwcm9wczQuZmlsdGVyQ2hhbmdlZDsKCiAgICAgIGlmIChmaWVsZE5hbWUgPT09ICdoZWFsdGgnKSB7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlIZWFsdGgsIHsKICAgICAgICAgIGNvbG9yOiAoMCwgX3NlcnZpY2VzLmhlYWx0aFRvQ29sb3IpKHZhbHVlKQogICAgICAgIH0sIHZhbHVlKTsKICAgICAgfSBlbHNlIGlmIChmaWVsZE5hbWUgPT09ICduYW1lJykgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxpbmssIHsKICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJpbmRleFRhYmxlSW5kZXhOYW1lTGluayIsCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBfdWlfbWV0cmljLnVpTWV0cmljU2VydmljZS50cmFja01ldHJpYygnY2xpY2snLCBfY29uc3RhbnRzLlVJTV9TSE9XX0RFVEFJTFNfQ0xJQ0spOwoKICAgICAgICAgICAgb3BlbkRldGFpbFBhbmVsKHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9LCB2YWx1ZSksICgwLCBfcmVuZGVyX2JhZGdlcy5yZW5kZXJCYWRnZXMpKGluZGV4LCBmaWx0ZXJDaGFuZ2VkKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJidWlsZFJvd0NlbGxzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZFJvd0NlbGxzKGluZGV4KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKEhFQURFUlMpLm1hcChmdW5jdGlvbiAoZmllbGROYW1lKSB7CiAgICAgICAgdmFyIG5hbWUgPSBpbmRleC5uYW1lOwogICAgICAgIHZhciB2YWx1ZSA9IGluZGV4W2ZpZWxkTmFtZV07CgogICAgICAgIGlmIChmaWVsZE5hbWUgPT09ICduYW1lJykgewogICAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICAgICAgICBrZXk6ICIiLmNvbmNhdChmaWVsZE5hbWUsICItIikuY29uY2F0KG5hbWUpLAogICAgICAgICAgICBjbGFzc05hbWU6ICJldWlUYWJsZVJvd0NlbGwiLAogICAgICAgICAgICBzY29wZTogInJvdyIsCiAgICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJpbmRleFRhYmxlQ2VsbC0iLmNvbmNhdChmaWVsZE5hbWUpCiAgICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImV1aVRhYmxlQ2VsbENvbnRlbnQgaW5kVGFibGVfX2NlbGwtLSIuY29uY2F0KGZpZWxkTmFtZSkKICAgICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImV1aS10ZXh0TGVmdCIKICAgICAgICAgIH0sIF90aGlzMy5idWlsZFJvd0NlbGwoZmllbGROYW1lLCB2YWx1ZSwgaW5kZXgpKSkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUYWJsZVJvd0NlbGwsIHsKICAgICAgICAgIGtleTogIiIuY29uY2F0KGZpZWxkTmFtZSwgIi0iKS5jb25jYXQobmFtZSksCiAgICAgICAgICB0cnVuY2F0ZVRleHQ6IGZhbHNlLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImluZGV4VGFibGVDZWxsLSIuY29uY2F0KGZpZWxkTmFtZSksCiAgICAgICAgICBjbGFzc05hbWU6ICdpbmRUYWJsZV9fY2VsbC0tJyArIGZpZWxkTmFtZSwKICAgICAgICAgIGhlYWRlcjogZmllbGROYW1lCiAgICAgICAgfSwgX3RoaXMzLmJ1aWxkUm93Q2VsbChmaWVsZE5hbWUsIHZhbHVlLCBpbmRleCkpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJFcnJvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyRXJyb3IoKSB7CiAgICAgIHZhciBpbmRpY2VzRXJyb3IgPSB0aGlzLnByb3BzLmluZGljZXNFcnJvcjsKICAgICAgdmFyIGRhdGEgPSBpbmRpY2VzRXJyb3IuYm9keSA/IGluZGljZXNFcnJvci5ib2R5IDogaW5kaWNlc0Vycm9yOwogICAgICB2YXIgZXJyb3JTdHJpbmcgPSBkYXRhLmVycm9yLAogICAgICAgICAgY2F1c2UgPSBkYXRhLmNhdXNlLAogICAgICAgICAgbWVzc2FnZSA9IGRhdGEubWVzc2FnZTsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ2FsbE91dCwgewogICAgICAgIHRpdGxlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210LmluZGV4VGFibGUuc2VydmVyRXJyb3JUaXRsZSIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkVycm9yIGxvYWRpbmcgaW5kaWNlcyIKICAgICAgICB9KSwKICAgICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgICAgaWNvblR5cGU6ICJhbGVydCIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgbWVzc2FnZSB8fCBlcnJvclN0cmluZyksIGNhdXNlICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgICAgc2l6ZTogIm0iCiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ1bCIsIG51bGwsIGNhdXNlLm1hcChmdW5jdGlvbiAobWVzc2FnZSwgaSkgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJsaSIsIHsKICAgICAgICAgIGtleTogaQogICAgICAgIH0sIG1lc3NhZ2UpOwogICAgICB9KSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICAgIHNpemU6ICJ4bCIKICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlckJhbm5lcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckJhbm5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczUgPSB0aGlzLnByb3BzLAogICAgICAgICAgX3RoaXMkcHJvcHM1JGFsbEluZGljID0gX3RoaXMkcHJvcHM1LmFsbEluZGljZXMsCiAgICAgICAgICBhbGxJbmRpY2VzID0gX3RoaXMkcHJvcHM1JGFsbEluZGljID09PSB2b2lkIDAgPyBbXSA6IF90aGlzJHByb3BzNSRhbGxJbmRpYywKICAgICAgICAgIGZpbHRlckNoYW5nZWQgPSBfdGhpcyRwcm9wczUuZmlsdGVyQ2hhbmdlZDsKICAgICAgcmV0dXJuICgwLCBfaW5kZXhfbWFuYWdlbWVudF9leHRlbnNpb25zLmdldEJhbm5lckV4dGVuc2lvbnMpKCkubWFwKGZ1bmN0aW9uIChiYW5uZXJFeHRlbnNpb24sIGkpIHsKICAgICAgICB2YXIgYmFubmVyRGF0YSA9IGJhbm5lckV4dGVuc2lvbihhbGxJbmRpY2VzKTsKCiAgICAgICAgaWYgKCFiYW5uZXJEYXRhKSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIHZhciB0eXBlID0gYmFubmVyRGF0YS50eXBlLAogICAgICAgICAgICB0aXRsZSA9IGJhbm5lckRhdGEudGl0bGUsCiAgICAgICAgICAgIG1lc3NhZ2UgPSBiYW5uZXJEYXRhLm1lc3NhZ2UsCiAgICAgICAgICAgIGZpbHRlciA9IGJhbm5lckRhdGEuZmlsdGVyLAogICAgICAgICAgICBmaWx0ZXJMYWJlbCA9IGJhbm5lckRhdGEuZmlsdGVyTGFiZWw7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCB7CiAgICAgICAgICBrZXk6ICJiYW5uZXJFeHRlbnNpb24iLmNvbmNhdChpKQogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDYWxsT3V0LCB7CiAgICAgICAgICBjb2xvcjogdHlwZSwKICAgICAgICAgIHNpemU6ICJtIiwKICAgICAgICAgIHRpdGxlOiB0aXRsZQogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCBudWxsLCBtZXNzYWdlLCBmaWx0ZXIgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgcmV0dXJuIGZpbHRlckNoYW5nZWQoZmlsdGVyKTsKICAgICAgICAgIH0KICAgICAgICB9LCBmaWx0ZXJMYWJlbCkgOiBudWxsKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgICAgICAgIHNpemU6ICJtIgogICAgICAgIH0pKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYnVpbGRSb3dzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZFJvd3MoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHByb3BzNiA9IHRoaXMucHJvcHMsCiAgICAgICAgICBfdGhpcyRwcm9wczYkaW5kaWNlcyA9IF90aGlzJHByb3BzNi5pbmRpY2VzLAogICAgICAgICAgaW5kaWNlcyA9IF90aGlzJHByb3BzNiRpbmRpY2VzID09PSB2b2lkIDAgPyBbXSA6IF90aGlzJHByb3BzNiRpbmRpY2VzLAogICAgICAgICAgZGV0YWlsUGFuZWxJbmRleE5hbWUgPSBfdGhpcyRwcm9wczYuZGV0YWlsUGFuZWxJbmRleE5hbWU7CiAgICAgIHJldHVybiBpbmRpY2VzLm1hcChmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICB2YXIgbmFtZSA9IGluZGV4Lm5hbWU7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUYWJsZVJvdywgewogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImluZGV4VGFibGVSb3ciLAogICAgICAgICAgaXNTZWxlY3RlZDogX3RoaXM0LmlzSXRlbVNlbGVjdGVkKG5hbWUpIHx8IG5hbWUgPT09IGRldGFpbFBhbmVsSW5kZXhOYW1lLAogICAgICAgICAgaXNTZWxlY3RhYmxlOiB0cnVlLAogICAgICAgICAga2V5OiAiIi5jb25jYXQobmFtZSwgIi1yb3ciKQogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUYWJsZVJvd0NlbGxDaGVja2JveCwgewogICAgICAgICAga2V5OiAiY2hlY2tib3gtIi5jb25jYXQobmFtZSkKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ2hlY2tib3gsIHsKICAgICAgICAgIHR5cGU6ICJpbkxpc3QiLAogICAgICAgICAgaWQ6ICJjaGVja2JveFNlbGVjdEluZGV4LSIuY29uY2F0KG5hbWUpLAogICAgICAgICAgY2hlY2tlZDogX3RoaXM0LmlzSXRlbVNlbGVjdGVkKG5hbWUpLAogICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkgewogICAgICAgICAgICBfdGhpczQudG9nZ2xlSXRlbShuYW1lKTsKICAgICAgICAgIH0sCiAgICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiaW5kZXhUYWJsZVJvd0NoZWNrYm94IiwKICAgICAgICAgICJhcmlhLWxhYmVsIjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQuaW5kZXhUYWJsZS5zZWxlY3RJbmRleEFyaWFMYWJlbCcsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZWxlY3QgdGhpcyByb3cnCiAgICAgICAgICB9KQogICAgICAgIH0pKSwgX3RoaXM0LmJ1aWxkUm93Q2VsbHMoaW5kZXgpKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyUGFnZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclBhZ2VyKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHM3ID0gdGhpcy5wcm9wcywKICAgICAgICAgIHBhZ2VyID0gX3RoaXMkcHJvcHM3LnBhZ2VyLAogICAgICAgICAgcGFnZUNoYW5nZWQgPSBfdGhpcyRwcm9wczcucGFnZUNoYW5nZWQsCiAgICAgICAgICBwYWdlU2l6ZUNoYW5nZWQgPSBfdGhpcyRwcm9wczcucGFnZVNpemVDaGFuZ2VkOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRhYmxlUGFnaW5hdGlvbiwgewogICAgICAgIGFjdGl2ZVBhZ2U6IHBhZ2VyLmdldEN1cnJlbnRQYWdlSW5kZXgoKSwKICAgICAgICBpdGVtc1BlclBhZ2U6IHBhZ2VyLml0ZW1zUGVyUGFnZSwKICAgICAgICBpdGVtc1BlclBhZ2VPcHRpb25zOiBbMTAsIDUwLCAxMDBdLAogICAgICAgIHBhZ2VDb3VudDogcGFnZXIuZ2V0VG90YWxQYWdlcygpLAogICAgICAgIG9uQ2hhbmdlSXRlbXNQZXJQYWdlOiBwYWdlU2l6ZUNoYW5nZWQsCiAgICAgICAgb25DaGFuZ2VQYWdlOiBwYWdlQ2hhbmdlZAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJUb2dnbGVDb250cm9sIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJUb2dnbGVDb250cm9sKF9yZWY2KSB7CiAgICAgIHZhciBuYW1lID0gX3JlZjYubmFtZSwKICAgICAgICAgIGxhYmVsID0gX3JlZjYubGFiZWw7CiAgICAgIHZhciBfdGhpcyRwcm9wczggPSB0aGlzLnByb3BzLAogICAgICAgICAgdG9nZ2xlTmFtZVRvVmlzaWJsZU1hcCA9IF90aGlzJHByb3BzOC50b2dnbGVOYW1lVG9WaXNpYmxlTWFwLAogICAgICAgICAgdG9nZ2xlQ2hhbmdlZCA9IF90aGlzJHByb3BzOC50b2dnbGVDaGFuZ2VkOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAga2V5OiBuYW1lLAogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTd2l0Y2gsIHsKICAgICAgICBpZDogImNoZWNrYm94VG9nZ2xlcy0iLmNvbmNhdChuYW1lKSwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiY2hlY2tib3hUb2dnbGVzLSIuY29uY2F0KG5hbWUpLAogICAgICAgIGNoZWNrZWQ6IHRvZ2dsZU5hbWVUb1Zpc2libGVNYXBbbmFtZV0sCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gdG9nZ2xlQ2hhbmdlZChuYW1lLCBldmVudC50YXJnZXQuY2hlY2tlZCk7CiAgICAgICAgfSwKICAgICAgICBsYWJlbDogbGFiZWwKICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRwcm9wczkgPSB0aGlzLnByb3BzLAogICAgICAgICAgZmlsdGVyID0gX3RoaXMkcHJvcHM5LmZpbHRlciwKICAgICAgICAgIHNob3dTeXN0ZW1JbmRpY2VzID0gX3RoaXMkcHJvcHM5LnNob3dTeXN0ZW1JbmRpY2VzLAogICAgICAgICAgc2hvd1N5c3RlbUluZGljZXNDaGFuZ2VkID0gX3RoaXMkcHJvcHM5LnNob3dTeXN0ZW1JbmRpY2VzQ2hhbmdlZCwKICAgICAgICAgIGluZGljZXMgPSBfdGhpcyRwcm9wczkuaW5kaWNlcywKICAgICAgICAgIGxvYWRJbmRpY2VzID0gX3RoaXMkcHJvcHM5LmxvYWRJbmRpY2VzLAogICAgICAgICAgaW5kaWNlc0xvYWRpbmcgPSBfdGhpcyRwcm9wczkuaW5kaWNlc0xvYWRpbmcsCiAgICAgICAgICBpbmRpY2VzRXJyb3IgPSBfdGhpcyRwcm9wczkuaW5kaWNlc0Vycm9yLAogICAgICAgICAgYWxsSW5kaWNlcyA9IF90aGlzJHByb3BzOS5hbGxJbmRpY2VzLAogICAgICAgICAgcGFnZXIgPSBfdGhpcyRwcm9wczkucGFnZXI7CiAgICAgIHZhciBlbXB0eVN0YXRlOwoKICAgICAgaWYgKGluZGljZXNMb2FkaW5nKSB7CiAgICAgICAgZW1wdHlTdGF0ZSA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAic3BhY2VBcm91bmQiCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgICBncm93OiBmYWxzZQogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMb2FkaW5nU3Bpbm5lciwgewogICAgICAgICAgc2l6ZTogInhsIgogICAgICAgIH0pKSk7CiAgICAgIH0KCiAgICAgIGlmICghaW5kaWNlc0xvYWRpbmcgJiYgIWluZGljZXNFcnJvcikgewogICAgICAgIGVtcHR5U3RhdGUgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21wb25lbnRzLk5vTWF0Y2gsIG51bGwpOwogICAgICB9CgogICAgICB2YXIgc2VsZWN0ZWRJbmRpY2VzTWFwID0gdGhpcy5zdGF0ZS5zZWxlY3RlZEluZGljZXNNYXA7CiAgICAgIHZhciBhdExlYXN0T25lSXRlbVNlbGVjdGVkID0gT2JqZWN0LmtleXMoc2VsZWN0ZWRJbmRpY2VzTWFwKS5sZW5ndGggPiAwOwoKICAgICAgaWYgKGluZGljZXNFcnJvciAmJiBpbmRpY2VzRXJyb3Iuc3RhdHVzID09PSA0MDMpIHsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29tcG9uZW50cy5QYWdlRXJyb3JGb3JiaWRkZW4sIG51bGwpOwogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgICAgICBhbGlnbkl0ZW1zOiAiY2VudGVyIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiB0cnVlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUaXRsZSwgewogICAgICAgIHNpemU6ICJzIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dCwgewogICAgICAgIGNvbG9yOiAic3ViZHVlZCIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQuaG9tZS5pZHhNZ210RGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVXBkYXRlIHlvdXIgRWxhc3RpY3NlYXJjaCBpbmRpY2VzIGluZGl2aWR1YWxseSBvciBpbiBidWxrLiIKICAgICAgfSkpKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIGluZGljZXNMb2FkaW5nICYmIGFsbEluZGljZXMubGVuZ3RoID09PSAwIHx8IGluZGljZXNFcnJvciA/IG51bGwgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCBudWxsLCAoMCwgX2luZGV4X21hbmFnZW1lbnRfZXh0ZW5zaW9ucy5nZXRUb2dnbGVFeHRlbnNpb25zKSgpLm1hcChmdW5jdGlvbiAodG9nZ2xlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNS5yZW5kZXJUb2dnbGVDb250cm9sKHRvZ2dsZSk7CiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3dpdGNoLCB7CiAgICAgICAgaWQ6ICJjaGVja2JveFNob3dTeXN0ZW1JbmRpY2VzIiwKICAgICAgICBjaGVja2VkOiBzaG93U3lzdGVtSW5kaWNlcywKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBzaG93U3lzdGVtSW5kaWNlc0NoYW5nZWQoZXZlbnQudGFyZ2V0LmNoZWNrZWQpOwogICAgICAgIH0sCiAgICAgICAgbGFiZWw6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQuaW5kZXhUYWJsZS5zeXN0ZW1JbmRpY2VzU3dpdGNoTGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJJbmNsdWRlIHN5c3RlbSBpbmRpY2VzIgogICAgICAgIH0pCiAgICAgIH0pKSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICAgIHNpemU6ICJsIgogICAgICB9KSwgdGhpcy5yZW5kZXJCYW5uZXJzKCksIGluZGljZXNFcnJvciAmJiB0aGlzLnJlbmRlckVycm9yKCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgICAgICBndXR0ZXJTaXplOiAibCIsCiAgICAgICAgYWxpZ25JdGVtczogImNlbnRlciIKICAgICAgfSwgYXRMZWFzdE9uZUl0ZW1TZWxlY3RlZCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Um91dGVyRG9tLlJvdXRlLCB7CiAgICAgICAga2V5OiAibWVudSIsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaW5kZXhfYWN0aW9uc19jb250ZXh0X21lbnUuSW5kZXhBY3Rpb25zQ29udGV4dE1lbnUsIHsKICAgICAgICAgICAgaW5kZXhOYW1lczogT2JqZWN0LmtleXMoc2VsZWN0ZWRJbmRpY2VzTWFwKSwKICAgICAgICAgICAgcmVzZXRTZWxlY3Rpb246IGZ1bmN0aW9uIHJlc2V0U2VsZWN0aW9uKCkgewogICAgICAgICAgICAgIF90aGlzNS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGljZXNNYXA6IHt9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkpIDogbnVsbCwgaW5kaWNlc0xvYWRpbmcgJiYgYWxsSW5kaWNlcy5sZW5ndGggPT09IDAgfHwgaW5kaWNlc0Vycm9yID8gbnVsbCA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTZWFyY2hCYXIsIHsKICAgICAgICBmaWx0ZXJzOiB0aGlzLmdldEZpbHRlcnMoKS5sZW5ndGggPiAwID8gdGhpcy5nZXRGaWx0ZXJzKCkgOiBudWxsLAogICAgICAgIGRlZmF1bHRRdWVyeTogZmlsdGVyLAogICAgICAgIHF1ZXJ5OiBmaWx0ZXIsCiAgICAgICAgYm94OiB7CiAgICAgICAgICBpbmNyZW1lbnRhbDogdHJ1ZSwKICAgICAgICAgIHBsYWNlaG9sZGVyOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleFRhYmxlLnN5c3RlbUluZGljZXNTZWFyY2hJbnB1dFBsYWNlaG9sZGVyJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NlYXJjaCcKICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAiYXJpYS1sYWJlbCI6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210LmluZGV4VGFibGUuc3lzdGVtSW5kaWNlc1NlYXJjaEluZGljZXNBcmlhTGFiZWwnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NlYXJjaCBpbmRpY2VzJwogICAgICAgIH0pLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJpbmRleFRhYmxlRmlsdGVySW5wdXQiLAogICAgICAgIG9uQ2hhbmdlOiB0aGlzLm9uRmlsdGVyQ2hhbmdlZAogICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICBpc0xvYWRpbmc6IGluZGljZXNMb2FkaW5nLAogICAgICAgIGNvbG9yOiAic2Vjb25kYXJ5IiwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgbG9hZEluZGljZXMoKTsKICAgICAgICB9LAogICAgICAgIGljb25UeXBlOiAicmVmcmVzaCIsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInJlbG9hZEluZGljZXNCdXR0b24iCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210LmluZGV4VGFibGUucmVsb2FkSW5kaWNlc0J1dHRvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZWxvYWQgaW5kaWNlcyIKICAgICAgfSkpKSkpLCB0aGlzLnJlbmRlckZpbHRlckVycm9yKCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgICAgICBzaXplOiAibSIKICAgICAgfSksIGluZGljZXMubGVuZ3RoID4gMCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgbWF4V2lkdGg6ICcxMDAlJywKICAgICAgICAgIG92ZXJmbG93OiAnYXV0bycKICAgICAgICB9CiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUYWJsZSwgewogICAgICAgIGNsYXNzTmFtZTogImluZFRhYmxlIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU2NyZWVuUmVhZGVyT25seSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiY2FwdGlvbiIsIHsKICAgICAgICByb2xlOiAic3RhdHVzIiwKICAgICAgICAiYXJpYS1yZWxldmFudCI6ICJ0ZXh0IiwKICAgICAgICAiYXJpYS1saXZlIjogInBvbGl0ZSIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQuaW5kZXhUYWJsZS5jYXB0aW9uVGV4dCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJCZWxvdyBpcyB0aGUgaW5kaWNlcyB0YWJsZSBjb250YWluaW5nIHtjb3VudCwgcGx1cmFsLCBvbmUgeyMgcm93fSBvdGhlciB7IyByb3dzfX0gb3V0IG9mIHt0b3RhbH0uIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGNvdW50OiBpbmRpY2VzLmxlbmd0aCwKICAgICAgICAgIHRvdGFsOiBwYWdlci50b3RhbEl0ZW1zCiAgICAgICAgfQogICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGFibGVIZWFkZXIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUYWJsZUhlYWRlckNlbGxDaGVja2JveCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNoZWNrYm94LCB7CiAgICAgICAgaWQ6ICJzZWxlY3RBbGxJbmRleGVzIiwKICAgICAgICBjaGVja2VkOiB0aGlzLmFyZUFsbEl0ZW1zU2VsZWN0ZWQoKSwKICAgICAgICBvbkNoYW5nZTogdGhpcy50b2dnbGVBbGwsCiAgICAgICAgdHlwZTogImluTGlzdCIsCiAgICAgICAgImFyaWEtbGFiZWwiOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5pbmRleFRhYmxlLnNlbGVjdEFsbEluZGljZXNBcmlhTGFiZWwnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NlbGVjdCBhbGwgcm93cycKICAgICAgICB9KQogICAgICB9KSksIHRoaXMuYnVpbGRIZWFkZXIoKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUYWJsZUJvZHksIG51bGwsIHRoaXMuYnVpbGRSb3dzKCkpKSkgOiBlbXB0eVN0YXRlLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgICAgc2l6ZTogIm0iCiAgICAgIH0pLCBpbmRpY2VzLmxlbmd0aCA+IDAgPyB0aGlzLnJlbmRlclBhZ2VyKCkgOiBudWxsKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBJbmRleFRhYmxlOwp9KF9yZWFjdC5Db21wb25lbnQpOwoKZXhwb3J0cy5JbmRleFRhYmxlID0gSW5kZXhUYWJsZTs="},null]}