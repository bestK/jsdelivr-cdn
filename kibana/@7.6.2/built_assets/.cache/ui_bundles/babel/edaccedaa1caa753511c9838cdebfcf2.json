{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/core/public/http/fetch.js","dependencies":[{"path":"src/core/public/http/fetch.js","mtime":1585205038748},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkZldGNoID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfdXJsID0gcmVxdWlyZSgidXJsIik7Cgp2YXIgX2h0dHBfZmV0Y2hfZXJyb3IgPSByZXF1aXJlKCIuL2h0dHBfZmV0Y2hfZXJyb3IiKTsKCnZhciBfaHR0cF9pbnRlcmNlcHRfY29udHJvbGxlciA9IHJlcXVpcmUoIi4vaHR0cF9pbnRlcmNlcHRfY29udHJvbGxlciIpOwoKdmFyIF9yZXNwb25zZSA9IHJlcXVpcmUoIi4vcmVzcG9uc2UiKTsKCnZhciBfaW50ZXJjZXB0ID0gcmVxdWlyZSgiLi9pbnRlcmNlcHQiKTsKCnZhciBfaHR0cF9pbnRlcmNlcHRfaGFsdF9lcnJvciA9IHJlcXVpcmUoIi4vaHR0cF9pbnRlcmNlcHRfaGFsdF9lcnJvciIpOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHsKICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsKCiAgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOwoKICB2YXIga2V5LCBpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7CgogICAgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsKICAgICAga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsKICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsKICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsKICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHsKICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsKICB2YXIgdGFyZ2V0ID0ge307CiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOwogIHZhciBrZXksIGk7CgogIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7CiAgICBrZXkgPSBzb3VyY2VLZXlzW2ldOwogICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsKICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIEpTT05fQ09OVEVOVCA9IC9eKGFwcGxpY2F0aW9uXC8oanNvbnx4LWphdmFzY3JpcHQpfHRleHRcLyh4LSk/amF2YXNjcmlwdHx4LWpzb24pKDsuKik/JC87CnZhciBOREpTT05fQ09OVEVOVCA9IC9eKGFwcGxpY2F0aW9uXC9uZGpzb24pKDsuKik/JC87Cgp2YXIgRmV0Y2ggPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBGZXRjaChwYXJhbXMpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZldGNoKTsKCiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtczsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImludGVyY2VwdG9ycyIsIG5ldyBTZXQoKSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZWxldGUiLCB0aGlzLnNob3J0aGFuZCgnREVMRVRFJykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZ2V0IiwgdGhpcy5zaG9ydGhhbmQoJ0dFVCcpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImhlYWQiLCB0aGlzLnNob3J0aGFuZCgnSEVBRCcpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm9wdGlvbnMiLCB0aGlzLnNob3J0aGFuZCgnb3B0aW9ucycpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInBhdGNoIiwgdGhpcy5zaG9ydGhhbmQoJ1BBVENIJykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicG9zdCIsIHRoaXMuc2hvcnRoYW5kKCdQT1NUJykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicHV0IiwgdGhpcy5zaG9ydGhhbmQoJ1BVVCcpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImZldGNoIiwgZnVuY3Rpb24gX2NhbGxlZTIocGF0aCkgewogICAgICB2YXIgb3B0aW9ucywKICAgICAgICAgIGluaXRpYWxSZXF1ZXN0LAogICAgICAgICAgY29udHJvbGxlciwKICAgICAgICAgIF9hcmdzMiA9IGFyZ3VtZW50czsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgb3B0aW9ucyA9IF9hcmdzMi5sZW5ndGggPiAxICYmIF9hcmdzMlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MyWzFdIDoge307CiAgICAgICAgICAgICAgaW5pdGlhbFJlcXVlc3QgPSBfdGhpcy5jcmVhdGVSZXF1ZXN0KHBhdGgsIG9wdGlvbnMpOwogICAgICAgICAgICAgIGNvbnRyb2xsZXIgPSBuZXcgX2h0dHBfaW50ZXJjZXB0X2NvbnRyb2xsZXIuSHR0cEludGVyY2VwdENvbnRyb2xsZXIoKTsgLy8gV2Ugd3JhcCB0aGUgaW50ZXJjZXB0aW9uIGluIGEgc2VwYXJhdGUgcHJvbWlzZSB0byBlbnN1cmUgdGhhdCB3aGVuCiAgICAgICAgICAgICAgLy8gYSBoYWx0IGlzIGNhbGxlZCB3ZSBkbyBub3QgcmVzb2x2ZSBvciByZWplY3QsIGhhbHRpbmcgaGFuZGxpbmcgb2YgdGhlIHByb21pc2UuCgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBuZXcgUHJvbWlzZShmdW5jdGlvbiBfY2FsbGVlKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgdmFyIGludGVyY2VwdGVkUmVxdWVzdCwgaW5pdGlhbFJlc3BvbnNlLCBpbnRlcmNlcHRlZFJlc3BvbnNlOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKCgwLCBfaW50ZXJjZXB0LmludGVyY2VwdFJlcXVlc3QpKGluaXRpYWxSZXF1ZXN0LCBfdGhpcy5pbnRlcmNlcHRvcnMsIGNvbnRyb2xsZXIpKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyY2VwdGVkUmVxdWVzdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxSZXNwb25zZSA9IF90aGlzLmZldGNoUmVzcG9uc2UoaW50ZXJjZXB0ZWRSZXF1ZXN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoKDAsIF9pbnRlcmNlcHQuaW50ZXJjZXB0UmVzcG9uc2UpKGluaXRpYWxSZXNwb25zZSwgX3RoaXMuaW50ZXJjZXB0b3JzLCBjb250cm9sbGVyKSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICBpbnRlcmNlcHRlZFJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFzUmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGludGVyY2VwdGVkUmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaW50ZXJjZXB0ZWRSZXNwb25zZS5ib2R5KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfY29udGV4dC50MCBpbnN0YW5jZW9mIF9odHRwX2ludGVyY2VwdF9oYWx0X2Vycm9yLkh0dHBJbnRlcmNlcHRIYWx0RXJyb3IpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jb250ZXh0LnQwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgW1swLCAxMV1dKTsKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEZldGNoLCBbewogICAga2V5OiAiaW50ZXJjZXB0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbnRlcmNlcHQoaW50ZXJjZXB0b3IpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmludGVyY2VwdG9ycy5hZGQoaW50ZXJjZXB0b3IpOwogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5pbnRlcmNlcHRvcnMuZGVsZXRlKGludGVyY2VwdG9yKTsKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmVBbGxJbnRlcmNlcHRvcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUFsbEludGVyY2VwdG9ycygpIHsKICAgICAgdGhpcy5pbnRlcmNlcHRvcnMuY2xlYXIoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVSZXF1ZXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0KHBhdGgsIG9wdGlvbnMpIHsKICAgICAgLy8gTWVyZ2UgYW5kIGRlc3RydWN0dXJlIG9wdGlvbnMgb3V0IHRoYXQgYXJlIG5vdCBhcHBsaWNhYmxlIHRvIHRoZSBGZXRjaCBBUEkuCiAgICAgIHZhciBfbWVyZ2UgPSAoMCwgX2xvZGFzaC5tZXJnZSkoewogICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicsCiAgICAgICAgcHJlcGVuZEJhc2VQYXRoOiB0cnVlLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdrYm4tdmVyc2lvbic6IHRoaXMucGFyYW1zLmtpYmFuYVZlcnNpb24sCiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgfQogICAgICB9LCBvcHRpb25zIHx8IHt9KSwKICAgICAgICAgIHF1ZXJ5ID0gX21lcmdlLnF1ZXJ5LAogICAgICAgICAgc2hvdWxkUHJlcGVuZEJhc2VQYXRoID0gX21lcmdlLnByZXBlbmRCYXNlUGF0aCwKICAgICAgICAgIGFzUmVzcG9uc2UgPSBfbWVyZ2UuYXNSZXNwb25zZSwKICAgICAgICAgIGZldGNoT3B0aW9ucyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfbWVyZ2UsIFsicXVlcnkiLCAicHJlcGVuZEJhc2VQYXRoIiwgImFzUmVzcG9uc2UiXSk7CgogICAgICB2YXIgdXJsID0gKDAsIF91cmwuZm9ybWF0KSh7CiAgICAgICAgcGF0aG5hbWU6IHNob3VsZFByZXBlbmRCYXNlUGF0aCA/IHRoaXMucGFyYW1zLmJhc2VQYXRoLnByZXBlbmQocGF0aCkgOiBwYXRoLAogICAgICAgIHF1ZXJ5OiBxdWVyeQogICAgICB9KTsKCiAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaGVhZGVycyAmJiAnQ29udGVudC1UeXBlJyBpbiBvcHRpb25zLmhlYWRlcnMgJiYgb3B0aW9ucy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgZGVsZXRlIGZldGNoT3B0aW9ucy5oZWFkZXJzWydDb250ZW50LVR5cGUnXTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHVybCwgZmV0Y2hPcHRpb25zKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmZXRjaFJlc3BvbnNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaFJlc3BvbnNlKHJlcXVlc3QpIHsKICAgICAgdmFyIHJlc3BvbnNlLCBib2R5LCBfZXJyJG5hbWUsIGNvbnRlbnRUeXBlLCB0ZXh0LCBfZXJyJG5hbWUyOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBmZXRjaFJlc3BvbnNlJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBib2R5ID0gbnVsbDsKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAod2luZG93LmZldGNoKHJlcXVlc3QpKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA3OwogICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgxKTsKICAgICAgICAgICAgICB0aHJvdyBuZXcgX2h0dHBfZmV0Y2hfZXJyb3IuSHR0cEZldGNoRXJyb3IoX2NvbnRleHQzLnQwLm1lc3NhZ2UsIChfZXJyJG5hbWUgPSBfY29udGV4dDMudDAubmFtZSkgIT09IG51bGwgJiYgX2VyciRuYW1lICE9PSB2b2lkIDAgPyBfZXJyJG5hbWUgOiAnRXJyb3InLCByZXF1ZXN0KTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnQ29udGVudC1UeXBlJykgfHwgJyc7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxMTsKCiAgICAgICAgICAgICAgaWYgKCFOREpTT05fQ09OVEVOVC50ZXN0KGNvbnRlbnRUeXBlKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNTsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHJlc3BvbnNlLmJsb2IoKSk7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGJvZHkgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI4OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBpZiAoIUpTT05fQ09OVEVOVC50ZXN0KGNvbnRlbnRUeXBlKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMTsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHJlc3BvbnNlLmpzb24oKSk7CgogICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgIGJvZHkgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI4OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI2OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAocmVzcG9uc2UudGV4dCgpKTsKCiAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgdGV4dCA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYm9keSA9IEpTT04ucGFyc2UodGV4dCk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBib2R5ID0gdGV4dDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzM7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMzA7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnQxID0gX2NvbnRleHQzWyJjYXRjaCJdKDExKTsKICAgICAgICAgICAgICB0aHJvdyBuZXcgX2h0dHBfZmV0Y2hfZXJyb3IuSHR0cEZldGNoRXJyb3IoX2NvbnRleHQzLnQxLm1lc3NhZ2UsIChfZXJyJG5hbWUyID0gX2NvbnRleHQzLnQxLm5hbWUpICE9PSBudWxsICYmIF9lcnIkbmFtZTIgIT09IHZvaWQgMCA/IF9lcnIkbmFtZTIgOiAnRXJyb3InLCByZXF1ZXN0LCByZXNwb25zZSwgYm9keSk7CgogICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzNTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhyb3cgbmV3IF9odHRwX2ZldGNoX2Vycm9yLkh0dHBGZXRjaEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQsICdFcnJvcicsIHJlcXVlc3QsIHJlc3BvbnNlLCBib2R5KTsKCiAgICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIG5ldyBfcmVzcG9uc2UuSHR0cFJlc3BvbnNlKHsKICAgICAgICAgICAgICAgIHJlcXVlc3Q6IHJlcXVlc3QsCiAgICAgICAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2UsCiAgICAgICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIG51bGwsIFtbMSwgN10sIFsxMSwgMzBdXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvcnRoYW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG9ydGhhbmQobWV0aG9kKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICAgIHJldHVybiBfdGhpczMuZmV0Y2gocGF0aCwgX29iamVjdFNwcmVhZCh7fSwgb3B0aW9ucywgewogICAgICAgICAgbWV0aG9kOiBtZXRob2QKICAgICAgICB9KSk7CiAgICAgIH07CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRmV0Y2g7Cn0oKTsKCmV4cG9ydHMuRmV0Y2ggPSBGZXRjaDs="},null]}