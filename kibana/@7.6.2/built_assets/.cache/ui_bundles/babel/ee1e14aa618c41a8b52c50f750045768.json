{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/core/public/ui_settings/ui_settings_client.js","dependencies":[{"path":"src/core/public/ui_settings/ui_settings_client.js","mtime":1585205038788},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlVpU2V0dGluZ3NDbGllbnQgPSB2b2lkIDA7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIF9yeGpzID0gcmVxdWlyZSgicnhqcyIpOwoKdmFyIF9vcGVyYXRvcnMgPSByZXF1aXJlKCJyeGpzL29wZXJhdG9ycyIpOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCnZhciBVaVNldHRpbmdzQ2xpZW50ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gVWlTZXR0aW5nc0NsaWVudChwYXJhbXMpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVpU2V0dGluZ3NDbGllbnQpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidXBkYXRlJCIsIG5ldyBfcnhqcy5TdWJqZWN0KCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic2F2ZWQkIiwgbmV3IF9yeGpzLlN1YmplY3QoKSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ1cGRhdGVFcnJvcnMkIiwgbmV3IF9yeGpzLlN1YmplY3QoKSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhcGkiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZGVmYXVsdHMiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY2FjaGUiLCB2b2lkIDApOwoKICAgIHRoaXMuYXBpID0gcGFyYW1zLmFwaTsKICAgIHRoaXMuZGVmYXVsdHMgPSAoMCwgX2xvZGFzaC5jbG9uZURlZXApKHBhcmFtcy5kZWZhdWx0cyk7CiAgICB0aGlzLmNhY2hlID0gKDAsIF9sb2Rhc2guZGVmYXVsdHNEZWVwKSh7fSwgdGhpcy5kZWZhdWx0cywgKDAsIF9sb2Rhc2guY2xvbmVEZWVwKShwYXJhbXMuaW5pdGlhbFNldHRpbmdzKSk7CiAgICBwYXJhbXMuZG9uZSQuc3Vic2NyaWJlKHsKICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIGNvbXBsZXRlKCkgewogICAgICAgIF90aGlzLnVwZGF0ZSQuY29tcGxldGUoKTsKCiAgICAgICAgX3RoaXMuc2F2ZWQkLmNvbXBsZXRlKCk7CgogICAgICAgIF90aGlzLnVwZGF0ZUVycm9ycyQuY29tcGxldGUoKTsKICAgICAgfQogICAgfSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVWlTZXR0aW5nc0NsaWVudCwgW3sKICAgIGtleTogImdldEFsbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWxsKCkgewogICAgICByZXR1cm4gKDAsIF9sb2Rhc2guY2xvbmVEZWVwKSh0aGlzLmNhY2hlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldChrZXksIGRlZmF1bHRPdmVycmlkZSkgewogICAgICB2YXIgZGVjbGFyZWQgPSB0aGlzLmlzRGVjbGFyZWQoa2V5KTsKCiAgICAgIGlmICghZGVjbGFyZWQgJiYgZGVmYXVsdE92ZXJyaWRlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gZGVmYXVsdE92ZXJyaWRlOwogICAgICB9CgogICAgICBpZiAoIWRlY2xhcmVkKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJVbmV4cGVjdGVkIGBJVWlTZXR0aW5nc0NsaWVudC5nZXQoXCIiLmNvbmNhdChrZXksICJcIilgIGNhbGwgb24gdW5yZWNvZ25pemVkIGNvbmZpZ3VyYXRpb24gc2V0dGluZyBcIiIpLmNvbmNhdChrZXksICJcIi5cblNldHRpbmcgYW4gaW5pdGlhbCB2YWx1ZSB2aWEgYElVaVNldHRpbmdzQ2xpZW50LnNldChcIiIpLmNvbmNhdChrZXksICJcIiwgdmFsdWUpYCBiZWZvcmUgYXR0ZW1wdGluZyB0byByZXRyaWV2ZVxuYW55IGN1c3RvbSBzZXR0aW5nIHZhbHVlIGZvciBcIiIpLmNvbmNhdChrZXksICJcIiBtYXkgZml4IHRoaXMgaXNzdWUuXG5Zb3UgY2FuIHVzZSBgSVVpU2V0dGluZ3NDbGllbnQuZ2V0KFwiIikuY29uY2F0KGtleSwgIlwiLCBkZWZhdWx0VmFsdWUpYCwgd2hpY2ggd2lsbCBqdXN0IHJldHVyblxuYGRlZmF1bHRWYWx1ZWAgd2hlbiB0aGUga2V5IGlzIHVucmVjb2duaXplZC4iKSk7CiAgICAgIH0KCiAgICAgIHZhciB0eXBlID0gdGhpcy5jYWNoZVtrZXldLnR5cGU7CiAgICAgIHZhciB1c2VyVmFsdWUgPSB0aGlzLmNhY2hlW2tleV0udXNlclZhbHVlOwogICAgICB2YXIgZGVmYXVsdFZhbHVlID0gZGVmYXVsdE92ZXJyaWRlICE9PSB1bmRlZmluZWQgPyBkZWZhdWx0T3ZlcnJpZGUgOiB0aGlzLmNhY2hlW2tleV0udmFsdWU7CiAgICAgIHZhciB2YWx1ZSA9IHVzZXJWYWx1ZSA9PSBudWxsID8gZGVmYXVsdFZhbHVlIDogdXNlclZhbHVlOwoKICAgICAgaWYgKHR5cGUgPT09ICdqc29uJykgewogICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7CiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpOwogICAgICB9CgogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0JCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0JChrZXksIGRlZmF1bHRPdmVycmlkZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiAoMCwgX3J4anMuY29uY2F0KSgoMCwgX3J4anMuZGVmZXIpKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gKDAsIF9yeGpzLm9mKShfdGhpczIuZ2V0KGtleSwgZGVmYXVsdE92ZXJyaWRlKSk7CiAgICAgIH0pLCB0aGlzLnVwZGF0ZSQucGlwZSgoMCwgX29wZXJhdG9ycy5maWx0ZXIpKGZ1bmN0aW9uICh1cGRhdGUpIHsKICAgICAgICByZXR1cm4gdXBkYXRlLmtleSA9PT0ga2V5OwogICAgICB9KSwgKDAsIF9vcGVyYXRvcnMubWFwKShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5nZXQoa2V5LCBkZWZhdWx0T3ZlcnJpZGUpOwogICAgICB9KSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzZXQkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy51cGRhdGUoa2V5LCB2YWx1ZSkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZShrZXkpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiByZW1vdmUkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMudXBkYXRlKGtleSwgbnVsbCkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0RlY2xhcmVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0RlY2xhcmVkKGtleSkgewogICAgICByZXR1cm4ga2V5IGluIHRoaXMuY2FjaGU7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNEZWZhdWx0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0RlZmF1bHQoa2V5KSB7CiAgICAgIHJldHVybiAhdGhpcy5pc0RlY2xhcmVkKGtleSkgfHwgdGhpcy5jYWNoZVtrZXldLnVzZXJWYWx1ZSA9PSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogImlzQ3VzdG9tIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0N1c3RvbShrZXkpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNEZWNsYXJlZChrZXkpICYmICEoJ3ZhbHVlJyBpbiB0aGlzLmNhY2hlW2tleV0pOwogICAgfQogIH0sIHsKICAgIGtleTogImlzT3ZlcnJpZGRlbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNPdmVycmlkZGVuKGtleSkgewogICAgICByZXR1cm4gdGhpcy5pc0RlY2xhcmVkKGtleSkgJiYgQm9vbGVhbih0aGlzLmNhY2hlW2tleV0uaXNPdmVycmlkZGVuKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvdmVycmlkZUxvY2FsRGVmYXVsdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3ZlcnJpZGVMb2NhbERlZmF1bHQoa2V5LCBuZXdEZWZhdWx0KSB7CiAgICAgIC8vIGNhcHR1cmUgdGhlIHByZXZpb3VzIHZhbHVlCiAgICAgIHZhciBwcmV2RGVmYXVsdCA9IHRoaXMuZGVmYXVsdHNba2V5XSA/IHRoaXMuZGVmYXVsdHNba2V5XS52YWx1ZSA6IHVuZGVmaW5lZDsgLy8gdXBkYXRlIGRlZmF1bHRzIG1hcAoKICAgICAgdGhpcy5kZWZhdWx0c1trZXldID0gX29iamVjdFNwcmVhZCh7fSwgdGhpcy5kZWZhdWx0c1trZXldIHx8IHt9LCB7CiAgICAgICAgdmFsdWU6IG5ld0RlZmF1bHQKICAgICAgfSk7IC8vIHVwZGF0ZSBjYWNoZWQgZGVmYXVsdCB2YWx1ZQoKICAgICAgdGhpcy5jYWNoZVtrZXldID0gX29iamVjdFNwcmVhZCh7fSwgdGhpcy5jYWNoZVtrZXldIHx8IHt9LCB7CiAgICAgICAgdmFsdWU6IG5ld0RlZmF1bHQKICAgICAgfSk7IC8vIGRvbid0IGJyb2FkY2FzdCBjaGFuZ2UgaWYgdXNlclZhbHVlIHdhcyBhbHJlYWR5IG92ZXJyaWRpbmcgdGhlIGRlZmF1bHQKCiAgICAgIGlmICh0aGlzLmNhY2hlW2tleV0udXNlclZhbHVlID09IG51bGwpIHsKICAgICAgICB0aGlzLnVwZGF0ZSQubmV4dCh7CiAgICAgICAgICBrZXk6IGtleSwKICAgICAgICAgIG5ld1ZhbHVlOiBuZXdEZWZhdWx0LAogICAgICAgICAgb2xkVmFsdWU6IHByZXZEZWZhdWx0CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zYXZlZCQubmV4dCh7CiAgICAgICAgICBrZXk6IGtleSwKICAgICAgICAgIG5ld1ZhbHVlOiBuZXdEZWZhdWx0LAogICAgICAgICAgb2xkVmFsdWU6IHByZXZEZWZhdWx0CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRVcGRhdGUkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVcGRhdGUkKCkgewogICAgICByZXR1cm4gdGhpcy51cGRhdGUkLmFzT2JzZXJ2YWJsZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFNhdmVkJCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2F2ZWQkKCkgewogICAgICByZXR1cm4gdGhpcy5zYXZlZCQuYXNPYnNlcnZhYmxlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VXBkYXRlRXJyb3JzJCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXBkYXRlRXJyb3JzJCgpIHsKICAgICAgcmV0dXJuIHRoaXMudXBkYXRlRXJyb3JzJC5hc09ic2VydmFibGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhc3NlcnRVcGRhdGVBbGxvd2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhc3NlcnRVcGRhdGVBbGxvd2VkKGtleSkgewogICAgICBpZiAodGhpcy5pc092ZXJyaWRkZW4oa2V5KSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIHVwZGF0ZSBcIiIuY29uY2F0KGtleSwgIlwiIGJlY2F1c2UgaXRzIHZhbHVlIGlzIG92ZXJyaWRkZW4gYnkgdGhlIEtpYmFuYSBzZXJ2ZXIiKSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZShrZXksIG5ld1ZhbCkgewogICAgICB2YXIgZGVjbGFyZWQsIGRlZmF1bHRzLCBvbGRWYWwsIHVuY2hhbmdlZCwgaW5pdGlhbFZhbCwgX3JlZiwgc2V0dGluZ3M7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHVwZGF0ZSQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdGhpcy5hc3NlcnRVcGRhdGVBbGxvd2VkKGtleSk7CiAgICAgICAgICAgICAgZGVjbGFyZWQgPSB0aGlzLmlzRGVjbGFyZWQoa2V5KTsKICAgICAgICAgICAgICBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdHM7CiAgICAgICAgICAgICAgb2xkVmFsID0gZGVjbGFyZWQgPyB0aGlzLmNhY2hlW2tleV0udXNlclZhbHVlIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgIHVuY2hhbmdlZCA9IG9sZFZhbCA9PT0gbmV3VmFsOwoKICAgICAgICAgICAgICBpZiAoIXVuY2hhbmdlZCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgdHJ1ZSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgaW5pdGlhbFZhbCA9IGRlY2xhcmVkID8gdGhpcy5nZXQoa2V5KSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB0aGlzLnNldExvY2FsbHkoa2V5LCBuZXdWYWwpOwogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gOTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5hcGkuYmF0Y2hTZXQoa2V5LCBuZXdWYWwpKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX3JlZiA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgIHNldHRpbmdzID0gX3JlZi5zZXR0aW5nczsKICAgICAgICAgICAgICB0aGlzLmNhY2hlID0gKDAsIF9sb2Rhc2guZGVmYXVsdHNEZWVwKSh7fSwgZGVmYXVsdHMsIHNldHRpbmdzKTsKICAgICAgICAgICAgICB0aGlzLnNhdmVkJC5uZXh0KHsKICAgICAgICAgICAgICAgIGtleToga2V5LAogICAgICAgICAgICAgICAgbmV3VmFsdWU6IG5ld1ZhbCwKICAgICAgICAgICAgICAgIG9sZFZhbHVlOiBpbml0aWFsVmFsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHRydWUpOwoKICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE5OwogICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSg5KTsKICAgICAgICAgICAgICB0aGlzLnNldExvY2FsbHkoa2V5LCBpbml0aWFsVmFsKTsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUVycm9ycyQubmV4dChfY29udGV4dDMudDApOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcywgW1s5LCAxOV1dKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRMb2NhbGx5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRMb2NhbGx5KGtleSwgbmV3VmFsdWUpIHsKICAgICAgdGhpcy5hc3NlcnRVcGRhdGVBbGxvd2VkKGtleSk7CgogICAgICBpZiAoIXRoaXMuaXNEZWNsYXJlZChrZXkpKSB7CiAgICAgICAgdGhpcy5jYWNoZVtrZXldID0ge307CiAgICAgIH0KCiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMuZ2V0KGtleSk7CgogICAgICBpZiAobmV3VmFsdWUgPT09IG51bGwpIHsKICAgICAgICBkZWxldGUgdGhpcy5jYWNoZVtrZXldLnVzZXJWYWx1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgdHlwZSA9IHRoaXMuY2FjaGVba2V5XS50eXBlOwoKICAgICAgICBpZiAodHlwZSA9PT0gJ2pzb24nICYmIHR5cGVvZiBuZXdWYWx1ZSAhPT0gJ3N0cmluZycpIHsKICAgICAgICAgIHRoaXMuY2FjaGVba2V5XS51c2VyVmFsdWUgPSBKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuY2FjaGVba2V5XS51c2VyVmFsdWUgPSBuZXdWYWx1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlJC5uZXh0KHsKICAgICAgICBrZXk6IGtleSwKICAgICAgICBuZXdWYWx1ZTogbmV3VmFsdWUsCiAgICAgICAgb2xkVmFsdWU6IG9sZFZhbHVlCiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFVpU2V0dGluZ3NDbGllbnQ7Cn0oKTsKCmV4cG9ydHMuVWlTZXR0aW5nc0NsaWVudCA9IFVpU2V0dGluZ3NDbGllbnQ7"},null]}