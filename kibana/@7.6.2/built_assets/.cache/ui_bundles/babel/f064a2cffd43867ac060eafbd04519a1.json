{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/watcher/public/np_ready/application/sections/watch_edit/components/threshold_watch_edit/watch_visualization.js","dependencies":[{"path":"x-pack/legacy/plugins/watcher/public/np_ready/application/sections/watch_edit/components/threshold_watch_edit/watch_visualization.js","mtime":1585205048903},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLldhdGNoVmlzdWFsaXphdGlvbiA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfY2hhcnRzID0gcmVxdWlyZSgiQGVsYXN0aWMvY2hhcnRzIik7Cgp2YXIgX2RhdGVtYXRoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAZWxhc3RpYy9kYXRlbWF0aCIpKTsKCnZhciBfbW9tZW50VGltZXpvbmUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm1vbWVudC10aW1lem9uZSIpKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF92aXN1YWxpemVfb3B0aW9ucyA9IHJlcXVpcmUoInBsdWdpbnMvd2F0Y2hlci9ucF9yZWFkeS9hcHBsaWNhdGlvbi9tb2RlbHMvdmlzdWFsaXplX29wdGlvbnMiKTsKCnZhciBfdGhyZXNob2xkX3dhdGNoID0gcmVxdWlyZSgicGx1Z2lucy93YXRjaGVyL25wX3JlYWR5L2FwcGxpY2F0aW9uL21vZGVscy93YXRjaC90aHJlc2hvbGRfd2F0Y2giKTsKCnZhciBfYXBpID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vbGliL2FwaSIpOwoKdmFyIF93YXRjaF9jb250ZXh0ID0gcmVxdWlyZSgiLi4vLi4vd2F0Y2hfY29udGV4dCIpOwoKdmFyIF9hZ2dfdHlwZXMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9tb2RlbHMvd2F0Y2gvYWdnX3R5cGVzIik7Cgp2YXIgX2NvbXBhcmF0b3JzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vbW9kZWxzL3dhdGNoL2NvbXBhcmF0b3JzIik7Cgp2YXIgX2NvbXBvbmVudHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21wb25lbnRzIik7Cgp2YXIgX2FwcF9jb250ZXh0ID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vYXBwX2NvbnRleHQiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCnZhciBjdXN0b21UaGVtZSA9IGZ1bmN0aW9uIGN1c3RvbVRoZW1lKCkgewogIHJldHVybiB7CiAgICBsaW5lU2VyaWVzU3R5bGU6IHsKICAgICAgbGluZTogewogICAgICAgIHN0cm9rZVdpZHRoOiAzCiAgICAgIH0sCiAgICAgIHBvaW50OiB7CiAgICAgICAgdmlzaWJsZTogZmFsc2UKICAgICAgfQogICAgfQogIH07Cn07Cgp2YXIgZ2V0VGltZXpvbmUgPSBmdW5jdGlvbiBnZXRUaW1lem9uZShjb25maWcpIHsKICB2YXIgREFURV9GT1JNQVRfQ09ORklHX0tFWSA9ICdkYXRlRm9ybWF0OnR6JzsKICB2YXIgaXNDdXN0b21UaW1lem9uZSA9ICFjb25maWcuaXNEZWZhdWx0KERBVEVfRk9STUFUX0NPTkZJR19LRVkpOwoKICBpZiAoaXNDdXN0b21UaW1lem9uZSkgewogICAgcmV0dXJuIGNvbmZpZy5nZXQoREFURV9GT1JNQVRfQ09ORklHX0tFWSk7CiAgfQoKICB2YXIgZGV0ZWN0ZWRUaW1lem9uZSA9IF9tb21lbnRUaW1lem9uZS5kZWZhdWx0LnR6Lmd1ZXNzKCk7CgogIGlmIChkZXRlY3RlZFRpbWV6b25lKSB7CiAgICByZXR1cm4gZGV0ZWN0ZWRUaW1lem9uZTsKICB9IC8vIGRlZmF1bHQgdG8gVVRDIGlmIHdlIGNhbid0IGZpZ3VyZSBvdXQgdGhlIHRpbWV6b25lCgoKICByZXR1cm4gKDAsIF9tb21lbnRUaW1lem9uZS5kZWZhdWx0KSgpLmZvcm1hdCgnWicpOwp9OwoKdmFyIGdldERvbWFpbiA9IGZ1bmN0aW9uIGdldERvbWFpbih3YXRjaCkgewogIHZhciBWSVNVQUxJWkVfVElNRV9XSU5ET1dfTVVMVElQTElFUiA9IDU7CiAgdmFyIGZyb21FeHByZXNzaW9uID0gIm5vdy0iLmNvbmNhdCh3YXRjaC50aW1lV2luZG93U2l6ZSAqIFZJU1VBTElaRV9USU1FX1dJTkRPV19NVUxUSVBMSUVSKS5jb25jYXQod2F0Y2gudGltZVdpbmRvd1VuaXQpOwogIHZhciB0b0V4cHJlc3Npb24gPSAnbm93JzsKCiAgdmFyIGZyb21Nb21lbnQgPSBfZGF0ZW1hdGguZGVmYXVsdC5wYXJzZShmcm9tRXhwcmVzc2lvbik7CgogIHZhciB0b01vbWVudCA9IF9kYXRlbWF0aC5kZWZhdWx0LnBhcnNlKHRvRXhwcmVzc2lvbik7CgogIHZhciB2aXN1YWxpemVUaW1lV2luZG93RnJvbSA9IGZyb21Nb21lbnQgPyBmcm9tTW9tZW50LnZhbHVlT2YoKSA6IDA7CiAgdmFyIHZpc3VhbGl6ZVRpbWVXaW5kb3dUbyA9IHRvTW9tZW50ID8gdG9Nb21lbnQudmFsdWVPZigpIDogMDsKICByZXR1cm4gewogICAgbWluOiB2aXN1YWxpemVUaW1lV2luZG93RnJvbSwKICAgIG1heDogdmlzdWFsaXplVGltZVdpbmRvd1RvCiAgfTsKfTsKCnZhciBnZXRUaHJlc2hvbGQgPSBmdW5jdGlvbiBnZXRUaHJlc2hvbGQod2F0Y2gpIHsKICByZXR1cm4gd2F0Y2gudGhyZXNob2xkLnNsaWNlKDAsIF9jb21wYXJhdG9ycy5jb21wYXJhdG9yc1t3YXRjaC50aHJlc2hvbGRDb21wYXJhdG9yXS5yZXF1aXJlZFZhbHVlcyk7Cn07Cgp2YXIgZ2V0VGltZUJ1Y2tldHMgPSBmdW5jdGlvbiBnZXRUaW1lQnVja2V0cyh3YXRjaCwgdGltZUJ1Y2tldHMpIHsKICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKHdhdGNoKTsKICB0aW1lQnVja2V0cy5zZXRCb3VuZHMoZG9tYWluKTsKICByZXR1cm4gdGltZUJ1Y2tldHM7Cn07Cgp2YXIgV2F0Y2hWaXN1YWxpemF0aW9uID0gZnVuY3Rpb24gV2F0Y2hWaXN1YWxpemF0aW9uKCkgewogIHZhciBfdXNlQXBwQ29udGV4dCA9ICgwLCBfYXBwX2NvbnRleHQudXNlQXBwQ29udGV4dCkoKSwKICAgICAgVGltZUJ1Y2tldHMgPSBfdXNlQXBwQ29udGV4dC5sZWdhY3kuVGltZUJ1Y2tldHMsCiAgICAgIGV1aVV0aWxzID0gX3VzZUFwcENvbnRleHQuZXVpVXRpbHMsCiAgICAgIHVpU2V0dGluZ3MgPSBfdXNlQXBwQ29udGV4dC51aVNldHRpbmdzOwoKICB2YXIgX3VzZUNvbnRleHQgPSAoMCwgX3JlYWN0LnVzZUNvbnRleHQpKF93YXRjaF9jb250ZXh0LldhdGNoQ29udGV4dCksCiAgICAgIHdhdGNoID0gX3VzZUNvbnRleHQud2F0Y2g7CgogIHZhciBjaGFydHNUaGVtZSA9IGV1aVV0aWxzLnVzZUNoYXJ0c1RoZW1lKCk7CiAgdmFyIGluZGV4ID0gd2F0Y2guaW5kZXgsCiAgICAgIHRpbWVGaWVsZCA9IHdhdGNoLnRpbWVGaWVsZCwKICAgICAgdHJpZ2dlckludGVydmFsU2l6ZSA9IHdhdGNoLnRyaWdnZXJJbnRlcnZhbFNpemUsCiAgICAgIHRyaWdnZXJJbnRlcnZhbFVuaXQgPSB3YXRjaC50cmlnZ2VySW50ZXJ2YWxVbml0LAogICAgICBhZ2dUeXBlID0gd2F0Y2guYWdnVHlwZSwKICAgICAgYWdnRmllbGQgPSB3YXRjaC5hZ2dGaWVsZCwKICAgICAgdGVybVNpemUgPSB3YXRjaC50ZXJtU2l6ZSwKICAgICAgdGVybUZpZWxkID0gd2F0Y2gudGVybUZpZWxkLAogICAgICB0aHJlc2hvbGRDb21wYXJhdG9yID0gd2F0Y2gudGhyZXNob2xkQ29tcGFyYXRvciwKICAgICAgdGltZVdpbmRvd1NpemUgPSB3YXRjaC50aW1lV2luZG93U2l6ZSwKICAgICAgdGltZVdpbmRvd1VuaXQgPSB3YXRjaC50aW1lV2luZG93VW5pdCwKICAgICAgZ3JvdXBCeSA9IHdhdGNoLmdyb3VwQnksCiAgICAgIHRocmVzaG9sZCA9IHdhdGNoLnRocmVzaG9sZDsKICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKHdhdGNoKTsKICB2YXIgdGltZUJ1Y2tldHMgPSBuZXcgVGltZUJ1Y2tldHMoKTsKICB0aW1lQnVja2V0cy5zZXRCb3VuZHMoZG9tYWluKTsKICB2YXIgaW50ZXJ2YWwgPSB0aW1lQnVja2V0cy5nZXRJbnRlcnZhbCgpLmV4cHJlc3Npb247CiAgdmFyIHZpc3VhbGl6ZU9wdGlvbnMgPSBuZXcgX3Zpc3VhbGl6ZV9vcHRpb25zLlZpc3VhbGl6ZU9wdGlvbnMoewogICAgcmFuZ2VGcm9tOiBkb21haW4ubWluLAogICAgcmFuZ2VUbzogZG9tYWluLm1heCwKICAgIGludGVydmFsOiBpbnRlcnZhbCwKICAgIHRpbWV6b25lOiBnZXRUaW1lem9uZSh1aVNldHRpbmdzKQogIH0pOyAvLyBGZXRjaGluZyB2aXN1YWxpemF0aW9uIGRhdGEgaXMgaW5kZXBlbmRlbnQgb2Ygd2F0Y2ggYWN0aW9ucwoKICB2YXIgd2F0Y2hXaXRob3V0QWN0aW9ucyA9IG5ldyBfdGhyZXNob2xkX3dhdGNoLlRocmVzaG9sZFdhdGNoKF9vYmplY3RTcHJlYWQoe30sIHdhdGNoLCB7CiAgICBhY3Rpb25zOiBbXQogIH0pKTsKCiAgdmFyIF91c2VHZXRXYXRjaFZpc3VhbGl6YSA9ICgwLCBfYXBpLnVzZUdldFdhdGNoVmlzdWFsaXphdGlvbkRhdGEpKHdhdGNoV2l0aG91dEFjdGlvbnMsIHZpc3VhbGl6ZU9wdGlvbnMpLAogICAgICBpc0luaXRpYWxSZXF1ZXN0ID0gX3VzZUdldFdhdGNoVmlzdWFsaXphLmlzSW5pdGlhbFJlcXVlc3QsCiAgICAgIGlzTG9hZGluZyA9IF91c2VHZXRXYXRjaFZpc3VhbGl6YS5pc0xvYWRpbmcsCiAgICAgIHdhdGNoVmlzdWFsaXphdGlvbkRhdGEgPSBfdXNlR2V0V2F0Y2hWaXN1YWxpemEuZGF0YSwKICAgICAgZXJyb3IgPSBfdXNlR2V0V2F0Y2hWaXN1YWxpemEuZXJyb3IsCiAgICAgIHJlbG9hZCA9IF91c2VHZXRXYXRjaFZpc3VhbGl6YS5zZW5kUmVxdWVzdDsKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIC8vIFByZXZlbnQgc2VuZGluZyBhIHNlY29uZCByZXF1ZXN0IG9uIGluaXRpYWwgcmVuZGVyLgogICAgaWYgKGlzSW5pdGlhbFJlcXVlc3QpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHJlbG9hZCgpOwogIH0sIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMKICBbaW5kZXgsIHRpbWVGaWVsZCwgdHJpZ2dlckludGVydmFsU2l6ZSwgdHJpZ2dlckludGVydmFsVW5pdCwgYWdnVHlwZSwgYWdnRmllbGQsIHRlcm1TaXplLCB0ZXJtRmllbGQsIHRocmVzaG9sZENvbXBhcmF0b3IsIHRpbWVXaW5kb3dTaXplLCB0aW1lV2luZG93VW5pdCwgZ3JvdXBCeSwgdGhyZXNob2xkXSk7CgogIGlmIChpc0luaXRpYWxSZXF1ZXN0ICYmIGlzTG9hZGluZykgewogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlFbXB0eVByb21wdCwgewogICAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxvYWRpbmdDaGFydCwgewogICAgICAgIHNpemU6ICJ4bCIKICAgICAgfSksCiAgICAgIGJvZHk6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCB7CiAgICAgICAgY29sb3I6ICJzdWJkdWVkIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2sud2F0Y2hlci5zZWN0aW9ucy53YXRjaEVkaXQubG9hZGluZ1dhdGNoVmlzdWFsaXphdGlvbkRlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkxvYWRpbmcgd2F0Y2ggdmlzdWFsaXphdGlvblx1MjAyNiIKICAgICAgfSkpCiAgICB9KTsKICB9CgogIGlmIChlcnJvcikgewogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgIHNpemU6ICJsIgogICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbXBvbmVudHMuU2VjdGlvbkVycm9yLCB7CiAgICAgIHRpdGxlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2sud2F0Y2hlci5zZWN0aW9ucy53YXRjaEVkaXQuZXJyb3JMb2FkaW5nV2F0Y2hWaXN1YWxpemF0aW9uVGl0bGUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ2Fubm90IGxvYWQgd2F0Y2ggdmlzdWFsaXphdGlvbiIKICAgICAgfSksCiAgICAgIGVycm9yOiBlcnJvcgogICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgICAgc2l6ZTogImwiCiAgICB9KSk7CiAgfQoKICBpZiAod2F0Y2hWaXN1YWxpemF0aW9uRGF0YSkgewogICAgdmFyIHdhdGNoVmlzdWFsaXphdGlvbkRhdGFLZXlzID0gT2JqZWN0LmtleXMod2F0Y2hWaXN1YWxpemF0aW9uRGF0YSk7CiAgICB2YXIgdGltZXpvbmUgPSBnZXRUaW1lem9uZSh1aVNldHRpbmdzKTsKICAgIHZhciBhY3R1YWxUaHJlc2hvbGQgPSBnZXRUaHJlc2hvbGQod2F0Y2gpOwogICAgdmFyIG1heFkgPSBhY3R1YWxUaHJlc2hvbGRbYWN0dWFsVGhyZXNob2xkLmxlbmd0aCAtIDFdOwogICAgT2JqZWN0LnZhbHVlcyh3YXRjaFZpc3VhbGl6YXRpb25EYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICAgICAgICB5ID0gX3JlZjJbMV07CgogICAgICAgIGlmICh5ID4gbWF4WSkgewogICAgICAgICAgbWF4WSA9IHk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwoKICAgIHZhciBkYXRlRm9ybWF0dGVyID0gZnVuY3Rpb24gZGF0ZUZvcm1hdHRlcihkKSB7CiAgICAgIHJldHVybiAoMCwgX21vbWVudFRpbWV6b25lLmRlZmF1bHQpKGQpLnR6KHRpbWV6b25lKS5mb3JtYXQoZ2V0VGltZUJ1Y2tldHMod2F0Y2gsIG5ldyBUaW1lQnVja2V0cygpKS5nZXRTY2FsZWREYXRlRm9ybWF0KCkpOwogICAgfTsKCiAgICB2YXIgYWdnTGFiZWwgPSBfYWdnX3R5cGVzLmFnZ1R5cGVzW3dhdGNoLmFnZ1R5cGVdLnRleHQ7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAid2F0Y2hWaXN1YWxpemF0aW9uQ2hhcnQiCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgIHNpemU6ICJsIgogICAgfSksIHdhdGNoVmlzdWFsaXphdGlvbkRhdGFLZXlzLmxlbmd0aCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NoYXJ0cy5DaGFydCwgewogICAgICBzaXplOiBbJzEwMCUnLCAzMDBdLAogICAgICByZW5kZXJlcjogImNhbnZhcyIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NoYXJ0cy5TZXR0aW5ncywgewogICAgICB0aGVtZTogW2N1c3RvbVRoZW1lKCksIGNoYXJ0c1RoZW1lXSwKICAgICAgeERvbWFpbjogZG9tYWluLAogICAgICBzaG93TGVnZW5kOiAhIXdhdGNoLnRlcm1GaWVsZCwKICAgICAgbGVnZW5kUG9zaXRpb246IF9jaGFydHMuUG9zaXRpb24uQm90dG9tCiAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2hhcnRzLkF4aXMsIHsKICAgICAgaWQ6ICJib3R0b20iLAogICAgICBwb3NpdGlvbjogX2NoYXJ0cy5Qb3NpdGlvbi5Cb3R0b20sCiAgICAgIHNob3dPdmVybGFwcGluZ1RpY2tzOiB0cnVlLAogICAgICB0aWNrRm9ybWF0OiBkYXRlRm9ybWF0dGVyCiAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2hhcnRzLkF4aXMsIHsKICAgICAgZG9tYWluOiB7CiAgICAgICAgbWF4OiBtYXhZCiAgICAgIH0sCiAgICAgIGlkOiAibGVmdCIsCiAgICAgIHRpdGxlOiBhZ2dMYWJlbCwKICAgICAgcG9zaXRpb246IF9jaGFydHMuUG9zaXRpb24uTGVmdAogICAgfSksIHdhdGNoVmlzdWFsaXphdGlvbkRhdGFLZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jaGFydHMuTGluZVNlcmllcywgewogICAgICAgIGtleToga2V5LAogICAgICAgIGlkOiBrZXksCiAgICAgICAgeFNjYWxlVHlwZTogX2NoYXJ0cy5TY2FsZVR5cGUuVGltZSwKICAgICAgICB5U2NhbGVUeXBlOiBfY2hhcnRzLlNjYWxlVHlwZS5MaW5lYXIsCiAgICAgICAgZGF0YTogd2F0Y2hWaXN1YWxpemF0aW9uRGF0YVtrZXldLAogICAgICAgIHhBY2Nlc3NvcjogMCwKICAgICAgICB5QWNjZXNzb3JzOiBbMV0sCiAgICAgICAgdGltZVpvbmU6IHRpbWV6b25lCiAgICAgIH0pOwogICAgfSksIGFjdHVhbFRocmVzaG9sZC5tYXAoZnVuY3Rpb24gKF92YWx1ZSwgaSkgewogICAgICB2YXIgc3BlY0lkID0gaSA9PT0gMCA/ICd0aHJlc2hvbGQnIDogInRocmVzaG9sZCIuY29uY2F0KGkpOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2hhcnRzLkxpbmVBbm5vdGF0aW9uLCB7CiAgICAgICAga2V5OiBzcGVjSWQsCiAgICAgICAgaWQ6IHNwZWNJZCwKICAgICAgICBkb21haW5UeXBlOiBfY2hhcnRzLkFubm90YXRpb25Eb21haW5UeXBlcy5ZRG9tYWluLAogICAgICAgIGRhdGFWYWx1ZXM6IFt7CiAgICAgICAgICBkYXRhVmFsdWU6IHdhdGNoLnRocmVzaG9sZFtpXSwKICAgICAgICAgIGRldGFpbHM6IHNwZWNJZAogICAgICAgIH1dCiAgICAgIH0pOwogICAgfSkpIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay53YXRjaGVyLnRocmVzaG9sZFByZXZpZXdDaGFydC5ub0RhdGFUaXRsZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJObyBkYXRhIgogICAgICB9KSwKICAgICAgY29sb3I6ICJ3YXJuaW5nIgogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay53YXRjaGVyLnRocmVzaG9sZFByZXZpZXdDaGFydC5kYXRhRG9lc05vdEV4aXN0VGV4dE1lc3NhZ2UiLAogICAgICBkZWZhdWx0TWVzc2FnZTogIllvdXIgaW5kZXggYW5kIGNvbmRpdGlvbiBkaWQgbm90IHJldHVybiBhbnkgZGF0YS4iCiAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgICAgc2l6ZTogImwiCiAgICB9KSk7CiAgfQoKICByZXR1cm4gbnVsbDsKfTsKCmV4cG9ydHMuV2F0Y2hWaXN1YWxpemF0aW9uID0gV2F0Y2hWaXN1YWxpemF0aW9uOw=="},null]}