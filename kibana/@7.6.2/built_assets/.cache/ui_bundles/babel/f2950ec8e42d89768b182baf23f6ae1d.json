{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/jobs/jobs_list/components/utils.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/jobs/jobs_list/components/utils.js","mtime":1585205045784},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmxvYWRGdWxsSm9iID0gbG9hZEZ1bGxKb2I7CmV4cG9ydHMuaXNTdGFydGFibGUgPSBpc1N0YXJ0YWJsZTsKZXhwb3J0cy5pc1N0b3BwYWJsZSA9IGlzU3RvcHBhYmxlOwpleHBvcnRzLmlzQ2xvc2FibGUgPSBpc0Nsb3NhYmxlOwpleHBvcnRzLmZvcmNlU3RhcnREYXRhZmVlZHMgPSBmb3JjZVN0YXJ0RGF0YWZlZWRzOwpleHBvcnRzLnN0b3BEYXRhZmVlZHMgPSBzdG9wRGF0YWZlZWRzOwpleHBvcnRzLmNsb25lSm9iID0gY2xvbmVKb2I7CmV4cG9ydHMuY2xvc2VKb2JzID0gY2xvc2VKb2JzOwpleHBvcnRzLmRlbGV0ZUpvYnMgPSBkZWxldGVKb2JzOwpleHBvcnRzLmZpbHRlckpvYnMgPSBmaWx0ZXJKb2JzOwpleHBvcnRzLmNoZWNrRm9yQXV0b1N0YXJ0RGF0YWZlZWQgPSBjaGVja0ZvckF1dG9TdGFydERhdGFmZWVkOwpleHBvcnRzLmdldEpvYklkVXJsID0gZ2V0Sm9iSWRVcmw7CmV4cG9ydHMuZ2V0U2VsZWN0ZWRKb2JJZEZyb21VcmwgPSBnZXRTZWxlY3RlZEpvYklkRnJvbVVybDsKZXhwb3J0cy5jbGVhclNlbGVjdGVkSm9iSWRGcm9tVXJsID0gY2xlYXJTZWxlY3RlZEpvYklkRnJvbVVybDsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX25vdGlmeSA9IHJlcXVpcmUoInVpL25vdGlmeSIpOwoKdmFyIF9tZXNzYWdlYmFyID0gcmVxdWlyZSgiLi4vLi4vLi4vY29tcG9uZW50cy9tZXNzYWdlYmFyIik7Cgp2YXIgX3Jpc29uTm9kZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmlzb24tbm9kZSIpKTsKCnZhciBfY2hyb21lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJ1aS9jaHJvbWUiKSk7Cgp2YXIgX2pvYl9zZXJ2aWNlID0gcmVxdWlyZSgiLi4vLi4vLi4vc2VydmljZXMvam9iX3NlcnZpY2UiKTsKCnZhciBfbWxfYXBpX3NlcnZpY2UgPSByZXF1aXJlKCIuLi8uLi8uLi9zZXJ2aWNlcy9tbF9hcGlfc2VydmljZSIpOwoKdmFyIF9zdGF0ZXMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi9jb21tb24vY29uc3RhbnRzL3N0YXRlcyIpOwoKdmFyIF9wYXJzZV9pbnRlcnZhbCA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uL2NvbW1vbi91dGlsL3BhcnNlX2ludGVydmFsIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfY2FsZW5kYXJfc2VydmljZSA9IHJlcXVpcmUoIi4uLy4uLy4uL3NlcnZpY2VzL2NhbGVuZGFyX3NlcnZpY2UiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIGxvYWRGdWxsSm9iKGpvYklkKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIF9tbF9hcGlfc2VydmljZS5tbC5qb2JzLmpvYnMoam9iSWQpLnRoZW4oZnVuY3Rpb24gKGpvYnMpIHsKICAgICAgaWYgKGpvYnMubGVuZ3RoKSB7CiAgICAgICAgcmVzb2x2ZShqb2JzWzBdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBmaW5kIGpvYiAiLmNvbmNhdChqb2JJZCkpOwogICAgICB9CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgcmVqZWN0KGVycm9yKTsKICAgIH0pOwogIH0pOwp9CgpmdW5jdGlvbiBpc1N0YXJ0YWJsZShqb2JzKSB7CiAgcmV0dXJuIGpvYnMuc29tZShmdW5jdGlvbiAoaikgewogICAgcmV0dXJuIGouZGF0YWZlZWRTdGF0ZSA9PT0gX3N0YXRlcy5EQVRBRkVFRF9TVEFURS5TVE9QUEVEOwogIH0pOwp9CgpmdW5jdGlvbiBpc1N0b3BwYWJsZShqb2JzKSB7CiAgcmV0dXJuIGpvYnMuc29tZShmdW5jdGlvbiAoaikgewogICAgcmV0dXJuIGouZGF0YWZlZWRTdGF0ZSA9PT0gX3N0YXRlcy5EQVRBRkVFRF9TVEFURS5TVEFSVEVEOwogIH0pOwp9CgpmdW5jdGlvbiBpc0Nsb3NhYmxlKGpvYnMpIHsKICByZXR1cm4gam9icy5zb21lKGZ1bmN0aW9uIChqKSB7CiAgICByZXR1cm4gai5kYXRhZmVlZFN0YXRlID09PSBfc3RhdGVzLkRBVEFGRUVEX1NUQVRFLlNUT1BQRUQgJiYgai5qb2JTdGF0ZSAhPT0gX3N0YXRlcy5KT0JfU1RBVEUuQ0xPU0VEOwogIH0pOwp9CgpmdW5jdGlvbiBmb3JjZVN0YXJ0RGF0YWZlZWRzKGpvYnMsIHN0YXJ0LCBlbmQpIHsKICB2YXIgZmluaXNoID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmdW5jdGlvbiAoKSB7fTsKICB2YXIgZGF0YWZlZWRJZHMgPSBqb2JzLmZpbHRlcihmdW5jdGlvbiAoaikgewogICAgcmV0dXJuIGouaGFzRGF0YWZlZWQ7CiAgfSkubWFwKGZ1bmN0aW9uIChqKSB7CiAgICByZXR1cm4gai5kYXRhZmVlZElkOwogIH0pOwoKICBfam9iX3NlcnZpY2UubWxKb2JTZXJ2aWNlLmZvcmNlU3RhcnREYXRhZmVlZHMoZGF0YWZlZWRJZHMsIHN0YXJ0LCBlbmQpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgIHNob3dSZXN1bHRzKHJlc3AsIF9zdGF0ZXMuREFUQUZFRURfU1RBVEUuU1RBUlRFRCk7CiAgICBmaW5pc2goKTsKICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgIF9tZXNzYWdlYmFyLm1sTWVzc2FnZUJhclNlcnZpY2Uubm90aWZ5LmVycm9yKGVycm9yKTsKCiAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGREYW5nZXIoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1sLmpvYnNMaXN0LnN0YXJ0Sm9iRXJyb3JNZXNzYWdlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0pvYnMgZmFpbGVkIHRvIHN0YXJ0JwogICAgfSksIGVycm9yKTsKCiAgICBmaW5pc2goKTsKICB9KTsKfQoKZnVuY3Rpb24gc3RvcERhdGFmZWVkcyhqb2JzKSB7CiAgdmFyIGZpbmlzaCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZnVuY3Rpb24gKCkge307CiAgdmFyIGRhdGFmZWVkSWRzID0gam9icy5maWx0ZXIoZnVuY3Rpb24gKGopIHsKICAgIHJldHVybiBqLmhhc0RhdGFmZWVkOwogIH0pLm1hcChmdW5jdGlvbiAoaikgewogICAgcmV0dXJuIGouZGF0YWZlZWRJZDsKICB9KTsKCiAgX2pvYl9zZXJ2aWNlLm1sSm9iU2VydmljZS5zdG9wRGF0YWZlZWRzKGRhdGFmZWVkSWRzKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICBzaG93UmVzdWx0cyhyZXNwLCBfc3RhdGVzLkRBVEFGRUVEX1NUQVRFLlNUT1BQRUQpOwogICAgZmluaXNoKCk7CiAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICBfbWVzc2FnZWJhci5tbE1lc3NhZ2VCYXJTZXJ2aWNlLm5vdGlmeS5lcnJvcihlcnJvcik7CgogICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkRGFuZ2VyKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5qb2JzTGlzdC5zdG9wSm9iRXJyb3JNZXNzYWdlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0pvYnMgZmFpbGVkIHRvIHN0b3AnCiAgICB9KSwgZXJyb3IpOwoKICAgIGZpbmlzaCgpOwogIH0pOwp9CgpmdW5jdGlvbiBzaG93UmVzdWx0cyhyZXNwLCBhY3Rpb24pIHsKICB2YXIgc3VjY2Vzc2VzID0gW107CiAgdmFyIGZhaWx1cmVzID0gW107CgogIGZvciAodmFyIGQgaW4gcmVzcCkgewogICAgaWYgKHJlc3BbZF1bYWN0aW9uXSA9PT0gdHJ1ZSB8fCByZXNwW2RdW2FjdGlvbl0gPT09IGZhbHNlICYmIHJlc3BbZF0uZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDA5ICYmIGFjdGlvbiA9PT0gX3N0YXRlcy5EQVRBRkVFRF9TVEFURS5TVEFSVEVEKSB7CiAgICAgIHN1Y2Nlc3Nlcy5wdXNoKGQpOwogICAgfSBlbHNlIHsKICAgICAgZmFpbHVyZXMucHVzaCh7CiAgICAgICAgaWQ6IGQsCiAgICAgICAgcmVzdWx0OiByZXNwW2RdCiAgICAgIH0pOwogICAgfQogIH0KCiAgdmFyIGFjdGlvblRleHQgPSAnJzsKICB2YXIgYWN0aW9uVGV4dFBUID0gJyc7CgogIGlmIChhY3Rpb24gPT09IF9zdGF0ZXMuREFUQUZFRURfU1RBVEUuU1RBUlRFRCkgewogICAgYWN0aW9uVGV4dCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5qb2JzTGlzdC5zdGFydEFjdGlvblN0YXR1c1RleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnc3RhcnQnCiAgICB9KTsKICAgIGFjdGlvblRleHRQVCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5qb2JzTGlzdC5zdGFydGVkQWN0aW9uU3RhdHVzVGV4dCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdzdGFydGVkJwogICAgfSk7CiAgfSBlbHNlIGlmIChhY3Rpb24gPT09IF9zdGF0ZXMuREFUQUZFRURfU1RBVEUuU1RPUFBFRCkgewogICAgYWN0aW9uVGV4dCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5qb2JzTGlzdC5zdG9wQWN0aW9uU3RhdHVzVGV4dCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdzdG9wJwogICAgfSk7CiAgICBhY3Rpb25UZXh0UFQgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwuam9ic0xpc3Quc3RvcHBlZEFjdGlvblN0YXR1c1RleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnc3RvcHBlZCcKICAgIH0pOwogIH0gZWxzZSBpZiAoYWN0aW9uID09PSBfc3RhdGVzLkRBVEFGRUVEX1NUQVRFLkRFTEVURUQpIHsKICAgIGFjdGlvblRleHQgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwuam9ic0xpc3QuZGVsZXRlQWN0aW9uU3RhdHVzVGV4dCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdkZWxldGUnCiAgICB9KTsKICAgIGFjdGlvblRleHRQVCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5qb2JzTGlzdC5kZWxldGVkQWN0aW9uU3RhdHVzVGV4dCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdkZWxldGVkJwogICAgfSk7CiAgfSBlbHNlIGlmIChhY3Rpb24gPT09IF9zdGF0ZXMuSk9CX1NUQVRFLkNMT1NFRCkgewogICAgYWN0aW9uVGV4dCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5qb2JzTGlzdC5jbG9zZUFjdGlvblN0YXR1c1RleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnY2xvc2UnCiAgICB9KTsKICAgIGFjdGlvblRleHRQVCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5qb2JzTGlzdC5jbG9zZWRBY3Rpb25TdGF0dXNUZXh0JywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ2Nsb3NlZCcKICAgIH0pOwogIH0KCiAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkU3VjY2VzcyhfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwuam9ic0xpc3QuYWN0aW9uRXhlY3V0ZVN1Y2Nlc3NmdWxseU5vdGlmaWNhdGlvbk1lc3NhZ2UnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ3tzdWNjZXNzZXNKb2JzQ291bnQsIHBsdXJhbCwgb25le3tzdWNjZXNzSm9ifX0gb3RoZXJ7IyBqb2JzfX0ge2FjdGlvblRleHRQVH0gc3VjY2Vzc2Z1bGx5JywKICAgIHZhbHVlczogewogICAgICBzdWNjZXNzZXNKb2JzQ291bnQ6IHN1Y2Nlc3Nlcy5sZW5ndGgsCiAgICAgIHN1Y2Nlc3NKb2I6IHN1Y2Nlc3Nlc1swXSwKICAgICAgYWN0aW9uVGV4dFBUOiBhY3Rpb25UZXh0UFQKICAgIH0KICB9KSk7CgogIGlmIChmYWlsdXJlcy5sZW5ndGggPiAwKSB7CiAgICBmYWlsdXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmKSB7CiAgICAgIF9tZXNzYWdlYmFyLm1sTWVzc2FnZUJhclNlcnZpY2Uubm90aWZ5LmVycm9yKGYucmVzdWx0LmVycm9yKTsKCiAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwuam9ic0xpc3QuYWN0aW9uRmFpbGVkTm90aWZpY2F0aW9uTWVzc2FnZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ3tmYWlsdXJlSWR9IGZhaWxlZCB0byB7YWN0aW9uVGV4dH0nLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgZmFpbHVyZUlkOiBmLmlkLAogICAgICAgICAgYWN0aW9uVGV4dDogYWN0aW9uVGV4dAogICAgICAgIH0KICAgICAgfSkpOwogICAgfSk7CiAgfQp9CgpmdW5jdGlvbiBjbG9uZUpvYihqb2JJZCkgewogIHZhciBqb2IsIHN0YXJ0LCBlbmQsIGJ1Y2tldFNwYW5NczsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGNsb25lSm9iJChfY29udGV4dCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGxvYWRGdWxsSm9iKGpvYklkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIGpvYiA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgaWYgKGpvYi5jdXN0b21fc2V0dGluZ3MgJiYgam9iLmN1c3RvbV9zZXR0aW5ncy5jcmVhdGVkX2J5KSB7CiAgICAgICAgICAgIC8vIGlmIHRoZSBqb2IgaXMgZnJvbSBhIHdpemFyZHMsIGkuZS4gY29udGFpbnMgYSBjcmVhdGVkX2J5IHByb3BlcnR5CiAgICAgICAgICAgIC8vIHVzZSB0ZW1wSm9iQ2xvbmluZ09iamVjdHMgdG8gdGVtcG9yYXJpbHkgc3RvcmUgdGhlIGpvYgogICAgICAgICAgICBfam9iX3NlcnZpY2UubWxKb2JTZXJ2aWNlLnRlbXBKb2JDbG9uaW5nT2JqZWN0cy5qb2IgPSBqb2I7CgogICAgICAgICAgICBpZiAoam9iLmRhdGFfY291bnRzLmVhcmxpZXN0X3JlY29yZF90aW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiBqb2IuZGF0YV9jb3VudHMubGF0ZXN0X3JlY29yZF90aW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiBqb2IuZGF0YV9jb3VudHMubGF0ZXN0X2J1Y2tldF90aW1lc3RhbXAgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIC8vIGlmIHRoZSBqb2IgaGFzIHJ1biBiZWZvcmUsIHVzZSB0aGUgZWFybGllc3QgYW5kIGxhdGVzdCByZWNvcmQgdGltZXN0YW1wCiAgICAgICAgICAgICAgLy8gYXMgdGhlIGNsb25lZCBqb2IncyB0aW1lIHJhbmdlCiAgICAgICAgICAgICAgc3RhcnQgPSBqb2IuZGF0YV9jb3VudHMuZWFybGllc3RfcmVjb3JkX3RpbWVzdGFtcDsKICAgICAgICAgICAgICBlbmQgPSBqb2IuZGF0YV9jb3VudHMubGF0ZXN0X3JlY29yZF90aW1lc3RhbXA7CgogICAgICAgICAgICAgIGlmIChqb2IuZGF0YWZlZWRfY29uZmlnLmFnZ3JlZ2F0aW9ucyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZGF0YWZlZWQgdXNlcyBhZ2dyZWdhdGlvbnMgdGhlIGVhcmxpZXN0IGFuZCBsYXRlc3QgcmVjb3JkIHRpbWVzdGFtcHMgbWF5IG5vdCBiZSB0aGUgc2FtZQogICAgICAgICAgICAgICAgLy8gYXMgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIGRhdGEgaW4gdGhlIGluZGV4LgogICAgICAgICAgICAgICAgYnVja2V0U3Bhbk1zID0gKDAsIF9wYXJzZV9pbnRlcnZhbC5wYXJzZUludGVydmFsKShqb2IuYW5hbHlzaXNfY29uZmlnLmJ1Y2tldF9zcGFuKS5hc01pbGxpc2Vjb25kcygpOyAvLyByb3VuZCBkb3duIHRvIHRoZSBzdGFydCBvZiB0aGUgbmVhcmVzdCBidWNrZXQKCiAgICAgICAgICAgICAgICBzdGFydCA9IE1hdGguZmxvb3Ioam9iLmRhdGFfY291bnRzLmVhcmxpZXN0X3JlY29yZF90aW1lc3RhbXAgLyBidWNrZXRTcGFuTXMpICogYnVja2V0U3Bhbk1zOyAvLyB1c2UgbGF0ZXN0X2J1Y2tldF90aW1lc3RhbXAgYW5kIGFkZCB0d28gYnVja2V0IHNwYW5zIG1pbnVzIG9uZSBtcwoKICAgICAgICAgICAgICAgIGVuZCA9IGpvYi5kYXRhX2NvdW50cy5sYXRlc3RfYnVja2V0X3RpbWVzdGFtcCArIGJ1Y2tldFNwYW5NcyAqIDIgLSAxOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2pvYl9zZXJ2aWNlLm1sSm9iU2VydmljZS50ZW1wSm9iQ2xvbmluZ09iamVjdHMuc3RhcnQgPSBzdGFydDsKICAgICAgICAgICAgICBfam9iX3NlcnZpY2UubWxKb2JTZXJ2aWNlLnRlbXBKb2JDbG9uaW5nT2JqZWN0cy5lbmQgPSBlbmQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIG90aGVyd2lzZSB1c2UgdGhlIHRlbXBKb2JDbG9uaW5nT2JqZWN0cwogICAgICAgICAgICBfam9iX3NlcnZpY2UubWxKb2JTZXJ2aWNlLnRlbXBKb2JDbG9uaW5nT2JqZWN0cy5qb2IgPSBqb2I7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFqb2IuY2FsZW5kYXJzKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX2NhbGVuZGFyX3NlcnZpY2UubWxDYWxlbmRhclNlcnZpY2UuZmV0Y2hDYWxlbmRhcnNCeUlkcyhqb2IuY2FsZW5kYXJzKSk7CgogICAgICAgIGNhc2UgODoKICAgICAgICAgIF9qb2Jfc2VydmljZS5tbEpvYlNlcnZpY2UudGVtcEpvYkNsb25pbmdPYmplY3RzLmNhbGVuZGFycyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgIGNhc2UgOToKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvam9icy9uZXdfam9iJzsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDEyOgogICAgICAgICAgX2NvbnRleHQucHJldiA9IDEyOwogICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICBfbWVzc2FnZWJhci5tbE1lc3NhZ2VCYXJTZXJ2aWNlLm5vdGlmeS5lcnJvcihfY29udGV4dC50MCk7CgogICAgICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkRGFuZ2VyKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tbC5qb2JzTGlzdC5jbG9uZUpvYkVycm9yTWVzc2FnZScsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDb3VsZCBub3QgY2xvbmUge2pvYklkfS4gSm9iIGNvdWxkIG5vdCBiZSBmb3VuZCcsCiAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgIGpvYklkOiBqb2JJZAogICAgICAgICAgICB9CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMTY6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDEyXV0pOwp9CgpmdW5jdGlvbiBjbG9zZUpvYnMoam9icykgewogIHZhciBmaW5pc2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZ1bmN0aW9uICgpIHt9OwogIHZhciBqb2JJZHMgPSBqb2JzLm1hcChmdW5jdGlvbiAoaikgewogICAgcmV0dXJuIGouaWQ7CiAgfSk7CgogIF9qb2Jfc2VydmljZS5tbEpvYlNlcnZpY2UuY2xvc2VKb2JzKGpvYklkcykudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgc2hvd1Jlc3VsdHMocmVzcCwgX3N0YXRlcy5KT0JfU1RBVEUuQ0xPU0VEKTsKICAgIGZpbmlzaCgpOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgX21lc3NhZ2ViYXIubWxNZXNzYWdlQmFyU2VydmljZS5ub3RpZnkuZXJyb3IoZXJyb3IpOwoKICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwuam9ic0xpc3QuY2xvc2VKb2JFcnJvck1lc3NhZ2UnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSm9icyBmYWlsZWQgdG8gY2xvc2UnCiAgICB9KSwgZXJyb3IpOwoKICAgIGZpbmlzaCgpOwogIH0pOwp9CgpmdW5jdGlvbiBkZWxldGVKb2JzKGpvYnMpIHsKICB2YXIgZmluaXNoID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmdW5jdGlvbiAoKSB7fTsKICB2YXIgam9iSWRzID0gam9icy5tYXAoZnVuY3Rpb24gKGopIHsKICAgIHJldHVybiBqLmlkOwogIH0pOwoKICBfam9iX3NlcnZpY2UubWxKb2JTZXJ2aWNlLmRlbGV0ZUpvYnMoam9iSWRzKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICBzaG93UmVzdWx0cyhyZXNwLCBfc3RhdGVzLkpPQl9TVEFURS5ERUxFVEVEKTsKICAgIGZpbmlzaCgpOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgX21lc3NhZ2ViYXIubWxNZXNzYWdlQmFyU2VydmljZS5ub3RpZnkuZXJyb3IoZXJyb3IpOwoKICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWwuam9ic0xpc3QuZGVsZXRlSm9iRXJyb3JNZXNzYWdlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0pvYnMgZmFpbGVkIHRvIGRlbGV0ZScKICAgIH0pLCBlcnJvcik7CgogICAgZmluaXNoKCk7CiAgfSk7Cn0KCmZ1bmN0aW9uIGZpbHRlckpvYnMoam9icywgY2xhdXNlcykgewogIGlmIChjbGF1c2VzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIGpvYnM7CiAgfSAvLyBrZWVwIGNvdW50IG9mIHRoZSBudW1iZXIgb2YgbWF0Y2hlcyB3ZSBtYWtlIGFzIHdlJ3JlIGxvb3Bpbmcgb3ZlciB0aGUgY2xhdXNlcwogIC8vIHdlIG9ubHkgd2FudCB0byByZXR1cm4gam9icyB3aGljaCBtYXRjaCBhbGwgY2xhdXNlcywgaS5lLiBlYWNoIHNlYXJjaCB0ZXJtIGlzIEFORGVkCgoKICB2YXIgbWF0Y2hlcyA9IGpvYnMucmVkdWNlKGZ1bmN0aW9uIChwLCBjKSB7CiAgICBwW2MuaWRdID0gewogICAgICBqb2I6IGMsCiAgICAgIGNvdW50OiAwCiAgICB9OwogICAgcmV0dXJuIHA7CiAgfSwge30pOwogIGNsYXVzZXMuZm9yRWFjaChmdW5jdGlvbiAoYykgewogICAgLy8gdGhlIHNlYXJjaCB0ZXJtIGNvdWxkIGJlIG5lZ2F0ZWQgd2l0aCBhIG1pbnVzLCBlLmcuIC1iYW5hbmFzCiAgICB2YXIgYm9vbCA9IGMubWF0Y2ggPT09ICdtdXN0JzsKICAgIHZhciBqcyA9IFtdOwoKICAgIGlmIChjLnR5cGUgPT09ICd0ZXJtJykgewogICAgICAvLyBmaWx0ZXIgdGVybSBiYXNlZCBjbGF1c2VzLCBlLmcuIGJhbmFuYXMKICAgICAgLy8gbWF0Y2ggb24gaWQsIGRlc2NyaXB0aW9uIGFuZCBtZW1vcnlfc3RhdHVzCiAgICAgIC8vIGlmIHRoZSB0ZXJtIGhhcyBiZWVuIG5lZ2F0ZWQsIEFORCB0aGUgbWF0Y2hlcwogICAgICBpZiAoYm9vbCA9PT0gdHJ1ZSkgewogICAgICAgIGpzID0gam9icy5maWx0ZXIoZnVuY3Rpb24gKGpvYikgewogICAgICAgICAgcmV0dXJuIHN0cmluZ01hdGNoKGpvYi5pZCwgYy52YWx1ZSkgPT09IGJvb2wgfHwgc3RyaW5nTWF0Y2goam9iLmRlc2NyaXB0aW9uLCBjLnZhbHVlKSA9PT0gYm9vbCB8fCBzdHJpbmdNYXRjaChqb2IubWVtb3J5X3N0YXR1cywgYy52YWx1ZSkgPT09IGJvb2w7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAganMgPSBqb2JzLmZpbHRlcihmdW5jdGlvbiAoam9iKSB7CiAgICAgICAgICByZXR1cm4gc3RyaW5nTWF0Y2goam9iLmlkLCBjLnZhbHVlKSA9PT0gYm9vbCAmJiBzdHJpbmdNYXRjaChqb2IuZGVzY3JpcHRpb24sIGMudmFsdWUpID09PSBib29sICYmIHN0cmluZ01hdGNoKGpvYi5tZW1vcnlfc3RhdHVzLCBjLnZhbHVlKSA9PT0gYm9vbDsKICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgLy8gZmlsdGVyIG90aGVyIGNsYXVzZXMsIGkuZS4gdGhlIHRvZ2dsZSBncm91cCBidXR0b25zCiAgICAgIGlmIChBcnJheS5pc0FycmF5KGMudmFsdWUpKSB7CiAgICAgICAgLy8gdGhlIGdyb3VwcyB2YWx1ZSBpcyBhbiBhcnJheSBvZiBncm91cCBpZHMKICAgICAgICBqcyA9IGpvYnMuZmlsdGVyKGZ1bmN0aW9uIChqb2IpIHsKICAgICAgICAgIHJldHVybiBqb2JQcm9wZXJ0eShqb2IsIGMuZmllbGQpLnNvbWUoZnVuY3Rpb24gKGcpIHsKICAgICAgICAgICAgcmV0dXJuIGMudmFsdWUuaW5kZXhPZihnKSA+PSAwOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAganMgPSBqb2JzLmZpbHRlcihmdW5jdGlvbiAoam9iKSB7CiAgICAgICAgICByZXR1cm4gam9iUHJvcGVydHkoam9iLCBjLmZpZWxkKSA9PT0gYy52YWx1ZTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIGpzLmZvckVhY2goZnVuY3Rpb24gKGopIHsKICAgICAgcmV0dXJuIG1hdGNoZXNbai5pZF0uY291bnQrKzsKICAgIH0pOwogIH0pOyAvLyBsb29wIHRocm91Z2ggdGhlIG1hdGNoZXMgYW5kIHJldHVybiBvbmx5IHRob3NlIGpvYnMgd2hpY2ggaGF2ZSBtYXRjaCBhbGwgdGhlIGNsYXVzZXMKCiAgdmFyIGZpbHRlcmVkSm9icyA9IFtdOwogICgwLCBfbG9kYXNoLmVhY2gpKG1hdGNoZXMsIGZ1bmN0aW9uIChtKSB7CiAgICBpZiAobS5jb3VudCA+PSBjbGF1c2VzLmxlbmd0aCkgewogICAgICBmaWx0ZXJlZEpvYnMucHVzaChtLmpvYik7CiAgICB9CiAgfSk7CiAgcmV0dXJuIGZpbHRlcmVkSm9iczsKfSAvLyBjaGVjayB0byBzZWUgaWYgYSBqb2IgaGFzIGJlZW4gc3RvcmVkIGluIG1sSm9iU2VydmljZS50ZW1wSm9iQ2xvbmluZ09iamVjdHMKLy8gaWYgaXQgaGFzLCByZXR1cm4gYW4gb2JqZWN0IHdpdGggdGhlIG1pbmltdW0gcHJvcGVydGllcyBuZWVkZWQgZm9yIHRoZQovLyBzdGFydCBkYXRhZmVlZCBtb2RhbC4KCgpmdW5jdGlvbiBjaGVja0ZvckF1dG9TdGFydERhdGFmZWVkKCkgewogIHZhciBqb2IgPSBfam9iX3NlcnZpY2UubWxKb2JTZXJ2aWNlLnRlbXBKb2JDbG9uaW5nT2JqZWN0cy5qb2I7CgogIGlmIChqb2IgIT09IHVuZGVmaW5lZCkgewogICAgX2pvYl9zZXJ2aWNlLm1sSm9iU2VydmljZS50ZW1wSm9iQ2xvbmluZ09iamVjdHMuam9iID0gdW5kZWZpbmVkOwogICAgdmFyIGhhc0RhdGFmZWVkID0gX3R5cGVvZihqb2IuZGF0YWZlZWRfY29uZmlnKSA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXMoam9iLmRhdGFmZWVkX2NvbmZpZykubGVuZ3RoID4gMDsKICAgIHZhciBkYXRhZmVlZElkID0gaGFzRGF0YWZlZWQgPyBqb2IuZGF0YWZlZWRfY29uZmlnLmRhdGFmZWVkX2lkIDogJyc7CiAgICByZXR1cm4gewogICAgICBpZDogam9iLmpvYl9pZCwKICAgICAgaGFzRGF0YWZlZWQ6IGhhc0RhdGFmZWVkLAogICAgICBsYXRlc3RUaW1lc3RhbXBTb3J0VmFsdWU6IDAsCiAgICAgIGRhdGFmZWVkSWQ6IGRhdGFmZWVkSWQKICAgIH07CiAgfQp9CgpmdW5jdGlvbiBzdHJpbmdNYXRjaChzdHIsIHN1YnN0cikgewogIHJldHVybiB0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiB0eXBlb2Ygc3Vic3RyID09PSAnc3RyaW5nJyAmJiBzdHIudG9Mb3dlckNhc2UoKS5tYXRjaChzdWJzdHIudG9Mb3dlckNhc2UoKSkgPT09IG51bGwgPT09IGZhbHNlOwp9CgpmdW5jdGlvbiBqb2JQcm9wZXJ0eShqb2IsIHByb3ApIHsKICB2YXIgcHJvcE1hcCA9IHsKICAgIGpvYl9zdGF0ZTogJ2pvYlN0YXRlJywKICAgIGRhdGFmZWVkX3N0YXRlOiAnZGF0YWZlZWRTdGF0ZScsCiAgICBncm91cHM6ICdncm91cHMnCiAgfTsKICByZXR1cm4gam9iW3Byb3BNYXBbcHJvcF1dOwp9CgpmdW5jdGlvbiBnZXRKb2JJZFVybChqb2JJZCkgewogIC8vIENyZWF0ZSB1cmwgZm9yIGZpbHRlcmluZyBieSBqb2IgaWQgZm9yIGtpYmFuYSBtYW5hZ2VtZW50IHRhYmxlCiAgdmFyIHNldHRpbmdzID0gewogICAgam9iSWQ6IGpvYklkCiAgfTsKCiAgdmFyIGVuY29kZWQgPSBfcmlzb25Ob2RlLmRlZmF1bHQuZW5jb2RlKHNldHRpbmdzKTsKCiAgdmFyIHVybCA9ICI/bWxNYW5hZ2VtZW50PSIuY29uY2F0KGVuY29kZWQpOwogIHJldHVybiAiIi5jb25jYXQoX2Nocm9tZS5kZWZhdWx0LmdldEJhc2VQYXRoKCksICIvYXBwL21sIy9qb2JzIikuY29uY2F0KHVybCk7Cn0KCmZ1bmN0aW9uIGdldFVybFZhcnModXJsKSB7CiAgdmFyIHZhcnMgPSB7fTsKICB1cmwucmVwbGFjZSgvWz8mXSsoW149Jl0rKT0oW14mXSopL2dpLCBmdW5jdGlvbiAoXywga2V5LCB2YWx1ZSkgewogICAgdmFyc1trZXldID0gdmFsdWU7CiAgfSk7CiAgcmV0dXJuIHZhcnM7Cn0KCmZ1bmN0aW9uIGdldFNlbGVjdGVkSm9iSWRGcm9tVXJsKHVybCkgewogIGlmICh0eXBlb2YgdXJsID09PSAnc3RyaW5nJyAmJiB1cmwuaW5jbHVkZXMoJ21sTWFuYWdlbWVudCcpICYmIHVybC5pbmNsdWRlcygnam9iSWQnKSkgewogICAgdmFyIHVybFBhcmFtcyA9IGdldFVybFZhcnModXJsKTsKCiAgICB2YXIgZGVjb2RlZEpzb24gPSBfcmlzb25Ob2RlLmRlZmF1bHQuZGVjb2RlKHVybFBhcmFtcy5tbE1hbmFnZW1lbnQpOwoKICAgIHJldHVybiBkZWNvZGVkSnNvbi5qb2JJZDsKICB9Cn0KCmZ1bmN0aW9uIGNsZWFyU2VsZWN0ZWRKb2JJZEZyb21VcmwodXJsKSB7CiAgaWYgKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnICYmIHVybC5pbmNsdWRlcygnbWxNYW5hZ2VtZW50JykgJiYgdXJsLmluY2x1ZGVzKCdqb2JJZCcpKSB7CiAgICB2YXIgdXJsUGFyYW1zID0gZ2V0VXJsVmFycyh1cmwpOwogICAgdmFyIGNsZWFyZWRQYXJhbXMgPSAibWwjL2pvYnM/X2c9Ii5jb25jYXQodXJsUGFyYW1zLl9nKTsKICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgZG9jdW1lbnQudGl0bGUsIGNsZWFyZWRQYXJhbXMpOwogIH0KfQ=="},null]}