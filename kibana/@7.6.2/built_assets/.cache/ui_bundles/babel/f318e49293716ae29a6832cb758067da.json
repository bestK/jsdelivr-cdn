{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/index_management/public/app/services/api.js","dependencies":[{"path":"x-pack/legacy/plugins/index_management/public/app/services/api.js","mtime":1585205044473},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmxvYWRJbmRpY2VzID0gbG9hZEluZGljZXM7CmV4cG9ydHMucmVsb2FkSW5kaWNlcyA9IHJlbG9hZEluZGljZXM7CmV4cG9ydHMuY2xvc2VJbmRpY2VzID0gY2xvc2VJbmRpY2VzOwpleHBvcnRzLmRlbGV0ZUluZGljZXMgPSBkZWxldGVJbmRpY2VzOwpleHBvcnRzLm9wZW5JbmRpY2VzID0gb3BlbkluZGljZXM7CmV4cG9ydHMucmVmcmVzaEluZGljZXMgPSByZWZyZXNoSW5kaWNlczsKZXhwb3J0cy5mbHVzaEluZGljZXMgPSBmbHVzaEluZGljZXM7CmV4cG9ydHMuZm9yY2VtZXJnZUluZGljZXMgPSBmb3JjZW1lcmdlSW5kaWNlczsKZXhwb3J0cy5jbGVhckNhY2hlSW5kaWNlcyA9IGNsZWFyQ2FjaGVJbmRpY2VzOwpleHBvcnRzLmZyZWV6ZUluZGljZXMgPSBmcmVlemVJbmRpY2VzOwpleHBvcnRzLnVuZnJlZXplSW5kaWNlcyA9IHVuZnJlZXplSW5kaWNlczsKZXhwb3J0cy5sb2FkSW5kZXhTZXR0aW5ncyA9IGxvYWRJbmRleFNldHRpbmdzOwpleHBvcnRzLnVwZGF0ZUluZGV4U2V0dGluZ3MgPSB1cGRhdGVJbmRleFNldHRpbmdzOwpleHBvcnRzLmxvYWRJbmRleFN0YXRzID0gbG9hZEluZGV4U3RhdHM7CmV4cG9ydHMubG9hZEluZGV4TWFwcGluZyA9IGxvYWRJbmRleE1hcHBpbmc7CmV4cG9ydHMubG9hZEluZGV4RGF0YSA9IGxvYWRJbmRleERhdGE7CmV4cG9ydHMubG9hZEluZGV4VGVtcGxhdGVzID0gbG9hZEluZGV4VGVtcGxhdGVzOwpleHBvcnRzLmRlbGV0ZVRlbXBsYXRlcyA9IGRlbGV0ZVRlbXBsYXRlczsKZXhwb3J0cy5sb2FkSW5kZXhUZW1wbGF0ZSA9IGxvYWRJbmRleFRlbXBsYXRlOwpleHBvcnRzLnNhdmVUZW1wbGF0ZSA9IHNhdmVUZW1wbGF0ZTsKZXhwb3J0cy51cGRhdGVUZW1wbGF0ZSA9IHVwZGF0ZVRlbXBsYXRlOwpleHBvcnRzLmdldEh0dHBDbGllbnQgPSBleHBvcnRzLnNldEh0dHBDbGllbnQgPSB2b2lkIDA7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMiKTsKCnZhciBfY29uc3RhbnRzMiA9IHJlcXVpcmUoIi4uL2NvbnN0YW50cyIpOwoKdmFyIF91aV9tZXRyaWMgPSByZXF1aXJlKCIuL3VpX21ldHJpYyIpOwoKdmFyIF91c2VfcmVxdWVzdCA9IHJlcXVpcmUoIi4vdXNlX3JlcXVlc3QiKTsKCnZhciBfaHR0cCA9IHJlcXVpcmUoIi4vaHR0cCIpOwoKdmFyIF9tYXBwaW5nc19lZGl0b3IgPSByZXF1aXJlKCIuLi9jb21wb25lbnRzL21hcHBpbmdzX2VkaXRvciIpOwovKgogKiBDb3B5cmlnaHQgRWxhc3RpY3NlYXJjaCBCLlYuIGFuZC9vciBsaWNlbnNlZCB0byBFbGFzdGljc2VhcmNoIEIuVi4gdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiBMaWNlbnNlZCB1bmRlciB0aGUgRWxhc3RpYyBMaWNlbnNlOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIEVsYXN0aWMgTGljZW5zZS4KICovCgoKdmFyIGh0dHBDbGllbnQ7Cgp2YXIgc2V0SHR0cENsaWVudCA9IGZ1bmN0aW9uIHNldEh0dHBDbGllbnQoY2xpZW50KSB7CiAgaHR0cENsaWVudCA9IGNsaWVudDsKfTsKCmV4cG9ydHMuc2V0SHR0cENsaWVudCA9IHNldEh0dHBDbGllbnQ7Cgp2YXIgZ2V0SHR0cENsaWVudCA9IGZ1bmN0aW9uIGdldEh0dHBDbGllbnQoKSB7CiAgcmV0dXJuIGh0dHBDbGllbnQ7Cn07CgpleHBvcnRzLmdldEh0dHBDbGllbnQgPSBnZXRIdHRwQ2xpZW50OwoKZnVuY3Rpb24gbG9hZEluZGljZXMoKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbG9hZEluZGljZXMkKF9jb250ZXh0KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKF9odHRwLmh0dHBTZXJ2aWNlLmh0dHBDbGllbnQuZ2V0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvaW5kaWNlcyIpKSk7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmRhdGEgPyByZXNwb25zZS5kYXRhIDogcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gcmVsb2FkSW5kaWNlcyhpbmRleE5hbWVzKSB7CiAgdmFyIGJvZHksIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcmVsb2FkSW5kaWNlcyQoX2NvbnRleHQyKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICBpbmRleE5hbWVzOiBpbmRleE5hbWVzCiAgICAgICAgICB9KTsKICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX2h0dHAuaHR0cFNlcnZpY2UuaHR0cENsaWVudC5wb3N0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvaW5kaWNlcy9yZWxvYWQiKSwgewogICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuZGF0YSA/IHJlc3BvbnNlLmRhdGEgOiByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gY2xvc2VJbmRpY2VzKGluZGljZXMpIHsKICB2YXIgYm9keSwgcmVzcG9uc2UsIGV2ZW50TmFtZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGNsb3NlSW5kaWNlcyQoX2NvbnRleHQzKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICBpbmRpY2VzOiBpbmRpY2VzCiAgICAgICAgICB9KTsKICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX2h0dHAuaHR0cFNlcnZpY2UuaHR0cENsaWVudC5wb3N0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvaW5kaWNlcy9jbG9zZSIpLCB7CiAgICAgICAgICAgIGJvZHk6IGJvZHkKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsgLy8gT25seSB0cmFjayBzdWNjZXNzZnVsIHJlcXVlc3RzLgoKICAgICAgICAgIGV2ZW50TmFtZSA9IGluZGljZXMubGVuZ3RoID4gMSA/IF9jb25zdGFudHMuVUlNX0lOREVYX0NMT1NFX01BTlkgOiBfY29uc3RhbnRzLlVJTV9JTkRFWF9DTE9TRTsKCiAgICAgICAgICBfdWlfbWV0cmljLnVpTWV0cmljU2VydmljZS50cmFja01ldHJpYygnY291bnQnLCBldmVudE5hbWUpOwoKICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gZGVsZXRlSW5kaWNlcyhpbmRpY2VzKSB7CiAgdmFyIGJvZHksIHJlc3BvbnNlLCBldmVudE5hbWU7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBkZWxldGVJbmRpY2VzJChfY29udGV4dDQpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgIGluZGljZXM6IGluZGljZXMKICAgICAgICAgIH0pOwogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfaHR0cC5odHRwU2VydmljZS5odHRwQ2xpZW50LnBvc3QoIiIuY29uY2F0KF9jb25zdGFudHMuQVBJX0JBU0VfUEFUSCwgIi9pbmRpY2VzL2RlbGV0ZSIpLCB7CiAgICAgICAgICAgIGJvZHk6IGJvZHkKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDQuc2VudDsgLy8gT25seSB0cmFjayBzdWNjZXNzZnVsIHJlcXVlc3RzLgoKICAgICAgICAgIGV2ZW50TmFtZSA9IGluZGljZXMubGVuZ3RoID4gMSA/IF9jb25zdGFudHMuVUlNX0lOREVYX0RFTEVURV9NQU5ZIDogX2NvbnN0YW50cy5VSU1fSU5ERVhfREVMRVRFOwoKICAgICAgICAgIF91aV9tZXRyaWMudWlNZXRyaWNTZXJ2aWNlLnRyYWNrTWV0cmljKCdjb3VudCcsIGV2ZW50TmFtZSk7CgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBvcGVuSW5kaWNlcyhpbmRpY2VzKSB7CiAgdmFyIGJvZHksIHJlc3BvbnNlLCBldmVudE5hbWU7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBvcGVuSW5kaWNlcyQoX2NvbnRleHQ1KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICBpbmRpY2VzOiBpbmRpY2VzCiAgICAgICAgICB9KTsKICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX2h0dHAuaHR0cFNlcnZpY2UuaHR0cENsaWVudC5wb3N0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvaW5kaWNlcy9vcGVuIiksIHsKICAgICAgICAgICAgYm9keTogYm9keQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NS5zZW50OyAvLyBPbmx5IHRyYWNrIHN1Y2Nlc3NmdWwgcmVxdWVzdHMuCgogICAgICAgICAgZXZlbnROYW1lID0gaW5kaWNlcy5sZW5ndGggPiAxID8gX2NvbnN0YW50cy5VSU1fSU5ERVhfT1BFTl9NQU5ZIDogX2NvbnN0YW50cy5VSU1fSU5ERVhfT1BFTjsKCiAgICAgICAgICBfdWlfbWV0cmljLnVpTWV0cmljU2VydmljZS50cmFja01ldHJpYygnY291bnQnLCBldmVudE5hbWUpOwoKICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gcmVmcmVzaEluZGljZXMoaW5kaWNlcykgewogIHZhciBib2R5LCByZXNwb25zZSwgZXZlbnROYW1lOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcmVmcmVzaEluZGljZXMkKF9jb250ZXh0NikgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgaW5kaWNlczogaW5kaWNlcwogICAgICAgICAgfSk7CiAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKF9odHRwLmh0dHBTZXJ2aWNlLmh0dHBDbGllbnQucG9zdCgiIi5jb25jYXQoX2NvbnN0YW50cy5BUElfQkFTRV9QQVRILCAiL2luZGljZXMvcmVmcmVzaCIpLCB7CiAgICAgICAgICAgIGJvZHk6IGJvZHkKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDYuc2VudDsgLy8gT25seSB0cmFjayBzdWNjZXNzZnVsIHJlcXVlc3RzLgoKICAgICAgICAgIGV2ZW50TmFtZSA9IGluZGljZXMubGVuZ3RoID4gMSA/IF9jb25zdGFudHMuVUlNX0lOREVYX1JFRlJFU0hfTUFOWSA6IF9jb25zdGFudHMuVUlNX0lOREVYX1JFRlJFU0g7CgogICAgICAgICAgX3VpX21ldHJpYy51aU1ldHJpY1NlcnZpY2UudHJhY2tNZXRyaWMoJ2NvdW50JywgZXZlbnROYW1lKTsKCiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIGZsdXNoSW5kaWNlcyhpbmRpY2VzKSB7CiAgdmFyIGJvZHksIHJlc3BvbnNlLCBldmVudE5hbWU7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBmbHVzaEluZGljZXMkKF9jb250ZXh0NykgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgaW5kaWNlczogaW5kaWNlcwogICAgICAgICAgfSk7CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKF9odHRwLmh0dHBTZXJ2aWNlLmh0dHBDbGllbnQucG9zdCgiIi5jb25jYXQoX2NvbnN0YW50cy5BUElfQkFTRV9QQVRILCAiL2luZGljZXMvZmx1c2giKSwgewogICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ3LnNlbnQ7IC8vIE9ubHkgdHJhY2sgc3VjY2Vzc2Z1bCByZXF1ZXN0cy4KCiAgICAgICAgICBldmVudE5hbWUgPSBpbmRpY2VzLmxlbmd0aCA+IDEgPyBfY29uc3RhbnRzLlVJTV9JTkRFWF9GTFVTSF9NQU5ZIDogX2NvbnN0YW50cy5VSU1fSU5ERVhfRkxVU0g7CgogICAgICAgICAgX3VpX21ldHJpYy51aU1ldHJpY1NlcnZpY2UudHJhY2tNZXRyaWMoJ2NvdW50JywgZXZlbnROYW1lKTsKCiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIGZvcmNlbWVyZ2VJbmRpY2VzKGluZGljZXMsIG1heE51bVNlZ21lbnRzKSB7CiAgdmFyIGJvZHksIHJlc3BvbnNlLCBldmVudE5hbWU7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBmb3JjZW1lcmdlSW5kaWNlcyQoX2NvbnRleHQ4KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICBpbmRpY2VzOiBpbmRpY2VzLAogICAgICAgICAgICBtYXhOdW1TZWdtZW50czogbWF4TnVtU2VnbWVudHMKICAgICAgICAgIH0pOwogICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfaHR0cC5odHRwU2VydmljZS5odHRwQ2xpZW50LnBvc3QoIiIuY29uY2F0KF9jb25zdGFudHMuQVBJX0JBU0VfUEFUSCwgIi9pbmRpY2VzL2ZvcmNlbWVyZ2UiKSwgewogICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ4LnNlbnQ7IC8vIE9ubHkgdHJhY2sgc3VjY2Vzc2Z1bCByZXF1ZXN0cy4KCiAgICAgICAgICBldmVudE5hbWUgPSBpbmRpY2VzLmxlbmd0aCA+IDEgPyBfY29uc3RhbnRzLlVJTV9JTkRFWF9GT1JDRV9NRVJHRV9NQU5ZIDogX2NvbnN0YW50cy5VSU1fSU5ERVhfRk9SQ0VfTUVSR0U7CgogICAgICAgICAgX3VpX21ldHJpYy51aU1ldHJpY1NlcnZpY2UudHJhY2tNZXRyaWMoJ2NvdW50JywgZXZlbnROYW1lKTsKCiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIGNsZWFyQ2FjaGVJbmRpY2VzKGluZGljZXMpIHsKICB2YXIgYm9keSwgcmVzcG9uc2UsIGV2ZW50TmFtZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGNsZWFyQ2FjaGVJbmRpY2VzJChfY29udGV4dDkpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgIGluZGljZXM6IGluZGljZXMKICAgICAgICAgIH0pOwogICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfaHR0cC5odHRwU2VydmljZS5odHRwQ2xpZW50LnBvc3QoIiIuY29uY2F0KF9jb25zdGFudHMuQVBJX0JBU0VfUEFUSCwgIi9pbmRpY2VzL2NsZWFyX2NhY2hlIiksIHsKICAgICAgICAgICAgYm9keTogYm9keQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0OS5zZW50OyAvLyBPbmx5IHRyYWNrIHN1Y2Nlc3NmdWwgcmVxdWVzdHMuCgogICAgICAgICAgZXZlbnROYW1lID0gaW5kaWNlcy5sZW5ndGggPiAxID8gX2NvbnN0YW50cy5VSU1fSU5ERVhfQ0xFQVJfQ0FDSEVfTUFOWSA6IF9jb25zdGFudHMuVUlNX0lOREVYX0NMRUFSX0NBQ0hFOwoKICAgICAgICAgIF91aV9tZXRyaWMudWlNZXRyaWNTZXJ2aWNlLnRyYWNrTWV0cmljKCdjb3VudCcsIGV2ZW50TmFtZSk7CgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBmcmVlemVJbmRpY2VzKGluZGljZXMpIHsKICB2YXIgYm9keSwgcmVzcG9uc2UsIGV2ZW50TmFtZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGZyZWV6ZUluZGljZXMkKF9jb250ZXh0MTApIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgaW5kaWNlczogaW5kaWNlcwogICAgICAgICAgfSk7CiAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfaHR0cC5odHRwU2VydmljZS5odHRwQ2xpZW50LnBvc3QoIiIuY29uY2F0KF9jb25zdGFudHMuQVBJX0JBU0VfUEFUSCwgIi9pbmRpY2VzL2ZyZWV6ZSIpLCB7CiAgICAgICAgICAgIGJvZHk6IGJvZHkKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDEwLnNlbnQ7IC8vIE9ubHkgdHJhY2sgc3VjY2Vzc2Z1bCByZXF1ZXN0cy4KCiAgICAgICAgICBldmVudE5hbWUgPSBpbmRpY2VzLmxlbmd0aCA+IDEgPyBfY29uc3RhbnRzLlVJTV9JTkRFWF9GUkVFWkVfTUFOWSA6IF9jb25zdGFudHMuVUlNX0lOREVYX0ZSRUVaRTsKCiAgICAgICAgICBfdWlfbWV0cmljLnVpTWV0cmljU2VydmljZS50cmFja01ldHJpYygnY291bnQnLCBldmVudE5hbWUpOwoKICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9CgpmdW5jdGlvbiB1bmZyZWV6ZUluZGljZXMoaW5kaWNlcykgewogIHZhciBib2R5LCByZXNwb25zZSwgZXZlbnROYW1lOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gdW5mcmVlemVJbmRpY2VzJChfY29udGV4dDExKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgIGluZGljZXM6IGluZGljZXMKICAgICAgICAgIH0pOwogICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX2h0dHAuaHR0cFNlcnZpY2UuaHR0cENsaWVudC5wb3N0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvaW5kaWNlcy91bmZyZWV6ZSIpLCB7CiAgICAgICAgICAgIGJvZHk6IGJvZHkKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDExLnNlbnQ7IC8vIE9ubHkgdHJhY2sgc3VjY2Vzc2Z1bCByZXF1ZXN0cy4KCiAgICAgICAgICBldmVudE5hbWUgPSBpbmRpY2VzLmxlbmd0aCA+IDEgPyBfY29uc3RhbnRzLlVJTV9JTkRFWF9VTkZSRUVaRV9NQU5ZIDogX2NvbnN0YW50cy5VSU1fSU5ERVhfVU5GUkVFWkU7CgogICAgICAgICAgX3VpX21ldHJpYy51aU1ldHJpY1NlcnZpY2UudHJhY2tNZXRyaWMoJ2NvdW50JywgZXZlbnROYW1lKTsKCiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gbG9hZEluZGV4U2V0dGluZ3MoaW5kZXhOYW1lKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbG9hZEluZGV4U2V0dGluZ3MkKF9jb250ZXh0MTIpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX2h0dHAuaHR0cFNlcnZpY2UuaHR0cENsaWVudC5nZXQoIiIuY29uY2F0KF9jb25zdGFudHMuQVBJX0JBU0VfUEFUSCwgIi9zZXR0aW5ncy8iKS5jb25jYXQoaW5kZXhOYW1lKSkpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9CgpmdW5jdGlvbiB1cGRhdGVJbmRleFNldHRpbmdzKGluZGV4TmFtZSwgYm9keSkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHVwZGF0ZUluZGV4U2V0dGluZ3MkKF9jb250ZXh0MTMpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX2h0dHAuaHR0cFNlcnZpY2UuaHR0cENsaWVudC5wdXQoIiIuY29uY2F0KF9jb25zdGFudHMuQVBJX0JBU0VfUEFUSCwgIi9zZXR0aW5ncy8iKS5jb25jYXQoaW5kZXhOYW1lKSwgewogICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTMuc2VudDsgLy8gT25seSB0cmFjayBzdWNjZXNzZnVsIHJlcXVlc3RzLgoKICAgICAgICAgIF91aV9tZXRyaWMudWlNZXRyaWNTZXJ2aWNlLnRyYWNrTWV0cmljKCdjb3VudCcsIF9jb25zdGFudHMuVUlNX1VQREFURV9TRVRUSU5HUyk7CgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIGxvYWRJbmRleFN0YXRzKGluZGV4TmFtZSkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGxvYWRJbmRleFN0YXRzJChfY29udGV4dDE0KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKF9odHRwLmh0dHBTZXJ2aWNlLmh0dHBDbGllbnQuZ2V0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvc3RhdHMvIikuY29uY2F0KGluZGV4TmFtZSkpKTsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDE0LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgY2FzZSA0OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gbG9hZEluZGV4TWFwcGluZyhpbmRleE5hbWUpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBsb2FkSW5kZXhNYXBwaW5nJChfY29udGV4dDE1KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKF9odHRwLmh0dHBTZXJ2aWNlLmh0dHBDbGllbnQuZ2V0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvbWFwcGluZy8iKS5jb25jYXQoaW5kZXhOYW1lKSkpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTUuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBsb2FkSW5kZXhEYXRhKHR5cGUsIGluZGV4TmFtZSkgewogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbG9hZEluZGV4RGF0YSQoX2NvbnRleHQxNikgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDE2LnByZXYgPSBfY29udGV4dDE2Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDE2LnQwID0gdHlwZTsKICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IF9jb250ZXh0MTYudDAgPT09IF9jb25zdGFudHMyLlRBQl9NQVBQSU5HID8gMyA6IF9jb250ZXh0MTYudDAgPT09IF9jb25zdGFudHMyLlRBQl9TRVRUSU5HUyA/IDQgOiBfY29udGV4dDE2LnQwID09PSBfY29uc3RhbnRzMi5UQUJfU1RBVFMgPyA1IDogNjsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5hYnJ1cHQoInJldHVybiIsIGxvYWRJbmRleE1hcHBpbmcoaW5kZXhOYW1lKSk7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIiwgbG9hZEluZGV4U2V0dGluZ3MoaW5kZXhOYW1lKSk7CgogICAgICAgIGNhc2UgNToKICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIiwgbG9hZEluZGV4U3RhdHMoaW5kZXhOYW1lKSk7CgogICAgICAgIGNhc2UgNjoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIGxvYWRJbmRleFRlbXBsYXRlcygpIHsKICByZXR1cm4gKDAsIF91c2VfcmVxdWVzdC51c2VSZXF1ZXN0KSh7CiAgICBwYXRoOiAiIi5jb25jYXQoX2NvbnN0YW50cy5BUElfQkFTRV9QQVRILCAiL3RlbXBsYXRlcyIpLAogICAgbWV0aG9kOiAnZ2V0JwogIH0pOwp9CgpmdW5jdGlvbiBkZWxldGVUZW1wbGF0ZXMobmFtZXMpIHsKICB2YXIgcmVzdWx0LCB1aW1BY3Rpb25UeXBlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZGVsZXRlVGVtcGxhdGVzJChfY29udGV4dDE3KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTcucHJldiA9IF9jb250ZXh0MTcubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHJlc3VsdCA9ICgwLCBfdXNlX3JlcXVlc3Quc2VuZFJlcXVlc3QpKHsKICAgICAgICAgICAgcGF0aDogIiIuY29uY2F0KF9jb25zdGFudHMuQVBJX0JBU0VfUEFUSCwgIi90ZW1wbGF0ZXMvIikuY29uY2F0KG5hbWVzLm1hcChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQobmFtZSk7CiAgICAgICAgICAgIH0pLmpvaW4oJywnKSksCiAgICAgICAgICAgIG1ldGhvZDogJ2RlbGV0ZScKICAgICAgICAgIH0pOwogICAgICAgICAgdWltQWN0aW9uVHlwZSA9IG5hbWVzLmxlbmd0aCA+IDEgPyBfY29uc3RhbnRzLlVJTV9URU1QTEFURV9ERUxFVEVfTUFOWSA6IF9jb25zdGFudHMuVUlNX1RFTVBMQVRFX0RFTEVURTsKCiAgICAgICAgICBfdWlfbWV0cmljLnVpTWV0cmljU2VydmljZS50cmFja01ldHJpYygnY291bnQnLCB1aW1BY3Rpb25UeXBlKTsKCiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5hYnJ1cHQoInJldHVybiIsIHJlc3VsdCk7CgogICAgICAgIGNhc2UgNDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIGxvYWRJbmRleFRlbXBsYXRlKG5hbWUpIHsKICByZXR1cm4gKDAsIF91c2VfcmVxdWVzdC51c2VSZXF1ZXN0KSh7CiAgICBwYXRoOiAiIi5jb25jYXQoX2NvbnN0YW50cy5BUElfQkFTRV9QQVRILCAiL3RlbXBsYXRlcy8iKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpKSwKICAgIG1ldGhvZDogJ2dldCcKICB9KTsKfQoKZnVuY3Rpb24gc2F2ZVRlbXBsYXRlKHRlbXBsYXRlLCBpc0Nsb25lKSB7CiAgdmFyIGluY2x1ZGVUeXBlTmFtZSwgcmVzdWx0LCB1aW1BY3Rpb25UeXBlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc2F2ZVRlbXBsYXRlJChfY29udGV4dDE4KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTgucHJldiA9IF9jb250ZXh0MTgubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGluY2x1ZGVUeXBlTmFtZSA9ICgwLCBfbWFwcGluZ3NfZWRpdG9yLmRvTWFwcGluZ3NIYXZlVHlwZSkodGVtcGxhdGUubWFwcGluZ3MpOwogICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoKDAsIF91c2VfcmVxdWVzdC5zZW5kUmVxdWVzdCkoewogICAgICAgICAgICBwYXRoOiAiIi5jb25jYXQoX2NvbnN0YW50cy5BUElfQkFTRV9QQVRILCAiL3RlbXBsYXRlcyIpLAogICAgICAgICAgICBtZXRob2Q6ICdwdXQnLAogICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0ZW1wbGF0ZSksCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgaW5jbHVkZV90eXBlX25hbWU6IGluY2x1ZGVUeXBlTmFtZQogICAgICAgICAgICB9CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0MTguc2VudDsKICAgICAgICAgIHVpbUFjdGlvblR5cGUgPSBpc0Nsb25lID8gX2NvbnN0YW50cy5VSU1fVEVNUExBVEVfQ0xPTkUgOiBfY29uc3RhbnRzLlVJTV9URU1QTEFURV9DUkVBVEU7CgogICAgICAgICAgX3VpX21ldHJpYy51aU1ldHJpY1NlcnZpY2UudHJhY2tNZXRyaWMoJ2NvdW50JywgdWltQWN0aW9uVHlwZSk7CgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KCJyZXR1cm4iLCByZXN1bHQpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9CgpmdW5jdGlvbiB1cGRhdGVUZW1wbGF0ZSh0ZW1wbGF0ZSkgewogIHZhciBpbmNsdWRlVHlwZU5hbWUsIG5hbWUsIHJlc3VsdDsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHVwZGF0ZVRlbXBsYXRlJChfY29udGV4dDE5KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTkucHJldiA9IF9jb250ZXh0MTkubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGluY2x1ZGVUeXBlTmFtZSA9ICgwLCBfbWFwcGluZ3NfZWRpdG9yLmRvTWFwcGluZ3NIYXZlVHlwZSkodGVtcGxhdGUubWFwcGluZ3MpOwogICAgICAgICAgbmFtZSA9IHRlbXBsYXRlLm5hbWU7CiAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSA0OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCgoMCwgX3VzZV9yZXF1ZXN0LnNlbmRSZXF1ZXN0KSh7CiAgICAgICAgICAgIHBhdGg6ICIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvdGVtcGxhdGVzLyIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQobmFtZSkpLAogICAgICAgICAgICBtZXRob2Q6ICdwdXQnLAogICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0ZW1wbGF0ZSksCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgaW5jbHVkZV90eXBlX25hbWU6IGluY2x1ZGVUeXBlTmFtZQogICAgICAgICAgICB9CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0MTkuc2VudDsKCiAgICAgICAgICBfdWlfbWV0cmljLnVpTWV0cmljU2VydmljZS50cmFja01ldHJpYygnY291bnQnLCBfY29uc3RhbnRzLlVJTV9URU1QTEFURV9VUERBVEUpOwoKICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOS5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfQ=="},null]}