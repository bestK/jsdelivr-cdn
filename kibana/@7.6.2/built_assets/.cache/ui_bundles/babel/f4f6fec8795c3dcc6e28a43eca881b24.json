{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/timelion/public/components/timelion_expression_input_helpers.js","dependencies":[{"path":"src/legacy/core_plugins/timelion/public/components/timelion_expression_input_helpers.js","mtime":1585205040135},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnN1Z2dlc3QgPSBzdWdnZXN0OwpleHBvcnRzLmdldFN1Z2dlc3Rpb24gPSBnZXRTdWdnZXN0aW9uOwpleHBvcnRzLlNVR0dFU1RJT05fVFlQRSA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX3BlZ2pzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJwZWdqcyIpKTsKCnZhciBtb25hY29FZGl0b3IgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJtb25hY28tZWRpdG9yL2VzbS92cy9lZGl0b3IvZWRpdG9yLmFwaSIpKTsKCnZhciBfY2hhaW4gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJhdy1sb2FkZXIhLi4vY2hhaW4ucGVnIikpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KLyoKICogTGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yCiAqIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoCiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0CiAqIG93bmVyc2hpcC4gRWxhc3RpY3NlYXJjaCBCLlYuIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIKICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkKICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICovCi8vIEB0cy1pZ25vcmUKCgp2YXIgUGFyc2VyID0gX3BlZ2pzLmRlZmF1bHQuZ2VuZXJhdGUoX2NoYWluLmRlZmF1bHQpOwoKdmFyIFNVR0dFU1RJT05fVFlQRTsKZXhwb3J0cy5TVUdHRVNUSU9OX1RZUEUgPSBTVUdHRVNUSU9OX1RZUEU7CgooZnVuY3Rpb24gKFNVR0dFU1RJT05fVFlQRSkgewogIFNVR0dFU1RJT05fVFlQRVsiQVJHVU1FTlRTIl0gPSAiYXJndW1lbnRzIjsKICBTVUdHRVNUSU9OX1RZUEVbIkFSR1VNRU5UX1ZBTFVFIl0gPSAiYXJndW1lbnRfdmFsdWUiOwogIFNVR0dFU1RJT05fVFlQRVsiRlVOQ1RJT05TIl0gPSAiZnVuY3Rpb25zIjsKfSkoU1VHR0VTVElPTl9UWVBFIHx8IChleHBvcnRzLlNVR0dFU1RJT05fVFlQRSA9IFNVR0dFU1RJT05fVFlQRSA9IHt9KSk7CgpmdW5jdGlvbiBpbkxvY2F0aW9uKGN1cnNvclBvc2l0aW9uLCBsb2NhdGlvbikgewogIHJldHVybiBjdXJzb3JQb3NpdGlvbiA+PSBsb2NhdGlvbi5taW4gJiYgY3Vyc29yUG9zaXRpb24gPD0gbG9jYXRpb24ubWF4Owp9CgpmdW5jdGlvbiBnZXRBcmd1bWVudHNIZWxwKGZ1bmN0aW9uSGVscCkgewogIHZhciBmdW5jdGlvbkFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdOwoKICBpZiAoIWZ1bmN0aW9uSGVscCkgewogICAgcmV0dXJuIFtdOwogIH0gLy8gRG8gbm90IHByb3ZpZGUgJ2lucHV0U2VyaWVzJyBhcyBhcmd1bWVudCBzdWdnZXN0aW9uIGZvciBjaGFpbmFibGUgZnVuY3Rpb25zCgoKICB2YXIgYXJnc0hlbHAgPSBmdW5jdGlvbkhlbHAuY2hhaW5hYmxlID8gZnVuY3Rpb25IZWxwLmFyZ3Muc2xpY2UoMSkgOiBmdW5jdGlvbkhlbHAuYXJncy5zbGljZSgwKTsgLy8gaWdub3JlIGFyZ3VtZW50cyB0aGF0IGFyZSBhbHJlYWR5IHByb3ZpZGVkIGluIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCgogIHZhciBmdW5jdGlvbkFyZ05hbWVzID0gZnVuY3Rpb25BcmdzLm1hcChmdW5jdGlvbiAoYXJnKSB7CiAgICByZXR1cm4gYXJnLm5hbWU7CiAgfSk7CiAgcmV0dXJuIGFyZ3NIZWxwLmZpbHRlcihmdW5jdGlvbiAoYXJnKSB7CiAgICByZXR1cm4gIWZ1bmN0aW9uQXJnTmFtZXMuaW5jbHVkZXMoYXJnLm5hbWUpOwogIH0pOwp9CgpmdW5jdGlvbiBleHRyYWN0U3VnZ2VzdGlvbnNGcm9tUGFyc2VkUmVzdWx0KHJlc3VsdCwgY3Vyc29yUG9zaXRpb24sIGZ1bmN0aW9uTGlzdCwgYXJnVmFsdWVTdWdnZXN0aW9ucykgewogIHZhciBhY3RpdmVGdW5jLCBmdW5jdGlvbkhlbHAsIG9wZW5QYXJlbiwgYWN0aXZlQXJnLCBmdW5jdGlvbk5hbWUsIGZ1bmN0aW9uQXJncywgYXJnTmFtZSwgcGFydGlhbElucHV0LCB2YWx1ZVN1Z2dlc3Rpb25zLCBfcmVmMywgc3RhdGljU3VnZ2VzdGlvbnMsIGFyZ3NIZWxwLCBhcmd1bWVudFN1Z2dlc3Rpb25zOwoKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGV4dHJhY3RTdWdnZXN0aW9uc0Zyb21QYXJzZWRSZXN1bHQkKF9jb250ZXh0KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgYWN0aXZlRnVuYyA9IHJlc3VsdC5mdW5jdGlvbnMuZmluZChmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBfcmVmLmxvY2F0aW9uOwogICAgICAgICAgICByZXR1cm4gaW5Mb2NhdGlvbihjdXJzb3JQb3NpdGlvbiwgbG9jYXRpb24pOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKGFjdGl2ZUZ1bmMpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBmdW5jdGlvbkhlbHAgPSBmdW5jdGlvbkxpc3QuZmluZChmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICAgICAgdmFyIG5hbWUgPSBfcmVmMi5uYW1lOwogICAgICAgICAgICByZXR1cm4gbmFtZSA9PT0gYWN0aXZlRnVuYy5mdW5jdGlvbjsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChmdW5jdGlvbkhlbHApIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDY6CiAgICAgICAgICAvLyByZXR1cm4gZnVuY3Rpb24gc3VnZ2VzdGlvbiB3aGVuIGN1cnNvciBpcyBvdXRzaWRlIG9mIHBhcmVudGhlc2VzCiAgICAgICAgICAvLyBsb2NhdGlvbiByYW5nZSBpbmNsdWRlcyAnLicsIGZ1bmN0aW9uIG5hbWUsIGFuZCAnKCcuCiAgICAgICAgICBvcGVuUGFyZW4gPSBhY3RpdmVGdW5jLmxvY2F0aW9uLm1pbiArIGFjdGl2ZUZ1bmMuZnVuY3Rpb24ubGVuZ3RoICsgMjsKCiAgICAgICAgICBpZiAoIShjdXJzb3JQb3NpdGlvbiA8IG9wZW5QYXJlbikpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgbGlzdDogW2Z1bmN0aW9uSGVscF0sCiAgICAgICAgICAgIHR5cGU6IFNVR0dFU1RJT05fVFlQRS5GVU5DVElPTlMKICAgICAgICAgIH0pOwoKICAgICAgICBjYXNlIDk6CiAgICAgICAgICAvLyByZXR1cm4gYXJndW1lbnQgdmFsdWUgc3VnZ2VzdGlvbnMgd2hlbiBjdXJzb3IgaXMgaW5zaWRlIGFyZ3VtZW50IHZhbHVlCiAgICAgICAgICBhY3RpdmVBcmcgPSBhY3RpdmVGdW5jLmFyZ3VtZW50cy5maW5kKGZ1bmN0aW9uIChhcmd1bWVudCkgewogICAgICAgICAgICByZXR1cm4gaW5Mb2NhdGlvbihjdXJzb3JQb3NpdGlvbiwgYXJndW1lbnQubG9jYXRpb24pOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKCEoYWN0aXZlQXJnICYmIGFjdGl2ZUFyZy50eXBlID09PSAnbmFtZWRBcmcnICYmIGluTG9jYXRpb24oY3Vyc29yUG9zaXRpb24sIGFjdGl2ZUFyZy52YWx1ZS5sb2NhdGlvbikpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb25OYW1lID0gYWN0aXZlRnVuYy5mdW5jdGlvbiwgZnVuY3Rpb25BcmdzID0gYWN0aXZlRnVuYy5hcmd1bWVudHM7CiAgICAgICAgICBhcmdOYW1lID0gYWN0aXZlQXJnLm5hbWUsIHBhcnRpYWxJbnB1dCA9IGFjdGl2ZUFyZy52YWx1ZS50ZXh0OwoKICAgICAgICAgIGlmICghYXJnVmFsdWVTdWdnZXN0aW9ucy5oYXNEeW5hbWljU3VnZ2VzdGlvbnNGb3JBcmd1bWVudChmdW5jdGlvbk5hbWUsIGFyZ05hbWUpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChhcmdWYWx1ZVN1Z2dlc3Rpb25zLmdldER5bmFtaWNTdWdnZXN0aW9uc0ZvckFyZ3VtZW50KGZ1bmN0aW9uTmFtZSwgYXJnTmFtZSwgZnVuY3Rpb25BcmdzLCBwYXJ0aWFsSW5wdXQpKTsKCiAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIHZhbHVlU3VnZ2VzdGlvbnMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTk6CiAgICAgICAgICBfcmVmMyA9IGZ1bmN0aW9uSGVscC5hcmdzLmZpbmQoZnVuY3Rpb24gKGFyZykgewogICAgICAgICAgICByZXR1cm4gYXJnLm5hbWUgPT09IGFjdGl2ZUFyZy5uYW1lOwogICAgICAgICAgfSkgfHwge30sIHN0YXRpY1N1Z2dlc3Rpb25zID0gX3JlZjMuc3VnZ2VzdGlvbnM7CiAgICAgICAgICB2YWx1ZVN1Z2dlc3Rpb25zID0gYXJnVmFsdWVTdWdnZXN0aW9ucy5nZXRTdGF0aWNTdWdnZXN0aW9uc0ZvcklucHV0KHBhcnRpYWxJbnB1dCwgc3RhdGljU3VnZ2VzdGlvbnMpOwoKICAgICAgICBjYXNlIDIxOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICBsaXN0OiB2YWx1ZVN1Z2dlc3Rpb25zLAogICAgICAgICAgICB0eXBlOiBTVUdHRVNUSU9OX1RZUEUuQVJHVU1FTlRfVkFMVUUKICAgICAgICAgIH0pOwoKICAgICAgICBjYXNlIDIyOgogICAgICAgICAgLy8gcmV0dXJuIGFyZ3VtZW50IHN1Z2dlc3Rpb25zCiAgICAgICAgICBhcmdzSGVscCA9IGdldEFyZ3VtZW50c0hlbHAoZnVuY3Rpb25IZWxwLCBhY3RpdmVGdW5jLmFyZ3VtZW50cyk7CiAgICAgICAgICBhcmd1bWVudFN1Z2dlc3Rpb25zID0gYXJnc0hlbHAuZmlsdGVyKGZ1bmN0aW9uIChhcmcpIHsKICAgICAgICAgICAgaWYgKCgwLCBfbG9kYXNoLmdldCkoYWN0aXZlQXJnLCAndHlwZScpID09PSAnbmFtZWRBcmcnKSB7CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBfbG9kYXNoLnN0YXJ0c1dpdGgpKGFyZy5uYW1lLCBhY3RpdmVBcmcubmFtZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aXZlQXJnKSB7CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBfbG9kYXNoLnN0YXJ0c1dpdGgpKGFyZy5uYW1lLCBhY3RpdmVBcmcudGV4dCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgIGxpc3Q6IGFyZ3VtZW50U3VnZ2VzdGlvbnMsCiAgICAgICAgICAgIHR5cGU6IFNVR0dFU1RJT05fVFlQRS5BUkdVTUVOVFMKICAgICAgICAgIH0pOwoKICAgICAgICBjYXNlIDI1OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIHN1Z2dlc3QoZXhwcmVzc2lvbiwgZnVuY3Rpb25MaXN0LCBjdXJzb3JQb3NpdGlvbiwgYXJnVmFsdWVTdWdnZXN0aW9ucykgewogIHZhciByZXN1bHQsIG1lc3NhZ2UsIGxpc3QsIF9tZXNzYWdlLCBfZnVuY3Rpb25OYW1lLCBfZnVuY3Rpb25BcmdzLCBfZnVuY3Rpb25IZWxwLCBfbWVzc2FnZTIsIF9hcmdOYW1lLCBfZnVuY3Rpb25OYW1lMiwgX2Z1bmN0aW9uQXJnczIsIF92YWx1ZVN1Z2dlc3Rpb25zLCBfZnVuY3Rpb25IZWxwMiwgYXJnSGVscDsKCiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzdWdnZXN0JChfY29udGV4dDIpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoUGFyc2VyLnBhcnNlKGV4cHJlc3Npb24pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGV4dHJhY3RTdWdnZXN0aW9uc0Zyb21QYXJzZWRSZXN1bHQocmVzdWx0LCBjdXJzb3JQb3NpdGlvbiwgZnVuY3Rpb25MaXN0LCBhcmdWYWx1ZVN1Z2dlc3Rpb25zKSk7CgogICAgICAgIGNhc2UgNjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgIGNhc2UgOToKICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gOTsKICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTE7IC8vIFRoZSBncmFtbWFyIHdpbGwgdGhyb3cgYW4gZXJyb3IgY29udGFpbmluZyBhIG1lc3NhZ2UgaWYgdGhlIGV4cHJlc3Npb24gaXMgZm9ybWF0dGVkCiAgICAgICAgICAvLyBjb3JyZWN0bHkgYW5kIGlzIHByZXBhcmVkIHRvIGFjY2VwdCBzdWdnZXN0aW9ucy4gSWYgdGhlIGV4cHJlc3Npb24gaXMgbm90IGZvcm1hdHRlZAogICAgICAgICAgLy8gY29ycmVjdGx5IHRoZSBncmFtbWFyIHdpbGwganVzdCB0aHJvdyBhIHJlZ3VsYXIgUEVHIFN5bnRheEVycm9yLCBhbmQgdGhpcyBKU09OLnBhcnNlCiAgICAgICAgICAvLyBhdHRlbXB0IHdpbGwgdGhyb3cgYW4gZXJyb3IuCgogICAgICAgICAgbWVzc2FnZSA9IEpTT04ucGFyc2UoX2NvbnRleHQyLnQwLm1lc3NhZ2UpOwogICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxODsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDE1OgogICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxNTsKICAgICAgICAgIF9jb250ZXh0Mi50MSA9IF9jb250ZXh0MlsiY2F0Y2giXSgxMSk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTg6CiAgICAgICAgICBfY29udGV4dDIudDIgPSBtZXNzYWdlLnR5cGU7CiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IF9jb250ZXh0Mi50MiA9PT0gJ2luY29tcGxldGVGdW5jdGlvbicgPyAyMSA6IF9jb250ZXh0Mi50MiA9PT0gJ2luY29tcGxldGVBcmd1bWVudCcgPyAyMyA6IF9jb250ZXh0Mi50MiA9PT0gJ2luY29tcGxldGVBcmd1bWVudFZhbHVlJyA/IDI2IDogMzc7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyMToKICAgICAgICAgIGlmIChtZXNzYWdlLmZ1bmN0aW9uKSB7CiAgICAgICAgICAgIC8vIFRoZSB1c2VyIGhhcyBzdGFydCB0eXBpbmcgYSBmdW5jdGlvbiBuYW1lLCBzbyB3ZSdsbCBmaWx0ZXIgdGhlIGxpc3QgZG93biB0byBvbmx5CiAgICAgICAgICAgIC8vIHBvc3NpYmxlIG1hdGNoZXMuCiAgICAgICAgICAgIGxpc3QgPSBmdW5jdGlvbkxpc3QuZmlsdGVyKGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBfbG9kYXNoLnN0YXJ0c1dpdGgpKGZ1bmMubmFtZSwgbWVzc2FnZS5mdW5jdGlvbik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gVGhlIHVzZXIgaGFzbid0IHR5cGVkIGFueXRoaW5nIHlldCwgc28gd2UnbGwganVzdCByZXR1cm4gdGhlIGVudGlyZSBsaXN0LgogICAgICAgICAgICBsaXN0ID0gZnVuY3Rpb25MaXN0OwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgIGxpc3Q6IGxpc3QsCiAgICAgICAgICAgIHR5cGU6IFNVR0dFU1RJT05fVFlQRS5GVU5DVElPTlMKICAgICAgICAgIH0pOwoKICAgICAgICBjYXNlIDIzOgogICAgICAgICAgX21lc3NhZ2UgPSBtZXNzYWdlLCBfZnVuY3Rpb25OYW1lID0gX21lc3NhZ2UuY3VycmVudEZ1bmN0aW9uLCBfZnVuY3Rpb25BcmdzID0gX21lc3NhZ2UuY3VycmVudEFyZ3M7CiAgICAgICAgICBfZnVuY3Rpb25IZWxwID0gZnVuY3Rpb25MaXN0LmZpbmQoZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmMubmFtZSA9PT0gX2Z1bmN0aW9uTmFtZTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgbGlzdDogZ2V0QXJndW1lbnRzSGVscChfZnVuY3Rpb25IZWxwLCBfZnVuY3Rpb25BcmdzKSwKICAgICAgICAgICAgdHlwZTogU1VHR0VTVElPTl9UWVBFLkFSR1VNRU5UUwogICAgICAgICAgfSk7CgogICAgICAgIGNhc2UgMjY6CiAgICAgICAgICBfbWVzc2FnZTIgPSBtZXNzYWdlLCBfYXJnTmFtZSA9IF9tZXNzYWdlMi5uYW1lLCBfZnVuY3Rpb25OYW1lMiA9IF9tZXNzYWdlMi5jdXJyZW50RnVuY3Rpb24sIF9mdW5jdGlvbkFyZ3MyID0gX21lc3NhZ2UyLmN1cnJlbnRBcmdzOwogICAgICAgICAgX3ZhbHVlU3VnZ2VzdGlvbnMgPSBbXTsKCiAgICAgICAgICBpZiAoIWFyZ1ZhbHVlU3VnZ2VzdGlvbnMuaGFzRHluYW1pY1N1Z2dlc3Rpb25zRm9yQXJndW1lbnQoX2Z1bmN0aW9uTmFtZTIsIF9hcmdOYW1lKSkgewogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDMxOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChhcmdWYWx1ZVN1Z2dlc3Rpb25zLmdldER5bmFtaWNTdWdnZXN0aW9uc0ZvckFyZ3VtZW50KF9mdW5jdGlvbk5hbWUyLCBfYXJnTmFtZSwgX2Z1bmN0aW9uQXJnczIpKTsKCiAgICAgICAgY2FzZSAzMToKICAgICAgICAgIF92YWx1ZVN1Z2dlc3Rpb25zID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM2OwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICBfZnVuY3Rpb25IZWxwMiA9IGZ1bmN0aW9uTGlzdC5maW5kKGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICAgIHJldHVybiBmdW5jLm5hbWUgPT09IF9mdW5jdGlvbk5hbWUyOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKF9mdW5jdGlvbkhlbHAyKSB7CiAgICAgICAgICAgIGFyZ0hlbHAgPSBfZnVuY3Rpb25IZWxwMi5hcmdzLmZpbmQoZnVuY3Rpb24gKGFyZykgewogICAgICAgICAgICAgIHJldHVybiBhcmcubmFtZSA9PT0gX2FyZ05hbWU7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKGFyZ0hlbHAgJiYgYXJnSGVscC5zdWdnZXN0aW9ucykgewogICAgICAgICAgICAgIF92YWx1ZVN1Z2dlc3Rpb25zID0gYXJnSGVscC5zdWdnZXN0aW9uczsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICBjYXNlIDM2OgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgbGlzdDogX3ZhbHVlU3VnZ2VzdGlvbnMsCiAgICAgICAgICAgIHR5cGU6IFNVR0dFU1RJT05fVFlQRS5BUkdVTUVOVF9WQUxVRQogICAgICAgICAgfSk7CgogICAgICAgIGNhc2UgMzc6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA5XSwgWzExLCAxNV1dKTsKfQoKZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbihzdWdnZXN0aW9uLCB0eXBlLCByYW5nZSkgewogIHZhciBraW5kID0gbW9uYWNvRWRpdG9yLmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbUtpbmQuTWV0aG9kOwogIHZhciBpbnNlcnRUZXh0ID0gc3VnZ2VzdGlvbi5uYW1lOwogIHZhciBpbnNlcnRUZXh0UnVsZXM7CiAgdmFyIGRldGFpbCA9ICcnOwogIHZhciBjb21tYW5kOwoKICBzd2l0Y2ggKHR5cGUpIHsKICAgIGNhc2UgU1VHR0VTVElPTl9UWVBFLkFSR1VNRU5UUzoKICAgICAgY29tbWFuZCA9IHsKICAgICAgICB0aXRsZTogJ1RyaWdnZXIgU3VnZ2VzdGlvbiBEaWFsb2cnLAogICAgICAgIGlkOiAnZWRpdG9yLmFjdGlvbi50cmlnZ2VyU3VnZ2VzdCcKICAgICAgfTsKICAgICAga2luZCA9IG1vbmFjb0VkaXRvci5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kLlByb3BlcnR5OwogICAgICBpbnNlcnRUZXh0ID0gIiIuY29uY2F0KGluc2VydFRleHQsICI9Iik7CiAgICAgIGRldGFpbCA9ICIiLmNvbmNhdChfaTE4bi5pMThuLnRyYW5zbGF0ZSgndGltZWxpb24uZXhwcmVzc2lvblN1Z2dlc3Rpb25zLmFyZ3VtZW50LmRlc2NyaXB0aW9uLmFjY2VwdHNUZXh0JywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWNjZXB0cycKICAgICAgfSksICI6ICIpLmNvbmNhdChzdWdnZXN0aW9uLnR5cGVzKTsKICAgICAgYnJlYWs7CgogICAgY2FzZSBTVUdHRVNUSU9OX1RZUEUuRlVOQ1RJT05TOgogICAgICBjb21tYW5kID0gewogICAgICAgIHRpdGxlOiAnVHJpZ2dlciBTdWdnZXN0aW9uIERpYWxvZycsCiAgICAgICAgaWQ6ICdlZGl0b3IuYWN0aW9uLnRyaWdnZXJTdWdnZXN0JwogICAgICB9OwogICAgICBraW5kID0gbW9uYWNvRWRpdG9yLmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbUtpbmQuRnVuY3Rpb247CiAgICAgIGluc2VydFRleHQgPSAiIi5jb25jYXQoaW5zZXJ0VGV4dCwgIigkMCkiKTsKICAgICAgaW5zZXJ0VGV4dFJ1bGVzID0gbW9uYWNvRWRpdG9yLmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbUluc2VydFRleHRSdWxlLkluc2VydEFzU25pcHBldDsKICAgICAgZGV0YWlsID0gIigiLmNvbmNhdChzdWdnZXN0aW9uLmNoYWluYWJsZSA/IF9pMThuLmkxOG4udHJhbnNsYXRlKCd0aW1lbGlvbi5leHByZXNzaW9uU3VnZ2VzdGlvbnMuZnVuYy5kZXNjcmlwdGlvbi5jaGFpbmFibGVIZWxwVGV4dCcsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0NoYWluYWJsZScKICAgICAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndGltZWxpb24uZXhwcmVzc2lvblN1Z2dlc3Rpb25zLmZ1bmMuZGVzY3JpcHRpb24uZGF0YVNvdXJjZUhlbHBUZXh0JywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGF0YSBzb3VyY2UnCiAgICAgIH0pLCAiKSIpOwogICAgICBicmVhazsKCiAgICBjYXNlIFNVR0dFU1RJT05fVFlQRS5BUkdVTUVOVF9WQUxVRToKICAgICAgdmFyIHBhcmFtID0gc3VnZ2VzdGlvbi5uYW1lLnNwbGl0KCc6Jyk7CgogICAgICBpZiAocGFyYW0ubGVuZ3RoID09PSAxIHx8IHBhcmFtWzFdKSB7CiAgICAgICAgaW5zZXJ0VGV4dCA9ICIiLmNvbmNhdChwYXJhbS5sZW5ndGggPT09IDEgPyBpbnNlcnRUZXh0IDogcGFyYW1bMV0sICIsIik7CiAgICAgIH0KCiAgICAgIGNvbW1hbmQgPSB7CiAgICAgICAgdGl0bGU6ICdUcmlnZ2VyIFN1Z2dlc3Rpb24gRGlhbG9nJywKICAgICAgICBpZDogJ2VkaXRvci5hY3Rpb24udHJpZ2dlclN1Z2dlc3QnCiAgICAgIH07CiAgICAgIGtpbmQgPSBtb25hY29FZGl0b3IubGFuZ3VhZ2VzLkNvbXBsZXRpb25JdGVtS2luZC5Qcm9wZXJ0eTsKICAgICAgZGV0YWlsID0gc3VnZ2VzdGlvbi5oZWxwIHx8ICcnOwogICAgICBicmVhazsKICB9CgogIHJldHVybiB7CiAgICBkZXRhaWw6IGRldGFpbCwKICAgIGluc2VydFRleHQ6IGluc2VydFRleHQsCiAgICBpbnNlcnRUZXh0UnVsZXM6IGluc2VydFRleHRSdWxlcywKICAgIGtpbmQ6IGtpbmQsCiAgICBsYWJlbDogc3VnZ2VzdGlvbi5uYW1lLAogICAgZG9jdW1lbnRhdGlvbjogc3VnZ2VzdGlvbi5oZWxwLAogICAgY29tbWFuZDogY29tbWFuZCwKICAgIHJhbmdlOiByYW5nZQogIH07Cn0="},null]}