{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/security/public/views/management/edit_role/components/privileges/kibana/simple_privilege_section/simple_privilege_section.js","dependencies":[{"path":"x-pack/legacy/plugins/security/public/views/management/edit_role/components/privileges/kibana/simple_privilege_section/simple_privilege_section.js","mtime":1585205047204},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuU2ltcGxlUHJpdmlsZWdlU2VjdGlvbiA9IHZvaWQgMDsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3JlYWN0ID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9wcml2aWxlZ2VfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWIvcHJpdmlsZWdlX3V0aWxzIik7Cgp2YXIgX3JvbGVfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWIvcm9sZV91dGlscyIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9saWIvY29uc3RhbnRzIik7Cgp2YXIgX2ZlYXR1cmVfdGFibGUgPSByZXF1aXJlKCIuLi9mZWF0dXJlX3RhYmxlIik7Cgp2YXIgX3Vuc3VwcG9ydGVkX3NwYWNlX3ByaXZpbGVnZXNfd2FybmluZyA9IHJlcXVpcmUoIi4vdW5zdXBwb3J0ZWRfc3BhY2VfcHJpdmlsZWdlc193YXJuaW5nIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gInN5bWJvbCIpIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfSBlbHNlIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9CgogIHJldHVybiBfdHlwZW9mKG9iaik7Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgU2ltcGxlUHJpdmlsZWdlU2VjdGlvbiA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoU2ltcGxlUHJpdmlsZWdlU2VjdGlvbiwgX0NvbXBvbmVudCk7CgogIGZ1bmN0aW9uIFNpbXBsZVByaXZpbGVnZVNlY3Rpb24ocHJvcHMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2ltcGxlUHJpdmlsZWdlU2VjdGlvbik7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoU2ltcGxlUHJpdmlsZWdlU2VjdGlvbikuY2FsbCh0aGlzLCBwcm9wcykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdldERpc3BsYXllZEJhc2VQcml2aWxlZ2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChfdGhpcy5zdGF0ZS5pc0N1c3RvbWl6aW5nR2xvYmFsUHJpdmlsZWdlKSB7CiAgICAgICAgcmV0dXJuIF9jb25zdGFudHMuQ1VTVE9NX1BSSVZJTEVHRV9WQUxVRTsKICAgICAgfQoKICAgICAgdmFyIHJvbGUgPSBfdGhpcy5wcm9wcy5yb2xlOwoKICAgICAgdmFyIGZvcm0gPSBfdGhpcy5sb2NhdGVHbG9iYWxQcml2aWxlZ2Uocm9sZSk7CgogICAgICByZXR1cm4gZm9ybSAmJiBmb3JtLmJhc2UubGVuZ3RoID4gMCA/IGZvcm0uYmFzZVswXSA6IF9jb25zdGFudHMuTk9fUFJJVklMRUdFX1ZBTFVFOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25LaWJhbmFQcml2aWxlZ2VDaGFuZ2UiLCBmdW5jdGlvbiAocHJpdmlsZWdlKSB7CiAgICAgIHZhciByb2xlID0gKDAsIF9yb2xlX3V0aWxzLmNvcHlSb2xlKShfdGhpcy5wcm9wcy5yb2xlKTsKCiAgICAgIHZhciBmb3JtID0gX3RoaXMubG9jYXRlR2xvYmFsUHJpdmlsZWdlKHJvbGUpIHx8IF90aGlzLmNyZWF0ZUdsb2JhbFByaXZpbGVnZUVudHJ5KHJvbGUpOwoKICAgICAgaWYgKHByaXZpbGVnZSA9PT0gX2NvbnN0YW50cy5OT19QUklWSUxFR0VfVkFMVUUpIHsKICAgICAgICAvLyBSZW1vdmUgZ2xvYmFsIGVudHJ5IGlmIG5vIHByaXZpbGVnZSB2YWx1ZQogICAgICAgIHJvbGUua2liYW5hID0gcm9sZS5raWJhbmEuZmlsdGVyKGZ1bmN0aW9uIChlbnRyeSkgewogICAgICAgICAgcmV0dXJuICEoMCwgX3ByaXZpbGVnZV91dGlscy5pc0dsb2JhbFByaXZpbGVnZURlZmluaXRpb24pKGVudHJ5KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChwcml2aWxlZ2UgPT09IF9jb25zdGFudHMuQ1VTVE9NX1BSSVZJTEVHRV9WQUxVRSkgewogICAgICAgIC8vIFJlbW92ZSBiYXNlIHByaXZpbGVnZSBpZiBjdXN0b21pemluZyBmZWF0dXJlIHByaXZpbGVnZXMKICAgICAgICBmb3JtLmJhc2UgPSBbXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3JtLmJhc2UgPSBbcHJpdmlsZWdlXTsKICAgICAgICBmb3JtLmZlYXR1cmUgPSB7fTsKICAgICAgfQoKICAgICAgX3RoaXMucHJvcHMub25DaGFuZ2Uocm9sZSk7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaXNDdXN0b21pemluZ0dsb2JhbFByaXZpbGVnZTogcHJpdmlsZWdlID09PSBfY29uc3RhbnRzLkNVU1RPTV9QUklWSUxFR0VfVkFMVUUsCiAgICAgICAgZ2xvYmFsUHJpdnNJbmRleDogcm9sZS5raWJhbmEuaW5kZXhPZihmb3JtKQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uRmVhdHVyZVByaXZpbGVnZUNoYW5nZSIsIGZ1bmN0aW9uIChmZWF0dXJlSWQsIHByaXZpbGVnZXMpIHsKICAgICAgdmFyIHJvbGUgPSAoMCwgX3JvbGVfdXRpbHMuY29weVJvbGUpKF90aGlzLnByb3BzLnJvbGUpOwoKICAgICAgdmFyIGZvcm0gPSBfdGhpcy5sb2NhdGVHbG9iYWxQcml2aWxlZ2Uocm9sZSkgfHwgX3RoaXMuY3JlYXRlR2xvYmFsUHJpdmlsZWdlRW50cnkocm9sZSk7CgogICAgICBpZiAocHJpdmlsZWdlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgZm9ybS5mZWF0dXJlW2ZlYXR1cmVJZF0gPSBfdG9Db25zdW1hYmxlQXJyYXkocHJpdmlsZWdlcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGVsZXRlIGZvcm0uZmVhdHVyZVtmZWF0dXJlSWRdOwogICAgICB9CgogICAgICBfdGhpcy5wcm9wcy5vbkNoYW5nZShyb2xlKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uQ2hhbmdlQWxsRmVhdHVyZVByaXZpbGVnZXMiLCBmdW5jdGlvbiAocHJpdmlsZWdlcykgewogICAgICB2YXIgcm9sZSA9ICgwLCBfcm9sZV91dGlscy5jb3B5Um9sZSkoX3RoaXMucHJvcHMucm9sZSk7CgogICAgICB2YXIgZm9ybSA9IF90aGlzLmxvY2F0ZUdsb2JhbFByaXZpbGVnZShyb2xlKSB8fCBfdGhpcy5jcmVhdGVHbG9iYWxQcml2aWxlZ2VFbnRyeShyb2xlKTsKCiAgICAgIGlmIChwcml2aWxlZ2VzLmxlbmd0aCA+IDApIHsKICAgICAgICBfdGhpcy5wcm9wcy5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7CiAgICAgICAgICBmb3JtLmZlYXR1cmVbZmVhdHVyZS5pZF0gPSBfdG9Db25zdW1hYmxlQXJyYXkocHJpdmlsZWdlcyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9ybS5mZWF0dXJlID0ge307CiAgICAgIH0KCiAgICAgIF90aGlzLnByb3BzLm9uQ2hhbmdlKHJvbGUpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAibWF5YmVSZW5kZXJTcGFjZVByaXZpbGVnZVdhcm5pbmciLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBraWJhbmFQcml2aWxlZ2VzID0gX3RoaXMucHJvcHMucm9sZS5raWJhbmE7CiAgICAgIHZhciBoYXNTcGFjZVByaXZpbGVnZXMgPSBraWJhbmFQcml2aWxlZ2VzLnNvbWUoZnVuY3Rpb24gKHByaXZpbGVnZSkgewogICAgICAgIHJldHVybiAhKDAsIF9wcml2aWxlZ2VfdXRpbHMuaXNHbG9iYWxQcml2aWxlZ2VEZWZpbml0aW9uKShwcml2aWxlZ2UpOwogICAgICB9KTsKCiAgICAgIGlmIChoYXNTcGFjZVByaXZpbGVnZXMpIHsKICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgICAgICBmdWxsV2lkdGg6IHRydWUKICAgICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdW5zdXBwb3J0ZWRfc3BhY2VfcHJpdmlsZWdlc193YXJuaW5nLlVuc3VwcG9ydGVkU3BhY2VQcml2aWxlZ2VzV2FybmluZywgbnVsbCkpOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImxvY2F0ZUdsb2JhbFByaXZpbGVnZUluZGV4IiwgZnVuY3Rpb24gKHJvbGUpIHsKICAgICAgcmV0dXJuIHJvbGUua2liYW5hLmZpbmRJbmRleChmdW5jdGlvbiAocHJpdmlsZWdlcykgewogICAgICAgIHJldHVybiAoMCwgX3ByaXZpbGVnZV91dGlscy5pc0dsb2JhbFByaXZpbGVnZURlZmluaXRpb24pKHByaXZpbGVnZXMpOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImxvY2F0ZUdsb2JhbFByaXZpbGVnZSIsIGZ1bmN0aW9uIChyb2xlKSB7CiAgICAgIHZhciBzcGFjZVByaXZpbGVnZXMgPSByb2xlLmtpYmFuYTsKICAgICAgcmV0dXJuIHNwYWNlUHJpdmlsZWdlcy5maW5kKGZ1bmN0aW9uIChwcml2aWxlZ2VzKSB7CiAgICAgICAgcmV0dXJuICgwLCBfcHJpdmlsZWdlX3V0aWxzLmlzR2xvYmFsUHJpdmlsZWdlRGVmaW5pdGlvbikocHJpdmlsZWdlcyk7CiAgICAgIH0pOwogICAgfSk7CgogICAgdmFyIGdsb2JhbFByaXZzID0gX3RoaXMubG9jYXRlR2xvYmFsUHJpdmlsZWdlKHByb3BzLnJvbGUpOwoKICAgIHZhciBnbG9iYWxQcml2c0luZGV4ID0gX3RoaXMubG9jYXRlR2xvYmFsUHJpdmlsZWdlSW5kZXgocHJvcHMucm9sZSk7CgogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGlzQ3VzdG9taXppbmdHbG9iYWxQcml2aWxlZ2U6IEJvb2xlYW4oZ2xvYmFsUHJpdnMgJiYgT2JqZWN0LmtleXMoZ2xvYmFsUHJpdnMuZmVhdHVyZSkubGVuZ3RoID4gMCksCiAgICAgIGdsb2JhbFByaXZzSW5kZXg6IGdsb2JhbFByaXZzSW5kZXgKICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoU2ltcGxlUHJpdmlsZWdlU2VjdGlvbiwgW3sKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIga2liYW5hUHJpdmlsZWdlID0gdGhpcy5nZXREaXNwbGF5ZWRCYXNlUHJpdmlsZWdlKCk7CiAgICAgIHZhciBwcml2aWxlZ2VDYWxjdWxhdG9yID0gdGhpcy5wcm9wcy5wcml2aWxlZ2VDYWxjdWxhdG9yRmFjdG9yeS5nZXRJbnN0YW5jZSh0aGlzLnByb3BzLnJvbGUpOwogICAgICB2YXIgY2FsY3VsYXRlZFByaXZpbGVnZXMgPSBwcml2aWxlZ2VDYWxjdWxhdG9yLmNhbGN1bGF0ZUVmZmVjdGl2ZVByaXZpbGVnZXMoKVt0aGlzLnN0YXRlLmdsb2JhbFByaXZzSW5kZXhdOwogICAgICB2YXIgYWxsb3dlZFByaXZpbGVnZXMgPSBwcml2aWxlZ2VDYWxjdWxhdG9yLmNhbGN1bGF0ZUFsbG93ZWRQcml2aWxlZ2VzKClbdGhpcy5zdGF0ZS5nbG9iYWxQcml2c0luZGV4XTsKICAgICAgdmFyIGhhc1Jlc2VydmVkUHJpdmlsZWdlcyA9IGNhbGN1bGF0ZWRQcml2aWxlZ2VzICYmIGNhbGN1bGF0ZWRQcml2aWxlZ2VzLnJlc2VydmVkICE9IG51bGwgJiYgY2FsY3VsYXRlZFByaXZpbGVnZXMucmVzZXJ2ZWQubGVuZ3RoID4gMDsKCiAgICAgIHZhciBkZXNjcmlwdGlvbiA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGUuc2ltcGxlUHJpdmlsZWdlRm9ybS5zcGVjaWZ5UHJpdmlsZWdlRm9yUm9sZURlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNwZWNpZmllcyB0aGUgS2liYW5hIHByaXZpbGVnZSBmb3IgdGhpcyByb2xlLiIKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRnJhZ21lbnQsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRGVzY3JpYmVkRm9ybUdyb3VwLCB7CiAgICAgICAgdGl0bGU6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoMyIsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGUuc2ltcGxlUHJpdmlsZWdlRm9ybS5raWJhbmFQcml2aWxlZ2VzVGl0bGUiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJLaWJhbmEgcHJpdmlsZWdlcyIKICAgICAgICB9KSksCiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICAgIGhhc0VtcHR5TGFiZWxTcGFjZTogdHJ1ZQogICAgICB9LCBoYXNSZXNlcnZlZFByaXZpbGVnZXMgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvbWJvQm94LCB7CiAgICAgICAgZnVsbFdpZHRoOiB0cnVlLAogICAgICAgIHNlbGVjdGVkT3B0aW9uczogY2FsY3VsYXRlZFByaXZpbGVnZXMucmVzZXJ2ZWQubWFwKGZ1bmN0aW9uIChwcml2aWxlZ2UpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGxhYmVsOiBwcml2aWxlZ2UKICAgICAgICAgIH07CiAgICAgICAgfSksCiAgICAgICAgaXNEaXNhYmxlZDogdHJ1ZQogICAgICB9KSA6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3VwZXJTZWxlY3QsIHsKICAgICAgICBkaXNhYmxlZDogIXRoaXMucHJvcHMuZWRpdGFibGUsCiAgICAgICAgb25DaGFuZ2U6IHRoaXMub25LaWJhbmFQcml2aWxlZ2VDaGFuZ2UsCiAgICAgICAgb3B0aW9uczogW3sKICAgICAgICAgIHZhbHVlOiBfY29uc3RhbnRzLk5PX1BSSVZJTEVHRV9WQUxVRSwKICAgICAgICAgIGlucHV0RGlzcGxheTogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGUuc2ltcGxlUHJpdmlsZWdlRm9ybS5ub1ByaXZpbGVnZUlucHV0IiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJOb25lIgogICAgICAgICAgfSkpLAogICAgICAgICAgZHJvcGRvd25EaXNwbGF5OiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGUuc2ltcGxlUHJpdmlsZWdlRm9ybS5ub1ByaXZpbGVnZURyb3Bkb3duIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJOb25lIgogICAgICAgICAgfSkpLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAieHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZS5zaW1wbGVQcml2aWxlZ2VGb3JtLm5vUHJpdmlsZWdlRHJvcGRvd25EZXNjcmlwdGlvbiIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTm8gYWNjZXNzIHRvIEtpYmFuYSIKICAgICAgICAgIH0pKSkKICAgICAgICB9LCB7CiAgICAgICAgICB2YWx1ZTogX2NvbnN0YW50cy5DVVNUT01fUFJJVklMRUdFX1ZBTFVFLAogICAgICAgICAgaW5wdXREaXNwbGF5OiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAieHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZS5zaW1wbGVQcml2aWxlZ2VGb3JtLmN1c3RvbVByaXZpbGVnZUlucHV0IiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDdXN0b20iCiAgICAgICAgICB9KSksCiAgICAgICAgICBkcm9wZG93bkRpc3BsYXk6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dCwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAieHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZS5zaW1wbGVQcml2aWxlZ2VGb3JtLmN1c3RvbVByaXZpbGVnZURyb3Bkb3duIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDdXN0b20iCiAgICAgICAgICB9KSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LmVkaXRSb2xlLnNpbXBsZVByaXZpbGVnZUZvcm0uY3VzdG9tUHJpdmlsZWdlRHJvcGRvd25EZXNjcmlwdGlvbiIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ3VzdG9taXplIGFjY2VzcyB0byBLaWJhbmEiCiAgICAgICAgICB9KSkpCiAgICAgICAgfSwgewogICAgICAgICAgdmFsdWU6ICdyZWFkJywKICAgICAgICAgIGlucHV0RGlzcGxheTogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGUuc2ltcGxlUHJpdmlsZWdlRm9ybS5yZWFkUHJpdmlsZWdlSW5wdXQiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlJlYWQiCiAgICAgICAgICB9KSksCiAgICAgICAgICBkcm9wZG93bkRpc3BsYXk6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dCwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAieHBhY2suc2VjdXJpdHkubWFuYWdlbWVudC5lZGl0Um9sZS5zaW1wbGVQcml2aWxlZ2VGb3JtLnJlYWRQcml2aWxlZ2VEcm9wZG93biIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUmVhZCIKICAgICAgICAgIH0pKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGUuc2ltcGxlUHJpdmlsZWdlRm9ybS5yZWFkUHJpdmlsZWdlRHJvcGRvd25EZXNjcmlwdGlvbiIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiR3JhbnRzIHJlYWQtb25seSBhY2Nlc3MgdG8gYWxsIG9mIEtpYmFuYSIKICAgICAgICAgIH0pKSkKICAgICAgICB9LCB7CiAgICAgICAgICB2YWx1ZTogJ2FsbCcsCiAgICAgICAgICBpbnB1dERpc3BsYXk6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dCwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LmVkaXRSb2xlLnNpbXBsZVByaXZpbGVnZUZvcm0uYWxsUHJpdmlsZWdlSW5wdXQiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFsbCIKICAgICAgICAgIH0pKSwKICAgICAgICAgIGRyb3Bkb3duRGlzcGxheTogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJ4cGFjay5zZWN1cml0eS5tYW5hZ2VtZW50LmVkaXRSb2xlLnNpbXBsZVByaXZpbGVnZUZvcm0uYWxsUHJpdmlsZWdlRHJvcGRvd24iLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFsbCIKICAgICAgICAgIH0pKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogInhwYWNrLnNlY3VyaXR5Lm1hbmFnZW1lbnQuZWRpdFJvbGUuc2ltcGxlUHJpdmlsZWdlRm9ybS5hbGxQcml2aWxlZ2VEcm9wZG93bkRlc2NyaXB0aW9uIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJHcmFudHMgZnVsbCBhY2Nlc3MgdG8gYWxsIG9mIEtpYmFuYSIKICAgICAgICAgIH0pKSkKICAgICAgICB9XSwKICAgICAgICBoYXNEaXZpZGVyczogdHJ1ZSwKICAgICAgICB2YWx1ZU9mU2VsZWN0ZWQ6IGtpYmFuYVByaXZpbGVnZQogICAgICB9KSksIHRoaXMuc3RhdGUuaXNDdXN0b21pemluZ0dsb2JhbFByaXZpbGVnZSAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9mZWF0dXJlX3RhYmxlLkZlYXR1cmVUYWJsZSwgewogICAgICAgIHJvbGU6IHRoaXMucHJvcHMucm9sZSwKICAgICAgICBraWJhbmFQcml2aWxlZ2VzOiB0aGlzLnByb3BzLmtpYmFuYVByaXZpbGVnZXMsCiAgICAgICAgY2FsY3VsYXRlZFByaXZpbGVnZXM6IGNhbGN1bGF0ZWRQcml2aWxlZ2VzLAogICAgICAgIGFsbG93ZWRQcml2aWxlZ2VzOiBhbGxvd2VkUHJpdmlsZWdlcywKICAgICAgICByYW5rZWRGZWF0dXJlUHJpdmlsZWdlczogcHJpdmlsZWdlQ2FsY3VsYXRvci5yYW5rZWRGZWF0dXJlUHJpdmlsZWdlcywKICAgICAgICBmZWF0dXJlczogdGhpcy5wcm9wcy5mZWF0dXJlcywKICAgICAgICBpbnRsOiB0aGlzLnByb3BzLmludGwsCiAgICAgICAgb25DaGFuZ2U6IHRoaXMub25GZWF0dXJlUHJpdmlsZWdlQ2hhbmdlLAogICAgICAgIG9uQ2hhbmdlQWxsOiB0aGlzLm9uQ2hhbmdlQWxsRmVhdHVyZVByaXZpbGVnZXMsCiAgICAgICAgc3BhY2VzSW5kZXg6IHRoaXMucHJvcHMucm9sZS5raWJhbmEuZmluZEluZGV4KGZ1bmN0aW9uIChrKSB7CiAgICAgICAgICByZXR1cm4gKDAsIF9wcml2aWxlZ2VfdXRpbHMuaXNHbG9iYWxQcml2aWxlZ2VEZWZpbml0aW9uKShrKTsKICAgICAgICB9KQogICAgICB9KSksIHRoaXMubWF5YmVSZW5kZXJTcGFjZVByaXZpbGVnZVdhcm5pbmcoKSkpOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZUdsb2JhbFByaXZpbGVnZUVudHJ5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVHbG9iYWxQcml2aWxlZ2VFbnRyeShyb2xlKSB7CiAgICAgIHZhciBuZXdFbnRyeSA9IHsKICAgICAgICBzcGFjZXM6IFsnKiddLAogICAgICAgIGJhc2U6IFtdLAogICAgICAgIGZlYXR1cmU6IHt9CiAgICAgIH07CiAgICAgIHJvbGUua2liYW5hLnB1c2gobmV3RW50cnkpOwogICAgICByZXR1cm4gbmV3RW50cnk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gU2ltcGxlUHJpdmlsZWdlU2VjdGlvbjsKfShfcmVhY3QyLkNvbXBvbmVudCk7CgpleHBvcnRzLlNpbXBsZVByaXZpbGVnZVNlY3Rpb24gPSBTaW1wbGVQcml2aWxlZ2VTZWN0aW9uOw=="},null]}