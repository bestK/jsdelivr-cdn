{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/ml/public/application/datavisualizer/file_based/components/file_datavisualizer_view/file_datavisualizer_view.js","dependencies":[{"path":"x-pack/legacy/plugins/ml/public/application/datavisualizer/file_based/components/file_datavisualizer_view/file_datavisualizer_view.js","mtime":1585205045628},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkZpbGVEYXRhVmlzdWFsaXplclZpZXcgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX21sX2FwaV9zZXJ2aWNlID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vc2VydmljZXMvbWxfYXBpX3NlcnZpY2UiKTsKCnZhciBfYWJvdXRfcGFuZWwgPSByZXF1aXJlKCIuLi9hYm91dF9wYW5lbCIpOwoKdmFyIF9ib3R0b21fYmFyID0gcmVxdWlyZSgiLi4vYm90dG9tX2JhciIpOwoKdmFyIF9yZXN1bHRzX3ZpZXcgPSByZXF1aXJlKCIuLi9yZXN1bHRzX3ZpZXciKTsKCnZhciBfZmlsZV9lcnJvcl9jYWxsb3V0cyA9IHJlcXVpcmUoIi4vZmlsZV9lcnJvcl9jYWxsb3V0cyIpOwoKdmFyIF9lZGl0X2ZseW91dCA9IHJlcXVpcmUoIi4uL2VkaXRfZmx5b3V0Iik7Cgp2YXIgX2ltcG9ydF92aWV3ID0gcmVxdWlyZSgiLi4vaW1wb3J0X3ZpZXciKTsKCnZhciBfZmlsZV9kYXRhdmlzdWFsaXplciA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMvZmlsZV9kYXRhdmlzdWFsaXplciIpOwoKdmFyIF91dGlscyA9IHJlcXVpcmUoIi4uL3V0aWxzIik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4vY29uc3RhbnRzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OyBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIFVQTE9BRF9TSVpFX01CID0gNTsKCnZhciBGaWxlRGF0YVZpc3VhbGl6ZXJWaWV3ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhGaWxlRGF0YVZpc3VhbGl6ZXJWaWV3LCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gRmlsZURhdGFWaXN1YWxpemVyVmlldyhwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlRGF0YVZpc3VhbGl6ZXJWaWV3KTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihGaWxlRGF0YVZpc3VhbGl6ZXJWaWV3KS5jYWxsKHRoaXMsIHByb3BzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25GaWxlUGlja2VyQ2hhbmdlIiwgZnVuY3Rpb24gKGZpbGVzKSB7CiAgICAgIF90aGlzLm92ZXJyaWRlcyA9IHt9OwoKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGxvYWRpbmc6IGZpbGVzLmxlbmd0aCA+IDAsCiAgICAgICAgYm90dG9tQmFyVmlzaWJsZTogZmlsZXMubGVuZ3RoID4gMCwKICAgICAgICBsb2FkZWQ6IGZhbHNlLAogICAgICAgIGZpbGVDb250ZW50czogJycsCiAgICAgICAgZmlsZVNpemU6IDAsCiAgICAgICAgZmlsZVRvb0xhcmdlOiBmYWxzZSwKICAgICAgICBmaWxlQ291bGROb3RCZVJlYWQ6IGZhbHNlLAogICAgICAgIHNlcnZlckVycm9yTWVzc2FnZTogJycsCiAgICAgICAgcmVzdWx0czogdW5kZWZpbmVkCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoZmlsZXMubGVuZ3RoKSB7CiAgICAgICAgICBfdGhpcy5sb2FkRmlsZShmaWxlc1swXSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNsb3NlRWRpdEZseW91dCIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGlzRWRpdEZseW91dFZpc2libGU6IGZhbHNlCiAgICAgIH0pOwoKICAgICAgX3RoaXMuc2hvd0JvdHRvbUJhcigpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic2hvd0VkaXRGbHlvdXQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBpc0VkaXRGbHlvdXRWaXNpYmxlOiB0cnVlCiAgICAgIH0pOwoKICAgICAgX3RoaXMuaGlkZUJvdHRvbUJhcigpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic2hvd0JvdHRvbUJhciIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGJvdHRvbUJhclZpc2libGU6IHRydWUKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoaWRlQm90dG9tQmFyIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgYm90dG9tQmFyVmlzaWJsZTogZmFsc2UKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzZXRPdmVycmlkZXMiLCBmdW5jdGlvbiAob3ZlcnJpZGVzKSB7CiAgICAgIGNvbnNvbGUubG9nKCdzZXRPdmVycmlkZXMnLCBvdmVycmlkZXMpOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgICAgbG9hZGVkOiBmYWxzZQogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGZvcm1hdHRlZE92ZXJyaWRlcyA9ICgwLCBfdXRpbHMuY3JlYXRlVXJsT3ZlcnJpZGVzKShvdmVycmlkZXMsIF90aGlzLm9yaWdpbmFsU2V0dGluZ3MpOwoKICAgICAgICBfdGhpcy5sb2FkU2V0dGluZ3MoX3RoaXMuc3RhdGUuZmlsZUNvbnRlbnRzLCBmb3JtYXR0ZWRPdmVycmlkZXMpOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNoYW5nZU1vZGUiLCBmdW5jdGlvbiAobW9kZSkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgbW9kZTogbW9kZQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uQ2FuY2VsIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5jaGFuZ2VNb2RlKF9jb25zdGFudHMuTU9ERS5SRUFEKTsKCiAgICAgIF90aGlzLm9uRmlsZVBpY2tlckNoYW5nZShbXSk7CiAgICB9KTsKCiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgZmlsZXM6IHt9LAogICAgICBmaWxlQ29udGVudHM6ICcnLAogICAgICBmaWxlU2l6ZTogMCwKICAgICAgZmlsZVRvb0xhcmdlOiBmYWxzZSwKICAgICAgZmlsZUNvdWxkTm90QmVSZWFkOiBmYWxzZSwKICAgICAgc2VydmVyRXJyb3JNZXNzYWdlOiAnJywKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGxvYWRlZDogZmFsc2UsCiAgICAgIHJlc3VsdHM6IHVuZGVmaW5lZCwKICAgICAgbW9kZTogX2NvbnN0YW50cy5NT0RFLlJFQUQsCiAgICAgIGlzRWRpdEZseW91dFZpc2libGU6IGZhbHNlLAogICAgICBib3R0b21CYXJWaXNpYmxlOiBmYWxzZSwKICAgICAgaGFzUGVybWlzc2lvblRvSW1wb3J0OiBmYWxzZQogICAgfTsKICAgIF90aGlzLm92ZXJyaWRlcyA9IHt9OwogICAgX3RoaXMucHJldmlvdXNPdmVycmlkZXMgPSB7fTsKICAgIF90aGlzLm9yaWdpbmFsU2V0dGluZ3MgPSB7fTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhGaWxlRGF0YVZpc3VhbGl6ZXJWaWV3LCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB2YXIgaGFzUGVybWlzc2lvblRvSW1wb3J0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50JChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKCgwLCBfdXRpbHMuaGFzSW1wb3J0UGVybWlzc2lvbikoKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgaGFzUGVybWlzc2lvblRvSW1wb3J0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGhhc1Blcm1pc3Npb25Ub0ltcG9ydDogaGFzUGVybWlzc2lvblRvSW1wb3J0CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImxvYWRGaWxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkRmlsZShmaWxlKSB7CiAgICAgIHZhciBmaWxlQ29udGVudHMsIGRhdGE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbG9hZEZpbGUkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghKGZpbGUuc2l6ZSA8PSBfZmlsZV9kYXRhdmlzdWFsaXplci5NQVhfQllURVMpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoKDAsIF91dGlscy5yZWFkRmlsZSkoZmlsZSkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGZpbGVDb250ZW50cyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIGRhdGEgPSBmaWxlQ29udGVudHMuZGF0YTsKICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGZpbGVDb250ZW50czogZGF0YSwKICAgICAgICAgICAgICAgIGZpbGVTaXplOiBmaWxlLnNpemUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLmxvYWRTZXR0aW5ncyhkYXRhKSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMTsKICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dDIudDApOwogICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgbG9hZGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgZmlsZUNvdWxkTm90QmVSZWFkOiB0cnVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgbG9hZGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgZmlsZVRvb0xhcmdlOiB0cnVlLAogICAgICAgICAgICAgICAgZmlsZVNpemU6IGZpbGUuc2l6ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMsIFtbMSwgMTFdXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9hZFNldHRpbmdzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkU2V0dGluZ3MoZGF0YSwgb3ZlcnJpZGVzKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGlzUmV0cnksCiAgICAgICAgICBsZXNzRGF0YSwKICAgICAgICAgIGFuYWx5emVGaWxlLAogICAgICAgICAgcmVzcCwKICAgICAgICAgIHNlcnZlclNldHRpbmdzLAogICAgICAgICAgc2VydmVyT3ZlcnJpZGVzLAogICAgICAgICAgX2FyZ3MzID0gYXJndW1lbnRzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGxvYWRTZXR0aW5ncyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaXNSZXRyeSA9IF9hcmdzMy5sZW5ndGggPiAyICYmIF9hcmdzM1syXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MzWzJdIDogZmFsc2U7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxOwogICAgICAgICAgICAgIC8vIHJlZHVjZSB0aGUgYW1vdW50IG9mIGRhdGEgYmVpbmcgc2VudCB0byB0aGUgZW5kcG9pbnQKICAgICAgICAgICAgICAvLyA1TUIgc2hvdWxkIGJlIGVub3VnaCB0byBjb250YWluIDEwMDAgbGluZXMKICAgICAgICAgICAgICBsZXNzRGF0YSA9ICgwLCBfdXRpbHMucmVkdWNlRGF0YSkoZGF0YSwgVVBMT0FEX1NJWkVfTUIpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvdmVycmlkZXMnLCBvdmVycmlkZXMpOwogICAgICAgICAgICAgIGFuYWx5emVGaWxlID0gX21sX2FwaV9zZXJ2aWNlLm1sLmZpbGVEYXRhdmlzdWFsaXplci5hbmFseXplRmlsZTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChhbmFseXplRmlsZShsZXNzRGF0YSwgb3ZlcnJpZGVzKSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgIHNlcnZlclNldHRpbmdzID0gKDAsIF91dGlscy5wcm9jZXNzUmVzdWx0cykocmVzcC5yZXN1bHRzKTsKICAgICAgICAgICAgICBzZXJ2ZXJPdmVycmlkZXMgPSByZXNwLm92ZXJyaWRlczsKICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzT3ZlcnJpZGVzID0gdGhpcy5vdmVycmlkZXM7CiAgICAgICAgICAgICAgdGhpcy5vdmVycmlkZXMgPSB7fTsKCiAgICAgICAgICAgICAgaWYgKCEoc2VydmVyU2V0dGluZ3MuZm9ybWF0ID09PSAneG1sJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRocm93IHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgICAgIGlkOiAieHBhY2subWwuZmlsZURhdGF2aXN1YWxpemVyLmZpbGVEYXRhdmlzdWFsaXplclZpZXcueG1sTm90Q3VycmVudGx5U3VwcG9ydGVkRXJyb3JNZXNzYWdlIiwKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJYTUwgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQiCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH07CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGlmIChzZXJ2ZXJPdmVycmlkZXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgLy8gaWYgbm8gb3ZlcnJpZGVzIHdlcmUgdXNlZCwgc3RvcmUgYWxsIHRoZSBzZXR0aW5ncyByZXR1cm5lZCBmcm9tIHRoZSBlbmRwb2ludAogICAgICAgICAgICAgICAgdGhpcy5vcmlnaW5hbFNldHRpbmdzID0gc2VydmVyU2V0dGluZ3M7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHNlcnZlck92ZXJyaWRlcykuZm9yRWFjaChmdW5jdGlvbiAobykgewogICAgICAgICAgICAgICAgICB2YXIgY2FtZWxDYXNlTyA9IG8ucmVwbGFjZSgvX1x3L2csIGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1bMV0udG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5vdmVycmlkZXNbY2FtZWxDYXNlT10gPSBzZXJ2ZXJPdmVycmlkZXNbb107CiAgICAgICAgICAgICAgICB9KTsgLy8gY2hlY2sgdG8gc2VlIGlmIHRoZSBzZXR0aW5ncyBmcm9tIHRoZSBzZXJ2ZXIgd2hpY2ggaGF2ZW4ndCBiZWVuIG92ZXJyaWRkZW4gaGF2ZSBjaGFuZ2VkLgogICAgICAgICAgICAgICAgLy8gZS5nLiBjaGFuZ2luZyB0aGUgbmFtZSBvZiB0aGUgdGltZSBmaWVsZCB3aGljaCBpcyBhbHNvIHRoZSB0aW1lIGZpZWxkCiAgICAgICAgICAgICAgICAvLyB3aWxsIGNhdXNlIHRoZSB0aW1lc3RhbXBfZmllbGQgc2V0dGluZyB0byBjaGFuZ2UuCiAgICAgICAgICAgICAgICAvLyBpZiBhbnkgaGF2ZSBjaGFuZ2VkLCB1cGRhdGUgdGhlIG9yaWdpbmFsU2V0dGluZ3MgdmFsdWUKCiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzZXJ2ZXJTZXR0aW5ncykuZm9yRWFjaChmdW5jdGlvbiAobykgewogICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBzZXJ2ZXJTZXR0aW5nc1tvXTsKCiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczIub3ZlcnJpZGVzW29dID09PSB1bmRlZmluZWQgJiYgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmICgwLCBfbG9kYXNoLmlzRXF1YWwpKHZhbHVlLCBfdGhpczIub3JpZ2luYWxTZXR0aW5nc1tvXSkgPT09IGZhbHNlIHx8IHZhbHVlICE9PSBfdGhpczIub3JpZ2luYWxTZXR0aW5nc1tvXSkpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczIub3JpZ2luYWxTZXR0aW5nc1tvXSA9IHZhbHVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgcmVzdWx0czogcmVzcC5yZXN1bHRzLAogICAgICAgICAgICAgICAgbG9hZGVkOiB0cnVlLAogICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICBmaWxlQ291bGROb3RCZVJlYWQ6IGlzUmV0cnkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIzOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE4OwogICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgxKTsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0My50MCk7CiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICByZXN1bHRzOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBsb2FkZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICBmaWxlQ291bGROb3RCZVJlYWQ6IHRydWUsCiAgICAgICAgICAgICAgICBzZXJ2ZXJFcnJvck1lc3NhZ2U6IF9jb250ZXh0My50MC5tZXNzYWdlCiAgICAgICAgICAgICAgfSk7IC8vIGFzIGxvbmcgYXMgdGhlIHByZXZpb3VzIG92ZXJyaWRlcyBhcmUgZGlmZmVyZW50IHRvIHRoZSBjdXJyZW50IG92ZXJyaWRlcywKICAgICAgICAgICAgICAvLyByZWxvYWQgdGhlIHJlc3VsdHMgd2l0aCB0aGUgcHJldmlvdXMgb3ZlcnJpZGVzCgogICAgICAgICAgICAgIGlmIChvdmVycmlkZXMgIT09IHVuZGVmaW5lZCAmJiAoMCwgX2xvZGFzaC5pc0VxdWFsKSh0aGlzLnByZXZpb3VzT3ZlcnJpZGVzLCBvdmVycmlkZXMpID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgICAgICAgICAgICAgIGxvYWRlZDogZmFsc2UKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkU2V0dGluZ3MoZGF0YSwgdGhpcy5wcmV2aW91c092ZXJyaWRlcywgdHJ1ZSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMsIFtbMSwgMThdXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIGxvYWRpbmcgPSBfdGhpcyRzdGF0ZS5sb2FkaW5nLAogICAgICAgICAgbG9hZGVkID0gX3RoaXMkc3RhdGUubG9hZGVkLAogICAgICAgICAgcmVzdWx0cyA9IF90aGlzJHN0YXRlLnJlc3VsdHMsCiAgICAgICAgICBmaWxlQ29udGVudHMgPSBfdGhpcyRzdGF0ZS5maWxlQ29udGVudHMsCiAgICAgICAgICBmaWxlU2l6ZSA9IF90aGlzJHN0YXRlLmZpbGVTaXplLAogICAgICAgICAgZmlsZVRvb0xhcmdlID0gX3RoaXMkc3RhdGUuZmlsZVRvb0xhcmdlLAogICAgICAgICAgZmlsZUNvdWxkTm90QmVSZWFkID0gX3RoaXMkc3RhdGUuZmlsZUNvdWxkTm90QmVSZWFkLAogICAgICAgICAgc2VydmVyRXJyb3JNZXNzYWdlID0gX3RoaXMkc3RhdGUuc2VydmVyRXJyb3JNZXNzYWdlLAogICAgICAgICAgbW9kZSA9IF90aGlzJHN0YXRlLm1vZGUsCiAgICAgICAgICBpc0VkaXRGbHlvdXRWaXNpYmxlID0gX3RoaXMkc3RhdGUuaXNFZGl0Rmx5b3V0VmlzaWJsZSwKICAgICAgICAgIGJvdHRvbUJhclZpc2libGUgPSBfdGhpcyRzdGF0ZS5ib3R0b21CYXJWaXNpYmxlLAogICAgICAgICAgaGFzUGVybWlzc2lvblRvSW1wb3J0ID0gX3RoaXMkc3RhdGUuaGFzUGVybWlzc2lvblRvSW1wb3J0OwogICAgICB2YXIgZmllbGRzID0gcmVzdWx0cyAhPT0gdW5kZWZpbmVkICYmIHJlc3VsdHMuZmllbGRfc3RhdHMgIT09IHVuZGVmaW5lZCA/IE9iamVjdC5rZXlzKHJlc3VsdHMuZmllbGRfc3RhdHMpIDogW107CiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogImZpbGUtZGF0YXZpc3VhbGl6ZXJfX2NvbnRlbnQiCiAgICAgIH0sIG1vZGUgPT09IF9jb25zdGFudHMuTU9ERS5SRUFEICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgIWxvYWRpbmcgJiYgIWxvYWRlZCAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfYWJvdXRfcGFuZWwuQWJvdXRQYW5lbCwgewogICAgICAgIG9uRmlsZVBpY2tlckNoYW5nZTogdGhpcy5vbkZpbGVQaWNrZXJDaGFuZ2UKICAgICAgfSksIGxvYWRpbmcgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2Fib3V0X3BhbmVsLkxvYWRpbmdQYW5lbCwgbnVsbCksIGZpbGVUb29MYXJnZSAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZmlsZV9lcnJvcl9jYWxsb3V0cy5GaWxlVG9vTGFyZ2UsIHsKICAgICAgICBmaWxlU2l6ZTogZmlsZVNpemUsCiAgICAgICAgbWF4RmlsZVNpemU6IF9maWxlX2RhdGF2aXN1YWxpemVyLk1BWF9CWVRFUwogICAgICB9KSwgZmlsZUNvdWxkTm90QmVSZWFkICYmIGxvYWRpbmcgPT09IGZhbHNlICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2ZpbGVfZXJyb3JfY2FsbG91dHMuRmlsZUNvdWxkTm90QmVSZWFkLCB7CiAgICAgICAgZXJyb3I6IHNlcnZlckVycm9yTWVzc2FnZSwKICAgICAgICBsb2FkZWQ6IGxvYWRlZAogICAgICB9KSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgICAgICBzaXplOiAibCIKICAgICAgfSkpLCBsb2FkZWQgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3Jlc3VsdHNfdmlldy5SZXN1bHRzVmlldywgewogICAgICAgIHJlc3VsdHM6IHJlc3VsdHMsCiAgICAgICAgZGF0YTogZmlsZUNvbnRlbnRzLAogICAgICAgIHNob3dFZGl0Rmx5b3V0OiBmdW5jdGlvbiBzaG93RWRpdEZseW91dCgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczMuc2hvd0VkaXRGbHlvdXQoKTsKICAgICAgICB9CiAgICAgIH0pLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZWRpdF9mbHlvdXQuRWRpdEZseW91dCwgewogICAgICAgIHNldE92ZXJyaWRlczogdGhpcy5zZXRPdmVycmlkZXMsCiAgICAgICAgY2xvc2VFZGl0Rmx5b3V0OiB0aGlzLmNsb3NlRWRpdEZseW91dCwKICAgICAgICBpc0ZseW91dFZpc2libGU6IGlzRWRpdEZseW91dFZpc2libGUsCiAgICAgICAgb3JpZ2luYWxTZXR0aW5nczogdGhpcy5vcmlnaW5hbFNldHRpbmdzLAogICAgICAgIG92ZXJyaWRlczogdGhpcy5vdmVycmlkZXMsCiAgICAgICAgZmllbGRzOiBmaWVsZHMKICAgICAgfSksIGJvdHRvbUJhclZpc2libGUgJiYgbG9hZGVkICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ib3R0b21fYmFyLkJvdHRvbUJhciwgewogICAgICAgIG1vZGU6IF9jb25zdGFudHMuTU9ERS5SRUFELAogICAgICAgIG9uQ2hhbmdlTW9kZTogdGhpcy5jaGFuZ2VNb2RlLAogICAgICAgIG9uQ2FuY2VsOiB0aGlzLm9uQ2FuY2VsLAogICAgICAgIGRpc2FibGVJbXBvcnQ6IGhhc1Blcm1pc3Npb25Ub0ltcG9ydCA9PT0gZmFsc2UKICAgICAgfSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEJvdHRvbVBhZGRpbmcsIG51bGwpKSwgbW9kZSA9PT0gX2NvbnN0YW50cy5NT0RFLklNUE9SVCAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9pbXBvcnRfdmlldy5JbXBvcnRWaWV3LCB7CiAgICAgICAgcmVzdWx0czogcmVzdWx0cywKICAgICAgICBmaWxlQ29udGVudHM6IGZpbGVDb250ZW50cywKICAgICAgICBmaWxlU2l6ZTogZmlsZVNpemUsCiAgICAgICAgaW5kZXhQYXR0ZXJuczogdGhpcy5wcm9wcy5pbmRleFBhdHRlcm5zLAogICAgICAgIGtpYmFuYUNvbmZpZzogdGhpcy5wcm9wcy5raWJhbmFDb25maWcsCiAgICAgICAgc2hvd0JvdHRvbUJhcjogdGhpcy5zaG93Qm90dG9tQmFyLAogICAgICAgIGhpZGVCb3R0b21CYXI6IHRoaXMuaGlkZUJvdHRvbUJhcgogICAgICB9KSwgYm90dG9tQmFyVmlzaWJsZSAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfYm90dG9tX2Jhci5Cb3R0b21CYXIsIHsKICAgICAgICBtb2RlOiBfY29uc3RhbnRzLk1PREUuSU1QT1JULAogICAgICAgIG9uQ2hhbmdlTW9kZTogdGhpcy5jaGFuZ2VNb2RlLAogICAgICAgIG9uQ2FuY2VsOiB0aGlzLm9uQ2FuY2VsCiAgICAgIH0pLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChCb3R0b21QYWRkaW5nLCBudWxsKSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEZpbGVEYXRhVmlzdWFsaXplclZpZXc7Cn0oX3JlYWN0Mi5Db21wb25lbnQpOwoKZXhwb3J0cy5GaWxlRGF0YVZpc3VhbGl6ZXJWaWV3ID0gRmlsZURhdGFWaXN1YWxpemVyVmlldzsKCmZ1bmN0aW9uIEJvdHRvbVBhZGRpbmcoKSB7CiAgLy8gcGFkZGluZyBmb3IgdGhlIEJvdHRvbUJhcgogIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICBzaXplOiAibSIKICB9KSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgIHNpemU6ICJsIgogIH0pLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgc2l6ZTogImwiCiAgfSkpOwp9"},null]}