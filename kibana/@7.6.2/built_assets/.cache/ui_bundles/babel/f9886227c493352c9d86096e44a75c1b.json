{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/file_upload/public/components/json_index_file_picker.js","dependencies":[{"path":"x-pack/legacy/plugins/file_upload/public/components/json_index_file_picker.js","mtime":1585205044181},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkpzb25JbmRleEZpbGVQaWNrZXIgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9maWxlX3BhcnNlciA9IHJlcXVpcmUoIi4uL3V0aWwvZmlsZV9wYXJzZXIiKTsKCnZhciBfZmlsZV9pbXBvcnQgPSByZXF1aXJlKCIuLi8uLi9jb21tb24vY29uc3RhbnRzL2ZpbGVfaW1wb3J0Iik7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307IGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9Cgp2YXIgQUNDRVBUQUJMRV9GSUxFVFlQRVMgPSBbJ2pzb24nLCAnZ2VvanNvbiddOwp2YXIgYWNjZXB0ZWRGaWxlVHlwZVN0cmluZyA9IEFDQ0VQVEFCTEVfRklMRVRZUEVTLm1hcChmdW5jdGlvbiAodHlwZSkgewogIHJldHVybiAiLiIuY29uY2F0KHR5cGUpOwp9KS5qb2luKCcsJyk7CnZhciBhY2NlcHRlZEZpbGVUeXBlU3RyaW5nTWVzc2FnZSA9IEFDQ0VQVEFCTEVfRklMRVRZUEVTLm1hcChmdW5jdGlvbiAodHlwZSkgewogIHJldHVybiAiLiIuY29uY2F0KHR5cGUpOwp9KS5qb2luKCcsICcpOwoKdmFyIEpzb25JbmRleEZpbGVQaWNrZXIgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKEpzb25JbmRleEZpbGVQaWNrZXIsIF9Db21wb25lbnQpOwoKICBmdW5jdGlvbiBKc29uSW5kZXhGaWxlUGlja2VyKCkgewogICAgdmFyIF9nZXRQcm90b3R5cGVPZjI7CgogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBKc29uSW5kZXhGaWxlUGlja2VyKTsKCiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfZ2V0UHJvdG90eXBlT2YyID0gX2dldFByb3RvdHlwZU9mKEpzb25JbmRleEZpbGVQaWNrZXIpKS5jYWxsLmFwcGx5KF9nZXRQcm90b3R5cGVPZjIsIFt0aGlzXS5jb25jYXQoYXJncykpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzdGF0ZSIsIHsKICAgICAgZmlsZVVwbG9hZEVycm9yOiAnJywKICAgICAgcGVyY2VudGFnZVByb2Nlc3NlZDogMCwKICAgICAgZmVhdHVyZXNQcm9jZXNzZWQ6IDAsCiAgICAgIGZpbGVQYXJzZUFjdGl2ZTogZmFsc2UsCiAgICAgIGN1cnJlbnRGaWxlVHJhY2tlcjogbnVsbAogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0RmlsZVBhcnNlQWN0aXZlIiwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3RoaXMuX2lzTW91bnRlZCAmJiBfdGhpcy5zdGF0ZS5maWxlUGFyc2VBY3RpdmU7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfZmlsZUhhbmRsZXIiLCBmdW5jdGlvbiAoZmlsZUxpc3QpIHsKICAgICAgdmFyIGZpbGVBcnIgPSBBcnJheS5mcm9tKGZpbGVMaXN0KTsKCiAgICAgIF90aGlzLnByb3BzLnJlc2V0RmlsZUFuZEluZGV4U2V0dGluZ3MoKTsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBmaWxlVXBsb2FkRXJyb3I6ICcnLAogICAgICAgIHBlcmNlbnRhZ2VQcm9jZXNzZWQ6IDAsCiAgICAgICAgZmVhdHVyZXNQcm9jZXNzZWQ6IDAKICAgICAgfSk7CgogICAgICBpZiAoZmlsZUFyci5sZW5ndGggPT09IDApIHsKICAgICAgICAvLyBSZW1vdmUKICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBmaWxlUGFyc2VBY3RpdmU6IGZhbHNlCiAgICAgICAgfSk7CgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGZpbGUgPSBmaWxlQXJyWzBdOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGZpbGVQYXJzZUFjdGl2ZTogdHJ1ZSwKICAgICAgICBjdXJyZW50RmlsZVRyYWNrZXI6IFN5bWJvbCgpCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuX3BhcnNlRmlsZShmaWxlKTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfY2hlY2tGaWxlU2l6ZSIsIGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBzaXplID0gX3JlZi5zaXplOwogICAgICB2YXIgZmlsZVNpemVWYWxpZCA9IHRydWU7CgogICAgICB0cnkgewogICAgICAgIGlmIChzaXplID4gX2ZpbGVfaW1wb3J0Lk1BWF9GSUxFX1NJWkUpIHsKICAgICAgICAgIHZhciBodW1hblJlYWRhYmxlU2l6ZSA9IGJ5dGVzVG9TaXplKHNpemUpOwogICAgICAgICAgdmFyIGh1bWFuUmVhZGFibGVNYXhTaXplID0gYnl0ZXNUb1NpemUoX2ZpbGVfaW1wb3J0Lk1BWF9GSUxFX1NJWkUpOwogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5maWxlVXBsb2FkLmpzb25JbmRleEZpbGVQaWNrZXIuYWNjZXB0YWJsZUZpbGVTaXplJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ZpbGUgc2l6ZSB7ZmlsZVNpemV9IGV4Y2VlZHMgbWF4IGZpbGUgc2l6ZSBvZiB7bWF4RmlsZVNpemV9JywKICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgZmlsZVNpemU6IGh1bWFuUmVhZGFibGVTaXplLAogICAgICAgICAgICAgIG1heEZpbGVTaXplOiBodW1hblJlYWRhYmxlTWF4U2l6ZQogICAgICAgICAgICB9CiAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGZpbGVVcGxvYWRFcnJvcjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmZpbGVVcGxvYWQuanNvbkluZGV4RmlsZVBpY2tlci5maWxlU2l6ZUVycm9yJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ZpbGUgc2l6ZSBlcnJvcjoge2Vycm9yTWVzc2FnZX0nLAogICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXR1cm4gZmlsZVNpemVWYWxpZDsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNldEZpbGVQcm9ncmVzcyIsIF9sb2Rhc2guZGVmYXVsdC5kZWJvdW5jZShmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgdmFyIGZlYXR1cmVzUHJvY2Vzc2VkID0gX3JlZjIuZmVhdHVyZXNQcm9jZXNzZWQsCiAgICAgICAgICBieXRlc1Byb2Nlc3NlZCA9IF9yZWYyLmJ5dGVzUHJvY2Vzc2VkLAogICAgICAgICAgdG90YWxCeXRlcyA9IF9yZWYyLnRvdGFsQnl0ZXM7CiAgICAgIHZhciBwZXJjZW50YWdlUHJvY2Vzc2VkID0gcGFyc2VJbnQoMTAwICogYnl0ZXNQcm9jZXNzZWQgLyB0b3RhbEJ5dGVzKTsKCiAgICAgIGlmIChfdGhpcy5nZXRGaWxlUGFyc2VBY3RpdmUoKSkgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGZlYXR1cmVzUHJvY2Vzc2VkOiBmZWF0dXJlc1Byb2Nlc3NlZCwKICAgICAgICAgIHBlcmNlbnRhZ2VQcm9jZXNzZWQ6IHBlcmNlbnRhZ2VQcm9jZXNzZWQKICAgICAgICB9KTsKICAgICAgfQogICAgfSwgMTUwKSk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEpzb25JbmRleEZpbGVQaWNrZXIsIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHRoaXMuX2lzTW91bnRlZCA9IHRydWU7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgdGhpcy5faXNNb3VudGVkID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2dldEZpbGVOYW1lQW5kQ2hlY2tUeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0RmlsZU5hbWVBbmRDaGVja1R5cGUoX3JlZjMpIHsKICAgICAgdmFyIG5hbWUgPSBfcmVmMy5uYW1lOwogICAgICB2YXIgZmlsZU5hbWVPbmx5OwoKICAgICAgdHJ5IHsKICAgICAgICBpZiAoIW5hbWUpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suZmlsZVVwbG9hZC5qc29uSW5kZXhGaWxlUGlja2VyLm5vRmlsZU5hbWVFcnJvcicsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdObyBmaWxlIG5hbWUgcHJvdmlkZWQnCiAgICAgICAgICB9KSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgc3BsaXROYW1lQXJyID0gbmFtZS5zcGxpdCgnLicpOwogICAgICAgIHZhciBmaWxlVHlwZSA9IHNwbGl0TmFtZUFyci5wb3AoKTsKCiAgICAgICAgaWYgKCFBQ0NFUFRBQkxFX0ZJTEVUWVBFUy5pbmNsdWRlcyhmaWxlVHlwZSkpIHsKICAgICAgICAgIC8vc2hvdWxkIG9ubHkgb2NjdXIgaWYgYnJvd3NlciBkb2VzIG5vdCBhY2NlcHQgdGhlIDxGaWxlPiBhY2NlcHQgcGFyYW1ldGVyCiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmZpbGVVcGxvYWQuanNvbkluZGV4RmlsZVBpY2tlci5hY2NlcHRhYmxlVHlwZXNFcnJvcicsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdGaWxlIGlzIG5vdCBvbmUgb2YgYWNjZXB0YWJsZSB0eXBlczoge3R5cGVzfScsCiAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgIHR5cGVzOiBBQ0NFUFRBQkxFX0ZJTEVUWVBFUy5qb2luKCcsICcpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKTsKICAgICAgICB9CgogICAgICAgIGZpbGVOYW1lT25seSA9IHNwbGl0TmFtZUFyclswXTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGZpbGVVcGxvYWRFcnJvcjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmZpbGVVcGxvYWQuanNvbkluZGV4RmlsZVBpY2tlci5maWxlUHJvY2Vzc2luZ0Vycm9yJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ZpbGUgcHJvY2Vzc2luZyBlcnJvcjoge2Vycm9yTWVzc2FnZX0nLAogICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHJldHVybiBmaWxlTmFtZU9ubHkudG9Mb3dlckNhc2UoKTsKICAgIH0gLy8gSXQncyBuZWNlc3NhcnkgdG8gdGhyb3R0bGUgcHJvZ3Jlc3MuIFVwZGF0ZXMgdGhhdCBhcmUgdG9vIGZyZXF1ZW50IGNhdXNlCiAgICAvLyBpc3N1ZXMgKHVwZGF0ZSBmYWlsdXJlKSBpbiB0aGUgbmVzdGVkIHByb2dyZXNzIGNvbXBvbmVudAoKICB9LCB7CiAgICBrZXk6ICJfcGFyc2VGaWxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcGFyc2VGaWxlKGZpbGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgY3VycmVudEZpbGVUcmFja2VyLCBfdGhpcyRwcm9wcywgc2V0RmlsZVJlZiwgc2V0UGFyc2VkRmlsZSwgcmVzZXRGaWxlQW5kSW5kZXhTZXR0aW5ncywgb25GaWxlVXBsb2FkLCB0cmFuc2Zvcm1EZXRhaWxzLCBzZXRJbmRleE5hbWUsIGZpbGVTaXplVmFsaWQsIGRlZmF1bHRJbmRleE5hbWUsIGZpbGVSZXN1bHQsIGVycm9ycywgcGFyc2VkR2VvanNvbiwgZXJyb3I7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIF9wYXJzZUZpbGUkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGN1cnJlbnRGaWxlVHJhY2tlciA9IHRoaXMuc3RhdGUuY3VycmVudEZpbGVUcmFja2VyOwogICAgICAgICAgICAgIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcywgc2V0RmlsZVJlZiA9IF90aGlzJHByb3BzLnNldEZpbGVSZWYsIHNldFBhcnNlZEZpbGUgPSBfdGhpcyRwcm9wcy5zZXRQYXJzZWRGaWxlLCByZXNldEZpbGVBbmRJbmRleFNldHRpbmdzID0gX3RoaXMkcHJvcHMucmVzZXRGaWxlQW5kSW5kZXhTZXR0aW5ncywgb25GaWxlVXBsb2FkID0gX3RoaXMkcHJvcHMub25GaWxlVXBsb2FkLCB0cmFuc2Zvcm1EZXRhaWxzID0gX3RoaXMkcHJvcHMudHJhbnNmb3JtRGV0YWlscywgc2V0SW5kZXhOYW1lID0gX3RoaXMkcHJvcHMuc2V0SW5kZXhOYW1lOwogICAgICAgICAgICAgIGZpbGVTaXplVmFsaWQgPSB0aGlzLl9jaGVja0ZpbGVTaXplKGZpbGUpOwogICAgICAgICAgICAgIGRlZmF1bHRJbmRleE5hbWUgPSB0aGlzLl9nZXRGaWxlTmFtZUFuZENoZWNrVHlwZShmaWxlKTsKCiAgICAgICAgICAgICAgaWYgKCEoIWZpbGVTaXplVmFsaWQgfHwgIWRlZmF1bHRJbmRleE5hbWUpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJlc2V0RmlsZUFuZEluZGV4U2V0dGluZ3MoKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoKDAsIF9maWxlX3BhcnNlci5wYXJzZUZpbGUpKHsKICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUsCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1EZXRhaWxzOiB0cmFuc2Zvcm1EZXRhaWxzLAogICAgICAgICAgICAgICAgb25GaWxlVXBsb2FkOiBvbkZpbGVVcGxvYWQsCiAgICAgICAgICAgICAgICBzZXRGaWxlUHJvZ3Jlc3M6IHRoaXMuc2V0RmlsZVByb2dyZXNzLAogICAgICAgICAgICAgICAgZ2V0RmlsZVBhcnNlQWN0aXZlOiB0aGlzLmdldEZpbGVQYXJzZUFjdGl2ZQogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIGlmIChfdGhpczIuX2lzTW91bnRlZCkgewogICAgICAgICAgICAgICAgICBfdGhpczIuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgIGZpbGVQYXJzZUFjdGl2ZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZVByb2Nlc3NlZDogMCwKICAgICAgICAgICAgICAgICAgICBmZWF0dXJlc1Byb2Nlc3NlZDogMCwKICAgICAgICAgICAgICAgICAgICBmaWxlVXBsb2FkRXJyb3I6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgICAgICAgICBpZDogInhwYWNrLmZpbGVVcGxvYWQuanNvbkluZGV4RmlsZVBpY2tlci51bmFibGVQYXJzZUZpbGUiLAogICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJVbmFibGUgdG8gcGFyc2UgZmlsZToge2Vycm9yfSIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVyci5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGZpbGVSZXN1bHQgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzTW91bnRlZCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAvLyBJZiBhbm90aGVyIGZpbGUgaXMgcmVwbGFjaW5nIHRoaXMgb25lLCBsZWF2ZSBmaWxlIHBhcnNlIGFjdGl2ZQogICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgcGVyY2VudGFnZVByb2Nlc3NlZDogMCwKICAgICAgICAgICAgICAgIGZlYXR1cmVzUHJvY2Vzc2VkOiAwLAogICAgICAgICAgICAgICAgZmlsZVBhcnNlQWN0aXZlOiBjdXJyZW50RmlsZVRyYWNrZXIgIT09IHRoaXMuc3RhdGUuY3VycmVudEZpbGVUcmFja2VyCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGlmIChmaWxlUmVzdWx0KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXNldEZpbGVBbmRJbmRleFNldHRpbmdzKCk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBlcnJvcnMgPSBmaWxlUmVzdWx0LmVycm9ycywgcGFyc2VkR2VvanNvbiA9IGZpbGVSZXN1bHQucGFyc2VkR2VvanNvbjsKCiAgICAgICAgICAgICAgaWYgKGVycm9ycy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIC8vIFNldCBvbmx5IHRoZSBmaXJzdCBlcnJvciBmb3Igbm93IChzaW5jZSB0aGVyZSdzIG9ubHkgb25lKS4KICAgICAgICAgICAgICAgIC8vIFRPRE86IEFkZCBoYW5kbGluZyBpbiBjYXNlIG9mIGZ1cnRoZXIgZXJyb3JzCiAgICAgICAgICAgICAgICBlcnJvciA9IGVycm9yc1swXTsKICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBmaWxlVXBsb2FkRXJyb3I6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgICAgICAgaWQ6ICJ4cGFjay5maWxlVXBsb2FkLmpzb25JbmRleEZpbGVQaWNrZXIuZmlsZVBhcnNlRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRmlsZSBwYXJzZSBlcnJvcihzKSBkZXRlY3RlZDoge2Vycm9yfSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHNldEluZGV4TmFtZShkZWZhdWx0SW5kZXhOYW1lKTsKICAgICAgICAgICAgICBzZXRGaWxlUmVmKGZpbGUpOwogICAgICAgICAgICAgIHNldFBhcnNlZEZpbGUocGFyc2VkR2VvanNvbik7CgogICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IHRoaXMuc3RhdGUsCiAgICAgICAgICBmaWxlVXBsb2FkRXJyb3IgPSBfdGhpcyRzdGF0ZS5maWxlVXBsb2FkRXJyb3IsCiAgICAgICAgICBwZXJjZW50YWdlUHJvY2Vzc2VkID0gX3RoaXMkc3RhdGUucGVyY2VudGFnZVByb2Nlc3NlZCwKICAgICAgICAgIGZlYXR1cmVzUHJvY2Vzc2VkID0gX3RoaXMkc3RhdGUuZmVhdHVyZXNQcm9jZXNzZWQ7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgcGVyY2VudGFnZVByb2Nlc3NlZCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQcm9ncmVzcywgewogICAgICAgIHZhbHVlOiBwZXJjZW50YWdlUHJvY2Vzc2VkLAogICAgICAgIG1heDogMTAwLAogICAgICAgIHNpemU6ICJ4cyIsCiAgICAgICAgY29sb3I6ICJhY2NlbnQiLAogICAgICAgIHBvc2l0aW9uOiAiYWJzb2x1dGUiCiAgICAgIH0pIDogbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgICAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suZmlsZVVwbG9hZC5qc29uSW5kZXhGaWxlUGlja2VyLmZpbGVQaWNrZXJMYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNlbGVjdCBhIGZpbGUgdG8gdXBsb2FkIgogICAgICAgIH0pLAogICAgICAgIGlzSW52YWxpZDogZmlsZVVwbG9hZEVycm9yICE9PSAnJywKICAgICAgICBlcnJvcjogW2ZpbGVVcGxvYWRFcnJvcl0sCiAgICAgICAgaGVscFRleHQ6IHBlcmNlbnRhZ2VQcm9jZXNzZWQgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suZmlsZVVwbG9hZC5qc29uSW5kZXhGaWxlUGlja2VyLnBhcnNpbmdGaWxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICd7ZmVhdHVyZXNQcm9jZXNzZWR9IGZlYXR1cmVzIHBhcnNlZC4uLicsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgZmVhdHVyZXNQcm9jZXNzZWQ6IGZlYXR1cmVzUHJvY2Vzc2VkCiAgICAgICAgICB9CiAgICAgICAgfSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmZpbGVVcGxvYWQuanNvbkluZGV4RmlsZVBpY2tlci5mb3JtYXRzQWNjZXB0ZWQnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0Zvcm1hdHMgYWNjZXB0ZWQ6IHthY2NlcHRlZEZpbGVUeXBlU3RyaW5nTWVzc2FnZX0nLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGFjY2VwdGVkRmlsZVR5cGVTdHJpbmdNZXNzYWdlOiBhY2NlcHRlZEZpbGVUeXBlU3RyaW5nTWVzc2FnZQogICAgICAgICAgfQogICAgICAgIH0pLCAnICcsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImJyIiwgbnVsbCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLmZpbGVVcGxvYWQuanNvbkluZGV4RmlsZVBpY2tlci5tYXhTaXplIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTWF4IHNpemU6IHttYXhGaWxlU2l6ZX0iLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIG1heEZpbGVTaXplOiBieXRlc1RvU2l6ZShfZmlsZV9pbXBvcnQuTUFYX0ZJTEVfU0laRSkKICAgICAgICAgIH0KICAgICAgICB9KSkKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpbGVQaWNrZXIsIHsKICAgICAgICBpbml0aWFsUHJvbXB0VGV4dDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suZmlsZVVwbG9hZC5qc29uSW5kZXhGaWxlUGlja2VyLmZpbGVQaWNrZXIiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJVcGxvYWQgZmlsZSIKICAgICAgICB9KSwKICAgICAgICBvbkNoYW5nZTogdGhpcy5fZmlsZUhhbmRsZXIsCiAgICAgICAgYWNjZXB0OiBhY2NlcHRlZEZpbGVUeXBlU3RyaW5nCiAgICAgIH0pKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSnNvbkluZGV4RmlsZVBpY2tlcjsKfShfcmVhY3QuQ29tcG9uZW50KTsKCmV4cG9ydHMuSnNvbkluZGV4RmlsZVBpY2tlciA9IEpzb25JbmRleEZpbGVQaWNrZXI7CgpmdW5jdGlvbiBieXRlc1RvU2l6ZShieXRlcykgewogIHZhciBzaXplcyA9IFsnQnl0ZXMnLCAnS0InLCAnTUInLCAnR0InLCAnVEInXTsKICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnbi9hJzsKICB2YXIgaSA9IHBhcnNlSW50KE1hdGguZmxvb3IoTWF0aC5sb2coYnl0ZXMpIC8gTWF0aC5sb2coMTAyNCkpLCAxMCk7CiAgaWYgKGkgPT09IDApIHJldHVybiAiIi5jb25jYXQoYnl0ZXMsICIgIikuY29uY2F0KHNpemVzW2ldLCAiKSIpOwogIHJldHVybiAiIi5jb25jYXQoKGJ5dGVzIC8gTWF0aC5wb3coMTAyNCwgaSkpLnRvRml4ZWQoMSksICIgIikuY29uY2F0KHNpemVzW2ldKTsKfQ=="},null]}