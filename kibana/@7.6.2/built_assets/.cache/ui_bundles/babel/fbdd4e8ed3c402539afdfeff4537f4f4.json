{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/vis_type_vega/public/data_model/es_query_parser.js","dependencies":[{"path":"src/legacy/core_plugins/vis_type_vega/public/data_model/es_query_parser.js","mtime":1585205040483},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1585205104179},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1585205115915},{"path":"node_modules/babel-loader/lib/index.js","mtime":1585205080825}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkVzUXVlcnlQYXJzZXIgPSB2b2lkIDA7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9tb21lbnQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm1vbWVudCIpKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9oZWxwZXJzID0gcmVxdWlyZSgiLi4vaGVscGVycyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOyB2YXIga2V5LCBpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSB7fTsgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOyB2YXIga2V5LCBpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIFRJTUVGSUxURVIgPSAnJXRpbWVmaWx0ZXIlJzsKdmFyIEFVVE9JTlRFUlZBTCA9ICclYXV0b2ludGVydmFsJSc7CnZhciBNVVNUX0NMQVVTRSA9ICclZGFzaGJvYXJkX2NvbnRleHQtbXVzdF9jbGF1c2UlJzsKdmFyIE1VU1RfTk9UX0NMQVVTRSA9ICclZGFzaGJvYXJkX2NvbnRleHQtbXVzdF9ub3RfY2xhdXNlJSc7IC8vIFRoZXNlIHZhbHVlcyBtYXkgYXBwZWFyIGluIHRoZSAgJ3VybCc6IHsgLi4uIH0gIG9iamVjdAoKdmFyIExFR0FDWV9DT05URVhUID0gJyVjb250ZXh0X3F1ZXJ5JSc7CnZhciBDT05URVhUID0gJyVjb250ZXh0JSc7CnZhciBUSU1FRklFTEQgPSAnJXRpbWVmaWVsZCUnOwovKioKICogVGhpcyBjbGFzcyBwYXJzZXMgRVMgcmVxdWVzdHMgc3BlY2lmaWVkIGluIHRoZSBkYXRhLnVybCBvYmplY3RzLgogKi8KCnZhciBFc1F1ZXJ5UGFyc2VyID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRXNRdWVyeVBhcnNlcih0aW1lQ2FjaGUsIHNlYXJjaENhY2hlLCBmaWx0ZXJzLCBvbldhcm5pbmcpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVzUXVlcnlQYXJzZXIpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibWFwUmVxdWVzdCIsIGZ1bmN0aW9uIChyZXF1ZXN0KSB7CiAgICAgIHZhciBlc1JlcXVlc3QgPSByZXF1ZXN0LnVybDsKCiAgICAgIGlmIChfdGhpcy5fZXNTaGFyZFRpbWVvdXQpIHsKICAgICAgICAvLyByZW1vdmUgcG9zc2libGUgdGltZW91dCBxdWVyeSBwYXJhbSB0byBwcmV2ZW50IHR3byBjb25mbGljdGluZyB0aW1lb3V0IHBhcmFtZXRlcnMKICAgICAgICB2YXIgX2VzUmVxdWVzdCRib2R5ID0gZXNSZXF1ZXN0LmJvZHksCiAgICAgICAgICAgIGJvZHkgPSBfZXNSZXF1ZXN0JGJvZHkgPT09IHZvaWQgMCA/IHt9IDogX2VzUmVxdWVzdCRib2R5LAogICAgICAgICAgICB0aW1lb3V0ID0gZXNSZXF1ZXN0LnRpbWVvdXQsCiAgICAgICAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoZXNSZXF1ZXN0LCBbImJvZHkiLCAidGltZW91dCJdKTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCgoKICAgICAgICBib2R5LnRpbWVvdXQgPSAiIi5jb25jYXQoX3RoaXMuX2VzU2hhcmRUaW1lb3V0LCAibXMiKTsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7CiAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgfSwgcmVzdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGVzUmVxdWVzdDsKICAgICAgfQogICAgfSk7CgogICAgdGhpcy5fdGltZUNhY2hlID0gdGltZUNhY2hlOwogICAgdGhpcy5fc2VhcmNoQ2FjaGUgPSBzZWFyY2hDYWNoZTsKICAgIHRoaXMuX2ZpbHRlcnMgPSBmaWx0ZXJzOwogICAgdGhpcy5fb25XYXJuaW5nID0gb25XYXJuaW5nOwogICAgdGhpcy5fZXNTaGFyZFRpbWVvdXQgPSAoMCwgX2hlbHBlcnMuZ2V0RXNTaGFyZFRpbWVvdXQpKCk7CiAgfSAvLyBub2luc3BlY3Rpb24gSlNNZXRob2RDYW5CZVN0YXRpYwoKICAvKioKICAgKiBVcGRhdGUgcmVxdWVzdCBvYmplY3QsIGV4cGFuZGluZyBhbnkgY29udGV4dC1hd2FyZSBrZXl3b3JkcwogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKEVzUXVlcnlQYXJzZXIsIFt7CiAgICBrZXk6ICJwYXJzZVVybCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VVcmwoZGF0YU9iamVjdCwgdXJsKSB7CiAgICAgIHZhciBib2R5ID0gdXJsLmJvZHk7CiAgICAgIHZhciBjb250ZXh0ID0gdXJsW0NPTlRFWFRdOwogICAgICBkZWxldGUgdXJsW0NPTlRFWFRdOwogICAgICB2YXIgdGltZWZpZWxkID0gdXJsW1RJTUVGSUVMRF07CiAgICAgIGRlbGV0ZSB1cmxbVElNRUZJRUxEXTsKICAgICAgdmFyIHVzZXNDb250ZXh0ID0gY29udGV4dCAhPT0gdW5kZWZpbmVkIHx8IHRpbWVmaWVsZCAhPT0gdW5kZWZpbmVkOwoKICAgICAgaWYgKGJvZHkgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHVybC5ib2R5ID0gYm9keSA9IHt9OwogICAgICB9IGVsc2UgaWYgKCFfbG9kYXNoLmRlZmF1bHQuaXNQbGFpbk9iamVjdChib2R5KSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzVHlwZVZlZ2EuZXNRdWVyeVBhcnNlci51cmxCb2R5VmFsdWVUeXBlRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICd7Y29uZmlnTmFtZX0gbXVzdCBiZSBhbiBvYmplY3QnLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGNvbmZpZ05hbWU6ICd1cmwuYm9keScKICAgICAgICAgIH0KICAgICAgICB9KSk7CiAgICAgIH0gLy8gTWlncmF0ZSBsZWdhY3kgJWNvbnRleHRfcXVlcnklIGludG8gY29udGV4dCAmIHRpbWVmaWVsZCB2YWx1ZXMKCgogICAgICB2YXIgbGVnYWN5Q29udGV4dCA9IHVybFtMRUdBQ1lfQ09OVEVYVF07CiAgICAgIGRlbGV0ZSB1cmxbTEVHQUNZX0NPTlRFWFRdOwoKICAgICAgaWYgKGxlZ2FjeUNvbnRleHQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmIChib2R5LnF1ZXJ5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzVHlwZVZlZ2EuZXNRdWVyeVBhcnNlci5kYXRhVXJsTXVzdE5vdEhhdmVMZWdhY3lBbmRCb2R5UXVlcnlWYWx1ZXNBdFRoZVNhbWVUaW1lRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ3tkYXRhVXJsUGFyYW19IG11c3Qgbm90IGhhdmUgbGVnYWN5IHtsZWdhY3lDb250ZXh0fSBhbmQge2JvZHlRdWVyeUNvbmZpZ05hbWV9IHZhbHVlcyBhdCB0aGUgc2FtZSB0aW1lJywKICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgbGVnYWN5Q29udGV4dDogIlwiIi5jb25jYXQoTEVHQUNZX0NPTlRFWFQsICJcIiIpLAogICAgICAgICAgICAgIGJvZHlRdWVyeUNvbmZpZ05hbWU6ICciYm9keS5xdWVyeSInLAogICAgICAgICAgICAgIGRhdGFVcmxQYXJhbTogJyJkYXRhLnVybCInCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKTsKICAgICAgICB9IGVsc2UgaWYgKHVzZXNDb250ZXh0KSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3Zpc1R5cGVWZWdhLmVzUXVlcnlQYXJzZXIuZGF0YVVybE11c3ROb3RIYXZlTGVnYWN5Q29udGV4dFRvZ2V0aGVyV2l0aENvbnRleHRPclRpbWVmaWVsZEVycm9yTWVzc2FnZScsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICd7ZGF0YVVybFBhcmFtfSBtdXN0IG5vdCBoYXZlIHtsZWdhY3lDb250ZXh0fSB0b2dldGhlciB3aXRoIHtjb250ZXh0fSBvciB7dGltZWZpZWxkfScsCiAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgIGxlZ2FjeUNvbnRleHQ6ICJcIiIuY29uY2F0KExFR0FDWV9DT05URVhULCAiXCIiKSwKICAgICAgICAgICAgICBjb250ZXh0OiAiXCIiLmNvbmNhdChDT05URVhULCAiXCIiKSwKICAgICAgICAgICAgICB0aW1lZmllbGQ6ICJcIiIuY29uY2F0KFRJTUVGSUVMRCwgIlwiIiksCiAgICAgICAgICAgICAgZGF0YVVybFBhcmFtOiAnImRhdGEudXJsIicKICAgICAgICAgICAgfQogICAgICAgICAgfSkpOwogICAgICAgIH0gZWxzZSBpZiAobGVnYWN5Q29udGV4dCAhPT0gdHJ1ZSAmJiAodHlwZW9mIGxlZ2FjeUNvbnRleHQgIT09ICdzdHJpbmcnIHx8IGxlZ2FjeUNvbnRleHQubGVuZ3RoID09PSAwKSkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKF9pMThuLmkxOG4udHJhbnNsYXRlKCd2aXNUeXBlVmVnYS5lc1F1ZXJ5UGFyc2VyLmxlZ2FjeUNvbnRleHRDYW5CZVRydWVFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTGVnYWN5IHtsZWdhY3lDb250ZXh0fSBjYW4gZWl0aGVyIGJlIHt0cnVlVmFsdWV9IChpZ25vcmVzIHRpbWUgcmFuZ2UgcGlja2VyKSwgb3IgaXQgY2FuIGJlIHRoZSBuYW1lIG9mIHRoZSB0aW1lIGZpZWxkLCBlLmcuIHt0aW1lc3RhbXBQYXJhbX0nLAogICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICBsZWdhY3lDb250ZXh0OiAiXCIiLmNvbmNhdChMRUdBQ1lfQ09OVEVYVCwgIlwiIiksCiAgICAgICAgICAgICAgdHJ1ZVZhbHVlOiAndHJ1ZScsCiAgICAgICAgICAgICAgdGltZXN0YW1wUGFyYW06ICciQHRpbWVzdGFtcCInCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKTsKICAgICAgICB9CgogICAgICAgIHVzZXNDb250ZXh0ID0gdHJ1ZTsKICAgICAgICBjb250ZXh0ID0gdHJ1ZTsKICAgICAgICB2YXIgcmVzdWx0ID0gIlwidXJsXCI6IHtcIiIuY29uY2F0KENPTlRFWFQsICJcIjogdHJ1ZSIpOwoKICAgICAgICBpZiAodHlwZW9mIGxlZ2FjeUNvbnRleHQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICB0aW1lZmllbGQgPSBsZWdhY3lDb250ZXh0OwogICAgICAgICAgcmVzdWx0ICs9ICIsIFwiIi5jb25jYXQoVElNRUZJRUxELCAiXCI6ICIpLmNvbmNhdChKU09OLnN0cmluZ2lmeSh0aW1lZmllbGQpKTsKICAgICAgICB9CgogICAgICAgIHJlc3VsdCArPSAnfSc7CgogICAgICAgIHRoaXMuX29uV2FybmluZyhfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzVHlwZVZlZ2EuZXNRdWVyeVBhcnNlci5sZWdhY3lVcmxTaG91bGRDaGFuZ2VUb1dhcm5pbmdNZXNzYWdlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdMZWdhY3kge3VybFBhcmFtfToge2xlZ2FjeVVybH0gc2hvdWxkIGNoYW5nZSB0byB7cmVzdWx0fScsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgbGVnYWN5VXJsOiAiXCIiLmNvbmNhdChMRUdBQ1lfQ09OVEVYVCwgIlwiOiAiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkobGVnYWN5Q29udGV4dCkpLAogICAgICAgICAgICByZXN1bHQ6IHJlc3VsdCwKICAgICAgICAgICAgdXJsUGFyYW06ICcidXJsIicKICAgICAgICAgIH0KICAgICAgICB9KSk7CiAgICAgIH0KCiAgICAgIGlmIChib2R5LnF1ZXJ5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBpZiAodXNlc0NvbnRleHQpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzVHlwZVZlZ2EuZXNRdWVyeVBhcnNlci51cmxDb250ZXh0QW5kVXJsVGltZWZpZWxkTXVzdE5vdEJlVXNlZEVycm9yTWVzc2FnZScsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICd7dXJsQ29udGV4dH0gYW5kIHt0aW1lZmllbGR9IG11c3Qgbm90IGJlIHVzZWQgd2hlbiB7cXVlcnlQYXJhbX0gaXMgc2V0JywKICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgdGltZWZpZWxkOiAidXJsLiIuY29uY2F0KFRJTUVGSUVMRCksCiAgICAgICAgICAgICAgdXJsQ29udGV4dDogInVybC4iLmNvbmNhdChDT05URVhUKSwKICAgICAgICAgICAgICBxdWVyeVBhcmFtOiAndXJsLmJvZHkucXVlcnknCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuX2luamVjdENvbnRleHRWYXJzKGJvZHkucXVlcnksIHRydWUpOwogICAgICB9IGVsc2UgaWYgKHVzZXNDb250ZXh0KSB7CiAgICAgICAgaWYgKHRpbWVmaWVsZCkgewogICAgICAgICAgLy8gSW5qZWN0IHJhbmdlIGZpbHRlciBiYXNlZCBvbiB0aGUgdGltZWZpbHRlciB2YWx1ZXMKICAgICAgICAgIGJvZHkucXVlcnkgPSB7CiAgICAgICAgICAgIHJhbmdlOiBfZGVmaW5lUHJvcGVydHkoe30sIHRpbWVmaWVsZCwgdGhpcy5fY3JlYXRlUmFuZ2VGaWx0ZXIoX2RlZmluZVByb3BlcnR5KHt9LCBUSU1FRklMVEVSLCB0cnVlKSkpCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgaWYgKGNvbnRleHQpIHsKICAgICAgICAgIC8vIFVzZSBkYXNoYm9hcmQgY29udGV4dAogICAgICAgICAgdmFyIG5ld1F1ZXJ5ID0gX2xvZGFzaC5kZWZhdWx0LmNsb25lRGVlcCh0aGlzLl9maWx0ZXJzKTsKCiAgICAgICAgICBpZiAodGltZWZpZWxkKSB7CiAgICAgICAgICAgIG5ld1F1ZXJ5LmJvb2wubXVzdC5wdXNoKGJvZHkucXVlcnkpOwogICAgICAgICAgfQoKICAgICAgICAgIGJvZHkucXVlcnkgPSBuZXdRdWVyeTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuX2luamVjdENvbnRleHRWYXJzKGJvZHkuYWdncywgZmFsc2UpOwoKICAgICAgcmV0dXJuIHsKICAgICAgICBkYXRhT2JqZWN0OiBkYXRhT2JqZWN0LAogICAgICAgIHVybDogdXJsCiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAicG9wdWxhdGVEYXRhIiwKCiAgICAvKioKICAgICAqIFByb2Nlc3MgaXRlbXMgZ2VuZXJhdGVkIGJ5IHBhcnNlVXJsKCkKICAgICAqIEBwYXJhbSB7b2JqZWN0W119IHJlcXVlc3RzIGVhY2ggb2JqZWN0IGlzIGdlbmVyYXRlZCBieSBwYXJzZVVybCgpCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0KICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIHBvcHVsYXRlRGF0YShyZXF1ZXN0cykgewogICAgICB2YXIgZXNTZWFyY2hlcywgcmVzdWx0cywgX2k7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHBvcHVsYXRlRGF0YSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgZXNTZWFyY2hlcyA9IHJlcXVlc3RzLm1hcCh0aGlzLm1hcFJlcXVlc3QpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5fc2VhcmNoQ2FjaGUuc2VhcmNoKGVzU2VhcmNoZXMpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXN1bHRzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgZm9yIChfaSA9IDA7IF9pIDwgcmVxdWVzdHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICAgICAgICByZXF1ZXN0c1tfaV0uZGF0YU9iamVjdC52YWx1ZXMgPSByZXN1bHRzW19pXTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBNb2RpZnkgRVMgcmVxdWVzdCBieSBwcm9jZXNzaW5nIG1hZ2ljIGtleXdvcmRzCiAgICAgKiBAcGFyYW0geyp9IG9iagogICAgICogQHBhcmFtIHtib29sZWFufSBpc1F1ZXJ5IC0gaWYgdHJ1ZSwgdGhlIGBvYmpgIGJlbG9uZ3MgdG8gdGhlIHJlcSdzIHF1ZXJ5IHBvcnRpb24KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJfaW5qZWN0Q29udGV4dFZhcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9pbmplY3RDb250ZXh0VmFycyhvYmosIGlzUXVlcnkpIHsKICAgICAgaWYgKG9iaiAmJiBfdHlwZW9mKG9iaikgPT09ICdvYmplY3QnKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgewogICAgICAgICAgLy8gRm9yIGFycmF5cywgcmVwbGFjZSBNVVNUX0NMQVVTRSBhbmQgTVVTVF9OT1RfQ0xBVVNFIHN0cmluZyBlbGVtZW50cwogICAgICAgICAgZm9yICh2YXIgcG9zID0gMDsgcG9zIDwgb2JqLmxlbmd0aDspIHsKICAgICAgICAgICAgdmFyIGl0ZW0gPSBvYmpbcG9zXTsKCiAgICAgICAgICAgIGlmIChpc1F1ZXJ5ICYmIChpdGVtID09PSBNVVNUX0NMQVVTRSB8fCBpdGVtID09PSBNVVNUX05PVF9DTEFVU0UpKSB7CiAgICAgICAgICAgICAgdmFyIGN0eFRhZyA9IGl0ZW0gPT09IE1VU1RfQ0xBVVNFID8gJ211c3QnIDogJ211c3Rfbm90JzsKCiAgICAgICAgICAgICAgdmFyIGN0eCA9IF9sb2Rhc2guZGVmYXVsdC5jbG9uZURlZXAodGhpcy5fZmlsdGVycyk7CgogICAgICAgICAgICAgIGlmIChjdHggJiYgY3R4LmJvb2wgJiYgY3R4LmJvb2xbY3R4VGFnXSkgewogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY3R4LmJvb2xbY3R4VGFnXSkpIHsKICAgICAgICAgICAgICAgICAgLy8gcmVwbGFjZSBvbmUgdmFsdWUgd2l0aCBhbiBhcnJheSBvZiB2YWx1ZXMKICAgICAgICAgICAgICAgICAgb2JqLnNwbGljZS5hcHBseShvYmosIFtwb3MsIDFdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoY3R4LmJvb2xbY3R4VGFnXSkpKTsKICAgICAgICAgICAgICAgICAgcG9zICs9IGN0eC5ib29sW2N0eFRhZ10ubGVuZ3RoOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgb2JqW3BvcysrXSA9IGN0eC5ib29sW2N0eFRhZ107CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG9iai5zcGxpY2UocG9zLCAxKTsgLy8gcmVtb3ZlIGl0ZW0sIGtlZXAgcG9zIGF0IHRoZSBzYW1lIHBvc2l0aW9uCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuX2luamVjdENvbnRleHRWYXJzKGl0ZW0sIGlzUXVlcnkpOwoKICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwLCBfT2JqZWN0JGtleXMgPSBPYmplY3Qua2V5cyhvYmopOyBfaTIgPCBfT2JqZWN0JGtleXMubGVuZ3RoOyBfaTIrKykgewogICAgICAgICAgICB2YXIgcHJvcCA9IF9PYmplY3Qka2V5c1tfaTJdOwogICAgICAgICAgICB2YXIgc3ViT2JqID0gb2JqW3Byb3BdOwogICAgICAgICAgICBpZiAoIXN1Yk9iaiB8fCBfdHlwZW9mKG9iaikgIT09ICdvYmplY3QnKSBjb250aW51ZTsgLy8gcmVwbGFjZSAiaW50ZXJ2YWwiOiB7ICIlYXV0b2ludGVydmFsJSI6IHRydWV8aW50ZWdlciB9IHdpdGgKICAgICAgICAgICAgLy8gYXV0by1nZW5lcmF0ZWQgcmFuZ2UgYmFzZWQgb24gdGhlIHRpbWVwaWNrZXIKCiAgICAgICAgICAgIGlmIChwcm9wID09PSAnaW50ZXJ2YWwnICYmIHN1Yk9ialtBVVRPSU5URVJWQUxdKSB7CiAgICAgICAgICAgICAgdmFyIHNpemUgPSBzdWJPYmpbQVVUT0lOVEVSVkFMXTsKCiAgICAgICAgICAgICAgaWYgKHNpemUgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIHNpemUgPSA1MDsgLy8gYnkgZGVmYXVsdCwgdHJ5IHRvIGdldCB+ODAgdmFsdWVzCiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzVHlwZVZlZ2EuZXNRdWVyeVBhcnNlci5hdXRvaW50ZXJ2YWxWYWx1ZVR5cGVFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAne2F1dG9pbnRlcnZhbH0gbXVzdCBiZSBlaXRoZXIge3RydWVWYWx1ZX0gb3IgYSBudW1iZXInLAogICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICBhdXRvaW50ZXJ2YWw6ICJcIiIuY29uY2F0KEFVVE9JTlRFUlZBTCwgIlwiIiksCiAgICAgICAgICAgICAgICAgICAgdHJ1ZVZhbHVlOiAndHJ1ZScKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IHRoaXMuX3RpbWVDYWNoZS5nZXRUaW1lQm91bmRzKCk7CgogICAgICAgICAgICAgIG9iai5pbnRlcnZhbCA9IEVzUXVlcnlQYXJzZXIuX3JvdW5kSW50ZXJ2YWwoKGJvdW5kcy5tYXggLSBib3VuZHMubWluKSAvIHNpemUpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9IC8vIGhhbmRsZSAldGltZWZpbHRlciUKCgogICAgICAgICAgICBzd2l0Y2ggKHN1Yk9ialtUSU1FRklMVEVSXSkgewogICAgICAgICAgICAgIGNhc2UgJ21pbic6CiAgICAgICAgICAgICAgY2FzZSAnbWF4JzoKICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgeyIldGltZWZpbHRlciUiOiAibWlufG1heCIsIC4uLn0gb2JqZWN0IHdpdGggYSB0aW1lc3RhbXAKICAgICAgICAgICAgICAgIG9ialtwcm9wXSA9IHRoaXMuX2dldFRpbWVCb3VuZChzdWJPYmosIHN1Yk9ialtUSU1FRklMVEVSXSk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgICAgY2FzZSB0cnVlOgogICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB7IiV0aW1lZmlsdGVyJSI6IHRydWUsIC4uLn0gb2JqZWN0IHdpdGggdGhlICJyYW5nZSIgb2JqZWN0CiAgICAgICAgICAgICAgICB0aGlzLl9jcmVhdGVSYW5nZUZpbHRlcihzdWJPYmopOwoKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICAgICAgICBjYXNlIHVuZGVmaW5lZDoKICAgICAgICAgICAgICAgIHRoaXMuX2luamVjdENvbnRleHRWYXJzKHN1Yk9iaiwgaXNRdWVyeSk7CgogICAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3Zpc1R5cGVWZWdhLmVzUXVlcnlQYXJzZXIudGltZWZpbHRlclZhbHVlRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ3t0aW1lZmlsdGVyfSBwcm9wZXJ0eSBtdXN0IGJlIHNldCB0byB7dHJ1ZVZhbHVlfSwge21pblZhbHVlfSwgb3Ige21heFZhbHVlfScsCiAgICAgICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgICAgIHRpbWVmaWx0ZXI6ICJcIiIuY29uY2F0KFRJTUVGSUxURVIsICJcIiIpLAogICAgICAgICAgICAgICAgICAgIHRydWVWYWx1ZTogJ3RydWUnLAogICAgICAgICAgICAgICAgICAgIG1pblZhbHVlOiAnIm1pbiInLAogICAgICAgICAgICAgICAgICAgIG1heFZhbHVlOiAnIm1heCInCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiByZXBsYWNlcyBnaXZlbiBvYmplY3QgdGhhdCBjb250YWlucyBgJXRpbWVmaWx0ZXIlYCBrZXkgd2l0aCB0aGUgdGltZWZpbHRlciBib3VuZHMgYW5kIG9wdGlvbmFsIHNoaWZ0ICYgdW5pdCBwYXJhbWV0ZXJzCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb2JqCiAgICAgKiBAcmV0dXJuIHtvYmplY3R9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiX2NyZWF0ZVJhbmdlRmlsdGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlUmFuZ2VGaWx0ZXIob2JqKSB7CiAgICAgIG9iai5ndGUgPSAoMCwgX21vbWVudC5kZWZhdWx0KSh0aGlzLl9nZXRUaW1lQm91bmQob2JqLCAnbWluJykpLnRvSVNPU3RyaW5nKCk7CiAgICAgIG9iai5sdGUgPSAoMCwgX21vbWVudC5kZWZhdWx0KSh0aGlzLl9nZXRUaW1lQm91bmQob2JqLCAnbWF4JykpLnRvSVNPU3RyaW5nKCk7CiAgICAgIG9iai5mb3JtYXQgPSAnc3RyaWN0X2RhdGVfb3B0aW9uYWxfdGltZSc7CiAgICAgIGRlbGV0ZSBvYmpbVElNRUZJTFRFUl07CiAgICAgIGRlbGV0ZSBvYmouc2hpZnQ7CiAgICAgIGRlbGV0ZSBvYmoudW5pdDsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICAgIC8qKgogICAgICoKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRzCiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMuc2hpZnRdCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMudW5pdF0KICAgICAqIEBwYXJhbSB7J21pbid8J21heCd9IHR5cGUKICAgICAqIEByZXR1cm5zIHsqfQogICAgICovCgogIH0sIHsKICAgIGtleTogIl9nZXRUaW1lQm91bmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRUaW1lQm91bmQob3B0cywgdHlwZSkgewogICAgICB2YXIgYm91bmRzID0gdGhpcy5fdGltZUNhY2hlLmdldFRpbWVCb3VuZHMoKTsKCiAgICAgIHZhciByZXN1bHQgPSBib3VuZHNbdHlwZV07CgogICAgICBpZiAob3B0cy5zaGlmdCkgewogICAgICAgIHZhciBzaGlmdCA9IG9wdHMuc2hpZnQ7CgogICAgICAgIGlmICh0eXBlb2Ygc2hpZnQgIT09ICdudW1iZXInKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3Zpc1R5cGVWZWdhLmVzUXVlcnlQYXJzZXIuc2hpZnRNdXN0VmFsdWVUeXBlRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ3tzaGlmdFBhcmFtfSBtdXN0IGJlIGEgbnVtZXJpYyB2YWx1ZScsCiAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgIHNoaWZ0UGFyYW06ICcic2hpZnQiJwogICAgICAgICAgICB9CiAgICAgICAgICB9KSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgbXVsdGlwbGllcjsKCiAgICAgICAgc3dpdGNoIChvcHRzLnVuaXQgfHwgJ2QnKSB7CiAgICAgICAgICBjYXNlICd3JzoKICAgICAgICAgIGNhc2UgJ3dlZWsnOgogICAgICAgICAgICBtdWx0aXBsaWVyID0gMTAwMCAqIDYwICogNjAgKiAyNCAqIDc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2QnOgogICAgICAgICAgY2FzZSAnZGF5JzoKICAgICAgICAgICAgbXVsdGlwbGllciA9IDEwMDAgKiA2MCAqIDYwICogMjQ7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2gnOgogICAgICAgICAgY2FzZSAnaG91cic6CiAgICAgICAgICAgIG11bHRpcGxpZXIgPSAxMDAwICogNjAgKiA2MDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnbSc6CiAgICAgICAgICBjYXNlICdtaW51dGUnOgogICAgICAgICAgICBtdWx0aXBsaWVyID0gMTAwMCAqIDYwOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdzJzoKICAgICAgICAgIGNhc2UgJ3NlY29uZCc6CiAgICAgICAgICAgIG11bHRpcGxpZXIgPSAxMDAwOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3Zpc1R5cGVWZWdhLmVzUXVlcnlQYXJzZXIudW5rbm93blVuaXRWYWx1ZUVycm9yTWVzc2FnZScsIHsKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1Vua25vd24ge3VuaXRQYXJhbU5hbWV9IHZhbHVlLiBNdXN0IGJlIG9uZSBvZjogW3t1bml0UGFyYW1WYWx1ZXN9XScsCiAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICB1bml0UGFyYW1OYW1lOiAnInVuaXQiJywKICAgICAgICAgICAgICAgIHVuaXRQYXJhbVZhbHVlczogJyJ3ZWVrIiwgImRheSIsICJob3VyIiwgIm1pbnV0ZSIsICJzZWNvbmQiJwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0ICs9IHNoaWZ0ICogbXVsdGlwbGllcjsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQWRhcHRlZCBmcm9tIHNyYy9sZWdhY3kvY29yZV9wbHVnaW5zL3RpbWVsaW9uL2NvbW1vbi9saWIvY2FsY3VsYXRlX2ludGVydmFsLmpzCiAgICAgKiBAcGFyYW0gaW50ZXJ2YWwgKG1zKQogICAgICogQHJldHVybnMge3N0cmluZ30KICAgICAqLwoKICB9XSwgW3sKICAgIGtleTogIl9yb3VuZEludGVydmFsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcm91bmRJbnRlcnZhbChpbnRlcnZhbCkgewogICAgICBzd2l0Y2ggKHRydWUpIHsKICAgICAgICBjYXNlIGludGVydmFsIDw9IDUwMDoKICAgICAgICAgIC8vIDw9IDAuNXMKICAgICAgICAgIHJldHVybiAnMTAwbXMnOwoKICAgICAgICBjYXNlIGludGVydmFsIDw9IDUwMDA6CiAgICAgICAgICAvLyA8PSA1cwogICAgICAgICAgcmV0dXJuICcxcyc7CgogICAgICAgIGNhc2UgaW50ZXJ2YWwgPD0gNzUwMDoKICAgICAgICAgIC8vIDw9IDcuNXMKICAgICAgICAgIHJldHVybiAnNXMnOwoKICAgICAgICBjYXNlIGludGVydmFsIDw9IDE1MDAwOgogICAgICAgICAgLy8gPD0gMTVzCiAgICAgICAgICByZXR1cm4gJzEwcyc7CgogICAgICAgIGNhc2UgaW50ZXJ2YWwgPD0gNDUwMDA6CiAgICAgICAgICAvLyA8PSA0NXMKICAgICAgICAgIHJldHVybiAnMzBzJzsKCiAgICAgICAgY2FzZSBpbnRlcnZhbCA8PSAxODAwMDA6CiAgICAgICAgICAvLyA8PSAzbQogICAgICAgICAgcmV0dXJuICcxbSc7CgogICAgICAgIGNhc2UgaW50ZXJ2YWwgPD0gNDUwMDAwOgogICAgICAgICAgLy8gPD0gOW0KICAgICAgICAgIHJldHVybiAnNW0nOwoKICAgICAgICBjYXNlIGludGVydmFsIDw9IDEyMDAwMDA6CiAgICAgICAgICAvLyA8PSAyMG0KICAgICAgICAgIHJldHVybiAnMTBtJzsKCiAgICAgICAgY2FzZSBpbnRlcnZhbCA8PSAyNzAwMDAwOgogICAgICAgICAgLy8gPD0gNDVtCiAgICAgICAgICByZXR1cm4gJzMwbSc7CgogICAgICAgIGNhc2UgaW50ZXJ2YWwgPD0gNzIwMDAwMDoKICAgICAgICAgIC8vIDw9IDJoCiAgICAgICAgICByZXR1cm4gJzFoJzsKCiAgICAgICAgY2FzZSBpbnRlcnZhbCA8PSAyMTYwMDAwMDoKICAgICAgICAgIC8vIDw9IDZoCiAgICAgICAgICByZXR1cm4gJzNoJzsKCiAgICAgICAgY2FzZSBpbnRlcnZhbCA8PSA4NjQwMDAwMDoKICAgICAgICAgIC8vIDw9IDI0aAogICAgICAgICAgcmV0dXJuICcxMmgnOwoKICAgICAgICBjYXNlIGludGVydmFsIDw9IDYwNDgwMDAwMDoKICAgICAgICAgIC8vIDw9IDF3CiAgICAgICAgICByZXR1cm4gJzI0aCc7CgogICAgICAgIGNhc2UgaW50ZXJ2YWwgPD0gMTgxNDQwMDAwMDoKICAgICAgICAgIC8vIDw9IDN3CiAgICAgICAgICByZXR1cm4gJzF3JzsKCiAgICAgICAgY2FzZSBpbnRlcnZhbCA8IDM2Mjg4MDAwMDA6CiAgICAgICAgICAvLyA8ICAyeQogICAgICAgICAgcmV0dXJuICczMGQnOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuICcxeSc7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBFc1F1ZXJ5UGFyc2VyOwp9KCk7CgpleHBvcnRzLkVzUXVlcnlQYXJzZXIgPSBFc1F1ZXJ5UGFyc2VyOw=="},null]}