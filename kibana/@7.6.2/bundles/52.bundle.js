/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[52],{7010:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.boot=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(9);var _app=__webpack_require__(9097);var _api=__webpack_require__(7044);var _x_only=__webpack_require__(7710);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var boot=function boot(bootDeps){var I18nContext=bootDeps.I18nContext,element=bootDeps.element,legacy=bootDeps.legacy,savedObjects=bootDeps.savedObjects,appDeps=_objectWithoutProperties(bootDeps,["I18nContext","element","legacy","savedObjects"]);(0,_x_only.setDefaultEmailTo)(bootDeps.uiSettings.get("xPack:defaultAdminEmail"));(0,_api.setHttpClient)(appDeps.http);(0,_api.setSavedObjectsClient)(savedObjects);(0,_reactDom.render)(_react.default.createElement(I18nContext,null,_react.default.createElement(_app.App,_extends({},appDeps,{legacy:legacy}))),element);return function(){return(0,_reactDom.unmountComponentAtNode)(element)}};exports.boot=boot},7044:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ackWatchAction=exports.useLoadSettings=exports.useGetWatchVisualizationData=exports.loadIndexPatterns=exports.executeWatch=exports.createWatch=exports.fetchFields=exports.getMatchingIndices=exports.loadWatch=exports.activateWatch=exports.deactivateWatch=exports.deleteWatches=exports.useLoadWatchHistoryDetail=exports.useLoadWatchHistory=exports.useLoadWatchDetail=exports.useLoadWatches=exports.getSavedObjectsClient=exports.setSavedObjectsClient=exports.getHttpClient=exports.setHttpClient=void 0;var _settings=__webpack_require__(9100);var _watch=__webpack_require__(7709);var _watch_history_item=__webpack_require__(7373);var _watch_status=__webpack_require__(7367);var _use_request=__webpack_require__(9127);var _constants=__webpack_require__(1880);var httpClient;var setHttpClient=function setHttpClient(anHttpClient){httpClient=anHttpClient};exports.setHttpClient=setHttpClient;var getHttpClient=function getHttpClient(){return httpClient};exports.getHttpClient=getHttpClient;var savedObjectsClient;var setSavedObjectsClient=function setSavedObjectsClient(aSavedObjectsClient){savedObjectsClient=aSavedObjectsClient};exports.setSavedObjectsClient=setSavedObjectsClient;var getSavedObjectsClient=function getSavedObjectsClient(){return savedObjectsClient};exports.getSavedObjectsClient=getSavedObjectsClient;var basePath=_constants.ROUTES.API_ROOT;var useLoadWatches=function useLoadWatches(pollIntervalMs){return(0,_use_request.useRequest)({path:"".concat(basePath,"/watches"),method:"get",pollIntervalMs:pollIntervalMs,deserializer:function deserializer(_ref){var _ref$watches=_ref.watches,watches=_ref$watches===void 0?[]:_ref$watches;return watches.map((function(watch){return _watch.Watch.fromUpstreamJson(watch)}))}})};exports.useLoadWatches=useLoadWatches;var useLoadWatchDetail=function useLoadWatchDetail(id){return(0,_use_request.useRequest)({path:"".concat(basePath,"/watch/").concat(id),method:"get",deserializer:function deserializer(_ref2){var _ref2$watch=_ref2.watch,watch=_ref2$watch===void 0?{}:_ref2$watch;return _watch.Watch.fromUpstreamJson(watch)}})};exports.useLoadWatchDetail=useLoadWatchDetail;var useLoadWatchHistory=function useLoadWatchHistory(id,startTime){return(0,_use_request.useRequest)({query:startTime?{startTime:startTime}:undefined,path:"".concat(basePath,"/watch/").concat(id,"/history"),method:"get",deserializer:function deserializer(_ref3){var _ref3$watchHistoryIte=_ref3.watchHistoryItems,watchHistoryItems=_ref3$watchHistoryIte===void 0?[]:_ref3$watchHistoryIte;return watchHistoryItems.map((function(historyItem){return _watch_history_item.WatchHistoryItem.fromUpstreamJson(historyItem)}))}})};exports.useLoadWatchHistory=useLoadWatchHistory;var useLoadWatchHistoryDetail=function useLoadWatchHistoryDetail(id){return(0,_use_request.useRequest)({path:!id?"":"".concat(basePath,"/history/").concat(id),method:"get",deserializer:function deserializer(_ref4){var watchHistoryItem=_ref4.watchHistoryItem;return _watch_history_item.WatchHistoryItem.fromUpstreamJson(watchHistoryItem)}})};exports.useLoadWatchHistoryDetail=useLoadWatchHistoryDetail;var deleteWatches=function deleteWatches(watchIds){var body,_ref5,results;return regeneratorRuntime.async((function deleteWatches$(_context){while(1){switch(_context.prev=_context.next){case 0:body=JSON.stringify({watchIds:watchIds});_context.next=3;return regeneratorRuntime.awrap(getHttpClient().post("".concat(basePath,"/watches/delete"),{body:body}));case 3:_ref5=_context.sent;results=_ref5.results;return _context.abrupt("return",results);case 6:case"end":return _context.stop()}}}))};exports.deleteWatches=deleteWatches;var deactivateWatch=function deactivateWatch(id){return regeneratorRuntime.async((function deactivateWatch$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",(0,_use_request.sendRequest)({path:"".concat(basePath,"/watch/").concat(id,"/deactivate"),method:"put"}));case 1:case"end":return _context2.stop()}}}))};exports.deactivateWatch=deactivateWatch;var activateWatch=function activateWatch(id){return regeneratorRuntime.async((function activateWatch$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",(0,_use_request.sendRequest)({path:"".concat(basePath,"/watch/").concat(id,"/activate"),method:"put"}));case 1:case"end":return _context3.stop()}}}))};exports.activateWatch=activateWatch;var loadWatch=function loadWatch(id){var _ref6,watch;return regeneratorRuntime.async((function loadWatch$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return regeneratorRuntime.awrap(getHttpClient().get("".concat(basePath,"/watch/").concat(id)));case 2:_ref6=_context4.sent;watch=_ref6.watch;return _context4.abrupt("return",_watch.Watch.fromUpstreamJson(watch));case 5:case"end":return _context4.stop()}}}))};exports.loadWatch=loadWatch;var getMatchingIndices=function getMatchingIndices(pattern){var body,_ref7,indices;return regeneratorRuntime.async((function getMatchingIndices$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!pattern.startsWith("*")){pattern="*".concat(pattern)}if(!pattern.endsWith("*")){pattern="".concat(pattern,"*")}body=JSON.stringify({pattern:pattern});_context5.next=5;return regeneratorRuntime.awrap(getHttpClient().post("".concat(basePath,"/indices"),{body:body}));case 5:_ref7=_context5.sent;indices=_ref7.indices;return _context5.abrupt("return",indices);case 8:case"end":return _context5.stop()}}}))};exports.getMatchingIndices=getMatchingIndices;var fetchFields=function fetchFields(indexes){var _ref8,fields;return regeneratorRuntime.async((function fetchFields$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return regeneratorRuntime.awrap(getHttpClient().post("".concat(basePath,"/fields"),{body:JSON.stringify({indexes:indexes})}));case 2:_ref8=_context6.sent;fields=_ref8.fields;return _context6.abrupt("return",fields);case 5:case"end":return _context6.stop()}}}))};exports.fetchFields=fetchFields;var createWatch=function createWatch(watch){return regeneratorRuntime.async((function createWatch$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return regeneratorRuntime.awrap(getHttpClient().put("".concat(basePath,"/watch/").concat(watch.id),{body:JSON.stringify(watch.upstreamJson)}));case 2:return _context7.abrupt("return",_context7.sent);case 3:case"end":return _context7.stop()}}}))};exports.createWatch=createWatch;var executeWatch=function executeWatch(executeWatchDetails,watch){return regeneratorRuntime.async((function executeWatch$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:return _context8.abrupt("return",(0,_use_request.sendRequest)({path:"".concat(basePath,"/watch/execute"),method:"put",body:JSON.stringify({executeDetails:executeWatchDetails.upstreamJson,watch:watch.upstreamJson})}));case 1:case"end":return _context8.stop()}}}))};exports.executeWatch=executeWatch;var loadIndexPatterns=function loadIndexPatterns(){var _ref9,savedObjects;return regeneratorRuntime.async((function loadIndexPatterns$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return regeneratorRuntime.awrap(getSavedObjectsClient().find({type:"index-pattern",fields:["title"],perPage:1e4}));case 2:_ref9=_context9.sent;savedObjects=_ref9.savedObjects;return _context9.abrupt("return",savedObjects);case 5:case"end":return _context9.stop()}}}))};exports.loadIndexPatterns=loadIndexPatterns;var useGetWatchVisualizationData=function useGetWatchVisualizationData(watchModel,visualizeOptions){return(0,_use_request.useRequest)({path:"".concat(basePath,"/watch/visualize"),method:"post",body:JSON.stringify({watch:watchModel.upstreamJson,options:visualizeOptions.upstreamJson}),deserializer:function deserializer(_ref10){var visualizeData=_ref10.visualizeData;return visualizeData}})};exports.useGetWatchVisualizationData=useGetWatchVisualizationData;var useLoadSettings=function useLoadSettings(){return(0,_use_request.useRequest)({path:"".concat(basePath,"/settings"),method:"get",deserializer:function deserializer(data){return _settings.Settings.fromUpstreamJson(data)}})};exports.useLoadSettings=useLoadSettings;var ackWatchAction=function ackWatchAction(watchId,actionId){var _ref11,watchStatus;return regeneratorRuntime.async((function ackWatchAction$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return regeneratorRuntime.awrap(getHttpClient().put("".concat(basePath,"/watch/").concat(watchId,"/action/").concat(actionId,"/acknowledge")));case 2:_ref11=_context10.sent;watchStatus=_ref11.watchStatus;return _context10.abrupt("return",_watch_status.WatchStatus.fromUpstreamJson(watchStatus));case 5:case"end":return _context10.stop()}}}))};exports.ackWatchAction=ackWatchAction},7066:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useAppContext=exports.AppContextProvider=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _constants=__webpack_require__(1880);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AppContext=(0,_react.createContext)(null);var generateDocLinks=function generateDocLinks(_ref){var _watchActionsConfigur;var ELASTIC_WEBSITE_URL=_ref.ELASTIC_WEBSITE_URL,DOC_LINK_VERSION=_ref.DOC_LINK_VERSION;var elasticDocLinkBase="".concat(ELASTIC_WEBSITE_URL,"guide/en/");var esBase="".concat(elasticDocLinkBase,"elasticsearch/reference/").concat(DOC_LINK_VERSION);var kibanaBase="".concat(elasticDocLinkBase,"kibana/").concat(DOC_LINK_VERSION);var putWatchApiUrl="".concat(esBase,"/watcher-api-put-watch.html");var executeWatchApiUrl="".concat(esBase,"/watcher-api-execute-watch.html#watcher-api-execute-watch-action-mode");var watcherGettingStartedUrl="".concat(kibanaBase,"/watcher-ui.html");var watchActionsConfigurationMap=(_watchActionsConfigur={},_defineProperty(_watchActionsConfigur,_constants.ACTION_TYPES.SLACK,"".concat(esBase,"/actions-slack.html#configuring-slack")),_defineProperty(_watchActionsConfigur,_constants.ACTION_TYPES.PAGERDUTY,"".concat(esBase,"/actions-pagerduty.html#configuring-pagerduty")),_defineProperty(_watchActionsConfigur,_constants.ACTION_TYPES.JIRA,"".concat(esBase,"/actions-jira.html#configuring-jira")),_watchActionsConfigur);return{putWatchApiUrl:putWatchApiUrl,executeWatchApiUrl:executeWatchApiUrl,watcherGettingStartedUrl:watcherGettingStartedUrl,watchActionsConfigurationMap:watchActionsConfigurationMap}};var AppContextProvider=function AppContextProvider(_ref2){var children=_ref2.children,value=_ref2.value;var docLinks=value.docLinks,rest=_objectWithoutProperties(value,["docLinks"]);return _react.default.createElement(AppContext.Provider,{value:Object.freeze(_objectSpread({},rest,{links:generateDocLinks(docLinks)}))},children)};exports.AppContextProvider=AppContextProvider;var useAppContext=function useAppContext(){var ctx=(0,_react.useContext)(AppContext);if(!ctx){throw new Error('"useAppContext" can only be called inside of AppContext.Provider!')}return ctx};exports.useAppContext=useAppContext},7067:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchContext=void 0;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WatchContext=_react.default.createContext({});exports.WatchContext=WatchContext},7074:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getPageErrorCode",{enumerable:true,get:function get(){return _page_error.getPageErrorCode}});Object.defineProperty(exports,"PageError",{enumerable:true,get:function get(){return _page_error.PageError}});Object.defineProperty(exports,"ConfirmWatchesModal",{enumerable:true,get:function get(){return _confirm_watches_modal.ConfirmWatchesModal}});Object.defineProperty(exports,"DeleteWatchesModal",{enumerable:true,get:function get(){return _delete_watches_modal.DeleteWatchesModal}});Object.defineProperty(exports,"ErrableFormRow",{enumerable:true,get:function get(){return _form_errors.ErrableFormRow}});Object.defineProperty(exports,"WatchStatus",{enumerable:true,get:function get(){return _watch_status.WatchStatus}});Object.defineProperty(exports,"SectionLoading",{enumerable:true,get:function get(){return _section_loading.SectionLoading}});Object.defineProperty(exports,"SectionError",{enumerable:true,get:function get(){return _section_error.SectionError}});Object.defineProperty(exports,"Error",{enumerable:true,get:function get(){return _section_error.Error}});var _page_error=__webpack_require__(9129);var _confirm_watches_modal=__webpack_require__(9133);var _delete_watches_modal=__webpack_require__(9134);var _form_errors=__webpack_require__(7095);var _watch_status=__webpack_require__(9135);var _section_loading=__webpack_require__(9136);var _section_error=__webpack_require__(9137)},7094:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseAction=void 0;var _lodash=__webpack_require__(3);var _i18n=__webpack_require__(2);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BaseAction=function(){function BaseAction(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,BaseAction);this.id=(0,_lodash.get)(props,"id");this.type=(0,_lodash.get)(props,"type");this.isNew=(0,_lodash.get)(props,"isNew",false)}_createClass(BaseAction,[{key:"upstreamJson",get:function get(){var result={id:this.id,type:this.type};return result}},{key:"typeName",get:function get(){return this.constructor.typeName}},{key:"iconClass",get:function get(){return this.constructor.iconClass}},{key:"selectMessage",get:function get(){return this.constructor.selectMessage}},{key:"simulateMessage",get:function get(){return _i18n.i18n.translate("xpack.watcher.models.baseAction.simulateMessage",{defaultMessage:"Action {id} simulated successfully",values:{id:this.id}})}},{key:"simulatePrompt",get:function get(){return this.constructor.simulatePrompt}}]);return BaseAction}();exports.BaseAction=BaseAction;_defineProperty(BaseAction,"typeName",_i18n.i18n.translate("xpack.watcher.models.baseAction.typeName",{defaultMessage:"Action"}));_defineProperty(BaseAction,"iconClass","apps");_defineProperty(BaseAction,"selectMessage",_i18n.i18n.translate("xpack.watcher.models.baseAction.selectMessageText",{defaultMessage:"Perform an action."}));_defineProperty(BaseAction,"simulatePrompt",_i18n.i18n.translate("xpack.watcher.models.baseAction.simulateButtonLabel",{defaultMessage:"Simulate this action now"}))},7095:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrableFormRow=void 0;var _eui=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var ErrableFormRow=function ErrableFormRow(_ref){var errorKey=_ref.errorKey,isShowingErrors=_ref.isShowingErrors,errors=_ref.errors,children=_ref.children,rest=_objectWithoutProperties(_ref,["errorKey","isShowingErrors","errors","children"]);return _react.default.createElement(_eui.EuiFormRow,_extends({isInvalid:isShowingErrors&&errors[errorKey].length>0,error:errors[errorKey]},rest),_react.default.createElement(_react.Fragment,null,_react.Children.map(children,(function(child){return(0,_react.cloneElement)(child)}))))};exports.ErrableFormRow=ErrableFormRow},7096:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseAction=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var BaseAction=function(){function BaseAction(props,errors){_classCallCheck(this,BaseAction);this.id=props.id;this.type=props.type;this.errors=errors}_createClass(BaseAction,[{key:"downstreamJson",get:function get(){var result={id:this.id,type:this.type};return result}},{key:"upstreamJson",get:function get(){var result={};return result}}],[{key:"getPropsFromDownstreamJson",value:function getPropsFromDownstreamJson(json){return{id:json.id}}},{key:"getPropsFromUpstreamJson",value:function getPropsFromUpstreamJson(json){return{id:json.id}}}]);return BaseAction}();exports.BaseAction=BaseAction},710:function(module,exports,__webpack_require__){module.exports=__webpack_require__(17)(2892)},7139:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.goToCreateAdvancedWatch=exports.goToCreateThresholdAlert=exports.goToWatchList=exports.registerRouter=void 0;var _constants=__webpack_require__(7712);var router;var registerRouter=function registerRouter(aRouter){router=aRouter};exports.registerRouter=registerRouter;var goToWatchList=function goToWatchList(){router.history.push({pathname:"".concat(_constants.BASE_PATH,"watches")})};exports.goToWatchList=goToWatchList;var goToCreateThresholdAlert=function goToCreateThresholdAlert(){router.history.push({pathname:"".concat(_constants.BASE_PATH,"watches/new-watch/threshold")})};exports.goToCreateThresholdAlert=goToCreateThresholdAlert;var goToCreateAdvancedWatch=function goToCreateAdvancedWatch(){router.history.push({pathname:"".concat(_constants.BASE_PATH,"watches/new-watch/json")})};exports.goToCreateAdvancedWatch=goToCreateAdvancedWatch},7365:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseWatch=void 0;var _get_search_value=__webpack_require__(9104);var _lodash=__webpack_require__(3);var _action=__webpack_require__(7366);var _watch_status=__webpack_require__(7367);var _watch_errors=__webpack_require__(9118);var _create_action_id=__webpack_require__(9120);var _check_action_id_collision=__webpack_require__(9122);var _i18n=__webpack_require__(2);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BaseWatch=function(){function BaseWatch(){var _this=this;var _props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,BaseWatch);_defineProperty(this,"updateWatchStatus",(function(watchStatus){_this.watchStatus=watchStatus}));_defineProperty(this,"createAction",(function(type,defaults){var ActionTypes=_action.Action.getActionTypes();var ActionType=ActionTypes[type];if(!Boolean(ActionType)){throw new Error(_i18n.i18n.translate("xpack.watcher.models.baseWatch.createUnknownActionTypeErrorMessage",{defaultMessage:"Attempted to create unknown action type {type}.",values:{type:type}}))}var id=(0,_create_action_id.createActionId)(_this.actions,type);var props=_objectSpread({id:id,type:type},defaults);var action=new ActionType(props);_this.addAction(action)}));_defineProperty(this,"addAction",(function(action){if((0,_check_action_id_collision.checkActionIdCollision)(_this.actions,action)){action.id=(0,_create_action_id.createActionId)(_this.actions,action.type)}_this.actions.push(action)}));_defineProperty(this,"deleteAction",(function(action){(0,_lodash.remove)(_this.actions,action)}));_defineProperty(this,"resetActions",(function(){_this.actions=[]}));_defineProperty(this,"isEqualTo",(function(otherWatch){var cleanWatch=_objectSpread({},_this);var cleanOtherWatch=_objectSpread({},otherWatch);return(0,_lodash.isEqual)(cleanWatch,cleanOtherWatch)}));this.id=(0,_lodash.get)(_props,"id");this.type=(0,_lodash.get)(_props,"type");this.isNew=(0,_lodash.get)(_props,"isNew",true);this.name=(0,_lodash.get)(_props,"name");this.isSystemWatch=Boolean((0,_lodash.get)(_props,"isSystemWatch"));this.watchStatus=_watch_status.WatchStatus.fromUpstreamJson((0,_lodash.get)(_props,"watchStatus"));this.watchErrors=_watch_errors.WatchErrors.fromUpstreamJson((0,_lodash.get)(_props,"watchErrors"));var actions=(0,_lodash.get)(_props,"actions",[]);this.actions=actions.map(_action.Action.fromUpstreamJson)}_createClass(BaseWatch,[{key:"displayName",get:function get(){if(this.isNew){return _i18n.i18n.translate("xpack.watcher.models.baseWatch.displayName",{defaultMessage:"New Watch"})}else if(this.name){return this.name}else{return this.id}}},{key:"searchValue",get:function get(){return(0,_get_search_value.getSearchValue)(this,["id","name"])}},{key:"typeName",get:function get(){return this.constructor.typeName}},{key:"iconClass",get:function get(){return this.constructor.iconClass}},{key:"selectMessage",get:function get(){return this.constructor.selectMessage}},{key:"selectSortOrder",get:function get(){return this.constructor.selectSortOrder}},{key:"upstreamJson",get:function get(){return{id:this.id,name:this.name,type:this.type,isNew:this.isNew,actions:(0,_lodash.map)(this.actions,(function(action){return action.upstreamJson}))}}}]);return BaseWatch}();exports.BaseWatch=BaseWatch;_defineProperty(BaseWatch,"typeName",_i18n.i18n.translate("xpack.watcher.models.baseWatch.typeName",{defaultMessage:"Watch"}));_defineProperty(BaseWatch,"iconClass","");_defineProperty(BaseWatch,"selectMessage",_i18n.i18n.translate("xpack.watcher.models.baseWatch.selectMessageText",{defaultMessage:"Set up a new watch."}));_defineProperty(BaseWatch,"isCreatable",true);_defineProperty(BaseWatch,"selectSortOrder",0)},7366:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Action",{enumerable:true,get:function get(){return _action.Action}});var _action=__webpack_require__(9105)},7367:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"WatchStatus",{enumerable:true,get:function get(){return _watch_status.WatchStatus}});var _watch_status=__webpack_require__(9114)},7368:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getMoment",{enumerable:true,get:function get(){return _get_moment.getMoment}});var _get_moment=__webpack_require__(9115)},7369:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ThresholdWatch=void 0;var _base_watch=__webpack_require__(7365);var _uuid=_interopRequireDefault(__webpack_require__(86));var _constants=__webpack_require__(1880);var _get_time_unit_label=__webpack_require__(7370);var _i18n=__webpack_require__(2);var _agg_types=__webpack_require__(7371);var _group_by_types=__webpack_require__(7711);var _comparators=__webpack_require__(7372);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BETWEEN=_constants.COMPARATORS.BETWEEN;var DEFAULT_VALUES={AGG_TYPE:"count",TERM_SIZE:5,THRESHOLD_COMPARATOR:_constants.COMPARATORS.GREATER_THAN,TIME_WINDOW_SIZE:5,TIME_WINDOW_UNIT:"m",TRIGGER_INTERVAL_SIZE:1,TRIGGER_INTERVAL_UNIT:"m",THRESHOLD:[1e3,5e3],GROUP_BY:"all"};var ThresholdWatch=function(_BaseWatch){_inherits(ThresholdWatch,_BaseWatch);function ThresholdWatch(){var _this;var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,ThresholdWatch);props.id=props.id||_uuid.default.v4();props.type=_constants.WATCH_TYPES.THRESHOLD;_this=_possibleConstructorReturn(this,_getPrototypeOf(ThresholdWatch).call(this,props));_this.index=props.index;_this.timeField=props.timeField;_this.timeFields=props.timeFields||undefined;_this.triggerIntervalSize=props.triggerIntervalSize==null?DEFAULT_VALUES.TRIGGER_INTERVAL_SIZE:props.triggerIntervalSize;_this.triggerIntervalUnit=props.triggerIntervalUnit||DEFAULT_VALUES.TRIGGER_INTERVAL_UNIT;_this.aggType=props.aggType||DEFAULT_VALUES.AGG_TYPE;_this.aggField=props.aggField;_this.termSize=props.termSize==null?DEFAULT_VALUES.TERM_SIZE:props.termSize;_this.termField=props.termField;_this.thresholdComparator=props.thresholdComparator||DEFAULT_VALUES.THRESHOLD_COMPARATOR;_this.timeWindowSize=props.timeWindowSize==null?DEFAULT_VALUES.TIME_WINDOW_SIZE:props.timeWindowSize;_this.timeWindowUnit=props.timeWindowUnit||DEFAULT_VALUES.TIME_WINDOW_UNIT;_this.groupBy=props.groupBy||DEFAULT_VALUES.GROUP_BY;if(_this.termField!=null){_this.groupBy="top"}_this.threshold=props.threshold==null?DEFAULT_VALUES.THRESHOLD:props.threshold;return _this}_createClass(ThresholdWatch,[{key:"validate",value:function validate(){var _this2=this;var validationResult={};var errors={name:[],index:[],timeField:[],triggerIntervalSize:[],aggField:[],termSize:[],termField:[],timeWindowSize:[]};validationResult.errors=errors;if(!this.name){errors.name.push(_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.error.requiredNameText",{defaultMessage:"Name is required."}))}if(this.index!==undefined&&this.index.length<1){errors.index.push(_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.enterOneOrMoreIndicesValidationMessage",{defaultMessage:"Enter one or more indices."}))}if(this.index!==undefined&&this.index.length>0&&this.timeFields!==undefined&&this.timeFields.length===1){errors.index.push(_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.invalidIndexValidationMessage",{defaultMessage:"Index does not have a time field."}))}if(!this.timeField){errors.timeField.push(_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.timeFieldIsRequiredValidationText",{defaultMessage:"A time field is required."}))}if(!this.triggerIntervalSize){errors.triggerIntervalSize.push(_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.intervalSizeIsRequiredValidationMessage",{defaultMessage:"Interval size is required."}))}if(this.triggerIntervalSize!==undefined&&this.triggerIntervalSize<0){errors.triggerIntervalSize.push(_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.intervalSizeNegativeNumberValidationMessage",{defaultMessage:"Interval size cannot be a negative number."}))}if(_agg_types.aggTypes[this.aggType].fieldRequired&&!this.aggField){errors.aggField.push(_i18n.i18n.translate("xpack.watcher.watchEdit.thresholdWatchExpression.aggType.fieldIsRequiredValidationMessage",{defaultMessage:"This field is required."}))}if(_group_by_types.groupByTypes[this.groupBy].sizeRequired){if(!this.termSize){errors.termSize.push(_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.aggType.xpack.watcher.thresholdWatchExpression.groupBy.requiredValueValidationMessage",{defaultMessage:"A value is required."}))}if(!this.termField){errors.termField.push(_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.groupBy.requiredFieldValidationMessage",{defaultMessage:"This field is required."}))}}Array.from(Array(_comparators.comparators[this.thresholdComparator].requiredValues)).forEach((function(value,i){var key="threshold".concat(i);errors[key]=[];if(_this2.threshold[i]==null||_this2.threshold[i]===""){errors[key].push(_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.thresholdLevel.valueIsRequiredValidationMessage",{defaultMessage:"A value is required."}))}}));if(this.thresholdComparator===BETWEEN&&this.threshold[0]&&this.threshold[1]&&!(this.threshold[1]>this.threshold[0])){errors.threshold1.push(_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.thresholdLevel.secondValueMustBeGreaterMessage",{defaultMessage:"Value must be greater than {lowerBound}.",values:{lowerBound:this.threshold[0]}}))}if(!this.timeWindowSize){errors.timeWindowSize.push(_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.timeWindow.durationSizeIsRequiredValidationMessage",{defaultMessage:"Window duration size is required."}))}return validationResult}},{key:"hasTermsAgg",get:function get(){return Boolean(this.termField)}},{key:"termOrder",get:function get(){return this.thresholdComparator===_constants.COMPARATORS.GREATER_THAN?_constants.SORT_ORDERS.DESCENDING:_constants.SORT_ORDERS.ASCENDING}},{key:"titleDescription",get:function get(){var staticPart=_i18n.i18n.translate("xpack.watcher.models.thresholdWatch.sendAlertOnSpecificConditionTitleDescription",{defaultMessage:"Send an alert when your specified condition is met."});if(isNaN(this.triggerIntervalSize)){return staticPart}var timeUnitLabel=(0,_get_time_unit_label.getTimeUnitLabel)(this.triggerIntervalUnit,this.triggerIntervalSize);var dynamicPartText=_i18n.i18n.translate("xpack.watcher.models.thresholdWatch.thresholdWatchIntervalTitleDescription",{defaultMessage:"Your watch will run every {triggerIntervalSize} {timeUnitLabel}.",values:{triggerIntervalSize:this.triggerIntervalSize,timeUnitLabel:timeUnitLabel}});return"".concat(staticPart," ").concat(dynamicPartText)}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(ThresholdWatch.prototype),"upstreamJson",this);Object.assign(result,{index:this.index,timeField:this.timeField,triggerIntervalSize:this.triggerIntervalSize,triggerIntervalUnit:this.triggerIntervalUnit,aggType:this.aggType,aggField:this.aggField,termSize:this.termSize,termField:this.termField,termOrder:this.termOrder,thresholdComparator:this.thresholdComparator,timeWindowSize:this.timeWindowSize,timeWindowUnit:this.timeWindowUnit,hasTermsAgg:this.hasTermsAgg,threshold:_comparators.comparators[this.thresholdComparator].requiredValues>1?this.threshold:this.threshold[0]});return result}},{key:"DEFAULT_VALUES",get:function get(){return DEFAULT_VALUES}}],[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamWatch){return new ThresholdWatch(upstreamWatch)}}]);return ThresholdWatch}(_base_watch.BaseWatch);exports.ThresholdWatch=ThresholdWatch;_defineProperty(ThresholdWatch,"typeName",_i18n.i18n.translate("xpack.watcher.models.thresholdWatch.typeName",{defaultMessage:"Threshold Alert"}));_defineProperty(ThresholdWatch,"iconClass","");_defineProperty(ThresholdWatch,"selectMessage",_i18n.i18n.translate("xpack.watcher.models.thresholdWatch.selectMessageText",{defaultMessage:"Send an alert on a specific condition"}));_defineProperty(ThresholdWatch,"isCreatable",true);_defineProperty(ThresholdWatch,"selectSortOrder",1)},7370:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTimeUnitLabel=getTimeUnitLabel;var _i18n=__webpack_require__(2);var _constants=__webpack_require__(1880);function getTimeUnitLabel(){var timeUnit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_constants.TIME_UNITS.SECOND;var timeValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"0";switch(timeUnit){case _constants.TIME_UNITS.SECOND:return _i18n.i18n.translate("xpack.watcher.timeUnits.secondLabel",{defaultMessage:"{timeValue, plural, one {second} other {seconds}}",values:{timeValue:timeValue}});case _constants.TIME_UNITS.MINUTE:return _i18n.i18n.translate("xpack.watcher.timeUnits.minuteLabel",{defaultMessage:"{timeValue, plural, one {minute} other {minutes}}",values:{timeValue:timeValue}});case _constants.TIME_UNITS.HOUR:return _i18n.i18n.translate("xpack.watcher.timeUnits.hourLabel",{defaultMessage:"{timeValue, plural, one {hour} other {hours}}",values:{timeValue:timeValue}});case _constants.TIME_UNITS.DAY:return _i18n.i18n.translate("xpack.watcher.timeUnits.dayLabel",{defaultMessage:"{timeValue, plural, one {day} other {days}}",values:{timeValue:timeValue}})}}},7371:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggTypes=void 0;var _constants=__webpack_require__(1880);var aggTypes={count:{text:"count()",fieldRequired:false,value:_constants.AGG_TYPES.COUNT,validNormalizedTypes:[]},avg:{text:"average()",fieldRequired:true,validNormalizedTypes:["number"],value:_constants.AGG_TYPES.AVERAGE},sum:{text:"sum()",fieldRequired:true,validNormalizedTypes:["number"],value:_constants.AGG_TYPES.SUM},min:{text:"min()",fieldRequired:true,validNormalizedTypes:["number","date"],value:_constants.AGG_TYPES.MIN},max:{text:"max()",fieldRequired:true,validNormalizedTypes:["number","date"],value:_constants.AGG_TYPES.MAX}};exports.aggTypes=aggTypes},7372:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.comparators=void 0;var _i18n=__webpack_require__(2);var _constants=__webpack_require__(1880);var _comparators;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var comparators=(_comparators={},_defineProperty(_comparators,_constants.COMPARATORS.GREATER_THAN,{text:_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.comparators.isAboveLabel",{defaultMessage:"Is above"}),value:_constants.COMPARATORS.GREATER_THAN,requiredValues:1}),_defineProperty(_comparators,_constants.COMPARATORS.GREATER_THAN_OR_EQUALS,{text:_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.comparators.isAboveOrEqualsLabel",{defaultMessage:"Is above or equals"}),value:_constants.COMPARATORS.GREATER_THAN_OR_EQUALS,requiredValues:1}),_defineProperty(_comparators,_constants.COMPARATORS.LESS_THAN,{text:_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.comparators.isBelowLabel",{defaultMessage:"Is below"}),value:_constants.COMPARATORS.LESS_THAN,requiredValues:1}),_defineProperty(_comparators,_constants.COMPARATORS.LESS_THAN_OR_EQUALS,{text:_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.comparators.isBelowOrEqualsLabel",{defaultMessage:"Is below or equals"}),value:_constants.COMPARATORS.LESS_THAN_OR_EQUALS,requiredValues:1}),_defineProperty(_comparators,_constants.COMPARATORS.BETWEEN,{text:_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.comparators.isBetweenLabel",{defaultMessage:"Is between"}),value:_constants.COMPARATORS.BETWEEN,requiredValues:2}),_comparators);exports.comparators=comparators},7373:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"WatchHistoryItem",{enumerable:true,get:function get(){return _watch_history_item.WatchHistoryItem}});var _watch_history_item=__webpack_require__(9126)},7374:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchDetailsContext=void 0;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WatchDetailsContext=_react.default.createContext({});exports.WatchDetailsContext=WatchDetailsContext},7375:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.statusBreadcrumb=exports.editBreadcrumb=exports.createBreadcrumb=exports.listBreadcrumb=void 0;var _i18n=__webpack_require__(2);var listBreadcrumb={text:_i18n.i18n.translate("xpack.watcher.breadcrumb.listLabel",{defaultMessage:"Watcher"}),href:"#/management/elasticsearch/watcher/watches/"};exports.listBreadcrumb=listBreadcrumb;var createBreadcrumb={text:_i18n.i18n.translate("xpack.watcher.breadcrumb.createLabel",{defaultMessage:"Create"})};exports.createBreadcrumb=createBreadcrumb;var editBreadcrumb={text:_i18n.i18n.translate("xpack.watcher.breadcrumb.editLabel",{defaultMessage:"Edit"})};exports.editBreadcrumb=editBreadcrumb;var statusBreadcrumb={text:_i18n.i18n.translate("xpack.watcher.breadcrumb.statusLabel",{defaultMessage:"Status"})};exports.statusBreadcrumb=statusBreadcrumb},7376:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExecuteDetails=void 0;var _i18n=__webpack_require__(2);var _format_date=__webpack_require__(9143);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var ExecuteDetails=function(){function ExecuteDetails(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,ExecuteDetails);this.triggeredTimeValue=props.triggeredTimeValue;this.triggeredTimeUnit=props.triggeredTimeUnit;this.scheduledTimeValue=props.scheduledTimeValue;this.scheduledTimeUnit=props.scheduledTimeUnit;this.ignoreCondition=props.ignoreCondition;this.alternativeInput=props.alternativeInput||"";this.actionModes=props.actionModes;this.recordExecution=props.recordExecution}_createClass(ExecuteDetails,[{key:"validate",value:function validate(){var errors={json:[]};var invalidJsonFieldError=_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.invalidJsonFieldError",{defaultMessage:"Invalid JSON"});if(this.alternativeInput!==""){try{var parsedJson=JSON.parse(this.alternativeInput);if(parsedJson&&_typeof(parsedJson)!=="object"){errors.json.push(invalidJsonFieldError)}}catch(e){errors.json.push(invalidJsonFieldError)}}return errors}},{key:"upstreamJson",get:function get(){var triggeredTime=this.triggeredTimeValue&&this.triggeredTimeValue!==""?(0,_format_date.getDateMathFormat)(this.triggeredTimeUnit,this.triggeredTimeValue):undefined;var scheduledTime=this.scheduledTimeValue&&this.scheduledTimeValue!==""?(0,_format_date.getDateMathFormat)(this.scheduledTimeUnit,this.scheduledTimeValue):undefined;return{triggerData:{triggeredTime:triggeredTime,scheduledTime:scheduledTime},ignoreCondition:this.ignoreCondition,alternativeInput:this.alternativeInput!==""?JSON.parse(this.alternativeInput):undefined,actionModes:this.actionModes,recordExecution:this.recordExecution}}}]);return ExecuteDetails}();exports.ExecuteDetails=ExecuteDetails},7377:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTypeFromAction=getTypeFromAction;exports.saveWatch=saveWatch;exports.onWatchSave=onWatchSave;var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(3);var _constants=__webpack_require__(1880);var _api=__webpack_require__(7044);var _navigation=__webpack_require__(7139);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getTypeFromAction(action){var actionKeys=Object.keys(action);var type;Object.keys(_constants.ACTION_TYPES).forEach((function(k){if(actionKeys.includes(_constants.ACTION_TYPES[k])){type=_constants.ACTION_TYPES[k]}}));return type?type:_constants.ACTION_TYPES.UNKNOWN}function getPropsFromAction(type,action){if(type===_constants.ACTION_TYPES.SLACK){return action[type].message}if(type===_constants.ACTION_TYPES.JIRA){var jiraAction={};jiraAction.projectKey=(0,_lodash.get)(action[type],"fields.project.key");jiraAction.issueType=(0,_lodash.get)(action[type],"fields.issuetype.name");jiraAction.summary=(0,_lodash.get)(action[type],"fields.summary");return jiraAction}return action[type]}function createActionsForWatch(watchInstance){watchInstance.resetActions();Object.keys(watchInstance.watch.actions).forEach((function(k){var action=watchInstance.watch.actions[k];var type=getTypeFromAction(action);var actionProps=_objectSpread({},getPropsFromAction(type,action),{ignoreDefaults:true});watchInstance.createAction(type,actionProps)}));return watchInstance}function saveWatch(watch,toasts){var _ref;return regeneratorRuntime.async((function saveWatch$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return regeneratorRuntime.awrap((0,_api.createWatch)(watch));case 3:toasts.addSuccess(_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.saveSuccessNotificationText",{defaultMessage:"Saved '{watchDisplayName}'",values:{watchDisplayName:watch.displayName}}));(0,_navigation.goToWatchList)();_context.next=10;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);return _context.abrupt("return",{error:(_ref=_context.t0===null||_context.t0===void 0?void 0:_context.t0.response.data)!==null&&_ref!==void 0?_ref:_context.t0.body||_context.t0});case 10:case"end":return _context.stop()}}}),null,null,[[0,7]])}function onWatchSave(watch,toasts){var watchActions,watchData,actionsErrors;return regeneratorRuntime.async((function onWatchSave$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:watchActions=watch.watch&&watch.watch.actions;watchData=watchActions?createActionsForWatch(watch):watch;if(!(watchData.type===_constants.WATCH_TYPES.JSON)){_context2.next=7;break}actionsErrors=watchData.actions.reduce((function(actionsErrorsAcc,action){if(action.validate){var _ref2;var errors=action.validate();var errorKeys=Object.keys(errors);var hasErrors=!!errorKeys.find((function(errorKey){return errors[errorKey].length>=1}));if(!hasErrors){return actionsErrorsAcc}var newErrors=errorKeys.map((function(errorKey){return errors[errorKey]}));var newErrorsFlattened=newErrors&&newErrors.length?(_ref2=[]).concat.apply(_ref2,_toConsumableArray(newErrors)):[];return[].concat(_toConsumableArray(actionsErrorsAcc),_toConsumableArray(newErrorsFlattened))}return actionsErrorsAcc}),[]);if(!(actionsErrors.length>0)){_context2.next=6;break}return _context2.abrupt("return",{error:{data:{message:actionsErrors,error:"validation"}}});case 6:return _context2.abrupt("return",saveWatch(watchData,toasts));case 7:return _context2.abrupt("return",saveWatch(watchData,toasts));case 8:case"end":return _context2.stop()}}}))}},7709:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Watch",{enumerable:true,get:function get(){return _watch.Watch}});var _watch=__webpack_require__(9102)},7710:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultEmailTo=exports.setDefaultEmailTo=void 0;var defaultEmailTo;var setDefaultEmailTo=function setDefaultEmailTo(emailTo){defaultEmailTo=emailTo};exports.setDefaultEmailTo=setDefaultEmailTo;var getDefaultEmailTo=function getDefaultEmailTo(){return defaultEmailTo};exports.getDefaultEmailTo=getDefaultEmailTo},7711:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.groupByTypes=void 0;var _i18n=__webpack_require__(2);var groupByTypes={all:{text:_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.groupByLabel.allDocumentsLabel",{defaultMessage:"all documents"}),sizeRequired:false,value:"all",validNormalizedTypes:[]},top:{text:_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.groupByLabel.topLabel",{defaultMessage:"top"}),sizeRequired:true,value:"top",validNormalizedTypes:["number","date","keyword"]}};exports.groupByTypes=groupByTypes},7712:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"BASE_PATH",{enumerable:true,get:function get(){return _base_path.BASE_PATH}});var _base_path=__webpack_require__(9139)},7713:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getActionType",{enumerable:true,get:function get(){return _get_action_type.getActionType}});var _get_action_type=__webpack_require__(9144)},7714:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"serializeJsonWatch",{enumerable:true,get:function get(){return _serialize_json_watch.serializeJsonWatch}});Object.defineProperty(exports,"serializeThresholdWatch",{enumerable:true,get:function get(){return _serialize_threshold_watch.serializeThresholdWatch}});Object.defineProperty(exports,"buildInput",{enumerable:true,get:function get(){return _serialization_helpers.buildInput}});var _serialize_json_watch=__webpack_require__(9146);var _serialize_threshold_watch=__webpack_require__(9147);var _serialization_helpers=__webpack_require__(7715)},7715:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"buildActions",{enumerable:true,get:function get(){return _build_actions.buildActions}});Object.defineProperty(exports,"buildCondition",{enumerable:true,get:function get(){return _build_condition.buildCondition}});Object.defineProperty(exports,"buildInput",{enumerable:true,get:function get(){return _build_input.buildInput}});Object.defineProperty(exports,"buildMetadata",{enumerable:true,get:function get(){return _build_metadata.buildMetadata}});Object.defineProperty(exports,"buildTransform",{enumerable:true,get:function get(){return _build_transform.buildTransform}});Object.defineProperty(exports,"buildTrigger",{enumerable:true,get:function get(){return _build_trigger.buildTrigger}});var _build_actions=__webpack_require__(9148);var _build_condition=__webpack_require__(9159);var _build_input=__webpack_require__(9160);var _build_metadata=__webpack_require__(9161);var _build_transform=__webpack_require__(9162);var _build_trigger=__webpack_require__(9163)},7716:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.singleLineScript=singleLineScript;function singleLineScript(multiLineScript){return multiLineScript.replace(/\s+/g," ").trim()}},7717:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestFlyout=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var RequestFlyout=function(_PureComponent){_inherits(RequestFlyout,_PureComponent);function RequestFlyout(){_classCallCheck(this,RequestFlyout);return _possibleConstructorReturn(this,_getPrototypeOf(RequestFlyout).apply(this,arguments))}_createClass(RequestFlyout,[{key:"getEsJson",value:function getEsJson(payload){return JSON.stringify(payload,null,2)}},{key:"render",value:function render(){var _this$props=this.props,id=_this$props.id,payload=_this$props.payload,close=_this$props.close;var endpoint="PUT _watcher/watch/".concat(id||"<watchId>");var request="".concat(endpoint,"\n").concat(this.getEsJson(payload));return _react.default.createElement(_eui.EuiFlyout,{maxWidth:480,onClose:close},_react.default.createElement(_eui.EuiFlyoutHeader,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,id?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.requestFlyout.namedTitle",defaultMessage:"Request for '{id}'",values:{id:id}}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.requestFlyout.unnamedTitle",defaultMessage:"Request"})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.requestFlyout.descriptionText",defaultMessage:"This Elasticsearch request will create or update this watch."}))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiCodeBlock,{language:"json",isCopyable:true},request)),_react.default.createElement(_eui.EuiFlyoutFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"cross",onClick:close,flush:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.requestFlyout.closeButtonLabel",defaultMessage:"Close"}))))}}]);return RequestFlyout}(_react.PureComponent);exports.RequestFlyout=RequestFlyout},9097:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AppWithoutRouter=exports.App=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _reactRouterDom=__webpack_require__(23);var _react2=__webpack_require__(4);var _watch_status=__webpack_require__(9098);var _watch_edit=__webpack_require__(9140);var _watch_list=__webpack_require__(9184);var _navigation=__webpack_require__(7139);var _constants=__webpack_require__(7712);var _constants2=__webpack_require__(339);var _app_context=__webpack_require__(7066);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ShareRouter=(0,_reactRouterDom.withRouter)((function(_ref){var children=_ref.children,history=_ref.history;(0,_navigation.registerRouter)({history:history});return children}));var App=function App(deps){var _deps$legacy$licenseS=deps.legacy.licenseStatus,status=_deps$legacy$licenseS.status,message=_deps$legacy$licenseS.message;if(status!==_constants2.LICENSE_STATUS_VALID){return _react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.app.licenseErrorTitle",defaultMessage:"License error"}),color:"warning",iconType:"help"},message," ",_react.default.createElement(_eui.EuiLink,{href:"#/management/elasticsearch/license_management/home"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.app.licenseErrorLinkText",defaultMessage:"Manage your license."})))}return _react.default.createElement(_reactRouterDom.HashRouter,null,_react.default.createElement(ShareRouter,null,_react.default.createElement(_app_context.AppContextProvider,{value:deps},_react.default.createElement(AppWithoutRouter,null))))};exports.App=App;var AppWithoutRouter=function AppWithoutRouter(){return _react.default.createElement(_reactRouterDom.Switch,null,_react.default.createElement(_reactRouterDom.Route,{exact:true,path:"".concat(_constants.BASE_PATH,"watches"),component:_watch_list.WatchList}),_react.default.createElement(_reactRouterDom.Route,{exact:true,path:"".concat(_constants.BASE_PATH,"watches/watch/:id/status"),component:_watch_status.WatchStatus}),_react.default.createElement(_reactRouterDom.Route,{exact:true,path:"".concat(_constants.BASE_PATH,"watches/watch/:id/edit"),component:_watch_edit.WatchEdit}),_react.default.createElement(_reactRouterDom.Route,{exact:true,path:"".concat(_constants.BASE_PATH,"watches/new-watch/:type(json|threshold)"),component:_watch_edit.WatchEdit}),_react.default.createElement(_reactRouterDom.Redirect,{from:_constants.BASE_PATH,to:"".concat(_constants.BASE_PATH,"watches")}))};exports.AppWithoutRouter=AppWithoutRouter},9098:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchStatus=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _watch_detail=__webpack_require__(9099);var _watch_history=__webpack_require__(9138);var _breadcrumbs=__webpack_require__(7375);var _api=__webpack_require__(7044);var _watch_details_context=__webpack_require__(7374);var _components=__webpack_require__(7074);var _navigation=__webpack_require__(7139);var _app_context=__webpack_require__(7066);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var WATCH_EXECUTION_HISTORY_TAB="watchExecutionHistoryTab";var WATCH_ACTIONS_TAB="watchActionsTab";var WATCH_STATUS_TABS=[{id:WATCH_EXECUTION_HISTORY_TAB,name:_i18n.i18n.translate("xpack.watcher.sections.watchStatus.executionHistoryTabLabel",{defaultMessage:"Execution history"})},{id:WATCH_ACTIONS_TAB,name:_i18n.i18n.translate("xpack.watcher.sections.watchStatus.actionsTabLabel",{defaultMessage:"Action statuses"})}];var WatchStatus=function WatchStatus(_ref){var id=_ref.match.params.id;var _useAppContext=(0,_app_context.useAppContext)(),chrome=_useAppContext.chrome,MANAGEMENT_BREADCRUMB=_useAppContext.legacy.MANAGEMENT_BREADCRUMB,toasts=_useAppContext.toasts;var _useLoadWatchDetail=(0,_api.useLoadWatchDetail)(id),watchDetailError=_useLoadWatchDetail.error,watchDetail=_useLoadWatchDetail.data,isWatchDetailLoading=_useLoadWatchDetail.isLoading;var _useState=(0,_react.useState)(WATCH_EXECUTION_HISTORY_TAB),_useState2=_slicedToArray(_useState,2),selectedTab=_useState2[0],setSelectedTab=_useState2[1];var _useState3=(0,_react.useState)(undefined),_useState4=_slicedToArray(_useState3,2),isActivated=_useState4[0],setIsActivated=_useState4[1];var _useState5=(0,_react.useState)([]),_useState6=_slicedToArray(_useState5,2),watchesToDelete=_useState6[0],setWatchesToDelete=_useState6[1];var _useState7=(0,_react.useState)(false),_useState8=_slicedToArray(_useState7,2),isTogglingActivation=_useState8[0],setIsTogglingActivation=_useState8[1];(0,_react.useEffect)((function(){chrome.setBreadcrumbs([MANAGEMENT_BREADCRUMB,_breadcrumbs.listBreadcrumb,_breadcrumbs.statusBreadcrumb])}),[id,chrome,MANAGEMENT_BREADCRUMB]);var errorCode=(0,_components.getPageErrorCode)(watchDetailError);if(isWatchDetailLoading){return _react.default.createElement(_components.SectionLoading,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchStatus.loadingWatchDetailsDescription",defaultMessage:"Loading watch details…"}))}if(errorCode){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_components.PageError,{errorCode:errorCode,id:id}))}if(watchDetail){var isSystemWatch=watchDetail.isSystemWatch,watchId=watchDetail.id,watchStatus=watchDetail.watchStatus,watchName=watchDetail.name;if(isActivated===undefined){setIsActivated(typeof watchStatus.isActive!=="undefined"?watchStatus.isActive:false)}var activationButtonText=isActivated?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchTable.deactivateWatchLabel",defaultMessage:"Deactivate"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchTable.activateWatchLabel",defaultMessage:"Activate"});var toggleWatchActivation=function toggleWatchActivation(){var toggleActivation,_ref2,error,message;return regeneratorRuntime.async((function toggleWatchActivation$(_context){while(1){switch(_context.prev=_context.next){case 0:toggleActivation=isActivated?_api.deactivateWatch:_api.activateWatch;setIsTogglingActivation(true);_context.next=4;return regeneratorRuntime.awrap(toggleActivation(watchId));case 4:_ref2=_context.sent;error=_ref2.error;setIsTogglingActivation(false);if(!error){_context.next=10;break}message=isActivated?_i18n.i18n.translate("xpack.watcher.sections.watchList.toggleActivatationErrorNotification.deactivateDescriptionText",{defaultMessage:"Couldn't deactivate watch"}):_i18n.i18n.translate("xpack.watcher.sections.watchList.toggleActivatationErrorNotification.activateDescriptionText",{defaultMessage:"Couldn't activate watch"});return _context.abrupt("return",toasts.addDanger(message));case 10:setIsActivated(!isActivated);case 11:case"end":return _context.stop()}}}))};return _react.default.createElement(_watch_details_context.WatchDetailsContext.Provider,{value:{watchDetailError:watchDetailError,watchDetail:watchDetail,isWatchDetailLoading:isWatchDetailLoading}},_react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_components.DeleteWatchesModal,{callback:function callback(deleted){if(deleted){(0,_navigation.goToWatchList)()}setWatchesToDelete([])},watchesToDelete:watchesToDelete}),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h1",{"data-test-subj":"pageTitle"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchDetail.header",defaultMessage:"Current status for '{watch}'",values:{watch:watchName?watchName:watchId}})))),isSystemWatch?_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{content:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchDetail.headerBadgeToolipText",defaultMessage:"You cannot deactivate or delete a system watch."})},_react.default.createElement(_eui.EuiBadge,{color:"hollow"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchDetail.headerBadgeText",defaultMessage:"System watch"})))):_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"toggleWatchActivationButton",onClick:function onClick(){return toggleWatchActivation()},isLoading:isTogglingActivation},activationButtonText)),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"deleteWatchButton",onClick:function onClick(){setWatchesToDelete([watchId])},color:"danger",disabled:false},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.deleteWatchButtonLabel",defaultMessage:"Delete"})))))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiTabs,null,WATCH_STATUS_TABS.map((function(tab,index){return _react.default.createElement(_eui.EuiTab,{onClick:function onClick(){setSelectedTab(tab.id)},isSelected:tab.id===selectedTab,key:index,"data-test-subj":"tab"},tab.name)}))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),selectedTab===WATCH_ACTIONS_TAB?_react.default.createElement(_watch_detail.WatchDetail,null):_react.default.createElement(_watch_history.WatchHistory,null)))}return null};exports.WatchStatus=WatchStatus},9099:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchDetail=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);var _api=__webpack_require__(7044);var _components=__webpack_require__(7074);var _constants=__webpack_require__(1880);var _watch_details_context=__webpack_require__(7374);var _app_context=__webpack_require__(7066);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var WatchDetail=function WatchDetail(){var _useAppContext=(0,_app_context.useAppContext)(),toasts=_useAppContext.toasts;var _useContext=(0,_react.useContext)(_watch_details_context.WatchDetailsContext),watchDetail=_useContext.watchDetail;var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),actionStatuses=_useState2[0],setActionStatuses=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isActionStatusLoading=_useState4[0],setIsActionStatusLoading=_useState4[1];var _useState5=(0,_react.useState)(null),_useState6=_slicedToArray(_useState5,2),selectedErrorAction=_useState6[0],setSelectedErrorAction=_useState6[1];var watchId=watchDetail.id,watchErrors=watchDetail.watchErrors,watchStatus=watchDetail.watchStatus,isSystemWatch=watchDetail.isSystemWatch;var actionErrors=watchErrors&&watchErrors.actionErrors;var currentActionStatuses=watchStatus&&watchStatus.actionStatuses;var hasActionErrors=actionErrors&&Object.keys(actionErrors).length>0;(0,_react.useEffect)((function(){var actionStatusesWithErrors=currentActionStatuses&&currentActionStatuses.map((function(currentActionStatus){var errors=actionErrors&&actionErrors[currentActionStatus.id];return _objectSpread({},currentActionStatus,{errors:errors||[]})}));setActionStatuses(actionStatusesWithErrors)}),[watchDetail,actionErrors,currentActionStatuses]);var baseColumns=[{field:"id",name:_i18n.i18n.translate("xpack.watcher.sections.watchDetail.watchTable.actionHeader",{defaultMessage:"Name"}),sortable:true,truncateText:true},{field:"state",name:_i18n.i18n.translate("xpack.watcher.sections.watchDetail.watchTable.stateHeader",{defaultMessage:"State"}),sortable:true,truncateText:true,render:function render(state){return _react.default.createElement(_components.WatchStatus,{status:state})}}];var errorColumn={field:"errors",name:_i18n.i18n.translate("xpack.watcher.sections.watchDetail.watchTable.errorsHeader",{defaultMessage:"Errors"}),render:function render(errors,action){var actionId=action.id;if(errors&&errors.length>0){return _react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return setSelectedErrorAction(actionId)},"data-test-subj":"actionErrorsButton"},_i18n.i18n.translate("xpack.watcher.sections.watchDetail.watchTable.errorsCellText",{defaultMessage:"{total, number} {total, plural, one {error} other {errors}}",values:{total:errors.length}}))}return _react.default.createElement(_react.Fragment,null)}};var actionColumn={actions:[{available:function available(action){return action.isAckable&&!isSystemWatch},render:function render(action){var actionId=action.id;return _react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.watcher.sections.watchDetail.watchTable.ackActionCellTooltipTitle",{defaultMessage:"Acknowledge watch action."})},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"check",isLoading:isActionStatusLoading,"data-test-subj":"acknowledgeWatchButton",onClick:function _callee(){var newWatchStatus,newActionStatusesWithErrors;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsActionStatusLoading(true);_context.prev=1;_context.next=4;return regeneratorRuntime.awrap((0,_api.ackWatchAction)(watchId,actionId));case 4:newWatchStatus=_context.sent;newActionStatusesWithErrors=newWatchStatus.actionStatuses.map((function(newActionStatus){var errors=actionErrors&&actionErrors[newActionStatus.id];return _objectSpread({},newActionStatus,{errors:errors||[]})}));setIsActionStatusLoading(false);return _context.abrupt("return",setActionStatuses(newActionStatusesWithErrors));case 10:_context.prev=10;_context.t0=_context["catch"](1);setIsActionStatusLoading(false);toasts.addDanger(_i18n.i18n.translate("xpack.watcher.sections.watchDetail.watchTable.ackActionErrorMessage",{defaultMessage:"Error acknowledging action {actionId}",values:{actionId:action.id}}));case 14:case"end":return _context.stop()}}}),null,null,[[1,10]])}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchDetail.watchTable.ackActionCellTitle",defaultMessage:"Acknowledge"})))}}]};var columns=hasActionErrors?[].concat(baseColumns,[errorColumn,actionColumn]):[].concat(baseColumns,[actionColumn]);return _react.default.createElement("div",{"data-test-subj":"watchDetailSection"},selectedErrorAction&&_react.default.createElement(_eui.EuiFlyout,{size:"s","aria-labelledby":"flyoutActionErrorTitle","data-test-subj":"actionErrorsFlyout",onClose:function onClose(){return setSelectedErrorAction(null)}},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h2",{id:"flyoutActionErrorTitle","data-test-subj":"title"},selectedErrorAction))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.watcher.sections.watchDetail.actionErrorsCalloutTitle",{defaultMessage:"This action contains errors"}),color:"danger",iconType:"cross","data-test-subj":"errorMessage"},actionErrors[selectedErrorAction].length>1?_react.default.createElement("ul",null,actionErrors[selectedErrorAction].map((function(actionError,errorIndex){return _react.default.createElement("li",{key:"action-error-".concat(errorIndex)},actionError.message)}))):_react.default.createElement("p",null,actionErrors[selectedErrorAction][0].message)))),_react.default.createElement(_eui.EuiInMemoryTable,{items:actionStatuses,itemId:"id",columns:columns,pagination:_constants.PAGINATION,sorting:true,"data-test-subj":"watchActionStatusTable",message:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchDetail.watchTable.noWatchesMessage",defaultMessage:"No actions to show"})}))};exports.WatchDetail=WatchDetail},9100:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Settings",{enumerable:true,get:function get(){return _settings.Settings}});var _settings=__webpack_require__(9101)},9101:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Settings=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Settings=function(){function Settings(props){_classCallCheck(this,Settings);this.actionTypes=props.actionTypes}_createClass(Settings,null,[{key:"fromUpstreamJson",value:function fromUpstreamJson(json){var actionTypes=json.action_types;var props={actionTypes:actionTypes};return new Settings(props)}}]);return Settings}();exports.Settings=Settings},9102:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Watch=void 0;var _lodash=__webpack_require__(3);var _constants=__webpack_require__(1880);var _json_watch=__webpack_require__(9103);var _threshold_watch=__webpack_require__(7369);var _monitoring_watch=__webpack_require__(9125);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var WatchTypes={};(0,_lodash.set)(WatchTypes,_constants.WATCH_TYPES.JSON,_json_watch.JsonWatch);(0,_lodash.set)(WatchTypes,_constants.WATCH_TYPES.THRESHOLD,_threshold_watch.ThresholdWatch);(0,_lodash.set)(WatchTypes,_constants.WATCH_TYPES.MONITORING,_monitoring_watch.MonitoringWatch);var Watch=function(){function Watch(){_classCallCheck(this,Watch)}_createClass(Watch,null,[{key:"fromUpstreamJson",value:function fromUpstreamJson(){var upstreamWatch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var type=(0,_lodash.get)(upstreamWatch,"type");var WatchType=WatchTypes[type];Object.assign(upstreamWatch,{isNew:false});return WatchType.fromUpstreamJson(upstreamWatch)}}]);return Watch}();exports.Watch=Watch;_defineProperty(Watch,"getWatchTypes",(function(){return WatchTypes}))},9103:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JsonWatch=void 0;var _uuid=_interopRequireDefault(__webpack_require__(86));var _lodash=__webpack_require__(3);var _base_watch=__webpack_require__(7365);var _constants=__webpack_require__(1880);var _default_watch=_interopRequireDefault(__webpack_require__(9124));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var JsonWatch=function(_BaseWatch){_inherits(JsonWatch,_BaseWatch);function JsonWatch(){var _this;var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,JsonWatch);props.type=_constants.WATCH_TYPES.JSON;props.id=typeof props.id==="undefined"?_uuid.default.v4():props.id;_this=_possibleConstructorReturn(this,_getPrototypeOf(JsonWatch).call(this,props));var existingWatch=(0,_lodash.get)(props,"watch");_this.watch=existingWatch?existingWatch:_default_watch.default;_this.watchString=(0,_lodash.get)(props,"watchString",JSON.stringify(existingWatch?existingWatch:_default_watch.default,null,2));_this.id=props.id;return _this}_createClass(JsonWatch,[{key:"validate",value:function validate(){var validationResult={};var idRegex=/^[A-Za-z0-9\-\_]+$/;var errors={id:[],json:[]};validationResult.errors=errors;if(!this.id){errors.id.push(_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.error.requiredIdText",{defaultMessage:"ID is required"}))}else if(!idRegex.test(this.id)){errors.id.push(_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.error.invalidIdText",{defaultMessage:"ID can only contain letters, underscores, dashes, and numbers."}))}if(!this.watchString||this.watchString===""){errors.json.push(_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.error.requiredJsonText",{defaultMessage:"JSON is required"}))}else{try{var parsedJson=JSON.parse(this.watchString);if(parsedJson&&_typeof(parsedJson)==="object"){var actions=parsedJson.actions;if(actions){var invalidActions=Object.keys(actions).find((function(actionKey){var actionKeys=Object.keys(actions[actionKey]);var type;Object.keys(_constants.ACTION_TYPES).forEach((function(actionTypeKey){if(actionKeys.includes(_constants.ACTION_TYPES[actionTypeKey])&&!actionKeys.includes(_constants.ACTION_TYPES.UNKNOWN)){type=_constants.ACTION_TYPES[actionTypeKey]}}));return!type}));if(invalidActions){errors.json.push(_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.error.invalidActionType",{defaultMessage:'Unknown action type provided for action "{action}".',values:{action:invalidActions}}))}}}}catch(e){errors.json.push(_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.error.invalidJsonText",{defaultMessage:"Invalid JSON"}))}}return validationResult}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(JsonWatch.prototype),"upstreamJson",this);Object.assign(result,{watch:this.watch});return result}}],[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamWatch){return new JsonWatch(upstreamWatch)}}]);return JsonWatch}(_base_watch.BaseWatch);exports.JsonWatch=JsonWatch;_defineProperty(JsonWatch,"defaultWatchJson",_default_watch.default);_defineProperty(JsonWatch,"typeName",_i18n.i18n.translate("xpack.watcher.models.jsonWatch.typeName",{defaultMessage:"Advanced Watch"}));_defineProperty(JsonWatch,"iconClass","");_defineProperty(JsonWatch,"selectMessage",_i18n.i18n.translate("xpack.watcher.models.jsonWatch.selectMessageText",{defaultMessage:"Set up a custom watch in raw JSON."}));_defineProperty(JsonWatch,"isCreatable",true);_defineProperty(JsonWatch,"selectSortOrder",100)},9104:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSearchValue=getSearchValue;var _lodash=__webpack_require__(3);function getSearchValue(obj,fields){return(0,_lodash.values)((0,_lodash.pick)(obj,fields)).join("\n")}},9105:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Action=void 0;var _lodash=__webpack_require__(3);var _constants=__webpack_require__(1880);var _email_action=__webpack_require__(9106);var _logging_action=__webpack_require__(9107);var _slack_action=__webpack_require__(9108);var _webhook_action=__webpack_require__(9109);var _index_action=__webpack_require__(9110);var _pagerduty_action=__webpack_require__(9111);var _jira_action=__webpack_require__(9112);var _unknown_action=__webpack_require__(9113);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ActionTypes={};(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.EMAIL,_email_action.EmailAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.LOGGING,_logging_action.LoggingAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.SLACK,_slack_action.SlackAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.WEBHOOK,_webhook_action.WebhookAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.INDEX,_index_action.IndexAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.PAGERDUTY,_pagerduty_action.PagerDutyAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.JIRA,_jira_action.JiraAction);var Action=function(){function Action(){_classCallCheck(this,Action)}_createClass(Action,null,[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamAction){var type=(0,_lodash.get)(upstreamAction,"type");var ActionType=ActionTypes[type]||_unknown_action.UnknownAction;return ActionType.fromUpstreamJson(upstreamAction)}}]);return Action}();exports.Action=Action;_defineProperty(Action,"getActionTypes",(function(){return ActionTypes}))},9106:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmailAction=void 0;var _lodash=__webpack_require__(3);var _base_action=__webpack_require__(7094);var _i18n=__webpack_require__(2);var _x_only=__webpack_require__(7710);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmailAction=function(_BaseAction){_inherits(EmailAction,_BaseAction);function EmailAction(){var _this;var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,EmailAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(EmailAction).call(this,props));var toArray=(0,_lodash.get)(props,"to",(0,_x_only.getDefaultEmailTo)());_this.to=(0,_lodash.isArray)(toArray)?toArray:toArray&&[toArray];var defaultSubject=_i18n.i18n.translate("xpack.watcher.models.emailAction.defaultSubjectText",{defaultMessage:"Watch [{context}] has exceeded the threshold",values:{context:"{{ctx.metadata.name}}"}});_this.subject=(0,_lodash.get)(props,"subject",props.ignoreDefaults?null:defaultSubject);_this.body=(0,_lodash.get)(props,"body");return _this}_createClass(EmailAction,[{key:"validate",value:function validate(){var errors={to:[]};if(!this.to||!this.to.length){errors.to.push(_i18n.i18n.translate("xpack.watcher.watchActions.email.emailRecipientIsRequiredValidationMessage",{defaultMessage:'"To" email address is required.'}))}return errors}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(EmailAction.prototype),"upstreamJson",this);Object.assign(result,{to:this.to,subject:this.subject,body:this.body,email:{to:this.to&&this.to.length>0?this.to:undefined,subject:this.subject,body:{text:this.body}}});return result}},{key:"simulateMessage",get:function get(){var toList=this.to.join(", ");return _i18n.i18n.translate("xpack.watcher.models.emailAction.simulateMessage",{defaultMessage:"Sample email sent to {toList}",values:{toList:toList}})}},{key:"simulateFailMessage",get:function get(){var toList=this.to.join(", ");return _i18n.i18n.translate("xpack.watcher.models.emailAction.simulateFailMessage",{defaultMessage:"Failed to send email to {toList}.",values:{toList:toList}})}}],[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamAction){return new EmailAction(upstreamAction)}}]);return EmailAction}(_base_action.BaseAction);exports.EmailAction=EmailAction;_defineProperty(EmailAction,"typeName",_i18n.i18n.translate("xpack.watcher.models.emailAction.typeName",{defaultMessage:"Email"}));_defineProperty(EmailAction,"iconClass","email");_defineProperty(EmailAction,"selectMessage",_i18n.i18n.translate("xpack.watcher.models.emailAction.selectMessageText",{defaultMessage:"Send an email from your server."}));_defineProperty(EmailAction,"simulatePrompt",_i18n.i18n.translate("xpack.watcher.models.emailAction.simulateButtonLabel",{defaultMessage:"Send test email"}))},9107:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoggingAction=void 0;var _lodash=__webpack_require__(3);var _base_action=__webpack_require__(7094);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var LoggingAction=function(_BaseAction){_inherits(LoggingAction,_BaseAction);function LoggingAction(){var _this;var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,LoggingAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(LoggingAction).call(this,props));var defaultText=_i18n.i18n.translate("xpack.watcher.models.loggingAction.defaultText",{defaultMessage:"Watch [{context}] has exceeded the threshold",values:{context:"{{ctx.metadata.name}}"}});_this.text=(0,_lodash.get)(props,"text",props.ignoreDefaults?null:defaultText);return _this}_createClass(LoggingAction,[{key:"validate",value:function validate(){var errors={text:[]};if(!this.text){errors.text.push(_i18n.i18n.translate("xpack.watcher.watchActions.logging.logTextIsRequiredValidationMessage",{defaultMessage:"Log text is required."}))}return errors}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(LoggingAction.prototype),"upstreamJson",this);var text;if(typeof this.text==="string"){if(!!this.text.trim()){text=this.text}}else{text=this.text}Object.assign(result,{text:text,logging:{text:text}});return result}},{key:"simulateMessage",get:function get(){return _i18n.i18n.translate("xpack.watcher.models.loggingAction.simulateMessage",{defaultMessage:"Sample message logged"})}},{key:"simulateFailMessage",get:function get(){return _i18n.i18n.translate("xpack.watcher.models.loggingAction.simulateFailMessage",{defaultMessage:"Failed to log sample message."})}}],[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamAction){return new LoggingAction(upstreamAction)}}]);return LoggingAction}(_base_action.BaseAction);exports.LoggingAction=LoggingAction;_defineProperty(LoggingAction,"typeName",_i18n.i18n.translate("xpack.watcher.models.loggingAction.typeName",{defaultMessage:"Logging"}));_defineProperty(LoggingAction,"iconClass","logsApp");_defineProperty(LoggingAction,"selectMessage",_i18n.i18n.translate("xpack.watcher.models.loggingAction.selectMessageText",{defaultMessage:"Add an item to the logs."}));_defineProperty(LoggingAction,"simulatePrompt",_i18n.i18n.translate("xpack.watcher.models.loggingAction.simulateButtonLabel",{defaultMessage:"Log a sample message"}))},9108:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SlackAction=void 0;var _lodash=__webpack_require__(3);var _base_action=__webpack_require__(7094);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SlackAction=function(_BaseAction){_inherits(SlackAction,_BaseAction);function SlackAction(){var _this;var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,SlackAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(SlackAction).call(this,props));var toArray=(0,_lodash.get)(props,"to");_this.to=(0,_lodash.isArray)(toArray)?toArray:toArray&&[toArray];var defaultText=_i18n.i18n.translate("xpack.watcher.models.slackAction.defaultText",{defaultMessage:"Watch [{context}] has exceeded the threshold",values:{context:"{{ctx.metadata.name}}"}});_this.text=(0,_lodash.get)(props,"text",props.ignoreDefaults?null:defaultText);return _this}_createClass(SlackAction,[{key:"validate",value:function validate(){var errors={to:[],text:[]};return errors}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(SlackAction.prototype),"upstreamJson",this);var to=this.to&&this.to.length>0?this.to:undefined;var message=this.text||to?{text:this.text,to:to}:{};Object.assign(result,{to:to,text:this.text,slack:{message:message}});return result}},{key:"simulateMessage",get:function get(){var toList=this.to&&this.to.join(", ");return _i18n.i18n.translate("xpack.watcher.models.slackAction.simulateMessage",{defaultMessage:"Sample Slack message sent {toList}.",values:{toList:toList?"to ".concat(toList):""}})}},{key:"simulateFailMessage",get:function get(){var toList=this.to&&this.to.join(", ");return _i18n.i18n.translate("xpack.watcher.models.slackAction.simulateFailMessage",{defaultMessage:"Failed to send sample Slack message {toList}.",values:{toList:toList?"to ".concat(toList):""}})}}],[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamAction){return new SlackAction(upstreamAction)}}]);return SlackAction}(_base_action.BaseAction);exports.SlackAction=SlackAction;_defineProperty(SlackAction,"typeName",_i18n.i18n.translate("xpack.watcher.models.slackAction.TypeName",{defaultMessage:"Slack"}));_defineProperty(SlackAction,"iconClass","logoSlack");_defineProperty(SlackAction,"selectMessage",_i18n.i18n.translate("xpack.watcher.models.slackAction.selectMessageText",{defaultMessage:"Send a message to a Slack user or channel."}));_defineProperty(SlackAction,"simulatePrompt",_i18n.i18n.translate("xpack.watcher.models.slackAction.simulateButtonLabel",{defaultMessage:"Send a sample message"}))},9109:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WebhookAction=void 0;var _lodash=__webpack_require__(3);var _base_action=__webpack_require__(7094);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var WebhookAction=function(_BaseAction){_inherits(WebhookAction,_BaseAction);function WebhookAction(){var _this;var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,WebhookAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(WebhookAction).call(this,props));var defaultJson=JSON.stringify({message:"Watch [{{ctx.metadata.name}}] has exceeded the threshold"},null,2);_this.body=(0,_lodash.get)(props,"body",props.ignoreDefaults?null:defaultJson);_this.method=(0,_lodash.get)(props,"method");_this.host=(0,_lodash.get)(props,"host");_this.port=(0,_lodash.get)(props,"port");_this.scheme=(0,_lodash.get)(props,"scheme","http");_this.path=(0,_lodash.get)(props,"path");_this.username=(0,_lodash.get)(props,"username");_this.password=(0,_lodash.get)(props,"password");_this.contentType=(0,_lodash.get)(props,"contentType");_this.fullPath="".concat(_this.host,":").concat(_this.port).concat(_this.path?"/"+_this.path:"");return _this}_createClass(WebhookAction,[{key:"validate",value:function validate(){var errors={host:[],port:[],body:[],username:[],password:[]};if(!this.host){errors.host.push(_i18n.i18n.translate("xpack.watcher.watchActions.webhook.hostIsRequiredValidationMessage",{defaultMessage:"Webhook host is required."}))}if(!this.port){errors.port.push(_i18n.i18n.translate("xpack.watcher.watchActions.webhook.portIsRequiredValidationMessage",{defaultMessage:"Webhook port is required."}))}if(this.contentType==="application/json"&&typeof this.body==="string"&&this.body!==""){var invalidJsonMessage=_i18n.i18n.translate("xpack.watcher.watchActions.webhook.invalidJsonValidationMessage",{defaultMessage:"Invalid JSON"});try{var parsedJson=JSON.parse(this.body);if(parsedJson&&_typeof(parsedJson)!=="object"){errors.body.push(invalidJsonMessage)}}catch(e){errors.body.push(invalidJsonMessage)}}if(this.username&&!this.password){errors.password.push(_i18n.i18n.translate("xpack.watcher.watchActions.webhook.passwordIsRequiredIfUsernameValidationMessage",{defaultMessage:"Password is required."}))}if(this.password&&!this.username){errors.username.push(_i18n.i18n.translate("xpack.watcher.watchActions.webhook.usernameIsRequiredIfPasswordValidationMessage",{defaultMessage:"Username is required."}))}return errors}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(WebhookAction.prototype),"upstreamJson",this);Object.assign(result,{method:this.method,host:this.host,port:this.port,scheme:this.scheme,path:this.path,body:this.body,username:this.username,password:this.password,webhook:{host:this.host,port:this.port}});return result}},{key:"simulateMessage",get:function get(){return _i18n.i18n.translate("xpack.watcher.models.webhookAction.simulateMessage",{defaultMessage:"Sample request sent to {fullPath}",values:{fullPath:this.fullPath}})}},{key:"simulateFailMessage",get:function get(){return _i18n.i18n.translate("xpack.watcher.models.webhookAction.simulateFailMessage",{defaultMessage:"Failed to send request to {fullPath}.",values:{fullPath:this.fullPath}})}}],[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamAction){return new WebhookAction(upstreamAction)}}]);return WebhookAction}(_base_action.BaseAction);exports.WebhookAction=WebhookAction;_defineProperty(WebhookAction,"typeName",_i18n.i18n.translate("xpack.watcher.models.webhookAction.typeName",{defaultMessage:"Webhook"}));_defineProperty(WebhookAction,"iconClass","logoWebhook");_defineProperty(WebhookAction,"selectMessage",_i18n.i18n.translate("xpack.watcher.models.webhookAction.selectMessageText",{defaultMessage:"Send a request to a web service."}));_defineProperty(WebhookAction,"simulatePrompt",_i18n.i18n.translate("xpack.watcher.models.webhookAction.simulateButtonLabel",{defaultMessage:"Send request"}))},9110:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexAction=void 0;var _lodash=__webpack_require__(3);var _base_action=__webpack_require__(7094);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexAction=function(_BaseAction){_inherits(IndexAction,_BaseAction);function IndexAction(){var _this;var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,IndexAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndexAction).call(this,props));_this.index=(0,_lodash.get)(props,"index");return _this}_createClass(IndexAction,[{key:"validate",value:function validate(){var errors={index:[]};if(!this.index){errors.index.push(_i18n.i18n.translate("xpack.watcher.watchActions.index.indexIsRequiredValidationMessage",{defaultMessage:"Index name is required."}))}return errors}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(IndexAction.prototype),"upstreamJson",this);Object.assign(result,{index:{index:this.index}});return result}},{key:"simulateMessage",get:function get(){var index=this.index||"";return _i18n.i18n.translate("xpack.watcher.models.indexAction.simulateMessage",{defaultMessage:"Index {index} has been indexed.",values:{index:index}})}},{key:"simulateFailMessage",get:function get(){var index=this.index||"";return _i18n.i18n.translate("xpack.watcher.models.indexAction.simulateFailMessage",{defaultMessage:"Failed to index {index}.",values:{index:index}})}}],[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamAction){return new IndexAction(upstreamAction)}}]);return IndexAction}(_base_action.BaseAction);exports.IndexAction=IndexAction;_defineProperty(IndexAction,"typeName",_i18n.i18n.translate("xpack.watcher.models.indexAction.typeName",{defaultMessage:"Index"}));_defineProperty(IndexAction,"iconClass","indexOpen");_defineProperty(IndexAction,"selectMessage",_i18n.i18n.translate("xpack.watcher.models.indexAction.selectMessageText",{defaultMessage:"Index data into Elasticsearch."}));_defineProperty(IndexAction,"simulatePrompt",_i18n.i18n.translate("xpack.watcher.models.indexAction.simulateButtonLabel",{defaultMessage:"Index data"}))},9111:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PagerDutyAction=void 0;var _lodash=__webpack_require__(3);var _base_action=__webpack_require__(7094);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PagerDutyAction=function(_BaseAction){_inherits(PagerDutyAction,_BaseAction);function PagerDutyAction(){var _this;var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,PagerDutyAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(PagerDutyAction).call(this,props));var defaultDescription=_i18n.i18n.translate("xpack.watcher.models.pagerdutyAction.defaultDescriptionText",{defaultMessage:"Watch [{context}] has exceeded the threshold",values:{context:"{{ctx.metadata.name}}"}});_this.description=(0,_lodash.get)(props,"description",props.ignoreDefaults?null:defaultDescription);return _this}_createClass(PagerDutyAction,[{key:"validate",value:function validate(){var errors={description:[]};if(!this.description){errors.description.push(_i18n.i18n.translate("xpack.watcher.watchActions.pagerduty.descriptionIsRequiredValidationMessage",{defaultMessage:"PagerDuty description is required."}))}return errors}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(PagerDutyAction.prototype),"upstreamJson",this);Object.assign(result,{description:this.description,pagerduty:{description:this.description}});return result}},{key:"simulateMessage",get:function get(){return _i18n.i18n.translate("xpack.watcher.models.pagerDutyAction.simulateMessage",{defaultMessage:"PagerDuty event has been sent."})}},{key:"simulateFailMessage",get:function get(){return _i18n.i18n.translate("xpack.watcher.models.pagerDutyAction.simulateFailMessage",{defaultMessage:"Failed to send PagerDuty event."})}}],[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamAction){return new PagerDutyAction(upstreamAction)}}]);return PagerDutyAction}(_base_action.BaseAction);exports.PagerDutyAction=PagerDutyAction;_defineProperty(PagerDutyAction,"typeName",_i18n.i18n.translate("xpack.watcher.models.pagerDutyAction.typeName",{defaultMessage:"PagerDuty"}));_defineProperty(PagerDutyAction,"iconClass","apps");_defineProperty(PagerDutyAction,"selectMessage",_i18n.i18n.translate("xpack.watcher.models.pagerDutyAction.selectMessageText",{defaultMessage:"Create an event in PagerDuty."}));_defineProperty(PagerDutyAction,"simulatePrompt",_i18n.i18n.translate("xpack.watcher.models.pagerDutyAction.simulateButtonLabel",{defaultMessage:"Send a PagerDuty event"}))},9112:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JiraAction=void 0;var _lodash=__webpack_require__(3);var _base_action=__webpack_require__(7094);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var JiraAction=function(_BaseAction){_inherits(JiraAction,_BaseAction);function JiraAction(){var _this;var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,JiraAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(JiraAction).call(this,props));var defaultSummary=_i18n.i18n.translate("xpack.watcher.models.jiraAction.defaultSummaryText",{defaultMessage:"Watch [{context}] has exceeded the threshold",values:{context:"{{ctx.metadata.name}}"}});_this.summary=(0,_lodash.get)(props,"summary",props.ignoreDefaults?null:defaultSummary);_this.projectKey=(0,_lodash.get)(props,"projectKey");_this.issueType=(0,_lodash.get)(props,"issueType");return _this}_createClass(JiraAction,[{key:"validate",value:function validate(){var errors={projectKey:[],issueType:[],summary:[]};if(!this.projectKey){errors.projectKey.push(_i18n.i18n.translate("xpack.watcher.watchActions.jira.projectKeyIsRequiredValidationMessage",{defaultMessage:"Jira project key is required."}))}if(!this.issueType){errors.issueType.push(_i18n.i18n.translate("xpack.watcher.watchActions.jira.issueTypeNameIsRequiredValidationMessage",{defaultMessage:"Jira issue type is required."}))}if(!this.summary){errors.summary.push(_i18n.i18n.translate("xpack.watcher.watchActions.jira.summaryIsRequiredValidationMessage",{defaultMessage:"Jira summary is required."}))}return errors}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(JiraAction.prototype),"upstreamJson",this);Object.assign(result,{projectKey:this.projectKey,issueType:this.issueType,summary:this.summary,jira:{fields:{project:{key:this.projectKey},issuetype:{name:this.issueType},summary:this.summary}}});return result}},{key:"simulateMessage",get:function get(){return _i18n.i18n.translate("xpack.watcher.models.jiraAction.simulateMessage",{defaultMessage:"Jira issue has been created."})}},{key:"simulateFailMessage",get:function get(){return _i18n.i18n.translate("xpack.watcher.models.jiraAction.simulateFailMessage",{defaultMessage:"Failed to create Jira issue."})}}],[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamAction){return new JiraAction(upstreamAction)}}]);return JiraAction}(_base_action.BaseAction);exports.JiraAction=JiraAction;_defineProperty(JiraAction,"typeName",_i18n.i18n.translate("xpack.watcher.models.jiraAction.typeName",{defaultMessage:"Jira"}));_defineProperty(JiraAction,"iconClass","apps");_defineProperty(JiraAction,"selectMessage",_i18n.i18n.translate("xpack.watcher.models.jiraAction.selectMessageText",{defaultMessage:"Create an issue in Atlassian’s Jira Software."}));_defineProperty(JiraAction,"simulatePrompt",_i18n.i18n.translate("xpack.watcher.models.jiraAction.simulateButtonLabel",{defaultMessage:"Create a sample Jira issue"}))},9113:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UnknownAction=void 0;var _lodash=__webpack_require__(3);var _base_action=__webpack_require__(7094);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var UnknownAction=function(_BaseAction){_inherits(UnknownAction,_BaseAction);function UnknownAction(){var _this;var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,UnknownAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(UnknownAction).call(this,props));_this.actionJson=(0,_lodash.get)(props,"actionJson");return _this}_createClass(UnknownAction,[{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(UnknownAction.prototype),"upstreamJson",this);Object.assign(result,{actionJson:this.actionJson});return result}}],[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamAction){return new UnknownAction(upstreamAction)}}]);return UnknownAction}(_base_action.BaseAction);exports.UnknownAction=UnknownAction},9114:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchStatus=void 0;var _lodash=__webpack_require__(3);var _get_moment=__webpack_require__(7368);var _action_status=__webpack_require__(9116);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var WatchStatus=function(){function WatchStatus(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,WatchStatus);this.id=(0,_lodash.get)(props,"id");this.state=(0,_lodash.get)(props,"state");this.comment=(0,_lodash.get)(props,"comment");this.isActive=(0,_lodash.get)(props,"isActive");this.lastFired=(0,_get_moment.getMoment)((0,_lodash.get)(props,"lastFired"));this.lastChecked=(0,_get_moment.getMoment)((0,_lodash.get)(props,"lastChecked"));this.lastMetCondition=(0,_get_moment.getMoment)((0,_lodash.get)(props,"lastMetCondition"));if(this.lastFired){this.lastFiredHumanized=this.lastFired.fromNow()}if(this.lastChecked){this.lastCheckedHumanized=this.lastChecked.fromNow()}var actionStatuses=(0,_lodash.get)(props,"actionStatuses",[]);this.actionStatuses=actionStatuses.map((function(actionStatus){return _action_status.ActionStatus.fromUpstreamJson(actionStatus)}))}_createClass(WatchStatus,null,[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamWatchStatus){return new WatchStatus(upstreamWatchStatus)}}]);return WatchStatus}();exports.WatchStatus=WatchStatus},9115:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMoment=getMoment;var _moment=_interopRequireDefault(__webpack_require__(13));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getMoment(date){if(!date){return null}return(0,_moment.default)(date)}},9116:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ActionStatus",{enumerable:true,get:function get(){return _action_status.ActionStatus}});var _action_status=__webpack_require__(9117)},9117:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ActionStatus=void 0;var _lodash=__webpack_require__(3);var _get_moment=__webpack_require__(7368);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var ActionStatus=function(){function ActionStatus(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,ActionStatus);this.id=(0,_lodash.get)(props,"id");this.state=(0,_lodash.get)(props,"state");this.isAckable=(0,_lodash.get)(props,"isAckable");this.lastAcknowledged=(0,_get_moment.getMoment)((0,_lodash.get)(props,"lastAcknowledged"));this.lastThrottled=(0,_get_moment.getMoment)((0,_lodash.get)(props,"lastThrottled"));this.lastExecution=(0,_get_moment.getMoment)((0,_lodash.get)(props,"lastExecution"));this.lastExecutionSuccessful=(0,_lodash.get)(props,"lastExecutionSuccessful");this.lastExecutionReason=(0,_lodash.get)(props,"lastExecutionReason");this.lastSuccessfulExecution=(0,_get_moment.getMoment)((0,_lodash.get)(props,"lastSuccessfulExecution"));if(this.lastAcknowledged){this.lastAcknowledgedHumanized=this.lastAcknowledged.fromNow()}if(this.lastExecution){this.lastExecutionHumanized=this.lastExecution.fromNow()}if(this.lastThrottled){this.lastThrottledHumanized=this.lastThrottled.fromNow()}}_createClass(ActionStatus,null,[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamActionStatus){return new ActionStatus(upstreamActionStatus)}}]);return ActionStatus}();exports.ActionStatus=ActionStatus},9118:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"WatchErrors",{enumerable:true,get:function get(){return _watch_errors.WatchErrors}});var _watch_errors=__webpack_require__(9119)},9119:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchErrors=void 0;var _lodash=__webpack_require__(3);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var WatchErrors=function(){function WatchErrors(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,WatchErrors);this.actionErrors=(0,_lodash.get)(props,"actions")}_createClass(WatchErrors,null,[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamWatchErrors){return new WatchErrors(upstreamWatchErrors)}}]);return WatchErrors}();exports.WatchErrors=WatchErrors},9120:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createActionId",{enumerable:true,get:function get(){return _create_action_id.createActionId}});var _create_action_id=__webpack_require__(9121)},9121:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createActionId=createActionId;function createActionId(actions,type){var existingIds=actions.map((function(action){return action.id}));var nextValidIncrement=1;var nextValidId=undefined;while(nextValidId===undefined){var proposedId="".concat(type,"_").concat(nextValidIncrement);if(!existingIds.includes(proposedId)){nextValidId=proposedId}else{nextValidIncrement++}}return nextValidId}},9122:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"checkActionIdCollision",{enumerable:true,get:function get(){return _check_action_id_collision.checkActionIdCollision}});var _check_action_id_collision=__webpack_require__(9123)},9123:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.checkActionIdCollision=checkActionIdCollision;var _lodash=__webpack_require__(3);function checkActionIdCollision(actions,action){var collision=(0,_lodash.find)(actions,{id:action.id});return Boolean(collision)}},9124:function(module){module.exports=JSON.parse('{"trigger":{"schedule":{"interval":"30m"}},"input":{"search":{"request":{"body":{"size":0,"query":{"match_all":{}}},"indices":["*"]}}},"condition":{"compare":{"ctx.payload.hits.total":{"gte":10}}},"actions":{"my-logging-action":{"logging":{"text":"There are {{ctx.payload.hits.total}} documents in your index. Threshold is 10."}}}}')},9125:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MonitoringWatch=void 0;var _base_watch=__webpack_require__(7365);var _constants=__webpack_require__(1880);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MonitoringWatch=function(_BaseWatch){_inherits(MonitoringWatch,_BaseWatch);function MonitoringWatch(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,MonitoringWatch);props.type=_constants.WATCH_TYPES.MONITORING;return _possibleConstructorReturn(this,_getPrototypeOf(MonitoringWatch).call(this,props))}_createClass(MonitoringWatch,[{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(MonitoringWatch.prototype),"upstreamJson",this);Object.assign(result,{watch:this.watch});return result}}],[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamWatch){return new MonitoringWatch(upstreamWatch)}}]);return MonitoringWatch}(_base_watch.BaseWatch);exports.MonitoringWatch=MonitoringWatch;_defineProperty(MonitoringWatch,"isCreatable",false)},9126:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchHistoryItem=void 0;__webpack_require__(710);var _lodash=__webpack_require__(3);var _get_moment=__webpack_require__(7368);var _watch_status=__webpack_require__(7367);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var WatchHistoryItem=function(){function WatchHistoryItem(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,WatchHistoryItem);this.id=props.id;this.watchId=props.watchId;this.details=props.details;this.startTime=(0,_get_moment.getMoment)(props.startTime);this.watchStatus=_watch_status.WatchStatus.fromUpstreamJson((0,_lodash.get)(props,"watchStatus"))}_createClass(WatchHistoryItem,null,[{key:"fromUpstreamJson",value:function fromUpstreamJson(upstreamHistory){return new WatchHistoryItem(upstreamHistory)}}]);return WatchHistoryItem}();exports.WatchHistoryItem=WatchHistoryItem},9127:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useRequest=exports.sendRequest=void 0;var _shared_imports=__webpack_require__(9128);var _api=__webpack_require__(7044);var sendRequest=function sendRequest(config){return(0,_shared_imports.sendRequest)((0,_api.getHttpClient)(),config)};exports.sendRequest=sendRequest;var useRequest=function useRequest(config){return(0,_shared_imports.useRequest)((0,_api.getHttpClient)(),config)};exports.useRequest=useRequest},9128:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SendRequestConfig",{enumerable:true,get:function get(){return _np_ready_request.SendRequestConfig}});Object.defineProperty(exports,"SendRequestResponse",{enumerable:true,get:function get(){return _np_ready_request.SendRequestResponse}});Object.defineProperty(exports,"UseRequestConfig",{enumerable:true,get:function get(){return _np_ready_request.UseRequestConfig}});Object.defineProperty(exports,"sendRequest",{enumerable:true,get:function get(){return _np_ready_request.sendRequest}});Object.defineProperty(exports,"useRequest",{enumerable:true,get:function get(){return _np_ready_request.useRequest}});var _np_ready_request=__webpack_require__(2313)},9129:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getPageErrorCode",{enumerable:true,get:function get(){return _page_error.getPageErrorCode}});Object.defineProperty(exports,"PageError",{enumerable:true,get:function get(){return _page_error.PageError}});var _page_error=__webpack_require__(9130)},9130:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPageErrorCode=getPageErrorCode;exports.PageError=PageError;var _react=_interopRequireDefault(__webpack_require__(0));var _page_error_not_exist=__webpack_require__(9131);var _page_error_forbidden=__webpack_require__(9132);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getPageErrorCode(errorOrErrors){var errors=Array.isArray(errorOrErrors)?errorOrErrors:[errorOrErrors];var firstError=errors.find((function(error){if(error){return[403,404].includes(error.status)}return false}));if(firstError){return firstError.status}}function PageError(_ref){var errorCode=_ref.errorCode,id=_ref.id;switch(errorCode){case 404:return _react.default.createElement(_page_error_not_exist.PageErrorNotExist,{id:id});case 403:default:return _react.default.createElement(_page_error_forbidden.PageErrorForbidden,null)}}},9131:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageErrorNotExist=PageErrorNotExist;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PageErrorNotExist(_ref){var id=_ref.id;return _react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"search",iconColor:"primary",title:_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.pageErrorNotExist.title",defaultMessage:"Couldn't find watch"})),body:_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.pageErrorNotExist.description",defaultMessage:"A watch with ID '{id}' could not be found.",values:{id:id}}))})}},9132:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageErrorForbidden=PageErrorForbidden;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PageErrorForbidden(){return _react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"securityApp",iconColor:undefined,title:_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.pageErrorForbidden.title",defaultMessage:"You don't have privileges to use Watcher"}))})}},9133:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConfirmWatchesModal=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ConfirmWatchesModal=function ConfirmWatchesModal(_ref){var modalOptions=_ref.modalOptions,callback=_ref.callback;if(!modalOptions){return null}var title=modalOptions.title,message=modalOptions.message,buttonType=modalOptions.buttonType,buttonLabel=modalOptions.buttonLabel;return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{buttonColor:buttonType?buttonType:"primary",title:title,onCancel:function onCancel(){return callback()},onConfirm:function onConfirm(){callback(true)},cancelButtonText:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.saveConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:buttonLabel?buttonLabel:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.saveConfirmModal.saveButtonLabel",{defaultMessage:"Save watch"})},message))};exports.ConfirmWatchesModal=ConfirmWatchesModal},9134:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeleteWatchesModal=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _api=__webpack_require__(7044);var _app_context=__webpack_require__(7066);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DeleteWatchesModal=function DeleteWatchesModal(_ref){var watchesToDelete=_ref.watchesToDelete,callback=_ref.callback;var _useAppContext=(0,_app_context.useAppContext)(),toasts=_useAppContext.toasts;var numWatchesToDelete=watchesToDelete.length;if(!numWatchesToDelete){return null}var confirmModalText=_i18n.i18n.translate("xpack.watcher.deleteSelectedWatchesConfirmModal.descriptionText",{defaultMessage:"You can't recover {numWatchesToDelete, plural, one {a deleted watch} other {deleted watches}}.",values:{numWatchesToDelete:numWatchesToDelete}});var confirmButtonText=_i18n.i18n.translate("xpack.watcher.deleteSelectedWatchesConfirmModal.deleteButtonLabel",{defaultMessage:"Delete {numWatchesToDelete, plural, one {watch} other {# watches}} ",values:{numWatchesToDelete:numWatchesToDelete}});var cancelButtonText=_i18n.i18n.translate("xpack.watcher.deleteSelectedWatchesConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"});return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"deleteWatchesConfirmation",title:confirmButtonText,onCancel:function onCancel(){return callback()},onConfirm:function _callee(){var _ref2,successes,errors,numSuccesses,numErrors;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap((0,_api.deleteWatches)(watchesToDelete));case 2:_ref2=_context.sent;successes=_ref2.successes;errors=_ref2.errors;numSuccesses=successes.length;numErrors=errors.length;callback(successes);if(numSuccesses>0){toasts.addSuccess(_i18n.i18n.translate("xpack.watcher.sections.watchList.deleteSelectedWatchesSuccessNotification.descriptionText",{defaultMessage:"Deleted {numSuccesses, number} {numSuccesses, plural, one {watch} other {watches}}",values:{numSuccesses:numSuccesses}}))}if(numErrors>0){toasts.addDanger(_i18n.i18n.translate("xpack.watcher.sections.watchList.deleteSelectedWatchesErrorNotification.descriptionText",{defaultMessage:"Failed to delete {numErrors, number} {numErrors, plural, one {watch} other {watches}}",values:{numErrors:numErrors}}))}case 10:case"end":return _context.stop()}}}))},cancelButtonText:cancelButtonText,confirmButtonText:confirmButtonText},confirmModalText))};exports.DeleteWatchesModal=DeleteWatchesModal},9135:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchStatus=WatchStatus;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _constants=__webpack_require__(1880);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StatusIcon(_ref){var status=_ref.status;switch(status){case _constants.WATCH_STATES.FIRING:case _constants.ACTION_STATES.FIRING:return _react.default.createElement(_eui.EuiIcon,{type:"play",color:"primary"});case _constants.WATCH_STATES.OK:case _constants.ACTION_STATES.OK:case _constants.ACTION_STATES.ACKNOWLEDGED:return _react.default.createElement(_eui.EuiIcon,{type:"check",color:"secondary"});case _constants.ACTION_STATES.THROTTLED:return _react.default.createElement(_eui.EuiIcon,{type:"clock",color:"warning"});case _constants.WATCH_STATES.DISABLED:return _react.default.createElement(_eui.EuiIcon,{type:"minusInCircleFilled",color:"subdued"});case _constants.WATCH_STATES.CONFIG_ERROR:case _constants.WATCH_STATES.ERROR:case _constants.ACTION_STATES.CONFIG_ERROR:case _constants.ACTION_STATES.ERROR:return _react.default.createElement(_eui.EuiIcon,{type:"crossInACircleFilled",color:"danger"})}return null}function WatchStatus(_ref2){var status=_ref2.status,_ref2$size=_ref2.size,size=_ref2$size===void 0?"s":_ref2$size;return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(StatusIcon,{status:status})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:size},status)))}},9136:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SectionLoading=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SectionLoading=function SectionLoading(_ref){var children=_ref.children;return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement(_eui.EuiLoadingSpinner,{size:"xl"}),body:_react.default.createElement(_eui.EuiText,{color:"subdued"},children),"data-test-subj":"sectionLoading"})};exports.SectionLoading=SectionLoading},9137:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SectionError=void 0;var _eui=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var SectionError=function SectionError(_ref){var title=_ref.title,error=_ref.error,rest=_objectWithoutProperties(_ref,["title","error"]);var data=error.data||error;var errorString=data.error,cause=data.cause,message=data.message;return _react.default.createElement(_eui.EuiCallOut,_extends({title:title,color:"danger",iconType:"alert"},rest),_react.default.createElement("div",{"data-test-subj":"sectionErrorMessage"},message||errorString),cause&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement("ul",null,cause.map((function(causeMsg,i){return _react.default.createElement("li",{key:i},causeMsg)})))))};exports.SectionError=SectionError},9138:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchHistory=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);var _constants=__webpack_require__(1880);var _components=__webpack_require__(7074);var _api=__webpack_require__(7044);var _watch_details_context=__webpack_require__(7374);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var watchHistoryTimeSpanOptions=[{value:"now-1h",text:_i18n.i18n.translate("xpack.watcher.sections.watchHistory.timeSpan.1h",{defaultMessage:"Last one hour"})},{value:"now-24h",text:_i18n.i18n.translate("xpack.watcher.sections.watchHistory.timeSpan.24h",{defaultMessage:"Last 24 hours"})},{value:"now-7d",text:_i18n.i18n.translate("xpack.watcher.sections.watchHistory.timeSpan.7d",{defaultMessage:"Last 7 days"})},{value:"now-30d",text:_i18n.i18n.translate("xpack.watcher.sections.watchHistory.timeSpan.30d",{defaultMessage:"Last 30 days"})},{value:"now-6M",text:_i18n.i18n.translate("xpack.watcher.sections.watchHistory.timeSpan.6M",{defaultMessage:"Last 6 months"})},{value:"now-1y",text:_i18n.i18n.translate("xpack.watcher.sections.watchHistory.timeSpan.1y",{defaultMessage:"Last 1 year"})}];var WatchHistory=function WatchHistory(){var _useContext=(0,_react.useContext)(_watch_details_context.WatchDetailsContext),loadedWatch=_useContext.watchDetail;var _useState=(0,_react.useState)(undefined),_useState2=_slicedToArray(_useState,2),isActivated=_useState2[0],setIsActivated=_useState2[1];var _useState3=(0,_react.useState)(undefined),_useState4=_slicedToArray(_useState3,2),detailWatchId=_useState4[0],setDetailWatchId=_useState4[1];var _useState5=(0,_react.useState)(watchHistoryTimeSpanOptions[0].value),_useState6=_slicedToArray(_useState5,2),watchHistoryTimeSpan=_useState6[0],setWatchHistoryTimeSpan=_useState6[1];if(isActivated===undefined){var isActive=loadedWatch.watchStatus&&loadedWatch.watchStatus.isActive||false;setIsActivated(isActive)}var _useLoadWatchHistory=(0,_api.useLoadWatchHistory)(loadedWatch.id,watchHistoryTimeSpan),historyError=_useLoadWatchHistory.error,history=_useLoadWatchHistory.data,isLoading=_useLoadWatchHistory.isLoading;var _useLoadWatchHistoryD=(0,_api.useLoadWatchHistoryDetail)(detailWatchId),watchHistoryDetailsError=_useLoadWatchHistoryD.error,watchHistoryDetails=_useLoadWatchHistoryD.data;var executionDetail=watchHistoryDetails?JSON.stringify(watchHistoryDetails.details,null,2):"";if(historyError){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_components.SectionError,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchExecutionErrorTitle",defaultMessage:"Error loading execution history"}),error:historyError}))}var columns=[{field:"startTime",name:_i18n.i18n.translate("xpack.watcher.sections.watchHistory.watchTable.startTimeHeader",{defaultMessage:"Trigger time"}),sortable:true,truncateText:true,render:function render(startTime,item){var formattedDate=startTime.format();return _react.default.createElement(_eui.EuiLink,{"data-test-subj":"watchStartTimeColumn-".concat(formattedDate),onClick:function onClick(){return setDetailWatchId(item.id)}},formattedDate)}},{field:"watchStatus.state",name:_i18n.i18n.translate("xpack.watcher.sections.watchHistory.watchTable.stateHeader",{defaultMessage:"State"}),sortable:true,truncateText:true,render:function render(state){return _react.default.createElement(_components.WatchStatus,{status:state})}},{field:"watchStatus.comment",name:_i18n.i18n.translate("xpack.watcher.sections.watchHistory.watchTable.commentHeader",{defaultMessage:"Comment"}),sortable:true,truncateText:true}];var onTimespanChange=function onTimespanChange(e){var timespan=e.target.value;setWatchHistoryTimeSpan(timespan)};var flyout;if(detailWatchId!==undefined){if(watchHistoryDetailsError){flyout=_react.default.createElement(_eui.EuiFlyout,{"data-test-subj":"watchHistoryErrorDetailFlyout",onClose:function onClose(){return setDetailWatchId(undefined)},"aria-labelledby":"watchHistoryErrorDetailsFlyoutTitle",maxWidth:600},_react.default.createElement(_eui.EuiFlyoutHeader,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h3",{"data-test-subj":"title"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchHistoryDetail.errorTitle",defaultMessage:"Execution details"})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_components.SectionError,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchHistoryDetailsErrorTitle",defaultMessage:"Error loading execution details"}),error:watchHistoryDetailsError,"data-test-subj":"errorMessage"})))}if(watchHistoryDetails!==undefined){var detailColumns=[{field:"id",name:_i18n.i18n.translate("xpack.watcher.sections.watchHistory.watchActionStatusTable.id",{defaultMessage:"Name"}),sortable:true,truncateText:true},{field:"state",name:_i18n.i18n.translate("xpack.watcher.sections.watchHistory.watchActionStatusTable.state",{defaultMessage:"State"}),sortable:true,truncateText:true,render:function render(state){return _react.default.createElement(_components.WatchStatus,{status:state})}}];flyout=_react.default.createElement(_eui.EuiFlyout,{"data-test-subj":"watchHistoryDetailFlyout",onClose:function onClose(){return setDetailWatchId(undefined)},"aria-labelledby":"watchHistoryDetailsFlyoutTitle",maxWidth:600},_react.default.createElement(_eui.EuiFlyoutHeader,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h3",{"data-test-subj":"title"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchHistoryDetail.title",defaultMessage:"Executed on {date}",values:{date:watchHistoryDetails.startTime}})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h4",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchHistoryDetail.actionsTitle",defaultMessage:"Actions"}))),_react.default.createElement(_eui.EuiInMemoryTable,{items:watchHistoryDetails.watchStatus.actionStatuses,itemId:"id",columns:detailColumns,message:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchTable.noWatchesMessage",defaultMessage:"No current status to show"}),"data-test-subj":"watchActionsTable"}),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h4",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchHistoryDetail.jsonTitle",defaultMessage:"JSON"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiCodeBlock,{language:"json"},executionDetail)))}}return _react.default.createElement("div",{"data-test-subj":"watchHistorySection"},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexStart",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSelect,{options:watchHistoryTimeSpanOptions,value:watchHistoryTimeSpan,onChange:onTimespanChange,"aria-label":_i18n.i18n.translate("xpack.watcher.sections.watchHistory.changeTimespanSelectAriaLabel",{defaultMessage:"Change timespan of watch history"})}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiInMemoryTable,{items:history||[],columns:columns,pagination:_constants.PAGINATION,sorting:true,loading:isLoading,"data-test-subj":"watchHistoryTable",message:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchTable.noCurrentStatus",defaultMessage:"No execution history to show"})}),flyout)};exports.WatchHistory=WatchHistory},9139:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BASE_PATH=void 0;var BASE_PATH="/management/elasticsearch/watcher/";exports.BASE_PATH=BASE_PATH},9140:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchEdit=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _watch=__webpack_require__(7709);var _react2=__webpack_require__(4);var _constants=__webpack_require__(1880);var _components=__webpack_require__(7074);var _api=__webpack_require__(7044);var _breadcrumbs=__webpack_require__(7375);var _json_watch_edit=__webpack_require__(9141);var _threshold_watch_edit=__webpack_require__(9166);var _monitoring_watch_edit=__webpack_require__(9182);var _watch_context=__webpack_require__(7067);var _app_context=__webpack_require__(7066);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getTitle=function getTitle(watch){if(watch.isNew){var typeName=watch.typeName.toLowerCase();return _i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.titlePanel.createNewTypeOfWatchTitle",{defaultMessage:"Create {typeName}",values:{typeName:typeName}})}else{return _i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.titlePanel.editWatchTitle",{defaultMessage:"Edit {watchName}",values:{watchName:watch.name?watch.name:watch.id}})}};var watchReducer=function watchReducer(state,action){var command=action.command,payload=action.payload;var watch=state.watch;switch(command){case"setWatch":return _objectSpread({},state,{watch:payload});case"setProperty":var property=payload.property,value=payload.value;if((0,_lodash.isEqual)(watch[property],value)){return state}else{return _objectSpread({},state,{watch:new(_watch.Watch.getWatchTypes()[watch.type])(_objectSpread({},watch,_defineProperty({},property,value)))})}case"addAction":var type=payload.type,defaults=payload.defaults;var newWatch=new(_watch.Watch.getWatchTypes()[watch.type])(watch);newWatch.createAction(type,defaults);return _objectSpread({},state,{watch:newWatch});case"setError":return _objectSpread({},state,{loadError:payload})}};var WatchEdit=function WatchEdit(_ref){var _ref$match$params=_ref.match.params,id=_ref$match$params.id,type=_ref$match$params.type;var _useAppContext=(0,_app_context.useAppContext)(),MANAGEMENT_BREADCRUMB=_useAppContext.legacy.MANAGEMENT_BREADCRUMB,chrome=_useAppContext.chrome;var _useReducer=(0,_react.useReducer)(watchReducer,{watch:null}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],watch=_useReducer2$.watch,loadError=_useReducer2$.loadError,dispatch=_useReducer2[1];var setWatchProperty=function setWatchProperty(property,value){dispatch({command:"setProperty",payload:{property:property,value:value}})};var addAction=function addAction(action){dispatch({command:"addAction",payload:action})};(0,_react.useEffect)((function(){var getWatch=function getWatch(){var loadedWatch,WatchType;return regeneratorRuntime.async((function getWatch$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!id){_context.next=13;break}_context.prev=1;_context.next=4;return regeneratorRuntime.awrap((0,_api.loadWatch)(id));case 4:loadedWatch=_context.sent;dispatch({command:"setWatch",payload:loadedWatch});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](1);dispatch({command:"setError",payload:_context.t0});case 11:_context.next=14;break;case 13:if(type){WatchType=_watch.Watch.getWatchTypes()[type];if(WatchType){dispatch({command:"setWatch",payload:new WatchType})}}case 14:case"end":return _context.stop()}}}),null,null,[[1,8]])};getWatch()}),[id,type]);(0,_react.useEffect)((function(){chrome.setBreadcrumbs([MANAGEMENT_BREADCRUMB,_breadcrumbs.listBreadcrumb,id?_breadcrumbs.editBreadcrumb:_breadcrumbs.createBreadcrumb])}),[id,chrome,MANAGEMENT_BREADCRUMB]);var errorCode=(0,_components.getPageErrorCode)(loadError);if(errorCode){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_components.PageError,{errorCode:errorCode,id:id}))}if(loadError){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_components.SectionError,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.errorTitle",defaultMessage:"Error loading watch"}),error:loadError}))}if(!watch){return _react.default.createElement(_components.SectionLoading,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.loadingWatchDescription",defaultMessage:"Loading watch…"}))}var pageTitle=getTitle(watch);var EditComponent=null;switch(watch.type){case _constants.WATCH_TYPES.THRESHOLD:EditComponent=_threshold_watch_edit.ThresholdWatchEdit;break;case _constants.WATCH_TYPES.MONITORING:EditComponent=_monitoring_watch_edit.MonitoringWatchEdit;break;case _constants.WATCH_TYPES.JSON:default:EditComponent=_json_watch_edit.JsonWatchEdit}return _react.default.createElement(_watch_context.WatchContext.Provider,{value:{watch:watch,setWatchProperty:setWatchProperty,addAction:addAction}},_react.default.createElement(EditComponent,{pageTitle:pageTitle}))};exports.WatchEdit=WatchEdit},9141:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"JsonWatchEdit",{enumerable:true,get:function get(){return _json_watch_edit.JsonWatchEdit}});var _json_watch_edit=__webpack_require__(9142)},9142:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JsonWatchEdit=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _execute_details=__webpack_require__(7376);var _get_action_type=__webpack_require__(7713);var _constants=__webpack_require__(1880);var _json_watch_edit_form=__webpack_require__(9145);var _json_watch_edit_simulate=__webpack_require__(9164);var _watch_context=__webpack_require__(7067);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var WATCH_EDIT_TAB="watchEditTab";var WATCH_SIMULATE_TAB="watchSimulateTab";var WATCH_TABS=[{id:WATCH_EDIT_TAB,name:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.editTabLabel",{defaultMessage:"Edit"})},{id:WATCH_SIMULATE_TAB,name:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.simulateTabLabel",{defaultMessage:"Simulate"})}];var EXECUTE_DETAILS_INITIAL_STATE={triggeredTimeValue:0,triggeredTimeUnit:_constants.TIME_UNITS.SECOND,scheduledTimeValue:0,scheduledTimeUnit:_constants.TIME_UNITS.SECOND,ignoreCondition:false};function getActions(watch){var actions=watch.watch&&watch.watch.actions||{};return Object.keys(actions).map((function(actionKey){return{actionId:actionKey,type:(0,_get_action_type.getActionType)(actions[actionKey]),actionMode:_constants.ACTION_MODES.SIMULATE}}))}function getActionModes(items){var result=items.reduce((function(itemsAccum,item){if(item.actionId){itemsAccum[item&&item.actionId]=item.actionMode}return itemsAccum}),{});return result}var JsonWatchEdit=function JsonWatchEdit(_ref){var pageTitle=_ref.pageTitle;var _useContext=(0,_react.useContext)(_watch_context.WatchContext),watch=_useContext.watch;var watchActions=getActions(watch);var _useState=(0,_react.useState)(WATCH_EDIT_TAB),_useState2=_slicedToArray(_useState,2),selectedTab=_useState2[0],setSelectedTab=_useState2[1];var _useState3=(0,_react.useState)(new _execute_details.ExecuteDetails(_objectSpread({},EXECUTE_DETAILS_INITIAL_STATE,{actionModes:getActionModes(watchActions)}))),_useState4=_slicedToArray(_useState3,2),executeDetails=_useState4[0],_setExecuteDetails=_useState4[1];var executeWatchErrors=executeDetails.validate();var hasExecuteWatchErrors=!!Object.keys(executeWatchErrors).find((function(errorKey){return executeWatchErrors[errorKey].length>=1}));return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h1",{"data-test-subj":"pageTitle"},pageTitle)))),_react.default.createElement(_eui.EuiTabs,null,WATCH_TABS.map((function(tab,index){return _react.default.createElement(_eui.EuiTab,{onClick:function onClick(){setSelectedTab(tab.id);_setExecuteDetails(new _execute_details.ExecuteDetails(_objectSpread({},executeDetails,{actionModes:getActionModes(watchActions)})))},isSelected:tab.id===selectedTab,key:index,"data-test-subj":"tab"},tab.name)}))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),selectedTab===WATCH_SIMULATE_TAB&&_react.default.createElement(_json_watch_edit_simulate.JsonWatchEditSimulate,{executeDetails:executeDetails,setExecuteDetails:function setExecuteDetails(details){return _setExecuteDetails(details)},executeWatchErrors:executeWatchErrors,hasExecuteWatchErrors:hasExecuteWatchErrors,watchActions:watchActions}),selectedTab===WATCH_EDIT_TAB&&_react.default.createElement(_json_watch_edit_form.JsonWatchEditForm,null))};exports.JsonWatchEdit=JsonWatchEdit},9143:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDateMathFormat=void 0;var getDateMathFormat=function getDateMathFormat(timeUnit,timeValue){var now="now";if(timeValue===0){return now}return"".concat(now,"+").concat(timeValue).concat(timeUnit)};exports.getDateMathFormat=getDateMathFormat},9144:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getActionType=getActionType;var _lodash=__webpack_require__(3);var _constants=__webpack_require__(1880);function getActionType(action){var type=(0,_lodash.intersection)((0,_lodash.keys)(action),(0,_lodash.values)(_constants.ACTION_TYPES))[0]||_constants.ACTION_TYPES.UNKNOWN;return type}},9145:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JsonWatchEditForm=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _serialization=__webpack_require__(7714);var _components=__webpack_require__(7074);var _watch_edit_actions=__webpack_require__(7377);var _watch_context=__webpack_require__(7067);var _navigation=__webpack_require__(7139);var _request_flyout=__webpack_require__(7717);var _app_context=__webpack_require__(7066);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var JsonWatchEditForm=function JsonWatchEditForm(){var _useAppContext=(0,_app_context.useAppContext)(),putWatchApiUrl=_useAppContext.links.putWatchApiUrl,toasts=_useAppContext.toasts;var _useContext=(0,_react.useContext)(_watch_context.WatchContext),watch=_useContext.watch,setWatchProperty=_useContext.setWatchProperty;var _watch$validate=watch.validate(),errors=_watch$validate.errors;var hasErrors=!!Object.keys(errors).find((function(errorKey){return errors[errorKey].length>=1}));var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),validationError=_useState2[0],setValidationError=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isRequestVisible=_useState4[0],setIsRequestVisible=_useState4[1];var _useState5=(0,_react.useState)(null),_useState6=_slicedToArray(_useState5,2),serverError=_useState6[0],setServerError=_useState6[1];var _useState7=(0,_react.useState)(false),_useState8=_slicedToArray(_useState7,2),isSaving=_useState8[0],setIsSaving=_useState8[1];var hasActionErrors=!!validationError;var invalidActionMessage=_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.form.actionValidationErrorMessage",{defaultMessage:"Invalid watch actions"});var jsonErrors=_objectSpread({},errors,{json:hasActionErrors?[].concat(_toConsumableArray(errors.json),[invalidActionMessage]):_toConsumableArray(errors.json)});if(errors.json.length===0){setWatchProperty("watch",JSON.parse(watch.watchString))}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiForm,{isInvalid:hasActionErrors,error:validationError?validationError:[],"data-test-subj":"jsonWatchForm"},serverError&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_components.SectionError,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.saveWatchErrorTitle",defaultMessage:"Error saving watch"}),error:serverError,"data-test-subj":"sectionError"}),_react.default.createElement(_eui.EuiSpacer,null)),_react.default.createElement(_eui.EuiFormRow,{id:"watchName",label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.form.watchNameLabel",{defaultMessage:"Name (optional)"})},_react.default.createElement(_eui.EuiFieldText,{id:"watchName",name:"name",value:watch.name||"","data-test-subj":"nameInput",onChange:function onChange(e){var watchName=e.target.value;setWatchProperty("name",watchName)},onBlur:function onBlur(){if(!watch.name){setWatchProperty("name","")}}})),_react.default.createElement(_components.ErrableFormRow,{id:"watchId",label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.form.watchIDLabel",{defaultMessage:"ID"}),errorKey:"id",isShowingErrors:hasErrors&&watch.id!==undefined,errors:errors},_react.default.createElement(_eui.EuiFieldText,{id:"id",name:"id","data-test-subj":"idInput",value:watch.id||"",readOnly:!watch.isNew,onChange:function onChange(e){setWatchProperty("id",e.target.value)},onBlur:function onBlur(){if(!watch.id){setWatchProperty("id","")}}})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_components.ErrableFormRow,{id:"watchJson",label:_react.default.createElement(_react.Fragment,null,_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.form.watchJsonLabel",{defaultMessage:"Watch JSON"})," ","(",_react.default.createElement(_eui.EuiLink,{href:putWatchApiUrl,target:"_blank"},_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.form.watchJsonDocLink",{defaultMessage:"API syntax"})),")"),errorKey:"json",isShowingErrors:hasErrors||hasActionErrors,fullWidth:true,errors:jsonErrors},_react.default.createElement(_eui.EuiCodeEditor,{mode:"json",width:"100%",theme:"github","data-test-subj":"jsonEditor","aria-label":_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.form.watchJsonAriaLabel",{defaultMessage:"Code editor"}),value:watch.watchString,onChange:function onChange(json){if(validationError){setValidationError(null)}setWatchProperty("watchString",json)}})),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{"data-test-subj":"saveWatchButton",fill:true,color:"secondary",type:"submit",iconType:"check",isLoading:isSaving,isDisabled:hasErrors,onClick:function _callee(){var savedWatch,data;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsSaving(true);_context.next=3;return regeneratorRuntime.awrap((0,_watch_edit_actions.onWatchSave)(watch,toasts));case 3:savedWatch=_context.sent;if(!(savedWatch&&savedWatch.error)){_context.next=10;break}data=savedWatch.error.data;setIsSaving(false);if(!(data&&data.error==="validation")){_context.next=9;break}return _context.abrupt("return",setValidationError(data.message));case 9:return _context.abrupt("return",setServerError(savedWatch.error));case 10:case"end":return _context.stop()}}}))}},watch.isNew?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.createButtonLabel",defaultMessage:"Create watch"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.saveButtonLabel",defaultMessage:"Save watch"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"btnCancelWatch",onClick:function onClick(){return(0,_navigation.goToWatchList)()}},_i18n.i18n.translate("xpack.watcher.sections.watchEdit.json.cancelButtonLabel",{defaultMessage:"Cancel"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return setIsRequestVisible(!isRequestVisible)}},isRequestVisible?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.hideRequestButtonLabel",defaultMessage:"Hide request"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.showRequestButtonLabel",defaultMessage:"Show request"}))))),isRequestVisible?_react.default.createElement(_request_flyout.RequestFlyout,{id:watch.id,payload:(0,_serialization.serializeJsonWatch)(watch.name,watch.watch),close:function close(){return setIsRequestVisible(false)}}):null)};exports.JsonWatchEditForm=JsonWatchEditForm},9146:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serializeJsonWatch=serializeJsonWatch;var _lodash=__webpack_require__(3);var _constants=__webpack_require__(1880);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function serializeJsonWatch(name,json){var _json$metadata=json.metadata,metadata=_json$metadata===void 0?{}:_json$metadata;(0,_lodash.set)(metadata,"xpack.type",_constants.WATCH_TYPES.JSON);var serializedWatch=_objectSpread({},json,{metadata:metadata});if(name){serializedWatch.metadata.name=name}return serializedWatch}},9147:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serializeThresholdWatch=serializeThresholdWatch;var _constants=__webpack_require__(1880);var _serialization_helpers=__webpack_require__(7715);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function serializeThresholdWatch(_ref){var name=_ref.name,triggerIntervalSize=_ref.triggerIntervalSize,triggerIntervalUnit=_ref.triggerIntervalUnit,index=_ref.index,timeWindowSize=_ref.timeWindowSize,timeWindowUnit=_ref.timeWindowUnit,timeField=_ref.timeField,aggType=_ref.aggType,aggField=_ref.aggField,termField=_ref.termField,termSize=_ref.termSize,termOrder=_ref.termOrder,thresholdComparator=_ref.thresholdComparator,hasTermsAgg=_ref.hasTermsAgg,threshold=_ref.threshold,actions=_ref.actions,_ref$includeMetadata=_ref.includeMetadata,includeMetadata=_ref$includeMetadata===void 0?true:_ref$includeMetadata;var serializedWatch={trigger:(0,_serialization_helpers.buildTrigger)(triggerIntervalSize,triggerIntervalUnit),input:(0,_serialization_helpers.buildInput)({index:index,timeWindowSize:timeWindowSize,timeWindowUnit:timeWindowUnit,timeField:timeField,aggType:aggType,aggField:aggField,termField:termField,termSize:termSize,termOrder:termOrder}),condition:(0,_serialization_helpers.buildCondition)({aggType:aggType,thresholdComparator:thresholdComparator,hasTermsAgg:hasTermsAgg,threshold:threshold}),transform:(0,_serialization_helpers.buildTransform)({aggType:aggType,thresholdComparator:thresholdComparator,hasTermsAgg:hasTermsAgg,threshold:threshold}),actions:(0,_serialization_helpers.buildActions)(actions)};if(includeMetadata){serializedWatch.metadata=_objectSpread({xpack:{type:_constants.WATCH_TYPES.THRESHOLD}},(0,_serialization_helpers.buildMetadata)({index:index,timeField:timeField,triggerIntervalSize:triggerIntervalSize,triggerIntervalUnit:triggerIntervalUnit,aggType:aggType,aggField:aggField,termSize:termSize,termField:termField,thresholdComparator:thresholdComparator,timeWindowSize:timeWindowSize,timeWindowUnit:timeWindowUnit,threshold:threshold}));if(name){serializedWatch.metadata.name=name}}return serializedWatch}},9148:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildActions=buildActions;var _lodash=__webpack_require__(3);var _action=__webpack_require__(9149);function buildActions(actions){var result={};(0,_lodash.forEach)(actions,(function(action){var actionModel=_action.Action.fromDownstreamJson(action);Object.assign(result,actionModel.upstreamJson)}));return result}},9149:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Action",{enumerable:true,get:function get(){return _action.Action}});var _action=__webpack_require__(9150)},9150:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Action=void 0;var _lodash=__webpack_require__(3);var _get_action_type=__webpack_require__(7713);var _constants=__webpack_require__(1880);var _logging_action=__webpack_require__(9151);var _email_action=__webpack_require__(9152);var _slack_action=__webpack_require__(9153);var _index_action=__webpack_require__(9154);var _webhook_action=__webpack_require__(9155);var _pagerduty_action=__webpack_require__(9156);var _jira_action=__webpack_require__(9157);var _unknown_action=__webpack_require__(9158);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ActionTypes={};(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.LOGGING,_logging_action.LoggingAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.EMAIL,_email_action.EmailAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.SLACK,_slack_action.SlackAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.INDEX,_index_action.IndexAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.WEBHOOK,_webhook_action.WebhookAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.PAGERDUTY,_pagerduty_action.PagerDutyAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.JIRA,_jira_action.JiraAction);(0,_lodash.set)(ActionTypes,_constants.ACTION_TYPES.UNKNOWN,_unknown_action.UnknownAction);var Action=function(){function Action(){_classCallCheck(this,Action)}_createClass(Action,null,[{key:"fromUpstreamJson",value:function fromUpstreamJson(json){var type=(0,_get_action_type.getActionType)(json.actionJson);var ActionType=ActionTypes[type]||_unknown_action.UnknownAction;var _ActionType$fromUpstr=ActionType.fromUpstreamJson(json),action=_ActionType$fromUpstr.action;return action}},{key:"fromDownstreamJson",value:function fromDownstreamJson(json){var ActionType=ActionTypes[json.type]||_unknown_action.UnknownAction;var _ActionType$fromDowns=ActionType.fromDownstreamJson(json),action=_ActionType$fromDowns.action;return action}}]);return Action}();exports.Action=Action;_defineProperty(Action,"getActionTypes",(function(){return ActionTypes}))},9151:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoggingAction=void 0;var _base_action=__webpack_require__(7096);var _constants=__webpack_require__(1880);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var LoggingAction=function(_BaseAction){_inherits(LoggingAction,_BaseAction);function LoggingAction(props,errors){var _this;_classCallCheck(this,LoggingAction);props.type=_constants.ACTION_TYPES.LOGGING;_this=_possibleConstructorReturn(this,_getPrototypeOf(LoggingAction).call(this,props,errors));_this.text=props.text;return _this}_createClass(LoggingAction,[{key:"downstreamJson",get:function get(){var result=_get(_getPrototypeOf(LoggingAction.prototype),"downstreamJson",this);Object.assign(result,{text:this.text});return result}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(LoggingAction.prototype),"upstreamJson",this);result[this.id]={logging:{text:this.text}};return result}}],[{key:"fromDownstreamJson",value:function fromDownstreamJson(json){var props=_get(_getPrototypeOf(LoggingAction),"getPropsFromDownstreamJson",this).call(this,json);var _this$validateJson=this.validateJson(json),errors=_this$validateJson.errors;Object.assign(props,{text:json.text});var action=new LoggingAction(props,errors);return{action:action,errors:errors}}},{key:"fromUpstreamJson",value:function fromUpstreamJson(json){var props=_get(_getPrototypeOf(LoggingAction),"getPropsFromUpstreamJson",this).call(this,json);var _this$validateJson2=this.validateJson(json.actionJson),errors=_this$validateJson2.errors;Object.assign(props,{text:json.actionJson.logging.text});var action=new LoggingAction(props,errors);return{action:action,errors:errors}}},{key:"validateJson",value:function validateJson(json){var errors=[];if(!json.logging){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.loggingAction.actionJsonLoggingPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonLogging} property",values:{actionJsonLogging:"actionJson.logging"}})})}if(json.logging&&!json.logging.text){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.loggingAction.actionJsonLoggingTextPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonLoggingText} property",values:{actionJsonLoggingText:"actionJson.logging.text"}})})}return{errors:errors.length?errors:null}}}]);return LoggingAction}(_base_action.BaseAction);exports.LoggingAction=LoggingAction},9152:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmailAction=void 0;var _base_action=__webpack_require__(7096);var _constants=__webpack_require__(1880);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var EmailAction=function(_BaseAction){_inherits(EmailAction,_BaseAction);function EmailAction(props,errors){var _this;_classCallCheck(this,EmailAction);props.type=_constants.ACTION_TYPES.EMAIL;_this=_possibleConstructorReturn(this,_getPrototypeOf(EmailAction).call(this,props,errors));_this.to=props.to;_this.subject=props.subject;_this.body=props.body;return _this}_createClass(EmailAction,[{key:"downstreamJson",get:function get(){var result=_get(_getPrototypeOf(EmailAction.prototype),"downstreamJson",this);Object.assign(result,{to:this.to,subject:this.subject,body:this.body});return result}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(EmailAction.prototype),"upstreamJson",this);var optionalFields={};if(this.subject){optionalFields.subject=this.subject}if(this.body){optionalFields.body={text:this.body}}result[this.id]={email:_objectSpread({profile:"standard",to:this.to},optionalFields)};return result}}],[{key:"fromDownstreamJson",value:function fromDownstreamJson(json){var props=_get(_getPrototypeOf(EmailAction),"getPropsFromDownstreamJson",this).call(this,json);var _this$validateJson=this.validateJson(json),errors=_this$validateJson.errors;Object.assign(props,{to:json.to,subject:json.subject,body:json.body});var action=new EmailAction(props,errors);return{action:action,errors:errors}}},{key:"fromUpstreamJson",value:function fromUpstreamJson(json){var props=_get(_getPrototypeOf(EmailAction),"getPropsFromUpstreamJson",this).call(this,json);var _this$validateJson2=this.validateJson(json.actionJson),errors=_this$validateJson2.errors;var optionalFields={};if(json.actionJson.email.subject){optionalFields.subject=json.actionJson.email.subject}if(json.actionJson.email.body){optionalFields.body=json.actionJson.email.body.text}Object.assign(props,_objectSpread({to:json.actionJson.email.to,subject:json.actionJson.email.subject},optionalFields));var action=new EmailAction(props,errors);return{action:action,errors:errors}}},{key:"validateJson",value:function validateJson(json){var errors=[];if(!json.email){var message=_i18n.i18n.translate("xpack.watcher.models.emailAction.actionJsonEmailPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonEmail} property",values:{actionJsonEmail:"actionJson.email"}});errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:message})}if(json.email&&!json.email.to){var _message=_i18n.i18n.translate("xpack.watcher.models.emailAction.actionJsonEmailToPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonEmailTo} property",values:{actionJsonEmailTo:"actionJson.email.to"}});errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_message})}return{errors:errors.length?errors:null}}}]);return EmailAction}(_base_action.BaseAction);exports.EmailAction=EmailAction},9153:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SlackAction=void 0;var _base_action=__webpack_require__(7096);var _constants=__webpack_require__(1880);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SlackAction=function(_BaseAction){_inherits(SlackAction,_BaseAction);function SlackAction(props,errors){var _this;_classCallCheck(this,SlackAction);props.type=_constants.ACTION_TYPES.SLACK;_this=_possibleConstructorReturn(this,_getPrototypeOf(SlackAction).call(this,props,errors));_this.to=props.to;_this.text=props.text;return _this}_createClass(SlackAction,[{key:"downstreamJson",get:function get(){var result=_get(_getPrototypeOf(SlackAction.prototype),"downstreamJson",this);Object.assign(result,{to:this.to,text:this.text});return result}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(SlackAction.prototype),"upstreamJson",this);result[this.id]={slack:{message:{to:this.to,text:this.text}}};return result}}],[{key:"fromDownstreamJson",value:function fromDownstreamJson(json){var props=_get(_getPrototypeOf(SlackAction),"getPropsFromDownstreamJson",this).call(this,json);var _this$validateJson=this.validateJson(json),errors=_this$validateJson.errors;Object.assign(props,{to:json.to,text:json.text});var action=new SlackAction(props,errors);return{action:action,errors:errors}}},{key:"fromUpstreamJson",value:function fromUpstreamJson(json){var props=_get(_getPrototypeOf(SlackAction),"getPropsFromUpstreamJson",this).call(this,json);var _this$validateJson2=this.validateJson(json.actionJson),errors=_this$validateJson2.errors;Object.assign(props,{to:json.actionJson.slack.message.to,text:json.actionJson.slack.message.text});var action=new SlackAction(props,errors);return{action:action,errors:errors}}},{key:"validateJson",value:function validateJson(json){var errors=[];if(!json.slack){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.slackAction.actionJsonSlackPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonSlack} property",values:{actionJsonSlack:"actionJson.slack"}})})}if(json.slack&&!json.slack.message){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.slackAction.actionJsonSlackMessagePropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonSlackMessage} property",values:{actionJsonSlackMessage:"actionJson.slack.message"}})})}return{errors:errors.length?errors:null}}}]);return SlackAction}(_base_action.BaseAction);exports.SlackAction=SlackAction},9154:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexAction=void 0;var _base_action=__webpack_require__(7096);var _constants=__webpack_require__(1880);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var IndexAction=function(_BaseAction){_inherits(IndexAction,_BaseAction);function IndexAction(props,errors){var _this;_classCallCheck(this,IndexAction);props.type=_constants.ACTION_TYPES.INDEX;_this=_possibleConstructorReturn(this,_getPrototypeOf(IndexAction).call(this,props,errors));_this.index=props.index;return _this}_createClass(IndexAction,[{key:"downstreamJson",get:function get(){var result=_get(_getPrototypeOf(IndexAction.prototype),"downstreamJson",this);Object.assign(result,{index:this.index});return result}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(IndexAction.prototype),"upstreamJson",this);result[this.id]={index:this.index};return result}}],[{key:"fromDownstreamJson",value:function fromDownstreamJson(json){var props=_get(_getPrototypeOf(IndexAction),"getPropsFromDownstreamJson",this).call(this,json);var _this$validateJson=this.validateJson(json),errors=_this$validateJson.errors;Object.assign(props,{index:json.index});var action=new IndexAction(props,errors);return{action:action,errors:errors}}},{key:"fromUpstreamJson",value:function fromUpstreamJson(json){var props=_get(_getPrototypeOf(IndexAction),"getPropsFromUpstreamJson",this).call(this,json);var _this$validateJson2=this.validateJson(json.actionJson),errors=_this$validateJson2.errors;Object.assign(props,{index:json.actionJson.index.index});var action=new IndexAction(props,errors);return{action:action,errors:errors}}},{key:"validateJson",value:function validateJson(json){var errors=[];if(!json.index){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.indexAction.actionJsonIndexPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonIndex} property",values:{actionJsonIndex:"actionJson.index"}})})}if(json.index&&!json.index.index){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.loggingAction.actionJsonIndexNamePropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonIndexName} property",values:{actionJsonIndexName:"actionJson.index.index"}})})}return{errors:errors.length?errors:null}}}]);return IndexAction}(_base_action.BaseAction);exports.IndexAction=IndexAction},9155:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WebhookAction=void 0;var _base_action=__webpack_require__(7096);var _constants=__webpack_require__(1880);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var WebhookAction=function(_BaseAction){_inherits(WebhookAction,_BaseAction);function WebhookAction(props,errors){var _this;_classCallCheck(this,WebhookAction);props.type=_constants.ACTION_TYPES.WEBHOOK;_this=_possibleConstructorReturn(this,_getPrototypeOf(WebhookAction).call(this,props,errors));_this.method=props.method;_this.host=props.host;_this.port=props.port;_this.scheme=props.scheme;_this.path=props.path;_this.body=props.body;_this.contentType=props.contentType;_this.username=props.username;_this.password=props.password;return _this}_createClass(WebhookAction,[{key:"downstreamJson",get:function get(){var result=_get(_getPrototypeOf(WebhookAction.prototype),"downstreamJson",this);Object.assign(result,{method:this.method,host:this.host,port:this.port,scheme:this.scheme,path:this.path,body:this.body,contentType:this.contentType,username:this.username});return result}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(WebhookAction.prototype),"upstreamJson",this);var optionalFields={};if(this.path){optionalFields.path=this.path}if(this.method){optionalFields.method=this.method}if(this.scheme){optionalFields.scheme=this.scheme}if(this.body){optionalFields.body=this.body}if(this.contentType){optionalFields.headers={"Content-Type":this.contentType}}if(this.username&&this.password){optionalFields.auth={basic:{username:this.username,password:this.password}}}result[this.id]={webhook:_objectSpread({host:this.host,port:this.port},optionalFields)};return result}}],[{key:"fromDownstreamJson",value:function fromDownstreamJson(json){var props=_get(_getPrototypeOf(WebhookAction),"getPropsFromDownstreamJson",this).call(this,json);var _this$validateJson=this.validateJson(json),errors=_this$validateJson.errors;Object.assign(props,{method:json.method,host:json.host,port:json.port,scheme:json.scheme,path:json.path,body:json.body,contentType:json.contentType,username:json.username,password:json.password});var action=new WebhookAction(props,errors);return{action:action,errors:errors}}},{key:"fromUpstreamJson",value:function fromUpstreamJson(json){var props=_get(_getPrototypeOf(WebhookAction),"getPropsFromUpstreamJson",this).call(this,json);var webhookJson=json&&json.actionJson&&json.actionJson.webhook;var _this$validateJson2=this.validateJson(json.actionJson),errors=_this$validateJson2.errors;var path=webhookJson.path,method=webhookJson.method,scheme=webhookJson.scheme,body=webhookJson.body,auth=webhookJson.auth,headers=webhookJson.headers;var optionalFields={};if(path){optionalFields.path=path}if(method){optionalFields.method=method}if(scheme){optionalFields.scheme=scheme}if(body){optionalFields.body=body}if(headers["Content-Type"]){optionalFields.contentType=headers["Content-Type"]}if(auth&&auth.basic){optionalFields.username=auth.basic.username}Object.assign(props,_objectSpread({host:json.actionJson.webhook.host,port:json.actionJson.webhook.port},optionalFields));var action=new WebhookAction(props,errors);return{action:action,errors:errors}}},{key:"validateJson",value:function validateJson(json){var errors=[];if(json.webhook&&!json.webhook.host){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.loggingAction.actionJsonWebhookHostPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonWebhookHost} property",values:{actionJsonWebhookHost:"actionJson.webhook.host"}})})}if(json.webhook&&!json.webhook.port){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.loggingAction.actionJsonWebhookPortPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonWebhookPort} property",values:{actionJsonWebhookPort:"actionJson.webhook.port"}})})}return{errors:errors.length?errors:null}}}]);return WebhookAction}(_base_action.BaseAction);exports.WebhookAction=WebhookAction},9156:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PagerDutyAction=void 0;var _base_action=__webpack_require__(7096);var _constants=__webpack_require__(1880);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var PagerDutyAction=function(_BaseAction){_inherits(PagerDutyAction,_BaseAction);function PagerDutyAction(props,errors){var _this;_classCallCheck(this,PagerDutyAction);props.type=_constants.ACTION_TYPES.PAGERDUTY;_this=_possibleConstructorReturn(this,_getPrototypeOf(PagerDutyAction).call(this,props,errors));_this.description=props.description;return _this}_createClass(PagerDutyAction,[{key:"downstreamJson",get:function get(){var result=_get(_getPrototypeOf(PagerDutyAction.prototype),"downstreamJson",this);Object.assign(result,{description:this.description});return result}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(PagerDutyAction.prototype),"upstreamJson",this);result[this.id]={pagerduty:{description:this.description}};return result}}],[{key:"fromDownstreamJson",value:function fromDownstreamJson(json){var props=_get(_getPrototypeOf(PagerDutyAction),"getPropsFromDownstreamJson",this).call(this,json);var _this$validateJson=this.validateJson(json),errors=_this$validateJson.errors;Object.assign(props,{description:json.description});var action=new PagerDutyAction(props,errors);return{action:action,errors:errors}}},{key:"fromUpstreamJson",value:function fromUpstreamJson(json){var props=_get(_getPrototypeOf(PagerDutyAction),"getPropsFromUpstreamJson",this).call(this,json);var _this$validateJson2=this.validateJson(json.actionJson),errors=_this$validateJson2.errors;Object.assign(props,{description:json.actionJson.pagerduty.description});var action=new PagerDutyAction(props,errors);return{action:action,errors:errors}}},{key:"validateJson",value:function validateJson(json){var errors=[];if(!json.pagerduty){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.pagerDutyAction.actionJsonPagerDutyPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonPagerDuty} property",values:{actionJsonPagerDuty:"actionJson.pagerduty"}})})}if(json.pagerduty&&!json.pagerduty.description){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.pagerDutyAction.actionJsonPagerDutyDescriptionPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonPagerDutyText} property",values:{actionJsonPagerDutyText:"actionJson.pagerduty.description"}})})}return{errors:errors.length?errors:null}}}]);return PagerDutyAction}(_base_action.BaseAction);exports.PagerDutyAction=PagerDutyAction},9157:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JiraAction=void 0;var _base_action=__webpack_require__(7096);var _constants=__webpack_require__(1880);var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(3);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var JiraAction=function(_BaseAction){_inherits(JiraAction,_BaseAction);function JiraAction(props,errors){var _this;_classCallCheck(this,JiraAction);props.type=_constants.ACTION_TYPES.JIRA;_this=_possibleConstructorReturn(this,_getPrototypeOf(JiraAction).call(this,props,errors));_this.projectKey=props.projectKey;_this.issueType=props.issueType;_this.summary=props.summary;return _this}_createClass(JiraAction,[{key:"downstreamJson",get:function get(){var result=_get(_getPrototypeOf(JiraAction.prototype),"downstreamJson",this);Object.assign(result,{projectKey:this.projectKey,issueType:this.issueType,summary:this.summary});return result}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(JiraAction.prototype),"upstreamJson",this);result[this.id]={jira:{fields:{project:{key:this.projectKey},issuetype:{name:this.issueType},summary:this.summary}}};return result}}],[{key:"fromDownstreamJson",value:function fromDownstreamJson(json){var props=_get(_getPrototypeOf(JiraAction),"getPropsFromDownstreamJson",this).call(this,json);var _this$validateJson=this.validateJson(json),errors=_this$validateJson.errors;Object.assign(props,{projectKey:json.projectKey,issueType:json.issueType,summary:json.summary});var action=new JiraAction(props,errors);return{action:action,errors:errors}}},{key:"fromUpstreamJson",value:function fromUpstreamJson(json){var props=_get(_getPrototypeOf(JiraAction),"getPropsFromUpstreamJson",this).call(this,json);var _this$validateJson2=this.validateJson(json.actionJson),errors=_this$validateJson2.errors;Object.assign(props,{projectKey:(0,_lodash.get)(json,"actionJson.jira.fields.project.key"),issueType:(0,_lodash.get)(json,"actionJson.jira.fields.issuetype.name"),summary:(0,_lodash.get)(json,"actionJson.jira.fields.summary")});var action=new JiraAction(props,errors);return{action:action,errors:errors}}},{key:"validateJson",value:function validateJson(json){var errors=[];if(!json.jira){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.jiraAction.actionJsonJiraPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonJira} property",values:{actionJsonJira:"actionJson.jira"}})})}if(!(0,_lodash.get)(json,"jira.fields.project.key")){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.jiraAction.actionJsonJiraProjectKeyPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonJiraProjectKey} property",values:{actionJsonJiraProjectKey:"actionJson.jira.fields.project.key"}})})}if(!(0,_lodash.get)(json,"jira.fields.issuetype.name")){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.jiraAction.actionJsonJiraIssueTypePropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonJiraIssueType} property",values:{actionJsonJiraIssueType:"actionJson.jira.fields.issuetype.name"}})})}if(!(0,_lodash.get)(json,"jira.fields.summary")){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.jiraAction.actionJsonJiraSummaryPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonJiraSummary} property",values:{actionJsonJiraSummary:"actionJson.jira.fields.summary"}})})}return{errors:errors.length?errors:null}}}]);return JiraAction}(_base_action.BaseAction);exports.JiraAction=JiraAction},9158:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UnknownAction=void 0;var _base_action=__webpack_require__(7096);var _constants=__webpack_require__(1880);var _i18n=__webpack_require__(2);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var UnknownAction=function(_BaseAction){_inherits(UnknownAction,_BaseAction);function UnknownAction(props,errors){var _this;_classCallCheck(this,UnknownAction);props.type=_constants.ACTION_TYPES.UNKNOWN;_this=_possibleConstructorReturn(this,_getPrototypeOf(UnknownAction).call(this,props,errors));_this.actionJson=props.actionJson;return _this}_createClass(UnknownAction,[{key:"downstreamJson",get:function get(){var result=_get(_getPrototypeOf(UnknownAction.prototype),"downstreamJson",this);Object.assign(result,{actionJson:this.actionJson});return result}},{key:"upstreamJson",get:function get(){var result=_get(_getPrototypeOf(UnknownAction.prototype),"upstreamJson",this);result[this.id]=this.actionJson;return result}}],[{key:"fromDownstreamJson",value:function fromDownstreamJson(json){var props=_get(_getPrototypeOf(UnknownAction),"getPropsFromDownstreamJson",this).call(this,json);Object.assign(props,{actionJson:json.actionJson});return new UnknownAction(props)}},{key:"fromUpstreamJson",value:function fromUpstreamJson(json){var props=_get(_getPrototypeOf(UnknownAction),"getPropsFromUpstreamJson",this).call(this,json);var _this$validateJson=this.validateJson(json),errors=_this$validateJson.errors;Object.assign(props,{actionJson:json.actionJson});var action=new UnknownAction(props,errors);return{action:action,errors:errors}}},{key:"validateJson",value:function validateJson(json){var errors=[];if(!json.actionJson){errors.push({code:_constants.ERROR_CODES.ERR_PROP_MISSING,message:_i18n.i18n.translate("xpack.watcher.models.unknownAction.actionJsonPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJson} property",values:{actionJson:"actionJson"}})})}return{errors:errors.length?errors:null}}}]);return UnknownAction}(_base_action.BaseAction);exports.UnknownAction=UnknownAction},9159:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildCondition=buildCondition;var _single_line_script=__webpack_require__(7716);var _constants=__webpack_require__(1880);var BETWEEN=_constants.COMPARATORS.BETWEEN;function buildInline(aggType,thresholdComparator,hasTermsAgg){var script="";if(aggType==="count"&&!hasTermsAgg){if(thresholdComparator===BETWEEN){script="\n      if (ctx.payload.hits.total >= params.threshold[0] && ctx.payload.hits.total <= params.threshold[1]) {\n        return true;\n      }\n\n      return false;\n    "}else{script="\n      if (ctx.payload.hits.total ".concat(thresholdComparator," params.threshold) {\n        return true;\n      }\n\n      return false;\n    ")}}if(aggType==="count"&&hasTermsAgg){if(thresholdComparator===BETWEEN){script="\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      for (int i = 0; i < arr.length; i++) {\n        if (arr[i].doc_count >= params.threshold[0] && arr[i].doc_count <= params.threshold[1]) {\n          return true;\n        }\n      }\n\n      return false;\n    "}else{script="\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      for (int i = 0; i < arr.length; i++) {\n        if (arr[i].doc_count ".concat(thresholdComparator," params.threshold) {\n          return true;\n        }\n      }\n\n      return false;\n    ")}}if(aggType!=="count"&&!hasTermsAgg){if(thresholdComparator===BETWEEN){script="\n      if (ctx.payload.aggregations.metricAgg.value >= params.threshold[0]\n        && ctx.payload.aggregations.metricAgg.value <= params.threshold[1]) {\n        return true;\n      }\n\n      return false;\n    "}else{script="\n      if (ctx.payload.aggregations.metricAgg.value ".concat(thresholdComparator," params.threshold) {\n        return true;\n      }\n\n      return false;\n    ")}}if(aggType!=="count"&&hasTermsAgg){if(thresholdComparator===BETWEEN){script="\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      for (int i = 0; i < arr.length; i++) {\n        if (arr[i]['metricAgg'].value >= params.threshold[0] && arr[i]['metricAgg'].value <= params.threshold[1]) {\n          return true;\n        }\n      }\n\n      return false;\n    "}else{script="\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      for (int i = 0; i < arr.length; i++) {\n        if (arr[i]['metricAgg'].value ".concat(thresholdComparator," params.threshold) {\n          return true;\n        }\n      }\n\n      return false;\n    ")}}return(0,_single_line_script.singleLineScript)(script)}function buildParams(threshold){return{threshold:threshold}}function buildCondition(_ref){var aggType=_ref.aggType,thresholdComparator=_ref.thresholdComparator,hasTermsAgg=_ref.hasTermsAgg,threshold=_ref.threshold;return{script:{source:buildInline(aggType,thresholdComparator,hasTermsAgg),params:buildParams(threshold)}}}},9160:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildInput=buildInput;var _lodash=__webpack_require__(3);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function buildIndices(index){if(Array.isArray(index)){return index}return[index]}function buildRange(timeWindowSize,timeWindowUnit,timeField){return _defineProperty({},timeField,{gte:"{{ctx.trigger.scheduled_time}}||-".concat(timeWindowSize).concat(timeWindowUnit),lte:"{{ctx.trigger.scheduled_time}}",format:"strict_date_optional_time||epoch_millis"})}function buildQuery(timeWindowSize,timeWindowUnit,timeField){return{bool:{filter:{range:buildRange(timeWindowSize,timeWindowUnit,timeField)}}}}function buildAggs(aggType,aggField,termField,termSize,termOrder){if(aggType==="count"&&!termField){return null}if(aggType==="count"&&termField){return{bucketAgg:{terms:{field:termField,size:termSize,order:{_count:termOrder}}}}}if(aggType!=="count"&&!termField){var result={metricAgg:{}};(0,_lodash.set)(result,"metricAgg.".concat(aggType),{field:aggField});return result}if(aggType!=="count"&&termField){var _result={bucketAgg:{terms:{field:termField,size:termSize,order:{metricAgg:termOrder}},aggs:{metricAgg:{}}}};(0,_lodash.set)(_result,"bucketAgg.aggs.metricAgg.".concat(aggType),{field:aggField});return _result}}function buildBody(timeWindowSize,timeWindowUnit,timeField,aggType,aggField,termField,termSize,termOrder){var result={size:0,query:buildQuery(timeWindowSize,timeWindowUnit,timeField)};var aggs=buildAggs(aggType,aggField,termField,termSize,termOrder);if(Boolean(aggs)){result.aggs=aggs}return result}function buildInput(_ref2){var index=_ref2.index,timeWindowSize=_ref2.timeWindowSize,timeWindowUnit=_ref2.timeWindowUnit,timeField=_ref2.timeField,aggType=_ref2.aggType,aggField=_ref2.aggField,termField=_ref2.termField,termSize=_ref2.termSize,termOrder=_ref2.termOrder;return{search:{request:{body:buildBody(timeWindowSize,timeWindowUnit,timeField,aggType,aggField,termField,termSize,termOrder),indices:buildIndices(index)}}}}},9161:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildMetadata=buildMetadata;function buildMetadata(_ref){var index=_ref.index,timeField=_ref.timeField,triggerIntervalSize=_ref.triggerIntervalSize,triggerIntervalUnit=_ref.triggerIntervalUnit,aggType=_ref.aggType,aggField=_ref.aggField,termSize=_ref.termSize,termField=_ref.termField,thresholdComparator=_ref.thresholdComparator,timeWindowSize=_ref.timeWindowSize,timeWindowUnit=_ref.timeWindowUnit,threshold=_ref.threshold;return{watcherui:{index:index,time_field:timeField,trigger_interval_size:triggerIntervalSize,trigger_interval_unit:triggerIntervalUnit,agg_type:aggType,agg_field:aggField,term_size:termSize,term_field:termField,threshold_comparator:thresholdComparator,time_window_size:timeWindowSize,time_window_unit:timeWindowUnit,threshold:threshold}}}},9162:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildTransform=buildTransform;var _single_line_script=__webpack_require__(7716);var _constants=__webpack_require__(1880);var BETWEEN=_constants.COMPARATORS.BETWEEN;function buildInline(aggType,thresholdComparator,hasTermsAgg){var script="";if(aggType==="count"&&!hasTermsAgg){script="\n      HashMap result = new HashMap();\n      result.result = ctx.payload.hits.total;\n\n      return result;\n    "}if(aggType==="count"&&hasTermsAgg){if(thresholdComparator===BETWEEN){script="\n      HashMap result = new HashMap();\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      ArrayList filteredHits = new ArrayList();\n\n      for (int i = 0; i < arr.length; i++) {\n        HashMap filteredHit = new HashMap();\n        filteredHit.key = arr[i].key;\n        filteredHit.value = arr[i].doc_count;\n        if (filteredHit.value >= params.threshold[0] && filteredHit.value <= params.threshold[1]) {\n          filteredHits.add(filteredHit);\n        }\n      }\n      result.results = filteredHits;\n\n      return result;\n    "}else{script="\n      HashMap result = new HashMap();\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      ArrayList filteredHits = new ArrayList();\n\n      for (int i = 0; i < arr.length; i++) {\n        HashMap filteredHit = new HashMap();\n        filteredHit.key = arr[i].key;\n        filteredHit.value = arr[i].doc_count;\n        if (filteredHit.value ".concat(thresholdComparator," params.threshold) {\n          filteredHits.add(filteredHit);\n        }\n      }\n      result.results = filteredHits;\n\n      return result;\n    ")}}if(aggType!=="count"&&!hasTermsAgg){script="\n      HashMap result = new HashMap();\n      result.result = ctx.payload.aggregations.metricAgg.value;\n\n      return result;\n    "}if(aggType!=="count"&&hasTermsAgg){if(thresholdComparator===BETWEEN){script="\n      HashMap result = new HashMap();\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      ArrayList filteredHits = new ArrayList();\n\n      for (int i = 0; i < arr.length; i++) {\n        HashMap filteredHit = new HashMap();\n        filteredHit.key = arr[i].key;\n        filteredHit.value = arr[i]['metricAgg'].value;\n        if (filteredHit.value >= params.threshold[0] && filteredHit.value <= params.threshold[1]) {\n          filteredHits.add(filteredHit);\n        }\n      }\n      result.results = filteredHits;\n\n      return result;\n    "}else{script="\n      HashMap result = new HashMap();\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      ArrayList filteredHits = new ArrayList();\n\n      for (int i = 0; i < arr.length; i++) {\n        HashMap filteredHit = new HashMap();\n        filteredHit.key = arr[i].key;\n        filteredHit.value = arr[i]['metricAgg'].value;\n        if (filteredHit.value ".concat(thresholdComparator," params.threshold) {\n          filteredHits.add(filteredHit);\n        }\n      }\n      result.results = filteredHits;\n\n      return result;\n    ")}}return(0,_single_line_script.singleLineScript)(script)}function buildParams(threshold){return{threshold:threshold}}function buildTransform(_ref){var aggType=_ref.aggType,thresholdComparator=_ref.thresholdComparator,hasTermsAgg=_ref.hasTermsAgg,threshold=_ref.threshold;return{script:{source:buildInline(aggType,thresholdComparator,hasTermsAgg),params:buildParams(threshold)}}}},9163:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildTrigger=buildTrigger;function buildTrigger(triggerIntervalSize,triggerIntervalUnit){return{schedule:{interval:"".concat(triggerIntervalSize).concat(triggerIntervalUnit)}}}},9164:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JsonWatchEditSimulate=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _execute_details=__webpack_require__(7376);var _watch_history_item=__webpack_require__(7373);var _constants=__webpack_require__(1880);var _form_errors=__webpack_require__(7095);var _api=__webpack_require__(7044);var _watch_context=__webpack_require__(7067);var _json_watch_edit_simulate_results=__webpack_require__(9165);var _get_time_unit_label=__webpack_require__(7370);var _app_context=__webpack_require__(7066);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectDestructuringEmpty(obj){if(obj==null)throw new TypeError("Cannot destructure undefined")}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var actionModeOptions=Object.keys(_constants.ACTION_MODES).map((function(mode){return{text:_constants.ACTION_MODES[mode],value:_constants.ACTION_MODES[mode]}}));var getScheduleTimeOptions=function getScheduleTimeOptions(){var unitSize=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"0";return Object.entries(_constants.TIME_UNITS).filter((function(_ref){var _ref2=_slicedToArray(_ref,1),key=_ref2[0];return key!==_constants.TIME_UNITS.DAY})).map((function(_ref3){var _ref4=_slicedToArray(_ref3,2),_key=_ref4[0],value=_ref4[1];return{text:(0,_get_time_unit_label.getTimeUnitLabel)(value,unitSize),value:value}}))};var JsonWatchEditSimulate=function JsonWatchEditSimulate(_ref5){var executeWatchErrors=_ref5.executeWatchErrors,hasExecuteWatchErrors=_ref5.hasExecuteWatchErrors,executeDetails=_ref5.executeDetails,setExecuteDetails=_ref5.setExecuteDetails,watchActions=_ref5.watchActions;var _useAppContext=(0,_app_context.useAppContext)(),executeWatchApiUrl=_useAppContext.links.executeWatchApiUrl;var _useContext=(0,_react.useContext)(_watch_context.WatchContext),watch=_useContext.watch;var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),executeResults=_useState2[0],setExecuteResults=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isExecuting=_useState4[0],setIsExecuting=_useState4[1];var _useState5=(0,_react.useState)(null),_useState6=_slicedToArray(_useState5,2),executeResultsError=_useState6[0],setExecuteResultsError=_useState6[1];var _watch$validate=watch.validate(),watchErrors=_watch$validate.errors;var hasWatchJsonError=watchErrors.json.length>=1;var actionModes=executeDetails.actionModes,scheduledTimeValue=executeDetails.scheduledTimeValue,scheduledTimeUnit=executeDetails.scheduledTimeUnit,triggeredTimeValue=executeDetails.triggeredTimeValue,alternativeInput=executeDetails.alternativeInput,ignoreCondition=executeDetails.ignoreCondition;var columns=[{field:"actionId",name:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.table.idColumnLabel",{defaultMessage:"ID"}),sortable:true,truncateText:true},{field:"type",name:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.table.typeColumnLabel",{defaultMessage:"Type"}),truncateText:true},{field:"actionMode",name:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.table.modeColumnLabel",{defaultMessage:"Mode"}),render:function render(_ref6,row){_objectDestructuringEmpty(_ref6);return _react.default.createElement(_eui.EuiSelect,{options:actionModeOptions,value:actionModes[row.actionId],"data-test-subj":"actionModesSelect",onChange:function onChange(e){setExecuteDetails(new _execute_details.ExecuteDetails(_objectSpread({},executeDetails,{actionModes:_objectSpread({},actionModes,_defineProperty({},row.actionId,e.target.value))})))},"aria-label":_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.table.modeSelectLabel",{defaultMessage:"Action modes"})})}}];return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_json_watch_edit_simulate_results.JsonWatchEditSimulateResults,{executeResults:executeResults,executeDetails:executeDetails,error:executeResultsError,onCloseFlyout:function onCloseFlyout(){setExecuteResults(null);setExecuteResultsError(null)}}),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.pageDescription",{defaultMessage:"Use the simulator to override the watch schedule, condition, actions, and input results."}))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_eui.EuiForm,{"data-test-subj":"jsonWatchSimulateForm"},_react.default.createElement(_eui.EuiDescribedFormGroup,{fullWidth:true,title:_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.triggerOverridesTitle",{defaultMessage:"Trigger"})),description:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.triggerOverridesDescription",{defaultMessage:"Set the time and date for starting the watch."})},_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.scheduledTimeFieldLabel",{defaultMessage:"Schedule every"})},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldNumber,{value:scheduledTimeValue==null||scheduledTimeValue===""?scheduledTimeValue:parseInt(scheduledTimeValue,10),min:0,"data-test-subj":"scheduledTimeInput",onChange:function onChange(e){var value=e.target.value;setExecuteDetails(new _execute_details.ExecuteDetails(_objectSpread({},executeDetails,{scheduledTimeValue:value===""?value:parseInt(value,10)})))}})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiSelect,{value:scheduledTimeUnit,options:getScheduleTimeOptions(scheduledTimeValue),onChange:function onChange(e){setExecuteDetails(new _execute_details.ExecuteDetails(_objectSpread({},executeDetails,{scheduledTimeUnit:e.target.value})))}})))),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.triggeredTimeFieldLabel",{defaultMessage:"Trigger after"})},_react.default.createElement(_eui.EuiFieldNumber,{value:triggeredTimeValue==null||triggeredTimeValue===""?triggeredTimeValue:parseInt(triggeredTimeValue,10),min:0,"data-test-subj":"triggeredTimeInput",append:_react.default.createElement(_eui.EuiText,{size:"s"},(0,_get_time_unit_label.getTimeUnitLabel)(_constants.TIME_UNITS.SECOND,triggeredTimeValue)),onChange:function onChange(e){var value=e.target.value;setExecuteDetails(new _execute_details.ExecuteDetails(_objectSpread({},executeDetails,{triggeredTimeValue:value===""?value:parseInt(value,10),triggeredTimeUnit:_constants.TIME_UNITS.SECOND})))}}))),_react.default.createElement(_eui.EuiDescribedFormGroup,{fullWidth:true,title:_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.conditionOverridesTitle",{defaultMessage:"Condition"})),description:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.conditionOverridesDescription",{defaultMessage:"Execute the watch when the condition is met. Otherwise, ignore the condition and run the watch on a fixed schedule."})},_react.default.createElement(_eui.EuiSwitch,{label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.ignoreConditionFieldLabel",{defaultMessage:"Ignore condition"}),checked:ignoreCondition,"data-test-subj":"ignoreConditionSwitch",onChange:function onChange(e){setExecuteDetails(new _execute_details.ExecuteDetails(_objectSpread({},executeDetails,{ignoreCondition:e.target.checked})))}})),_react.default.createElement(_eui.EuiDescribedFormGroup,{fullWidth:true,idAria:"simulateExecutionActionModesDescription",title:_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.actionOverridesTitle",{defaultMessage:"Actions"})),description:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.simulate.form.actionOverridesDescription",defaultMessage:"Allow the watch to execute or skip actions. {actionsLink}",values:{actionsLink:_react.default.createElement(_eui.EuiLink,{href:executeWatchApiUrl,target:"_blank"},_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.actionOverridesDescription.linkLabel",{defaultMessage:"Learn about actions."}))}})},_react.default.createElement(_eui.EuiFormRow,{describedByIds:["simulateExecutionActionModesDescription"],label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.actionModesFieldLabel",{defaultMessage:"Action modes"}),fullWidth:true},_react.default.createElement(_eui.EuiBasicTable,{items:watchActions,itemId:"simulateExecutionActionModesTable",columns:columns}))),_react.default.createElement(_eui.EuiDescribedFormGroup,{fullWidth:true,idAria:"simulateExecutionInputOverridesDescription",title:_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.inputOverridesTitle",{defaultMessage:"Input"})),description:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.inputOverridesDescription",{defaultMessage:"Enter JSON data to override the watch payload that comes from running the input."})},_react.default.createElement(_form_errors.ErrableFormRow,{id:"executeWatchJson",describedByIds:["simulateExecutionInputOverridesDescription"],label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.alternativeInputFieldLabel",{defaultMessage:"Alternative input"}),errorKey:"json",isShowingErrors:hasExecuteWatchErrors,fullWidth:true,errors:executeWatchErrors},_react.default.createElement(_eui.EuiCodeEditor,{fullWidth:true,mode:"json",width:"100%",height:"200px",theme:"github","aria-label":_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.alternativeInputAriaLabel",{defaultMessage:"Code editor"}),value:alternativeInput,onChange:function onChange(json){setExecuteDetails(new _execute_details.ExecuteDetails(_objectSpread({},executeDetails,{alternativeInput:json})))}}))),_react.default.createElement(_eui.EuiButton,{iconType:"play","data-test-subj":"simulateWatchButton",fill:true,type:"submit",isLoading:isExecuting,isDisabled:hasExecuteWatchErrors||hasWatchJsonError,onClick:function _callee(){var _ref7,data,error,formattedResults;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsExecuting(true);_context.next=3;return regeneratorRuntime.awrap((0,_api.executeWatch)(executeDetails,watch));case 3:_ref7=_context.sent;data=_ref7.data;error=_ref7.error;setIsExecuting(false);if(!error){_context.next=9;break}return _context.abrupt("return",setExecuteResultsError(error));case 9:formattedResults=_watch_history_item.WatchHistoryItem.fromUpstreamJson(data.watchHistoryItem);setExecuteResults(formattedResults);case 11:case"end":return _context.stop()}}}))}},_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.saveButtonLabel",{defaultMessage:"Simulate watch"}))))};exports.JsonWatchEditSimulate=JsonWatchEditSimulate},9165:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JsonWatchEditSimulateResults=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _watch_edit_actions=__webpack_require__(7377);var _watch_context=__webpack_require__(7067);var _components=__webpack_require__(7074);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var JsonWatchEditSimulateResults=function JsonWatchEditSimulateResults(_ref){var executeResults=_ref.executeResults,executeDetails=_ref.executeDetails,onCloseFlyout=_ref.onCloseFlyout,error=_ref.error;var _useContext=(0,_react.useContext)(_watch_context.WatchContext),watch=_useContext.watch;var actionModes=executeDetails.actionModes;var getTableData=function getTableData(){var actions=watch.watch&&watch.watch.actions;if(executeResults&&actions){var actionStatuses=executeResults.watchStatus&&executeResults.watchStatus.actionStatuses;return Object.keys(actions).map((function(actionKey){var actionStatus=actionStatuses.find((function(status){return status.id===actionKey}));return{actionId:actionKey,actionType:(0,_watch_edit_actions.getTypeFromAction)(actions[actionKey]),actionMode:actionModes[actionKey],actionState:actionStatus&&actionStatus.state,actionReason:actionStatus&&actionStatus.lastExecutionReason}}))}return[]};var actionsTableData=getTableData();var columns=[{field:"actionId",name:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.table.actionColumnLabel",{defaultMessage:"ID"}),sortable:true,truncateText:true},{field:"actionType",name:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.table.typeColumnLabel",{defaultMessage:"Type"}),truncateText:true},{field:"actionMode",name:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.table.modeColumnLabel",{defaultMessage:"Mode"})},{field:"actionState",name:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.table.stateColumnLabel",{defaultMessage:"State"}),dataType:"string",render:function render(actionState,_item){return _react.default.createElement(_components.WatchStatus,{status:actionState})}},{field:"actionReason",name:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.table.reasonColumnLabel",{defaultMessage:"Reason"})}];var flyoutTitle=_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h2",{id:"simulateResultsFlyOutTitle","data-test-subj":"simulateResultsFlyoutTitle"},_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.title",{defaultMessage:"Simulation results"})));if(error){return _react.default.createElement(_eui.EuiFlyout,{onClose:function onClose(){onCloseFlyout()},"aria-labelledby":"simulateResultsFlyOutTitle"},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},flyoutTitle),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_components.SectionError,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.simulateResults.errorTitle",defaultMessage:"Cannot simulate watch"}),error:error})))}if(!executeResults){return null}var state=executeResults.watchStatus.state,details=executeResults.details;return _react.default.createElement(_eui.EuiFlyout,{onClose:function onClose(){onCloseFlyout()},"data-test-subj":"simulateResultsFlyout","aria-labelledby":"simulateResultsFlyOutTitle"},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},flyoutTitle,_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_components.WatchStatus,{status:state,size:"m"})),_react.default.createElement(_eui.EuiFlyoutBody,null,actionsTableData&&actionsTableData.length>0&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.actionsSectionTitle",{defaultMessage:"Actions"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiBasicTable,{columns:columns,items:actionsTableData}),_react.default.createElement(_eui.EuiSpacer,{size:"l"})),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.simulationOutputSectionTitle",{defaultMessage:"Simulation output"}))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_eui.EuiCodeBlock,{language:"json"},JSON.stringify(details,null,2))))};exports.JsonWatchEditSimulateResults=JsonWatchEditSimulateResults},9166:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ThresholdWatchEdit",{enumerable:true,get:function get(){return _threshold_watch_edit.ThresholdWatchEdit}});var _threshold_watch_edit=__webpack_require__(9167)},9167:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ThresholdWatchEdit=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _constants=__webpack_require__(1880);var _serialization=__webpack_require__(7714);var _components=__webpack_require__(7074);var _api=__webpack_require__(7044);var _agg_types=__webpack_require__(7371);var _group_by_types=__webpack_require__(7711);var _comparators=__webpack_require__(7372);var _watch_edit_actions=__webpack_require__(7377);var _watch_context=__webpack_require__(7067);var _watch_visualization=__webpack_require__(9168);var _threshold_watch_action_panel=__webpack_require__(9171);var _get_time_unit_label=__webpack_require__(7370);var _navigation=__webpack_require__(7139);var _request_flyout=__webpack_require__(7717);var _app_context=__webpack_require__(7066);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var expressionFieldsWithValidation=["aggField","termSize","termField","threshold0","threshold1","timeWindowSize"];var expressionFields=["aggType","aggField","termSize","termField","thresholdComparator","timeWindowSize","timeWindowUnit","triggerIntervalSize","triggerIntervalUnit","threshold","groupBy"];var expressionErrorMessage=_i18n.i18n.translate("xpack.watcher.thresholdWatchExpression.fixErrorInExpressionBelowValidationMessage",{defaultMessage:"Expression contains errors."});var firstFieldOption={text:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.titlePanel.timeFieldOptionLabel",{defaultMessage:"Select a field"}),value:""};var getTimeOptions=function getTimeOptions(unitSize){return Object.entries(_constants.TIME_UNITS).map((function(_ref){var _ref2=_slicedToArray(_ref,2),_key=_ref2[0],value=_ref2[1];return{text:(0,_get_time_unit_label.getTimeUnitLabel)(value,unitSize),value:value}}))};var getFields=function getFields(indices){return regeneratorRuntime.async((function getFields$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap((0,_api.fetchFields)(indices));case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}))};var getTimeFieldOptions=function getTimeFieldOptions(fields){var options=[firstFieldOption];fields.forEach((function(field){if(field.type==="date"){options.push({text:field.name,value:field.name})}}));return options};var getIndexOptions=function getIndexOptions(patternString,indexPatterns){var options,matchingIndices,matchingIndexPatterns,matchingOptions;return regeneratorRuntime.async((function getIndexOptions$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:options=[];if(patternString){_context2.next=3;break}return _context2.abrupt("return",options);case 3:_context2.next=5;return regeneratorRuntime.awrap((0,_api.getMatchingIndices)(patternString));case 5:matchingIndices=_context2.sent;matchingIndexPatterns=indexPatterns.filter((function(anIndexPattern){return anIndexPattern.includes(patternString)}));if(matchingIndices.length||matchingIndexPatterns.length){matchingOptions=_.uniq([].concat(_toConsumableArray(matchingIndices),_toConsumableArray(matchingIndexPatterns)));options.push({label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.titlePanel.indicesAndIndexPatternsLabel",{defaultMessage:"Based on your indices and index patterns"}),options:matchingOptions.map((function(match){return{label:match,value:match}})).sort((function(a,b){return String(a.label).localeCompare(b.label)}))})}options.push({label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.titlePanel.chooseLabel",{defaultMessage:"Choose…"}),options:[{key:"UNIQUE_CHOOSE_KEY",value:patternString,label:patternString}]});return _context2.abrupt("return",options);case 10:case"end":return _context2.stop()}}}))};var ThresholdWatchEdit=function ThresholdWatchEdit(_ref3){var pageTitle=_ref3.pageTitle;var _useAppContext=(0,_app_context.useAppContext)(),toasts=_useAppContext.toasts;var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),indexPatterns=_useState2[0],setIndexPatterns=_useState2[1];var _useState3=(0,_react.useState)([]),_useState4=_slicedToArray(_useState3,2),esFields=_useState4[0],setEsFields=_useState4[1];var _useState5=(0,_react.useState)([]),_useState6=_slicedToArray(_useState5,2),indexOptions=_useState6[0],setIndexOptions=_useState6[1];var _useState7=(0,_react.useState)([firstFieldOption]),_useState8=_slicedToArray(_useState7,2),timeFieldOptions=_useState8[0],setTimeFieldOptions=_useState8[1];var _useState9=(0,_react.useState)(false),_useState10=_slicedToArray(_useState9,2),aggFieldPopoverOpen=_useState10[0],setAggFieldPopoverOpen=_useState10[1];var _useState11=(0,_react.useState)(false),_useState12=_slicedToArray(_useState11,2),groupByPopoverOpen=_useState12[0],setGroupByPopoverOpen=_useState12[1];var _useState13=(0,_react.useState)(false),_useState14=_slicedToArray(_useState13,2),watchThresholdPopoverOpen=_useState14[0],setWatchThresholdPopoverOpen=_useState14[1];var _useState15=(0,_react.useState)(false),_useState16=_slicedToArray(_useState15,2),watchDurationPopoverOpen=_useState16[0],setWatchDurationPopoverOpen=_useState16[1];var _useState17=(0,_react.useState)(false),_useState18=_slicedToArray(_useState17,2),aggTypePopoverOpen=_useState18[0],setAggTypePopoverOpen=_useState18[1];var _useState19=(0,_react.useState)(null),_useState20=_slicedToArray(_useState19,2),serverError=_useState20[0],setServerError=_useState20[1];var _useState21=(0,_react.useState)(false),_useState22=_slicedToArray(_useState21,2),isSaving=_useState22[0],setIsSaving=_useState22[1];var _useState23=(0,_react.useState)(false),_useState24=_slicedToArray(_useState23,2),isIndiciesLoading=_useState24[0],setIsIndiciesLoading=_useState24[1];var _useState25=(0,_react.useState)(false),_useState26=_slicedToArray(_useState25,2),isRequestVisible=_useState26[0],setIsRequestVisible=_useState26[1];var _useContext=(0,_react.useContext)(_watch_context.WatchContext),watch=_useContext.watch,setWatchProperty=_useContext.setWatchProperty;(0,_react.useEffect)((function(){var getIndexPatterns=function getIndexPatterns(){var indexPatternObjects,titles;return regeneratorRuntime.async((function getIndexPatterns$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return regeneratorRuntime.awrap((0,_api.loadIndexPatterns)());case 2:indexPatternObjects=_context3.sent;titles=indexPatternObjects.map((function(indexPattern){return indexPattern.attributes.title}));setIndexPatterns(titles);case 5:case"end":return _context3.stop()}}}))};var loadData=function loadData(){var allEsFields,timeFields;return regeneratorRuntime.async((function loadData$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(watch.index&&watch.index.length>0)){_context4.next=8;break}_context4.next=3;return regeneratorRuntime.awrap(getFields(watch.index));case 3:allEsFields=_context4.sent;timeFields=getTimeFieldOptions(allEsFields);setEsFields(allEsFields);setTimeFieldOptions(timeFields);setWatchProperty("timeFields",timeFields);case 8:getIndexPatterns();case 9:case"end":return _context4.stop()}}}))};loadData()}),[]);var _watch$validate=watch.validate(),errors=_watch$validate.errors;var hasErrors=!!Object.keys(errors).find((function(errorKey){return errors[errorKey].length>=1}));var actionErrors=watch.actions.reduce((function(acc,action){var actionValidationErrors=action.validate();acc[action.id]=actionValidationErrors;return acc}),{});var hasActionErrors=!!Object.keys(actionErrors).find((function(actionError){return!!Object.keys(actionErrors[actionError]).find((function(actionErrorKey){return actionErrors[actionError][actionErrorKey].length>=1}))}));var hasExpressionErrors=!!Object.keys(errors).find((function(errorKey){return expressionFieldsWithValidation.includes(errorKey)&&errors[errorKey].length>=1}));var shouldShowThresholdExpression=watch.index&&watch.index.length>0&&watch.timeField;var andThresholdText=_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.andLabel",{defaultMessage:"AND"});var requestPreviewWatchData=_objectSpread({},watch.upstreamJson,{includeMetadata:false});return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h1",{"data-test-subj":"pageTitle"},pageTitle)),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},watch.titleDescription))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiForm,{"data-test-subj":"thresholdWatchForm"},serverError&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_components.SectionError,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.saveWatchErrorTitle",defaultMessage:"Error saving watch"}),error:serverError}),_react.default.createElement(_eui.EuiSpacer,null)),_react.default.createElement(_components.ErrableFormRow,{id:"watchName",label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.titlePanel.watchNameLabel",defaultMessage:"Name"}),errorKey:"name",isShowingErrors:hasErrors&&watch.name!==undefined,errors:errors},_react.default.createElement(_eui.EuiFieldText,{name:"name","data-test-subj":"nameInput",value:watch.name||"",onChange:function onChange(e){setWatchProperty("name",e.target.value)},onBlur:function onBlur(){if(!watch.name){setWatchProperty("name","")}}})),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_components.ErrableFormRow,{id:"indexSelectSearchBox",fullWidth:true,label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.titlePanel.indicesToQueryLabel",defaultMessage:"Indices to query"}),errorKey:"index",isShowingErrors:hasErrors&&watch.index!==undefined,errors:errors,helpText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.titlePanel.howToBroadenSearchQueryDescription",defaultMessage:"Use * to broaden your query."})},_react.default.createElement(_eui.EuiComboBox,{fullWidth:true,async:true,isLoading:isIndiciesLoading,noSuggestions:!indexOptions.length,options:indexOptions,"data-test-subj":"indicesComboBox",selectedOptions:(watch.index||[]).map((function(anIndex){return{label:anIndex,value:anIndex}})),onChange:function _callee(selected){var indices,currentEsFields,timeFields;return regeneratorRuntime.async((function _callee$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setWatchProperty("index",selected.map((function(aSelected){return aSelected.value})));indices=selected.map((function(s){return s.value}));if(!(indices.length===0)){_context5.next=7;break}setTimeFieldOptions(getTimeFieldOptions([]));setWatchProperty("timeFields",[]);expressionFields.forEach((function(expressionField){setWatchProperty(expressionField,null)}));return _context5.abrupt("return");case 7:_context5.next=9;return regeneratorRuntime.awrap(getFields(indices));case 9:currentEsFields=_context5.sent;timeFields=getTimeFieldOptions(currentEsFields);setEsFields(currentEsFields);setWatchProperty("timeFields",timeFields);setTimeFieldOptions(timeFields);case 14:case"end":return _context5.stop()}}}))},onSearchChange:function _callee2(search){return regeneratorRuntime.async((function _callee2$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:setIsIndiciesLoading(true);_context6.t0=setIndexOptions;_context6.next=4;return regeneratorRuntime.awrap(getIndexOptions(search,indexPatterns));case 4:_context6.t1=_context6.sent;(0,_context6.t0)(_context6.t1);setIsIndiciesLoading(false);case 7:case"end":return _context6.stop()}}}))},onBlur:function onBlur(){if(!watch.index){setWatchProperty("index",[])}}}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_components.ErrableFormRow,{id:"timeField",fullWidth:true,label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.titlePanel.timeFieldLabel",defaultMessage:"Time field"}),errorKey:"timeField",isShowingErrors:hasErrors&&watch.timeField!==undefined,errors:errors},_react.default.createElement(_eui.EuiSelect,{options:timeFieldOptions,fullWidth:true,name:"watchTimeField","data-test-subj":"watchTimeFieldSelect",value:watch.timeField,onChange:function onChange(e){setWatchProperty("timeField",e.target.value)},onBlur:function onBlur(){if(watch.timeField===undefined){setWatchProperty("timeField","")}}}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_components.ErrableFormRow,{id:"watchInterval",fullWidth:true,label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.titlePanel.watchIntervalLabel",defaultMessage:"Run watch every"}),errorKey:"triggerIntervalSize",isShowingErrors:hasErrors&&watch.triggerIntervalSize!==undefined,errors:errors},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldNumber,{fullWidth:true,min:1,value:watch.triggerIntervalSize,"data-test-subj":"triggerIntervalSizeInput",onChange:function onChange(e){var value=e.target.value;var triggerIntervalSize=value!==""?parseInt(value,10):value;setWatchProperty("triggerIntervalSize",triggerIntervalSize)},onBlur:function onBlur(e){if(watch.triggerIntervalSize===undefined){setWatchProperty("triggerIntervalSize","")}}})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiSelect,{fullWidth:true,value:watch.triggerIntervalUnit,"aria-label":_i18n.i18n.translate("xpack.watcher.sections.watchEdit.titlePanel.durationAriaLabel",{defaultMessage:"Duration time unit"}),onChange:function onChange(e){setWatchProperty("triggerIntervalUnit",e.target.value)},options:getTimeOptions(watch.triggerIntervalSize)})))))),_react.default.createElement(_eui.EuiSpacer,null),shouldShowThresholdExpression?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h2",{"data-test-subj":"watchConditionTitle"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.watchConditionSectionTitle",defaultMessage:"Match the following condition"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPopover,{id:"aggTypePopover",button:_react.default.createElement(_eui.EuiExpression,{description:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.whenLabel",{defaultMessage:"when"}),value:_agg_types.aggTypes[watch.aggType].text,isActive:aggTypePopoverOpen,onClick:function onClick(){setAggTypePopoverOpen(true)}}),isOpen:aggTypePopoverOpen,closePopover:function closePopover(){setAggTypePopoverOpen(false)},ownFocus:true,withTitle:true,anchorPosition:"downLeft"},_react.default.createElement("div",null,_react.default.createElement(_eui.EuiPopoverTitle,null,_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.whenButtonLabel",{defaultMessage:"when"})),_react.default.createElement(_eui.EuiSelect,{value:watch.aggType,onChange:function onChange(e){setWatchProperty("aggType",e.target.value);setAggTypePopoverOpen(false)},options:Object.values(_agg_types.aggTypes).map((function(_ref4){var text=_ref4.text,value=_ref4.value;return{text:text,value:value}}))})))),watch.aggType&&_agg_types.aggTypes[watch.aggType].fieldRequired?_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPopover,{id:"aggFieldPopover",button:_react.default.createElement(_eui.EuiExpression,{description:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.ofLabel",{defaultMessage:"of"}),value:watch.aggField||firstFieldOption.text,isActive:aggFieldPopoverOpen||!watch.aggField,onClick:function onClick(){setAggFieldPopoverOpen(true)},color:watch.aggField?"secondary":"danger"}),isOpen:aggFieldPopoverOpen,closePopover:function closePopover(){setAggFieldPopoverOpen(false)},anchorPosition:"downLeft"},_react.default.createElement("div",null,_react.default.createElement(_eui.EuiPopoverTitle,null,_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.ofButtonLabel",{defaultMessage:"of"})),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"watcherThresholdAlertAggFieldContainer"},_react.default.createElement(_components.ErrableFormRow,{errorKey:"aggField",isShowingErrors:hasErrors&&watch.aggField!==undefined,errors:errors},_react.default.createElement(_eui.EuiComboBox,{singleSelection:{asPlainText:true},placeholder:firstFieldOption.text,options:esFields.reduce((function(esFieldOptions,field){if(_agg_types.aggTypes[watch.aggType].validNormalizedTypes.includes(field.normalizedType)){esFieldOptions.push({label:field.name})}return esFieldOptions}),[]),selectedOptions:watch.aggField?[{label:watch.aggField}]:[],onChange:function onChange(selectedOptions){setWatchProperty("aggField",selectedOptions.length===1?selectedOptions[0].label:undefined);setAggFieldPopoverOpen(false)}}))))))):null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPopover,{id:"groupByPopover",button:_react.default.createElement(_eui.EuiExpression,{description:"".concat(_group_by_types.groupByTypes[watch.groupBy].sizeRequired?_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.groupedOverLabel",{defaultMessage:"grouped over"}):_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.overLabel",{defaultMessage:"over"})),value:"".concat(_group_by_types.groupByTypes[watch.groupBy].text," ").concat(_group_by_types.groupByTypes[watch.groupBy].sizeRequired?"".concat(watch.termSize||""," ").concat(watch.termField?"'".concat(watch.termField,"'"):""):""),isActive:groupByPopoverOpen||watch.groupBy==="top"&&!(watch.termSize&&watch.termField),onClick:function onClick(){setGroupByPopoverOpen(true)},color:watch.groupBy==="all"||watch.termSize&&watch.termField?"secondary":"danger"}),isOpen:groupByPopoverOpen,closePopover:function closePopover(){setGroupByPopoverOpen(false)},ownFocus:true,withTitle:true,anchorPosition:"downLeft"},_react.default.createElement("div",null,_react.default.createElement(_eui.EuiPopoverTitle,null,_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.overButtonLabel",{defaultMessage:"over"})),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSelect,{value:watch.groupBy,onChange:function onChange(e){setWatchProperty("termSize",null);setWatchProperty("termField",null);setWatchProperty("groupBy",e.target.value)},options:Object.values(_group_by_types.groupByTypes).map((function(_ref5){var text=_ref5.text,value=_ref5.value;return{text:text,value:value}}))})),_group_by_types.groupByTypes[watch.groupBy].sizeRequired?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_components.ErrableFormRow,{errorKey:"termSize",isShowingErrors:hasErrors,errors:errors},_react.default.createElement(_eui.EuiFieldNumber,{value:watch.termSize,onChange:function onChange(e){setWatchProperty("termSize",e.target.value)},min:1}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_components.ErrableFormRow,{errorKey:"termField",isShowingErrors:hasErrors&&watch.termField!==undefined,errors:errors},_react.default.createElement(_eui.EuiSelect,{value:watch.termField||"",onChange:function onChange(e){setWatchProperty("termField",e.target.value)},options:esFields.reduce((function(options,field){if(_group_by_types.groupByTypes[watch.groupBy].validNormalizedTypes.includes(field.normalizedType)){options.push({text:field.name,value:field.name})}return options}),[firstFieldOption])})))):null)))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPopover,{id:"watchThresholdPopover",button:_react.default.createElement(_eui.EuiExpression,{"data-test-subj":"watchThresholdButton",description:_comparators.comparators[watch.thresholdComparator].text,value:watch.threshold.slice(0,_comparators.comparators[watch.thresholdComparator].requiredValues).join(" ".concat(andThresholdText," ")),isActive:Boolean(watchThresholdPopoverOpen||errors.threshold0.length||errors.threshold1&&errors.threshold1.length),onClick:function onClick(){setWatchThresholdPopoverOpen(true)},color:errors.threshold0.length||errors.threshold1&&errors.threshold1.length?"danger":"secondary"}),isOpen:watchThresholdPopoverOpen,closePopover:function closePopover(){setWatchThresholdPopoverOpen(false)},ownFocus:true,withTitle:true,anchorPosition:"downLeft"},_react.default.createElement("div",null,_react.default.createElement(_eui.EuiPopoverTitle,null,_comparators.comparators[watch.thresholdComparator].text),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSelect,{value:watch.thresholdComparator,onChange:function onChange(e){setWatchProperty("thresholdComparator",e.target.value)},options:Object.values(_comparators.comparators).map((function(_ref6){var text=_ref6.text,value=_ref6.value;return{text:text,value:value}}))})),Array.from(Array(_comparators.comparators[watch.thresholdComparator].requiredValues)).map((function(_notUsed,i){return _react.default.createElement(_react.Fragment,{key:"threshold".concat(i)},i>0?_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"watcherThresholdWatchInBetweenComparatorText"},_react.default.createElement(_eui.EuiText,null,andThresholdText),hasErrors&&_react.default.createElement(_eui.EuiSpacer,null)):null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_components.ErrableFormRow,{errorKey:"threshold".concat(i),isShowingErrors:hasErrors,errors:errors},_react.default.createElement(_eui.EuiFieldNumber,{"data-test-subj":"watchThresholdInput",value:watch.threshold[i]==null?"":watch.threshold[i],min:0,step:.1,onChange:function onChange(e){var value=e.target.value;var threshold=value!==""?parseFloat(value):value;var newThreshold=_toConsumableArray(watch.threshold);newThreshold[i]=threshold;setWatchProperty("threshold",newThreshold)}}))))})))))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPopover,{id:"watchDurationPopover",button:_react.default.createElement(_eui.EuiExpression,{description:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.forTheLastLabel",{defaultMessage:"for the last"}),value:"".concat(watch.timeWindowSize," ").concat((0,_get_time_unit_label.getTimeUnitLabel)(watch.timeWindowUnit,parseInt(watch.timeWindowSize,10).toString())),isActive:watchDurationPopoverOpen||!watch.timeWindowSize,onClick:function onClick(){setWatchDurationPopoverOpen(true)},color:watch.timeWindowSize?"secondary":"danger"}),isOpen:watchDurationPopoverOpen,closePopover:function closePopover(){setWatchDurationPopoverOpen(false)},ownFocus:true,withTitle:true,anchorPosition:"downLeft"},_react.default.createElement("div",null,_react.default.createElement(_eui.EuiPopoverTitle,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.threshold.forTheLastButtonLabel",defaultMessage:"For the last"})),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_components.ErrableFormRow,{errorKey:"timeWindowSize",isShowingErrors:hasErrors,errors:errors},_react.default.createElement(_eui.EuiFieldNumber,{min:1,value:watch.timeWindowSize||"",onChange:function onChange(e){var value=e.target.value;var timeWindowSize=value!==""?parseInt(value,10):value;setWatchProperty("timeWindowSize",timeWindowSize)}}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSelect,{value:watch.timeWindowUnit,onChange:function onChange(e){setWatchProperty("timeWindowUnit",e.target.value)},options:getTimeOptions(watch.timeWindowSize)}))))))),hasExpressionErrors?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiText,{color:"danger",size:"s"},expressionErrorMessage),_react.default.createElement(_eui.EuiSpacer,{size:"m"})):null,hasErrors?null:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_watch_visualization.WatchVisualization,null),_react.default.createElement(_threshold_watch_action_panel.WatchActionsPanel,{actionErrors:actionErrors})),_react.default.createElement(_eui.EuiSpacer,null)):null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,color:"secondary","data-test-subj":"saveWatchButton",type:"submit",iconType:"check",isDisabled:hasErrors||hasActionErrors,isLoading:isSaving,onClick:function _callee3(){var savedWatch;return regeneratorRuntime.async((function _callee3$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:setIsSaving(true);_context7.next=3;return regeneratorRuntime.awrap((0,_watch_edit_actions.onWatchSave)(watch,toasts));case 3:savedWatch=_context7.sent;if(!(savedWatch&&savedWatch.error)){_context7.next=7;break}setIsSaving(false);return _context7.abrupt("return",setServerError(savedWatch.error));case 7:case"end":return _context7.stop()}}}))}},watch.isNew?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.threshold.createButtonLabel",defaultMessage:"Create alert"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.threshold.saveButtonLabel",defaultMessage:"Save alert"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return(0,_navigation.goToWatchList)()}},_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.cancelButtonLabel",{defaultMessage:"Cancel"}))))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return setIsRequestVisible(!isRequestVisible)}},isRequestVisible?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.hideRequestButtonLabel",defaultMessage:"Hide request"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.showRequestButtonLabel",defaultMessage:"Show request"}))))),isRequestVisible?_react.default.createElement(_request_flyout.RequestFlyout,{id:watch.id,payload:(0,_serialization.serializeThresholdWatch)(requestPreviewWatchData),close:function close(){return setIsRequestVisible(false)}}):null)};exports.ThresholdWatchEdit=ThresholdWatchEdit},9168:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchVisualization=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _charts=__webpack_require__(42);var _datemath=_interopRequireDefault(__webpack_require__(77));var _momentTimezone=_interopRequireDefault(__webpack_require__(35));var _eui=__webpack_require__(1);var _react2=__webpack_require__(4);var _visualize_options=__webpack_require__(9169);var _threshold_watch=__webpack_require__(7369);var _api=__webpack_require__(7044);var _watch_context=__webpack_require__(7067);var _agg_types=__webpack_require__(7371);var _comparators=__webpack_require__(7372);var _components=__webpack_require__(7074);var _app_context=__webpack_require__(7066);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var customTheme=function customTheme(){return{lineSeriesStyle:{line:{strokeWidth:3},point:{visible:false}}}};var getTimezone=function getTimezone(config){var DATE_FORMAT_CONFIG_KEY="dateFormat:tz";var isCustomTimezone=!config.isDefault(DATE_FORMAT_CONFIG_KEY);if(isCustomTimezone){return config.get(DATE_FORMAT_CONFIG_KEY)}var detectedTimezone=_momentTimezone.default.tz.guess();if(detectedTimezone){return detectedTimezone}return(0,_momentTimezone.default)().format("Z")};var getDomain=function getDomain(watch){var VISUALIZE_TIME_WINDOW_MULTIPLIER=5;var fromExpression="now-".concat(watch.timeWindowSize*VISUALIZE_TIME_WINDOW_MULTIPLIER).concat(watch.timeWindowUnit);var toExpression="now";var fromMoment=_datemath.default.parse(fromExpression);var toMoment=_datemath.default.parse(toExpression);var visualizeTimeWindowFrom=fromMoment?fromMoment.valueOf():0;var visualizeTimeWindowTo=toMoment?toMoment.valueOf():0;return{min:visualizeTimeWindowFrom,max:visualizeTimeWindowTo}};var getThreshold=function getThreshold(watch){return watch.threshold.slice(0,_comparators.comparators[watch.thresholdComparator].requiredValues)};var getTimeBuckets=function getTimeBuckets(watch,timeBuckets){var domain=getDomain(watch);timeBuckets.setBounds(domain);return timeBuckets};var WatchVisualization=function WatchVisualization(){var _useAppContext=(0,_app_context.useAppContext)(),TimeBuckets=_useAppContext.legacy.TimeBuckets,euiUtils=_useAppContext.euiUtils,uiSettings=_useAppContext.uiSettings;var _useContext=(0,_react.useContext)(_watch_context.WatchContext),watch=_useContext.watch;var chartsTheme=euiUtils.useChartsTheme();var index=watch.index,timeField=watch.timeField,triggerIntervalSize=watch.triggerIntervalSize,triggerIntervalUnit=watch.triggerIntervalUnit,aggType=watch.aggType,aggField=watch.aggField,termSize=watch.termSize,termField=watch.termField,thresholdComparator=watch.thresholdComparator,timeWindowSize=watch.timeWindowSize,timeWindowUnit=watch.timeWindowUnit,groupBy=watch.groupBy,threshold=watch.threshold;var domain=getDomain(watch);var timeBuckets=new TimeBuckets;timeBuckets.setBounds(domain);var interval=timeBuckets.getInterval().expression;var visualizeOptions=new _visualize_options.VisualizeOptions({rangeFrom:domain.min,rangeTo:domain.max,interval:interval,timezone:getTimezone(uiSettings)});var watchWithoutActions=new _threshold_watch.ThresholdWatch(_objectSpread({},watch,{actions:[]}));var _useGetWatchVisualiza=(0,_api.useGetWatchVisualizationData)(watchWithoutActions,visualizeOptions),isInitialRequest=_useGetWatchVisualiza.isInitialRequest,isLoading=_useGetWatchVisualiza.isLoading,watchVisualizationData=_useGetWatchVisualiza.data,error=_useGetWatchVisualiza.error,reload=_useGetWatchVisualiza.sendRequest;(0,_react.useEffect)((function(){if(isInitialRequest){return}reload()}),[index,timeField,triggerIntervalSize,triggerIntervalUnit,aggType,aggField,termSize,termField,thresholdComparator,timeWindowSize,timeWindowUnit,groupBy,threshold]);if(isInitialRequest&&isLoading){return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement(_eui.EuiLoadingChart,{size:"xl"}),body:_react.default.createElement(_eui.EuiText,{color:"subdued"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.loadingWatchVisualizationDescription",defaultMessage:"Loading watch visualization…"}))})}if(error){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_components.SectionError,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.errorLoadingWatchVisualizationTitle",defaultMessage:"Cannot load watch visualization"}),error:error}),_react.default.createElement(_eui.EuiSpacer,{size:"l"}))}if(watchVisualizationData){var watchVisualizationDataKeys=Object.keys(watchVisualizationData);var timezone=getTimezone(uiSettings);var actualThreshold=getThreshold(watch);var maxY=actualThreshold[actualThreshold.length-1];Object.values(watchVisualizationData).forEach((function(data){data.forEach((function(_ref){var _ref2=_slicedToArray(_ref,2),y=_ref2[1];if(y>maxY){maxY=y}}))}));var dateFormatter=function dateFormatter(d){return(0,_momentTimezone.default)(d).tz(timezone).format(getTimeBuckets(watch,new TimeBuckets).getScaledDateFormat())};var aggLabel=_agg_types.aggTypes[watch.aggType].text;return _react.default.createElement("div",{"data-test-subj":"watchVisualizationChart"},_react.default.createElement(_eui.EuiSpacer,{size:"l"}),watchVisualizationDataKeys.length?_react.default.createElement(_charts.Chart,{size:["100%",300],renderer:"canvas"},_react.default.createElement(_charts.Settings,{theme:[customTheme(),chartsTheme],xDomain:domain,showLegend:!!watch.termField,legendPosition:_charts.Position.Bottom}),_react.default.createElement(_charts.Axis,{id:"bottom",position:_charts.Position.Bottom,showOverlappingTicks:true,tickFormat:dateFormatter}),_react.default.createElement(_charts.Axis,{domain:{max:maxY},id:"left",title:aggLabel,position:_charts.Position.Left}),watchVisualizationDataKeys.map((function(key){return _react.default.createElement(_charts.LineSeries,{key:key,id:key,xScaleType:_charts.ScaleType.Time,yScaleType:_charts.ScaleType.Linear,data:watchVisualizationData[key],xAccessor:0,yAccessors:[1],timeZone:timezone})})),actualThreshold.map((function(_value,i){var specId=i===0?"threshold":"threshold".concat(i);return _react.default.createElement(_charts.LineAnnotation,{key:specId,id:specId,domainType:_charts.AnnotationDomainTypes.YDomain,dataValues:[{dataValue:watch.threshold[i],details:specId}]})}))):_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.thresholdPreviewChart.noDataTitle",defaultMessage:"No data"}),color:"warning"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.thresholdPreviewChart.dataDoesNotExistTextMessage",defaultMessage:"Your index and condition did not return any data."})),_react.default.createElement(_eui.EuiSpacer,{size:"l"}))}return null};exports.WatchVisualization=WatchVisualization},9169:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"VisualizeOptions",{enumerable:true,get:function get(){return _visualize_options.VisualizeOptions}});var _visualize_options=__webpack_require__(9170)},9170:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeOptions=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var VisualizeOptions=function(){function VisualizeOptions(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,VisualizeOptions);this.rangeFrom=props.rangeFrom;this.rangeTo=props.rangeTo;this.interval=props.interval;this.timezone=props.timezone}_createClass(VisualizeOptions,[{key:"upstreamJson",get:function get(){return{rangeFrom:this.rangeFrom,rangeTo:this.rangeTo,interval:this.interval,timezone:this.timezone}}}]);return VisualizeOptions}();exports.VisualizeOptions=VisualizeOptions},9171:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchActionsPanel=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _api=__webpack_require__(7044);var _threshold_watch_action_dropdown=__webpack_require__(9172);var _threshold_watch_action_accordion=__webpack_require__(9173);var _watch_context=__webpack_require__(7067);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var WatchActionsPanel=function WatchActionsPanel(_ref){var actionErrors=_ref.actionErrors;var _useContext=(0,_react.useContext)(_watch_context.WatchContext),watch=_useContext.watch;var _useLoadSettings=(0,_api.useLoadSettings)(),settings=_useLoadSettings.data,isLoading=_useLoadSettings.isLoading;return _react.default.createElement("div",{"data-test-subj":"watchActionsPanel"},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.watcher.sections.watchEdit.actions.title",{defaultMessage:"Perform {watchActionsCount, plural, one{# action} other {# actions}} when condition is met",values:{watchActionsCount:watch.actions.length}})))),_react.default.createElement(_eui.EuiFlexItem,{className:"watcherThresholdWatchActionDropdownContainer"},_react.default.createElement(_threshold_watch_action_dropdown.WatchActionsDropdown,{settings:settings,isLoading:isLoading}))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_threshold_watch_action_accordion.WatchActionsAccordion,{settings:settings,actionErrors:actionErrors}))};exports.WatchActionsPanel=WatchActionsPanel},9172:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchActionsDropdown=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _action=__webpack_require__(7366);var _react2=__webpack_require__(4);var _constants=__webpack_require__(1880);var _watch_context=__webpack_require__(7067);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var disabledMessage=_i18n.i18n.translate("xpack.watcher.sections.watchEdit.actions.disabledOptionLabel",{defaultMessage:"Disabled. Configure your elasticsearch.yml."});var WatchActionsDropdown=function WatchActionsDropdown(_ref){var settings=_ref.settings,isLoading=_ref.isLoading;var _useContext=(0,_react.useContext)(_watch_context.WatchContext),addAction=_useContext.addAction;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],setIsPopOverOpen=_useState2[1];var allActionTypes=_action.Action.getActionTypes();var actions=Object.entries(allActionTypes).map((function(_ref2){var _ref3=_slicedToArray(_ref2,2),type=_ref3[0],_ref3$=_ref3[1],typeName=_ref3$.typeName,iconClass=_ref3$.iconClass,selectMessage=_ref3$.selectMessage;var isEnabled=settings&&settings.actionTypes&&settings.actionTypes[type]&&typeof settings.actionTypes[type].enabled!=="undefined"?settings.actionTypes[type].enabled:true;return{type:type,typeName:typeName,iconClass:iconClass,selectMessage:selectMessage,isEnabled:isEnabled}}));var button=_react.default.createElement(_eui.EuiButton,{"data-test-subj":"addWatchActionButton",iconType:"arrowDown",iconSide:"right",onClick:function onClick(){return setIsPopOverOpen(!isPopoverOpen)}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.actions.addActionButtonLabel",defaultMessage:"Add action"}));return _react.default.createElement(_eui.EuiPopover,{id:"watchActionPanel",button:button,isOpen:isPopoverOpen,closePopover:function closePopover(){return setIsPopOverOpen(false)},panelPaddingSize:"none",anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiContextMenuPanel,{items:actions.map((function(action,index){var isActionDisabled=action.type===_constants.ACTION_TYPES.EMAIL&&!action.isEnabled;var description=isActionDisabled?disabledMessage:action.selectMessage;return _react.default.createElement(_eui.EuiContextMenuItem,{key:"".concat(action.type,"-").concat(index),disabled:isActionDisabled,"data-test-subj":"".concat(action.type,"ActionButton"),onClick:function onClick(){addAction({type:action.type,defaults:{isNew:true}});setIsPopOverOpen(false)}},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"watcherThresholdWatchActionContextMenuItem"},_react.default.createElement(_eui.EuiIcon,{type:action.iconClass})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("strong",null,action.typeName),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement("p",null,description)))))}))}))};exports.WatchActionsDropdown=WatchActionsDropdown},9173:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchActionsAccordion=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _execute_details=__webpack_require__(7376);var _action=__webpack_require__(7366);var _watch_history_item=__webpack_require__(7373);var _threshold_watch=__webpack_require__(7369);var _constants=__webpack_require__(1880);var _watch_context=__webpack_require__(7067);var _action_fields=__webpack_require__(9174);var _api=__webpack_require__(7044);var _components=__webpack_require__(7074);var _app_context=__webpack_require__(7066);var _actionFieldsComponen;function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var actionFieldsComponentMap=(_actionFieldsComponen={},_defineProperty(_actionFieldsComponen,_constants.ACTION_TYPES.LOGGING,_action_fields.LoggingActionFields),_defineProperty(_actionFieldsComponen,_constants.ACTION_TYPES.SLACK,_action_fields.SlackActionFields),_defineProperty(_actionFieldsComponen,_constants.ACTION_TYPES.EMAIL,_action_fields.EmailActionFields),_defineProperty(_actionFieldsComponen,_constants.ACTION_TYPES.INDEX,_action_fields.IndexActionFields),_defineProperty(_actionFieldsComponen,_constants.ACTION_TYPES.WEBHOOK,_action_fields.WebhookActionFields),_defineProperty(_actionFieldsComponen,_constants.ACTION_TYPES.PAGERDUTY,_action_fields.PagerDutyActionFields),_defineProperty(_actionFieldsComponen,_constants.ACTION_TYPES.JIRA,_action_fields.JiraActionFields),_actionFieldsComponen);var WatchActionsAccordion=function WatchActionsAccordion(_ref){var settings=_ref.settings,actionErrors=_ref.actionErrors;var _useAppContext=(0,_app_context.useAppContext)(),watchActionsConfigurationMap=_useAppContext.links.watchActionsConfigurationMap,toasts=_useAppContext.toasts;var _useContext=(0,_react.useContext)(_watch_context.WatchContext),watch=_useContext.watch,setWatchProperty=_useContext.setWatchProperty;var actions=watch.actions;var _useState=(0,_react.useState)({}),_useState2=_slicedToArray(_useState,2),isExecuting=_useState2[0],setIsExecuting=_useState2[1];var _useState3=(0,_react.useState)(null),_useState4=_slicedToArray(_useState3,2),executeResultsError=_useState4[0],setExecuteResultsError=_useState4[1];if(actions&&actions.length>=1){return actions.map((function(action){var FieldsComponent=actionFieldsComponentMap[action.type];var errors=actionErrors[action.id];var hasErrors=!!Object.keys(errors).find((function(errorKey){return errors[errorKey].length>=1}));return _react.default.createElement(_eui.EuiAccordion,{initialIsOpen:action.isNew||hasErrors,key:action.id,id:action.id,className:"euiAccordionForm",buttonContentClassName:"euiAccordionForm__button","data-test-subj":"watchActionAccordion",buttonContent:_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{type:action.iconClass,size:"m"})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTitle,{size:"s",className:"euiAccordionForm__title"},_react.default.createElement("h6",null,action.typeName)))),extraAction:_react.default.createElement(_eui.EuiButtonIcon,{iconType:"cross",color:"danger",className:"euiAccordionForm__extraAction","aria-label":_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:function onClick(){var updatedActions=actions.filter((function(actionItem){return actionItem.id!==action.id}));setWatchProperty("actions",updatedActions)}}),paddingSize:"l"},executeResultsError&&executeResultsError[action.id]&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_components.SectionError,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.threshold.accordion.simulateResultsErrorTitle",defaultMessage:"Error testing action"}),error:executeResultsError[action.id]}),_react.default.createElement(_eui.EuiSpacer,{size:"s"})),_react.default.createElement(_eui.EuiForm,null,_react.default.createElement(FieldsComponent,{action:action,errors:errors,hasErrors:hasErrors,editAction:function editAction(changedProperty){var updatedActions=actions.map((function(actionItem){if(actionItem.id===action.id){var ActionTypes=_action.Action.getActionTypes();var ActionTypeModel=ActionTypes[action.type];var _key=changedProperty.key,value=changedProperty.value;return new ActionTypeModel(_objectSpread({},action,_defineProperty({},_key,value)))}return actionItem}));setWatchProperty("actions",updatedActions)}},settings&&settings.actionTypes[action.type].enabled===false?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.actions.actionConfigurationWarningTitleText",{defaultMessage:"Account may not be configured"}),color:"warning",iconType:"help"},_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.threshold.actions.actionConfigurationWarningDescriptionText",defaultMessage:"To create this action, you must configure at least one {accountType} account. {docLink}",values:{accountType:action.typeName,docLink:_react.default.createElement(_eui.EuiLink,{href:watchActionsConfigurationMap[action.type],target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.threshold.actions.actionConfigurationWarningHelpLinkText",defaultMessage:"Learn more."}))}})))),_react.default.createElement(_eui.EuiSpacer,null)):null),_react.default.createElement(_eui.EuiButton,{type:"submit",isDisabled:hasErrors,isLoading:isExecuting[action.id],"data-test-subj":"simulateActionButton",onClick:function _callee(){var selectedWatchAction,executeDetails,newExecuteWatch,_ref2,data,error,formattedResults,actionStatuses,actionStatus,message;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:selectedWatchAction=watch.actions.filter((function(watchAction){return watchAction.id===action.id}));executeDetails=new _execute_details.ExecuteDetails({ignoreCondition:true,recordExecution:false,actionModes:_defineProperty({},action.id,_constants.ACTION_MODES.FORCE_EXECUTE)});newExecuteWatch=new _threshold_watch.ThresholdWatch(_objectSpread({},watch,{actions:selectedWatchAction}));setIsExecuting(_defineProperty({},action.id,true));setExecuteResultsError(null);_context.next=7;return regeneratorRuntime.awrap((0,_api.executeWatch)(executeDetails,newExecuteWatch));case 7:_ref2=_context.sent;data=_ref2.data;error=_ref2.error;setIsExecuting(_defineProperty({},action.id,false));if(!error){_context.next=13;break}return _context.abrupt("return",setExecuteResultsError(_defineProperty({},action.id,error)));case 13:formattedResults=_watch_history_item.WatchHistoryItem.fromUpstreamJson(data.watchHistoryItem);actionStatuses=formattedResults.watchStatus.actionStatuses;actionStatus=actionStatuses.find((function(actionItem){return actionItem.id===action.id}));if(!(actionStatus&&actionStatus.lastExecutionSuccessful===false)){_context.next=19;break}message=actionStatus.lastExecutionReason||action.simulateFailMessage;return _context.abrupt("return",toasts.addDanger(message));case 19:return _context.abrupt("return",toasts.addSuccess(action.simulateMessage));case 20:case"end":return _context.stop()}}}))}},action.simulatePrompt)))}))}return null};exports.WatchActionsAccordion=WatchActionsAccordion},9174:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EmailActionFields",{enumerable:true,get:function get(){return _email_action_fields.EmailActionFields}});Object.defineProperty(exports,"IndexActionFields",{enumerable:true,get:function get(){return _index_action_fields.IndexActionFields}});Object.defineProperty(exports,"JiraActionFields",{enumerable:true,get:function get(){return _jira_action_fields.JiraActionFields}});Object.defineProperty(exports,"LoggingActionFields",{enumerable:true,get:function get(){return _logging_action_fields.LoggingActionFields}});Object.defineProperty(exports,"PagerDutyActionFields",{enumerable:true,get:function get(){return _pagerduty_action_fields.PagerDutyActionFields}});Object.defineProperty(exports,"SlackActionFields",{enumerable:true,get:function get(){return _slack_action_fields.SlackActionFields}});Object.defineProperty(exports,"WebhookActionFields",{enumerable:true,get:function get(){return _webhook_action_fields.WebhookActionFields}});var _email_action_fields=__webpack_require__(9175);var _index_action_fields=__webpack_require__(9176);var _jira_action_fields=__webpack_require__(9177);var _logging_action_fields=__webpack_require__(9178);var _pagerduty_action_fields=__webpack_require__(9179);var _slack_action_fields=__webpack_require__(9180);var _webhook_action_fields=__webpack_require__(9181)},9175:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmailActionFields=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _form_errors=__webpack_require__(7095);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var EmailActionFields=function EmailActionFields(_ref){var action=_ref.action,editAction=_ref.editAction,errors=_ref.errors,hasErrors=_ref.hasErrors;var to=action.to,subject=action.subject,body=action.body;var toOptions=to?to.map((function(label){return{label:label}})):[];return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_form_errors.ErrableFormRow,{id:"emailRecipient",errorKey:"to",fullWidth:true,errors:errors,isShowingErrors:hasErrors&&to!==null,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.emailAction.recipientTextFieldLabel",{defaultMessage:"To email address"})},_react.default.createElement(_eui.EuiComboBox,{noSuggestions:true,fullWidth:true,"data-test-subj":"toEmailAddressInput",selectedOptions:toOptions,onCreateOption:function onCreateOption(searchValue){var newOptions=[].concat(_toConsumableArray(toOptions),[{label:searchValue}]);editAction({key:"to",value:newOptions.map((function(newOption){return newOption.label}))})},onChange:function onChange(selectedOptions){editAction({key:"to",value:selectedOptions.map((function(selectedOption){return selectedOption.label}))})},onBlur:function onBlur(){if(!to){editAction({key:"to",value:[]})}}})),_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.emailAction.subjectTextFieldLabel",{defaultMessage:"Subject (optional)"})},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,name:"subject","data-test-subj":"emailSubjectInput",value:subject||"",onChange:function onChange(e){editAction({key:"subject",value:e.target.value})}})),_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.emailAction.bodyTextAreaFieldLabel",{defaultMessage:"Body"})},_react.default.createElement(_eui.EuiTextArea,{fullWidth:true,value:body||"",name:"body","data-test-subj":"emailBodyInput",onChange:function onChange(e){editAction({key:"body",value:e.target.value})}})))};exports.EmailActionFields=EmailActionFields},9176:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexActionFields=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _form_errors=__webpack_require__(7095);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var IndexActionFields=function IndexActionFields(_ref){var action=_ref.action,editAction=_ref.editAction,errors=_ref.errors,hasErrors=_ref.hasErrors;var index=action.index;return _react.default.createElement(_form_errors.ErrableFormRow,{id:"indexName",errorKey:"index",fullWidth:true,errors:errors,isShowingErrors:hasErrors&&index!==undefined,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.indexAction.indexFieldLabel",{defaultMessage:"Index"})},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,name:"index","data-test-subj":"indexInput",value:index||"",onChange:function onChange(e){editAction({key:"index",value:e.target.value})},onBlur:function onBlur(){if(!index){editAction({key:"index",value:""})}}}))};exports.IndexActionFields=IndexActionFields},9177:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JiraActionFields=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _form_errors=__webpack_require__(7095);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var JiraActionFields=function JiraActionFields(_ref){var action=_ref.action,editAction=_ref.editAction,errors=_ref.errors,hasErrors=_ref.hasErrors,children=_ref.children;var projectKey=action.projectKey,issueType=action.issueType,summary=action.summary;return _react.default.createElement(_react.Fragment,null,children,_react.default.createElement(_form_errors.ErrableFormRow,{id:"jiraProjectKey",errorKey:"projectKey",fullWidth:true,errors:errors,isShowingErrors:hasErrors&&projectKey!==undefined,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.jiraAction.projectKeyFieldLabel",{defaultMessage:"Project key"})},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,name:"projectKey",value:projectKey||"","data-test-subj":"jiraProjectKeyInput",onChange:function onChange(e){editAction({key:"projectKey",value:e.target.value})},onBlur:function onBlur(){if(!projectKey){editAction({key:"projectKey",value:""})}}})),_react.default.createElement(_form_errors.ErrableFormRow,{id:"jiraIssueType",errorKey:"issueType",fullWidth:true,errors:errors,isShowingErrors:hasErrors&&issueType!==undefined,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.jiraAction.issueTypeFieldLabel",{defaultMessage:"Issue type"})},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,value:issueType||"",name:"issueType","data-test-subj":"jiraIssueTypeInput",onChange:function onChange(e){editAction({key:"issueType",value:e.target.value})},onBlur:function onBlur(){if(!issueType){editAction({key:"issueType",value:""})}}})),_react.default.createElement(_form_errors.ErrableFormRow,{id:"jiraSummary",errorKey:"summary",fullWidth:true,errors:errors,isShowingErrors:hasErrors&&summary!==undefined,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.jiraAction.summaryFieldLabel",{defaultMessage:"Summary"})},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,value:summary||"",name:"summary","data-test-subj":"jiraSummaryInput",onChange:function onChange(e){editAction({key:"summary",value:e.target.value})},onBlur:function onBlur(){if(!summary){editAction({key:"summary",value:""})}}})))};exports.JiraActionFields=JiraActionFields},9178:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoggingActionFields=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _form_errors=__webpack_require__(7095);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LoggingActionFields=function LoggingActionFields(_ref){var action=_ref.action,editAction=_ref.editAction,errors=_ref.errors,hasErrors=_ref.hasErrors;var text=action.text;return _react.default.createElement(_form_errors.ErrableFormRow,{id:"loggingText",errorKey:"text",fullWidth:true,errors:errors,isShowingErrors:hasErrors&&text!==undefined,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.loggingAction.logTextFieldLabel",{defaultMessage:"Log text"})},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,name:"text",value:text||"","data-test-subj":"loggingTextInput",onChange:function onChange(e){editAction({key:"text",value:e.target.value})},onBlur:function onBlur(){if(!text){editAction({key:"text",value:""})}}}))};exports.LoggingActionFields=LoggingActionFields},9179:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PagerDutyActionFields=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _form_errors=__webpack_require__(7095);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var PagerDutyActionFields=function PagerDutyActionFields(_ref){var errors=_ref.errors,hasErrors=_ref.hasErrors,action=_ref.action,editAction=_ref.editAction,children=_ref.children;var description=action.description;return _react.default.createElement(_react.Fragment,null,children,_react.default.createElement(_form_errors.ErrableFormRow,{id:"pagerDutyDescription",errorKey:"description",fullWidth:true,errors:errors,isShowingErrors:hasErrors&&description!==undefined,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.pagerDutyAction.descriptionFieldLabel",{defaultMessage:"Description"})},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,name:"description",value:description||"","data-test-subj":"pagerdutyDescriptionInput",onChange:function onChange(e){editAction({key:"description",value:e.target.value})},onBlur:function onBlur(){if(!description){editAction({key:"description",value:""})}}})))};exports.PagerDutyActionFields=PagerDutyActionFields},9180:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SlackActionFields=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var SlackActionFields=function SlackActionFields(_ref){var action=_ref.action,editAction=_ref.editAction,children=_ref.children;var text=action.text,to=action.to;var toOptions=to?to.map((function(label){return{label:label}})):[];return _react.default.createElement(_react.Fragment,null,children,_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.slackAction.recipientTextFieldLabel",{defaultMessage:"Recipient (optional)"})},_react.default.createElement(_eui.EuiComboBox,{noSuggestions:true,fullWidth:true,selectedOptions:toOptions,"data-test-subj":"slackRecipientComboBox",onCreateOption:function onCreateOption(searchValue){var newOptions=[].concat(_toConsumableArray(toOptions),[{label:searchValue}]);editAction({key:"to",value:newOptions.map((function(newOption){return newOption.label}))})},onChange:function onChange(selectedOptions){editAction({key:"to",value:selectedOptions.map((function(selectedOption){return selectedOption.label}))})}})),_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.slackAction.messageTextAreaFieldLabel",{defaultMessage:"Message (optional)"})},_react.default.createElement(_eui.EuiTextArea,{fullWidth:true,name:"text",value:text,"data-test-subj":"slackMessageTextarea",onChange:function onChange(e){editAction({key:"text",value:e.target.value})}})))};exports.SlackActionFields=SlackActionFields},9181:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WebhookActionFields=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _form_errors=__webpack_require__(7095);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var HTTP_VERBS=["head","get","post","put","delete"];var SCHEME=["http","https"];var WebhookActionFields=function WebhookActionFields(_ref){var action=_ref.action,editAction=_ref.editAction,errors=_ref.errors,hasErrors=_ref.hasErrors;var method=action.method,host=action.host,port=action.port,scheme=action.scheme,path=action.path,body=action.body,username=action.username,password=action.password;(0,_react.useEffect)((function(){editAction({key:"contentType",value:"application/json"})}),[editAction]);return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.methodFieldLabel",{defaultMessage:"Method"})},_react.default.createElement(_eui.EuiSelect,{name:"method",value:method||"get","data-test-subj":"webhookMethodSelect",options:HTTP_VERBS.map((function(verb){return{text:verb.toUpperCase(),value:verb}})),onChange:function onChange(e){editAction({key:"method",value:e.target.value})}}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.schemeFieldLabel",{defaultMessage:"Scheme"})},_react.default.createElement(_eui.EuiSelect,{name:"scheme",value:scheme,"data-test-subj":"webhookSchemeSelect",options:SCHEME.map((function(verb){return{text:verb,value:verb}})),onChange:function onChange(e){editAction({key:"scheme",value:e.target.value})}}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_form_errors.ErrableFormRow,{id:"webhookHost",errorKey:"host",fullWidth:true,errors:errors,isShowingErrors:hasErrors&&host!==undefined,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.hostFieldLabel",{defaultMessage:"Host"})},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,name:"host",value:host||"","data-test-subj":"webhookHostInput",onChange:function onChange(e){editAction({key:"host",value:e.target.value})},onBlur:function onBlur(){if(!host){editAction({key:"host",value:""})}}}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_form_errors.ErrableFormRow,{id:"webhookPort",errorKey:"port",fullWidth:true,errors:errors,isShowingErrors:hasErrors&&port!==undefined,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.methodPortLabel",{defaultMessage:"Port"})},_react.default.createElement(_eui.EuiFieldNumber,{prepend:":",fullWidth:true,name:"port",value:port||"","data-test-subj":"webhookPortInput",onChange:function onChange(e){editAction({key:"port",value:parseInt(e.target.value,10)})},onBlur:function onBlur(){if(!port){editAction({key:"port",value:""})}}}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.pathFieldLabel",{defaultMessage:"Path (optional)"})},_react.default.createElement(_eui.EuiFieldText,{prepend:"/",fullWidth:true,name:"path",value:path||"","data-test-subj":"webhookPathInput",onChange:function onChange(e){editAction({key:"path",value:e.target.value})}})))),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_form_errors.ErrableFormRow,{id:"webhookBasicAuthUsername",errorKey:"username",isShowingErrors:hasErrors,errors:errors,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.basicAuthUsername",{defaultMessage:"Username (optional)"})},_react.default.createElement(_eui.EuiFieldText,{name:"username",value:username||"","data-test-subj":"webhookUsernameInput",onChange:function onChange(e){editAction({key:"username",value:e.target.value})}}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_form_errors.ErrableFormRow,{id:"webhookBasicAuthPassword",errorKey:"password",isShowingErrors:hasErrors,errors:errors,label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.basicAuthPassword",{defaultMessage:"Password (optional)"})},_react.default.createElement(_eui.EuiFieldPassword,{name:"password",value:password||"","data-test-subj":"webhookPasswordInput",onChange:function onChange(e){editAction({key:"password",value:e.target.value})}})))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_form_errors.ErrableFormRow,{id:"webhookBody",label:_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.bodyFieldLabel",{defaultMessage:"Body"}),errorKey:"body",isShowingErrors:hasErrors,fullWidth:true,errors:errors},_react.default.createElement(_eui.EuiCodeEditor,{fullWidth:true,mode:"json",width:"100%",height:"200px",theme:"github","data-test-subj":"webhookBodyEditor","aria-label":_i18n.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.bodyCodeEditorAriaLabel",{defaultMessage:"Code editor"}),value:body||"",onChange:function onChange(json){editAction({key:"body",value:json})}})))};exports.WebhookActionFields=WebhookActionFields},9182:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"MonitoringWatchEdit",{enumerable:true,get:function get(){return _monitoring_watch_edit.MonitoringWatchEdit}});var _monitoring_watch_edit=__webpack_require__(9183)},9183:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MonitoringWatchEdit=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(4);var _watch_context=__webpack_require__(7067);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var MonitoringWatchEdit=function MonitoringWatchEdit(_ref){var pageTitle=_ref.pageTitle;var _useContext=(0,_react.useContext)(_watch_context.WatchContext),watch=_useContext.watch;var systemWatchTitle=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.monitoring.edit.calloutTitleText",defaultMessage:"This watch cannot be edited."});var systemWatchMessage=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.monitoring.edit.calloutDescriptionText",defaultMessage:"Watch '{watchName}' is a system watch and cannot be edited. {watchStatusLink}",values:{watchName:watch.name,watchStatusLink:_react.default.createElement(_eui.EuiLink,{href:"#/management/elasticsearch/watcher/watches/watch/".concat(watch.id,"/status")},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.monitoring.header.watchLinkTitle",defaultMessage:"View watch status."}))}});return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h1",null,pageTitle)))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiCallOut,{title:systemWatchTitle,iconType:"pin"},_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,systemWatchMessage))))};exports.MonitoringWatchEdit=MonitoringWatchEdit},9184:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WatchList=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _constants=__webpack_require__(1880);var _breadcrumbs=__webpack_require__(7375);var _components=__webpack_require__(7074);var _api=__webpack_require__(7044);var _navigation=__webpack_require__(7139);var _app_context=__webpack_require__(7066);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var WatchList=function WatchList(){var _useAppContext=(0,_app_context.useAppContext)(),chrome=_useAppContext.chrome,MANAGEMENT_BREADCRUMB=_useAppContext.legacy.MANAGEMENT_BREADCRUMB,watcherGettingStartedUrl=_useAppContext.links.watcherGettingStartedUrl;var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),selection=_useState2[0],setSelection=_useState2[1];var _useState3=(0,_react.useState)([]),_useState4=_slicedToArray(_useState3,2),watchesToDelete=_useState4[0],setWatchesToDelete=_useState4[1];var _useState5=(0,_react.useState)([]),_useState6=_slicedToArray(_useState5,2),deletedWatches=_useState6[0],setDeletedWatches=_useState6[1];(0,_react.useEffect)((function(){chrome.setBreadcrumbs([MANAGEMENT_BREADCRUMB,_breadcrumbs.listBreadcrumb])}),[chrome,MANAGEMENT_BREADCRUMB]);var _useLoadWatches=(0,_api.useLoadWatches)(_constants.REFRESH_INTERVALS.WATCH_LIST),isWatchesLoading=_useLoadWatches.isLoading,watches=_useLoadWatches.data,error=_useLoadWatches.error;var _useState7=(0,_react.useState)(false),_useState8=_slicedToArray(_useState7,2),isPopoverOpen=_useState8[0],setIsPopOverOpen=_useState8[1];var availableWatches=(0,_react.useMemo)((function(){return watches?watches.filter((function(watch){return!deletedWatches.includes(watch.id)})):undefined}),[watches,deletedWatches]);var watcherDescriptionText=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.subhead",defaultMessage:"Watch for changes or anomalies in your data and take action if needed."});var createWatchContextMenu=_react.default.createElement(_eui.EuiPopover,{id:"createWatchPanel",button:_react.default.createElement(_eui.EuiButton,{fill:true,"data-test-subj":"createWatchButton",iconType:"arrowDown",iconSide:"right",onClick:function onClick(){return setIsPopOverOpen(!isPopoverOpen)}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.createWatchButtonLabel",defaultMessage:"Create"})),isOpen:isPopoverOpen,closePopover:function closePopover(){return setIsPopOverOpen(false)},panelPaddingSize:"none",anchorPosition:"downCenter"},_react.default.createElement(_eui.EuiContextMenuPanel,{items:[_constants.WATCH_TYPES.THRESHOLD,_constants.WATCH_TYPES.JSON].map((function(watchType){return _react.default.createElement(_eui.EuiContextMenuItem,{key:watchType,"data-test-subj":"".concat(watchType,"WatchCreateLink"),onClick:function onClick(){setIsPopOverOpen(false);var navigate=watchType===_constants.WATCH_TYPES.THRESHOLD?_navigation.goToCreateThresholdAlert:_navigation.goToCreateAdvancedWatch;navigate()}},watchType===_constants.WATCH_TYPES.THRESHOLD?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"m"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.createThresholdAlertButtonLabel",defaultMessage:"Create threshold alert"}))),_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.createThresholdAlertButtonTooltip",defaultMessage:"Send an alert on a specified condition."})))):_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"m"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.createAdvancedWatchButtonLabel",defaultMessage:"Create advanced watch"}))),_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.createAdvancedWatchTooltip",defaultMessage:"Set up a custom watch in JSON."})))))}))}));if(isWatchesLoading){return _react.default.createElement(_components.SectionLoading,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.loadingWatchesDescription",defaultMessage:"Loading watches…"}))}if((0,_components.getPageErrorCode)(error)){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_components.PageError,null))}if(availableWatches&&availableWatches.length===0){var emptyPromptBody=_react.default.createElement(_eui.EuiText,{color:"subdued"},_react.default.createElement("p",null,watcherDescriptionText," ",_react.default.createElement(_eui.EuiLink,{href:watcherGettingStartedUrl,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.watcherLearnMoreLinkText",defaultMessage:"Learn more."}))));return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"managementApp",title:_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.emptyPromptTitle",defaultMessage:"You don’t have any watches yet"})),body:emptyPromptBody,actions:createWatchContextMenu,"data-test-subj":"emptyPrompt"}))}var content;if(error){content=_react.default.createElement(_components.SectionError,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.errorTitle",defaultMessage:"Error loading watches"}),error:error})}else if(availableWatches){var columns=[{field:"id",name:_i18n.i18n.translate("xpack.watcher.sections.watchList.watchTable.idHeader",{defaultMessage:"ID"}),sortable:true,truncateText:true,render:function render(id){return _react.default.createElement(_eui.EuiLink,{"data-test-subj":"watchIdColumn-".concat(id),href:"#/management/elasticsearch/watcher/watches/watch/".concat(id,"/status")},id)}},{field:"name",name:_i18n.i18n.translate("xpack.watcher.sections.watchList.watchTable.nameHeader",{defaultMessage:"Name"}),render:function render(name,item){return _react.default.createElement("span",{"data-test-subj":"watchNameColumn-".concat(item.id)},name)},sortable:true,truncateText:true},{field:"watchStatus.state",name:_i18n.i18n.translate("xpack.watcher.sections.watchList.watchTable.stateHeader",{defaultMessage:"State"}),sortable:true,width:"130px",render:function render(state){return _react.default.createElement(_components.WatchStatus,{status:state})}},{field:"watchStatus.lastMetCondition",name:_i18n.i18n.translate("xpack.watcher.sections.watchList.watchTable.lastFiredHeader",{defaultMessage:"Last fired"}),sortable:true,truncateText:true,width:"130px",render:function render(lastMetCondition){return lastMetCondition?lastMetCondition.fromNow():lastMetCondition}},{field:"watchStatus.lastChecked",name:_i18n.i18n.translate("xpack.watcher.sections.watchList.watchTable.lastTriggeredHeader",{defaultMessage:"Last triggered"}),sortable:true,truncateText:true,width:"130px",render:function render(lastChecked){return lastChecked?lastChecked.fromNow():lastChecked}},{field:"watchStatus.comment",name:_i18n.i18n.translate("xpack.watcher.sections.watchList.watchTable.commentHeader",{defaultMessage:"Comment"}),sortable:true,truncateText:true},{name:_i18n.i18n.translate("xpack.watcher.sections.watchList.watchTable.actionHeader",{defaultMessage:"Actions"}),width:"75px",actions:[{render:function render(watch){var label=_i18n.i18n.translate("xpack.watcher.sections.watchList.watchTable.actionEditTooltipLabel",{defaultMessage:"Edit"});return _react.default.createElement(_eui.EuiToolTip,{content:label,delay:"long"},_react.default.createElement(_eui.EuiButtonIcon,{isDisabled:watch.isSystemWatch,"aria-label":_i18n.i18n.translate("xpack.watcher.sections.watchList.watchTable.actionEditAriaLabel",{defaultMessage:"Edit watch '{name}'",values:{name:watch.name}}),iconType:"pencil",color:"primary",href:"#/management/elasticsearch/watcher/watches/watch/".concat(watch.id,"/edit"),"data-test-subj":"editWatchButton"}))}},{render:function render(watch){var label=_i18n.i18n.translate("xpack.watcher.sections.watchList.watchTable.actionDeleteTooltipLabel",{defaultMessage:"Delete"});return _react.default.createElement(_eui.EuiToolTip,{content:label,delay:"long"},_react.default.createElement(_eui.EuiButtonIcon,{isDisabled:watch.isSystemWatch,"aria-label":_i18n.i18n.translate("xpack.watcher.sections.watchList.watchTable.actionDeleteAriaLabel",{defaultMessage:"Delete watch '{name}'",values:{name:watch.name}}),iconType:"trash",color:"danger",onClick:function onClick(){setWatchesToDelete([watch.id])},"data-test-subj":"deleteWatchButton"}))}}]}];var selectionConfig={onSelectionChange:setSelection,selectable:function selectable(watch){return!watch.isSystemWatch},selectableMessage:function selectableMessage(selectable){return!selectable?_i18n.i18n.translate("xpack.watcher.sections.watchList.watchTable.disabledWatchTooltipText",{defaultMessage:"This watch is read-only"}):""}};var searchConfig={box:{incremental:true},toolsLeft:selection.length&&_react.default.createElement(_eui.EuiButton,{"data-test-subj":"btnDeleteWatches",onClick:function onClick(){setWatchesToDelete(selection.map((function(selected){return selected.id})))},color:"danger"},selection.length>1?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.deleteMultipleWatchesButtonLabel",defaultMessage:"Delete watches"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.deleteSingleWatchButtonLabel",defaultMessage:"Delete watch"})),toolsRight:createWatchContextMenu};content=_react.default.createElement(_eui.EuiInMemoryTable,{items:availableWatches,itemId:"id",columns:columns,search:searchConfig,pagination:_constants.PAGINATION,sorting:true,selection:selectionConfig,isSelectable:true,message:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.watchTable.noWatchesMessage",defaultMessage:"No watches to show"}),rowProps:function rowProps(){return{"data-test-subj":"row"}},cellProps:function cellProps(){return{"data-test-subj":"cell"}},"data-test-subj":"watchesTable"})}if(content){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_components.DeleteWatchesModal,{callback:function callback(deleted){if(deleted){setDeletedWatches([].concat(_toConsumableArray(deletedWatches),_toConsumableArray(watchesToDelete)))}setWatchesToDelete([])},watchesToDelete:watchesToDelete}),_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement("h1",{"data-test-subj":"appTitle"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.header",defaultMessage:"Watcher"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{href:watcherGettingStartedUrl,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.watcher.sections.watchList.watcherGettingStartedDocsLinkText",defaultMessage:"Watcher docs"}))))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,{color:"subdued"},_react.default.createElement("p",null,watcherDescriptionText)),_react.default.createElement(_eui.EuiSpacer,{size:"xl"}),content)}return null};exports.WatchList=WatchList}}]);