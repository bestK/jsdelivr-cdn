/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[55],{1051:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,Plugin:true};exports.plugin=plugin;Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.DashboardEmbeddableContainerPublicPlugin}});var _plugin=__webpack_require__(2288);var _types=__webpack_require__(2297);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _actions=__webpack_require__(2298);Object.keys(_actions).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _actions[key]}})}));var _embeddable=__webpack_require__(692);Object.keys(_embeddable).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _embeddable[key]}})}));function plugin(initializerContext){return new _plugin.DashboardEmbeddableContainerPublicPlugin(initializerContext)}},1052:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardContainerFactory=void 0;var _i18n=__webpack_require__(2);var _embeddable_plugin=__webpack_require__(409);var _dashboard_container=__webpack_require__(1053);var _dashboard_constants=__webpack_require__(410);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardContainerFactory=function(_EmbeddableFactory){_inherits(DashboardContainerFactory,_EmbeddableFactory);function DashboardContainerFactory(options){var _this;_classCallCheck(this,DashboardContainerFactory);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardContainerFactory).call(this,{savedObjectMetaData:options.savedObjectMetaData}));_this.options=options;_defineProperty(_assertThisInitialized(_this),"isContainerType",true);_defineProperty(_assertThisInitialized(_this),"type",_dashboard_constants.DASHBOARD_CONTAINER_TYPE);_defineProperty(_assertThisInitialized(_this),"allowEditing",void 0);var capabilities=options.application.capabilities.dashboard;if(!capabilities||_typeof(capabilities)!=="object"){throw new TypeError("Dashboard capabilities not found.")}_this.allowEditing=!!capabilities.createNew&&!!capabilities.showWriteControls;return _this}_createClass(DashboardContainerFactory,[{key:"isEditable",value:function isEditable(){return this.allowEditing}},{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("dashboardEmbeddableContainer.factory.displayName",{defaultMessage:"dashboard"})}},{key:"getDefaultInput",value:function getDefaultInput(){return{panels:{},isFullScreenMode:false,useMargins:true}}},{key:"create",value:function create(initialInput,parent){return regeneratorRuntime.async((function create$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new _dashboard_container.DashboardContainer(initialInput,this.options,parent));case 1:case"end":return _context.stop()}}}),null,this)}}]);return DashboardContainerFactory}(_embeddable_plugin.EmbeddableFactory);exports.DashboardContainerFactory=DashboardContainerFactory},1053:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardContainer=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(9));var _react2=__webpack_require__(4);var _embeddable_plugin=__webpack_require__(409);var _dashboard_constants=__webpack_require__(410);var _panel=__webpack_require__(1054);var _dashboard_viewport=__webpack_require__(2290);var _public=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardContainer=function(_Container){_inherits(DashboardContainer,_Container);function DashboardContainer(initialInput,options,parent){var _this;_classCallCheck(this,DashboardContainer);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardContainer).call(this,_objectSpread({panels:{},isFullScreenMode:false,filters:[],useMargins:true},initialInput),{embeddableLoaded:{}},options.embeddable.getEmbeddableFactory,parent));_this.options=options;_defineProperty(_assertThisInitialized(_this),"type",_dashboard_constants.DASHBOARD_CONTAINER_TYPE);_defineProperty(_assertThisInitialized(_this),"renderEmpty",void 0);return _this}_createClass(DashboardContainer,[{key:"createNewPanelState",value:function createNewPanelState(factory){var partial=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var panelState=_get(_getPrototypeOf(DashboardContainer.prototype),"createNewPanelState",this).call(this,factory,partial);return(0,_panel.createPanelState)(panelState,Object.values(this.input.panels))}},{key:"render",value:function render(dom){_reactDom.default.render(_react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_public.KibanaContextProvider,{services:this.options},_react.default.createElement(_dashboard_viewport.DashboardViewport,{renderEmpty:this.renderEmpty,container:this}))),dom)}},{key:"getInheritedInput",value:function getInheritedInput(id){var _this$input=this.input,viewMode=_this$input.viewMode,refreshConfig=_this$input.refreshConfig,timeRange=_this$input.timeRange,query=_this$input.query,hidePanelTitles=_this$input.hidePanelTitles,filters=_this$input.filters;return{filters:filters,hidePanelTitles:hidePanelTitles,query:query,timeRange:timeRange,refreshConfig:refreshConfig,viewMode:viewMode,id:id}}}]);return DashboardContainer}(_embeddable_plugin.Container);exports.DashboardContainer=DashboardContainer},1054:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createPanelState",{enumerable:true,get:function get(){return _create_panel_state.createPanelState}});var _create_panel_state=__webpack_require__(2289)},1055:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _public=__webpack_require__(337);Object.keys(_public).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _public[key]}})}))},150:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createUiStatsReporter",{enumerable:true,get:function get(){return _telemetry_analytics.createUiStatsReporter}});Object.defineProperty(exports,"METRIC_TYPE",{enumerable:true,get:function get(){return _analytics.METRIC_TYPE}});Object.defineProperty(exports,"UiStatsMetricType",{enumerable:true,get:function get(){return _analytics.UiStatsMetricType}});var _telemetry_analytics=__webpack_require__(1918);var _analytics=__webpack_require__(373)},1918:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createUiStatsReporter=void 0;var _new_platform=__webpack_require__(7);var createUiStatsReporter=function createUiStatsReporter(appName){var usageCollection=_new_platform.npSetup.plugins.usageCollection;return usageCollection.reportUiStats.bind(usageCollection,appName)};exports.createUiStatsReporter=createUiStatsReporter},2288:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardEmbeddableContainerPublicPlugin=void 0;var React=_interopRequireWildcard(__webpack_require__(0));var _embeddable_plugin=__webpack_require__(409);var _=__webpack_require__(1051);var _dashboard_container_factory=__webpack_require__(1052);var _public=__webpack_require__(16);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var DashboardEmbeddableContainerPublicPlugin=function(){function DashboardEmbeddableContainerPublicPlugin(initializerContext){_classCallCheck(this,DashboardEmbeddableContainerPublicPlugin)}_createClass(DashboardEmbeddableContainerPublicPlugin,[{key:"setup",value:function setup(core,_ref){var embeddable=_ref.embeddable,uiActions=_ref.uiActions;var expandPanelAction=new _.ExpandPanelAction;uiActions.registerAction(expandPanelAction);uiActions.attachAction(_embeddable_plugin.CONTEXT_MENU_TRIGGER,expandPanelAction.id)}},{key:"start",value:function start(core,plugins){var application=core.application,notifications=core.notifications,overlays=core.overlays;var embeddable=plugins.embeddable,inspector=plugins.inspector,uiActions=plugins.uiActions;var SavedObjectFinder=function SavedObjectFinder(props){return React.createElement(_public.SavedObjectFinderUi,_extends({},props,{savedObjects:core.savedObjects,uiSettings:core.uiSettings}))};var useHideChrome=function useHideChrome(){React.useEffect((function(){core.chrome.setIsVisible(false);return function(){return core.chrome.setIsVisible(true)}}),[])};var ExitFullScreenButton=function ExitFullScreenButton(props){useHideChrome();return React.createElement(_public.ExitFullScreenButton,props)};var changeViewAction=new _.ReplacePanelAction(core,SavedObjectFinder,notifications,plugins.embeddable.getEmbeddableFactories);uiActions.registerAction(changeViewAction);uiActions.attachAction(_embeddable_plugin.CONTEXT_MENU_TRIGGER,changeViewAction.id);var factory=new _dashboard_container_factory.DashboardContainerFactory({application:application,notifications:notifications,overlays:overlays,embeddable:embeddable,inspector:inspector,SavedObjectFinder:SavedObjectFinder,ExitFullScreenButton:ExitFullScreenButton,uiActions:uiActions});embeddable.registerEmbeddableFactory(factory.type,factory)}},{key:"stop",value:function stop(){}}]);return DashboardEmbeddableContainerPublicPlugin}();exports.DashboardEmbeddableContainerPublicPlugin=DashboardEmbeddableContainerPublicPlugin},2289:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createPanelState=createPanelState;var _dashboard_constants=__webpack_require__(410);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function findTopLeftMostOpenSpace(width,height,currentPanels){var maxY=-1;currentPanels.forEach((function(panel){maxY=Math.max(panel.gridData.y+panel.gridData.h,maxY)}));if(maxY<0){return{x:0,y:0}}var grid=new Array(maxY);for(var y=0;y<maxY;y++){grid[y]=new Array(_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT).fill(0)}currentPanels.forEach((function(panel){for(var x=panel.gridData.x;x<panel.gridData.x+panel.gridData.w;x++){for(var _y=panel.gridData.y;_y<panel.gridData.y+panel.gridData.h;_y++){var row=grid[_y];if(row===undefined){throw new Error("Attempted to access a row that doesn't exist at ".concat(_y," for panel ").concat(JSON.stringify(panel)))}grid[_y][x]=1}}}));for(var _y2=0;_y2<maxY;_y2++){for(var x=0;x<_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT;x++){if(grid[_y2][x]===1){continue}else{for(var h=_y2;h<Math.min(_y2+height,maxY);h++){for(var w=x;w<Math.min(x+width,_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT);w++){var spaceIsEmpty=grid[h][w]===0;var fitsPanelWidth=w===x+width-1;var fitsPanelHeight=h===Math.min(_y2+height-1,maxY-1);if(spaceIsEmpty&&fitsPanelWidth&&fitsPanelHeight){return{x:x,y:_y2}}else if(grid[h][w]===1){break}}}}}}return{x:0,y:maxY}}function createPanelState(panelState,currentPanels){var _findTopLeftMostOpenS=findTopLeftMostOpenSpace(_dashboard_constants.DEFAULT_PANEL_WIDTH,_dashboard_constants.DEFAULT_PANEL_HEIGHT,currentPanels),x=_findTopLeftMostOpenS.x,y=_findTopLeftMostOpenS.y;return _objectSpread({gridData:{w:_dashboard_constants.DEFAULT_PANEL_WIDTH,h:_dashboard_constants.DEFAULT_PANEL_HEIGHT,x:x,y:y,i:panelState.explicitInput.id}},panelState)}},2290:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewport=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _grid=__webpack_require__(2291);var _public=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardViewport=function(_React$Component){_inherits(DashboardViewport,_React$Component);function DashboardViewport(props){var _this;_classCallCheck(this,DashboardViewport);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardViewport).call(this,props));_defineProperty(_assertThisInitialized(_this),"context",void 0);_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"onExitFullScreenMode",(function(){_this.props.container.updateInput({isFullScreenMode:false})}));var _this$props$container=_this.props.container.getInput(),isFullScreenMode=_this$props$container.isFullScreenMode,panels=_this$props$container.panels,useMargins=_this$props$container.useMargins,title=_this$props$container.title,isEmptyState=_this$props$container.isEmptyState;_this.state={isFullScreenMode:isFullScreenMode,panels:panels,useMargins:useMargins,title:title,isEmptyState:isEmptyState};return _this}_createClass(DashboardViewport,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.mounted=true;this.subscription=this.props.container.getInput$().subscribe((function(){var _this2$props$containe=_this2.props.container.getInput(),isFullScreenMode=_this2$props$containe.isFullScreenMode,useMargins=_this2$props$containe.useMargins,title=_this2$props$containe.title,description=_this2$props$containe.description,isEmptyState=_this2$props$containe.isEmptyState;if(_this2.mounted){_this2.setState({isFullScreenMode:isFullScreenMode,description:description,useMargins:useMargins,title:title,isEmptyState:isEmptyState})}}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}}},{key:"renderEmptyScreen",value:function renderEmptyScreen(){var renderEmpty=this.props.renderEmpty;var isFullScreenMode=this.state.isFullScreenMode;return _react.default.createElement("div",{className:"dshDashboardEmptyScreen"},isFullScreenMode&&_react.default.createElement(this.context.services.ExitFullScreenButton,{onExitFullScreenMode:this.onExitFullScreenMode}),renderEmpty&&renderEmpty())}},{key:"renderContainerScreen",value:function renderContainerScreen(){var container=this.props.container;var _this$state=this.state,isFullScreenMode=_this$state.isFullScreenMode,panels=_this$state.panels,title=_this$state.title,description=_this$state.description,useMargins=_this$state.useMargins;return _react.default.createElement("div",{"data-shared-items-count":Object.values(panels).length,"data-shared-items-container":true,"data-title":title,"data-description":description,className:useMargins?"dshDashboardViewport-withMargins":"dshDashboardViewport"},isFullScreenMode&&_react.default.createElement(this.context.services.ExitFullScreenButton,{onExitFullScreenMode:this.onExitFullScreenMode}),_react.default.createElement(_grid.DashboardGrid,{container:container}))}},{key:"render",value:function render(){return _react.default.createElement(_react.default.Fragment,null,this.state.isEmptyState?this.renderEmptyScreen():null,this.renderContainerScreen())}}]);return DashboardViewport}(_react.default.Component);exports.DashboardViewport=DashboardViewport;_defineProperty(DashboardViewport,"contextType",_public.context)},2291:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DashboardGrid",{enumerable:true,get:function get(){return _dashboard_grid.DashboardGrid}});var _dashboard_grid=__webpack_require__(2292)},2292:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardGrid=void 0;__webpack_require__(2293);__webpack_require__(2294);var _reactSizeme=_interopRequireDefault(__webpack_require__(2465));var _react=__webpack_require__(4);var _classnames=_interopRequireDefault(__webpack_require__(63));var _lodash=_interopRequireDefault(__webpack_require__(3));var _react2=_interopRequireDefault(__webpack_require__(0));var _reactGridLayout=_interopRequireDefault(__webpack_require__(2512));var _embeddable_plugin=__webpack_require__(409);var _dashboard_constants=__webpack_require__(410);var _public=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectDestructuringEmpty(obj){if(obj==null)throw new TypeError("Cannot destructure undefined")}var lastValidGridSize=0;function ensureWindowScrollsToBottom(event){var WINDOW_BUFFER=10;if(event.clientY>window.innerHeight-WINDOW_BUFFER){window.scrollTo(0,event.pageY+WINDOW_BUFFER-window.innerHeight)}}function ResponsiveGrid(_ref){var size=_ref.size,isViewMode=_ref.isViewMode,layout=_ref.layout,onLayoutChange=_ref.onLayoutChange,children=_ref.children,maximizedPanelId=_ref.maximizedPanelId,useMargins=_ref.useMargins;lastValidGridSize=size.width>0?size.width:lastValidGridSize;var classes=(0,_classnames.default)({"dshLayout--viewing":isViewMode,"dshLayout--editing":!isViewMode,"dshLayout-isMaximizedPanel":maximizedPanelId!==undefined,"dshLayout-withoutMargins":!useMargins});var MARGINS=useMargins?8:0;return _react2.default.createElement(_reactGridLayout.default,{width:lastValidGridSize,className:classes,isDraggable:true,isResizable:true,useCSSTransforms:false,margin:[MARGINS,MARGINS],cols:_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT,rowHeight:_dashboard_constants.DASHBOARD_GRID_HEIGHT,draggableHandle:isViewMode?".doesnt-exist":".embPanel__dragger",layout:layout,onLayoutChange:onLayoutChange,onResize:function onResize(_ref2,_ref3,_ref4,_ref5,event){_objectDestructuringEmpty(_ref2);_objectDestructuringEmpty(_ref3);_objectDestructuringEmpty(_ref4);_objectDestructuringEmpty(_ref5);return ensureWindowScrollsToBottom(event)}},children)}var config={monitorWidth:true};var ResponsiveSizedGrid=(0,_reactSizeme.default)(config)(ResponsiveGrid);var DashboardGridUi=function(_React$Component){_inherits(DashboardGridUi,_React$Component);function DashboardGridUi(props){var _this;_classCallCheck(this,DashboardGridUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardGridUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"gridItems",{});_defineProperty(_assertThisInitialized(_this),"buildLayoutFromPanels",(function(){return _lodash.default.map(_this.state.panels,(function(panel){return panel.gridData}))}));_defineProperty(_assertThisInitialized(_this),"onLayoutChange",(function(layout){var panels=_this.state.panels;var updatedPanels=layout.reduce((function(updatedPanelsAcc,panelLayout){updatedPanelsAcc[panelLayout.i]=_objectSpread({},panels[panelLayout.i],{gridData:_lodash.default.pick(panelLayout,["x","y","w","h","i"])});return updatedPanelsAcc}),{});_this.onPanelsUpdated(updatedPanels)}));_defineProperty(_assertThisInitialized(_this),"onPanelsUpdated",(function(panels){_this.props.container.updateInput({panels:panels})}));_defineProperty(_assertThisInitialized(_this),"onPanelFocused",(function(focusedPanelIndex){_this.setState({focusedPanelIndex:focusedPanelIndex})}));_defineProperty(_assertThisInitialized(_this),"onPanelBlurred",(function(blurredPanelIndex){if(_this.state.focusedPanelIndex===blurredPanelIndex){_this.setState({focusedPanelIndex:undefined})}}));_this.state={layout:[],isLayoutInvalid:false,focusedPanelIndex:undefined,panels:_this.props.container.getInput().panels,viewMode:_this.props.container.getInput().viewMode,useMargins:_this.props.container.getInput().useMargins,expandedPanelId:_this.props.container.getInput().expandedPanelId};return _this}_createClass(DashboardGridUi,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.mounted=true;var isLayoutInvalid=false;var layout;try{layout=this.buildLayoutFromPanels()}catch(error){console.error(error);isLayoutInvalid=true;this.props.kibana.notifications.toasts.danger({title:this.props.intl.formatMessage({id:"dashboardEmbeddableContainer.dashboardGrid.toast.unableToLoadDashboardDangerMessage",defaultMessage:"Unable to load dashboard."}),body:error.message,toastLifeTimeMs:5e3})}this.setState({layout:layout,isLayoutInvalid:isLayoutInvalid});this.subscription=this.props.container.getInput$().subscribe((function(input){if(_this2.mounted){_this2.setState({panels:input.panels,viewMode:input.viewMode,useMargins:input.useMargins,expandedPanelId:input.expandedPanelId})}}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}}},{key:"renderPanels",value:function renderPanels(){var _this3=this;var _this$state=this.state,focusedPanelIndex=_this$state.focusedPanelIndex,panels=_this$state.panels,expandedPanelId=_this$state.expandedPanelId;var panelsInOrder=Object.keys(panels).map((function(key){return panels[key]}));panelsInOrder.sort((function(panelA,panelB){if(panelA.gridData.y===panelB.gridData.y){return panelA.gridData.x-panelB.gridData.x}else{return panelA.gridData.y-panelB.gridData.y}}));return _lodash.default.map(panelsInOrder,(function(panel){var expandPanel=expandedPanelId!==undefined&&expandedPanelId===panel.explicitInput.id;var hidePanel=expandedPanelId!==undefined&&expandedPanelId!==panel.explicitInput.id;var classes=(0,_classnames.default)({"dshDashboardGrid__item--expanded":expandPanel,"dshDashboardGrid__item--hidden":hidePanel});return _react2.default.createElement("div",{style:{zIndex:focusedPanelIndex===panel.explicitInput.id?2:"auto"},className:classes,key:panel.explicitInput.id,"data-test-subj":"dashboardPanel",ref:function ref(reactGridItem){_this3.gridItems[panel.explicitInput.id]=reactGridItem}},_react2.default.createElement(_embeddable_plugin.EmbeddableChildPanel,{embeddableId:panel.explicitInput.id,container:_this3.props.container,getActions:_this3.props.kibana.services.uiActions.getTriggerCompatibleActions,getEmbeddableFactory:_this3.props.kibana.services.embeddable.getEmbeddableFactory,getAllEmbeddableFactories:_this3.props.kibana.services.embeddable.getEmbeddableFactories,overlays:_this3.props.kibana.services.overlays,notifications:_this3.props.kibana.services.notifications,inspector:_this3.props.kibana.services.inspector,SavedObjectFinder:_this3.props.kibana.services.SavedObjectFinder}))}))}},{key:"render",value:function render(){if(this.state.isLayoutInvalid){return null}var viewMode=this.state.viewMode;var isViewMode=viewMode===_embeddable_plugin.ViewMode.VIEW;return _react2.default.createElement(ResponsiveSizedGrid,{isViewMode:isViewMode,layout:this.buildLayoutFromPanels(),onLayoutChange:this.onLayoutChange,maximizedPanelId:this.state.expandedPanelId,useMargins:this.state.useMargins},this.renderPanels())}}]);return DashboardGridUi}(_react2.default.Component);var DashboardGrid=(0,_react.injectI18n)((0,_public.withKibana)(DashboardGridUi));exports.DashboardGrid=DashboardGrid},2293:function(module,exports,__webpack_require__){},2294:function(module,exports,__webpack_require__){},2297:function(module,exports,__webpack_require__){"use strict"},2298:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ExpandPanelAction",{enumerable:true,get:function get(){return _expand_panel_action.ExpandPanelAction}});Object.defineProperty(exports,"EXPAND_PANEL_ACTION",{enumerable:true,get:function get(){return _expand_panel_action.EXPAND_PANEL_ACTION}});Object.defineProperty(exports,"ReplacePanelAction",{enumerable:true,get:function get(){return _replace_panel_action.ReplacePanelAction}});Object.defineProperty(exports,"REPLACE_PANEL_ACTION",{enumerable:true,get:function get(){return _replace_panel_action.REPLACE_PANEL_ACTION}});var _expand_panel_action=__webpack_require__(2299);var _replace_panel_action=__webpack_require__(2301)},2299:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandPanelAction=exports.EXPAND_PANEL_ACTION=void 0;var _i18n=__webpack_require__(2);var _ui_actions_plugin=__webpack_require__(1055);var _embeddable=__webpack_require__(692);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EXPAND_PANEL_ACTION="togglePanel";exports.EXPAND_PANEL_ACTION=EXPAND_PANEL_ACTION;function isDashboard(embeddable){return embeddable.type===_embeddable.DASHBOARD_CONTAINER_TYPE}function isExpanded(embeddable){if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return embeddable.id===embeddable.parent.getInput().expandedPanelId}var ExpandPanelAction=function(){function ExpandPanelAction(){_classCallCheck(this,ExpandPanelAction);_defineProperty(this,"type",EXPAND_PANEL_ACTION);_defineProperty(this,"id",EXPAND_PANEL_ACTION);_defineProperty(this,"order",7)}_createClass(ExpandPanelAction,[{key:"getDisplayName",value:function getDisplayName(_ref){var embeddable=_ref.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return isExpanded(embeddable)?_i18n.i18n.translate("dashboardEmbeddableContainer.actions.toggleExpandPanelMenuItem.expandedDisplayName",{defaultMessage:"Minimize"}):_i18n.i18n.translate("dashboardEmbeddableContainer.actions.toggleExpandPanelMenuItem.notExpandedDisplayName",{defaultMessage:"Full screen"})}},{key:"getIconType",value:function getIconType(_ref2){var embeddable=_ref2.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return isExpanded(embeddable)?"expand":"expand"}},{key:"isCompatible",value:function isCompatible(_ref3){var embeddable;return regeneratorRuntime.async((function isCompatible$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref3.embeddable;return _context.abrupt("return",Boolean(embeddable.parent&&isDashboard(embeddable.parent)));case 2:case"end":return _context.stop()}}}))}},{key:"execute",value:function execute(_ref4){var embeddable,newValue;return regeneratorRuntime.async((function execute$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref4.embeddable;if(!(!embeddable.parent||!isDashboard(embeddable.parent))){_context2.next=3;break}throw new _ui_actions_plugin.IncompatibleActionError;case 3:newValue=isExpanded(embeddable)?undefined:embeddable.id;embeddable.parent.updateInput({expandedPanelId:newValue});case 5:case"end":return _context2.stop()}}}))}}]);return ExpandPanelAction}();exports.ExpandPanelAction=ExpandPanelAction},2300:function(module,exports,__webpack_require__){"use strict"},2301:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReplacePanelAction=exports.REPLACE_PANEL_ACTION=void 0;var _i18n=__webpack_require__(2);var _embeddable_plugin=__webpack_require__(409);var _embeddable=__webpack_require__(692);var _ui_actions_plugin=__webpack_require__(1055);var _open_replace_panel_flyout=__webpack_require__(2302);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var REPLACE_PANEL_ACTION="replacePanel";exports.REPLACE_PANEL_ACTION=REPLACE_PANEL_ACTION;function isDashboard(embeddable){return embeddable.type===_embeddable.DASHBOARD_CONTAINER_TYPE}var ReplacePanelAction=function(){function ReplacePanelAction(core,savedobjectfinder,notifications,getEmbeddableFactories){_classCallCheck(this,ReplacePanelAction);this.core=core;this.savedobjectfinder=savedobjectfinder;this.notifications=notifications;this.getEmbeddableFactories=getEmbeddableFactories;_defineProperty(this,"type",REPLACE_PANEL_ACTION);_defineProperty(this,"id",REPLACE_PANEL_ACTION);_defineProperty(this,"order",11)}_createClass(ReplacePanelAction,[{key:"getDisplayName",value:function getDisplayName(_ref){var embeddable=_ref.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return _i18n.i18n.translate("dashboardEmbeddableContainer.panel.removePanel.replacePanel",{defaultMessage:"Replace panel"})}},{key:"getIconType",value:function getIconType(_ref2){var embeddable=_ref2.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return"kqlOperand"}},{key:"isCompatible",value:function isCompatible(_ref3){var embeddable;return regeneratorRuntime.async((function isCompatible$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref3.embeddable;if(!embeddable.getInput().viewMode){_context.next=4;break}if(!(embeddable.getInput().viewMode===_embeddable_plugin.ViewMode.VIEW)){_context.next=4;break}return _context.abrupt("return",false);case 4:return _context.abrupt("return",Boolean(embeddable.parent&&isDashboard(embeddable.parent)));case 5:case"end":return _context.stop()}}}))}},{key:"execute",value:function execute(_ref4){var embeddable,view,dash;return regeneratorRuntime.async((function execute$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref4.embeddable;if(!(!embeddable.parent||!isDashboard(embeddable.parent))){_context2.next=3;break}throw new _ui_actions_plugin.IncompatibleActionError;case 3:view=embeddable;dash=embeddable.parent;(0,_open_replace_panel_flyout.openReplacePanelFlyout)({embeddable:dash,core:this.core,savedObjectFinder:this.savedobjectfinder,notifications:this.notifications,panelToRemove:view,getEmbeddableFactories:this.getEmbeddableFactories});case 6:case"end":return _context2.stop()}}}),null,this)}}]);return ReplacePanelAction}();exports.ReplacePanelAction=ReplacePanelAction},2302:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.openReplacePanelFlyout=openReplacePanelFlyout;var _react=_interopRequireDefault(__webpack_require__(0));var _public=__webpack_require__(16);var _replace_panel_flyout=__webpack_require__(2303);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function openReplacePanelFlyout(options){var embeddable,core,panelToRemove,savedObjectFinder,notifications,getEmbeddableFactories,flyoutSession;return regeneratorRuntime.async((function openReplacePanelFlyout$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=options.embeddable,core=options.core,panelToRemove=options.panelToRemove,savedObjectFinder=options.savedObjectFinder,notifications=options.notifications,getEmbeddableFactories=options.getEmbeddableFactories;flyoutSession=core.overlays.openFlyout((0,_public.toMountPoint)(_react.default.createElement(_replace_panel_flyout.ReplacePanelFlyout,{container:embeddable,onClose:function onClose(){if(flyoutSession){flyoutSession.close()}},panelToRemove:panelToRemove,savedObjectsFinder:savedObjectFinder,notifications:notifications,getEmbeddableFactories:getEmbeddableFactories})),{"data-test-subj":"replacePanelFlyout"});case 2:case"end":return _context.stop()}}}))}},2303:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ReplacePanelFlyout=void 0;var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ReplacePanelFlyout=function(_React$Component){_inherits(ReplacePanelFlyout,_React$Component);function ReplacePanelFlyout(props){var _this;_classCallCheck(this,ReplacePanelFlyout);_this=_possibleConstructorReturn(this,_getPrototypeOf(ReplacePanelFlyout).call(this,props));_defineProperty(_assertThisInitialized(_this),"lastToast",{id:"panelReplaceToast"});_defineProperty(_assertThisInitialized(_this),"showToast",(function(name){if(_this.lastToast){_this.props.notifications.toasts.remove(_this.lastToast)}_this.lastToast=_this.props.notifications.toasts.addSuccess({title:_i18n.i18n.translate("dashboardEmbeddableContainer.addPanel.savedObjectAddedToContainerSuccessMessageTitle",{defaultMessage:"{savedObjectName} was added",values:{savedObjectName:name}}),"data-test-subj":"addObjectToContainerSuccess"})}));_defineProperty(_assertThisInitialized(_this),"onReplacePanel",(function _callee(id,type,name){var originalPanels,filteredPanels,nnw,nnh,nnx,nny,newObj,finalPanels;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:originalPanels=_this.props.container.getInput().panels;filteredPanels=_objectSpread({},originalPanels);nnw=filteredPanels[_this.props.panelToRemove.id].gridData.w;nnh=filteredPanels[_this.props.panelToRemove.id].gridData.h;nnx=filteredPanels[_this.props.panelToRemove.id].gridData.x;nny=filteredPanels[_this.props.panelToRemove.id].gridData.y;_context.next=8;return regeneratorRuntime.awrap(_this.props.container.addSavedObjectEmbeddable(type,id));case 8:newObj=_context.sent;finalPanels=_this.props.container.getInput().panels;finalPanels[newObj.id].gridData.w=nnw;finalPanels[newObj.id].gridData.h=nnh;finalPanels[newObj.id].gridData.x=nnx;finalPanels[newObj.id].gridData.y=nny;delete finalPanels[_this.props.panelToRemove.id];_this.props.container.updateInput(finalPanels);_this.props.container.reload();_this.showToast(name);_this.props.onClose();case 19:case"end":return _context.stop()}}}))}));return _this}_createClass(ReplacePanelFlyout,[{key:"render",value:function render(){var SavedObjectFinder=this.props.savedObjectsFinder;var savedObjectsFinder=_react.default.createElement(SavedObjectFinder,{noItemsMessage:_i18n.i18n.translate("dashboardEmbeddableContainer.addPanel.noMatchingObjectsMessage",{defaultMessage:"No matching objects found."}),savedObjectMetaData:_toConsumableArray(this.props.getEmbeddableFactories()).filter((function(embeddableFactory){return Boolean(embeddableFactory.savedObjectMetaData)&&!embeddableFactory.isContainerType})).map((function(_ref){var savedObjectMetaData=_ref.savedObjectMetaData;return savedObjectMetaData})),showFilter:true,onChoose:this.onReplacePanel});var panelToReplace="Replace panel "+this.props.panelToRemove.getTitle()+" with:";return _react.default.createElement(_eui.EuiFlyout,{ownFocus:true,onClose:this.props.onClose,"data-test-subj":"dashboardReplacePanel"},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h2",null,_react.default.createElement("span",null,panelToReplace)))),_react.default.createElement(_eui.EuiFlyoutBody,null,savedObjectsFinder))}}]);return ReplacePanelFlyout}(_react.default.Component);exports.ReplacePanelFlyout=ReplacePanelFlyout},2465:function(module,exports,__webpack_require__){module.exports=__webpack_require__(34)(1809)},2512:function(module,exports,__webpack_require__){module.exports=__webpack_require__(34)(1747)},409:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _public=__webpack_require__(229);Object.keys(_public).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _public[key]}})}))},410:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DASHBOARD_CONTAINER_TYPE=exports.DEFAULT_PANEL_HEIGHT=exports.DEFAULT_PANEL_WIDTH=exports.DASHBOARD_GRID_HEIGHT=exports.DASHBOARD_GRID_COLUMN_COUNT=void 0;var DASHBOARD_GRID_COLUMN_COUNT=48;exports.DASHBOARD_GRID_COLUMN_COUNT=DASHBOARD_GRID_COLUMN_COUNT;var DASHBOARD_GRID_HEIGHT=20;exports.DASHBOARD_GRID_HEIGHT=DASHBOARD_GRID_HEIGHT;var DEFAULT_PANEL_WIDTH=DASHBOARD_GRID_COLUMN_COUNT/2;exports.DEFAULT_PANEL_WIDTH=DEFAULT_PANEL_WIDTH;var DEFAULT_PANEL_HEIGHT=15;exports.DEFAULT_PANEL_HEIGHT=DEFAULT_PANEL_HEIGHT;var DASHBOARD_CONTAINER_TYPE="dashboard";exports.DASHBOARD_CONTAINER_TYPE=DASHBOARD_CONTAINER_TYPE},692:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DashboardContainerFactory",{enumerable:true,get:function get(){return _dashboard_container_factory.DashboardContainerFactory}});Object.defineProperty(exports,"DashboardContainer",{enumerable:true,get:function get(){return _dashboard_container.DashboardContainer}});Object.defineProperty(exports,"DashboardContainerInput",{enumerable:true,get:function get(){return _dashboard_container.DashboardContainerInput}});Object.defineProperty(exports,"createPanelState",{enumerable:true,get:function get(){return _panel.createPanelState}});Object.defineProperty(exports,"DashboardPanelState",{enumerable:true,get:function get(){return _types.DashboardPanelState}});Object.defineProperty(exports,"GridData",{enumerable:true,get:function get(){return _types.GridData}});Object.defineProperty(exports,"DASHBOARD_GRID_COLUMN_COUNT",{enumerable:true,get:function get(){return _dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT}});Object.defineProperty(exports,"DEFAULT_PANEL_HEIGHT",{enumerable:true,get:function get(){return _dashboard_constants.DEFAULT_PANEL_HEIGHT}});Object.defineProperty(exports,"DEFAULT_PANEL_WIDTH",{enumerable:true,get:function get(){return _dashboard_constants.DEFAULT_PANEL_WIDTH}});Object.defineProperty(exports,"DASHBOARD_CONTAINER_TYPE",{enumerable:true,get:function get(){return _dashboard_constants.DASHBOARD_CONTAINER_TYPE}});var _dashboard_container_factory=__webpack_require__(1052);var _dashboard_container=__webpack_require__(1053);var _panel=__webpack_require__(1054);var _types=__webpack_require__(2300);var _dashboard_constants=__webpack_require__(410)},7004:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.renderApp=void 0;var _eui=__webpack_require__(1);var _angular=_interopRequireDefault(__webpack_require__(40));var _angular2=__webpack_require__(78);var _legacy_imports=__webpack_require__(990);var _legacy_app=__webpack_require__(7860);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var angularModuleInstance=null;var renderApp=function renderApp(element,appBasePath,deps){if(!angularModuleInstance){angularModuleInstance=createLocalAngularModule(deps.core,deps.navigation);(0,_legacy_imports.configureAppAngularModule)(angularModuleInstance,deps.core,true);(0,_legacy_app.initDashboardApp)(angularModuleInstance,deps)}var $injector=mountDashboardApp(appBasePath,element);return function(){$injector.get("$rootScope").$destroy()}};exports.renderApp=renderApp;var mainTemplate=function mainTemplate(basePath){return'<div ng-view class="kbnLocalApplicationWrapper">\n  <base href="'.concat(basePath,'" />\n</div>')};var moduleName="app/dashboard";var thirdPartyAngularDependencies=["ngSanitize","ngRoute","react"];function mountDashboardApp(appBasePath,element){var mountpoint=document.createElement("div");mountpoint.setAttribute("class","kbnLocalApplicationWrapper");mountpoint.innerHTML=mainTemplate(appBasePath);var $injector=_angular.default.bootstrap(mountpoint,[moduleName]);element.appendChild(mountpoint);return $injector}function createLocalAngularModule(core,navigation){createLocalI18nModule();createLocalPrivateModule();createLocalPromiseModule();createLocalConfigModule(core);createLocalKbnUrlModule();createLocalStateModule();createLocalPersistedStateModule();createLocalTopNavModule(navigation);createLocalConfirmModalModule();createLocalIconModule();var dashboardAngularModule=_angular.default.module(moduleName,[].concat(thirdPartyAngularDependencies,["app/dashboard/Config","app/dashboard/I18n","app/dashboard/Private","app/dashboard/PersistedState","app/dashboard/TopNav","app/dashboard/State","app/dashboard/ConfirmModal","app/dashboard/icon"]));return dashboardAngularModule}function createLocalIconModule(){_angular.default.module("app/dashboard/icon",["react"]).directive("icon",(function(reactDirective){return reactDirective(_eui.EuiIcon)}))}function createLocalConfirmModalModule(){_angular.default.module("app/dashboard/ConfirmModal",["react"]).factory("confirmModal",_legacy_imports.confirmModalFactory).directive("confirmModal",(function(reactDirective){return reactDirective(_eui.EuiConfirmModal)}))}function createLocalStateModule(){_angular.default.module("app/dashboard/State",["app/dashboard/Private","app/dashboard/Config","app/dashboard/KbnUrl","app/dashboard/Promise","app/dashboard/PersistedState"]).factory("AppState",(function(Private){return Private(_legacy_imports.AppStateProvider)})).service("getAppState",(function(Private){return Private(_legacy_imports.AppStateProvider).getAppState})).service("globalState",(function(Private){return Private(_legacy_imports.GlobalStateProvider)}))}function createLocalPersistedStateModule(){_angular.default.module("app/dashboard/PersistedState",["app/dashboard/Private","app/dashboard/Promise"]).factory("PersistedState",(function(Private){var Events=Private(_legacy_imports.EventsProvider);return(function(_PersistedState){_inherits(AngularPersistedState,_PersistedState);function AngularPersistedState(value,path){_classCallCheck(this,AngularPersistedState);return _possibleConstructorReturn(this,_getPrototypeOf(AngularPersistedState).call(this,value,path,Events))}return AngularPersistedState}(_legacy_imports.PersistedState))}))}function createLocalKbnUrlModule(){_angular.default.module("app/dashboard/KbnUrl",["app/dashboard/Private","ngRoute"]).service("kbnUrl",(function(Private){return Private(_legacy_imports.KbnUrlProvider)})).service("redirectWhenMissing",(function(Private){return Private(_legacy_imports.RedirectWhenMissingProvider)}))}function createLocalConfigModule(core){_angular.default.module("app/dashboard/Config",["app/dashboard/Private"]).provider("stateManagementConfig",_legacy_imports.StateManagementConfigProvider).provider("config",(function(){return{$get:function $get(){return{get:core.uiSettings.get.bind(core.uiSettings)}}}}))}function createLocalPromiseModule(){_angular.default.module("app/dashboard/Promise",[]).service("Promise",_legacy_imports.PromiseServiceCreator)}function createLocalPrivateModule(){_angular.default.module("app/dashboard/Private",[]).provider("Private",_legacy_imports.PrivateProvider)}function createLocalTopNavModule(navigation){_angular.default.module("app/dashboard/TopNav",["react"]).directive("kbnTopNav",_legacy_imports.createTopNavDirective).directive("kbnTopNavHelper",(0,_legacy_imports.createTopNavHelper)(navigation.ui))}function createLocalI18nModule(){_angular.default.module("app/dashboard/I18n",[]).provider("i18n",_angular2.I18nProvider).filter("i18n",_angular2.i18nFilter).directive("i18nId",_angular2.i18nDirective)}},7411:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"saveDashboard",{enumerable:true,get:function get(){return _save_dashboard.saveDashboard}});Object.defineProperty(exports,"getAppStateDefaults",{enumerable:true,get:function get(){return _get_app_state_defaults.getAppStateDefaults}});Object.defineProperty(exports,"migrateAppState",{enumerable:true,get:function get(){return _migrate_app_state.migrateAppState}});var _save_dashboard=__webpack_require__(7873);var _get_app_state_defaults=__webpack_require__(7875);var _migrate_app_state=__webpack_require__(7876)},7412:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterUtils=void 0;var _lodash=_interopRequireDefault(__webpack_require__(3));var _moment=_interopRequireDefault(__webpack_require__(13));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var FilterUtils=function(){function FilterUtils(){_classCallCheck(this,FilterUtils)}_createClass(FilterUtils,null,[{key:"convertTimeToUTCString",value:function convertTimeToUTCString(time){if((0,_moment.default)(time).isValid()){return(0,_moment.default)(time).utc().format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}else{return time}}},{key:"areTimesEqual",value:function areTimesEqual(timeA,timeB){return this.convertTimeToUTCString(timeA)===this.convertTimeToUTCString(timeB)}},{key:"cleanFiltersForComparison",value:function cleanFiltersForComparison(filters){return _lodash.default.map(filters,(function(filter){var f=_lodash.default.omit(filter,["$$hashKey","$state"]);if(f.meta){return _lodash.default.omit(f.meta,["value"])}return f}))}}]);return FilterUtils}();exports.FilterUtils=FilterUtils},7414:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertSavedDashboardPanelToPanelState=convertSavedDashboardPanelToPanelState;exports.convertPanelStateToSavedDashboardPanel=convertPanelStateToSavedDashboardPanel;var _lodash=__webpack_require__(3);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function convertSavedDashboardPanelToPanelState(savedDashboardPanel){return _objectSpread({type:savedDashboardPanel.type,gridData:savedDashboardPanel.gridData},savedDashboardPanel.id!==undefined&&{savedObjectId:savedDashboardPanel.id},{explicitInput:_objectSpread({id:savedDashboardPanel.panelIndex},savedDashboardPanel.title!==undefined&&{title:savedDashboardPanel.title},{},savedDashboardPanel.embeddableConfig)})}function convertPanelStateToSavedDashboardPanel(panelState,version){var customTitle=panelState.explicitInput.title?panelState.explicitInput.title:undefined;return _objectSpread({version:version,type:panelState.type,gridData:panelState.gridData,panelIndex:panelState.explicitInput.id,embeddableConfig:(0,_lodash.omit)(panelState.explicitInput,"id")},customTitle&&{title:customTitle},{},panelState.savedObjectId!==undefined&&{id:panelState.savedObjectId})}},7415:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopNavIds=void 0;var TopNavIds={ADD:"add",SHARE:"share",OPTIONS:"options",SAVE:"save",EXIT_EDIT_MODE:"exitEditMode",ENTER_EDIT_MODE:"enterEditMode",CLONE:"clone",FULL_SCREEN:"fullScreenMode",VISUALIZE:"visualize"};exports.TopNavIds=TopNavIds},7860:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initDashboardApp=initDashboardApp;var _i18n=__webpack_require__(2);var _dashboard_app=_interopRequireDefault(__webpack_require__(7861));var _dashboard_listing_ng_wrapper=_interopRequireDefault(__webpack_require__(7862));var _legacy_imports=__webpack_require__(990);var _dashboard_app2=__webpack_require__(7863);var _dashboard_constants=__webpack_require__(526);var _public=__webpack_require__(31);var _dashboard_listing=__webpack_require__(7881);var _help_menu_util=__webpack_require__(7882);var _global_state_sync=__webpack_require__(7883);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function initDashboardApp(app,deps){(0,_dashboard_app2.initDashboardAppDirective)(app,deps);app.directive("dashboardListing",(function(reactDirective){return reactDirective(_dashboard_listing.DashboardListing,[["core",{watchDepth:"reference"}],["createItem",{watchDepth:"reference"}],["getViewUrl",{watchDepth:"reference"}],["editItem",{watchDepth:"reference"}],["findItems",{watchDepth:"reference"}],["deleteItems",{watchDepth:"reference"}],["listingLimit",{watchDepth:"reference"}],["hideWriteControls",{watchDepth:"reference"}],["initialFilter",{watchDepth:"reference"}]])}));function createNewDashboardCtrl($scope){$scope.visitVisualizeAppLinkText=_i18n.i18n.translate("kbn.dashboard.visitVisualizeAppLinkText",{defaultMessage:"visit the Visualize app"});(0,_help_menu_util.addHelpMenuToAppChrome)(deps.chrome,deps.core.docLinks)}app.run((function(globalState){(0,_global_state_sync.syncOnMount)(globalState,deps.npDataStart)}));app.run((function(globalState,$rootScope){(0,_legacy_imports.registerTimefilterWithGlobalStateFactory)(deps.npDataStart.query.timefilter.timefilter,globalState,$rootScope)}));app.config((function($routeProvider){var defaults={reloadOnSearch:false,requireUICapability:"dashboard.show",badge:function badge(){if(deps.dashboardCapabilities.showWriteControls){return undefined}return{text:_i18n.i18n.translate("kbn.dashboard.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n.i18n.translate("kbn.dashboard.badge.readOnly.tooltip",{defaultMessage:"Unable to save dashboards"}),iconType:"glasses"}}};$routeProvider.when(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH,_objectSpread({},defaults,{template:_dashboard_listing_ng_wrapper.default,controller:function controller($injector,$location,$scope){var service=deps.savedDashboards;var kbnUrl=$injector.get("kbnUrl");var dashboardConfig=deps.dashboardConfig;$scope.listingLimit=deps.uiSettings.get("savedObjects:listingLimit");$scope.create=function(){kbnUrl.redirect(_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL)};$scope.find=function(search){return service.find(search,$scope.listingLimit)};$scope.editItem=function(_ref){var id=_ref.id;kbnUrl.redirect("".concat((0,_dashboard_constants.createDashboardEditUrl)(id),"?_a=(viewMode:edit)"))};$scope.getViewUrl=function(_ref2){var id=_ref2.id;return deps.addBasePath("#".concat((0,_dashboard_constants.createDashboardEditUrl)(id)))};$scope.delete=function(dashboards){return service.delete(dashboards.map((function(d){return d.id})))};$scope.hideWriteControls=dashboardConfig.getHideWriteControls();$scope.initialFilter=$location.search().filter||_dashboard_listing.EMPTY_FILTER;deps.chrome.setBreadcrumbs([{text:_i18n.i18n.translate("kbn.dashboard.dashboardBreadcrumbsTitle",{defaultMessage:"Dashboards"})}]);(0,_help_menu_util.addHelpMenuToAppChrome)(deps.chrome,deps.core.docLinks);$scope.core=deps.core},resolve:{dash:function dash($rootScope,$route,redirectWhenMissing,kbnUrl){return(0,_legacy_imports.ensureDefaultIndexPattern)(deps.core,deps.npDataStart,$rootScope,kbnUrl).then((function(){var savedObjectsClient=deps.savedObjectsClient;var title=$route.current.params.title;if(title){return savedObjectsClient.find({search:'"'.concat(title,'"'),search_fields:"title",type:"dashboard"}).then((function(results){var matchingDashboards=results.savedObjects.filter((function(dashboard){return dashboard.attributes.title.toLowerCase()===title.toLowerCase()}));if(matchingDashboards.length===1){kbnUrl.redirect((0,_dashboard_constants.createDashboardEditUrl)(matchingDashboards[0].id))}else{kbnUrl.redirect("".concat(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH,'?filter="').concat(title,'"'))}$rootScope.$digest();return new Promise((function(){}))}))}}))}}})).when(_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,_objectSpread({},defaults,{template:_dashboard_app.default,controller:createNewDashboardCtrl,requireUICapability:"dashboard.createNew",resolve:{dash:function dash(redirectWhenMissing,$rootScope,kbnUrl){return(0,_legacy_imports.ensureDefaultIndexPattern)(deps.core,deps.npDataStart,$rootScope,kbnUrl).then((function(){return deps.savedDashboards.get()})).catch(redirectWhenMissing({dashboard:_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}))}}})).when((0,_dashboard_constants.createDashboardEditUrl)(":id"),_objectSpread({},defaults,{template:_dashboard_app.default,controller:createNewDashboardCtrl,resolve:{dash:function dash($rootScope,$route,redirectWhenMissing,kbnUrl,AppState){var id=$route.current.params.id;return(0,_legacy_imports.ensureDefaultIndexPattern)(deps.core,deps.npDataStart,$rootScope,kbnUrl).then((function(){return deps.savedDashboards.get(id)})).then((function(savedDashboard){deps.chrome.recentlyAccessed.add(savedDashboard.getFullPath(),savedDashboard.title,id);return savedDashboard})).catch((function(error){if(error instanceof _public.InvalidJSONProperty){deps.toastNotifications.addDanger(error.message);kbnUrl.redirect(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH);return}if(error instanceof _public.SavedObjectNotFound&&id==="create"){kbnUrl.redirect(_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,{},new AppState);deps.toastNotifications.addWarning(_i18n.i18n.translate("kbn.dashboard.urlWasRemovedInSixZeroWarningMessage",{defaultMessage:'The url "dashboard/create" was removed in 6.0. Please update your bookmarks.'}));return new Promise((function(){}))}else{throw error}})).catch(redirectWhenMissing({dashboard:_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}))}}})).when("dashboard/:tail*?",{redirectTo:"/".concat(deps.core.injectedMetadata.getInjectedVar("kbnDefaultAppId"))}).when("dashboards/:tail*?",{redirectTo:"/".concat(deps.core.injectedMetadata.getInjectedVar("kbnDefaultAppId"))})}))}},7861:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<dashboard-app\n  class="app-container dshAppContainer"\n  ng-class="{\'dshAppContainer--withMargins\': model.useMargins}"\n>\n  \x3c!-- Local nav. --\x3e\n  <kbn-top-nav\n    ng-show="isVisible"\n    app-name="\'dashboard\'"\n    config="topNavMenu"\n\n    show-search-bar="isVisible"\n    show-filter-bar="showFilterBar()"\n    show-save-query="showSaveQuery"\n\n    query="model.query"\n    saved-query="savedQuery"\n    screen-title="screenTitle"\n    on-query-submit="updateQueryAndFetch"\n    index-patterns="indexPatterns"\n    filters="model.filters"\n    on-filters-updated="onFiltersUpdated"\n    date-range-from="model.timeRange.from"\n    date-range-to="model.timeRange.to"\n    is-refresh-paused="model.refreshInterval.pause"\n    refresh-interval="model.refreshInterval.value"\n    on-saved="onQuerySaved"\n    on-saved-query-updated="onSavedQueryUpdated"\n    on-clear-saved-query="onClearSavedQuery"\n    on-refresh-change="onRefreshChange">\n  </kbn-top-nav>\n\n  \x3c!--\n  The top nav is hidden in embed mode but the filter bar must still be present so\n  we show the filter bar on its own here if the chrome is not visible.\n--\x3e\n  <kbn-top-nav\n    ng-if="showFilterBar() && !isVisible"\n\n    app-name="\'dashboard\'"\n    show-search-bar="true"\n    show-filter-bar="true"\n    show-save-query="false"\n    show-date-picker="false"\n\n    filters="model.filters"\n    index-patterns="indexPatterns"\n    on-filters-updated="onFiltersUpdated"\n  >\n  </kbn-top-nav>\n\n  <h1 class="euiScreenReaderOnly">{{screenTitle}}</h1>\n  <div id="dashboardViewport"></div>\n\n</dashboard-app>\n'},7862:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<dashboard-listing\n  core="core"\n  create-item="create"\n  get-view-url="getViewUrl"\n  edit-item="editItem"\n  find-items="find"\n  delete-items="delete"\n  listing-limit="listingLimit"\n  hide-write-controls="hideWriteControls"\n  initial-filter="initialFilter"\n/>\n'},7863:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initDashboardAppDirective=initDashboardAppDirective;var _dashboard_app_controller=__webpack_require__(7864);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function initDashboardAppDirective(app,deps){app.directive("dashboardApp",(function($injector){var AppState=$injector.get("AppState");var kbnUrl=$injector.get("kbnUrl");var confirmModal=$injector.get("confirmModal");var config=deps.uiSettings;return{restrict:"E",controllerAs:"dashboardApp",controller:function controller($scope,$route,$routeParams,getAppState,globalState){return new _dashboard_app_controller.DashboardAppController(_objectSpread({$route:$route,$scope:$scope,$routeParams:$routeParams,getAppState:getAppState,globalState:globalState,kbnUrl:kbnUrl,AppStateClass:AppState,config:config,confirmModal:confirmModal,indexPatterns:deps.npDataStart.indexPatterns},deps))}}}))}},7864:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardAppController=void 0;var _lodash=_interopRequireWildcard(__webpack_require__(3));var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _angular=_interopRequireDefault(__webpack_require__(40));var _rxjs=__webpack_require__(37);var _dashboard_empty_screen=__webpack_require__(7865);var _legacy_imports=__webpack_require__(990);var _public=__webpack_require__(149);var _public2=__webpack_require__(7867);var _public3=__webpack_require__(401);var _show_options_popover=__webpack_require__(7868);var _save_modal=__webpack_require__(7870);var _show_clone_modal=__webpack_require__(7871);var _lib=__webpack_require__(7411);var _dashboard_state_manager=__webpack_require__(7878);var _dashboard_constants=__webpack_require__(526);var _get_top_nav_config=__webpack_require__(7879);var _top_nav_ids=__webpack_require__(7415);var _dashboard_strings=__webpack_require__(7880);var _embeddable_saved_object_converters=__webpack_require__(7414);var _public4=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardAppController=function DashboardAppController(_ref){var _this=this;var $scope=_ref.$scope,$route=_ref.$route,$routeParams=_ref.$routeParams,getAppState=_ref.getAppState,globalState=_ref.globalState,dashboardConfig=_ref.dashboardConfig,localStorage=_ref.localStorage,kbnUrl=_ref.kbnUrl,AppStateClass=_ref.AppStateClass,indexPatterns=_ref.indexPatterns,config=_ref.config,confirmModal=_ref.confirmModal,savedQueryService=_ref.savedQueryService,embeddables=_ref.embeddables,share=_ref.share,dashboardCapabilities=_ref.dashboardCapabilities,_ref$npDataStart$quer=_ref.npDataStart.query,filterManager=_ref$npDataStart$quer.filterManager,timefilter=_ref$npDataStart$quer.timefilter.timefilter,_ref$core=_ref.core,notifications=_ref$core.notifications,overlays=_ref$core.overlays,chrome=_ref$core.chrome,injectedMetadata=_ref$core.injectedMetadata,uiSettings=_ref$core.uiSettings,savedObjects=_ref$core.savedObjects,http=_ref$core.http;_classCallCheck(this,DashboardAppController);_defineProperty(this,"appStatus",void 0);new _public.FilterStateManager(globalState,getAppState,filterManager);var queryFilter=filterManager;var lastReloadRequestTime=0;var dash=$scope.dash=$route.current.locals.dash;if(dash.id){chrome.docTitle.change(dash.title)}var dashboardStateManager=new _dashboard_state_manager.DashboardStateManager({savedDashboard:dash,AppStateClass:AppStateClass,hideWriteControls:dashboardConfig.getHideWriteControls(),kibanaVersion:injectedMetadata.getKibanaVersion()});$scope.appState=dashboardStateManager.getAppState();if(dashboardStateManager.getIsTimeSavedWithDashboard()&&!globalState.$inheritedGlobalState){dashboardStateManager.syncTimefilterWithDashboard(timefilter)}$scope.showSaveQuery=dashboardCapabilities.saveQuery;var getShouldShowEditHelp=function getShouldShowEditHelp(){return!dashboardStateManager.getPanels().length&&dashboardStateManager.getIsEditMode()&&!dashboardConfig.getHideWriteControls()};var getShouldShowViewHelp=function getShouldShowViewHelp(){return!dashboardStateManager.getPanels().length&&dashboardStateManager.getIsViewMode()&&!dashboardConfig.getHideWriteControls()};var getIsEmptyInReadonlyMode=function getIsEmptyInReadonlyMode(){return!dashboardStateManager.getPanels().length&&!getShouldShowEditHelp()&&!getShouldShowViewHelp()&&dashboardConfig.getHideWriteControls()};var addVisualization=function addVisualization(){navActions[_top_nav_ids.TopNavIds.VISUALIZE]()};var updateIndexPatterns=function updateIndexPatterns(container){if(!container||(0,_public3.isErrorEmbeddable)(container)){return}var panelIndexPatterns=[];Object.values(container.getChildIds()).forEach((function(id){var _panelIndexPatterns;var embeddable=container.getChild(id);if((0,_public3.isErrorEmbeddable)(embeddable))return;var embeddableIndexPatterns=embeddable.getOutput().indexPatterns;if(!embeddableIndexPatterns)return;(_panelIndexPatterns=panelIndexPatterns).push.apply(_panelIndexPatterns,_toConsumableArray(embeddableIndexPatterns))}));panelIndexPatterns=(0,_lodash.uniq)(panelIndexPatterns,"id");if(panelIndexPatterns&&panelIndexPatterns.length>0){$scope.$evalAsync((function(){$scope.indexPatterns=panelIndexPatterns}))}else{indexPatterns.getDefault().then((function(defaultIndexPattern){$scope.$evalAsync((function(){$scope.indexPatterns=[defaultIndexPattern]}))}))}};var getEmptyScreenProps=function getEmptyScreenProps(shouldShowEditHelp,isEmptyInReadOnlyMode){var emptyScreenProps={onLinkClick:shouldShowEditHelp?$scope.showAddPanel:$scope.enterEditMode,showLinkToVisualize:shouldShowEditHelp,uiSettings:uiSettings,http:http};if(shouldShowEditHelp){emptyScreenProps.onVisualizeClick=addVisualization}if(isEmptyInReadOnlyMode){emptyScreenProps.isReadonlyMode=true}return emptyScreenProps};var getDashboardInput=function getDashboardInput(){var embeddablesMap={};dashboardStateManager.getPanels().forEach((function(panel){embeddablesMap[panel.panelIndex]=(0,_embeddable_saved_object_converters.convertSavedDashboardPanelToPanelState)(panel)}));var expandedPanelId;if(dashboardContainer&&!(0,_public3.isErrorEmbeddable)(dashboardContainer)){expandedPanelId=dashboardContainer.getInput().expandedPanelId}var shouldShowEditHelp=getShouldShowEditHelp();var shouldShowViewHelp=getShouldShowViewHelp();var isEmptyInReadonlyMode=getIsEmptyInReadonlyMode();return{id:dashboardStateManager.savedDashboard.id||"",filters:queryFilter.getFilters(),hidePanelTitles:dashboardStateManager.getHidePanelTitles(),query:$scope.model.query,timeRange:_objectSpread({},_lodash.default.cloneDeep(timefilter.getTime())),refreshConfig:timefilter.getRefreshInterval(),viewMode:dashboardStateManager.getViewMode(),panels:embeddablesMap,isFullScreenMode:dashboardStateManager.getFullScreenMode(),isEmptyState:shouldShowEditHelp||shouldShowViewHelp||isEmptyInReadonlyMode,useMargins:dashboardStateManager.getUseMargins(),lastReloadRequestTime:lastReloadRequestTime,title:dashboardStateManager.getTitle(),description:dashboardStateManager.getDescription(),expandedPanelId:expandedPanelId}};var updateState=function updateState(){$scope.model={query:dashboardStateManager.getQuery(),filters:queryFilter.getFilters(),timeRestore:dashboardStateManager.getTimeRestore(),title:dashboardStateManager.getTitle(),description:dashboardStateManager.getDescription(),timeRange:timefilter.getTime(),refreshInterval:timefilter.getRefreshInterval()};$scope.panels=dashboardStateManager.getPanels();$scope.screenTitle=dashboardStateManager.getTitle()};updateState();var dashboardContainer;var inputSubscription;var outputSubscription;var dashboardDom=document.getElementById("dashboardViewport");var dashboardFactory=embeddables.getEmbeddableFactory(_public2.DASHBOARD_CONTAINER_TYPE);dashboardFactory.create(getDashboardInput()).then((function(container){if(!(0,_public3.isErrorEmbeddable)(container)){dashboardContainer=container;dashboardContainer.renderEmpty=function(){var shouldShowEditHelp=getShouldShowEditHelp();var shouldShowViewHelp=getShouldShowViewHelp();var isEmptyInReadOnlyMode=getIsEmptyInReadonlyMode();var isEmptyState=shouldShowEditHelp||shouldShowViewHelp||isEmptyInReadOnlyMode;return isEmptyState?_react.default.createElement(_dashboard_empty_screen.DashboardEmptyScreen,getEmptyScreenProps(shouldShowEditHelp,isEmptyInReadOnlyMode)):null};updateIndexPatterns(dashboardContainer);outputSubscription=dashboardContainer.getOutput$().subscribe((function(){updateIndexPatterns(dashboardContainer)}));inputSubscription=dashboardContainer.getInput$().subscribe((function(){var dirty=false;if(!_lodash.default.isEqual(container.getInput().filters,queryFilter.getFilters())){queryFilter.addFilters(_lodash.default.cloneDeep(container.getInput().filters));dashboardStateManager.applyFilters($scope.model.query,container.getInput().filters);dirty=true}$scope.$evalAsync((function(){dashboardStateManager.handleDashboardContainerChanges(container);if(dirty){updateState()}}))}));dashboardStateManager.registerChangeListener((function(){refreshDashboardContainer()}));if($routeParams[_dashboard_constants.DashboardConstants.ADD_EMBEDDABLE_TYPE]){var type=$routeParams[_dashboard_constants.DashboardConstants.ADD_EMBEDDABLE_TYPE];var id=$routeParams[_dashboard_constants.DashboardConstants.ADD_EMBEDDABLE_ID];container.addSavedObjectEmbeddable(type,id);kbnUrl.removeParam(_dashboard_constants.DashboardConstants.ADD_EMBEDDABLE_TYPE);kbnUrl.removeParam(_dashboard_constants.DashboardConstants.ADD_EMBEDDABLE_ID)}}if(dashboardDom){container.render(dashboardDom)}}));this.appStatus={dirty:!dash.id};dashboardStateManager.registerChangeListener((function(status){_this.appStatus.dirty=status.dirty||!dash.id;updateState()}));dashboardStateManager.applyFilters(dashboardStateManager.getQuery()||{query:"",language:localStorage.get("kibana.userQueryLanguage")||config.get("search:queryLanguage")},queryFilter.getFilters());timefilter.disableTimeRangeSelector();timefilter.disableAutoRefreshSelector();var landingPageUrl=function landingPageUrl(){return"#".concat(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH)};var getDashTitle=function getDashTitle(){return(0,_dashboard_strings.getDashboardTitle)(dashboardStateManager.getTitle(),dashboardStateManager.getViewMode(),dashboardStateManager.getIsDirty(timefilter),dashboardStateManager.isNew())};var updateBreadcrumbs=function updateBreadcrumbs(){chrome.setBreadcrumbs([{text:_i18n.i18n.translate("kbn.dashboard.dashboardAppBreadcrumbsTitle",{defaultMessage:"Dashboard"}),href:landingPageUrl()},{text:getDashTitle()}])};updateBreadcrumbs();dashboardStateManager.registerChangeListener(updateBreadcrumbs);var getChangesFromAppStateForContainerState=function getChangesFromAppStateForContainerState(){var appStateDashboardInput=getDashboardInput();if(!dashboardContainer||(0,_public3.isErrorEmbeddable)(dashboardContainer)){return appStateDashboardInput}var containerInput=dashboardContainer.getInput();var differences={};Object.keys(containerInput).forEach((function(key){var containerValue=containerInput[key];var appStateValue=appStateDashboardInput[key];if(!_lodash.default.isEqual(containerValue,appStateValue)){differences[key]=appStateValue}}));return Object.values(differences).length===0?undefined:differences};var refreshDashboardContainer=function refreshDashboardContainer(){var changes=getChangesFromAppStateForContainerState();if(changes&&dashboardContainer){dashboardContainer.updateInput(changes)}};$scope.updateQueryAndFetch=function(_ref2){var query=_ref2.query,dateRange=_ref2.dateRange;if(dateRange){timefilter.setTime(dateRange)}var oldQuery=$scope.model.query;if(_lodash.default.isEqual(oldQuery,query)){lastReloadRequestTime=(new Date).getTime();refreshDashboardContainer()}else{$scope.model.query=query;dashboardStateManager.applyFilters($scope.model.query,$scope.model.filters)}};$scope.onRefreshChange=function(_ref3){var isPaused=_ref3.isPaused,refreshInterval=_ref3.refreshInterval;timefilter.setRefreshInterval({pause:isPaused,value:refreshInterval?refreshInterval:$scope.model.refreshInterval.value})};$scope.onFiltersUpdated=function(filters){queryFilter.setFilters(filters)};$scope.onQuerySaved=function(savedQuery){$scope.savedQuery=savedQuery};$scope.onSavedQueryUpdated=function(savedQuery){$scope.savedQuery=_objectSpread({},savedQuery)};$scope.onClearSavedQuery=function(){delete $scope.savedQuery;dashboardStateManager.setSavedQueryId(undefined);dashboardStateManager.applyFilters({query:"",language:localStorage.get("kibana.userQueryLanguage")||config.get("search:queryLanguage")},[]);setTimeout(queryFilter.removeAll,0)};var updateStateFromSavedQuery=function updateStateFromSavedQuery(savedQuery){dashboardStateManager.applyFilters(savedQuery.attributes.query,savedQuery.attributes.filters||[]);if(savedQuery.attributes.timefilter){timefilter.setTime({from:savedQuery.attributes.timefilter.from,to:savedQuery.attributes.timefilter.to});if(savedQuery.attributes.timefilter.refreshInterval){timefilter.setRefreshInterval(savedQuery.attributes.timefilter.refreshInterval)}}setTimeout((function(){queryFilter.setFilters(savedQuery.attributes.filters||[])}),0)};$scope.$watch("savedQuery",(function(newSavedQuery){if(!newSavedQuery)return;dashboardStateManager.setSavedQueryId(newSavedQuery.id);updateStateFromSavedQuery(newSavedQuery)}));$scope.$watch((function(){return dashboardStateManager.getSavedQueryId()}),(function(newSavedQueryId){if(!newSavedQueryId){$scope.savedQuery=undefined;return}if(!$scope.savedQuery||newSavedQueryId!==$scope.savedQuery.id){savedQueryService.getSavedQuery(newSavedQueryId).then((function(savedQuery){$scope.$evalAsync((function(){$scope.savedQuery=savedQuery;updateStateFromSavedQuery(savedQuery)}))}))}}));$scope.indexPatterns=[];$scope.$watch("model.query",(function(newQuery){var query=(0,_legacy_imports.migrateLegacyQuery)(newQuery);$scope.updateQueryAndFetch({query:query})}));$scope.$watch((function(){return dashboardCapabilities.saveQuery}),(function(newCapability){$scope.showSaveQuery=newCapability}));$scope.timefilterSubscriptions$=new _rxjs.Subscription;$scope.timefilterSubscriptions$.add((0,_legacy_imports.subscribeWithScope)($scope,timefilter.getRefreshIntervalUpdate$(),{next:function next(){updateState();refreshDashboardContainer()}}));$scope.timefilterSubscriptions$.add((0,_legacy_imports.subscribeWithScope)($scope,timefilter.getTimeUpdate$(),{next:function next(){updateState();refreshDashboardContainer()}}));function updateViewMode(newMode){$scope.topNavMenu=(0,_get_top_nav_config.getTopNavConfig)(newMode,navActions,dashboardConfig.getHideWriteControls());dashboardStateManager.switchViewMode(newMode)}var onChangeViewMode=function onChangeViewMode(newMode){var isPageRefresh=newMode===dashboardStateManager.getViewMode();var isLeavingEditMode=!isPageRefresh&&newMode===_public3.ViewMode.VIEW;var willLoseChanges=isLeavingEditMode&&dashboardStateManager.getIsDirty(timefilter);if(!willLoseChanges){updateViewMode(newMode);return}function revertChangesAndExitEditMode(){dashboardStateManager.resetState();kbnUrl.change(dash.id?(0,_dashboard_constants.createDashboardEditUrl)(dash.id):_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL);updateViewMode(_public3.ViewMode.VIEW);if(dashboardStateManager.getIsTimeSavedWithDashboard()){dashboardStateManager.syncTimefilterWithDashboard(timefilter)}}confirmModal(_i18n.i18n.translate("kbn.dashboard.changeViewModeConfirmModal.discardChangesDescription",{defaultMessage:"Once you discard your changes, there's no getting them back."}),{onConfirm:revertChangesAndExitEditMode,onCancel:_lodash.default.noop,confirmButtonText:_i18n.i18n.translate("kbn.dashboard.changeViewModeConfirmModal.confirmButtonLabel",{defaultMessage:"Discard changes"}),cancelButtonText:_i18n.i18n.translate("kbn.dashboard.changeViewModeConfirmModal.cancelButtonLabel",{defaultMessage:"Continue editing"}),defaultFocusedButton:_legacy_imports.ConfirmationButtonTypes.CANCEL,title:_i18n.i18n.translate("kbn.dashboard.changeViewModeConfirmModal.discardChangesTitle",{defaultMessage:"Discard changes to dashboard?"})})};function save(saveOptions){return(0,_lib.saveDashboard)(_angular.default.toJson,timefilter,dashboardStateManager,saveOptions).then((function(id){if(id){notifications.toasts.addSuccess({title:_i18n.i18n.translate("kbn.dashboard.dashboardWasSavedSuccessMessage",{defaultMessage:"Dashboard '{dashTitle}' was saved",values:{dashTitle:dash.title}}),"data-test-subj":"saveDashboardSuccess"});if(dash.id!==$routeParams.id){kbnUrl.change((0,_dashboard_constants.createDashboardEditUrl)(dash.id))}else{chrome.docTitle.change(dash.lastSavedTitle);updateViewMode(_public3.ViewMode.VIEW)}}return{id:id}})).catch((function(error){notifications.toasts.addDanger({title:_i18n.i18n.translate("kbn.dashboard.dashboardWasNotSavedDangerMessage",{defaultMessage:"Dashboard '{dashTitle}' was not saved. Error: {errorMessage}",values:{dashTitle:dash.title,errorMessage:error.message}}),"data-test-subj":"saveDashboardFailure"});return{error:error}}))}$scope.showFilterBar=function(){return $scope.model.filters.length>0||!dashboardStateManager.getFullScreenMode()};$scope.showAddPanel=function(){dashboardStateManager.setFullScreenMode(false);navActions[_top_nav_ids.TopNavIds.ADD]()};$scope.enterEditMode=function(){dashboardStateManager.setFullScreenMode(false);navActions[_top_nav_ids.TopNavIds.ENTER_EDIT_MODE]()};var navActions={};navActions[_top_nav_ids.TopNavIds.FULL_SCREEN]=function(){return dashboardStateManager.setFullScreenMode(true)};navActions[_top_nav_ids.TopNavIds.EXIT_EDIT_MODE]=function(){return onChangeViewMode(_public3.ViewMode.VIEW)};navActions[_top_nav_ids.TopNavIds.ENTER_EDIT_MODE]=function(){return onChangeViewMode(_public3.ViewMode.EDIT)};navActions[_top_nav_ids.TopNavIds.SAVE]=function(){var currentTitle=dashboardStateManager.getTitle();var currentDescription=dashboardStateManager.getDescription();var currentTimeRestore=dashboardStateManager.getTimeRestore();var onSave=function onSave(_ref4){var newTitle=_ref4.newTitle,newDescription=_ref4.newDescription,newCopyOnSave=_ref4.newCopyOnSave,newTimeRestore=_ref4.newTimeRestore,isTitleDuplicateConfirmed=_ref4.isTitleDuplicateConfirmed,onTitleDuplicate=_ref4.onTitleDuplicate;dashboardStateManager.setTitle(newTitle);dashboardStateManager.setDescription(newDescription);dashboardStateManager.savedDashboard.copyOnSave=newCopyOnSave;dashboardStateManager.setTimeRestore(newTimeRestore);var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return save(saveOptions).then((function(response){if(!response.id){dashboardStateManager.setTitle(currentTitle);dashboardStateManager.setDescription(currentDescription);dashboardStateManager.setTimeRestore(currentTimeRestore)}return response}))};var dashboardSaveModal=_react.default.createElement(_save_modal.DashboardSaveModal,{onSave:onSave,onClose:function onClose(){},title:currentTitle,description:currentDescription,timeRestore:currentTimeRestore,showCopyOnSave:dash.id?true:false});(0,_legacy_imports.showSaveModal)(dashboardSaveModal)};navActions[_top_nav_ids.TopNavIds.CLONE]=function(){var currentTitle=dashboardStateManager.getTitle();var onClone=function onClone(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate){dashboardStateManager.savedDashboard.copyOnSave=true;dashboardStateManager.setTitle(newTitle);var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return save(saveOptions).then((function(response){if(response.error){dashboardStateManager.setTitle(currentTitle)}return response}))};(0,_show_clone_modal.showCloneModal)(onClone,currentTitle)};navActions[_top_nav_ids.TopNavIds.ADD]=function(){if(dashboardContainer&&!(0,_public3.isErrorEmbeddable)(dashboardContainer)){var SavedObjectFinder=function SavedObjectFinder(props){return _react.default.createElement(_public4.SavedObjectFinderUi,_extends({},props,{savedObjects:savedObjects,uiSettings:uiSettings}))};(0,_public3.openAddPanelFlyout)({embeddable:dashboardContainer,getAllFactories:embeddables.getEmbeddableFactories,getFactory:embeddables.getEmbeddableFactory,notifications:notifications,overlays:overlays,SavedObjectFinder:SavedObjectFinder})}};navActions[_top_nav_ids.TopNavIds.VISUALIZE]=function _callee(){var type,factory,explicitInput;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:type="visualization";factory=embeddables.getEmbeddableFactory(type);if(factory){_context.next=4;break}throw new _public3.EmbeddableFactoryNotFoundError(type);case 4:_context.next=6;return regeneratorRuntime.awrap(factory.getExplicitInput());case 6:explicitInput=_context.sent;if(!dashboardContainer){_context.next=10;break}_context.next=10;return regeneratorRuntime.awrap(dashboardContainer.addNewEmbeddable(type,explicitInput));case 10:case"end":return _context.stop()}}}))};navActions[_top_nav_ids.TopNavIds.OPTIONS]=function(anchorElement){(0,_show_options_popover.showOptionsPopover)({anchorElement:anchorElement,useMargins:dashboardStateManager.getUseMargins(),onUseMarginsChange:function onUseMarginsChange(isChecked){dashboardStateManager.setUseMargins(isChecked)},hidePanelTitles:dashboardStateManager.getHidePanelTitles(),onHidePanelTitlesChange:function onHidePanelTitlesChange(isChecked){dashboardStateManager.setHidePanelTitles(isChecked)}})};navActions[_top_nav_ids.TopNavIds.SHARE]=function(anchorElement){share.toggleShareContextMenu({anchorElement:anchorElement,allowEmbed:true,allowShortUrl:!dashboardConfig.getHideWriteControls(),shareableUrl:(0,_legacy_imports.unhashUrl)(window.location.href),objectId:dash.id,objectType:"dashboard",sharingData:{title:dash.title},isDirty:dashboardStateManager.getIsDirty()})};updateViewMode(dashboardStateManager.getViewMode());var updateSubscription=queryFilter.getUpdates$().subscribe({next:function next(){$scope.model.filters=queryFilter.getFilters();dashboardStateManager.applyFilters($scope.model.query,$scope.model.filters);if(dashboardContainer){dashboardContainer.updateInput({filters:$scope.model.filters})}}});var visibleSubscription=chrome.getIsVisible$().subscribe((function(isVisible){$scope.$evalAsync((function(){$scope.isVisible=isVisible}))}));$scope.$on("$destroy",(function(){updateSubscription.unsubscribe();visibleSubscription.unsubscribe();$scope.timefilterSubscriptions$.unsubscribe();dashboardStateManager.destroy();if(inputSubscription){inputSubscription.unsubscribe()}if(outputSubscription){outputSubscription.unsubscribe()}if(dashboardContainer){dashboardContainer.destroy()}}))};exports.DashboardAppController=DashboardAppController},7865:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardEmptyScreen=DashboardEmptyScreen;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);var constants=_interopRequireWildcard(__webpack_require__(7866));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DashboardEmptyScreen(_ref){var showLinkToVisualize=_ref.showLinkToVisualize,onLinkClick=_ref.onLinkClick,onVisualizeClick=_ref.onVisualizeClick,uiSettings=_ref.uiSettings,http=_ref.http,isReadonlyMode=_ref.isReadonlyMode;var IS_DARK_THEME=uiSettings.get("theme:darkMode");var emptyStateGraphicURL=IS_DARK_THEME?"/plugins/kibana/home/assets/welcome_graphic_dark_2x.png":"/plugins/kibana/home/assets/welcome_graphic_light_2x.png";var linkToVisualizeParagraph=_react.default.createElement("p",{"data-test-subj":"linkToVisualizeParagraph"},_react.default.createElement(_eui.EuiButton,{iconSide:"right",size:"s",fill:true,iconType:"arrowDown",onClick:onVisualizeClick,"data-test-subj":"addVisualizationButton","aria-label":constants.createNewVisualizationButtonAriaLabel},constants.createNewVisualizationButton));var paragraph=function paragraph(description1,description2,linkText,ariaLabel,dataTestSubj){return _react.default.createElement(_eui.EuiText,{size:"m",color:"subdued"},_react.default.createElement("p",null,description1,description1&&_react.default.createElement("span",null," "),_react.default.createElement(_eui.EuiLink,{onClick:onLinkClick,"aria-label":ariaLabel,"data-test-subj":dataTestSubj||""},linkText),_react.default.createElement("span",null," "),description2))};var enterEditModeParagraph=paragraph(constants.howToStartWorkingOnNewDashboardDescription1,constants.howToStartWorkingOnNewDashboardDescription2,constants.howToStartWorkingOnNewDashboardEditLinkText,constants.howToStartWorkingOnNewDashboardEditLinkAriaLabel);var enterViewModeParagraph=paragraph(null,constants.addNewVisualizationDescription,constants.addExistingVisualizationLinkText,constants.addExistingVisualizationLinkAriaLabel);var page=function page(mainText,showAdditionalParagraph,additionalText){return _react.default.createElement(_eui.EuiPage,{className:"dshStartScreen",restrictWidth:"500px"},_react.default.createElement(_eui.EuiPageBody,null,_react.default.createElement(_eui.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",paddingSize:"none",className:"dshStartScreen__pageContent"},_react.default.createElement(_eui.EuiImage,{url:http.basePath.prepend(emptyStateGraphicURL),alt:""}),_react.default.createElement(_eui.EuiText,{size:"m"},_react.default.createElement("p",{style:{fontWeight:"bold"}},mainText)),additionalText?_react.default.createElement(_eui.EuiText,{size:"m",color:"subdued"},additionalText):null,showAdditionalParagraph?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement("div",{className:"dshStartScreen__panelDesc"},enterEditModeParagraph)):null)))};var readonlyMode=page(constants.emptyDashboardTitle,false,constants.emptyDashboardAdditionalPrivilege);var viewMode=page(constants.fillDashboardTitle,true);var editMode=_react.default.createElement("div",{"data-test-subj":"emptyDashboardWidget",className:"dshEmptyWidget"},enterViewModeParagraph,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),linkToVisualizeParagraph);var actionableMode=showLinkToVisualize?editMode:viewMode;return _react.default.createElement(_react2.I18nProvider,null,isReadonlyMode?readonlyMode:actionableMode)}},7866:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createNewVisualizationButtonAriaLabel=exports.createNewVisualizationButton=exports.addNewVisualizationDescription=exports.addExistingVisualizationLinkAriaLabel=exports.addExistingVisualizationLinkText=exports.howToStartWorkingOnNewDashboardEditLinkAriaLabel=exports.howToStartWorkingOnNewDashboardEditLinkText=exports.howToStartWorkingOnNewDashboardDescription2=exports.howToStartWorkingOnNewDashboardDescription1=exports.fillDashboardTitle=exports.emptyDashboardAdditionalPrivilege=exports.emptyDashboardTitle=void 0;var _i18n=__webpack_require__(2);var emptyDashboardTitle=_i18n.i18n.translate("kbn.dashboard.emptyDashboardTitle",{defaultMessage:"This dashboard is empty."});exports.emptyDashboardTitle=emptyDashboardTitle;var emptyDashboardAdditionalPrivilege=_i18n.i18n.translate("kbn.dashboard.emptyDashboardAdditionalPrivilege",{defaultMessage:"You need additional privileges to edit this dashboard."});exports.emptyDashboardAdditionalPrivilege=emptyDashboardAdditionalPrivilege;var fillDashboardTitle=_i18n.i18n.translate("kbn.dashboard.fillDashboardTitle",{defaultMessage:"This dashboard is empty. Let’s fill it up!"});exports.fillDashboardTitle=fillDashboardTitle;var howToStartWorkingOnNewDashboardDescription1=_i18n.i18n.translate("kbn.dashboard.howToStartWorkingOnNewDashboardDescription1",{defaultMessage:"Click"});exports.howToStartWorkingOnNewDashboardDescription1=howToStartWorkingOnNewDashboardDescription1;var howToStartWorkingOnNewDashboardDescription2=_i18n.i18n.translate("kbn.dashboard.howToStartWorkingOnNewDashboardDescription2",{defaultMessage:"in the menu bar above to start adding panels."});exports.howToStartWorkingOnNewDashboardDescription2=howToStartWorkingOnNewDashboardDescription2;var howToStartWorkingOnNewDashboardEditLinkText=_i18n.i18n.translate("kbn.dashboard.howToStartWorkingOnNewDashboardEditLinkText",{defaultMessage:"Edit"});exports.howToStartWorkingOnNewDashboardEditLinkText=howToStartWorkingOnNewDashboardEditLinkText;var howToStartWorkingOnNewDashboardEditLinkAriaLabel=_i18n.i18n.translate("kbn.dashboard.howToStartWorkingOnNewDashboardEditLinkAriaLabel",{defaultMessage:"Edit dashboard"});exports.howToStartWorkingOnNewDashboardEditLinkAriaLabel=howToStartWorkingOnNewDashboardEditLinkAriaLabel;var addExistingVisualizationLinkText=_i18n.i18n.translate("kbn.dashboard.addExistingVisualizationLinkText",{defaultMessage:"Add an existing"});exports.addExistingVisualizationLinkText=addExistingVisualizationLinkText;var addExistingVisualizationLinkAriaLabel=_i18n.i18n.translate("kbn.dashboard.addVisualizationLinkAriaLabel",{defaultMessage:"Add an existing visualization"});exports.addExistingVisualizationLinkAriaLabel=addExistingVisualizationLinkAriaLabel;var addNewVisualizationDescription=_i18n.i18n.translate("kbn.dashboard.addNewVisualizationText",{defaultMessage:"or new object to this dashboard"});exports.addNewVisualizationDescription=addNewVisualizationDescription;var createNewVisualizationButton=_i18n.i18n.translate("kbn.dashboard.createNewVisualizationButton",{defaultMessage:"Create new"});exports.createNewVisualizationButton=createNewVisualizationButton;var createNewVisualizationButtonAriaLabel=_i18n.i18n.translate("kbn.dashboard.createNewVisualizationButtonAriaLabel",{defaultMessage:"Create new visualization button"});exports.createNewVisualizationButtonAriaLabel=createNewVisualizationButtonAriaLabel},7867:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _public=__webpack_require__(1051);Object.keys(_public).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _public[key]}})}))},7868:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showOptionsPopover=showOptionsPopover;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(9));var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);var _options=__webpack_require__(7869);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isOpen=false;var container=document.createElement("div");var onClose=function onClose(){_reactDom.default.unmountComponentAtNode(container);isOpen=false};function showOptionsPopover(_ref){var anchorElement=_ref.anchorElement,useMargins=_ref.useMargins,onUseMarginsChange=_ref.onUseMarginsChange,hidePanelTitles=_ref.hidePanelTitles,onHidePanelTitlesChange=_ref.onHidePanelTitlesChange;if(isOpen){onClose();return}isOpen=true;document.body.appendChild(container);var element=_react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_eui.EuiWrappingPopover,{id:"popover",button:anchorElement,isOpen:true,closePopover:onClose},_react.default.createElement(_options.OptionsMenu,{useMargins:useMargins,onUseMarginsChange:onUseMarginsChange,hidePanelTitles:hidePanelTitles,onHidePanelTitlesChange:onHidePanelTitlesChange})));_reactDom.default.render(element,container)}},7869:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptionsMenu=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OptionsMenu=function(_Component){_inherits(OptionsMenu,_Component);function OptionsMenu(props){var _this;_classCallCheck(this,OptionsMenu);_this=_possibleConstructorReturn(this,_getPrototypeOf(OptionsMenu).call(this,props));_defineProperty(_assertThisInitialized(_this),"state",{useMargins:_this.props.useMargins,hidePanelTitles:_this.props.hidePanelTitles});_defineProperty(_assertThisInitialized(_this),"handleUseMarginsChange",(function(evt){var isChecked=evt.target.checked;_this.props.onUseMarginsChange(isChecked);_this.setState({useMargins:isChecked})}));_defineProperty(_assertThisInitialized(_this),"handleHidePanelTitlesChange",(function(evt){var isChecked=!evt.target.checked;_this.props.onHidePanelTitlesChange(isChecked);_this.setState({hidePanelTitles:isChecked})}));return _this}_createClass(OptionsMenu,[{key:"render",value:function render(){return _react.default.createElement(_eui.EuiForm,{"data-test-subj":"dashboardOptionsMenu"},_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{label:_i18n.i18n.translate("kbn.dashboard.topNav.options.useMarginsBetweenPanelsSwitchLabel",{defaultMessage:"Use margins between panels"}),checked:this.state.useMargins,onChange:this.handleUseMarginsChange,"data-test-subj":"dashboardMarginsCheckbox"})),_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{label:_i18n.i18n.translate("kbn.dashboard.topNav.options.hideAllPanelTitlesSwitchLabel",{defaultMessage:"Show panel titles"}),checked:!this.state.hidePanelTitles,onChange:this.handleHidePanelTitlesChange,"data-test-subj":"dashboardPanelTitlesCheckbox"})))}}]);return OptionsMenu}(_react.Component);exports.OptionsMenu=OptionsMenu},7870:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardSaveModal=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);var _legacy_imports=__webpack_require__(990);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardSaveModal=function(_React$Component){_inherits(DashboardSaveModal,_React$Component);function DashboardSaveModal(props){var _this;_classCallCheck(this,DashboardSaveModal);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardSaveModal).call(this,props));_defineProperty(_assertThisInitialized(_this),"state",{description:_this.props.description,timeRestore:_this.props.timeRestore});_defineProperty(_assertThisInitialized(_this),"saveDashboard",(function(_ref){var newTitle=_ref.newTitle,newCopyOnSave=_ref.newCopyOnSave,isTitleDuplicateConfirmed=_ref.isTitleDuplicateConfirmed,onTitleDuplicate=_ref.onTitleDuplicate;_this.props.onSave({newTitle:newTitle,newDescription:_this.state.description,newCopyOnSave:newCopyOnSave,newTimeRestore:_this.state.timeRestore,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate})}));_defineProperty(_assertThisInitialized(_this),"onDescriptionChange",(function(event){_this.setState({description:event.target.value})}));_defineProperty(_assertThisInitialized(_this),"onTimeRestoreChange",(function(event){_this.setState({timeRestore:event.target.checked})}));return _this}_createClass(DashboardSaveModal,[{key:"renderDashboardSaveOptions",value:function renderDashboardSaveOptions(){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.saveModal.descriptionFormRowLabel",defaultMessage:"Description"})},_react.default.createElement(_eui.EuiTextArea,{"data-test-subj":"dashboardDescription",value:this.state.description,onChange:this.onDescriptionChange})),_react.default.createElement(_eui.EuiFormRow,{helpText:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.saveModal.storeTimeWithDashboardFormRowHelpText",defaultMessage:"This changes the time filter to the currently selected time each time this dashboard is loaded."})},_react.default.createElement(_eui.EuiSwitch,{"data-test-subj":"storeTimeWithDashboard",checked:this.state.timeRestore,onChange:this.onTimeRestoreChange,label:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.saveModal.storeTimeWithDashboardFormRowLabel",defaultMessage:"Store time with dashboard"})})))}},{key:"render",value:function render(){return _react.default.createElement(_legacy_imports.SavedObjectSaveModal,{onSave:this.saveDashboard,onClose:this.props.onClose,title:this.props.title,showCopyOnSave:this.props.showCopyOnSave,objectType:"dashboard",options:this.renderDashboardSaveOptions()})}}]);return DashboardSaveModal}(_react.default.Component);exports.DashboardSaveModal=DashboardSaveModal},7871:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showCloneModal=showCloneModal;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(9));var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _clone_modal=__webpack_require__(7872);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function showCloneModal(onClone,title){var container=document.createElement("div");var closeModal=function closeModal(){_reactDom.default.unmountComponentAtNode(container);document.body.removeChild(container)};var onCloneConfirmed=function onCloneConfirmed(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate){return regeneratorRuntime.async((function onCloneConfirmed$(_context){while(1){switch(_context.prev=_context.next){case 0:onClone(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate).then((function(response){if(response.error||response.id){closeModal()}}));case 1:case"end":return _context.stop()}}}))};document.body.appendChild(container);var element=_react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_clone_modal.DashboardCloneModal,{onClone:onCloneConfirmed,onClose:closeModal,title:_i18n.i18n.translate("kbn.dashboard.topNav.showCloneModal.dashboardCopyTitle",{defaultMessage:"{title} Copy",values:{title:title}})}));_reactDom.default.render(element,container)}},7872:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardCloneModal=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardCloneModal=function(_React$Component){_inherits(DashboardCloneModal,_React$Component);function DashboardCloneModal(props){var _this;_classCallCheck(this,DashboardCloneModal);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardCloneModal).call(this,props));_defineProperty(_assertThisInitialized(_this),"isMounted",false);_defineProperty(_assertThisInitialized(_this),"onTitleDuplicate",(function(){_this.setState({isTitleDuplicateConfirmed:true,hasTitleDuplicate:true})}));_defineProperty(_assertThisInitialized(_this),"cloneDashboard",(function _callee(){return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isLoading:true});_context.next=3;return regeneratorRuntime.awrap(_this.props.onClone(_this.state.newDashboardName,_this.state.isTitleDuplicateConfirmed,_this.onTitleDuplicate));case 3:if(_this.isMounted){_this.setState({isLoading:false})}case 4:case"end":return _context.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"onInputChange",(function(event){_this.setState({newDashboardName:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})}));_defineProperty(_assertThisInitialized(_this),"renderDuplicateTitleCallout",(function(){if(!_this.state.hasTitleDuplicate){return}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiCallOut,{size:"s",title:_i18n.i18n.translate("kbn.dashboard.topNav.cloneModal.dashboardExistsTitle",{defaultMessage:"A dashboard with the title {newDashboardName} already exists.",values:{newDashboardName:"'".concat(_this.state.newDashboardName,"'")}}),color:"warning","data-test-subj":"titleDupicateWarnMsg"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.dashboardExistsDescription",defaultMessage:"Click {confirmClone} to clone the dashboard with the duplicate title.",values:{confirmClone:_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.confirmCloneDescription",defaultMessage:"Confirm Clone"}))}}))))}));_this.state={newDashboardName:props.title,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false};return _this}_createClass(DashboardCloneModal,[{key:"componentDidMount",value:function componentDidMount(){this.isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.isMounted=false}},{key:"render",value:function render(){return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{"data-test-subj":"dashboardCloneModal",className:"dshCloneModal",onClose:this.props.onClose},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.cloneDashboardModalHeaderTitle",defaultMessage:"Clone dashboard"}))),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.enterNewNameForDashboardDescription",defaultMessage:"Please enter a new name for your dashboard."}))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFieldText,{autoFocus:true,"data-test-subj":"clonedDashboardTitle",value:this.state.newDashboardName,onChange:this.onInputChange,isInvalid:this.state.hasTitleDuplicate}),this.renderDuplicateTitleCallout()),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"cloneCancelButton",onClick:this.props.onClose},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.cancelButtonLabel",defaultMessage:"Cancel"})),_react.default.createElement(_eui.EuiButton,{fill:true,"data-test-subj":"cloneConfirmButton",onClick:this.cloneDashboard,isLoading:this.state.isLoading},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.confirmButtonLabel",defaultMessage:"Confirm Clone"})))))}}]);return DashboardCloneModal}(_react.default.Component);exports.DashboardCloneModal=DashboardCloneModal},7873:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.saveDashboard=saveDashboard;var _update_saved_dashboard=__webpack_require__(7874);function saveDashboard(toJson,timeFilter,dashboardStateManager,saveOptions){dashboardStateManager.saveState();var savedDashboard=dashboardStateManager.savedDashboard;var appState=dashboardStateManager.appState;(0,_update_saved_dashboard.updateSavedDashboard)(savedDashboard,appState,timeFilter,toJson);return savedDashboard.save(saveOptions).then((function(id){dashboardStateManager.lastSavedDashboardFilters=dashboardStateManager.getFilterState();dashboardStateManager.resetState();return id}))}},7874:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateSavedDashboard=updateSavedDashboard;var _lodash=_interopRequireDefault(__webpack_require__(3));var _filter_utils=__webpack_require__(7412);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function updateSavedDashboard(savedDashboard,appState,timeFilter,toJson){savedDashboard.title=appState.title;savedDashboard.description=appState.description;savedDashboard.timeRestore=appState.timeRestore;savedDashboard.panelsJSON=toJson(appState.panels);savedDashboard.optionsJSON=toJson(appState.options);savedDashboard.timeFrom=savedDashboard.timeRestore?_filter_utils.FilterUtils.convertTimeToUTCString(timeFilter.getTime().from):undefined;savedDashboard.timeTo=savedDashboard.timeRestore?_filter_utils.FilterUtils.convertTimeToUTCString(timeFilter.getTime().to):undefined;var timeRestoreObj=_lodash.default.pick(timeFilter.getRefreshInterval(),["display","pause","section","value"]);savedDashboard.refreshInterval=savedDashboard.timeRestore?timeRestoreObj:undefined}},7875:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAppStateDefaults=getAppStateDefaults;var _public=__webpack_require__(229);function getAppStateDefaults(savedDashboard,hideWriteControls){return{fullScreenMode:false,title:savedDashboard.title,description:savedDashboard.description||"",timeRestore:savedDashboard.timeRestore,panels:savedDashboard.panelsJSON?JSON.parse(savedDashboard.panelsJSON):[],options:savedDashboard.optionsJSON?JSON.parse(savedDashboard.optionsJSON):{},query:savedDashboard.getQuery(),filters:savedDashboard.getFilters(),viewMode:savedDashboard.id||hideWriteControls?_public.ViewMode.VIEW:_public.ViewMode.EDIT}}},7876:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateAppState=migrateAppState;var _semver=_interopRequireDefault(__webpack_require__(8791));var _i18n=__webpack_require__(2);var _public=__webpack_require__(150);var _migrate_to_730_panels=__webpack_require__(7877);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function migrateAppState(appState,kibanaVersion){if(!appState.panels){throw new Error(_i18n.i18n.translate("kbn.dashboard.panel.invalidData",{defaultMessage:"Invalid data in url"}))}var panelNeedsMigration=appState.panels.some((function(panel){if(panel.version===undefined)return true;var version=panel.version;(0,_public.createUiStatsReporter)("DashboardPanelVersionInUrl")(_public.METRIC_TYPE.LOADED,"".concat(version));return _semver.default.satisfies(version,"<7.3")}));if(panelNeedsMigration){appState.panels=(0,_migrate_to_730_panels.migratePanelsTo730)(appState.panels,kibanaVersion,appState.useMargins,appState.uiState);delete appState.uiState;appState.save()}}},7877:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migratePanelsTo730=migratePanelsTo730;var _i18n=__webpack_require__(2);var _semver=_interopRequireDefault(__webpack_require__(8791));var _uuid=_interopRequireDefault(__webpack_require__(86));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var PANEL_HEIGHT_SCALE_FACTOR=5;var PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS=4;var PANEL_WIDTH_SCALE_FACTOR=4;function isPre61Panel(panel){return panel.row!==undefined}function is61Panel(panel){return _semver.default.satisfies(panel.version,"6.1.x")}function is62Panel(panel){return _semver.default.satisfies(panel.version,"6.2.x")}function is63Panel(panel){return _semver.default.satisfies(panel.version,"6.3.x")}function is640To720Panel(panel){return _semver.default.satisfies(panel.version,">6.3")&&_semver.default.satisfies(panel.version,"<7.3")}function migratePre61PanelToLatest(panel,version,useMargins,uiState){if(panel.col===undefined||panel.row===undefined){throw new Error(_i18n.i18n.translate("kbn.dashboard.panel.unableToMigratePanelDataForSixOneZeroErrorMessage",{defaultMessage:'Unable to migrate panel data for "6.1.0" backwards compatibility, panel does not contain expected col and/or row fields'}))}var embeddableConfig=uiState?uiState["P-".concat(panel.panelIndex)]||{}:{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}var heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;var DASHBOARD_GRID_COLUMN_COUNT=48;var DEFAULT_PANEL_WIDTH=DASHBOARD_GRID_COLUMN_COUNT/2;var DEFAULT_PANEL_HEIGHT=15;var columns=panel.columns,sort=panel.sort,row=panel.row,col=panel.col,sizeX=panel.size_x,sizeY=panel.size_y,rest=_objectWithoutProperties(panel,["columns","sort","row","col","size_x","size_y"]);var panelIndex=panel.panelIndex?panel.panelIndex.toString():_uuid.default.v4();return _objectSpread({},rest,{version:version,panelIndex:panelIndex,gridData:{x:(col-1)*PANEL_WIDTH_SCALE_FACTOR,y:(row-1)*heightScaleFactor,w:sizeX?sizeX*PANEL_WIDTH_SCALE_FACTOR:DEFAULT_PANEL_WIDTH,h:sizeY?sizeY*heightScaleFactor:DEFAULT_PANEL_HEIGHT,i:panelIndex},embeddableConfig:embeddableConfig})}function migrate610PanelToLatest(panel,version,useMargins,uiState){["w","x","h","y"].forEach((function(key){if(panel.gridData[key]===undefined){throw new Error(_i18n.i18n.translate("kbn.dashboard.panel.unableToMigratePanelDataForSixThreeZeroErrorMessage",{defaultMessage:'Unable to migrate panel data for "6.3.0" backwards compatibility, panel does not contain expected field: {key}',values:{key:key}}))}}));var embeddableConfig=uiState?uiState["P-".concat(panel.panelIndex)]||{}:{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}var heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;var columns=panel.columns,sort=panel.sort,rest=_objectWithoutProperties(panel,["columns","sort"]);var panelIndex=panel.panelIndex?panel.panelIndex.toString():_uuid.default.v4();return _objectSpread({},rest,{version:version,panelIndex:panelIndex,gridData:{w:panel.gridData.w*PANEL_WIDTH_SCALE_FACTOR,h:panel.gridData.h*heightScaleFactor,x:panel.gridData.x*PANEL_WIDTH_SCALE_FACTOR,y:panel.gridData.y*heightScaleFactor,i:panel.gridData.i},embeddableConfig:embeddableConfig})}function migrate620PanelToLatest(panel,version,useMargins){var embeddableConfig=panel.embeddableConfig||{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}var heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;var columns=panel.columns,sort=panel.sort,rest=_objectWithoutProperties(panel,["columns","sort"]);var panelIndex=panel.panelIndex?panel.panelIndex.toString():_uuid.default.v4();return _objectSpread({},rest,{version:version,panelIndex:panelIndex,gridData:{w:panel.gridData.w*PANEL_WIDTH_SCALE_FACTOR,h:panel.gridData.h*heightScaleFactor,x:panel.gridData.x*PANEL_WIDTH_SCALE_FACTOR,y:panel.gridData.y*heightScaleFactor,i:panel.gridData.i},embeddableConfig:embeddableConfig})}function migrate630PanelToLatest(panel,version){var embeddableConfig=panel.embeddableConfig||{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}var columns=panel.columns,sort=panel.sort,rest=_objectWithoutProperties(panel,["columns","sort"]);var panelIndex=panel.panelIndex?panel.panelIndex.toString():_uuid.default.v4();return _objectSpread({},rest,{version:version,panelIndex:panelIndex,embeddableConfig:embeddableConfig})}function migrate640To720PanelsToLatest(panel,version){var panelIndex=panel.panelIndex?panel.panelIndex.toString():_uuid.default.v4();return _objectSpread({},panel,{version:version,panelIndex:panelIndex})}function migratePanelsTo730(panels,version,useMargins,uiState){return panels.map((function(panel){if(isPre61Panel(panel)){return migratePre61PanelToLatest(panel,version,useMargins,uiState)}if(is61Panel(panel)){return migrate610PanelToLatest(panel,version,useMargins,uiState)}if(is62Panel(panel)){return migrate620PanelToLatest(panel,version,useMargins)}if(is63Panel(panel)){return migrate630PanelToLatest(panel,version)}if(is640To720Panel(panel)){return migrate640To720PanelsToLatest(panel,version)}return panel}))}},7878:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardStateManager=void 0;var _i18n=__webpack_require__(2);var _lodash=_interopRequireDefault(__webpack_require__(3));var _public=__webpack_require__(229);var _legacy_imports=__webpack_require__(990);var _lib=__webpack_require__(7411);var _embeddable_saved_object_converters=__webpack_require__(7414);var _filter_utils=__webpack_require__(7412);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardStateManager=function(){function DashboardStateManager(_ref){var _this=this;var savedDashboard=_ref.savedDashboard,AppStateClass=_ref.AppStateClass,hideWriteControls=_ref.hideWriteControls,kibanaVersion=_ref.kibanaVersion;_classCallCheck(this,DashboardStateManager);_defineProperty(this,"savedDashboard",void 0);_defineProperty(this,"appState",void 0);_defineProperty(this,"lastSavedDashboardFilters",void 0);_defineProperty(this,"stateDefaults",void 0);_defineProperty(this,"hideWriteControls",void 0);_defineProperty(this,"kibanaVersion",void 0);_defineProperty(this,"isDirty",void 0);_defineProperty(this,"changeListeners",void 0);_defineProperty(this,"stateMonitor",void 0);this.kibanaVersion=kibanaVersion;this.savedDashboard=savedDashboard;this.hideWriteControls=hideWriteControls;this.stateDefaults=(0,_lib.getAppStateDefaults)(this.savedDashboard,this.hideWriteControls);this.appState=new AppStateClass(this.stateDefaults);(0,_lib.migrateAppState)(this.appState,kibanaVersion);this.isDirty=false;this.lastSavedDashboardFilters=this.getFilterState();this.stateMonitor=_legacy_imports.stateMonitorFactory.create(this.appState,this.stateDefaults);this.stateMonitor.ignoreProps("viewMode");this.stateMonitor.ignoreProps("filters");this.stateMonitor.ignoreProps("query");this.stateMonitor.onChange((function(status){_this.isDirty=status.dirty}));this.changeListeners=[];this.stateMonitor.onChange((function(status){_this.changeListeners.forEach((function(listener){return listener(status)}))}))}_createClass(DashboardStateManager,[{key:"registerChangeListener",value:function registerChangeListener(callback){this.changeListeners.push(callback)}},{key:"handleDashboardContainerChanges",value:function handleDashboardContainerChanges(dashboardContainer){var _this2=this;var dirty=false;var savedDashboardPanelMap={};var input=dashboardContainer.getInput();this.getPanels().forEach((function(savedDashboardPanel){if(input.panels[savedDashboardPanel.panelIndex]!==undefined){savedDashboardPanelMap[savedDashboardPanel.panelIndex]=savedDashboardPanel}else{dirty=true}}));var convertedPanelStateMap={};Object.values(input.panels).forEach((function(panelState){if(savedDashboardPanelMap[panelState.explicitInput.id]===undefined){dirty=true}convertedPanelStateMap[panelState.explicitInput.id]=(0,_embeddable_saved_object_converters.convertPanelStateToSavedDashboardPanel)(panelState,_this2.kibanaVersion);if(!_lodash.default.isEqual(convertedPanelStateMap[panelState.explicitInput.id],savedDashboardPanelMap[panelState.explicitInput.id])){dirty=true}}));if(dirty){this.appState.panels=Object.values(convertedPanelStateMap)}if(input.isFullScreenMode!==this.getFullScreenMode()){this.setFullScreenMode(input.isFullScreenMode)}if(!_lodash.default.isEqual(input.query,this.getQuery())){this.setQuery(input.query)}this.changeListeners.forEach((function(listener){return listener({dirty:dirty})}));this.saveState()}},{key:"getFullScreenMode",value:function getFullScreenMode(){return this.appState.fullScreenMode}},{key:"setFullScreenMode",value:function setFullScreenMode(fullScreenMode){this.appState.fullScreenMode=fullScreenMode;this.saveState()}},{key:"resetState",value:function resetState(){this.savedDashboard.title=this.savedDashboard.lastSavedTitle;this.stateDefaults=(0,_lib.getAppStateDefaults)(this.savedDashboard,this.hideWriteControls);this.stateDefaults.query=this.lastSavedDashboardFilters.query;this.stateDefaults.filters=_toConsumableArray(this.getLastSavedFilterBars());this.isDirty=false;this.appState.setDefaults(this.stateDefaults);this.appState.reset();this.stateMonitor.setInitialState(this.appState.toJSON())}},{key:"getFilterState",value:function getFilterState(){return{timeTo:this.savedDashboard.timeTo,timeFrom:this.savedDashboard.timeFrom,filterBars:this.savedDashboard.getFilters(),query:this.savedDashboard.getQuery()}}},{key:"getTitle",value:function getTitle(){return this.appState.title}},{key:"isSaved",value:function isSaved(){return!!this.savedDashboard.id}},{key:"isNew",value:function isNew(){return!this.isSaved()}},{key:"getDescription",value:function getDescription(){return this.appState.description}},{key:"setDescription",value:function setDescription(description){this.appState.description=description;this.saveState()}},{key:"setTitle",value:function setTitle(title){this.appState.title=title;this.savedDashboard.title=title;this.saveState()}},{key:"getAppState",value:function getAppState(){return this.appState}},{key:"getQuery",value:function getQuery(){return(0,_legacy_imports.migrateLegacyQuery)(this.appState.query)}},{key:"getSavedQueryId",value:function getSavedQueryId(){return this.appState.savedQuery}},{key:"setSavedQueryId",value:function setSavedQueryId(id){this.appState.savedQuery=id;this.saveState()}},{key:"getUseMargins",value:function getUseMargins(){return this.appState.options.useMargins===undefined?false:this.appState.options.useMargins}},{key:"setUseMargins",value:function setUseMargins(useMargins){this.appState.options.useMargins=useMargins;this.saveState()}},{key:"getHidePanelTitles",value:function getHidePanelTitles(){return this.appState.options.hidePanelTitles}},{key:"setHidePanelTitles",value:function setHidePanelTitles(hidePanelTitles){this.appState.options.hidePanelTitles=hidePanelTitles;this.saveState()}},{key:"getTimeRestore",value:function getTimeRestore(){return this.appState.timeRestore}},{key:"setTimeRestore",value:function setTimeRestore(timeRestore){this.appState.timeRestore=timeRestore;this.saveState()}},{key:"getIsTimeSavedWithDashboard",value:function getIsTimeSavedWithDashboard(){return this.savedDashboard.timeRestore}},{key:"getLastSavedFilterBars",value:function getLastSavedFilterBars(){return this.lastSavedDashboardFilters.filterBars}},{key:"getLastSavedQuery",value:function getLastSavedQuery(){return this.lastSavedDashboardFilters.query}},{key:"getQueryChanged",value:function getQueryChanged(){var currentQuery=this.appState.query;var lastSavedQuery=this.getLastSavedQuery();var query=(0,_legacy_imports.migrateLegacyQuery)(currentQuery);var isLegacyStringQuery=_lodash.default.isString(lastSavedQuery)&&_lodash.default.isPlainObject(currentQuery)&&_lodash.default.has(currentQuery,"query");if(isLegacyStringQuery){return lastSavedQuery!==query.query}return!_lodash.default.isEqual(currentQuery,lastSavedQuery)}},{key:"getFilterBarChanged",value:function getFilterBarChanged(){return!_lodash.default.isEqual(_filter_utils.FilterUtils.cleanFiltersForComparison(this.appState.filters),_filter_utils.FilterUtils.cleanFiltersForComparison(this.getLastSavedFilterBars()))}},{key:"getTimeChanged",value:function getTimeChanged(timeFilter){return!_filter_utils.FilterUtils.areTimesEqual(this.lastSavedDashboardFilters.timeFrom,timeFilter.getTime().from)||!_filter_utils.FilterUtils.areTimesEqual(this.lastSavedDashboardFilters.timeTo,timeFilter.getTime().to)}},{key:"getViewMode",value:function getViewMode(){return this.hideWriteControls?_public.ViewMode.VIEW:this.appState.viewMode}},{key:"getIsViewMode",value:function getIsViewMode(){return this.getViewMode()===_public.ViewMode.VIEW}},{key:"getIsEditMode",value:function getIsEditMode(){return this.getViewMode()===_public.ViewMode.EDIT}},{key:"getIsDirty",value:function getIsDirty(timeFilter){var hasTimeFilterChanged=timeFilter?this.getFiltersChanged(timeFilter):false;return this.getIsEditMode()&&(this.isDirty||hasTimeFilterChanged)}},{key:"getPanels",value:function getPanels(){return this.appState.panels}},{key:"updatePanel",value:function updatePanel(panelIndex,panelAttributes){var foundPanel=this.getPanels().find((function(panel){return panel.panelIndex===panelIndex}));Object.assign(foundPanel,panelAttributes);this.saveState();return foundPanel}},{key:"getChangedFilterTypes",value:function getChangedFilterTypes(timeFilter){var changedFilters=[];if(this.getFilterBarChanged()){changedFilters.push("filter")}if(this.getQueryChanged()){changedFilters.push("query")}if(this.savedDashboard.timeRestore&&this.getTimeChanged(timeFilter)){changedFilters.push("time range")}return changedFilters}},{key:"getFiltersChanged",value:function getFiltersChanged(timeFilter){return this.getChangedFilterTypes(timeFilter).length>0}},{key:"syncTimefilterWithDashboard",value:function syncTimefilterWithDashboard(timeFilter){if(!this.getIsTimeSavedWithDashboard()){throw new Error(_i18n.i18n.translate("kbn.dashboard.stateManager.timeNotSavedWithDashboardErrorMessage",{defaultMessage:"The time is not saved with this dashboard so should not be synced."}))}if(this.savedDashboard.timeFrom&&this.savedDashboard.timeTo){timeFilter.setTime({from:this.savedDashboard.timeFrom,to:this.savedDashboard.timeTo})}if(this.savedDashboard.refreshInterval){timeFilter.setRefreshInterval(this.savedDashboard.refreshInterval)}}},{key:"saveState",value:function saveState(){this.appState.save()}},{key:"setQuery",value:function setQuery(query){this.appState.query=query;this.saveState()}},{key:"applyFilters",value:function applyFilters(query,filters){this.appState.query=query;this.savedDashboard.searchSource.setField("query",query);this.savedDashboard.searchSource.setField("filter",filters);this.saveState()}},{key:"switchViewMode",value:function switchViewMode(newMode){this.appState.viewMode=newMode;this.saveState()}},{key:"destroy",value:function destroy(){if(this.stateMonitor){this.stateMonitor.destroy()}this.savedDashboard.destroy()}}]);return DashboardStateManager}();exports.DashboardStateManager=DashboardStateManager},7879:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTopNavConfig=getTopNavConfig;var _i18n=__webpack_require__(2);var _public=__webpack_require__(229);var _top_nav_ids=__webpack_require__(7415);function getTopNavConfig(dashboardMode,actions,hideWriteControls){switch(dashboardMode){case _public.ViewMode.VIEW:return hideWriteControls?[getFullScreenConfig(actions[_top_nav_ids.TopNavIds.FULL_SCREEN]),getShareConfig(actions[_top_nav_ids.TopNavIds.SHARE])]:[getFullScreenConfig(actions[_top_nav_ids.TopNavIds.FULL_SCREEN]),getShareConfig(actions[_top_nav_ids.TopNavIds.SHARE]),getCloneConfig(actions[_top_nav_ids.TopNavIds.CLONE]),getEditConfig(actions[_top_nav_ids.TopNavIds.ENTER_EDIT_MODE])];case _public.ViewMode.EDIT:return[getSaveConfig(actions[_top_nav_ids.TopNavIds.SAVE]),getViewConfig(actions[_top_nav_ids.TopNavIds.EXIT_EDIT_MODE]),getAddConfig(actions[_top_nav_ids.TopNavIds.ADD]),getOptionsConfig(actions[_top_nav_ids.TopNavIds.OPTIONS]),getShareConfig(actions[_top_nav_ids.TopNavIds.SHARE])];default:return[]}}function getFullScreenConfig(action){return{id:"full-screen",label:_i18n.i18n.translate("kbn.dashboard.topNave.fullScreenButtonAriaLabel",{defaultMessage:"full screen"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.fullScreenConfigDescription",{defaultMessage:"Full Screen Mode"}),testId:"dashboardFullScreenMode",run:action}}function getEditConfig(action){return{id:"edit",label:_i18n.i18n.translate("kbn.dashboard.topNave.editButtonAriaLabel",{defaultMessage:"edit"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.editConfigDescription",{defaultMessage:"Switch to edit mode"}),testId:"dashboardEditMode",className:"eui-hideFor--s eui-hideFor--xs",run:action}}function getSaveConfig(action){return{id:"save",label:_i18n.i18n.translate("kbn.dashboard.topNave.saveButtonAriaLabel",{defaultMessage:"save"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.saveConfigDescription",{defaultMessage:"Save your dashboard"}),testId:"dashboardSaveMenuItem",run:action}}function getViewConfig(action){return{id:"cancel",label:_i18n.i18n.translate("kbn.dashboard.topNave.cancelButtonAriaLabel",{defaultMessage:"cancel"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.viewConfigDescription",{defaultMessage:"Cancel editing and switch to view-only mode"}),testId:"dashboardViewOnlyMode",run:action}}function getCloneConfig(action){return{id:"clone",label:_i18n.i18n.translate("kbn.dashboard.topNave.cloneButtonAriaLabel",{defaultMessage:"clone"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.cloneConfigDescription",{defaultMessage:"Create a copy of your dashboard"}),testId:"dashboardClone",run:action}}function getAddConfig(action){return{id:"add",label:_i18n.i18n.translate("kbn.dashboard.topNave.addButtonAriaLabel",{defaultMessage:"add"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.addConfigDescription",{defaultMessage:"Add a panel to the dashboard"}),testId:"dashboardAddPanelButton",run:action}}function getShareConfig(action){return{id:"share",label:_i18n.i18n.translate("kbn.dashboard.topNave.shareButtonAriaLabel",{defaultMessage:"share"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.shareConfigDescription",{defaultMessage:"Share Dashboard"}),testId:"shareTopNavButton",run:action}}function getOptionsConfig(action){return{id:"options",label:_i18n.i18n.translate("kbn.dashboard.topNave.optionsButtonAriaLabel",{defaultMessage:"options"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.optionsConfigDescription",{defaultMessage:"Options"}),testId:"dashboardOptionsButton",run:action}}},7880:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDashboardTitle=getDashboardTitle;var _i18n=__webpack_require__(2);var _public=__webpack_require__(229);function getDashboardTitle(title,viewMode,isDirty,isNew){var isEditMode=viewMode===_public.ViewMode.EDIT;var displayTitle;var newDashboardTitle=_i18n.i18n.translate("kbn.dashboard.savedDashboard.newDashboardTitle",{defaultMessage:"New Dashboard"});var dashboardTitle=isNew?newDashboardTitle:title;if(isEditMode&&isDirty){displayTitle=_i18n.i18n.translate("kbn.dashboard.strings.dashboardUnsavedEditTitle",{defaultMessage:"Editing {title} (unsaved)",values:{title:dashboardTitle}})}else if(isEditMode){displayTitle=_i18n.i18n.translate("kbn.dashboard.strings.dashboardEditTitle",{defaultMessage:"Editing {title}",values:{title:dashboardTitle}})}else{displayTitle=dashboardTitle}return displayTitle}},7881:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardListing=exports.EMPTY_FILTER=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _react2=__webpack_require__(4);var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);var _public=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var EMPTY_FILTER="";exports.EMPTY_FILTER=EMPTY_FILTER;var DashboardListing=function(_React$Component){_inherits(DashboardListing,_React$Component);function DashboardListing(props){_classCallCheck(this,DashboardListing);return _possibleConstructorReturn(this,_getPrototypeOf(DashboardListing).call(this,props))}_createClass(DashboardListing,[{key:"render",value:function render(){return _react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_public.TableListView,{headingId:"dashboardListingHeading",createItem:this.props.hideWriteControls?null:this.props.createItem,findItems:this.props.findItems,deleteItems:this.props.hideWriteControls?null:this.props.deleteItems,editItem:this.props.hideWriteControls?null:this.props.editItem,tableColumns:this.getTableColumns(),listingLimit:this.props.listingLimit,initialFilter:this.props.initialFilter,noItemsFragment:this.getNoItemsMessage(),entityName:_i18n.i18n.translate("kbn.dashboard.listing.table.entityName",{defaultMessage:"dashboard"}),entityNamePlural:_i18n.i18n.translate("kbn.dashboard.listing.table.entityNamePlural",{defaultMessage:"dashboards"}),tableListTitle:_i18n.i18n.translate("kbn.dashboard.listing.dashboardsTitle",{defaultMessage:"Dashboards"}),toastNotifications:this.props.core.notifications.toasts,uiSettings:this.props.core.uiSettings}))}},{key:"getNoItemsMessage",value:function getNoItemsMessage(){if(this.props.hideWriteControls){return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"visualizeApp",title:_react.default.createElement("h1",{id:"dashboardListingHeading"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.listing.noItemsMessage",defaultMessage:"Looks like you don't have any dashboards."}))}))}return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"dashboardApp",title:_react.default.createElement("h1",{id:"dashboardListingHeading"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.title",defaultMessage:"Create your first dashboard"})),body:_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.combineDataViewFromKibanaAppDescription",defaultMessage:"You can combine data views from any Kibana app into one dashboard and see everything in one place."})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.newToKibanaDescription",defaultMessage:"New to Kibana? {sampleDataInstallLink} to take a test drive.",values:{sampleDataInstallLink:_react.default.createElement(_eui.EuiLink,{href:"#/home/tutorial_directory/sampleData"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.sampleDataInstallLinkText",defaultMessage:"Install some sample data"}))}}))),actions:_react.default.createElement(_eui.EuiButton,{onClick:this.props.createItem,fill:true,iconType:"plusInCircle","data-test-subj":"createDashboardPromptButton"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.createButtonLabel",defaultMessage:"Create new dashboard"}))}))}},{key:"getTableColumns",value:function getTableColumns(){var _this=this;var tableColumns=[{field:"title",name:_i18n.i18n.translate("kbn.dashboard.listing.table.titleColumnName",{defaultMessage:"Title"}),sortable:true,render:function render(field,record){return _react.default.createElement(_eui.EuiLink,{href:_this.props.getViewUrl(record),"data-test-subj":"dashboardListingTitleLink-".concat(record.title.split(" ").join("-"))},field)}},{field:"description",name:_i18n.i18n.translate("kbn.dashboard.listing.table.descriptionColumnName",{defaultMessage:"Description"}),dataType:"string",sortable:true}];return tableColumns}}]);return DashboardListing}(_react.default.Component);exports.DashboardListing=DashboardListing;DashboardListing.propTypes={createItem:_propTypes.default.func.isRequired,findItems:_propTypes.default.func.isRequired,deleteItems:_propTypes.default.func.isRequired,editItem:_propTypes.default.func.isRequired,getViewUrl:_propTypes.default.func.isRequired,listingLimit:_propTypes.default.number.isRequired,hideWriteControls:_propTypes.default.bool.isRequired,initialFilter:_propTypes.default.string};DashboardListing.defaultProps={initialFilter:EMPTY_FILTER}},7882:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addHelpMenuToAppChrome=addHelpMenuToAppChrome;var _i18n=__webpack_require__(2);function addHelpMenuToAppChrome(chrome,docLinks){chrome.setHelpExtension({appName:_i18n.i18n.translate("kbn.dashboard.helpMenu.appName",{defaultMessage:"Dashboards"}),links:[{linkType:"documentation",href:"".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(docLinks.DOC_LINK_VERSION,"/dashboard.html")}]})}},7883:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syncOnMount=syncOnMount;function syncOnMount(globalState,_ref){var _ref$query=_ref.query,filterManager=_ref$query.filterManager,timefilter=_ref$query.timefilter.timefilter;globalState.fetch();var hasGlobalURLState=Boolean(Object.keys(globalState.toObject()).length);if(!globalState.time){globalState.time=timefilter.getTime()}if(!globalState.refreshInterval){globalState.refreshInterval=timefilter.getRefreshInterval()}if(!globalState.filters&&filterManager.getGlobalFilters().length>0){globalState.filters=filterManager.getGlobalFilters()}if(hasGlobalURLState){globalState.$inheritedGlobalState=true}globalState.save()}},8791:function(module,exports,__webpack_require__){module.exports=__webpack_require__(17)(3124)}}]);