/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[56],{7170:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSort=getSort;var _lodash=_interopRequireDefault(__webpack_require__(3));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function isSortable(field,indexPattern){return indexPattern.fields.getByName(field)&&indexPattern.fields.getByName(field).sortable}function createSortObject(sortPair,indexPattern){if(Array.isArray(sortPair)&&sortPair.length===2&&isSortable(sortPair[0],indexPattern)){var _sortPair=_slicedToArray(sortPair,2),field=_sortPair[0],direction=_sortPair[1];return _defineProperty({},field,direction)}else if(_lodash.default.isPlainObject(sortPair)&&isSortable(Object.keys(sortPair)[0],indexPattern)){return sortPair}else{return undefined}}function getSort(sort,indexPattern){var defaultSortOrder=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"desc";var sortObjects;if(Array.isArray(sort)){sortObjects=_lodash.default.compact(sort.map((function(sortPair){return createSortObject(sortPair,indexPattern)})))}if(!_lodash.default.isEmpty(sortObjects)){return sortObjects}else if(indexPattern.timeFieldName&&isSortable(indexPattern.timeFieldName,indexPattern)){return[_defineProperty({},indexPattern.timeFieldName,defaultSortOrder)]}else{return[{_score:"desc"}]}}getSort.array=function(sort,indexPattern,defaultSortOrder){return getSort(sort,indexPattern,defaultSortOrder).map((function(sortPair){return(0,_lodash.default)(sortPair).pairs().pop()}))}},7237:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addColumn=addColumn;exports.removeColumn=removeColumn;exports.moveColumn=moveColumn;function addColumn(columns,columnName){if(columns.includes(columnName)){return}columns.push(columnName)}function removeColumn(columns,columnName){if(!columns.includes(columnName)){return}columns.splice(columns.indexOf(columnName),1)}function moveColumn(columns,columnName,newIndex){if(newIndex<0){return}if(newIndex>=columns.length){return}if(!columns.includes(columnName)){return}columns.splice(columns.indexOf(columnName),1);columns.splice(newIndex,0,columnName)}},7238:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSortForSearchSource=getSortForSearchSource;var _get_sort=__webpack_require__(7170);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getSortForSearchSource(sort,indexPattern){if(!sort||!indexPattern){return[]}var timeFieldName=indexPattern.timeFieldName;return(0,_get_sort.getSort)(sort,indexPattern).map((function(sortPair){if(indexPattern.isTimeNanosBased()&&timeFieldName&&sortPair[timeFieldName]){return _defineProperty({},timeFieldName,{order:sortPair[timeFieldName],numeric_type:"date_nanos"})}return sortPair}))}},7380:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRootBreadcrumbs=getRootBreadcrumbs;exports.getSavedSearchBreadcrumbs=getSavedSearchBreadcrumbs;var _i18n=__webpack_require__(2);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getRootBreadcrumbs(){return[{text:_i18n.i18n.translate("kbn.discover.rootBreadcrumb",{defaultMessage:"Discover"}),href:"#/discover"}]}function getSavedSearchBreadcrumbs($route){return[].concat(_toConsumableArray(getRootBreadcrumbs()),[{text:$route.current.locals.savedObjects.savedSearch.id}])}},7381:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QUERY_PARAMETER_KEYS=exports.MIN_CONTEXT_SIZE=exports.MAX_CONTEXT_SIZE=void 0;var _state=__webpack_require__(7720);var MAX_CONTEXT_SIZE=1e4;exports.MAX_CONTEXT_SIZE=MAX_CONTEXT_SIZE;var MIN_CONTEXT_SIZE=0;exports.MIN_CONTEXT_SIZE=MIN_CONTEXT_SIZE;var QUERY_PARAMETER_KEYS=Object.keys((0,_state.createInitialQueryParametersState)());exports.QUERY_PARAMETER_KEYS=QUERY_PARAMETER_KEYS},7382:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractNanos=extractNanos;exports.convertIsoToNanosAsStr=convertIsoToNanosAsStr;exports.convertIsoToMillis=convertIsoToMillis;exports.convertTimeValueToIso=convertTimeValueToIso;var _moment=_interopRequireDefault(__webpack_require__(13));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function extractNanos(){var timeFieldValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var fieldParts=timeFieldValue.split(".");var fractionSeconds=fieldParts.length===2?fieldParts[1].replace("Z",""):"";return fractionSeconds.length!==9?fractionSeconds.padEnd(9,"0"):fractionSeconds}function convertIsoToNanosAsStr(isoValue){var nanos=extractNanos(isoValue);var millis=convertIsoToMillis(isoValue);return"".concat(millis).concat(nanos.substr(3,6))}function convertIsoToMillis(isoValue){var date=new Date(isoValue);return date.getTime()}function convertTimeValueToIso(timeValueMillis,nanosValue){if(!timeValueMillis){return null}var isoString=(0,_moment.default)(timeValueMillis).toISOString();if(!isoString){return null}else if(nanosValue!==""){return"".concat(isoString.substring(0,isoString.length-4)).concat(nanosValue,"Z")}return isoString}},7383:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LOADING_STATUS=exports.FAILURE_REASONS=void 0;var FAILURE_REASONS={UNKNOWN:"unknown",INVALID_TIEBREAKER:"invalid_tiebreaker"};exports.FAILURE_REASONS=FAILURE_REASONS;var LOADING_STATUS={FAILED:"failed",LOADED:"loaded",LOADING:"loading",UNINITIALIZED:"uninitialized"};exports.LOADING_STATUS=LOADING_STATUS},7720:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createInitialQueryParametersState=createInitialQueryParametersState;function createInitialQueryParametersState(){var defaultStepSize=arguments.length>0&&arguments[0]!==undefined?arguments[0]:5;var tieBreakerField=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"_doc";return{anchorType:null,anchorId:null,columns:[],defaultStepSize:defaultStepSize,filters:[],indexPatternId:null,predecessorCount:0,successorCount:0,sort:[],tieBreakerField:tieBreakerField}}},7721:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFirstSortableField=getFirstSortableField;exports.reverseSortDir=reverseSortDir;exports.SortDirection=void 0;var SortDirection;exports.SortDirection=SortDirection;(function(SortDirection){SortDirection["asc"]="asc";SortDirection["desc"]="desc"})(SortDirection||(exports.SortDirection=SortDirection={}));var META_FIELD_NAMES=["_seq_no","_doc","_uid"];function getFirstSortableField(indexPattern,fieldNames){var sortableFields=fieldNames.filter((function(fieldName){return META_FIELD_NAMES.includes(fieldName)||(indexPattern.fields.getByName(fieldName)||{sortable:false}).sortable}));return sortableFields[0]}function reverseSortDir(sortDirection){return sortDirection===SortDirection.asc?SortDirection.desc:SortDirection.asc}},7722:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getQueryParameterActions",{enumerable:true,get:function get(){return _actions.getQueryParameterActions}});Object.defineProperty(exports,"MAX_CONTEXT_SIZE",{enumerable:true,get:function get(){return _constants.MAX_CONTEXT_SIZE}});Object.defineProperty(exports,"MIN_CONTEXT_SIZE",{enumerable:true,get:function get(){return _constants.MIN_CONTEXT_SIZE}});Object.defineProperty(exports,"QUERY_PARAMETER_KEYS",{enumerable:true,get:function get(){return _constants.QUERY_PARAMETER_KEYS}});Object.defineProperty(exports,"createInitialQueryParametersState",{enumerable:true,get:function get(){return _state.createInitialQueryParametersState}});var _actions=__webpack_require__(9229);var _constants=__webpack_require__(7381);var _state=__webpack_require__(7720)},9207:function(module,exports,__webpack_require__){"use strict";__webpack_require__(9208);__webpack_require__(9218);__webpack_require__(9222);__webpack_require__(1073);__webpack_require__(9240)},9208:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(3));var _react=_interopRequireDefault(__webpack_require__(0));var _rxjs=__webpack_require__(37);var _moment=_interopRequireDefault(__webpack_require__(13));var _datemath=_interopRequireDefault(__webpack_require__(77));var _i18n=__webpack_require__(2);__webpack_require__(2308);__webpack_require__(9209);var _get_sort=__webpack_require__(7170);var _get_sort_for_search_source=__webpack_require__(7238);var columnActions=_interopRequireWildcard(__webpack_require__(7237));var _discover=_interopRequireDefault(__webpack_require__(9210));var _show_open_search_panel=__webpack_require__(9211);var _help_menu_util=__webpack_require__(9213);__webpack_require__(9214);var _get_painless_error=__webpack_require__(9216);var _kibana_services=__webpack_require__(200);var _breadcrumbs=__webpack_require__(7380);var _public=__webpack_require__(11);var _get_index_pattern_id=__webpack_require__(9217);var _public2=__webpack_require__(149);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var _getServices=(0,_kibana_services.getServices)(),core=_getServices.core,chrome=_getServices.chrome,data=_getServices.data,docTitle=_getServices.docTitle,filterManager=_getServices.filterManager,share=_getServices.share,timefilter=_getServices.timefilter,toastNotifications=_getServices.toastNotifications,uiSettings=_getServices.uiSettings;var getSavedQuery=data.query.savedQueries.getSavedQuery;var fetchStatuses={UNINITIALIZED:"uninitialized",LOADING:"loading",COMPLETE:"complete"};var app=(0,_kibana_services.getAngularModule)();app.run((function(globalState,$rootScope){(0,_kibana_services.registerTimefilterWithGlobalStateFactory)(timefilter,globalState,$rootScope)}));app.config((function($routeProvider){var defaults={requireDefaultIndex:true,requireUICapability:"discover.show",k7Breadcrumbs:function k7Breadcrumbs($route,$injector){return $injector.invoke($route.current.params.id?_breadcrumbs.getSavedSearchBreadcrumbs:_breadcrumbs.getRootBreadcrumbs)},badge:function badge(uiCapabilities){if(uiCapabilities.discover.save){return undefined}return{text:_i18n.i18n.translate("kbn.discover.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n.i18n.translate("kbn.discover.badge.readOnly.tooltip",{defaultMessage:"Unable to save searches"}),iconType:"glasses"}}};$routeProvider.when("/discover/:id?",_objectSpread({},defaults,{template:_discover.default,reloadOnSearch:false,resolve:{savedObjects:function savedObjects(redirectWhenMissing,$route,kbnUrl,Promise,$rootScope,State){var indexPatterns=(0,_kibana_services.getServices)().indexPatterns;var savedSearchId=$route.current.params.id;return(0,_kibana_services.ensureDefaultIndexPattern)(core,(0,_kibana_services.getServices)().data,$rootScope,kbnUrl).then((function(){return Promise.props({ip:indexPatterns.getCache().then((function(indexPatternList){var state=new State("_a",{});var id=(0,_get_index_pattern_id.getIndexPatternId)(state.index,indexPatternList,uiSettings.get("defaultIndex"));state.destroy();return Promise.props({list:indexPatternList,loaded:indexPatterns.get(id),stateVal:state.index,stateValFound:!!state.index&&id===state.index})})),savedSearch:(0,_kibana_services.getServices)().getSavedSearchById(savedSearchId,kbnUrl).then((function(savedSearch){if(savedSearchId){chrome.recentlyAccessed.add(savedSearch.getFullPath(),savedSearch.title,savedSearchId)}return savedSearch})).catch(redirectWhenMissing({search:"/discover","index-pattern":"/management/kibana/objects/savedSearches/"+$route.current.params.id}))})}))}}}))}));app.directive("discoverApp",(function(){return{restrict:"E",controllerAs:"discoverApp",controller:discoverController}}));function discoverController($element,$route,$scope,$timeout,$window,AppState,Private,Promise,config,kbnUrl,localStorage,uiCapabilities,getAppState,globalState){var _this=this;var responseHandler=(0,_kibana_services.vislibSeriesResponseHandlerProvider)().handler;var filterStateManager=new _public2.FilterStateManager(globalState,getAppState,filterManager);var inspectorAdapters={requests:new _kibana_services.RequestAdapter};var subscriptions=new _rxjs.Subscription;timefilter.disableTimeRangeSelector();timefilter.disableAutoRefreshSelector();$scope.timefilterUpdateHandler=function(ranges){timefilter.setTime({from:(0,_moment.default)(ranges.from).toISOString(),to:(0,_moment.default)(ranges.to).toISOString(),mode:"absolute"})};$scope.intervalOptions=_kibana_services.intervalOptions;$scope.showInterval=false;$scope.minimumVisibleRows=50;$scope.fetchStatus=fetchStatuses.UNINITIALIZED;$scope.refreshInterval=timefilter.getRefreshInterval();$scope.showSaveQuery=uiCapabilities.discover.saveQuery;$scope.$watch((function(){return uiCapabilities.discover.saveQuery}),(function(newCapability){$scope.showSaveQuery=newCapability}));$scope.intervalEnabled=function(interval){return interval.val!=="custom"};var savedSearch=$route.current.locals.savedObjects.savedSearch;var abortController;$scope.$on("$destroy",(function(){if(abortController)abortController.abort();savedSearch.destroy();subscriptions.unsubscribe();filterStateManager.destroy()}));var $appStatus=$scope.appStatus=this.appStatus={dirty:!savedSearch.id};var getTopNavLinks=function getTopNavLinks(){var newSearch={id:"new",label:_i18n.i18n.translate("kbn.discover.localMenu.localMenu.newSearchTitle",{defaultMessage:"New"}),description:_i18n.i18n.translate("kbn.discover.localMenu.newSearchDescription",{defaultMessage:"New Search"}),run:function run(){$scope.$evalAsync((function(){kbnUrl.change("/discover")}))},testId:"discoverNewButton"};var saveSearch={id:"save",label:_i18n.i18n.translate("kbn.discover.localMenu.saveTitle",{defaultMessage:"Save"}),description:_i18n.i18n.translate("kbn.discover.localMenu.saveSearchDescription",{defaultMessage:"Save Search"}),testId:"discoverSaveButton",run:function run(){var onSave,saveModal;return regeneratorRuntime.async((function run$(_context){while(1){switch(_context.prev=_context.next){case 0:onSave=function onSave(_ref){var newTitle=_ref.newTitle,newCopyOnSave=_ref.newCopyOnSave,isTitleDuplicateConfirmed=_ref.isTitleDuplicateConfirmed,onTitleDuplicate=_ref.onTitleDuplicate;var currentTitle=savedSearch.title;savedSearch.title=newTitle;savedSearch.copyOnSave=newCopyOnSave;var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return saveDataSource(saveOptions).then((function(response){if(!response.id||response.error){savedSearch.title=currentTitle}return response}))};saveModal=_react.default.createElement(_kibana_services.SavedObjectSaveModal,{onSave:onSave,onClose:function onClose(){},title:savedSearch.title,showCopyOnSave:savedSearch.id?true:false,objectType:"search",description:_i18n.i18n.translate("kbn.discover.localMenu.saveSaveSearchDescription",{defaultMessage:"Save your Discover search so you can use it in visualizations and dashboards"})});(0,_kibana_services.showSaveModal)(saveModal);case 3:case"end":return _context.stop()}}}))}};var openSearch={id:"open",label:_i18n.i18n.translate("kbn.discover.localMenu.openTitle",{defaultMessage:"Open"}),description:_i18n.i18n.translate("kbn.discover.localMenu.openSavedSearchDescription",{defaultMessage:"Open Saved Search"}),testId:"discoverOpenButton",run:function run(){(0,_show_open_search_panel.showOpenSearchPanel)({makeUrl:function makeUrl(searchId){return kbnUrl.eval("#/discover/{{id}}",{id:searchId})},I18nContext:core.i18n.Context})}};var shareSearch={id:"share",label:_i18n.i18n.translate("kbn.discover.localMenu.shareTitle",{defaultMessage:"Share"}),description:_i18n.i18n.translate("kbn.discover.localMenu.shareSearchDescription",{defaultMessage:"Share Search"}),testId:"shareTopNavButton",run:function run(anchorElement){var sharingData;return regeneratorRuntime.async((function run$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return regeneratorRuntime.awrap(_this.getSharingData());case 2:sharingData=_context2.sent;share.toggleShareContextMenu({anchorElement:anchorElement,allowEmbed:false,allowShortUrl:uiCapabilities.discover.createShortUrl,shareableUrl:(0,_kibana_services.unhashUrl)(window.location.href),objectId:savedSearch.id,objectType:"search",sharingData:_objectSpread({},sharingData,{title:savedSearch.title}),isDirty:$appStatus.dirty});case 4:case"end":return _context2.stop()}}}))}};var inspectSearch={id:"inspect",label:_i18n.i18n.translate("kbn.discover.localMenu.inspectTitle",{defaultMessage:"Inspect"}),description:_i18n.i18n.translate("kbn.discover.localMenu.openInspectorForSearchDescription",{defaultMessage:"Open Inspector for search"}),testId:"openInspectorButton",run:function run(){(0,_kibana_services.getServices)().inspector.open(inspectorAdapters,{title:savedSearch.title})}};return[newSearch].concat(_toConsumableArray(uiCapabilities.discover.save?[saveSearch]:[]),[openSearch,shareSearch,inspectSearch])};$scope.topNavMenu=getTopNavLinks();$scope.searchSource=savedSearch.searchSource;$scope.indexPattern=resolveIndexPatternLoading();$scope.searchSource.setField("index",$scope.indexPattern).setField("highlightAll",true).setField("version",true);$scope.searchSource.setPreferredSearchStrategyId("default");var timeRangeSearchSource=savedSearch.searchSource.create();if((0,_kibana_services.isDefaultTypeIndexPattern)($scope.indexPattern)){timeRangeSearchSource.setField("filter",(function(){return timefilter.createFilter($scope.indexPattern)}))}$scope.searchSource.setParent(timeRangeSearchSource);var pageTitleSuffix=savedSearch.id&&savedSearch.title?": ".concat(savedSearch.title):"";chrome.docTitle.change("Discover".concat(pageTitleSuffix));var discoverBreadcrumbsTitle=_i18n.i18n.translate("kbn.discover.discoverBreadcrumbTitle",{defaultMessage:"Discover"});if(savedSearch.id&&savedSearch.title){chrome.setBreadcrumbs([{text:discoverBreadcrumbsTitle,href:"#/discover"},{text:savedSearch.title}])}else{chrome.setBreadcrumbs([{text:discoverBreadcrumbsTitle}])}var stateMonitor;var $state=$scope.state=new AppState(getStateDefaults());$scope.filters=filterManager.getFilters();$scope.screenTitle=savedSearch.title;$scope.onFiltersUpdated=function(filters){filterManager.setFilters(filters)};var getFieldCounts=function getFieldCounts(){return regeneratorRuntime.async((function getFieldCounts$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!($scope.fetchStatus===fetchStatuses.COMPLETE)){_context3.next=2;break}return _context3.abrupt("return",$scope.fieldCounts);case 2:_context3.next=4;return regeneratorRuntime.awrap(new Promise((function(resolve){var unwatch=$scope.$watch("fetchStatus",(function(newValue){if(newValue===fetchStatuses.COMPLETE){unwatch();resolve($scope.fieldCounts)}}))})));case 4:return _context3.abrupt("return",_context3.sent);case 5:case"end":return _context3.stop()}}}))};var getSharingDataFields=function getSharingDataFields(){var selectedFields,fieldCounts,timeFieldName,hideTimeColumn,fields;return regeneratorRuntime.async((function getSharingDataFields$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:selectedFields=$state.columns;if(!(selectedFields.length===1&&selectedFields[0]==="_source")){_context4.next=6;break}_context4.next=4;return regeneratorRuntime.awrap(getFieldCounts());case 4:fieldCounts=_context4.sent;return _context4.abrupt("return",{searchFields:null,selectFields:_lodash.default.keys(fieldCounts).sort()});case 6:timeFieldName=$scope.indexPattern.timeFieldName;hideTimeColumn=config.get("doc_table:hideTimeColumn");fields=timeFieldName&&!hideTimeColumn?[timeFieldName].concat(_toConsumableArray(selectedFields)):selectedFields;return _context4.abrupt("return",{searchFields:fields,selectFields:fields});case 10:case"end":return _context4.stop()}}}))};this.getSharingData=function _callee(){var searchSource,_ref2,searchFields,selectFields,body;return regeneratorRuntime.async((function _callee$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:searchSource=$scope.searchSource.createCopy();_context5.next=3;return regeneratorRuntime.awrap(getSharingDataFields());case 3:_ref2=_context5.sent;searchFields=_ref2.searchFields;selectFields=_ref2.selectFields;searchSource.setField("fields",searchFields);searchSource.setField("sort",(0,_get_sort_for_search_source.getSortForSearchSource)($state.sort,$scope.indexPattern));searchSource.setField("highlight",null);searchSource.setField("highlightAll",null);searchSource.setField("aggs",null);searchSource.setField("size",null);_context5.next=14;return regeneratorRuntime.awrap(searchSource.getSearchRequestBody());case 14:body=_context5.sent;return _context5.abrupt("return",{searchRequest:{index:searchSource.getField("index").title,body:body},fields:selectFields,metaFields:$scope.indexPattern.metaFields,conflictedTypesFields:$scope.indexPattern.fields.filter((function(f){return f.type==="conflict"})).map((function(f){return f.name})),indexPatternId:searchSource.getField("index").id});case 16:case"end":return _context5.stop()}}}))};$scope.uiState=$state.makeStateful("uiState");function getStateDefaults(){return{query:$scope.savedQuery&&$scope.savedQuery.attributes.query||$scope.searchSource.getField("query")||{query:"",language:localStorage.get("kibana.userQueryLanguage")||config.get("search:queryLanguage")},sort:_get_sort.getSort.array(savedSearch.sort,$scope.indexPattern,config.get("discover:sort:defaultOrder")),columns:savedSearch.columns.length>0?savedSearch.columns:config.get("defaultColumns").slice(),index:$scope.indexPattern.id,interval:"auto",filters:$scope.savedQuery&&$scope.savedQuery.attributes.filters||_lodash.default.cloneDeep($scope.searchSource.getOwnField("filter"))}}$state.index=$scope.indexPattern.id;$state.sort=_get_sort.getSort.array($state.sort,$scope.indexPattern);$scope.getBucketIntervalToolTipText=function(){return _i18n.i18n.translate("kbn.discover.bucketIntervalTooltip",{defaultMessage:"This interval creates {bucketsDescription} to show in the selected time range, so it has been scaled to {bucketIntervalDescription}",values:{bucketsDescription:$scope.bucketInterval.scale>1?_i18n.i18n.translate("kbn.discover.bucketIntervalTooltip.tooLargeBucketsText",{defaultMessage:"buckets that are too large"}):_i18n.i18n.translate("kbn.discover.bucketIntervalTooltip.tooManyBucketsText",{defaultMessage:"too many buckets"}),bucketIntervalDescription:$scope.bucketInterval.description}})};$scope.$watchCollection("state.columns",(function(){$state.save()}));$scope.opts={sampleSize:config.get("discover:sampleSize"),timefield:(0,_kibana_services.isDefaultTypeIndexPattern)($scope.indexPattern)&&$scope.indexPattern.timeFieldName,savedSearch:savedSearch,indexPatternList:$route.current.locals.savedObjects.ip.list};var shouldSearchOnPageLoad=function shouldSearchOnPageLoad(){if($scope.state.savedQuery){return false}return config.get("discover:searchOnPageLoad")||savedSearch.id!==undefined||_lodash.default.get($scope,"refreshInterval.pause")===false};var init=_lodash.default.once((function(){stateMonitor=_kibana_services.stateMonitorFactory.create($state,getStateDefaults());stateMonitor.onChange((function(status){$appStatus.dirty=status.dirty||!savedSearch.id}));$scope.$on("$destroy",(function(){return stateMonitor.destroy()}));$scope.updateDataSource().then((function(){subscriptions.add((0,_kibana_services.subscribeWithScope)($scope,timefilter.getAutoRefreshFetch$(),{next:$scope.fetch}));subscriptions.add((0,_kibana_services.subscribeWithScope)($scope,timefilter.getRefreshIntervalUpdate$(),{next:$scope.updateRefreshInterval}));subscriptions.add((0,_kibana_services.subscribeWithScope)($scope,timefilter.getTimeUpdate$(),{next:$scope.updateTime}));subscriptions.add((0,_kibana_services.subscribeWithScope)($scope,timefilter.getFetch$(),{next:$scope.fetch}));$scope.$watchCollection("state.sort",(function(sort){if(!sort)return;var currentSort=_get_sort.getSort.array($scope.searchSource.getField("sort"),$scope.indexPattern);if(!_kibana_services.angular.equals(sort,currentSort))$scope.fetch()}));subscriptions.add((0,_kibana_services.subscribeWithScope)($scope,filterManager.getUpdates$(),{next:function next(){$scope.filters=filterManager.getFilters();$scope.updateDataSource().then((function(){$state.save()}))}}));subscriptions.add((0,_kibana_services.subscribeWithScope)($scope,filterManager.getFetches$(),{next:$scope.fetch}));$scope.$listen($state,"fetch_with_changes",(function(diff){if(diff.indexOf("query")>=0)$scope.fetch()}));$scope.$watch("opts.timefield",(function(timefield){$scope.enableTimeRangeSelector=!!timefield}));$scope.$watch("state.interval",(function(newInterval,oldInterval){if(newInterval!==oldInterval){$scope.fetch()}}));$scope.$watch("vis.aggs",(function(){if(!$scope.opts.timefield)return;var buckets=$scope.vis.getAggConfig().bySchemaGroup("buckets");if(buckets&&buckets.length===1){$scope.bucketInterval=buckets[0].buckets.getInterval()}}));$scope.$watch("state.query",(function(newQuery,oldQuery){if(!_lodash.default.isEqual(newQuery,oldQuery)){var query=(0,_kibana_services.migrateLegacyQuery)(newQuery);if(!_lodash.default.isEqual(query,newQuery)){$scope.updateQueryAndFetch({query:query})}}}));$scope.$watchMulti(["rows","fetchStatus"],function updateResultState(){var prev={};var status={UNINITIALIZED:"uninitialized",LOADING:"loading",READY:"ready",NO_RESULTS:"none"};function pick(rows,oldRows,fetchStatus){if(rows==null&&oldRows==null&&shouldSearchOnPageLoad()){return status.LOADING}if(fetchStatus===fetchStatuses.UNINITIALIZED){return status.UNINITIALIZED}var rowsEmpty=_lodash.default.isEmpty(rows);if(rowsEmpty&&fetchStatus===fetchStatuses.LOADING)return status.LOADING;else if(!rowsEmpty)return status.READY;else return status.NO_RESULTS}return function(){var current={rows:$scope.rows,fetchStatus:$scope.fetchStatus};$scope.resultState=pick(current.rows,prev.rows,current.fetchStatus,prev.fetchStatus);prev=current}}());if($scope.opts.timefield){setupVisualization();$scope.updateTime()}init.complete=true;$state.replace();if(shouldSearchOnPageLoad()){$scope.fetch()}}))}));function saveDataSource(saveOptions){var id;return regeneratorRuntime.async((function saveDataSource$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return regeneratorRuntime.awrap($scope.updateDataSource());case 2:savedSearch.columns=$scope.state.columns;savedSearch.sort=$scope.state.sort;_context6.prev=4;_context6.next=7;return regeneratorRuntime.awrap(savedSearch.save(saveOptions));case 7:id=_context6.sent;$scope.$evalAsync((function(){stateMonitor.setInitialState($state.toJSON());if(id){toastNotifications.addSuccess({title:_i18n.i18n.translate("kbn.discover.notifications.savedSearchTitle",{defaultMessage:"Search '{savedSearchTitle}' was saved",values:{savedSearchTitle:savedSearch.title}}),"data-test-subj":"saveSearchSuccess"});if(savedSearch.id!==$route.current.params.id){kbnUrl.change("/discover/{{id}}",{id:savedSearch.id})}else{$state.setDefaults(getStateDefaults());docTitle.change(savedSearch.lastSavedTitle)}}}));return _context6.abrupt("return",{id:id});case 12:_context6.prev=12;_context6.t0=_context6["catch"](4);toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.discover.notifications.notSavedSearchTitle",{defaultMessage:"Search '{savedSearchTitle}' was not saved.",values:{savedSearchTitle:savedSearch.title}}),text:_context6.t0.message});return _context6.abrupt("return",{error:_context6.t0});case 16:case"end":return _context6.stop()}}}),null,null,[[4,12]])}$scope.opts.fetch=$scope.fetch=function(){if(!init.complete)return;$scope.fetchError=undefined;$scope.updateTime();if(abortController)abortController.abort();abortController=new AbortController;$scope.updateDataSource().then(setupVisualization).then((function(){$state.save();$scope.fetchStatus=fetchStatuses.LOADING;logInspectorRequest();return $scope.searchSource.fetch({abortSignal:abortController.signal})})).then(onResults).catch((function(error){if(error instanceof Error&&error.name==="AbortError")return;var fetchError=(0,_get_painless_error.getPainlessError)(error);if(fetchError){$scope.fetchError=fetchError}else{toastNotifications.addError(error,{title:_i18n.i18n.translate("kbn.discover.errorLoadingData",{defaultMessage:"Error loading data"}),toastMessage:error.shortMessage})}}))};$scope.updateQueryAndFetch=function(_ref3){var query=_ref3.query,dateRange=_ref3.dateRange;timefilter.setTime(dateRange);$state.query=query;$scope.fetch()};function onResults(resp){logInspectorResponse(resp);if($scope.opts.timefield){var tabifiedData=(0,_kibana_services.tabifyAggResponse)($scope.vis.aggs,resp);$scope.searchSource.rawResponse=resp;Promise.resolve((0,_kibana_services.buildVislibDimensions)($scope.vis,{timeRange:$scope.timeRange,searchSource:$scope.searchSource})).then((function(resp){return responseHandler(tabifiedData,resp)})).then((function(resp){$scope.histogramData=resp}))}$scope.hits=resp.hits.total;$scope.rows=resp.hits.hits;var counts=$scope.fieldCounts=$scope.fieldCounts||{};$scope.rows.forEach((function(hit){var fields=Object.keys($scope.indexPattern.flattenHit(hit));fields.forEach((function(fieldName){counts[fieldName]=(counts[fieldName]||0)+1}))}));$scope.fetchStatus=fetchStatuses.COMPLETE}var inspectorRequest;function logInspectorRequest(){inspectorAdapters.requests.reset();var title=_i18n.i18n.translate("kbn.discover.inspectorRequestDataTitle",{defaultMessage:"data"});var description=_i18n.i18n.translate("kbn.discover.inspectorRequestDescription",{defaultMessage:"This request queries Elasticsearch to fetch the data for the search."});inspectorRequest=inspectorAdapters.requests.start(title,{description:description});inspectorRequest.stats((0,_kibana_services.getRequestInspectorStats)($scope.searchSource));$scope.searchSource.getSearchRequestBody().then((function(body){inspectorRequest.json(body)}))}function logInspectorResponse(resp){inspectorRequest.stats((0,_kibana_services.getResponseInspectorStats)($scope.searchSource,resp)).ok({json:resp})}$scope.updateTime=function(){$scope.timeRange={from:_datemath.default.parse(timefilter.getTime().from),to:_datemath.default.parse(timefilter.getTime().to,{roundUp:true})};$scope.time=timefilter.getTime()};$scope.toMoment=function(datetime){return(0,_moment.default)(datetime).format(config.get("dateFormat"))};$scope.updateRefreshInterval=function(){var newInterval=timefilter.getRefreshInterval();var shouldFetch=_lodash.default.get($scope,"refreshInterval.pause")===true&&newInterval.pause===false;$scope.refreshInterval=newInterval;if(shouldFetch){$scope.fetch()}};$scope.onRefreshChange=function(_ref4){var isPaused=_ref4.isPaused,refreshInterval=_ref4.refreshInterval;timefilter.setRefreshInterval({pause:isPaused,value:refreshInterval?refreshInterval:$scope.refreshInterval.value})};$scope.resetQuery=function(){kbnUrl.change("/discover/{{id}}",{id:$route.current.params.id})};$scope.newQuery=function(){kbnUrl.change("/discover")};$scope.updateDataSource=Promise.method((function updateDataSource(){var indexPattern=$scope.indexPattern,searchSource=$scope.searchSource;searchSource.setField("size",$scope.opts.sampleSize).setField("sort",(0,_get_sort_for_search_source.getSortForSearchSource)($state.sort,indexPattern)).setField("query",!$state.query?null:$state.query).setField("filter",filterManager.getFilters())}));$scope.setSortOrder=function setSortOrder(sortPair){$scope.state.sort=sortPair};$scope.filterQuery=function(field,values,operation){$scope.indexPattern.popularizeField(field,1);var newFilters=(0,_public.generateFilters)(filterManager,field,values,operation,$scope.indexPattern.id);return filterManager.addFilters(newFilters)};$scope.addColumn=function addColumn(columnName){$scope.indexPattern.popularizeField(columnName,1);columnActions.addColumn($scope.state.columns,columnName)};$scope.removeColumn=function removeColumn(columnName){$scope.indexPattern.popularizeField(columnName,1);columnActions.removeColumn($scope.state.columns,columnName)};$scope.moveColumn=function moveColumn(columnName,newIndex){columnActions.moveColumn($scope.state.columns,columnName,newIndex)};$scope.scrollToTop=function(){$window.scrollTo(0,0)};$scope.scrollToBottom=function(){$timeout((function(){$element.find("#discoverBottomMarker").focus()}),0)};$scope.showAllRows=function(){$scope.minimumVisibleRows=$scope.hits};$scope.onQuerySaved=function(savedQuery){$scope.savedQuery=savedQuery};$scope.onSavedQueryUpdated=function(savedQuery){$scope.savedQuery=_objectSpread({},savedQuery)};$scope.onClearSavedQuery=function(){delete $scope.savedQuery;delete $state.savedQuery;$state.query={query:"",language:localStorage.get("kibana.userQueryLanguage")||config.get("search:queryLanguage")};filterManager.removeAll();$state.save();$scope.fetch()};var updateStateFromSavedQuery=function updateStateFromSavedQuery(savedQuery){$state.query=savedQuery.attributes.query;$state.save();filterManager.setFilters(savedQuery.attributes.filters||[]);if(savedQuery.attributes.timefilter){timefilter.setTime({from:savedQuery.attributes.timefilter.from,to:savedQuery.attributes.timefilter.to});if(savedQuery.attributes.timefilter.refreshInterval){timefilter.setRefreshInterval(savedQuery.attributes.timefilter.refreshInterval)}}$scope.fetch()};$scope.$watch("savedQuery",(function(newSavedQuery){if(!newSavedQuery)return;$state.savedQuery=newSavedQuery.id;$state.save();updateStateFromSavedQuery(newSavedQuery)}));$scope.$watch("state.savedQuery",(function(newSavedQueryId){if(!newSavedQueryId){$scope.savedQuery=undefined;return}if(!$scope.savedQuery||newSavedQueryId!==$scope.savedQuery.id){getSavedQuery(newSavedQueryId).then((function(savedQuery){$scope.$evalAsync((function(){$scope.savedQuery=savedQuery;updateStateFromSavedQuery(savedQuery)}))}))}}));function setupVisualization(){var visStateAggs,visState,visSavedObject;return regeneratorRuntime.async((function setupVisualization$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if($scope.opts.timefield){_context7.next=2;break}return _context7.abrupt("return");case 2:visStateAggs=[{type:"count",schema:"metric"},{type:"date_histogram",schema:"segment",params:{field:$scope.opts.timefield,interval:$state.interval,timeRange:timefilter.getTime()}}];if(!$scope.vis){_context7.next=8;break}visState=$scope.vis.getEnabledState();visState.aggs=visStateAggs;$scope.vis.setState(visState);return _context7.abrupt("return");case 8:visSavedObject={indexPattern:$scope.indexPattern.id,visState:{type:"histogram",title:savedSearch.title,params:{addLegend:false,addTimeMarker:true},aggs:visStateAggs}};$scope.vis=new _kibana_services.Vis($scope.searchSource.getField("index"),visSavedObject.visState);visSavedObject.vis=$scope.vis;$scope.searchSource.onRequestStart((function(searchSource,options){return $scope.vis.getAggConfig().onSearchRequestStart(searchSource,options)}));$scope.searchSource.setField("aggs",(function(){return $scope.vis.getAggConfig().toDsl()}));case 13:case"end":return _context7.stop()}}}))}function resolveIndexPatternLoading(){var _$route$current$local=$route.current.locals.savedObjects.ip,loadedIndexPattern=_$route$current$local.loaded,stateVal=_$route$current$local.stateVal,stateValFound=_$route$current$local.stateValFound;var ownIndexPattern=$scope.searchSource.getOwnField("index");if(ownIndexPattern&&!stateVal){return ownIndexPattern}if(stateVal&&!stateValFound){var warningTitle=_i18n.i18n.translate("kbn.discover.valueIsNotConfiguredIndexPatternIDWarningTitle",{defaultMessage:"{stateVal} is not a configured index pattern ID",values:{stateVal:'"'.concat(stateVal,'"')}});if(ownIndexPattern){toastNotifications.addWarning({title:warningTitle,text:_i18n.i18n.translate("kbn.discover.showingSavedIndexPatternWarningDescription",{defaultMessage:'Showing the saved index pattern: "{ownIndexPatternTitle}" ({ownIndexPatternId})',values:{ownIndexPatternTitle:ownIndexPattern.title,ownIndexPatternId:ownIndexPattern.id}})});return ownIndexPattern}toastNotifications.addWarning({title:warningTitle,text:_i18n.i18n.translate("kbn.discover.showingDefaultIndexPatternWarningDescription",{defaultMessage:'Showing the default index pattern: "{loadedIndexPatternTitle}" ({loadedIndexPatternId})',values:{loadedIndexPatternTitle:loadedIndexPattern.title,loadedIndexPatternId:loadedIndexPattern.id}})})}return loadedIndexPattern}$scope.isUnsupportedIndexPattern=!(0,_kibana_services.isDefaultTypeIndexPattern)($route.current.locals.savedObjects.ip.loaded)&&!(0,_kibana_services.hasSearchStategyForIndexPattern)($route.current.locals.savedObjects.ip.loaded);if($scope.isUnsupportedIndexPattern){$scope.unsupportedIndexPatternType=$route.current.locals.savedObjects.ip.loaded.type;return}(0,_help_menu_util.addHelpMenuToAppChrome)(chrome);init()}},9209:function(module,exports,__webpack_require__){"use strict";__webpack_require__(2306)},9210:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<discover-app class="app-container">\n  <h1 class="euiScreenReaderOnly">{{screenTitle}}</h1>\n\n  \x3c!-- Local nav. --\x3e\n  <kbn-top-nav\n    app-name="\'discover\'"\n    config="topNavMenu"\n    show-search-bar="true"\n    show-date-picker="enableTimeRangeSelector"\n    show-save-query="showSaveQuery"\n    query="state.query"\n    saved-query="savedQuery"\n    screen-title="screenTitle"\n    on-query-submit="updateQueryAndFetch"\n    index-patterns="[indexPattern]"\n    filters="filters"\n    on-filters-updated="onFiltersUpdated"\n    date-range-from="time.from"\n    date-range-to="time.to"\n    is-refresh-paused="refreshInterval.pause"\n    refresh-interval="refreshInterval.value"\n    on-refresh-change="onRefreshChange"\n    on-saved="onQuerySaved"\n    on-saved-query-updated="onSavedQueryUpdated"\n    on-clear-saved-query="onClearSavedQuery"\n  >\n  </kbn-top-nav>\n\n  <main class="container-fluid">\n    <div class="row">\n      <div class="col-md-2 sidebar-container collapsible-sidebar" id="discover-sidebar" data-test-subj="discover-sidebar">\n        <div class="dscFieldChooser">\n          <disc-field-chooser\n            columns="state.columns"\n            hits="rows"\n            field-counts="fieldCounts"\n            index-pattern="searchSource.getField(\'index\')"\n            index-pattern-list="opts.indexPatternList"\n            state="state"\n            on-add-field="addColumn"\n            on-add-filter="filterQuery"\n            on-remove-field="removeColumn"\n          >\n          </disc-field-chooser>\n        </div>\n      </div>\n\n      <div class="dscWrapper col-md-10">\n        <discover-unsupported-index-pattern\n          ng-if="isUnsupportedIndexPattern"\n          unsupported-type="unsupportedIndexPatternType"\n        ></discover-unsupported-index-pattern>\n\n        <discover-no-results\n          ng-show="resultState === \'none\'"\n          shard-failures="failures"\n          time-field-name="opts.timefield"\n          query-language="state.query.language"\n          get-doc-link="getDocLink"\n        ></discover-no-results>\n\n        <discover-uninitialized\n          ng-show="resultState === \'uninitialized\'"\n          on-refresh="fetch"\n        ></discover-uninitialized>\n\n        \x3c!-- loading --\x3e\n        <div ng-show="resultState === \'loading\'">\n          <discover-fetch-error\n            ng-show="fetchError"\n            fetch-error="fetchError"\n          ></discover-fetch-error>\n\n          <div ng-hide="fetchError" class="dscOverlay">\n            <h2\n              i18n-id="kbn.discover.searchingTitle"\n              i18n-default-message="Searching"\n              class="euiTitle euiTitle--small"\n            ></h2>\n            <div class="euiSpacer euiSpacer--m"></div>\n            <div\n              class="euiLoadingSpinner euiLoadingSpinner--large"\n              data-test-subj="loadingSpinner"\n            ></div>\n          </div>\n        </div>\n\n        <div class="dscWrapper__content" ng-show="resultState === \'ready\'">\n          \x3c!-- result --\x3e\n          <div class="dscResults">\n            <button\n              class="kuiButton kuiButton--basic kuiButton--iconText dscSkipButton"\n              ng-click="showAllRows(); scrollToBottom()"\n            >\n              <span class="kuiButton__inner">\n                <span aria-hidden="true" class="kuiButton__icon kuiIcon fa-chevron-down"></span>\n                <span\n                  i18n-id="kbn.discover.skipToBottomButtonLabel"\n                  i18n-default-message="Skip to bottom"\n                ></span>\n              </span>\n            </button>\n\n            <div class="dscResultCount">\n              <strong data-test-subj="discoverQueryHits">{{(hits || 0) | number:0}}</strong>\n              <span\n                class="dscResultHits"\n                i18n-id="kbn.discover.hitsPluralTitle"\n                i18n-default-message="{hits, plural, one {hit} other {hits}}"\n                i18n-values="{ hits }"\n              ></span>\n              <button\n                ng-if="opts.savedSearch.id"\n                class="kuiLink"\n                type="button"\n                id="reload_saved_search"\n                ng-click="resetQuery()"\n              >\n                {{::\'kbn.discover.reloadSavedSearchButton\' | i18n: {defaultMessage: \'Reset search\'} }}\n              </button>\n            </div>\n\n            <section\n              aria-label="{{::\'kbn.discover.histogramOfFoundDocumentsAriaLabel\' | i18n: {defaultMessage: \'Histogram of found documents\'} }}"\n              class="dscTimechart"\n              ng-if="opts.timefield"\n            >\n              <header class="dscTimechart__header">\n                <div class="small">\n                  <label\n                    for="dscResultsIntervalSelector"\n                    tooltip="{{::\'kbn.discover.howToChangeTheTimeTooltip\' | i18n: {defaultMessage: \'To change the time, click the calendar icon in the navigation bar\'} }}"\n                  >\n                    {{toMoment(timeRange.from)}} - {{toMoment(timeRange.to)}}\n                  </label>\n\n                  &mdash;\n\n                  <span class="form-inline">\n                    <select\n                      id="dscResultsIntervalSelector"\n                      class="dscResults__interval form-control"\n                      ng-model="state.interval"\n                      ng-options="interval.val as interval.display for interval in intervalOptions | filter: intervalEnabled"\n                      ng-blur="toggleInterval()"\n                      data-test-subj="discoverIntervalSelect"\n                    >\n                    </select>\n                    <span ng-if="bucketInterval.scaled">\n                      <icon-tip\n                        content="getBucketIntervalToolTipText()"\n                        position="\'top\'"\n                      ></icon-tip>\n                      <span\n                        i18n-id="kbn.discover.scaledToDescription"\n                        i18n-default-message="Scaled to {bucketIntervalDescription}"\n                        i18n-values="{\n                          bucketIntervalDescription: bucketInterval.description\n                        }"\n                      ></span>\n                    </span>\n                  </span>\n                </div>\n\n              </header>\n\n              <discover-histogram\n                class="dscHistogram"\n                ng-show="vis && rows.length !== 0"\n                chart-data="histogramData"\n                timefilter-update-handler="timefilterUpdateHandler"\n                watch-depth="reference"\n                data-test-subj="discoverChart"\n              ></discover-histogram>\n            </section>\n\n            <section\n              class="dscTable"\n              fixed-scroll\n              aria-labelledby="documentsAriaLabel"\n            >\n              <h2 class="euiScreenReaderOnly"\n                id="documentsAriaLabel"\n                i18n-id="kbn.discover.documentsAriaLabel"\n                i18n-default-message="Documents"\n              ></h2>\n              <doc-table\n                hits="rows"\n                index-pattern="indexPattern"\n                sorting="state.sort"\n                columns="state.columns"\n                infinite-scroll="true"\n                filter="filterQuery"\n                filters="state.filters"\n                data-shared-item\n                data-title="{{opts.savedSearch.lastSavedTitle}}"\n                data-description="{{opts.savedSearch.description}}"\n                minimum-visible-rows="minimumVisibleRows"\n                render-complete\n                on-add-column="addColumn"\n                on-change-sort-order="setSortOrder"\n                on-move-column="moveColumn"\n                on-remove-column="removeColumn"\n              ></doc-table>\n\n              <a tabindex="0" id="discoverBottomMarker"></a>\n\n              <div\n                ng-if="rows.length == opts.sampleSize"\n                class="dscTable__footer"\n              >\n                <span\n                  i18n-id="kbn.discover.howToSeeOtherMatchingDocumentsDescription"\n                  i18n-default-message="These are the first {sampleSize} documents matching\n                  your search, refine your search to see others. "\n                  i18n-values="{\n                    sampleSize: opts.sampleSize,\n                  }"\n                ></span>\n                <a\n                  kbn-accessible-click\n                  ng-click="scrollToTop()"\n                  i18n-id="kbn.discover.backToTopLinkText"\n                  i18n-default-message="Back to top."\n                ></a>\n              </div>\n            </section>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</discover-app>\n'},9211:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showOpenSearchPanel=showOpenSearchPanel;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(9));var _open_search_panel=__webpack_require__(9212);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isOpen=false;function showOpenSearchPanel(_ref){var makeUrl=_ref.makeUrl,I18nContext=_ref.I18nContext;if(isOpen){return}isOpen=true;var container=document.createElement("div");var onClose=function onClose(){_reactDom.default.unmountComponentAtNode(container);document.body.removeChild(container);isOpen=false};document.body.appendChild(container);var element=_react.default.createElement(I18nContext,null,_react.default.createElement(_open_search_panel.OpenSearchPanel,{onClose:onClose,makeUrl:makeUrl}));_reactDom.default.render(element,container)}},9212:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OpenSearchPanel=OpenSearchPanel;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _risonNode=_interopRequireDefault(__webpack_require__(383));var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);var _public=__webpack_require__(16);var _kibana_services=__webpack_require__(200);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SEARCH_OBJECT_TYPE="search";function OpenSearchPanel(props){var _getServices=(0,_kibana_services.getServices)(),_getServices$core=_getServices.core,uiSettings=_getServices$core.uiSettings,savedObjects=_getServices$core.savedObjects;return _react.default.createElement(_eui.EuiFlyout,{ownFocus:true,onClose:props.onClose,"data-test-subj":"loadSearchForm"},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.topNav.openSearchPanel.openSearchTitle",defaultMessage:"Open search"})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_public.SavedObjectFinderUi,{noItemsMessage:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.topNav.openSearchPanel.noSearchesFoundDescription",defaultMessage:"No matching searches found."}),savedObjectMetaData:[{type:SEARCH_OBJECT_TYPE,getIconForSavedObject:function getIconForSavedObject(){return"search"},name:_i18n.i18n.translate("kbn.discover.savedSearch.savedObjectName",{defaultMessage:"Saved search"})}],onChoose:function onChoose(id){window.location.assign(props.makeUrl(id));props.onClose()},uiSettings:uiSettings,savedObjects:savedObjects})),_react.default.createElement(_eui.EuiFlyoutFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,onClick:props.onClose,href:"#/management/kibana/objects?_a=".concat(_risonNode.default.encode({tab:SEARCH_OBJECT_TYPE}))},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.topNav.openSearchPanel.manageSearchesButtonLabel",defaultMessage:"Manage searches"}))))))}OpenSearchPanel.propTypes={onClose:_propTypes.default.func.isRequired,makeUrl:_propTypes.default.func.isRequired}},9213:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addHelpMenuToAppChrome=addHelpMenuToAppChrome;var _i18n=__webpack_require__(2);var _kibana_services=__webpack_require__(200);var _getServices=(0,_kibana_services.getServices)(),docLinks=_getServices.docLinks;function addHelpMenuToAppChrome(chrome){chrome.setHelpExtension({appName:_i18n.i18n.translate("kbn.discover.helpMenu.appName",{defaultMessage:"Discover"}),links:[{linkType:"documentation",href:"".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(docLinks.DOC_LINK_VERSION,"/discover.html")}]})}},9214:function(module,exports,__webpack_require__){"use strict";__webpack_require__(9215)},9215:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFetchErrorDirective=createFetchErrorDirective;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);var _kibana_services=__webpack_require__(200);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var DiscoverFetchError=function DiscoverFetchError(_ref){var fetchError=_ref.fetchError;if(!fetchError){return null}var body;if(fetchError.lang==="painless"){var _getServices=(0,_kibana_services.getServices)(),chrome=_getServices.chrome;var mangagementUrlObj=chrome.navLinks.get("kibana:management");var managementUrl=mangagementUrlObj?mangagementUrlObj.url:"";var url="".concat(managementUrl,"/kibana/index_patterns");body=_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.fetchError.howToAddressErrorDescription",defaultMessage:"You can address this error by editing the {fetchErrorScript} field in {managementLink}, under the {scriptedFields} tab.",values:{fetchErrorScript:"'".concat(fetchError.script,"'"),scriptedFields:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.fetchError.scriptedFieldsText",defaultMessage:"“Scripted fields”"}),managementLink:_react.default.createElement("a",{href:url},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.fetchError.managmentLinkText",defaultMessage:"Management > Index Patterns"}))}}))}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center","data-test-subj":"discoverFetchError"},_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"discoverFetchError"},_react.default.createElement(_eui.EuiCallOut,{title:fetchError.message,color:"danger",iconType:"cross"},body,_react.default.createElement(_eui.EuiCodeBlock,null,fetchError.error)))),_react.default.createElement(_eui.EuiSpacer,{size:"xl"}))};function createFetchErrorDirective(reactDirective){return reactDirective((0,_kibana_services.wrapInI18nContext)(DiscoverFetchError))}(0,_kibana_services.getAngularModule)().directive("discoverFetchError",createFetchErrorDirective)},9216:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPainlessError=getPainlessError;var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(3);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function getPainlessError(error){var rootCause=(0,_lodash.get)(error,"resp.error.root_cause");if(!rootCause){return}var _rootCause=_slicedToArray(rootCause,1),_rootCause$=_rootCause[0],lang=_rootCause$.lang,script=_rootCause$.script;if(lang!=="painless"){return}return{lang:lang,script:script,message:_i18n.i18n.translate("kbn.discover.painlessError.painlessScriptedFieldErrorMessage",{defaultMessage:"Error with Painless scripted field '{script}'.",values:{script:script}}),error:error.message}}},9217:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findIndexPatternById=findIndexPatternById;exports.getFallbackIndexPatternId=getFallbackIndexPatternId;exports.getIndexPatternId=getIndexPatternId;function findIndexPatternById(indexPatterns,id){if(!Array.isArray(indexPatterns)||!id){return}return indexPatterns.find((function(o){return o.id===id}))}function getFallbackIndexPatternId(indexPatterns){var defaultIndex=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(defaultIndex&&findIndexPatternById(indexPatterns,defaultIndex)){return defaultIndex}return!indexPatterns||!indexPatterns.length||!indexPatterns[0].id?"":indexPatterns[0].id}function getIndexPatternId(){var id=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var indexPatterns=arguments.length>1?arguments[1]:undefined;var defaultIndex=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(!id||!findIndexPatternById(indexPatterns,id)){return getFallbackIndexPatternId(indexPatterns,defaultIndex)}return id}},9218:function(module,exports,__webpack_require__){"use strict";var _kibana_services=__webpack_require__(200);var _breadcrumbs=__webpack_require__(7380);var _doc=_interopRequireDefault(__webpack_require__(9219));var _doc2=__webpack_require__(9220);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var _getServices=(0,_kibana_services.getServices)(),timefilter=_getServices.timefilter;var app=(0,_kibana_services.getAngularModule)();app.directive("discoverDoc",(function(reactDirective){return reactDirective((0,_kibana_services.wrapInI18nContext)(_doc2.Doc),[["id",{watchDepth:"value"}],["index",{watchDepth:"value"}],["indexPatternId",{watchDepth:"reference"}],["indexPatternService",{watchDepth:"reference"}],["esClient",{watchDepth:"reference"}]],{restrict:"E"})}));app.config((function($routeProvider){$routeProvider.when("/discover/doc/:indexPattern/:index/:type",{redirectTo:"/discover/doc/:indexPattern/:index"}).when("/discover/doc/:indexPattern/:index",{controller:function controller($scope,$route,es){timefilter.disableAutoRefreshSelector();timefilter.disableTimeRangeSelector();$scope.esClient=es;$scope.id=$route.current.params.id;$scope.index=$route.current.params.index;$scope.indexPatternId=$route.current.params.indexPattern;$scope.indexPatternService=(0,_kibana_services.getServices)().indexPatterns},template:_doc.default,k7Breadcrumbs:function k7Breadcrumbs($route){return[].concat(_toConsumableArray((0,_breadcrumbs.getRootBreadcrumbs)()),[{text:"".concat($route.current.params.index,"#").concat($route.current.params.id)}])}})}))},9219:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="app-container">\n    <discover-doc\n      es-client="esClient"\n      id="id"\n      index="index"\n      index-pattern-id="indexPatternId"\n      index-pattern-service="indexPatternService"\n    ></discover-doc>\n</div>\n'},9220:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Doc=Doc;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);var _doc_viewer=__webpack_require__(2307);var _use_es_doc_search=__webpack_require__(9221);var _kibana_services=__webpack_require__(200);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function Doc(props){var _useEsDocSearch=(0,_use_es_doc_search.useEsDocSearch)(props),_useEsDocSearch2=_slicedToArray(_useEsDocSearch,3),reqState=_useEsDocSearch2[0],hit=_useEsDocSearch2[1],indexPattern=_useEsDocSearch2[2];return _react.default.createElement(_eui.EuiPageContent,null,reqState===_use_es_doc_search.ElasticRequestState.NotFoundIndexPattern&&_react.default.createElement(_eui.EuiCallOut,{color:"danger","data-test-subj":"doc-msg-notFoundIndexPattern",iconType:"alert",title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.doc.failedToLocateIndexPattern",defaultMessage:"No index pattern matches ID {indexPatternId}",values:{indexPatternId:props.indexPatternId}})}),reqState===_use_es_doc_search.ElasticRequestState.NotFound&&_react.default.createElement(_eui.EuiCallOut,{color:"danger","data-test-subj":"doc-msg-notFound",iconType:"alert",title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.doc.failedToLocateDocumentDescription",defaultMessage:"Cannot find document"})},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.doc.couldNotFindDocumentsDescription",defaultMessage:"No documents match that ID."})),reqState===_use_es_doc_search.ElasticRequestState.Error&&_react.default.createElement(_eui.EuiCallOut,{color:"danger","data-test-subj":"doc-msg-error",iconType:"alert",title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.doc.failedToExecuteQueryDescription",defaultMessage:"Cannot run search"})},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.doc.somethingWentWrongDescription",defaultMessage:"{indexName} is missing.",values:{indexName:props.index}})," ",_react.default.createElement(_eui.EuiLink,{href:"https://www.elastic.co/guide/en/elasticsearch/reference/".concat((0,_kibana_services.getServices)().metadata.branch,"/indices-exists.html"),target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.doc.somethingWentWrongDescriptionAddon",defaultMessage:"Please ensure the index exists."}))),reqState===_use_es_doc_search.ElasticRequestState.Loading&&_react.default.createElement(_eui.EuiCallOut,{"data-test-subj":"doc-msg-loading"},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"m"})," ",_react.default.createElement(_react2.FormattedMessage,{id:"kbn.doc.loadingDescription",defaultMessage:"Loading…"})),reqState===_use_es_doc_search.ElasticRequestState.Found&&hit!==null&&indexPattern&&_react.default.createElement("div",{"data-test-subj":"doc-hit"},_react.default.createElement(_doc_viewer.DocViewer,{hit:hit,indexPattern:indexPattern})))}},9221:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildSearchBody=buildSearchBody;exports.useEsDocSearch=useEsDocSearch;exports.ElasticRequestState=void 0;var _react=__webpack_require__(0);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var ElasticRequestState;exports.ElasticRequestState=ElasticRequestState;(function(ElasticRequestState){ElasticRequestState[ElasticRequestState["Loading"]=0]="Loading";ElasticRequestState[ElasticRequestState["NotFound"]=1]="NotFound";ElasticRequestState[ElasticRequestState["Found"]=2]="Found";ElasticRequestState[ElasticRequestState["Error"]=3]="Error";ElasticRequestState[ElasticRequestState["NotFoundIndexPattern"]=4]="NotFoundIndexPattern"})(ElasticRequestState||(exports.ElasticRequestState=ElasticRequestState={}));function buildSearchBody(id,indexPattern){var computedFields=indexPattern.getComputedFields();return{query:{ids:{values:[id]}},stored_fields:computedFields.storedFields,_source:true,script_fields:computedFields.scriptFields,docvalue_fields:computedFields.docvalueFields}}function useEsDocSearch(_ref){var esClient=_ref.esClient,id=_ref.id,index=_ref.index,indexPatternId=_ref.indexPatternId,indexPatternService=_ref.indexPatternService;var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),indexPattern=_useState2[0],setIndexPattern=_useState2[1];var _useState3=(0,_react.useState)(ElasticRequestState.Loading),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var _useState5=(0,_react.useState)(null),_useState6=_slicedToArray(_useState5,2),hit=_useState6[0],setHit=_useState6[1];(0,_react.useEffect)((function(){function requestData(){var indexPatternEntity,_ref2,hits;return regeneratorRuntime.async((function requestData$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return regeneratorRuntime.awrap(indexPatternService.get(indexPatternId));case 3:indexPatternEntity=_context.sent;setIndexPattern(indexPatternEntity);_context.next=7;return regeneratorRuntime.awrap(esClient.search({index:index,body:buildSearchBody(id,indexPatternEntity)}));case 7:_ref2=_context.sent;hits=_ref2.hits;if(hits&&hits.hits&&hits.hits[0]){setStatus(ElasticRequestState.Found);setHit(hits.hits[0])}else{setStatus(ElasticRequestState.NotFound)}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](0);if(_context.t0.savedObjectId){setStatus(ElasticRequestState.NotFoundIndexPattern)}else if(_context.t0.status===404){setStatus(ElasticRequestState.NotFound)}else{setStatus(ElasticRequestState.Error)}case 15:case"end":return _context.stop()}}}),null,null,[[0,12]])}requestData()}),[esClient,id,index,indexPatternId,indexPatternService]);return[status,hit,indexPattern]}},9222:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(3));var _i18n=__webpack_require__(2);var _kibana_services=__webpack_require__(200);__webpack_require__(9223);var _context=_interopRequireDefault(__webpack_require__(9239));var _breadcrumbs=__webpack_require__(7380);var _public=__webpack_require__(149);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var _getServices=(0,_kibana_services.getServices)(),chrome=_getServices.chrome;var k7Breadcrumbs=function k7Breadcrumbs($route){var indexPattern=$route.current.locals.indexPattern;var id=$route.current.params.id;return[].concat(_toConsumableArray((0,_breadcrumbs.getRootBreadcrumbs)()),[{text:_i18n.i18n.translate("kbn.context.breadcrumb",{defaultMessage:"Context of {indexPatternTitle}#{docId}",values:{indexPatternTitle:indexPattern.title,docId:id}})}])};(0,_kibana_services.getAngularModule)().config((function($routeProvider){$routeProvider.when("/discover/context/:indexPatternId/:type/:id*",{redirectTo:"/discover/context/:indexPatternId/:id"}).when("/discover/context/:indexPatternId/:id*",{controller:ContextAppRouteController,k7Breadcrumbs:k7Breadcrumbs,controllerAs:"contextAppRoute",resolve:{indexPattern:function indexPattern($route,Promise){var indexPattern=(0,_kibana_services.getServices)().indexPatterns.get($route.current.params.indexPatternId);return Promise.props({ip:indexPattern})}},template:_context.default})}));function ContextAppRouteController($routeParams,$scope,AppState,config,$route,getAppState,globalState){var _this=this;var filterManager=(0,_kibana_services.getServices)().filterManager;var filterStateManager=new _public.FilterStateManager(globalState,getAppState,filterManager);var indexPattern=$route.current.locals.indexPattern.ip;this.state=new AppState(createDefaultAppState(config,indexPattern));this.state.save(true);$scope.$watchGroup(["contextAppRoute.state.columns","contextAppRoute.state.predecessorCount","contextAppRoute.state.successorCount"],(function(){return _this.state.save(true)}));var updateSubsciption=(0,_kibana_services.subscribeWithScope)($scope,filterManager.getUpdates$(),{next:function next(){_this.filters=_lodash.default.cloneDeep(filterManager.getFilters())}});$scope.$on("$destroy",(function(){filterStateManager.destroy();updateSubsciption.unsubscribe()}));this.anchorId=$routeParams.id;this.indexPattern=indexPattern;this.discoverUrl=chrome.navLinks.get("kibana:discover").url;this.filters=_lodash.default.cloneDeep(filterManager.getFilters())}function createDefaultAppState(config,indexPattern){return{columns:["_source"],filters:[],predecessorCount:parseInt(config.get("context:defaultSize"),10),sort:[indexPattern.timeFieldName,"desc"],successorCount:parseInt(config.get("context:defaultSize"),10)}}},9223:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(3));var _kibana_services=__webpack_require__(200);var _context_app=_interopRequireDefault(__webpack_require__(9224));__webpack_require__(9225);var _sorting=__webpack_require__(7721);var _query_parameters=__webpack_require__(7722);var _query=__webpack_require__(9230);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var _getServices=(0,_kibana_services.getServices)(),timefilter=_getServices.timefilter;var _module=(0,_kibana_services.getAngularModule)();_module.directive("contextApp",(function ContextApp(){return{bindToController:true,controller:(0,_kibana_services.callAfterBindingsWorkaround)(ContextAppController),controllerAs:"contextApp",restrict:"E",scope:{anchorId:"=",columns:"=",indexPattern:"=",filters:"=",predecessorCount:"=",successorCount:"=",sort:"=",discoverUrl:"="},template:_context_app.default}}));function ContextAppController($scope,config,Private){var _this=this;var queryParameterActions=(0,_query_parameters.getQueryParameterActions)();var queryActions=Private(_query.QueryActionsProvider);timefilter.disableAutoRefreshSelector();timefilter.disableTimeRangeSelector();this.state=createInitialState(parseInt(config.get("context:step"),10),(0,_sorting.getFirstSortableField)(this.indexPattern,config.get("context:tieBreakerFields")),this.discoverUrl);this.actions=_lodash.default.mapValues(_objectSpread({},queryParameterActions,{},queryActions),(function(action){return function(){return action(_this.state).apply(void 0,arguments)}}));this.constants={FAILURE_REASONS:_query.FAILURE_REASONS,LOADING_STATUS:_query.LOADING_STATUS};$scope.$watchGroup([function(){return _this.state.rows.predecessors},function(){return _this.state.rows.anchor},function(){return _this.state.rows.successors}],(function(newValues){var _this$actions;return(_this$actions=_this.actions).setAllRows.apply(_this$actions,_toConsumableArray(newValues))}));$scope.$watchCollection((function(){return _objectSpread({},_lodash.default.pick(_this,_query_parameters.QUERY_PARAMETER_KEYS),{indexPatternId:_this.indexPattern.id})}),(function(newQueryParameters){var queryParameters=_this.state.queryParameters;if(newQueryParameters.indexPatternId!==queryParameters.indexPatternId||newQueryParameters.anchorId!==queryParameters.anchorId||!_lodash.default.isEqual(newQueryParameters.sort,queryParameters.sort)){_this.actions.fetchAllRowsWithNewQueryParameters(_lodash.default.cloneDeep(newQueryParameters))}else if(newQueryParameters.predecessorCount!==queryParameters.predecessorCount||newQueryParameters.successorCount!==queryParameters.successorCount||!_lodash.default.isEqual(newQueryParameters.filters,queryParameters.filters)){_this.actions.fetchContextRowsWithNewQueryParameters(_lodash.default.cloneDeep(newQueryParameters))}}));$scope.$watchCollection((function(){return{predecessorCount:_this.state.queryParameters.predecessorCount,successorCount:_this.state.queryParameters.successorCount}}),(function(newParameters){_lodash.default.assign(_this,newParameters)}))}function createInitialState(defaultStepSize,tieBreakerField,discoverUrl){return{queryParameters:(0,_query_parameters.createInitialQueryParametersState)(defaultStepSize,tieBreakerField),rows:{all:[],anchor:null,predecessors:[],successors:[]},loadingStatus:(0,_query.createInitialLoadingStatusState)(),navigation:{discover:{url:discoverUrl}}}}},9224:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-top-nav\n  app-name="\'context\'"\n  show-search-bar="true"\n  show-filter-bar="true"\n  show-save-query="false"\n  show-date-picker="false"\n\n  filters="contextApp.state.queryParameters.filters"\n  on-filters-updated="contextApp.actions.updateFilters"\n  index-patterns="[contextApp.indexPattern]"\n>\n</kbn-top-nav>\n\n\n\x3c!-- Error feedback --\x3e\n<div\n  class="kuiViewContent kuiViewContentItem"\n  ng-if="contextApp.state.loadingStatus.anchor.status === contextApp.constants.LOADING_STATUS.FAILED"\n>\n  <div class="kuiInfoPanel kuiInfoPanel--error kuiVerticalRhythm">\n    <div class="kuiInfoPanelHeader">\n      <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n      <span\n        class="kuiInfoPanelHeader__title"\n        i18n-id="kbn.context.failedToLoadAnchorDocumentDescription"\n        i18n-default-message="Failed to load the anchor document"\n      ></span>\n    </div>\n\n    <div class="kuiInfoPanelBody">\n      <div\n        class="kuiInfoPanelBody__message"\n        ng-if="contextApp.state.loadingStatus.anchor.reason === contextApp.constants.FAILURE_REASONS.INVALID_TIEBREAKER"\n        i18n-id="kbn.context.noSearchableTiebreakerFieldDescription"\n        i18n-default-message="No searchable tiebreaker field could be found in the index pattern {indexPatternId}. Please change the advanced setting {tieBreakerFields} to include a valid field for this index pattern."\n        i18n-values="{\n          indexPatternId: contextApp.state.queryParameters.indexPatternId,\n          html_tieBreakerFields: \'<code>context:tieBreakerFields</code>\'\n        }"\n      >\n      </div>\n      <div\n        class="kuiInfoPanelBody__message"\n        ng-if="contextApp.state.loadingStatus.anchor.reason === contextApp.constants.FAILURE_REASONS.UNKNOWN"\n      >\n        <span\n          i18n-id="kbn.context.reloadPageDescription.reloadOrVisitTextMessage"\n          i18n-default-message="Please reload or visit"\n          i18n-description="Part of composite text kbn.context.reloadPageDescription.reloadOrVisitTextMessage + kbn.context.reloadPageDescription.discoverLinkText + kbn.context.reloadPageDescription.selectValidAnchorDocumentTextMessage"\n        ></span>\n        <a\n          ng-href="{{ contextApp.state.navigation.discover.url }}"\n          i18n-id="kbn.context.reloadPageDescription.discoverLinkText"\n          i18n-default-message="Discover"\n          i18n-description="Part of composite text kbn.context.reloadPageDescription.reloadOrVisitTextMessage + kbn.context.reloadPageDescription.discoverLinkText + kbn.context.reloadPageDescription.selectValidAnchorDocumentTextMessage"\n        ></a>\n        <span\n          i18n-id="kbn.context.reloadPageDescription.selectValidAnchorDocumentTextMessage"\n          i18n-default-message="to select a valid anchor document."\n          i18n-description="Part of composite text kbn.context.reloadPageDescription.reloadOrVisitTextMessage + kbn.context.reloadPageDescription.discoverLinkText + kbn.context.reloadPageDescription.selectValidAnchorDocumentTextMessage"\n      ></span>\n    </div>\n    </div>\n  </div>\n</div>\n\n<main\n  class="kuiViewContent kuiViewContentItem"\n  ng-if="contextApp.state.loadingStatus.anchor.status !== contextApp.constants.LOADING_STATUS.FAILED"\n>\n  \x3c!-- Controls --\x3e\n  <context-action-bar\n        default-step-size="contextApp.state.queryParameters.defaultStepSize"\n        doc-count="contextApp.state.queryParameters.predecessorCount"\n        doc-count-available="contextApp.state.rows.predecessors.length"\n        is-disabled="contextApp.state.loadingStatus.anchor.status !== contextApp.constants.LOADING_STATUS.LOADED"\n        is-loading="![\n        contextApp.constants.LOADING_STATUS.LOADED,\n        contextApp.constants.LOADING_STATUS.FAILED,\n        ].includes(contextApp.state.loadingStatus.predecessors.status)"\n        on-change-count="contextApp.actions.fetchGivenPredecessorRows"\n        type="\'predecessors\'"\n  ></context-action-bar>\n\n\n  \x3c!-- Loading feedback --\x3e\n  <div\n    ng-if="[\n      contextApp.constants.LOADING_STATUS.UNINITIALIZED,\n      contextApp.constants.LOADING_STATUS.LOADING,\n    ].includes(contextApp.state.loadingStatus.anchor.status)"\n    class="kuiPanel kuiPanel--centered kuiVerticalRhythm"\n  >\n    <div\n      class="kuiTableInfo"\n      i18n-id="kbn.context.loadingDescription"\n      i18n-default-message="Loading…"\n    ></div>\n  </div>\n\n  \x3c!-- Table --\x3e\n  <div\n    ng-if="contextApp.state.loadingStatus.anchor.status === contextApp.constants.LOADING_STATUS.LOADED"\n    class="kuiPanel kuiVerticalRhythm"\n  >\n    <div class="discover-table" fixed-scroll>\n      <doc-table\n        filter="contextApp.actions.addFilter"\n        hits="contextApp.state.rows.all"\n        index-pattern="contextApp.indexPattern"\n        sorting="contextApp.state.queryParameters.sort"\n        columns="contextApp.state.queryParameters.columns"\n        infinite-scroll="true"\n        minimum-visible-rows="contextApp.state.rows.all.length"\n      ></doc-table>\n    </div>\n  </div>\n\n  \x3c!-- Controls --\x3e\n  <context-action-bar\n    default-step-size="contextApp.state.queryParameters.defaultStepSize"\n    doc-count="contextApp.state.queryParameters.successorCount"\n    doc-count-available="contextApp.state.rows.successors.length"\n    is-disabled="contextApp.state.loadingStatus.anchor.status !== contextApp.constants.LOADING_STATUS.LOADED"\n    is-loading="![\n    contextApp.constants.LOADING_STATUS.LOADED,\n    contextApp.constants.LOADING_STATUS.FAILED,\n    ].includes(contextApp.state.loadingStatus.successors.status)"\n    on-change-count="contextApp.actions.fetchGivenSuccessorRows"\n    type="\'successors\'"\n  ></context-action-bar>\n</main>\n'},9225:function(module,exports,__webpack_require__){"use strict";__webpack_require__(9226)},9226:function(module,exports,__webpack_require__){"use strict";var _kibana_services=__webpack_require__(200);var _action_bar=__webpack_require__(9227);(0,_kibana_services.getAngularModule)().directive("contextActionBar",(function(reactDirective){return reactDirective((0,_kibana_services.wrapInI18nContext)(_action_bar.ActionBar))}))},9227:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ActionBar=ActionBar;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);var _action_bar_warning=__webpack_require__(9228);var _constants=__webpack_require__(7381);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ActionBar(_ref){var defaultStepSize=_ref.defaultStepSize,docCount=_ref.docCount,docCountAvailable=_ref.docCountAvailable,isDisabled=_ref.isDisabled,isLoading=_ref.isLoading,onChangeCount=_ref.onChangeCount,type=_ref.type;var showWarning=!isDisabled&&!isLoading&&docCountAvailable<docCount;var isSuccessor=type==="successors";var _useState=(0,_react.useState)(docCount),_useState2=_slicedToArray(_useState,2),newDocCount=_useState2[0],setNewDocCount=_useState2[1];var isValid=function isValid(value){return value>=_constants.MIN_CONTEXT_SIZE&&value<=_constants.MAX_CONTEXT_SIZE};var onSubmit=function onSubmit(ev){ev.preventDefault();if(newDocCount!==docCount&&isValid(newDocCount)){onChangeCount(newDocCount)}};return _react.default.createElement("form",{onSubmit:onSubmit},isSuccessor&&_react.default.createElement(_eui.EuiSpacer,{size:"s"}),isSuccessor&&showWarning&&_react.default.createElement(_action_bar_warning.ActionBarWarning,{docCount:docCountAvailable,type:type}),isSuccessor&&showWarning&&_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiFlexGroup,{direction:"row",gutterSize:"s",responsive:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"".concat(type,"LoadMoreButton"),iconType:isSuccessor?"arrowDown":"arrowUp",isDisabled:isDisabled,isLoading:isLoading,onClick:function onClick(){var value=newDocCount+defaultStepSize;if(isValid(value)){setNewDocCount(value);onChangeCount(value)}},flush:"right"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.context.loadButtonLabel",defaultMessage:"Load"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiFieldNumber,{"aria-label":isSuccessor?_i18n.i18n.translate("kbn.context.olderDocumentsAriaLabel",{defaultMessage:"Number of older documents"}):_i18n.i18n.translate("kbn.context.newerDocumentsAriaLabel",{defaultMessage:"Number of newer documents"}),className:"cxtSizePicker","data-test-subj":"".concat(type,"CountPicker"),disabled:isDisabled,min:_constants.MIN_CONTEXT_SIZE,max:_constants.MAX_CONTEXT_SIZE,onChange:function onChange(ev){setNewDocCount(ev.target.valueAsNumber)},onBlur:function onBlur(){if(newDocCount!==docCount&&isValid(newDocCount)){onChangeCount(newDocCount)}},type:"number",value:newDocCount>=0?newDocCount:""}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{displayOnly:true},isSuccessor?_react.default.createElement(_react2.FormattedMessage,{id:"kbn.context.olderDocumentsDescription",defaultMessage:"older documents"}):_react.default.createElement(_react2.FormattedMessage,{id:"kbn.context.newerDocumentsDescription",defaultMessage:"newer documents"})))),!isSuccessor&&showWarning&&_react.default.createElement(_action_bar_warning.ActionBarWarning,{docCount:docCountAvailable,type:type}),!isSuccessor&&_react.default.createElement(_eui.EuiSpacer,{size:"s"}))}},9228:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ActionBarWarning=ActionBarWarning;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ActionBarWarning(_ref){var docCount=_ref.docCount,type=_ref.type;if(type==="predecessors"){return _react.default.createElement(_eui.EuiCallOut,{color:"warning","data-test-subj":"predecessorsWarningMsg",iconType:"bolt",title:docCount===0?_react.default.createElement(_react2.FormattedMessage,{id:"kbn.context.newerDocumentsWarningZero",defaultMessage:"No documents newer than the anchor could be found."}):_react.default.createElement(_react2.FormattedMessage,{id:"kbn.context.newerDocumentsWarning",defaultMessage:"Only {docCount} documents newer than the anchor could be found.",values:{docCount:docCount}}),size:"s"})}return _react.default.createElement(_eui.EuiCallOut,{color:"warning","data-test-subj":"successorsWarningMsg",iconType:"bolt",title:docCount===0?_react.default.createElement(_react2.FormattedMessage,{id:"kbn.context.olderDocumentsWarningZero",defaultMessage:"No documents older than the anchor could be found."}):_react.default.createElement(_react2.FormattedMessage,{id:"kbn.context.olderDocumentsWarning",defaultMessage:"Only {docCount} documents older than the anchor could be found.",values:{docCount:docCount}}),size:"s"})}},9229:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getQueryParameterActions=getQueryParameterActions;var _lodash=_interopRequireDefault(__webpack_require__(3));var _kibana_services=__webpack_require__(200);var _public=__webpack_require__(11);var _constants=__webpack_require__(7381);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getQueryParameterActions(){var filterManager=(0,_kibana_services.getServices)().filterManager;var setPredecessorCount=function setPredecessorCount(state){return function(predecessorCount){return state.queryParameters.predecessorCount=clamp(_constants.MIN_CONTEXT_SIZE,_constants.MAX_CONTEXT_SIZE,predecessorCount)}};var setSuccessorCount=function setSuccessorCount(state){return function(successorCount){return state.queryParameters.successorCount=clamp(_constants.MIN_CONTEXT_SIZE,_constants.MAX_CONTEXT_SIZE,successorCount)}};var setQueryParameters=function setQueryParameters(state){return function(queryParameters){return Object.assign(state.queryParameters,_lodash.default.pick(queryParameters,_constants.QUERY_PARAMETER_KEYS))}};var updateFilters=function updateFilters(){return function(filters){filterManager.setFilters(filters)}};var addFilter=function addFilter(state){return function _callee(field,values,operation){var indexPatternId,newFilters,indexPattern;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPatternId=state.queryParameters.indexPatternId;newFilters=(0,_public.generateFilters)(filterManager,field,values,operation,indexPatternId);filterManager.addFilters(newFilters);_context.next=5;return regeneratorRuntime.awrap((0,_kibana_services.getServices)().indexPatterns.get(indexPatternId));case 5:indexPattern=_context.sent;indexPattern.popularizeField(field.name,1);case 7:case"end":return _context.stop()}}}))}};return{addFilter:addFilter,updateFilters:updateFilters,setPredecessorCount:setPredecessorCount,setQueryParameters:setQueryParameters,setSuccessorCount:setSuccessorCount}}function clamp(minimum,maximum,value){return Math.max(Math.min(maximum,value),minimum)}},9230:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"QueryActionsProvider",{enumerable:true,get:function get(){return _actions.QueryActionsProvider}});Object.defineProperty(exports,"FAILURE_REASONS",{enumerable:true,get:function get(){return _constants.FAILURE_REASONS}});Object.defineProperty(exports,"LOADING_STATUS",{enumerable:true,get:function get(){return _constants.LOADING_STATUS}});Object.defineProperty(exports,"createInitialLoadingStatusState",{enumerable:true,get:function get(){return _state.createInitialLoadingStatusState}});var _actions=__webpack_require__(9231);var _constants=__webpack_require__(7383);var _state=__webpack_require__(9238)},9231:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryActionsProvider=QueryActionsProvider;var _lodash=_interopRequireDefault(__webpack_require__(3));var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _kibana_services=__webpack_require__(200);var _anchor=__webpack_require__(9232);var _context=__webpack_require__(9233);var _query_parameters=__webpack_require__(7722);var _constants=__webpack_require__(7383);var _public=__webpack_require__(525);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function QueryActionsProvider(Promise){var fetchAnchor=(0,_anchor.fetchAnchorProvider)((0,_kibana_services.getServices)().indexPatterns,new _kibana_services.SearchSource);var _fetchContextProvider=(0,_context.fetchContextProvider)((0,_kibana_services.getServices)().indexPatterns),fetchSurroundingDocs=_fetchContextProvider.fetchSurroundingDocs;var _getQueryParameterAct=(0,_query_parameters.getQueryParameterActions)(),setPredecessorCount=_getQueryParameterAct.setPredecessorCount,setQueryParameters=_getQueryParameterAct.setQueryParameters,setSuccessorCount=_getQueryParameterAct.setSuccessorCount;var setFailedStatus=function setFailedStatus(state){return function(subject){var details=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return state.loadingStatus[subject]=_objectSpread({status:_constants.LOADING_STATUS.FAILED,reason:_constants.FAILURE_REASONS.UNKNOWN},details)}};var setLoadedStatus=function setLoadedStatus(state){return function(subject){return state.loadingStatus[subject]={status:_constants.LOADING_STATUS.LOADED}}};var setLoadingStatus=function setLoadingStatus(state){return function(subject){return state.loadingStatus[subject]={status:_constants.LOADING_STATUS.LOADING}}};var fetchAnchorRow=function fetchAnchorRow(state){return function(){var _state$queryParameter=state.queryParameters,indexPatternId=_state$queryParameter.indexPatternId,anchorId=_state$queryParameter.anchorId,sort=_state$queryParameter.sort,tieBreakerField=_state$queryParameter.tieBreakerField;if(!tieBreakerField){return Promise.reject(setFailedStatus(state)("anchor",{reason:_constants.FAILURE_REASONS.INVALID_TIEBREAKER}))}setLoadingStatus(state)("anchor");return Promise.try((function(){return fetchAnchor(indexPatternId,anchorId,[_lodash.default.zipObject([sort]),_defineProperty({},tieBreakerField,sort[1])])})).then((function(anchorDocument){setLoadedStatus(state)("anchor");state.rows.anchor=anchorDocument;return anchorDocument}),(function(error){setFailedStatus(state)("anchor",{error:error});(0,_kibana_services.getServices)().toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.context.unableToLoadAnchorDocumentDescription",{defaultMessage:"Unable to load the anchor document"}),text:_react.default.createElement(_public.MarkdownSimple,null,error.message)});throw error}))}};var fetchSurroundingRows=function fetchSurroundingRows(type,state){var _state$queryParameter2=state.queryParameters,indexPatternId=_state$queryParameter2.indexPatternId,filters=_state$queryParameter2.filters,sort=_state$queryParameter2.sort,tieBreakerField=_state$queryParameter2.tieBreakerField,anchor=state.rows.anchor;var count=type==="successors"?state.queryParameters.successorCount:state.queryParameters.predecessorCount;if(!tieBreakerField){return Promise.reject(setFailedStatus(state)(type,{reason:_constants.FAILURE_REASONS.INVALID_TIEBREAKER}))}setLoadingStatus(state)(type);var _sort=_slicedToArray(sort,2),sortField=_sort[0],sortDir=_sort[1];return Promise.try((function(){return fetchSurroundingDocs(type,indexPatternId,anchor,sortField,tieBreakerField,sortDir,count,filters)})).then((function(documents){setLoadedStatus(state)(type);state.rows[type]=documents;return documents}),(function(error){setFailedStatus(state)(type,{error:error});(0,_kibana_services.getServices)().toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.context.unableToLoadDocumentDescription",{defaultMessage:"Unable to load documents"}),text:_react.default.createElement(_public.MarkdownSimple,null,error.message)});throw error}))};var fetchContextRows=function fetchContextRows(state){return function(){return Promise.all([fetchSurroundingRows("predecessors",state),fetchSurroundingRows("successors",state)])}};var fetchAllRows=function fetchAllRows(state){return function(){return Promise.try(fetchAnchorRow(state)).then(fetchContextRows(state))}};var fetchContextRowsWithNewQueryParameters=function fetchContextRowsWithNewQueryParameters(state){return function(queryParameters){setQueryParameters(state)(queryParameters);return fetchContextRows(state)()}};var fetchAllRowsWithNewQueryParameters=function fetchAllRowsWithNewQueryParameters(state){return function(queryParameters){setQueryParameters(state)(queryParameters);return fetchAllRows(state)()}};var fetchGivenPredecessorRows=function fetchGivenPredecessorRows(state){return function(count){setPredecessorCount(state)(count);return fetchSurroundingRows("predecessors",state)}};var fetchGivenSuccessorRows=function fetchGivenSuccessorRows(state){return function(count){setSuccessorCount(state)(count);return fetchSurroundingRows("successors",state)}};var setAllRows=function setAllRows(state){return function(predecessorRows,anchorRow,successorRows){return state.rows.all=[].concat(_toConsumableArray(predecessorRows||[]),_toConsumableArray(anchorRow?[anchorRow]:[]),_toConsumableArray(successorRows||[]))}};return{fetchAllRows:fetchAllRows,fetchAllRowsWithNewQueryParameters:fetchAllRowsWithNewQueryParameters,fetchAnchorRow:fetchAnchorRow,fetchContextRows:fetchContextRows,fetchContextRowsWithNewQueryParameters:fetchContextRowsWithNewQueryParameters,fetchGivenPredecessorRows:fetchGivenPredecessorRows,fetchGivenSuccessorRows:fetchGivenSuccessorRows,setAllRows:setAllRows}}},9232:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchAnchorProvider=fetchAnchorProvider;var _lodash=_interopRequireDefault(__webpack_require__(3));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function fetchAnchorProvider(indexPatterns,searchSource){return function fetchAnchor(indexPatternId,anchorId,sort){var indexPattern,response;return regeneratorRuntime.async((function fetchAnchor$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap(indexPatterns.get(indexPatternId));case 2:indexPattern=_context.sent;searchSource.setParent(undefined).setField("index",indexPattern).setField("version",true).setField("size",1).setField("query",{query:{constant_score:{filter:{ids:{values:[anchorId]}}}},language:"lucene"}).setField("sort",sort);_context.next=6;return regeneratorRuntime.awrap(searchSource.fetch());case 6:response=_context.sent;if(!(_lodash.default.get(response,["hits","total"],0)<1)){_context.next=9;break}throw new Error(_i18n.i18n.translate("kbn.context.failedToLoadAnchorDocumentErrorDescription",{defaultMessage:"Failed to load anchor document."}));case 9:return _context.abrupt("return",_objectSpread({},_lodash.default.get(response,["hits","hits",0]),{$$_isAnchor:true}));case 10:case"end":return _context.stop()}}}))}}},9233:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.fetchContextProvider=fetchContextProvider;var _kibana_services=__webpack_require__(200);var _sorting=__webpack_require__(7721);var _date_conversion=__webpack_require__(7382);var _fetch_hits_in_interval=__webpack_require__(9234);var _generate_intervals=__webpack_require__(9235);var _get_es_query_search_after=__webpack_require__(9236);var _get_es_query_sort=__webpack_require__(9237);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}var DAY_MILLIS=24*60*60*1e3;var LOOKUP_OFFSETS=[0,1,7,30,365,1e4].map((function(days){return days*DAY_MILLIS}));function fetchContextProvider(indexPatterns){return{fetchSurroundingDocs:fetchSurroundingDocs};function fetchSurroundingDocs(type,indexPatternId,anchor,timeField,tieBreakerField,sortDir,size,filters){var indexPattern,searchSource,sortDirToApply,nanos,timeValueMillis,intervals,documents,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,interval,remainingSize,searchAfter,sort,hits;return regeneratorRuntime.async((function fetchSurroundingDocs$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(_typeof(anchor)!=="object"||anchor===null)){_context.next=2;break}return _context.abrupt("return",[]);case 2:_context.next=4;return regeneratorRuntime.awrap(indexPatterns.get(indexPatternId));case 4:indexPattern=_context.sent;_context.next=7;return regeneratorRuntime.awrap(createSearchSource(indexPattern,filters));case 7:searchSource=_context.sent;sortDirToApply=type==="successors"?sortDir:(0,_sorting.reverseSortDir)(sortDir);nanos=indexPattern.isTimeNanosBased()?(0,_date_conversion.extractNanos)(anchor._source[timeField]):"";timeValueMillis=nanos!==""?(0,_date_conversion.convertIsoToMillis)(anchor._source[timeField]):anchor.sort[0];intervals=(0,_generate_intervals.generateIntervals)(LOOKUP_OFFSETS,timeValueMillis,type,sortDir);documents=[];_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=16;_iterator=intervals[Symbol.iterator]();case 18:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=32;break}interval=_step.value;remainingSize=size-documents.length;if(!(remainingSize<=0)){_context.next=23;break}return _context.abrupt("break",32);case 23:searchAfter=(0,_get_es_query_search_after.getEsQuerySearchAfter)(type,documents,timeField,anchor,nanos);sort=(0,_get_es_query_sort.getEsQuerySort)(timeField,tieBreakerField,sortDirToApply);_context.next=27;return regeneratorRuntime.awrap((0,_fetch_hits_in_interval.fetchHitsInInterval)(searchSource,timeField,sort,sortDirToApply,interval,searchAfter,remainingSize,nanos));case 27:hits=_context.sent;documents=type==="successors"?[].concat(_toConsumableArray(documents),_toConsumableArray(hits)):[].concat(_toConsumableArray(hits.slice().reverse()),_toConsumableArray(documents));case 29:_iteratorNormalCompletion=true;_context.next=18;break;case 32:_context.next=38;break;case 34:_context.prev=34;_context.t0=_context["catch"](16);_didIteratorError=true;_iteratorError=_context.t0;case 38:_context.prev=38;_context.prev=39;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 41:_context.prev=41;if(!_didIteratorError){_context.next=44;break}throw _iteratorError;case 44:return _context.finish(41);case 45:return _context.finish(38);case 46:return _context.abrupt("return",documents);case 47:case"end":return _context.stop()}}}),null,null,[[16,34,38,46],[39,,41,45]])}function createSearchSource(indexPattern,filters){return regeneratorRuntime.async((function createSearchSource$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",(new _kibana_services.SearchSource).setParent(undefined).setField("index",indexPattern).setField("filter",filters));case 1:case"end":return _context2.stop()}}}))}}},9234:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchHitsInInterval=fetchHitsInInterval;var _kibana_services=__webpack_require__(200);var _date_conversion=__webpack_require__(7382);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function fetchHitsInInterval(searchSource,timeField,sort,sortDir,interval,searchAfter,maxCount,nanosValue){var range,_interval,start,stop,response;return regeneratorRuntime.async((function fetchHitsInInterval$(_context){while(1){switch(_context.prev=_context.next){case 0:range={format:"strict_date_optional_time"};_interval=_slicedToArray(interval,2),start=_interval[0],stop=_interval[1];if(start){range[sortDir===_kibana_services.SortDirection.asc?"gte":"lte"]=(0,_date_conversion.convertTimeValueToIso)(start,nanosValue)}if(stop){range[sortDir===_kibana_services.SortDirection.asc?"lte":"gte"]=(0,_date_conversion.convertTimeValueToIso)(stop,nanosValue)}_context.next=6;return regeneratorRuntime.awrap(searchSource.setField("size",maxCount).setField("query",{query:{constant_score:{filter:{range:_defineProperty({},timeField,range)}}},language:"lucene"}).setField("searchAfter",searchAfter).setField("sort",sort).setField("version",true).fetch());case 6:response=_context.sent;return _context.abrupt("return",response.hits?response.hits.hits:[]);case 8:case"end":return _context.stop()}}}))}},9235:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asPairs=asPairs;exports.generateIntervals=generateIntervals;var _kibana_services=__webpack_require__(200);var _marked=regeneratorRuntime.mark(asPairs);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asPairs(iterable){var currentPair,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,value;return regeneratorRuntime.wrap((function asPairs$(_context){while(1){switch(_context.prev=_context.next){case 0:currentPair=[];_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=4;_iterator=iterable[Symbol.iterator]();case 6:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=15;break}value=_step.value;currentPair=[].concat(_toConsumableArray(currentPair),[value]).slice(-2);if(!(currentPair.length===2)){_context.next=12;break}_context.next=12;return currentPair;case 12:_iteratorNormalCompletion=true;_context.next=6;break;case 15:_context.next=21;break;case 17:_context.prev=17;_context.t0=_context["catch"](4);_didIteratorError=true;_iteratorError=_context.t0;case 21:_context.prev=21;_context.prev=22;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 24:_context.prev=24;if(!_didIteratorError){_context.next=27;break}throw _iteratorError;case 27:return _context.finish(24);case 28:return _context.finish(21);case 29:case"end":return _context.stop()}}}),_marked,null,[[4,17,21,29],[22,,24,28]])}function generateIntervals(offsets,startTime,type,sort){var offsetSign=sort===_kibana_services.SortDirection.asc&&type==="successors"||sort===_kibana_services.SortDirection.desc&&type==="predecessors"?1:-1;return asPairs([].concat(_toConsumableArray(offsets.map((function(offset){return startTime+offset*offsetSign}))),[null]))}},9236:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsQuerySearchAfter=getEsQuerySearchAfter;var _date_conversion=__webpack_require__(7382);function getEsQuerySearchAfter(type,documents,timeFieldName,anchor,nanoSeconds){if(documents.length){var afterTimeRecIdx=type==="successors"&&documents.length?documents.length-1:0;var afterTimeDoc=documents[afterTimeRecIdx];var afterTimeValue=nanoSeconds?(0,_date_conversion.convertIsoToNanosAsStr)(afterTimeDoc._source[timeFieldName]):afterTimeDoc.sort[0];return[afterTimeValue,afterTimeDoc.sort[1]]}return[nanoSeconds?(0,_date_conversion.convertIsoToNanosAsStr)(anchor._source[timeFieldName]):anchor.sort[0],anchor.sort[1]]}},9237:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsQuerySort=getEsQuerySort;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getEsQuerySort(timeField,tieBreakerField,sortDir){return[_defineProperty({},timeField,sortDir),_defineProperty({},tieBreakerField,sortDir)]}},9238:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createInitialLoadingStatusState=createInitialLoadingStatusState;var _constants=__webpack_require__(7383);function createInitialLoadingStatusState(){return{anchor:_constants.LOADING_STATUS.UNINITIALIZED,predecessors:_constants.LOADING_STATUS.UNINITIALIZED,successors:_constants.LOADING_STATUS.UNINITIALIZED}}},9239:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<context-app\n  anchor-id="contextAppRoute.anchorId"\n  columns="contextAppRoute.state.columns"\n  discover-url="contextAppRoute.discoverUrl"\n  index-pattern="contextAppRoute.indexPattern"\n  filters="contextAppRoute.filters"\n  predecessor-count="contextAppRoute.state.predecessorCount"\n  successor-count="contextAppRoute.state.successorCount"\n  sort="contextAppRoute.state.sort"\n></context-app>\n'},9240:function(module,exports,__webpack_require__){"use strict";var _no_results=__webpack_require__(9241);var _uninitialized=__webpack_require__(9242);var _unsupported_index_pattern=__webpack_require__(9243);var _histogram=__webpack_require__(9244);var _kibana_services=__webpack_require__(200);var app=(0,_kibana_services.getAngularModule)();app.directive("discoverNoResults",(function(reactDirective){return reactDirective((0,_kibana_services.wrapInI18nContext)(_no_results.DiscoverNoResults))}));app.directive("discoverUninitialized",(function(reactDirective){return reactDirective((0,_kibana_services.wrapInI18nContext)(_uninitialized.DiscoverUninitialized))}));app.directive("discoverUnsupportedIndexPattern",(function(reactDirective){return reactDirective((0,_kibana_services.wrapInI18nContext)(_unsupported_index_pattern.DiscoverUnsupportedIndexPattern),["unsupportedType"])}));app.directive("discoverHistogram",(function(reactDirective){return reactDirective(_histogram.DiscoverHistogram)}))},9241:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverNoResults=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(4);var _propTypes=_interopRequireDefault(__webpack_require__(10));var _eui=__webpack_require__(1);var _kibana_services=__webpack_require__(200);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DiscoverNoResults=function(_Component){_inherits(DiscoverNoResults,_Component);function DiscoverNoResults(){_classCallCheck(this,DiscoverNoResults);return _possibleConstructorReturn(this,_getPrototypeOf(DiscoverNoResults).apply(this,arguments))}_createClass(DiscoverNoResults,[{key:"render",value:function render(){var _this$props=this.props,shardFailures=_this$props.shardFailures,timeFieldName=_this$props.timeFieldName,queryLanguage=_this$props.queryLanguage;var shardFailuresMessage;if(shardFailures&&shardFailures.length){var failures=shardFailures.map((function(failure,index){return _react.default.createElement("div",{key:"".concat(failure.index).concat(failure.shard).concat(failure.reason)},_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.indexFailureShardText",defaultMessage:"{index}, shard {failureShard}",values:{index:_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.indexFailureIndexText",defaultMessage:"Index {failureIndex}",values:{failureIndex:"&lsquo;".concat(failure.index,"&rsquo;")}})),failureShard:"&lsquo;".concat(failure.shard,"&rsquo;")}})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiCodeBlock,{paddingSize:"s"},JSON.stringify(failure.reason)),index<shardFailures.length-1?_react.default.createElement(_eui.EuiSpacer,{size:"l"}):undefined)}));shardFailuresMessage=_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.addressShardFailuresTitle",defaultMessage:"Address shard failures"})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.shardFailuresDescription",defaultMessage:"The following shard failures occurred:"})),failures))}var timeFieldMessage;if(timeFieldName){timeFieldMessage=_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h2",{"data-test-subj":"discoverNoResultsTimefilter"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.expandYourTimeRangeTitle",defaultMessage:"Expand your time range"})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.queryMayNotMatchTitle",defaultMessage:"One or more of the indices you’re looking at contains a date field. Your query may not match anything in the current time range, or there may not be any data at all in the currently selected time range. You can try changing the time range to one which contains data."}))))}var luceneQueryMessage;if(queryLanguage==="lucene"){var searchExamples=[{description:_react.default.createElement(_eui.EuiCode,null,"200"),title:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.anyField200StatusCodeExampleTitle",defaultMessage:"Find requests that contain the number 200, in any field"})))},{description:_react.default.createElement(_eui.EuiCode,null,"status:200"),title:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.statusField200StatusCodeExampleTitle",defaultMessage:"Find 200 in the status field"})))},{description:_react.default.createElement(_eui.EuiCode,null,"status:[400 TO 499]"),title:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.400to499StatusCodeExampleTitle",defaultMessage:"Find all status codes between 400-499"})))},{description:_react.default.createElement(_eui.EuiCode,null,"status:[400 TO 499] AND extension:PHP"),title:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.400to499StatusCodeWithPhpExtensionExampleTitle",defaultMessage:"Find status codes 400-499 with the extension php"})))},{description:_react.default.createElement(_eui.EuiCode,null,"status:[400 TO 499] AND (extension:php OR extension:html)"),title:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.400to499StatusCodeWithPhpOrHtmlExtensionExampleTitle",defaultMessage:"Find status codes 400-499 with the extension php or html"})))}];luceneQueryMessage=_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.refineYourQueryTitle",defaultMessage:"Refine your query"})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.howTosearchForWebServerLogsDescription",defaultMessage:"The search bar at the top uses Elasticsearch’s support for Lucene {queryStringSyntaxLink}. Here are some examples of how you can search for web server logs that have been parsed into a few fields.",values:{queryStringSyntaxLink:_react.default.createElement(_eui.EuiLink,{target:"_blank",href:(0,_kibana_services.getServices)().docLinks.links.query.luceneQuerySyntax},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.queryStringSyntaxLinkText",defaultMessage:"Query String syntax"}))}}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiDescriptionList,{type:"column",listItems:searchExamples}),_react.default.createElement(_eui.EuiSpacer,{size:"xl"}))}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"dscNoResults"},_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.noResultsMatchSearchCriteriaTitle",defaultMessage:"No results match your search criteria"}),color:"warning",iconType:"help","data-test-subj":"discoverNoResults"}),shardFailuresMessage,timeFieldMessage,luceneQueryMessage)))}}]);return DiscoverNoResults}(_react.Component);exports.DiscoverNoResults=DiscoverNoResults;_defineProperty(DiscoverNoResults,"propTypes",{shardFailures:_propTypes.default.array,timeFieldName:_propTypes.default.string,queryLanguage:_propTypes.default.string})},9242:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverUninitialized=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DiscoverUninitialized=function DiscoverUninitialized(_ref){var onRefresh=_ref.onRefresh;return _react.default.createElement(_eui.EuiPage,null,_react.default.createElement(_eui.EuiPageBody,null,_react.default.createElement(_eui.EuiPageContent,{horizontalPosition:"center"},_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"discoverApp",title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.uninitializedTitle",defaultMessage:"Start searching"})),body:_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.uninitializedText",defaultMessage:"Write a query, add some filters, or simply hit Refresh to retrieve results for the current query."})),actions:_react.default.createElement(_eui.EuiButton,{color:"primary",fill:true,onClick:onRefresh},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.uninitializedRefreshButtonText",defaultMessage:"Refresh data"}))}))))};exports.DiscoverUninitialized=DiscoverUninitialized},9243:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverUnsupportedIndexPattern=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(4);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var DiscoverUnsupportedIndexPattern=function DiscoverUnsupportedIndexPattern(_ref){var unsupportedType=_ref.unsupportedType;var message=_react.default.createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.requiredPluginIsNotInstalledOrDisabledTitle",defaultMessage:"Index patterns based on {unsupportedType} indices require the {unsupportedType} plugin from X-Pack, which is not installed or disabled",values:{unsupportedType:unsupportedType}});return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"dscNoResults"},_react.default.createElement(_eui.EuiCallOut,{title:message,color:"danger",iconType:"alert"}))))};exports.DiscoverUnsupportedIndexPattern=DiscoverUnsupportedIndexPattern},9244:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.findMinInterval=findMinInterval;exports.DiscoverHistogram=void 0;var _eui=__webpack_require__(1);var _momentTimezone=_interopRequireDefault(__webpack_require__(35));var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(10));var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _eui_theme_dark=_interopRequireDefault(__webpack_require__(50));var _charts=__webpack_require__(42);var _i18n=__webpack_require__(2);var _kibana_services=__webpack_require__(200);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function findIntervalFromDuration(dateValue,esValue,esUnit,timeZone){var date=_momentTimezone.default.tz(dateValue,timeZone);var startOfDate=_momentTimezone.default.tz(date,timeZone).startOf(esUnit);var endOfDate=_momentTimezone.default.tz(date,timeZone).startOf(esUnit).add(esValue,esUnit);return endOfDate.valueOf()-startOfDate.valueOf()}function getIntervalInMs(value,esValue,esUnit,timeZone){switch(esUnit){case"s":return 1e3*esValue;case"ms":return 1*esValue;default:return findIntervalFromDuration(value,esValue,esUnit,timeZone)}}function findMinInterval(xValues,esValue,esUnit,timeZone){return xValues.reduce((function(minInterval,currentXvalue,index){var currentDiff=minInterval;if(index>0){currentDiff=Math.abs(xValues[index-1]-currentXvalue)}var singleUnitInterval=getIntervalInMs(currentXvalue,esValue,esUnit,timeZone);return Math.min(minInterval,singleUnitInterval,currentDiff)}),Number.MAX_SAFE_INTEGER)}var DiscoverHistogram=function(_Component){_inherits(DiscoverHistogram,_Component);function DiscoverHistogram(){var _getPrototypeOf2;var _this;_classCallCheck(this,DiscoverHistogram);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DiscoverHistogram)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"state",{chartsTheme:(0,_kibana_services.getServices)().eui_utils.getChartsThemeDefault()});_defineProperty(_assertThisInitialized(_this),"onBrushEnd",(function(min,max){var range={from:min,to:max};_this.props.timefilterUpdateHandler(range)}));_defineProperty(_assertThisInitialized(_this),"onElementClick",(function(xInterval){return function(elementData){var startRange=elementData[0].x;var range={from:startRange,to:startRange+xInterval};_this.props.timefilterUpdateHandler(range)}}));_defineProperty(_assertThisInitialized(_this),"formatXValue",(function(val){var xAxisFormat=_this.props.chartData.xAxisFormat.params.pattern;return(0,_momentTimezone.default)(val).format(xAxisFormat)}));_defineProperty(_assertThisInitialized(_this),"renderBarTooltip",(function(xInterval,domainStart,domainEnd){return function(headerData){var headerDataValue=headerData.value;var formattedValue=_this.formatXValue(headerDataValue);var partialDataText=_i18n.i18n.translate("kbn.discover.histogram.partialData.bucketTooltipText",{defaultMessage:"The selected time range does not include this entire bucket, it may contain partial data."});if(headerDataValue<domainStart||headerDataValue+xInterval>domainEnd){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",className:"dscHistogram__header--partial",responsive:false,gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{type:"iInCircle"})),_react.default.createElement(_eui.EuiFlexItem,null,partialDataText)),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement("p",null,formattedValue))}return formattedValue}}));return _this}_createClass(DiscoverHistogram,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.subscription=(0,_kibana_services.getServices)().eui_utils.getChartsTheme$().subscribe((function(chartsTheme){return _this2.setState({chartsTheme:chartsTheme})}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.subscription){this.subscription.unsubscribe();this.subscription=undefined}}},{key:"render",value:function render(){var uiSettings=(0,_kibana_services.getServices)().uiSettings;var timeZone=(0,_kibana_services.timezoneProvider)(uiSettings)();var chartData=this.props.chartData;var chartsTheme=this.state.chartsTheme;if(!chartData||!chartData.series[0]){return null}var data=chartData.series[0].values;var _chartData$ordered=chartData.ordered,intervalESValue=_chartData$ordered.intervalESValue,intervalESUnit=_chartData$ordered.intervalESUnit,xInterval=_chartData$ordered.interval;var xValues=chartData.xAxisOrderedValues;var lastXValue=xValues[xValues.length-1];var domain=chartData.ordered;var domainStart=domain.min.valueOf();var domainEnd=domain.max.valueOf();var domainMin=data[0].x>domainStart?domainStart:data[0].x;var domainMax=domainEnd-xInterval>lastXValue?domainEnd-xInterval:lastXValue;var xDomain={min:domainMin,max:domainMax,minInterval:findMinInterval(xValues,intervalESValue,intervalESUnit,timeZone)};var now=(0,_momentTimezone.default)();var isAnnotationAtEdge=(0,_momentTimezone.default)(domainEnd).add(6e4).isAfter(now)&&now.isAfter(domainEnd);var lineAnnotationValue=isAnnotationAtEdge?domainEnd:now;var lineAnnotationData=[{dataValue:lineAnnotationValue}];var isDarkMode=uiSettings.get("theme:darkMode");var lineAnnotationStyle={line:{strokeWidth:2,stroke:isDarkMode?_eui_theme_dark.default.euiColorDanger:_eui_theme_light.default.euiColorDanger,opacity:.7}};var rectAnnotations=[];if(domainStart!==domainMin){rectAnnotations.push({coordinates:{x1:domainStart}})}if(domainEnd!==domainMax){rectAnnotations.push({coordinates:{x0:domainEnd}})}var rectAnnotationStyle={stroke:isDarkMode?_eui_theme_dark.default.euiColorLightShade:_eui_theme_light.default.euiColorDarkShade,strokeWidth:0,opacity:isDarkMode?.6:.2,fill:isDarkMode?_eui_theme_dark.default.euiColorLightShade:_eui_theme_light.default.euiColorDarkShade};var tooltipProps={headerFormatter:this.renderBarTooltip(xInterval,domainStart,domainEnd),type:_charts.TooltipType.VerticalCursor};return _react.default.createElement(_charts.Chart,{size:"100%"},_react.default.createElement(_charts.Settings,{xDomain:xDomain,onBrushEnd:this.onBrushEnd,onElementClick:this.onElementClick(xInterval),tooltip:tooltipProps,theme:chartsTheme}),_react.default.createElement(_charts.Axis,{id:"discover-histogram-left-axis",position:_charts.Position.Left,ticks:5,title:chartData.yAxisLabel}),_react.default.createElement(_charts.Axis,{id:"discover-histogram-bottom-axis",position:_charts.Position.Bottom,title:chartData.xAxisLabel,tickFormat:this.formatXValue,ticks:10}),_react.default.createElement(_charts.LineAnnotation,{id:"line-annotation",domainType:_charts.AnnotationDomainTypes.XDomain,dataValues:lineAnnotationData,hideTooltips:true,style:lineAnnotationStyle}),_react.default.createElement(_charts.RectAnnotation,{dataValues:rectAnnotations,id:"rect-annotation",zIndex:2,style:rectAnnotationStyle,hideTooltips:true}),_react.default.createElement(_charts.HistogramBarSeries,{id:"discover-histogram",xScaleType:_charts.ScaleType.Time,yScaleType:_charts.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],data:data,timeZone:timeZone,name:chartData.yAxisLabel}))}}]);return DiscoverHistogram}(_react.Component);exports.DiscoverHistogram=DiscoverHistogram;_defineProperty(DiscoverHistogram,"propTypes",{chartData:_propTypes.default.object,timefilterUpdateHandler:_propTypes.default.func})}}]);