/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["apm"]=function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var executeModules=data[2];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}deferredModules.push.apply(deferredModules,executeModules||[]);return checkDeferredModules()}function checkDeferredModules(){var result;for(var i=0;i<deferredModules.length;i++){var deferredModule=deferredModules[i];var fulfilled=true;for(var j=1;j<deferredModule.length;j++){var depId=deferredModule[j];if(installedChunks[depId]!==0)fulfilled=false}if(fulfilled){deferredModules.splice(i--,1);result=__webpack_require__(__webpack_require__.s=deferredModule[0])}}return result}var installedModules={};var installedCssChunks={1:0,22:0,24:0,29:0,32:0,39:0};var installedChunks={1:0,22:0,24:0,29:0,32:0,39:0};var deferredModules=[];function jsonpScriptSrc(chunkId){return __webpack_require__.p+""+({}[chunkId]||chunkId)+".bundle.js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var cssChunks={55:1};if(installedCssChunks[chunkId])promises.push(installedCssChunks[chunkId]);else if(installedCssChunks[chunkId]!==0&&cssChunks[chunkId]){promises.push(installedCssChunks[chunkId]=new Promise((function(resolve,reject){var href=""+({}[chunkId]||chunkId)+".style.css";var fullhref=__webpack_require__.p+href;var existingLinkTags=document.getElementsByTagName("link");for(var i=0;i<existingLinkTags.length;i++){var tag=existingLinkTags[i];var dataHref=tag.getAttribute("data-href")||tag.getAttribute("href");if(tag.rel==="stylesheet"&&(dataHref===href||dataHref===fullhref))return resolve()}var existingStyleTags=document.getElementsByTagName("style");for(var i=0;i<existingStyleTags.length;i++){var tag=existingStyleTags[i];var dataHref=tag.getAttribute("data-href");if(dataHref===href||dataHref===fullhref)return resolve()}var linkTag=document.createElement("link");linkTag.rel="stylesheet";linkTag.type="text/css";linkTag.onload=resolve;linkTag.onerror=function(event){var request=event&&event.target&&event.target.src||fullhref;var err=new Error("Loading CSS chunk "+chunkId+" failed.\n("+request+")");err.code="CSS_CHUNK_LOAD_FAILED";err.request=request;delete installedCssChunks[chunkId];linkTag.parentNode.removeChild(linkTag);reject(err)};linkTag.href=fullhref;var head=document.getElementsByTagName("head")[0];head.appendChild(linkTag)})).then((function(){installedCssChunks[chunkId]=0})))}var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([4291,0]);return checkDeferredModules()}({0:function(module,exports){module.exports=__kbnSharedDeps__.React},1:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},1001:function(module,exports,__webpack_require__){module.exports=__webpack_require__(17)(3215)},123:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAPMHref=getAPMHref;exports.APMLink=APMLink;exports.PERSISTENT_APM_PARAMS=void 0;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _url=_interopRequireDefault(__webpack_require__(71));var _lodash=__webpack_require__(3);var _useLocation2=__webpack_require__(156);var _url_helpers=__webpack_require__(95);var _constants=__webpack_require__(836);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PERSISTENT_APM_PARAMS=["kuery","rangeFrom","rangeTo","refreshPaused","refreshInterval","environment"];exports.PERSISTENT_APM_PARAMS=PERSISTENT_APM_PARAMS;function getAPMHref(path,currentSearch){var query=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var currentQuery=(0,_url_helpers.toQuery)(currentSearch);var nextQuery=_objectSpread({},_constants.TIMEPICKER_DEFAULTS,{},(0,_lodash.pick)(currentQuery,PERSISTENT_APM_PARAMS),{},query);var nextSearch=(0,_url_helpers.fromQuery)(nextQuery);return _url.default.format({pathname:"",hash:"".concat(path,"?").concat(nextSearch)})}function APMLink(_ref){var _ref$path=_ref.path,path=_ref$path===void 0?"":_ref$path,query=_ref.query,rest=_objectWithoutProperties(_ref,["path","query"]);var _useLocation=(0,_useLocation2.useLocation)(),search=_useLocation.search;var href=getAPMHref(path,search,query);return _react.default.createElement(_eui.EuiLink,_extends({},rest,{href:href}))}},13:function(module,exports){module.exports=__kbnSharedDeps__.Moment},136:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.history=void 0;var _history=__webpack_require__(276);var history=(0,_history.createHashHistory)();exports.history=history},1506:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ApmPlugin=exports.REACT_APP_ROOT_ID=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(9));var _reactRouterDom=__webpack_require__(23);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _metadata=__webpack_require__(272);var _featureCatalogueEntry=__webpack_require__(1507);var _route_config=__webpack_require__(4294);var _ScrollToTopOnPathChange=__webpack_require__(4472);var _UpdateBreadcrumbs=__webpack_require__(4473);var _ApmPluginContext=__webpack_require__(450);var _LicenseContext=__webpack_require__(585);var _LoadingIndicatorContext=__webpack_require__(1508);var _LocationContext=__webpack_require__(1509);var _MatchedRouteContext=__webpack_require__(4475);var _UrlParamsContext=__webpack_require__(452);var _index_pattern=__webpack_require__(4476);var _variables=__webpack_require__(38);var _history=__webpack_require__(136);var _getConfigFromInjectedMetadata=__webpack_require__(4477);var _setHelpExtension=__webpack_require__(4478);var _toggleAppLinkInNav=__webpack_require__(4479);var _updateBadge=__webpack_require__(4480);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var REACT_APP_ROOT_ID="react-apm-root";exports.REACT_APP_ROOT_ID=REACT_APP_ROOT_ID;var MainContainer=_styledComponents.default.main.withConfig({displayName:"MainContainer",componentId:"sc-1pgjfdb-0"})(["min-width:",";padding:",";height:100%;"],(0,_variables.px)(_variables.unit*50),(0,_variables.px)(_variables.units.plus));var App=function App(){return _react.default.createElement(MainContainer,{"data-test-subj":"apmMainContainer"},_react.default.createElement(_UpdateBreadcrumbs.UpdateBreadcrumbs,{routes:_route_config.routes}),_react.default.createElement(_reactRouterDom.Route,{component:_ScrollToTopOnPathChange.ScrollToTopOnPathChange}),_react.default.createElement(_reactRouterDom.Switch,null,_route_config.routes.map((function(route,i){return _react.default.createElement(_reactRouterDom.Route,_extends({key:i},route))}))))};var ApmPlugin=function(){function ApmPlugin(initializerContext){_classCallCheck(this,ApmPlugin);this.initializerContext=initializerContext;_defineProperty(this,"setupPlugins",{})}_createClass(ApmPlugin,[{key:"setup",value:function setup(_core,plugins){plugins.home.featureCatalogue.register(_featureCatalogueEntry.featureCatalogueEntry);this.setupPlugins=plugins}},{key:"start",value:function start(core){var i18nCore=core.i18n;var plugins=this.setupPlugins;var config=(0,_getConfigFromInjectedMetadata.getConfigFromInjectedMetadata)();var packageInfo=_metadata.metadata;(0,_setHelpExtension.setHelpExtension)(core);(0,_updateBadge.setReadonlyBadge)(core);(0,_toggleAppLinkInNav.toggleAppLinkInNav)(core,config);var apmPluginContextValue={config:config,core:core,packageInfo:packageInfo,plugins:plugins};_reactDom.default.render(_react.default.createElement(_ApmPluginContext.ApmPluginContext.Provider,{value:apmPluginContextValue},_react.default.createElement(i18nCore.Context,null,_react.default.createElement(_reactRouterDom.Router,{history:_history.history},_react.default.createElement(_LocationContext.LocationProvider,null,_react.default.createElement(_MatchedRouteContext.MatchedRouteProvider,{routes:_route_config.routes},_react.default.createElement(_UrlParamsContext.UrlParamsProvider,null,_react.default.createElement(_LoadingIndicatorContext.LoadingIndicatorProvider,null,_react.default.createElement(_LicenseContext.LicenseProvider,null,_react.default.createElement(App,null))))))))),document.getElementById(REACT_APP_ROOT_ID));(0,_index_pattern.createStaticIndexPattern)(core.http).catch((function(e){console.log("Error fetching static index pattern",e)}))}},{key:"stop",value:function stop(){}}]);return ApmPlugin}();exports.ApmPlugin=ApmPlugin},1508:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingIndicatorProvider=LoadingIndicatorProvider;exports.LoadingIndicatorContext=void 0;var _eui=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _useDelayedVisibility=__webpack_require__(4296);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var LoadingIndicatorContext=_react.default.createContext({statuses:{},dispatchStatus:function dispatchStatus(action){return undefined}});exports.LoadingIndicatorContext=LoadingIndicatorContext;function reducer(statuses,action){if(action.isLoading){return _objectSpread({},statuses,_defineProperty({},action.id,true))}var _action$id=action.id,statusToRemove=statuses[_action$id],restStatuses=_objectWithoutProperties(statuses,[_action$id].map(_toPropertyKey));return restStatuses}function getIsAnyLoading(statuses){return Object.values(statuses).some((function(isLoading){return isLoading}))}function LoadingIndicatorProvider(_ref){var children=_ref.children;var _useReducer=(0,_react.useReducer)(reducer,{}),_useReducer2=_slicedToArray(_useReducer,2),statuses=_useReducer2[0],dispatchStatus=_useReducer2[1];var isLoading=(0,_react.useMemo)((function(){return getIsAnyLoading(statuses)}),[statuses]);var shouldShowLoadingIndicator=(0,_useDelayedVisibility.useDelayedVisibility)(isLoading);var contextValue=_react.default.useMemo((function(){return{statuses:statuses,dispatchStatus:dispatchStatus}}),[statuses]);return _react.default.createElement(_react.Fragment,null,shouldShowLoadingIndicator&&_react.default.createElement(_eui.EuiPortal,null,_react.default.createElement(_eui.EuiProgress,{size:"xs",position:"fixed"})),_react.default.createElement(LoadingIndicatorContext.Provider,{value:contextValue,children:children}))}},1509:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LocationProvider=exports.LocationContext=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _reactRouterDom=__webpack_require__(23);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var initialLocation={};var LocationContext=(0,_react.createContext)(initialLocation);exports.LocationContext=LocationContext;var LocationProvider=(0,_reactRouterDom.withRouter)((function(_ref){var location=_ref.location,children=_ref.children;return _react.default.createElement(LocationContext.Provider,{children:children,value:location})}));exports.LocationProvider=LocationProvider},1510:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resolveUrlParams=resolveUrlParams;var _helpers=__webpack_require__(835);var _url_helpers=__webpack_require__(95);var _constants=__webpack_require__(836);var _config=__webpack_require__(837);var _pickKeys=__webpack_require__(188);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function resolveUrlParams(location,state){var _getPathParams=(0,_helpers.getPathParams)(location.pathname),processorEvent=_getPathParams.processorEvent,serviceName=_getPathParams.serviceName,serviceNodeName=_getPathParams.serviceNodeName,errorGroupId=_getPathParams.errorGroupId,traceIdLink=_getPathParams.traceId;var query=(0,_url_helpers.toQuery)(location.search);var traceId=query.traceId,transactionId=query.transactionId,transactionName=query.transactionName,transactionType=query.transactionType,detailTab=query.detailTab,flyoutDetailTab=query.flyoutDetailTab,waterfallItemId=query.waterfallItemId,spanId=query.spanId,page=query.page,pageSize=query.pageSize,sortDirection=query.sortDirection,sortField=query.sortField,kuery=query.kuery,_query$refreshPaused=query.refreshPaused,refreshPaused=_query$refreshPaused===void 0?_constants.TIMEPICKER_DEFAULTS.refreshPaused:_query$refreshPaused,_query$refreshInterva=query.refreshInterval,refreshInterval=_query$refreshInterva===void 0?_constants.TIMEPICKER_DEFAULTS.refreshInterval:_query$refreshInterva,_query$rangeFrom=query.rangeFrom,rangeFrom=_query$rangeFrom===void 0?_constants.TIMEPICKER_DEFAULTS.rangeFrom:_query$rangeFrom,_query$rangeTo=query.rangeTo,rangeTo=_query$rangeTo===void 0?_constants.TIMEPICKER_DEFAULTS.rangeTo:_query$rangeTo,environment=query.environment,searchTerm=query.searchTerm;var localUIFilters=_pickKeys.pickKeys.apply(void 0,[query].concat(_toConsumableArray(_config.localUIFilterNames)));return(0,_helpers.removeUndefinedProps)(_objectSpread({start:(0,_helpers.getStart)(state,rangeFrom),end:(0,_helpers.getEnd)(state,rangeTo),rangeFrom:rangeFrom,rangeTo:rangeTo,refreshPaused:(0,_helpers.toBoolean)(refreshPaused),refreshInterval:(0,_helpers.toNumber)(refreshInterval),sortDirection:sortDirection,sortField:sortField,page:(0,_helpers.toNumber)(page)||0,pageSize:pageSize?(0,_helpers.toNumber)(pageSize):undefined,transactionId:(0,_helpers.toString)(transactionId),traceId:(0,_helpers.toString)(traceId),waterfallItemId:(0,_helpers.toString)(waterfallItemId),detailTab:(0,_helpers.toString)(detailTab),flyoutDetailTab:(0,_helpers.toString)(flyoutDetailTab),spanId:(0,_helpers.toNumber)(spanId),kuery:kuery&&decodeURIComponent(kuery),transactionName:transactionName,transactionType:transactionType,searchTerm:(0,_helpers.toString)(searchTerm),processorEvent:processorEvent,serviceName:serviceName,traceIdLink:traceIdLink,errorGroupId:errorGroupId,serviceNodeName:serviceNodeName?decodeURIComponent(serviceNodeName):serviceNodeName,environment:environment},localUIFilters))}},1511:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useDeepObjectIdentity=useDeepObjectIdentity;var _react=__webpack_require__(0);var _lodash=__webpack_require__(3);function useDeepObjectIdentity(value){var valueRef=(0,_react.useRef)(value);if(!(0,_lodash.isEqual)(valueRef.current,value)){valueRef.current=value}return valueRef.current}},1512:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTimepickerRisonData=getTimepickerRisonData;var _constants=__webpack_require__(836);var _url_helpers=__webpack_require__(95);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getTimepickerRisonData(currentSearch){var currentQuery=(0,_url_helpers.toQuery)(currentSearch);var nextQuery=_objectSpread({},_constants.TIMEPICKER_DEFAULTS,{},currentQuery);return{time:{from:encodeURIComponent(nextQuery.rangeFrom),to:encodeURIComponent(nextQuery.rangeTo)},refreshInterval:{pause:String(nextQuery.refreshPaused),value:String(nextQuery.refreshInterval)}}}},1513:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.flattenObject=void 0;var _lodash=__webpack_require__(3);var flattenObject=function flattenObject(item,parentKey){if(item){var isArrayWithSingleValue=Array.isArray(item)&&item.length===1;return Object.keys(item).sort().reduce((function(acc,key){var childKey=isArrayWithSingleValue?"":key;var currentKey=(0,_lodash.compact)([parentKey,childKey]).join(".");if((0,_lodash.isObject)(item[key])){return acc.concat(flattenObject(item[key],currentKey))}else{acc.push({key:currentKey,value:item[key]});return acc}}),[])}return[]};exports.flattenObject=flattenObject},1514:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HeightRetainer=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var HeightRetainer=function HeightRetainer(props){var containerElement=(0,_react.useRef)(null);var minHeight=(0,_react.useRef)(0);(0,_react.useEffect)((function(){if(containerElement.current){var currentHeight=containerElement.current.clientHeight;if(minHeight.current<currentHeight){minHeight.current=currentHeight}}}));return _react.default.createElement("div",_extends({},props,{ref:containerElement,style:{minHeight:minHeight.current}}))};exports.HeightRetainer=HeightRetainer},1515:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KeyValueTable=KeyValueTable;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _FormattedValue=__webpack_require__(4317);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function KeyValueTable(_ref){var keyValuePairs=_ref.keyValuePairs,_ref$tableProps=_ref.tableProps,tableProps=_ref$tableProps===void 0?{}:_ref$tableProps;return _react.default.createElement(_eui.EuiTable,_extends({compressed:true},tableProps),_react.default.createElement(_eui.EuiTableBody,null,keyValuePairs.map((function(_ref2){var key=_ref2.key,value=_ref2.value;return _react.default.createElement(_eui.EuiTableRow,{key:key},_react.default.createElement(_eui.EuiTableRowCell,null,_react.default.createElement("strong",{"data-testid":"dot-key"},key)),_react.default.createElement(_eui.EuiTableRowCell,{"data-testid":"value"},_react.default.createElement(_FormattedValue.FormattedValue,{value:value})))}))))}},1516:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Stackframe=Stackframe;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _eui=__webpack_require__(1);var _variables=__webpack_require__(38);var _FrameHeading=__webpack_require__(4319);var _Context=__webpack_require__(4320);var _Variables=__webpack_require__(4324);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ContextContainer=_styledComponents.default.div.withConfig({displayName:"ContextContainer",componentId:"rraigy-0"})(["position:relative;font-family:",";font-size:",";border:1px solid ",";border-radius:",";background:",";"],_variables.fontFamilyCode,_variables.fontSize,_eui_theme_light.default.euiColorLightShade,_variables.borderRadius,(function(props){return props.isLibraryFrame?_eui_theme_light.default.euiColorEmptyShade:_eui_theme_light.default.euiColorLightestShade}));function Stackframe(_ref){var stackframe=_ref.stackframe,codeLanguage=_ref.codeLanguage,id=_ref.id,_ref$initialIsOpen=_ref.initialIsOpen,initialIsOpen=_ref$initialIsOpen===void 0?false:_ref$initialIsOpen,_ref$isLibraryFrame=_ref.isLibraryFrame,isLibraryFrame=_ref$isLibraryFrame===void 0?false:_ref$isLibraryFrame;if(!hasLineContext(stackframe)){return _react.default.createElement(_FrameHeading.FrameHeading,{stackframe:stackframe,isLibraryFrame:isLibraryFrame})}return _react.default.createElement(_eui.EuiAccordion,{buttonContent:_react.default.createElement(_FrameHeading.FrameHeading,{stackframe:stackframe,isLibraryFrame:isLibraryFrame}),id:id,initialIsOpen:initialIsOpen},_react.default.createElement(ContextContainer,{isLibraryFrame:isLibraryFrame},_react.default.createElement(_Context.Context,{stackframe:stackframe,codeLanguage:codeLanguage,isLibraryFrame:isLibraryFrame})),_react.default.createElement(_Variables.Variables,{vars:stackframe.vars}))}function hasLineContext(stackframe){return stackframe.line.hasOwnProperty("context")}},1519:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.httpStatusCodeToColor=httpStatusCodeToColor;exports.warningColor=exports.successColor=exports.neutralColor=exports.errorColor=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var euiColorDarkShade=_eui_theme_light.default.euiColorDarkShade,euiColorWarning=_eui_theme_light.default.euiColorWarning;var errorColor="#c23c2b";exports.errorColor=errorColor;var neutralColor=euiColorDarkShade;exports.neutralColor=neutralColor;var successColor="#327a42";exports.successColor=successColor;var warningColor=euiColorWarning;exports.warningColor=warningColor;var httpStatusCodeColors={1:neutralColor,2:successColor,3:neutralColor,4:warningColor,5:errorColor};function getStatusColor(status){return httpStatusCodeColors[status.toString().substr(0,1)]}function httpStatusCodeToColor(status){if(typeof status==="string"){return getStatusColor(parseInt(status.replace(/\D/g,""),10))}else{return getStatusColor(status)}}},1520:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UserAgentSummaryItem=UserAgentSummaryItem;var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Version=(0,_styledComponents.default)("span").withConfig({displayName:"Version",componentId:"sc-1umx1ms-0"})(["font-size:",";"],_eui_theme_light.default.euiFontSizeS);function UserAgentSummaryItem(_ref){var name=_ref.name,version=_ref.version;return _react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.userAgentAndVersionLabel",{defaultMessage:"User agent & version"})},_react.default.createElement(_react.default.Fragment,null,name,"Â ",version&&_react.default.createElement(Version,null,"(",version,")")))}},1521:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFormattedBuckets=getFormattedBuckets;exports.ErrorDistribution=ErrorDistribution;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _d3Scale=__webpack_require__(253);var _d=_interopRequireDefault(__webpack_require__(48));var _react=_interopRequireDefault(__webpack_require__(0));var _formatters=__webpack_require__(85);var _getTimezoneOffsetInMs=__webpack_require__(844);var _Histogram=_interopRequireDefault(__webpack_require__(1522));var _EmptyMessage=__webpack_require__(453);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFormattedBuckets(buckets,bucketSize){if(!buckets){return null}return buckets.map((function(_ref){var count=_ref.count,key=_ref.key;return{x0:key,x:key+bucketSize,y:count}}))}var tooltipHeader=function tooltipHeader(bucket){return(0,_formatters.asRelativeDateTimeRange)(bucket.x0,bucket.x)};function ErrorDistribution(_ref2){var distribution=_ref2.distribution,title=_ref2.title;var buckets=getFormattedBuckets(distribution.buckets,distribution.bucketSize);if(!buckets||distribution.noHits){return _react.default.createElement(_EmptyMessage.EmptyMessage,{heading:_i18n.i18n.translate("xpack.apm.errorGroupDetails.noErrorsLabel",{defaultMessage:"No errors were found"})})}var xMin=_d.default.min(buckets,(function(d){return d.x0}));var xMax=_d.default.max(buckets,(function(d){return d.x}));var tickFormat=(0,_d3Scale.scaleUtc)().domain([xMin,xMax]).tickFormat();return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,title)),_react.default.createElement(_Histogram.default,{tooltipHeader:tooltipHeader,verticalLineHover:function verticalLineHover(bucket){return bucket.x},xType:"time-utc",formatX:function formatX(value){var time=value.getTime();return tickFormat(new Date(time-(0,_getTimezoneOffsetInMs.getTimezoneOffsetInMs)(time)))},buckets:buckets,bucketSize:distribution.bucketSize,formatYShort:function formatYShort(value){return _i18n.i18n.translate("xpack.apm.errorGroupDetails.occurrencesShortLabel",{defaultMessage:"{occCount} occ.",values:{occCount:value}})},formatYLong:function formatYLong(value){return _i18n.i18n.translate("xpack.apm.errorGroupDetails.occurrencesLongLabel",{defaultMessage:"{occCount} occurrences",values:{occCount:value}})}}))}},1522:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.HistogramInner=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _d2=_interopRequireDefault(__webpack_require__(48));var _lodash=__webpack_require__(3);var _propTypes=_interopRequireDefault(__webpack_require__(5));var _d3Scale=__webpack_require__(253);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _SingleRect=_interopRequireDefault(__webpack_require__(4333));var _reactVis=__webpack_require__(230);var _variables=__webpack_require__(38);var _Tooltip=_interopRequireDefault(__webpack_require__(1523));var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _polished=__webpack_require__(91);var _timezone=__webpack_require__(1524);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var XY_HEIGHT=_variables.unit*10;var XY_MARGIN={top:_variables.unit,left:_variables.unit*5,right:_variables.unit,bottom:_variables.unit*2};var X_TICK_TOTAL=8;var ChartsWrapper=_styledComponents.default.div.withConfig({displayName:"ChartsWrapper",componentId:"sc-17u2nd5-0"})(["user-select:none;position:absolute;top:0;left:0;"]);var HistogramInner=function(_PureComponent){_inherits(HistogramInner,_PureComponent);function HistogramInner(props){var _this;_classCallCheck(this,HistogramInner);_this=_possibleConstructorReturn(this,_getPrototypeOf(HistogramInner).call(this,props));_defineProperty(_assertThisInitialized(_this),"onClick",(function(bucket){if(_this.props.onClick){_this.props.onClick(bucket)}}));_defineProperty(_assertThisInitialized(_this),"onHover",(function(bucket){_this.setState({hoveredBucket:bucket})}));_defineProperty(_assertThisInitialized(_this),"onBlur",(function(){_this.setState({hoveredBucket:{}})}));_this.state={hoveredBucket:{}};return _this}_createClass(HistogramInner,[{key:"getChartData",value:function getChartData(items,selectedItem){var yMax=_d2.default.max(items,(function(d){return d.y}));var MINIMUM_BUCKET_SIZE=yMax*.02;return items.map((function(item){var padding=(item.x-item.x0)/20;return _objectSpread({},item,{color:item===selectedItem?_eui_theme_light.default.euiColorVis1:(0,_polished.tint)(.5,_eui_theme_light.default.euiColorVis1),x0:item.x0+padding,x:item.x-padding,y:item.y>0?Math.max(item.y,MINIMUM_BUCKET_SIZE):0})}))}},{key:"render",value:function render(){var _this$props=this.props,backgroundHover=_this$props.backgroundHover,bucketIndex=_this$props.bucketIndex,buckets=_this$props.buckets,bucketSize=_this$props.bucketSize,formatX=_this$props.formatX,formatYShort=_this$props.formatYShort,formatYLong=_this$props.formatYLong,tooltipFooter=_this$props.tooltipFooter,tooltipHeader=_this$props.tooltipHeader,verticalLineHover=_this$props.verticalLineHover,XY_WIDTH=_this$props.width;var hoveredBucket=this.state.hoveredBucket;if((0,_lodash.isEmpty)(buckets)||XY_WIDTH===0){return null}var isTimeSeries=this.props.xType==="time"||this.props.xType==="time-utc";var xMin=_d2.default.min(buckets,(function(d){return d.x0}));var xMax=_d2.default.max(buckets,(function(d){return d.x}));var yMin=0;var yMax=_d2.default.max(buckets,(function(d){return d.y}));var selectedBucket=buckets[bucketIndex];var chartData=this.getChartData(buckets,selectedBucket);var _x=(0,_d3Scale.scaleLinear)().domain([xMin,xMax]).range([XY_MARGIN.left,XY_WIDTH-XY_MARGIN.right]);var y=(0,_d3Scale.scaleLinear)().domain([yMin,yMax]).range([XY_HEIGHT,0]).nice();var _getDomainTZ=(0,_timezone.getDomainTZ)(xMin,xMax),_getDomainTZ2=_slicedToArray(_getDomainTZ,2),xMinZone=_getDomainTZ2[0],xMaxZone=_getDomainTZ2[1];var xTickValues=isTimeSeries?(0,_timezone.getTimeTicksTZ)({domain:[xMinZone,xMaxZone],totalTicks:X_TICK_TOTAL,width:XY_WIDTH}):undefined;var xDomain=_x.domain();var yDomain=y.domain();var yTickValues=[0,yDomain[1]/2,yDomain[1]];var shouldShowTooltip=hoveredBucket.x>0&&(hoveredBucket.y>0||isTimeSeries);var showVerticalLineHover=verticalLineHover(hoveredBucket);var showBackgroundHover=backgroundHover(hoveredBucket);return _react.default.createElement("div",{style:{position:"relative",height:XY_HEIGHT}},_react.default.createElement(ChartsWrapper,null,_react.default.createElement(_reactVis.XYPlot,{xType:this.props.xType,width:XY_WIDTH,height:XY_HEIGHT,margin:XY_MARGIN,xDomain:xDomain,yDomain:yDomain},_react.default.createElement(_reactVis.HorizontalGridLines,{tickValues:yTickValues}),_react.default.createElement(_reactVis.XAxis,{style:{strokeWidth:"1px"},marginRight:10,tickSizeOuter:10,tickSizeInner:0,tickTotal:X_TICK_TOTAL,tickFormat:formatX,tickValues:xTickValues}),_react.default.createElement(_reactVis.YAxis,{tickSize:0,hideLine:true,tickValues:yTickValues,tickFormat:formatYShort}),showBackgroundHover&&_react.default.createElement(_SingleRect.default,{x:_x(hoveredBucket.x0),width:_x(bucketSize)-_x(0),style:{fill:_eui_theme_light.default.euiColorLightestShade}}),shouldShowTooltip&&_react.default.createElement(_Tooltip.default,{style:{marginLeft:"1%",marginRight:"1%"},header:tooltipHeader(hoveredBucket),footer:tooltipFooter(hoveredBucket),tooltipPoints:[{value:formatYLong(hoveredBucket.y)}],x:hoveredBucket.xCenter,y:yDomain[1]/2}),selectedBucket&&_react.default.createElement(_SingleRect.default,{x:_x(selectedBucket.x0),width:_x(bucketSize)-_x(0),style:{fill:"transparent",stroke:_eui_theme_light.default.euiColorVis1,rx:"0px",ry:"0px"}}),_react.default.createElement(_reactVis.VerticalRectSeries,{colorType:"literal",data:chartData,style:{rx:"0px",ry:"0px"}}),showVerticalLineHover&&_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:[hoveredBucket.x]}),_react.default.createElement(_reactVis.Voronoi,{extent:[[XY_MARGIN.left,XY_MARGIN.top],[XY_WIDTH,XY_HEIGHT]],nodes:buckets.map((function(bucket){return _objectSpread({},bucket,{xCenter:(bucket.x0+bucket.x)/2})})),onClick:this.onClick,onHover:this.onHover,onBlur:this.onBlur,x:function x(d){return _x(d.xCenter)},y:function y(){return 1}}))))}}]);return HistogramInner}(_react.PureComponent);exports.HistogramInner=HistogramInner;HistogramInner.propTypes={backgroundHover:_propTypes.default.func,bucketIndex:_propTypes.default.number,buckets:_propTypes.default.array.isRequired,bucketSize:_propTypes.default.number.isRequired,formatX:_propTypes.default.func,formatYLong:_propTypes.default.func,formatYShort:_propTypes.default.func,onClick:_propTypes.default.func,tooltipFooter:_propTypes.default.func,tooltipHeader:_propTypes.default.func,verticalLineHover:_propTypes.default.func,width:_propTypes.default.number.isRequired,xType:_propTypes.default.string};HistogramInner.defaultProps={backgroundHover:function backgroundHover(){return null},formatYLong:function formatYLong(value){return value},formatYShort:function formatYShort(value){return value},tooltipFooter:function tooltipFooter(){return null},tooltipHeader:function tooltipHeader(){return null},verticalLineHover:function verticalLineHover(){return null},xType:"linear"};var _default=(0,_reactVis.makeWidthFlexible)(HistogramInner);exports.default=_default},1523:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=Tooltip;var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(3);var _reactVis=__webpack_require__(230);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _variables=__webpack_require__(38);var _Legend=__webpack_require__(455);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _formatters=__webpack_require__(85);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var TooltipElm=_styledComponents.default.div.withConfig({displayName:"TooltipElm",componentId:"sc-1b5o2y6-0"})(["margin:0 ",";transform:translateY(-50%);border:1px solid ",";background:",";border-radius:",";font-size:",";color:",";"],(0,_variables.px)(_variables.unit),_eui_theme_light.default.euiColorLightShade,_eui_theme_light.default.euiColorEmptyShade,_variables.borderRadius,_variables.fontSize,_eui_theme_light.default.euiColorFullShade);var Header=_styledComponents.default.div.withConfig({displayName:"Header",componentId:"sc-1b5o2y6-1"})(["background:",";border-bottom:1px solid ",";border-radius:"," "," 0 0;padding:",";color:",";"],_eui_theme_light.default.euiColorLightestShade,_eui_theme_light.default.euiColorLightShade,_variables.borderRadius,_variables.borderRadius,(0,_variables.px)(_variables.units.half),_eui_theme_light.default.euiColorMediumShade);var Content=_styledComponents.default.div.withConfig({displayName:"Content",componentId:"sc-1b5o2y6-2"})(["margin:",";margin-right:",";font-size:",";"],(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.unit),_variables.fontSizes.small);var Footer=_styledComponents.default.div.withConfig({displayName:"Footer",componentId:"sc-1b5o2y6-3"})(["color:",";margin:",";font-size:",";"],_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.units.half),_variables.fontSizes.small);var LegendContainer=_styledComponents.default.div.withConfig({displayName:"LegendContainer",componentId:"sc-1b5o2y6-4"})(["display:flex;align-items:center;margin-bottom:",";justify-content:space-between;"],(0,_variables.px)(_variables.units.quarter));var LegendGray=(0,_styledComponents.default)(_Legend.Legend).withConfig({displayName:"LegendGray",componentId:"sc-1b5o2y6-5"})(["color:",";padding-bottom:0;padding-right:",";"],_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.units.half));var Value=_styledComponents.default.div.withConfig({displayName:"Value",componentId:"sc-1b5o2y6-6"})(["color:",";font-size:",";"],_eui_theme_light.default.euiColorDarkShade,_variables.fontSize);function Tooltip(_ref){var header=_ref.header,footer=_ref.footer,tooltipPoints=_ref.tooltipPoints,x=_ref.x,y=_ref.y,props=_objectWithoutProperties(_ref,["header","footer","tooltipPoints","x","y"]);if((0,_lodash.isEmpty)(tooltipPoints)){return null}var showLegends=tooltipPoints.length>1;return _react.default.createElement(_reactVis.Hint,_extends({},props,{value:{x:x,y:y}}),_react.default.createElement(TooltipElm,null,_react.default.createElement(Header,null,header||(0,_formatters.asAbsoluteDateTime)(x,"seconds")),_react.default.createElement(Content,null,showLegends?tooltipPoints.map((function(point,i){return _react.default.createElement(LegendContainer,{key:i},_react.default.createElement(LegendGray,{fontSize:_variables.fontSize.tiny,radius:_variables.units.half,color:point.color,text:point.text}),_react.default.createElement(Value,null,point.value))})):_react.default.createElement(Value,null,tooltipPoints[0].value)),_react.default.createElement(Footer,null,footer)))}Tooltip.propTypes={header:_propTypes.default.string,tooltipPoints:_propTypes.default.array.isRequired,x:_propTypes.default.number,y:_propTypes.default.number};Tooltip.defaultProps={};module.exports=exports.default},1524:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDomainTZ=exports.getTimeTicksTZ=void 0;var _d2=_interopRequireDefault(__webpack_require__(48));var _getTimezoneOffsetInMs=__webpack_require__(844);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var getTimeTicksTZ=function getTimeTicksTZ(_ref){var domain=_ref.domain,totalTicks=_ref.totalTicks,width=_ref.width;return _d2.default.time.scale.utc().domain(domain).range([0,width]).ticks(totalTicks).map((function(x){var time=x.getTime();return new Date(time+(0,_getTimezoneOffsetInMs.getTimezoneOffsetInMs)(time))}))};exports.getTimeTicksTZ=getTimeTicksTZ;var getDomainTZ=function getDomainTZ(min,max){var _map=[min,max].map((function(time){return time-(0,_getTimezoneOffsetInMs.getTimezoneOffsetInMs)(time)})),_map2=_slicedToArray(_map,2),xMinZone=_map2[0],xMaxZone=_map2[1];return[xMinZone,xMaxZone]};exports.getDomainTZ=getDomainTZ},1525:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorDetailLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var ErrorDetailLink=function ErrorDetailLink(_ref){var serviceName=_ref.serviceName,errorGroupId=_ref.errorGroupId,rest=_objectWithoutProperties(_ref,["serviceName","errorGroupId"]);return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/errors/").concat(errorGroupId)},rest))};exports.ErrorDetailLink=ErrorDetailLink},1526:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useTransactionCharts=useTransactionCharts;var _react=__webpack_require__(0);var _chartSelectors=__webpack_require__(4345);var _useFetcher2=__webpack_require__(54);var _useUrlParams2=__webpack_require__(45);function useTransactionCharts(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,serviceName=_useUrlParams$urlPara.serviceName,transactionType=_useUrlParams$urlPara.transactionType,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end,transactionName=_useUrlParams$urlPara.transactionName,uiFilters=_useUrlParams.uiFilters;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_groups/charts",params:{path:{serviceName:serviceName},query:{start:start,end:end,transactionType:transactionType,transactionName:transactionName,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,transactionName,transactionType,uiFilters]),data=_useFetcher.data,error=_useFetcher.error,status=_useFetcher.status;var memoizedData=(0,_react.useMemo)((function(){return(0,_chartSelectors.getTransactionCharts)({transactionType:transactionType},data)}),[data,transactionType]);return{data:memoizedData,status:status,error:error}}},1527:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMlPrefix=getMlPrefix;exports.getMlJobId=getMlJobId;exports.getMlIndex=getMlIndex;function getMlPrefix(serviceName,transactionType){var maybeTransactionType=transactionType?"".concat(transactionType,"-"):"";return"".concat(serviceName,"-").concat(maybeTransactionType).toLowerCase()}function getMlJobId(serviceName,transactionType){return"".concat(getMlPrefix(serviceName,transactionType),"high_mean_response_time")}function getMlIndex(serviceName,transactionType){return".ml-anomalies-".concat(getMlJobId(serviceName,transactionType))}},1528:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MLLink=MLLink;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _url=_interopRequireDefault(__webpack_require__(71));var _risonNode=_interopRequireDefault(__webpack_require__(163));var _useLocation=__webpack_require__(156);var _rison_helpers=__webpack_require__(1512);var _useApmPluginContext2=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function MLLink(_ref){var children=_ref.children,_ref$path=_ref.path,path=_ref$path===void 0?"":_ref$path,_ref$query=_ref.query,query=_ref$query===void 0?{}:_ref$query;var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var location=(0,_useLocation.useLocation)();var risonQuery=(0,_rison_helpers.getTimepickerRisonData)(location.search);if(query.ml){risonQuery.ml=query.ml}var href=_url.default.format({pathname:core.http.basePath.prepend("/app/ml"),hash:"".concat(path,"?_g=").concat(_risonNode.default.encode(risonQuery))});return _react.default.createElement(_eui.EuiLink,{children:children,href:href})}},1529:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useChartsSync=useChartsSync;var _react=__webpack_require__(0);var _ChartsSyncContext=__webpack_require__(456);function useChartsSync(){var context=(0,_react.useContext)(_ChartsSyncContext.ChartsSyncContext);if(!context){throw new Error("Missing ChartsSync context provider")}return context}},1530:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.InnerCustomPlot=void 0;var _lodash=__webpack_require__(3);var _reactVis=__webpack_require__(230);var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireWildcard(__webpack_require__(0));var _Legends=_interopRequireDefault(__webpack_require__(4349));var _StaticPlot=_interopRequireDefault(__webpack_require__(4350));var _InteractivePlot=_interopRequireDefault(__webpack_require__(4352));var _VoronoiPlot=_interopRequireDefault(__webpack_require__(4354));var _AnnotationsPlot=__webpack_require__(4355);var _reselect=__webpack_require__(151);var _plotUtils=__webpack_require__(457);var _isValidCoordinateValue=__webpack_require__(458);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VISIBLE_LEGEND_COUNT=4;function getHiddenLegendCount(series){return series.filter((function(serie){return serie.hideLegend})).length}var InnerCustomPlot=function(_PureComponent){_inherits(InnerCustomPlot,_PureComponent);function InnerCustomPlot(){var _getPrototypeOf2;var _this;_classCallCheck(this,InnerCustomPlot);for(var _len=arguments.length,_args=new Array(_len),_key=0;_key<_len;_key++){_args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InnerCustomPlot)).call.apply(_getPrototypeOf2,[this].concat(_args)));_defineProperty(_assertThisInitialized(_this),"state",{seriesEnabledState:[],isDrawing:false,selectionStart:null,selectionEnd:null,showAnnotations:true});_defineProperty(_assertThisInitialized(_this),"getEnabledSeries",(0,_reselect.createSelector)((function(state){return state.visibleSeries}),(function(state){return state.seriesEnabledState}),(function(visibleSeries,seriesEnabledState){return visibleSeries.filter((function(serie,i){return!seriesEnabledState[i]}))})));_defineProperty(_assertThisInitialized(_this),"getOptions",(0,_reselect.createSelector)((function(state){return state.width}),(function(state){return state.yMin}),(function(state){return state.yMax}),(function(state){return state.height}),(function(state){return state.stackBy}),(function(width,yMin,yMax,height,stackBy){return{width:width,yMin:yMin,yMax:yMax,height:height,stackBy:stackBy}})));_defineProperty(_assertThisInitialized(_this),"getPlotValues",(0,_reselect.createSelector)((function(state){return state.visibleSeries}),(function(state){return state.enabledSeries}),(function(state){return state.options}),_plotUtils.getPlotValues));_defineProperty(_assertThisInitialized(_this),"getVisibleSeries",(0,_reselect.createSelector)((function(state){return state.series}),(function(series){return series.slice(0,VISIBLE_LEGEND_COUNT+getHiddenLegendCount(series))})));_defineProperty(_assertThisInitialized(_this),"clickLegend",(function(i){_this.setState((function(_ref){var seriesEnabledState=_ref.seriesEnabledState;var nextSeriesEnabledState=_this.props.series.map((function(value,_i){var disabledValue=seriesEnabledState[_i];return i===_i?!disabledValue:!!disabledValue}));return{seriesEnabledState:nextSeriesEnabledState}}))}));_defineProperty(_assertThisInitialized(_this),"onMouseLeave",(function(){var _this$props;(_this$props=_this.props).onMouseLeave.apply(_this$props,arguments)}));_defineProperty(_assertThisInitialized(_this),"onMouseDown",(function(node){return _this.setState({isDrawing:true,selectionStart:node.x,selectionEnd:null})}));_defineProperty(_assertThisInitialized(_this),"onMouseUp",(function(){if(_this.state.isDrawing&&_this.state.selectionEnd!==null){var _sort=[_this.state.selectionStart,_this.state.selectionEnd].sort(),_sort2=_slicedToArray(_sort,2),start=_sort2[0],end=_sort2[1];_this.props.onSelectionEnd({start:start,end:end})}_this.setState({isDrawing:false})}));_defineProperty(_assertThisInitialized(_this),"onHover",(function(node){_this.props.onHover(node.x);if(_this.state.isDrawing){_this.setState({selectionEnd:node.x})}}));return _this}_createClass(InnerCustomPlot,[{key:"componentDidMount",value:function componentDidMount(){document.body.addEventListener("mouseup",this.onMouseUp)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.body.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,series=_this$props2.series,truncateLegends=_this$props2.truncateLegends,width=_this$props2.width,annotations=_this$props2.annotations;if(!width){return null}var hiddenSeriesCount=Math.max(series.length-VISIBLE_LEGEND_COUNT-getHiddenLegendCount(series),0);var visibleSeries=this.getVisibleSeries({series:series});var enabledSeries=this.getEnabledSeries({visibleSeries:visibleSeries,seriesEnabledState:this.state.seriesEnabledState});var options=this.getOptions(this.props);var hasValidCoordinates=(0,_lodash.flatten)(series.map((function(s){return s.data}))).some((function(p){return(0,_isValidCoordinateValue.isValidCoordinateValue)(p.y)}));var noHits=!hasValidCoordinates;var plotValues=this.getPlotValues({visibleSeries:visibleSeries,enabledSeries:enabledSeries,options:options});if((0,_lodash.isEmpty)(plotValues)){return null}return _react.default.createElement(_react.Fragment,null,_react.default.createElement("div",{style:{position:"relative",height:plotValues.XY_HEIGHT}},_react.default.createElement(_StaticPlot.default,{width:width,noHits:noHits,plotValues:plotValues,series:enabledSeries,tickFormatY:this.props.tickFormatY,tickFormatX:this.props.tickFormatX}),this.state.showAnnotations&&!(0,_lodash.isEmpty)(annotations)&&_react.default.createElement(_AnnotationsPlot.AnnotationsPlot,{plotValues:plotValues,width:width,annotations:annotations||[]}),_react.default.createElement(_InteractivePlot.default,{plotValues:plotValues,hoverX:this.props.hoverX,series:enabledSeries,formatTooltipValue:this.props.formatTooltipValue,isDrawing:this.state.isDrawing,selectionStart:this.state.selectionStart,selectionEnd:this.state.selectionEnd}),_react.default.createElement(_VoronoiPlot.default,{noHits:noHits,plotValues:plotValues,series:enabledSeries,onHover:this.onHover,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown})),_react.default.createElement(_Legends.default,{noHits:noHits,truncateLegends:truncateLegends,series:visibleSeries,hiddenSeriesCount:hiddenSeriesCount,clickLegend:this.clickLegend,seriesEnabledState:this.state.seriesEnabledState,hasAnnotations:!(0,_lodash.isEmpty)(annotations),showAnnotations:this.state.showAnnotations,onAnnotationsToggle:function onAnnotationsToggle(){_this2.setState((function(_ref2){var showAnnotations=_ref2.showAnnotations;return{showAnnotations:!showAnnotations}}))}}))}}]);return InnerCustomPlot}(_react.PureComponent);exports.InnerCustomPlot=InnerCustomPlot;InnerCustomPlot.propTypes={formatTooltipValue:_propTypes.default.func,hoverX:_propTypes.default.number,onHover:_propTypes.default.func.isRequired,onMouseLeave:_propTypes.default.func.isRequired,onSelectionEnd:_propTypes.default.func.isRequired,series:_propTypes.default.array.isRequired,tickFormatY:_propTypes.default.func,truncateLegends:_propTypes.default.bool,width:_propTypes.default.number.isRequired,height:_propTypes.default.number,stackBy:_propTypes.default.string,annotations:_propTypes.default.arrayOf(_propTypes.default.shape({type:_propTypes.default.string,id:_propTypes.default.string,firstSeen:_propTypes.default.number}))};InnerCustomPlot.defaultProps={formatTooltipValue:function formatTooltipValue(p){return p.y},tickFormatX:undefined,tickFormatY:function tickFormatY(y){return y},truncateLegends:false};var _default=(0,_reactVis.makeWidthFlexible)(InnerCustomPlot);exports.default=_default},1531:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionBreakdown=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _useTransactionBreakdown=__webpack_require__(4365);var _TransactionBreakdownHeader=__webpack_require__(4366);var _TransactionBreakdownKpiList=__webpack_require__(4367);var _TransactionBreakdownGraph=__webpack_require__(4371);var _use_track_metric=__webpack_require__(190);var _useFetcher=__webpack_require__(54);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var emptyMessage=_i18n.i18n.translate("xpack.apm.transactionBreakdown.noData",{defaultMessage:"No data within this time range."});var TransactionBreakdown=function TransactionBreakdown(_ref){var initialIsOpen=_ref.initialIsOpen;var _useState=(0,_react.useState)(!!initialIsOpen),_useState2=_slicedToArray(_useState,2),showChart=_useState2[0],setShowChart=_useState2[1];var _useTransactionBreakd=(0,_useTransactionBreakdown.useTransactionBreakdown)(),data=_useTransactionBreakd.data,status=_useTransactionBreakd.status;var kpis=data.kpis,timeseries=data.timeseries;var noHits=data.kpis.length===0&&status===_useFetcher.FETCH_STATUS.SUCCESS;var showEmptyMessage=noHits&&!showChart;return _react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_TransactionBreakdownHeader.TransactionBreakdownHeader,{showChart:showChart,onToggleClick:function onToggleClick(){setShowChart(!showChart);if(showChart){(0,_use_track_metric.trackEvent)({app:"apm",name:"hide_breakdown_chart"})}else{(0,_use_track_metric.trackEvent)({app:"apm",name:"show_breakdown_chart"})}}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},showEmptyMessage?_react.default.createElement(_eui.EuiText,null,emptyMessage):_react.default.createElement(_TransactionBreakdownKpiList.TransactionBreakdownKpiList,{kpis:kpis})),showChart?_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_TransactionBreakdownGraph.TransactionBreakdownGraph,{timeseries:timeseries})):null))};exports.TransactionBreakdown=TransactionBreakdown},1532:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ImpactBar=ImpactBar;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function ImpactBar(_ref){var value=_ref.value,_ref$max=_ref.max,max=_ref$max===void 0?100:_ref$max,rest=_objectWithoutProperties(_ref,["value","max"]);return _react.default.createElement(_eui.EuiProgress,_extends({size:"l",value:value,max:max,color:"primary"},rest))}},1533:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useServiceTransactionTypes=useServiceTransactionTypes;var _useFetcher2=__webpack_require__(54);var INITIAL_DATA={transactionTypes:[]};function useServiceTransactionTypes(urlParams){var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_types",params:{path:{serviceName:serviceName},query:{start:start,end:end}}})}}),[serviceName,start,end]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?INITIAL_DATA:_useFetcher$data;return data.transactionTypes}},1534:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useServiceMetricCharts=useServiceMetricCharts;var _UrlParamsContext=__webpack_require__(452);var _useFetcher2=__webpack_require__(54);var INITIAL_DATA={charts:[]};function useServiceMetricCharts(urlParams,agentName){var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,serviceNodeName=urlParams.serviceNodeName;var uiFilters=(0,_UrlParamsContext.useUiFilters)(urlParams);var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end&&agentName){return callApmApi({pathname:"/api/apm/services/{serviceName}/metrics/charts",params:{path:{serviceName:serviceName},query:{start:start,end:end,agentName:agentName,serviceNodeName:serviceNodeName,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,agentName,serviceNodeName,uiFilters]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?INITIAL_DATA:_useFetcher$data,error=_useFetcher.error,status=_useFetcher.status;return{data:data,status:status,error:error}}},1535:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricsChart=MetricsChart;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _CustomPlot=_interopRequireDefault(__webpack_require__(1530));var _formatters=__webpack_require__(85);var _isValidCoordinateValue=__webpack_require__(458);var _useChartsSync=__webpack_require__(1529);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function MetricsChart(_ref){var chart=_ref.chart;var formatYValue=getYTickFormatter(chart);var formatTooltip=getTooltipFormatter(chart);var transformedSeries=chart.series.map((function(series){return _objectSpread({},series,{legendValue:formatYValue(series.overallValue)})}));var syncedChartProps=(0,_useChartsSync.useChartsSync)();return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,chart.title)),_react.default.createElement(_CustomPlot.default,_extends({},syncedChartProps,{series:transformedSeries,tickFormatY:formatYValue,formatTooltipValue:formatTooltip,yMax:chart.yUnit==="percent"?1:"max"})))}function getYTickFormatter(chart){switch(chart.yUnit){case"bytes":{var max=Math.max.apply(Math,_toConsumableArray(chart.series.flatMap((function(series){return series.data.map((function(coord){return coord.y||0}))}))));return(0,_formatters.getFixedByteFormatter)(max)}case"percent":{return function(y){return(0,_formatters.asPercent)(y||0,1)}}case"time":{return function(y){return(0,_formatters.asDuration)(y)}}case"integer":{return function(y){return(0,_isValidCoordinateValue.isValidCoordinateValue)(y)?(0,_formatters.asInteger)(y):y}}default:{return function(y){return(0,_isValidCoordinateValue.isValidCoordinateValue)(y)?(0,_formatters.asDecimal)(y):y}}}}function getTooltipFormatter(_ref2){var yUnit=_ref2.yUnit;switch(yUnit){case"bytes":{return function(c){return(0,_formatters.asDynamicBytes)(c.y)}}case"percent":{return function(c){return(0,_formatters.asPercent)(c.y||0,1)}}case"time":{return function(c){return(0,_formatters.asDuration)(c.y)}}case"integer":{return function(c){return(0,_isValidCoordinateValue.isValidCoordinateValue)(c.y)?(0,_formatters.asInteger)(c.y):c.y}}default:{return function(c){return(0,_isValidCoordinateValue.isValidCoordinateValue)(c.y)?(0,_formatters.asDecimal)(c.y):c.y}}}}},1536:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EuiTabLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(63));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _variables=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Wrapper=_styledComponents.default.div.withConfig({displayName:"Wrapper",componentId:"sc-1m1b6bd-0"})(["padding:0;a{display:inline-block;padding:"," ",";","}"],(0,_variables.px)(_variables.unit*.75),(0,_variables.px)(_variables.unit),(function(_ref){var isSelected=_ref.isSelected;return!isSelected?"color: ".concat(_eui_theme_light.default.euiTextColor," !important;"):""}));var EuiTabLink=function EuiTabLink(props){var isSelected=props.isSelected,children=props.children;var className=(0,_classnames.default)("euiTab",{"euiTab-isSelected":isSelected});return _react.default.createElement(Wrapper,{className:className,isSelected:isSelected},_react.default.createElement("span",{className:"euiTab__content"},children))};exports.EuiTabLink=EuiTabLink},1537:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);var _useUrlParams2=__webpack_require__(45);var _pickKeys=__webpack_require__(188);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var ErrorOverviewLink=function ErrorOverviewLink(_ref){var serviceName=_ref.serviceName,query=_ref.query,rest=_objectWithoutProperties(_ref,["serviceName","query"]);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"host","containerId","podName","serviceVersion");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/errors"),query:_objectSpread({},persistedFilters,{},query)},rest))};exports.ErrorOverviewLink=ErrorOverviewLink},1538:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useAgentName=useAgentName;var _useFetcher2=__webpack_require__(54);var _useUrlParams2=__webpack_require__(45);function useAgentName(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var start=urlParams.start,end=urlParams.end,serviceName=urlParams.serviceName;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/agent_name",params:{path:{serviceName:serviceName},query:{start:start,end:end}}}).then((function(res){return res.agentName}))}}),[serviceName,start,end]),agentName=_useFetcher.data,error=_useFetcher.error,status=_useFetcher.status;return{agentName:agentName,status:status,error:error}}},1539:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceMap=ServiceMap;var _eui=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _public=__webpack_require__(16);var _useApmPluginContext=__webpack_require__(80);var _useCallApmApi=__webpack_require__(449);var _useDeepObjectIdentity=__webpack_require__(1511);var _useLicense=__webpack_require__(4380);var _useLocation2=__webpack_require__(156);var _useUrlParams2=__webpack_require__(45);var _Controls=__webpack_require__(4381);var _Cytoscape=__webpack_require__(850);var _get_cytoscape_elements=__webpack_require__(4390);var _LoadingOverlay=__webpack_require__(4391);var _PlatinumLicensePrompt=__webpack_require__(4392);var _Popover=__webpack_require__(4394);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var cytoscapeDivStyle={height:"85vh",background:"linear-gradient(\n  90deg,\n  ".concat(_eui_theme_light.default.euiPageBackgroundColor,"\n    calc(").concat(_eui_theme_light.default.euiSizeL," - calc(").concat(_eui_theme_light.default.euiSizeXS," / 2)),\n  transparent 1%\n)\ncenter,\nlinear-gradient(\n  ").concat(_eui_theme_light.default.euiPageBackgroundColor,"\n    calc(").concat(_eui_theme_light.default.euiSizeL," - calc(").concat(_eui_theme_light.default.euiSizeXS," / 2)),\n  transparent 1%\n)\ncenter,\n").concat(_eui_theme_light.default.euiColorLightShade),backgroundSize:"".concat(_eui_theme_light.default.euiSizeL," ").concat(_eui_theme_light.default.euiSizeL),margin:"-".concat(_eui_theme_light.default.gutterTypes.gutterLarge)};var MAX_REQUESTS=5;function ServiceMap(_ref){var serviceName=_ref.serviceName;var callApmApi=(0,_useCallApmApi.useCallApmApi)();var license=(0,_useLicense.useLicense)();var _useLocation=(0,_useLocation2.useLocation)(),search=_useLocation.search;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var notifications=(0,_useApmPluginContext.useApmPluginContext)().core.notifications;var params=(0,_useDeepObjectIdentity.useDeepObjectIdentity)({start:urlParams.start,end:urlParams.end,environment:urlParams.environment,serviceName:serviceName,uiFilters:_objectSpread({},uiFilters,{environment:undefined})});var renderedElements=(0,_react.useRef)([]);var openToast=(0,_react.useRef)(null);var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),responses=_useState2[0],setResponses=_useState2[1];var _useState3=(0,_react.useState)(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=(0,_react.useState)(0),_useState6=_slicedToArray(_useState5,2),percentageLoaded=_useState6[0],setPercentageLoaded=_useState6[1];var _useState7=(0,_react.useState)(false),_useState8=_slicedToArray(_useState7,2),_setUnusedState=_useState8[1];var elements=(0,_react.useMemo)((function(){return(0,_get_cytoscape_elements.getCytoscapeElements)(responses,search)}),[responses,search]);var forceUpdate=(0,_react.useCallback)((function(){return _setUnusedState((function(value){return!value}))}),[]);var getNext=(0,_react.useCallback)((function _callee(input){var start,end,strippedUiFilters,query,data,shouldGetNext;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:start=params.start,end=params.end,strippedUiFilters=params.uiFilters,query=_objectWithoutProperties(params,["start","end","uiFilters"]);if(input.reset){renderedElements.current=[];setResponses([])}if(!(start&&end)){_context.next=21;break}setIsLoading(true);_context.prev=4;_context.next=7;return regeneratorRuntime.awrap(callApmApi({pathname:"/api/apm/service-map",params:{query:_objectSpread({},query,{start:start,end:end,uiFilters:JSON.stringify(strippedUiFilters),after:input.after})}}));case 7:data=_context.sent;setResponses((function(resp){return resp.concat(data)}));setIsLoading(false);shouldGetNext=responses.length+1<MAX_REQUESTS&&data.after;if(!shouldGetNext){_context.next=15;break}setPercentageLoaded((function(value){return value+30}));_context.next=15;return regeneratorRuntime.awrap(getNext({after:data.after}));case 15:_context.next=21;break;case 17:_context.prev=17;_context.t0=_context["catch"](4);setIsLoading(false);notifications.toasts.addError(_context.t0,{title:_i18n.i18n.translate("xpack.apm.errorServiceMapData",{defaultMessage:"Error loading service connections"})});case 21:case"end":return _context.stop()}}}),null,null,[[4,17]])}),[callApmApi,params,responses.length,notifications.toasts]);(0,_react.useEffect)((function(){var loadServiceMaps=function loadServiceMaps(){return regeneratorRuntime.async((function loadServiceMaps$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setPercentageLoaded(5);_context2.next=3;return regeneratorRuntime.awrap(getNext({reset:true}));case 3:setPercentageLoaded(100);case 4:case"end":return _context2.stop()}}}))};loadServiceMaps()}),[params]);(0,_react.useEffect)((function(){if(renderedElements.current.length===0){renderedElements.current=elements;return}var newElements=elements.filter((function(element){return!(0,_lodash.find)(renderedElements.current,(function(el){return(0,_lodash.isEqual)(el,element)}))}));var updateMap=function updateMap(){renderedElements.current=elements;if(openToast.current){notifications.toasts.remove(openToast.current)}forceUpdate()};if(newElements.length>0&&percentageLoaded===100){openToast.current=notifications.toasts.add({title:_i18n.i18n.translate("xpack.apm.newServiceMapData",{defaultMessage:"Newly discovered connections are available."}),onClose:function onClose(){openToast.current=null},toastLifeTimeMs:24*60*60*1e3,text:(0,_public.toMountPoint)(_react.default.createElement(_eui.EuiButton,{onClick:updateMap},_i18n.i18n.translate("xpack.apm.updateServiceMap",{defaultMessage:"Update map"})))}).id}return function(){if(openToast.current){notifications.toasts.remove(openToast.current)}}}),[elements,percentageLoaded]);var isValidPlatinumLicense=(license===null||license===void 0?void 0:license.isActive)&&((license===null||license===void 0?void 0:license.type)==="platinum"||(license===null||license===void 0?void 0:license.type)==="trial");return isValidPlatinumLicense?_react.default.createElement(_LoadingOverlay.LoadingOverlay,{isLoading:isLoading,percentageLoaded:percentageLoaded},_react.default.createElement(_Cytoscape.Cytoscape,{elements:renderedElements.current,serviceName:serviceName,style:cytoscapeDivStyle},_react.default.createElement(_Controls.Controls,null),_react.default.createElement(_Popover.Popover,{focusedServiceName:serviceName}))):_react.default.createElement(_PlatinumLicensePrompt.PlatinumLicensePrompt,null)}},1540:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceMapLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var ServiceMapLink=function ServiceMapLink(_ref){var serviceName=_ref.serviceName,rest=_objectWithoutProperties(_ref,["serviceName"]);var path=serviceName?"/services/".concat(serviceName,"/service-map"):"/service-map";return _react.default.createElement(_APMLink.APMLink,_extends({path:path},rest))};exports.ServiceMapLink=ServiceMapLink},1541:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionSummary=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _=__webpack_require__(841);var _TimestampTooltip=__webpack_require__(454);var _DurationSummaryItem=__webpack_require__(1542);var _ErrorCountSummaryItemBadge=__webpack_require__(4412);var _agent_name=__webpack_require__(460);var _HttpInfoSummaryItem=__webpack_require__(843);var _TransactionResultSummaryItem=__webpack_require__(4413);var _UserAgentSummaryItem=__webpack_require__(1520);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getTransactionResultSummaryItem=function getTransactionResultSummaryItem(transaction){var _transaction$transact,_transaction$url;var result=transaction.transaction.result;var isRumAgent=(0,_agent_name.isRumAgentName)(transaction.agent.name);var url=isRumAgent?(_transaction$transact=transaction.transaction.page)===null||_transaction$transact===void 0?void 0:_transaction$transact.url:(_transaction$url=transaction.url)===null||_transaction$url===void 0?void 0:_transaction$url.full;if(url){var _transaction$http,_transaction$http$req,_transaction$http2,_transaction$http2$re;var method=(_transaction$http=transaction.http)===null||_transaction$http===void 0?void 0:(_transaction$http$req=_transaction$http.request)===null||_transaction$http$req===void 0?void 0:_transaction$http$req.method;var status=(_transaction$http2=transaction.http)===null||_transaction$http2===void 0?void 0:(_transaction$http2$re=_transaction$http2.response)===null||_transaction$http2$re===void 0?void 0:_transaction$http2$re.status_code;return _react.default.createElement(_HttpInfoSummaryItem.HttpInfoSummaryItem,{method:method,status:status,url:url})}if(result){return _react.default.createElement(_TransactionResultSummaryItem.TransactionResultSummaryItem,{transactionResult:result})}return null};var TransactionSummary=function TransactionSummary(_ref){var transaction=_ref.transaction,totalDuration=_ref.totalDuration,errorCount=_ref.errorCount;var items=[_react.default.createElement(_TimestampTooltip.TimestampTooltip,{time:transaction.timestamp.us/1e3}),_react.default.createElement(_DurationSummaryItem.DurationSummaryItem,{duration:transaction.transaction.duration.us,totalDuration:totalDuration,parentType:"trace"}),getTransactionResultSummaryItem(transaction),errorCount?_react.default.createElement(_ErrorCountSummaryItemBadge.ErrorCountSummaryItemBadge,{count:errorCount}):null,transaction.user_agent?_react.default.createElement(_UserAgentSummaryItem.UserAgentSummaryItem,transaction.user_agent):null];return _react.default.createElement(_.Summary,{items:items})};exports.TransactionSummary=TransactionSummary},1542:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DurationSummaryItem=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);var _PercentOfParent=__webpack_require__(4411);var _formatters=__webpack_require__(85);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DurationSummaryItem=function DurationSummaryItem(_ref){var duration=_ref.duration,totalDuration=_ref.totalDuration,parentType=_ref.parentType;var calculatedTotalDuration=totalDuration===undefined?duration:totalDuration;var label=_i18n.i18n.translate("xpack.apm.transactionDurationLabel",{defaultMessage:"Duration"});return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiToolTip,{content:label},_react.default.createElement(_eui.EuiText,null,(0,_formatters.asDuration)(duration))),"Â ",_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement(_PercentOfParent.PercentOfParent,{duration:duration,totalDuration:calculatedTotalDuration,parentType:parentType})))};exports.DurationSummaryItem=DurationSummaryItem},1543:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionActionMenu=void 0;var _eui=__webpack_require__(1);var _url=_interopRequireDefault(__webpack_require__(71));var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _DiscoverTransactionLink=__webpack_require__(4414);var _InfraLink=__webpack_require__(4415);var _useUrlParams2=__webpack_require__(45);var _url_helpers=__webpack_require__(95);var _useApmPluginContext2=__webpack_require__(80);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function getInfraMetricsQuery(transaction){var plus5=new Date(transaction["@timestamp"]);var minus5=new Date(plus5.getTime());plus5.setMinutes(plus5.getMinutes()+5);minus5.setMinutes(minus5.getMinutes()-5);return{from:minus5.getTime(),to:plus5.getTime()}}function ActionMenuButton(_ref){var onClick=_ref.onClick;return _react.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",onClick:onClick},_i18n.i18n.translate("xpack.apm.transactionActionMenu.actionsButtonLabel",{defaultMessage:"Actions"}))}var TransactionActionMenu=function TransactionActionMenu(props){var _transaction$host,_transaction$kubernet,_transaction$containe,_transaction$url,_transaction$url2;var transaction=props.transaction;var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var hostName=(_transaction$host=transaction.host)===null||_transaction$host===void 0?void 0:_transaction$host.hostname;var podId=(_transaction$kubernet=transaction.kubernetes)===null||_transaction$kubernet===void 0?void 0:_transaction$kubernet.pod.uid;var containerId=(_transaction$containe=transaction.container)===null||_transaction$containe===void 0?void 0:_transaction$containe.id;var time=Math.round(transaction.timestamp.us/1e3);var infraMetricsQuery=getInfraMetricsQuery(transaction);var infraConfigItems=[{icon:"logsApp",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showPodLogsLinkLabel",{defaultMessage:"Show pod logs"}),condition:!!podId,path:"/link-to/pod-logs/".concat(podId),query:{time:time}},{icon:"logsApp",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showContainerLogsLinkLabel",{defaultMessage:"Show container logs"}),condition:!!containerId,path:"/link-to/container-logs/".concat(containerId),query:{time:time}},{icon:"logsApp",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showHostLogsLinkLabel",{defaultMessage:"Show host logs"}),condition:!!hostName,path:"/link-to/host-logs/".concat(hostName),query:{time:time}},{icon:"logsApp",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showTraceLogsLinkLabel",{defaultMessage:"Show trace logs"}),condition:true,path:"/link-to/logs",query:{time:time,filter:'trace.id:"'.concat(transaction.trace.id,'" OR ').concat(transaction.trace.id)}},{icon:"metricsApp",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showPodMetricsLinkLabel",{defaultMessage:"Show pod metrics"}),condition:!!podId,path:"/link-to/pod-detail/".concat(podId),query:infraMetricsQuery},{icon:"metricsApp",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showContainerMetricsLinkLabel",{defaultMessage:"Show container metrics"}),condition:!!containerId,path:"/link-to/container-detail/".concat(containerId),query:infraMetricsQuery},{icon:"metricsApp",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showHostMetricsLinkLabel",{defaultMessage:"Show host metrics"}),condition:!!hostName,path:"/link-to/host-detail/".concat(hostName),query:infraMetricsQuery}];var infraItems=infraConfigItems.map((function(_ref2,index){var icon=_ref2.icon,label=_ref2.label,condition=_ref2.condition,path=_ref2.path,query=_ref2.query;return{icon:icon,key:"infra-link-".concat(index),child:_react.default.createElement(_InfraLink.InfraLink,{path:path,query:query},label),condition:condition}}));var uptimeLink=_url.default.format({pathname:core.http.basePath.prepend("/app/uptime"),hash:"/?".concat((0,_url_helpers.fromQuery)((0,_lodash.pick)({dateRangeStart:urlParams.rangeFrom,dateRangeEnd:urlParams.rangeTo,search:'url.domain:"'.concat((_transaction$url=transaction.url)===null||_transaction$url===void 0?void 0:_transaction$url.domain,'"')},(function(val){return!!val}))))});var menuItems=[].concat(_toConsumableArray(infraItems),[{icon:"discoverApp",key:"discover-transaction",condition:true,child:_react.default.createElement(_DiscoverTransactionLink.DiscoverTransactionLink,{transaction:transaction},_i18n.i18n.translate("xpack.apm.transactionActionMenu.viewSampleDocumentLinkLabel",{defaultMessage:"View sample document"}))},{icon:"uptimeApp",key:"uptime",child:_react.default.createElement(_eui.EuiLink,{href:uptimeLink},_i18n.i18n.translate("xpack.apm.transactionActionMenu.viewInUptime",{defaultMessage:"View monitor status"})),condition:(_transaction$url2=transaction.url)===null||_transaction$url2===void 0?void 0:_transaction$url2.domain}]).filter((function(_ref3){var condition=_ref3.condition;return condition})).map((function(_ref4){var icon=_ref4.icon,key=_ref4.key,child=_ref4.child;return _react.default.createElement(_eui.EuiContextMenuItem,{icon:icon,key:key},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,child),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{type:"popout"}))))}));return _react.default.createElement(_eui.EuiPopover,{id:"transactionActionMenu",button:_react.default.createElement(ActionMenuButton,{onClick:function onClick(){return setIsOpen(!isOpen)}}),isOpen:isOpen,closePopover:function closePopover(){return setIsOpen(false)},anchorPosition:"downRight",panelPaddingSize:"none"},_react.default.createElement(_eui.EuiContextMenuPanel,{items:menuItems,title:_i18n.i18n.translate("xpack.apm.transactionActionMenu.actionsLabel",{defaultMessage:"Actions"})}))};exports.TransactionActionMenu=TransactionActionMenu},1544:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionMetadata=TransactionMetadata;var _react=_interopRequireWildcard(__webpack_require__(0));var _sections=__webpack_require__(4418);var _helper=__webpack_require__(582);var _=__webpack_require__(840);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function TransactionMetadata(_ref){var transaction=_ref.transaction;var sectionsWithRows=(0,_react.useMemo)((function(){return(0,_helper.getSectionsWithRows)(_sections.TRANSACTION_METADATA_SECTIONS,transaction)}),[transaction]);return _react.default.createElement(_.MetadataTable,{sections:sectionsWithRows})}},1545:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ResponsiveFlyout=void 0;var _eui=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(30));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResponsiveFlyout=(0,_styledComponents.default)(_eui.EuiFlyout).withConfig({displayName:"ResponsiveFlyout",componentId:"sc-1gn3o9a-0"})(["width:100%;@media (min-width:800px){width:90%;}@media (min-width:1000px){width:80%;}@media (min-width:1400px){width:70%;}@media (min-width:2000px){width:60%;}"]);exports.ResponsiveFlyout=ResponsiveFlyout},1546:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StickyProperties=StickyProperties;var _eui=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var TooltipFieldName=_styledComponents.default.span.withConfig({displayName:"TooltipFieldName",componentId:"sc-1156jpp-0"})(["font-family:",";"],_variables.fontFamilyCode);var PropertyLabel=_styledComponents.default.div.withConfig({displayName:"PropertyLabel",componentId:"sc-1156jpp-1"})(["margin-bottom:",";font-size:",";color:",";span{cursor:help;}"],(0,_variables.px)(_variables.units.half),_variables.fontSizes.small,_eui_theme_light.default.euiColorMediumShade);PropertyLabel.displayName="PropertyLabel";var propertyValueLineHeight=1.2;var PropertyValue=_styledComponents.default.div.withConfig({displayName:"PropertyValue",componentId:"sc-1156jpp-2"})(["display:inline-block;line-height:",";"],propertyValueLineHeight);PropertyValue.displayName="PropertyValue";var PropertyValueTruncated=_styledComponents.default.span.withConfig({displayName:"PropertyValueTruncated",componentId:"sc-1156jpp-3"})(["display:inline-block;line-height:",";",";"],propertyValueLineHeight,(0,_variables.truncate)("100%"));function getPropertyLabel(_ref){var fieldName=_ref.fieldName,label=_ref.label;if(fieldName){return _react.default.createElement(PropertyLabel,null,_react.default.createElement(_eui.EuiToolTip,{content:_react.default.createElement(TooltipFieldName,null,fieldName)},_react.default.createElement("span",null,label)))}return _react.default.createElement(PropertyLabel,null,label)}function getPropertyValue(_ref2){var val=_ref2.val,fieldName=_ref2.fieldName,_ref2$truncated=_ref2.truncated,truncated=_ref2$truncated===void 0?false:_ref2$truncated;if(truncated){return _react.default.createElement(_eui.EuiToolTip,{content:String(val)},_react.default.createElement(PropertyValueTruncated,null,String(val)))}return _react.default.createElement(PropertyValue,null,val)}function StickyProperties(_ref3){var stickyProperties=_ref3.stickyProperties;var itemStyles={padding:"1em 1em 1em 0"};var groupStyles={marginTop:"-1em",marginBottom:"-1em"};return _react.default.createElement(_eui.EuiFlexGroup,{wrap:true,gutterSize:"none",style:groupStyles},stickyProperties&&stickyProperties.map((function(_ref4,i){var _ref4$width=_ref4.width,width=_ref4$width===void 0?0:_ref4$width,prop=_objectWithoutProperties(_ref4,["width"]);return _react.default.createElement(_eui.EuiFlexItem,{key:i,style:_objectSpread({minWidth:width},itemStyles),grow:false},getPropertyLabel(prop),getPropertyValue(prop))})))}},1547:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SetupInstructionsLink=SetupInstructionsLink;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _KibanaLink=__webpack_require__(851);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SETUP_INSTRUCTIONS_LABEL=_i18n.i18n.translate("xpack.apm.setupInstructionsButtonLabel",{defaultMessage:"Setup Instructions"});function SetupInstructionsLink(_ref){var _ref$buttonFill=_ref.buttonFill,buttonFill=_ref$buttonFill===void 0?false:_ref$buttonFill;return _react.default.createElement(_KibanaLink.KibanaLink,{path:"/home/tutorial/apm"},buttonFill?_react.default.createElement(_eui.EuiButton,{size:"s",color:"primary",fill:buttonFill,iconType:"help"},SETUP_INSTRUCTIONS_LABEL):_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",color:"primary",iconType:"help"},SETUP_INSTRUCTIONS_LABEL))}},1548:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SelectWithPlaceholder=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _lodash=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var NO_SELECTION="NO_SELECTION";var SelectWithPlaceholder=function SelectWithPlaceholder(props){return _react.default.createElement(_eui.EuiSelect,_extends({},props,{options:[{text:props.placeholder,value:NO_SELECTION}].concat(_toConsumableArray(props.options||[])),value:(0,_lodash.isEmpty)(props.value)?NO_SELECTION:props.value,onChange:function onChange(e){if(props.onChange){props.onChange(Object.assign(e,{target:Object.assign(e.target,{value:e.target.value===NO_SELECTION?undefined:e.target.value})}))}}}))};exports.SelectWithPlaceholder=SelectWithPlaceholder},156:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useLocation=useLocation;var _react=__webpack_require__(0);var _LocationContext=__webpack_require__(1509);function useLocation(){return(0,_react.useContext)(_LocationContext.LocationContext)}},17:function(module,exports){module.exports=vendors_3},170:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CLIENT_GEO_COUNTRY_ISO_CODE=exports.POD_NAME=exports.CONTAINER_ID=exports.HOST_NAME=exports.LABEL_NAME=exports.METRIC_JAVA_GC_TIME=exports.METRIC_JAVA_GC_COUNT=exports.METRIC_JAVA_THREAD_COUNT=exports.METRIC_JAVA_NON_HEAP_MEMORY_USED=exports.METRIC_JAVA_NON_HEAP_MEMORY_COMMITTED=exports.METRIC_JAVA_NON_HEAP_MEMORY_MAX=exports.METRIC_JAVA_HEAP_MEMORY_USED=exports.METRIC_JAVA_HEAP_MEMORY_COMMITTED=exports.METRIC_JAVA_HEAP_MEMORY_MAX=exports.METRIC_PROCESS_CPU_PERCENT=exports.METRIC_SYSTEM_CPU_PERCENT=exports.METRIC_SYSTEM_TOTAL_MEMORY=exports.METRIC_SYSTEM_FREE_MEMORY=exports.ERROR_PAGE_URL=exports.ERROR_EXC_HANDLED=exports.ERROR_EXC_MESSAGE=exports.ERROR_LOG_MESSAGE=exports.ERROR_LOG_LEVEL=exports.ERROR_CULPRIT=exports.ERROR_GROUP_ID=exports.PARENT_ID=exports.SPAN_ID=exports.SPAN_NAME=exports.SPAN_ACTION=exports.SPAN_SELF_TIME_SUM=exports.SPAN_SUBTYPE=exports.SPAN_TYPE=exports.SPAN_DURATION=exports.TRACE_ID=exports.TRANSACTION_PAGE_URL=exports.TRANSACTION_BREAKDOWN_COUNT=exports.TRANSACTION_SAMPLED=exports.TRANSACTION_ID=exports.TRANSACTION_NAME=exports.TRANSACTION_RESULT=exports.TRANSACTION_TYPE=exports.TRANSACTION_DURATION=exports.PROCESSOR_EVENT=exports.OBSERVER_LISTENING=exports.OBSERVER_VERSION_MAJOR=exports.DESTINATION_ADDRESS=exports.USER_AGENT_NAME=exports.USER_ID=exports.HTTP_REQUEST_METHOD=exports.URL_FULL=exports.SERVICE_VERSION=exports.SERVICE_NODE_NAME=exports.SERVICE_AGENT_NAME=exports.SERVICE_ENVIRONMENT=exports.SERVICE_NAME=void 0;var SERVICE_NAME="service.name";exports.SERVICE_NAME=SERVICE_NAME;var SERVICE_ENVIRONMENT="service.environment";exports.SERVICE_ENVIRONMENT=SERVICE_ENVIRONMENT;var SERVICE_AGENT_NAME="agent.name";exports.SERVICE_AGENT_NAME=SERVICE_AGENT_NAME;var SERVICE_NODE_NAME="service.node.name";exports.SERVICE_NODE_NAME=SERVICE_NODE_NAME;var SERVICE_VERSION="service.version";exports.SERVICE_VERSION=SERVICE_VERSION;var URL_FULL="url.full";exports.URL_FULL=URL_FULL;var HTTP_REQUEST_METHOD="http.request.method";exports.HTTP_REQUEST_METHOD=HTTP_REQUEST_METHOD;var USER_ID="user.id";exports.USER_ID=USER_ID;var USER_AGENT_NAME="user_agent.name";exports.USER_AGENT_NAME=USER_AGENT_NAME;var DESTINATION_ADDRESS="destination.address";exports.DESTINATION_ADDRESS=DESTINATION_ADDRESS;var OBSERVER_VERSION_MAJOR="observer.version_major";exports.OBSERVER_VERSION_MAJOR=OBSERVER_VERSION_MAJOR;var OBSERVER_LISTENING="observer.listening";exports.OBSERVER_LISTENING=OBSERVER_LISTENING;var PROCESSOR_EVENT="processor.event";exports.PROCESSOR_EVENT=PROCESSOR_EVENT;var TRANSACTION_DURATION="transaction.duration.us";exports.TRANSACTION_DURATION=TRANSACTION_DURATION;var TRANSACTION_TYPE="transaction.type";exports.TRANSACTION_TYPE=TRANSACTION_TYPE;var TRANSACTION_RESULT="transaction.result";exports.TRANSACTION_RESULT=TRANSACTION_RESULT;var TRANSACTION_NAME="transaction.name";exports.TRANSACTION_NAME=TRANSACTION_NAME;var TRANSACTION_ID="transaction.id";exports.TRANSACTION_ID=TRANSACTION_ID;var TRANSACTION_SAMPLED="transaction.sampled";exports.TRANSACTION_SAMPLED=TRANSACTION_SAMPLED;var TRANSACTION_BREAKDOWN_COUNT="transaction.breakdown.count";exports.TRANSACTION_BREAKDOWN_COUNT=TRANSACTION_BREAKDOWN_COUNT;var TRANSACTION_PAGE_URL="transaction.page.url";exports.TRANSACTION_PAGE_URL=TRANSACTION_PAGE_URL;var TRACE_ID="trace.id";exports.TRACE_ID=TRACE_ID;var SPAN_DURATION="span.duration.us";exports.SPAN_DURATION=SPAN_DURATION;var SPAN_TYPE="span.type";exports.SPAN_TYPE=SPAN_TYPE;var SPAN_SUBTYPE="span.subtype";exports.SPAN_SUBTYPE=SPAN_SUBTYPE;var SPAN_SELF_TIME_SUM="span.self_time.sum.us";exports.SPAN_SELF_TIME_SUM=SPAN_SELF_TIME_SUM;var SPAN_ACTION="span.action";exports.SPAN_ACTION=SPAN_ACTION;var SPAN_NAME="span.name";exports.SPAN_NAME=SPAN_NAME;var SPAN_ID="span.id";exports.SPAN_ID=SPAN_ID;var PARENT_ID="parent.id";exports.PARENT_ID=PARENT_ID;var ERROR_GROUP_ID="error.grouping_key";exports.ERROR_GROUP_ID=ERROR_GROUP_ID;var ERROR_CULPRIT="error.culprit";exports.ERROR_CULPRIT=ERROR_CULPRIT;var ERROR_LOG_LEVEL="error.log.level";exports.ERROR_LOG_LEVEL=ERROR_LOG_LEVEL;var ERROR_LOG_MESSAGE="error.log.message";exports.ERROR_LOG_MESSAGE=ERROR_LOG_MESSAGE;var ERROR_EXC_MESSAGE="error.exception.message";exports.ERROR_EXC_MESSAGE=ERROR_EXC_MESSAGE;var ERROR_EXC_HANDLED="error.exception.handled";exports.ERROR_EXC_HANDLED=ERROR_EXC_HANDLED;var ERROR_PAGE_URL="error.page.url";exports.ERROR_PAGE_URL=ERROR_PAGE_URL;var METRIC_SYSTEM_FREE_MEMORY="system.memory.actual.free";exports.METRIC_SYSTEM_FREE_MEMORY=METRIC_SYSTEM_FREE_MEMORY;var METRIC_SYSTEM_TOTAL_MEMORY="system.memory.total";exports.METRIC_SYSTEM_TOTAL_MEMORY=METRIC_SYSTEM_TOTAL_MEMORY;var METRIC_SYSTEM_CPU_PERCENT="system.cpu.total.norm.pct";exports.METRIC_SYSTEM_CPU_PERCENT=METRIC_SYSTEM_CPU_PERCENT;var METRIC_PROCESS_CPU_PERCENT="system.process.cpu.total.norm.pct";exports.METRIC_PROCESS_CPU_PERCENT=METRIC_PROCESS_CPU_PERCENT;var METRIC_JAVA_HEAP_MEMORY_MAX="jvm.memory.heap.max";exports.METRIC_JAVA_HEAP_MEMORY_MAX=METRIC_JAVA_HEAP_MEMORY_MAX;var METRIC_JAVA_HEAP_MEMORY_COMMITTED="jvm.memory.heap.committed";exports.METRIC_JAVA_HEAP_MEMORY_COMMITTED=METRIC_JAVA_HEAP_MEMORY_COMMITTED;var METRIC_JAVA_HEAP_MEMORY_USED="jvm.memory.heap.used";exports.METRIC_JAVA_HEAP_MEMORY_USED=METRIC_JAVA_HEAP_MEMORY_USED;var METRIC_JAVA_NON_HEAP_MEMORY_MAX="jvm.memory.non_heap.max";exports.METRIC_JAVA_NON_HEAP_MEMORY_MAX=METRIC_JAVA_NON_HEAP_MEMORY_MAX;var METRIC_JAVA_NON_HEAP_MEMORY_COMMITTED="jvm.memory.non_heap.committed";exports.METRIC_JAVA_NON_HEAP_MEMORY_COMMITTED=METRIC_JAVA_NON_HEAP_MEMORY_COMMITTED;var METRIC_JAVA_NON_HEAP_MEMORY_USED="jvm.memory.non_heap.used";exports.METRIC_JAVA_NON_HEAP_MEMORY_USED=METRIC_JAVA_NON_HEAP_MEMORY_USED;var METRIC_JAVA_THREAD_COUNT="jvm.thread.count";exports.METRIC_JAVA_THREAD_COUNT=METRIC_JAVA_THREAD_COUNT;var METRIC_JAVA_GC_COUNT="jvm.gc.count";exports.METRIC_JAVA_GC_COUNT=METRIC_JAVA_GC_COUNT;var METRIC_JAVA_GC_TIME="jvm.gc.time";exports.METRIC_JAVA_GC_TIME=METRIC_JAVA_GC_TIME;var LABEL_NAME="labels.name";exports.LABEL_NAME=LABEL_NAME;var HOST_NAME="host.hostname";exports.HOST_NAME=HOST_NAME;var CONTAINER_ID="container.id";exports.CONTAINER_ID=CONTAINER_ID;var POD_NAME="kubernetes.pod.name";exports.POD_NAME=POD_NAME;var CLIENT_GEO_COUNTRY_ISO_CODE="client.geo.country_iso_code";exports.CLIENT_GEO_COUNTRY_ISO_CODE=CLIENT_GEO_COUNTRY_ISO_CODE},18:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLightTheme},1815:function(module,exports,__webpack_require__){module.exports=__webpack_require__(36)(2327)},1819:function(module,exports,__webpack_require__){module.exports=__webpack_require__(17)(2893)},187:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UNIDENTIFIED_SERVICE_NODES_LABEL=exports.NOT_AVAILABLE_LABEL=void 0;var _i18n=__webpack_require__(2);var NOT_AVAILABLE_LABEL=_i18n.i18n.translate("xpack.apm.notAvailableLabel",{defaultMessage:"N/A"});exports.NOT_AVAILABLE_LABEL=NOT_AVAILABLE_LABEL;var UNIDENTIFIED_SERVICE_NODES_LABEL=_i18n.i18n.translate("xpack.apm.serviceNodeNameMissing",{defaultMessage:"(Empty)"});exports.UNIDENTIFIED_SERVICE_NODES_LABEL=UNIDENTIFIED_SERVICE_NODES_LABEL},188:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pickKeys=pickKeys;var _lodash=__webpack_require__(3);function pickKeys(obj){for(var _len=arguments.length,keys=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){keys[_key-1]=arguments[_key]}return(0,_lodash.pick)(obj,keys)}},1956:function(module,exports,__webpack_require__){module.exports=__webpack_require__(17)(3127)},2:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},23:function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},230:function(module,exports,__webpack_require__){module.exports=__webpack_require__(36)(2381)},24:function(module,exports){module.exports=__kbnSharedDeps__.Jquery},26:function(module,exports){module.exports=vendors_2},295:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PROJECTION=void 0;var PROJECTION;exports.PROJECTION=PROJECTION;(function(PROJECTION){PROJECTION["SERVICES"]="services";PROJECTION["TRANSACTION_GROUPS"]="transactionGroups";PROJECTION["TRACES"]="traces";PROJECTION["TRANSACTIONS"]="transactions";PROJECTION["METRICS"]="metrics";PROJECTION["ERROR_GROUPS"]="errorGroups";PROJECTION["SERVICE_NODES"]="serviceNodes"})(PROJECTION||(exports.PROJECTION=PROJECTION={}))},296:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LocalUIFilters=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _Filter=__webpack_require__(4338);var _useLocalUIFilters2=__webpack_require__(4341);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var ButtonWrapper=_styledComponents.default.div.withConfig({displayName:"ButtonWrapper",componentId:"sc-9ifnz7-0"})(["display:inline-block;"]);var LocalUIFilters=function LocalUIFilters(_ref){var projection=_ref.projection,params=_ref.params,filterNames=_ref.filterNames,children=_ref.children,_ref$showCount=_ref.showCount,showCount=_ref$showCount===void 0?true:_ref$showCount;var _useLocalUIFilters=(0,_useLocalUIFilters2.useLocalUIFilters)({filterNames:filterNames,projection:projection,params:params}),filters=_useLocalUIFilters.filters,setFilterValue=_useLocalUIFilters.setFilterValue,clearValues=_useLocalUIFilters.clearValues;var hasValues=filters.some((function(filter){return filter.value.length>0}));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.localFiltersTitle",{defaultMessage:"Filters"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),children,filters.map((function(filter){return _react.default.createElement(_react.default.Fragment,{key:filter.name},_react.default.createElement(_Filter.Filter,_extends({},filter,{onChange:function onChange(value){setFilterValue(filter.name,value)},showCount:showCount})),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"none"}))})),hasValues?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(ButtonWrapper,null,_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",iconType:"cross",flush:"left",onClick:clearValues},_i18n.i18n.translate("xpack.apm.clearFilters",{defaultMessage:"Clear filters"})))):null)};exports.LocalUIFilters=LocalUIFilters},34:function(module,exports){module.exports=vendors_0},35:function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},36:function(module,exports){module.exports=vendors_1},365:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.clearCache=clearCache;exports.callApi=callApi;var _lodash=__webpack_require__(3);var _lruCache=_interopRequireDefault(__webpack_require__(1518));var _objectHash=_interopRequireDefault(__webpack_require__(4647));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function fetchOptionsWithDebug(fetchOptions){var debugEnabled=sessionStorage.getItem("apm_debug")==="true"&&(0,_lodash.startsWith)(fetchOptions.pathname,"/api/apm");var body=fetchOptions.body,rest=_objectWithoutProperties(fetchOptions,["body"]);return _objectSpread({},rest,{},body!==undefined?{body:JSON.stringify(body)}:{},{query:_objectSpread({},fetchOptions.query,{},debugEnabled?{_debug:true}:{})})}var cache=new _lruCache.default({max:100,maxAge:1e3*60*60});function clearCache(){cache.reset()}function callApi(http,fetchOptions){var cacheKey,cacheResponse,_fetchOptionsWithDebu,pathname,_fetchOptionsWithDebu2,method,options,lowercaseMethod,res;return regeneratorRuntime.async((function callApi$(_context){while(1){switch(_context.prev=_context.next){case 0:cacheKey=getCacheKey(fetchOptions);cacheResponse=cache.get(cacheKey);if(!cacheResponse){_context.next=4;break}return _context.abrupt("return",cacheResponse);case 4:_fetchOptionsWithDebu=fetchOptionsWithDebug(fetchOptions),pathname=_fetchOptionsWithDebu.pathname,_fetchOptionsWithDebu2=_fetchOptionsWithDebu.method,method=_fetchOptionsWithDebu2===void 0?"get":_fetchOptionsWithDebu2,options=_objectWithoutProperties(_fetchOptionsWithDebu,["pathname","method"]);lowercaseMethod=method.toLowerCase();_context.next=8;return regeneratorRuntime.awrap(http[lowercaseMethod](pathname,options));case 8:res=_context.sent;if(isCachable(fetchOptions)){cache.set(cacheKey,res)}return _context.abrupt("return",res);case 11:case"end":return _context.stop()}}}))}function isCachable(fetchOptions){if(fetchOptions.forceCache){return true}if(!(fetchOptions.query&&fetchOptions.query.start&&fetchOptions.query.end)){return false}return(0,_lodash.isString)(fetchOptions.query.end)&&new Date(fetchOptions.query.end).getTime()<Date.now()}function getCacheKey(options){return(0,_objectHash.default)(options)}},366:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionDetailLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);var _useUrlParams2=__webpack_require__(45);var _pickKeys=__webpack_require__(188);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var TransactionDetailLink=function TransactionDetailLink(_ref){var serviceName=_ref.serviceName,traceId=_ref.traceId,transactionId=_ref.transactionId,transactionName=_ref.transactionName,transactionType=_ref.transactionType,rest=_objectWithoutProperties(_ref,["serviceName","traceId","transactionId","transactionName","transactionType"]);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"transactionResult","serviceVersion");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/transactions/view"),query:_objectSpread({traceId:traceId,transactionId:transactionId,transactionName:transactionName,transactionType:transactionType},persistedFilters)},rest))};exports.TransactionDetailLink=TransactionDetailLink},367:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UnoptimizedManagedTable=UnoptimizedManagedTable;exports.ManagedTable=void 0;var _eui=__webpack_require__(1);var _lodash=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _useUrlParams2=__webpack_require__(45);var _history=__webpack_require__(136);var _url_helpers=__webpack_require__(95);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function UnoptimizedManagedTable(props){var _props$columns$;var items=props.items,columns=props.columns,_props$initialPageInd=props.initialPageIndex,initialPageIndex=_props$initialPageInd===void 0?0:_props$initialPageInd,_props$initialPageSiz=props.initialPageSize,initialPageSize=_props$initialPageSiz===void 0?10:_props$initialPageSiz,_props$initialSortFie=props.initialSortField,initialSortField=_props$initialSortFie===void 0?((_props$columns$=props.columns[0])===null||_props$columns$===void 0?void 0:_props$columns$.field)||"":_props$initialSortFie,_props$initialSortDir=props.initialSortDirection,initialSortDirection=_props$initialSortDir===void 0?"asc":_props$initialSortDir,_props$hidePerPageOpt=props.hidePerPageOptions,hidePerPageOptions=_props$hidePerPageOpt===void 0?true:_props$hidePerPageOpt,noItemsMessage=props.noItemsMessage,_props$sortItems=props.sortItems,sortItems=_props$sortItems===void 0?true:_props$sortItems;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,_useUrlParams$urlPara2=_useUrlParams$urlPara.page,page=_useUrlParams$urlPara2===void 0?initialPageIndex:_useUrlParams$urlPara2,_useUrlParams$urlPara3=_useUrlParams$urlPara.pageSize,pageSize=_useUrlParams$urlPara3===void 0?initialPageSize:_useUrlParams$urlPara3,_useUrlParams$urlPara4=_useUrlParams$urlPara.sortField,sortField=_useUrlParams$urlPara4===void 0?initialSortField:_useUrlParams$urlPara4,_useUrlParams$urlPara5=_useUrlParams$urlPara.sortDirection,sortDirection=_useUrlParams$urlPara5===void 0?initialSortDirection:_useUrlParams$urlPara5;var renderedItems=(0,_react.useMemo)((function(){var sortedItems=sortItems?(0,_lodash.sortByOrder)(items,sortField,sortDirection):items;return sortedItems.slice(page*pageSize,(page+1)*pageSize)}),[page,pageSize,sortField,sortDirection,items,sortItems]);var sort=(0,_react.useMemo)((function(){return{sort:{field:sortField,direction:sortDirection}}}),[sortField,sortDirection]);var onTableChange=(0,_react.useCallback)((function(options){_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(_history.history.location.search),{page:options.page.index,pageSize:options.page.size,sortField:options.sort.field,sortDirection:options.sort.direction}))}))}),[]);var pagination=(0,_react.useMemo)((function(){return{hidePerPageOptions:hidePerPageOptions,totalItemCount:items.length,pageIndex:page,pageSize:pageSize}}),[hidePerPageOptions,items,page,pageSize]);return _react.default.createElement(_eui.EuiBasicTable,{noItemsMessage:noItemsMessage,items:renderedItems,columns:columns,pagination:pagination,sorting:sort,onChange:onTableChange})}var ManagedTable=_react.default.memo(UnoptimizedManagedTable);exports.ManagedTable=ManagedTable},368:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingStatePrompt=LoadingStatePrompt;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function LoadingStatePrompt(){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"l"})))}},4:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},40:function(module,exports){module.exports=__kbnSharedDeps__.Angular},42:function(module,exports){module.exports=__kbnSharedDeps__.ElasticCharts},4291:function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(2);var _kibanaCore__=__webpack_require__(68);var injectedMetadata=JSON.parse(document.querySelector("kbn-injected-metadata").getAttribute("data"));_i18n.i18n.load(injectedMetadata.i18n.translationsUrl).catch((function(e){return e})).then((function(i18nError){var coreSystem=new _kibanaCore__.CoreSystem({injectedMetadata:injectedMetadata,rootDomElement:document.body,browserSupportsCsp:!window.__kbnCspNotEnforced__,requireLegacyFiles:function requireLegacyFiles(){__webpack_require__(4292)}});coreSystem.setup().then((function(coreSetup){if(i18nError){coreSetup.fatalErrors.add(i18nError)}return coreSystem.start()}))}))},4292:function(module,exports,__webpack_require__){"use strict";var _new_platform=__webpack_require__(7);__webpack_require__(1505);__webpack_require__(205);var _chrome=_interopRequireDefault(__webpack_require__(8));var _newPlatform=__webpack_require__(4293);var _plugin=__webpack_require__(1506);__webpack_require__(4481);var _index=_interopRequireDefault(__webpack_require__(4482));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_chrome.default.setRootTemplate(_index.default);var checkForRoot=function checkForRoot(){return new Promise((function(resolve){var ready=!!document.getElementById(_plugin.REACT_APP_ROOT_ID);if(ready){resolve()}else{setTimeout((function(){return resolve(checkForRoot())}),10)}}))};checkForRoot().then((function(){var pluginInstance=(0,_newPlatform.plugin)({});pluginInstance.setup(_new_platform.npSetup.core,_new_platform.npSetup.plugins);pluginInstance.start(_new_platform.npStart.core,_new_platform.npStart.plugins)}))},4293:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=void 0;var _plugin=__webpack_require__(1506);var plugin=function plugin(pluginInitializerContext){return new _plugin.ApmPlugin(pluginInitializerContext)};exports.plugin=plugin},4294:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.routes=void 0;var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _reactRouterDom=__webpack_require__(23);var _service_nodes=__webpack_require__(833);var _ErrorGroupDetails=__webpack_require__(4295);var _ServiceDetails=__webpack_require__(4334);var _TransactionDetails=__webpack_require__(4405);var _Home=__webpack_require__(4446);var _route_names=__webpack_require__(4457);var _Settings=__webpack_require__(4458);var _AgentConfigurations=__webpack_require__(4460);var _ApmIndices=__webpack_require__(4469);var _url_helpers=__webpack_require__(95);var _ServiceNodeMetrics=__webpack_require__(4470);var _resolveUrlParams2=__webpack_require__(1510);var _i18n2=__webpack_require__(187);var _TraceLink=__webpack_require__(4471);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var metricsBreadcrumb=_i18n.i18n.translate("xpack.apm.breadcrumb.metricsTitle",{defaultMessage:"Metrics"});var renderAsRedirectTo=function renderAsRedirectTo(to){return function(_ref){var location=_ref.location;return _react.default.createElement(_reactRouterDom.Redirect,{to:_objectSpread({},location,{pathname:to})})}};var routes=[{exact:true,path:"/",render:renderAsRedirectTo("/services"),breadcrumb:"APM",name:_route_names.RouteName.HOME},{exact:true,path:"/services",component:function component(){return _react.default.createElement(_Home.Home,{tab:"services"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.servicesTitle",{defaultMessage:"Services"}),name:_route_names.RouteName.SERVICES},{exact:true,path:"/traces",component:function component(){return _react.default.createElement(_Home.Home,{tab:"traces"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.tracesTitle",{defaultMessage:"Traces"}),name:_route_names.RouteName.TRACES},{exact:true,path:"/settings",render:renderAsRedirectTo("/settings/agent-configuration"),breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.listSettingsTitle",{defaultMessage:"Settings"}),name:_route_names.RouteName.SETTINGS},{exact:true,path:"/settings/apm-indices",component:function component(){return _react.default.createElement(_Settings.Settings,null,_react.default.createElement(_ApmIndices.ApmIndices,null))},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.settings.indicesTitle",{defaultMessage:"Indices"}),name:_route_names.RouteName.INDICES},{exact:true,path:"/settings/agent-configuration",component:function component(){return _react.default.createElement(_Settings.Settings,null,_react.default.createElement(_AgentConfigurations.AgentConfigurations,null))},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.settings.agentConfigurationTitle",{defaultMessage:"Agent Configuration"}),name:_route_names.RouteName.AGENT_CONFIGURATION},{exact:true,path:"/services/:serviceName",breadcrumb:function breadcrumb(_ref2){var match=_ref2.match;return match.params.serviceName},render:function render(props){return renderAsRedirectTo("/services/".concat(props.match.params.serviceName,"/transactions"))(props)},name:_route_names.RouteName.SERVICE},{exact:true,path:"/services/:serviceName/errors/:groupId",component:_ErrorGroupDetails.ErrorGroupDetails,breadcrumb:function breadcrumb(_ref3){var match=_ref3.match;return match.params.groupId},name:_route_names.RouteName.ERROR},{exact:true,path:"/services/:serviceName/errors",component:function component(){return _react.default.createElement(_ServiceDetails.ServiceDetails,{tab:"errors"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.errorsTitle",{defaultMessage:"Errors"}),name:_route_names.RouteName.ERRORS},{exact:true,path:"/services/:serviceName/transactions",component:function component(){return _react.default.createElement(_ServiceDetails.ServiceDetails,{tab:"transactions"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.transactionsTitle",{defaultMessage:"Transactions"}),name:_route_names.RouteName.TRANSACTIONS},{exact:true,path:"/services/:serviceName/metrics",component:function component(){return _react.default.createElement(_ServiceDetails.ServiceDetails,{tab:"metrics"})},breadcrumb:metricsBreadcrumb,name:_route_names.RouteName.METRICS},{exact:true,path:"/services/:serviceName/nodes",component:function component(){return _react.default.createElement(_ServiceDetails.ServiceDetails,{tab:"nodes"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.nodesTitle",{defaultMessage:"JVMs"}),name:_route_names.RouteName.SERVICE_NODES},{exact:true,path:"/services/:serviceName/nodes/:serviceNodeName/metrics",component:function component(){return _react.default.createElement(_ServiceNodeMetrics.ServiceNodeMetrics,null)},breadcrumb:function breadcrumb(_ref4){var location=_ref4.location;var _resolveUrlParams=(0,_resolveUrlParams2.resolveUrlParams)(location,{}),serviceNodeName=_resolveUrlParams.serviceNodeName;if(serviceNodeName===_service_nodes.SERVICE_NODE_NAME_MISSING){return _i18n2.UNIDENTIFIED_SERVICE_NODES_LABEL}return serviceNodeName||""},name:_route_names.RouteName.SERVICE_NODE_METRICS},{exact:true,path:"/services/:serviceName/transactions/view",component:_TransactionDetails.TransactionDetails,breadcrumb:function breadcrumb(_ref5){var location=_ref5.location;var query=(0,_url_helpers.toQuery)(location.search);return query.transactionName},name:_route_names.RouteName.TRANSACTION_NAME},{exact:true,path:"/link-to/trace/:traceId",component:_TraceLink.TraceLink,breadcrumb:null,name:_route_names.RouteName.LINK_TO_TRACE},{exact:true,path:"/service-map",component:function component(){return _react.default.createElement(_Home.Home,{tab:"service-map"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.serviceMapTitle",{defaultMessage:"Service Map"}),name:_route_names.RouteName.SERVICE_MAP},{exact:true,path:"/services/:serviceName/service-map",component:function component(){return _react.default.createElement(_ServiceDetails.ServiceDetails,{tab:"service-map"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.serviceMapTitle",{defaultMessage:"Service Map"}),name:_route_names.RouteName.SINGLE_SERVICE_MAP}];exports.routes=routes},4295:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorGroupDetails=ErrorGroupDetails;var _eui=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _i18n2=__webpack_require__(187);var _useFetcher3=__webpack_require__(54);var _variables=__webpack_require__(38);var _ApmHeader=__webpack_require__(451);var _DetailView=__webpack_require__(4311);var _Distribution=__webpack_require__(1521);var _useLocation=__webpack_require__(156);var _useUrlParams2=__webpack_require__(45);var _public=__webpack_require__(238);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Titles=_styledComponents.default.div.withConfig({displayName:"Titles",componentId:"n5cwlo-0"})(["margin-bottom:",";"],(0,_variables.px)(_variables.units.plus));var Label=_styledComponents.default.div.withConfig({displayName:"Label",componentId:"n5cwlo-1"})(["margin-bottom:",";font-size:",";color:",";"],(0,_variables.px)(_variables.units.quarter),_variables.fontSizes.small,_eui_theme_light.default.euiColorMediumShade);var Message=_styledComponents.default.div.withConfig({displayName:"Message",componentId:"n5cwlo-2"})(["font-family:",";font-weight:bold;font-size:",";margin-bottom:",";"],_variables.fontFamilyCode,_variables.fontSizes.large,(0,_variables.px)(_variables.units.half));var Culprit=_styledComponents.default.div.withConfig({displayName:"Culprit",componentId:"n5cwlo-3"})(["font-family:",";"],_variables.fontFamilyCode);function getShortGroupId(errorGroupId){if(!errorGroupId){return _i18n2.NOT_AVAILABLE_LABEL}return errorGroupId.slice(0,5)}function ErrorGroupDetails(){var _errorGroupData$error,_errorGroupData$error2,_errorGroupData$error3,_errorGroupData$error4,_errorGroupData$error5,_errorGroupData$error6,_errorGroupData$error7;var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,errorGroupId=urlParams.errorGroupId;var _useFetcher=(0,_useFetcher3.useFetcher)((function(callApmApi){if(serviceName&&start&&end&&errorGroupId){return callApmApi({pathname:"/api/apm/services/{serviceName}/errors/{groupId}",params:{path:{serviceName:serviceName,groupId:errorGroupId},query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,errorGroupId,uiFilters]),errorGroupData=_useFetcher.data;var _useFetcher2=(0,_useFetcher3.useFetcher)((function(callApmApi){if(serviceName&&start&&end&&errorGroupId){return callApmApi({pathname:"/api/apm/services/{serviceName}/errors/distribution",params:{path:{serviceName:serviceName},query:{start:start,end:end,groupId:errorGroupId,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,errorGroupId,uiFilters]),errorDistributionData=_useFetcher2.data;(0,_public.useTrackPageview)({app:"apm",path:"error_group_details"});(0,_public.useTrackPageview)({app:"apm",path:"error_group_details",delay:15e3});if(!errorGroupData||!errorDistributionData){return null}var showDetails=errorGroupData.occurrencesCount!==0;var logMessage=(_errorGroupData$error=errorGroupData.error)===null||_errorGroupData$error===void 0?void 0:(_errorGroupData$error2=_errorGroupData$error.error.log)===null||_errorGroupData$error2===void 0?void 0:_errorGroupData$error2.message;var excMessage=(_errorGroupData$error3=errorGroupData.error)===null||_errorGroupData$error3===void 0?void 0:(_errorGroupData$error4=_errorGroupData$error3.error.exception)===null||_errorGroupData$error4===void 0?void 0:_errorGroupData$error4[0].message;var culprit=(_errorGroupData$error5=errorGroupData.error)===null||_errorGroupData$error5===void 0?void 0:_errorGroupData$error5.error.culprit;var isUnhandled=((_errorGroupData$error6=errorGroupData.error)===null||_errorGroupData$error6===void 0?void 0:(_errorGroupData$error7=_errorGroupData$error6.error.exception)===null||_errorGroupData$error7===void 0?void 0:_errorGroupData$error7[0].handled)===false;return _react.default.createElement("div",null,_react.default.createElement(_ApmHeader.ApmHeader,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h1",null,_i18n.i18n.translate("xpack.apm.errorGroupDetails.errorGroupTitle",{defaultMessage:"Error group {errorGroupId}",values:{errorGroupId:getShortGroupId(urlParams.errorGroupId)}})))),isUnhandled&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiBadge,{color:"warning"},_i18n.i18n.translate("xpack.apm.errorGroupDetails.unhandledLabel",{defaultMessage:"Unhandled"}))))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiPanel,null,showDetails&&_react.default.createElement(Titles,null,_react.default.createElement(_eui.EuiText,null,logMessage&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(Label,null,_i18n.i18n.translate("xpack.apm.errorGroupDetails.logMessageLabel",{defaultMessage:"Log message"})),_react.default.createElement(Message,null,logMessage)),_react.default.createElement(Label,null,_i18n.i18n.translate("xpack.apm.errorGroupDetails.exceptionMessageLabel",{defaultMessage:"Exception message"})),_react.default.createElement(Message,null,excMessage||_i18n2.NOT_AVAILABLE_LABEL),_react.default.createElement(Label,null,_i18n.i18n.translate("xpack.apm.errorGroupDetails.culpritLabel",{defaultMessage:"Culprit"})),_react.default.createElement(Culprit,null,culprit||_i18n2.NOT_AVAILABLE_LABEL))),_react.default.createElement(_Distribution.ErrorDistribution,{distribution:errorDistributionData,title:_i18n.i18n.translate("xpack.apm.errorGroupDetails.occurrencesChartLabel",{defaultMessage:"Occurrences"})})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),showDetails&&_react.default.createElement(_DetailView.DetailView,{errorGroup:errorGroupData,urlParams:urlParams,location:location}))}},4296:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useDelayedVisibility=useDelayedVisibility;var _react=__webpack_require__(0);var _Delayed=__webpack_require__(4297);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function useDelayedVisibility(visible,hideDelayMs,showDelayMs,minimumVisibleDuration){var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isVisible=_useState2[0],setIsVisible=_useState2[1];var delayedRef=(0,_react.useRef)(null);(0,_react.useEffect)((function(){var delayed=new _Delayed.Delayed({hideDelayMs:hideDelayMs,showDelayMs:showDelayMs,minimumVisibleDuration:minimumVisibleDuration});delayed.onChange((function(visibility){setIsVisible(visibility)}));delayedRef.current=delayed;return function(){delayed.destroy()}}),[hideDelayMs,showDelayMs,minimumVisibleDuration]);(0,_react.useEffect)((function(){if(!delayedRef.current){return}if(visible){delayedRef.current.show()}else{delayedRef.current.hide()}}),[visible]);return isVisible}},4297:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Delayed=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Delayed=function(){function Delayed(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$minimumVisibleDu=_ref.minimumVisibleDuration,minimumVisibleDuration=_ref$minimumVisibleDu===void 0?1e3:_ref$minimumVisibleDu,_ref$showDelayMs=_ref.showDelayMs,showDelayMs=_ref$showDelayMs===void 0?50:_ref$showDelayMs,_ref$hideDelayMs=_ref.hideDelayMs,hideDelayMs=_ref$hideDelayMs===void 0?50:_ref$hideDelayMs;_classCallCheck(this,Delayed);_defineProperty(this,"displayedAt",0);_defineProperty(this,"hideDelayMs",void 0);_defineProperty(this,"isVisible",false);_defineProperty(this,"minimumVisibleDuration",void 0);_defineProperty(this,"showDelayMs",void 0);_defineProperty(this,"timeoutId",void 0);_defineProperty(this,"onChangeCallback",(function(){return null}));this.minimumVisibleDuration=minimumVisibleDuration;this.hideDelayMs=hideDelayMs;this.showDelayMs=showDelayMs}_createClass(Delayed,[{key:"updateState",value:function updateState(isVisible){var _this=this;window.clearTimeout(this.timeoutId);var ms=!isVisible?Math.max(this.displayedAt+this.minimumVisibleDuration-Date.now(),this.hideDelayMs):this.showDelayMs;this.timeoutId=window.setTimeout((function(){if(_this.isVisible!==isVisible){_this.isVisible=isVisible;_this.onChangeCallback(isVisible);if(isVisible){_this.displayedAt=Date.now()}}}),ms)}},{key:"show",value:function show(){this.updateState(true)}},{key:"hide",value:function hide(){this.updateState(false)}},{key:"onChange",value:function onChange(onChangeCallback){this.onChangeCallback=onChangeCallback}},{key:"destroy",value:function destroy(){if(this.timeoutId){window.clearTimeout(this.timeoutId)}}}]);return Delayed}();exports.Delayed=Delayed},4298:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useComponentId=useComponentId;var _react=__webpack_require__(0);var uniqueId=0;var getUniqueId=function getUniqueId(){return uniqueId++};function useComponentId(){var idRef=(0,_react.useRef)(getUniqueId());return idRef.current}},4300:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KueryBar=KueryBar;var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _i18n=__webpack_require__(2);var _url_helpers=__webpack_require__(95);var _Typeahead=__webpack_require__(4301);var _get_bool_filter=__webpack_require__(4305);var _useLocation=__webpack_require__(156);var _useUrlParams2=__webpack_require__(45);var _history=__webpack_require__(136);var _useApmPluginContext=__webpack_require__(80);var _useDynamicIndexPattern=__webpack_require__(4307);var _public=__webpack_require__(11);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var Container=_styledComponents.default.div.withConfig({displayName:"Container",componentId:"sc-8juast-0"})(["margin-bottom:10px;"]);function convertKueryToEsQuery(kuery,indexPattern){var ast=_public.esKuery.fromKueryExpression(kuery);return _public.esKuery.toElasticsearchQuery(ast,indexPattern)}function getSuggestions(query,selectionStart,indexPattern,boolFilter,autocompleteProvider){if(!autocompleteProvider){return[]}var config={get:function get(){return true}};var getAutocompleteSuggestions=autocompleteProvider({config:config,indexPatterns:[indexPattern],boolFilter:boolFilter});return getAutocompleteSuggestions({query:query,selectionStart:selectionStart,selectionEnd:selectionStart})}function KueryBar(){var _useState=(0,_react.useState)({suggestions:[],isLoadingSuggestions:false}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var location=(0,_useLocation.useLocation)();var data=(0,_useApmPluginContext.useApmPluginContext)().plugins.data;var autocompleteProvider=data.autocomplete.getProvider("kuery");var currentRequestCheck;var processorEvent=urlParams.processorEvent;var examples={transaction:"transaction.duration.us > 300000",error:"http.response.status_code >= 400",metric:'process.pid = "1234"',defaults:"transaction.duration.us > 300000 AND http.response.status_code >= 400"};var example=examples[processorEvent||"defaults"];var _useDynamicIndexPatte=(0,_useDynamicIndexPattern.useDynamicIndexPattern)(processorEvent),indexPattern=_useDynamicIndexPatte.indexPattern;function onChange(inputValue,selectionStart){var currentRequest,boolFilter,suggestions;return regeneratorRuntime.async((function onChange$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(indexPattern==null)){_context.next=2;break}return _context.abrupt("return");case 2:setState(_objectSpread({},state,{suggestions:[],isLoadingSuggestions:true}));currentRequest=(0,_lodash.uniqueId)();currentRequestCheck=currentRequest;boolFilter=(0,_get_bool_filter.getBoolFilter)(urlParams);_context.prev=6;_context.next=9;return regeneratorRuntime.awrap(getSuggestions(inputValue,selectionStart,indexPattern,boolFilter,autocompleteProvider));case 9:_context.t0=function(suggestion){return!(0,_lodash.startsWith)(suggestion.text,"span.")};suggestions=_context.sent.filter(_context.t0).slice(0,15);if(!(currentRequest!==currentRequestCheck)){_context.next=13;break}return _context.abrupt("return");case 13:setState(_objectSpread({},state,{suggestions:suggestions,isLoadingSuggestions:false}));_context.next=19;break;case 16:_context.prev=16;_context.t1=_context["catch"](6);console.error("Error while fetching suggestions",_context.t1);case 19:case"end":return _context.stop()}}}),null,null,[[6,16]])}function onSubmit(inputValue){if(indexPattern==null){return}try{var res=convertKueryToEsQuery(inputValue,indexPattern);if(!res){return}_history.history.push(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{kuery:encodeURIComponent(inputValue.trim())}))}))}catch(e){console.log("Invalid kuery syntax")}}return _react.default.createElement(Container,null,_react.default.createElement(_Typeahead.Typeahead,{isLoading:state.isLoadingSuggestions,initialValue:urlParams.kuery,onChange:onChange,onSubmit:onSubmit,suggestions:state.suggestions,placeholder:_i18n.i18n.translate("xpack.apm.kueryBar.placeholder",{defaultMessage:"Search {event, select,\n            transaction {transactions}\n            metric {metrics}\n            error {errors}\n            other {transactions, errors and metrics}\n          } (E.g. {queryExample})",values:{queryExample:example,event:processorEvent}})}))}},4301:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Typeahead=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _Suggestions=_interopRequireDefault(__webpack_require__(4302));var _ClickOutside=_interopRequireDefault(__webpack_require__(4304));var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KEY_CODES={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,ESC:27,TAB:9};var Typeahead=function(_Component){_inherits(Typeahead,_Component);function Typeahead(){var _getPrototypeOf2;var _this;_classCallCheck(this,Typeahead);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Typeahead)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isSuggestionsVisible:false,index:null,value:"",initialValue:""});_defineProperty(_assertThisInitialized(_this),"incrementIndex",(function(currentIndex){var nextIndex=currentIndex+1;if(currentIndex===null||nextIndex>=_this.props.suggestions.length){nextIndex=0}_this.setState({index:nextIndex})}));_defineProperty(_assertThisInitialized(_this),"decrementIndex",(function(currentIndex){var previousIndex=currentIndex-1;if(previousIndex<0){previousIndex=null}_this.setState({index:previousIndex})}));_defineProperty(_assertThisInitialized(_this),"onKeyUp",(function(event){var selectionStart=event.target.selectionStart;var value=_this.state.value;switch(event.keyCode){case KEY_CODES.LEFT:_this.setState({isSuggestionsVisible:true});_this.props.onChange(value,selectionStart);break;case KEY_CODES.RIGHT:_this.setState({isSuggestionsVisible:true});_this.props.onChange(value,selectionStart);break}}));_defineProperty(_assertThisInitialized(_this),"onKeyDown",(function(event){var _this$state=_this.state,isSuggestionsVisible=_this$state.isSuggestionsVisible,index=_this$state.index,value=_this$state.value;switch(event.keyCode){case KEY_CODES.DOWN:event.preventDefault();if(isSuggestionsVisible){_this.incrementIndex(index)}else{_this.setState({isSuggestionsVisible:true,index:0})}break;case KEY_CODES.UP:event.preventDefault();if(isSuggestionsVisible){_this.decrementIndex(index)}break;case KEY_CODES.ENTER:event.preventDefault();if(isSuggestionsVisible&&_this.props.suggestions[index]){_this.selectSuggestion(_this.props.suggestions[index])}else{_this.setState({isSuggestionsVisible:false});_this.props.onSubmit(value)}break;case KEY_CODES.ESC:event.preventDefault();_this.setState({isSuggestionsVisible:false});break;case KEY_CODES.TAB:_this.setState({isSuggestionsVisible:false});break}}));_defineProperty(_assertThisInitialized(_this),"selectSuggestion",(function(suggestion){var nextInputValue=_this.state.value.substr(0,suggestion.start)+suggestion.text+_this.state.value.substr(suggestion.end);_this.setState({value:nextInputValue,index:null});_this.props.onChange(nextInputValue,nextInputValue.length)}));_defineProperty(_assertThisInitialized(_this),"onClickOutside",(function(){_this.setState({isSuggestionsVisible:false})}));_defineProperty(_assertThisInitialized(_this),"onChangeInputValue",(function(event){var _event$target=event.target,value=_event$target.value,selectionStart=_event$target.selectionStart;var hasValue=Boolean(value.trim());_this.setState({value:value,isSuggestionsVisible:hasValue,index:null});if(!hasValue){_this.props.onSubmit(value)}_this.props.onChange(value,selectionStart)}));_defineProperty(_assertThisInitialized(_this),"onClickInput",(function(event){var selectionStart=event.target.selectionStart;_this.props.onChange(_this.state.value,selectionStart)}));_defineProperty(_assertThisInitialized(_this),"onClickSuggestion",(function(suggestion){_this.selectSuggestion(suggestion);_this.inputRef.focus()}));_defineProperty(_assertThisInitialized(_this),"onMouseEnterSuggestion",(function(index){_this.setState({index:index})}));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(){_this.props.onSubmit(_this.state.value);_this.setState({isSuggestionsVisible:false})}));return _this}_createClass(Typeahead,[{key:"render",value:function render(){var _this2=this;var placeholder=this.props.placeholder;return _react.default.createElement(_ClickOutside.default,{onClickOutside:this.onClickOutside,style:{position:"relative"}},_react.default.createElement("div",{style:{position:"relative"}},_react.default.createElement(_eui.EuiFieldSearch,{fullWidth:true,style:{backgroundImage:"none"},placeholder:placeholder,inputRef:function inputRef(node){if(node){_this2.inputRef=node}},disabled:this.props.disabled,value:this.state.value,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onChange:this.onChangeInputValue,onClick:this.onClickInput,autoComplete:"off",spellCheck:false}),this.props.isLoading&&_react.default.createElement(_eui.EuiProgress,{size:"xs",color:"accent",position:"absolute",style:{bottom:0,top:"initial"}})),_react.default.createElement(_Suggestions.default,{show:this.state.isSuggestionsVisible,suggestions:this.props.suggestions,index:this.state.index,onClick:this.onClickSuggestion,onMouseEnter:this.onMouseEnterSuggestion}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props,state){var initialValue=props.initialValue?props.initialValue:"";if(initialValue!==state.initialValue){return{value:initialValue,initialValue:initialValue}}return null}}]);return Typeahead}(_react.Component);exports.Typeahead=Typeahead;Typeahead.propTypes={initialValue:_propTypes.default.string,isLoading:_propTypes.default.bool,disabled:_propTypes.default.bool,onChange:_propTypes.default.func.isRequired,onSubmit:_propTypes.default.func.isRequired,suggestions:_propTypes.default.array.isRequired,placeholder:_propTypes.default.string.isRequired};Typeahead.defaultProps={isLoading:false,disabled:false,suggestions:[]}},4302:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _lodash=__webpack_require__(3);var _Suggestion=_interopRequireDefault(__webpack_require__(4303));var _variables=__webpack_require__(38);var _polished=__webpack_require__(91);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var List=_styledComponents.default.ul.withConfig({displayName:"List",componentId:"yhgvuu-0"})(["width:100%;border:1px solid ",";border-radius:",";box-shadow:0px "," "," ",";position:absolute;background:#fff;z-index:10;left:0;max-height:",";overflow:scroll;"],_eui_theme_light.default.euiColorLightShade,(0,_variables.px)(_variables.units.quarter),(0,_variables.px)(_variables.units.quarter),(0,_variables.px)(_variables.units.double),(0,_polished.tint)(.1,_eui_theme_light.default.euiColorFullShade),(0,_variables.px)(_variables.unit*20));var Suggestions=function(_Component){_inherits(Suggestions,_Component);function Suggestions(){var _getPrototypeOf2;var _this;_classCallCheck(this,Suggestions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Suggestions)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"childNodes",[]);_defineProperty(_assertThisInitialized(_this),"scrollIntoView",(function(){var parent=_this.parentNode;var child=_this.childNodes[_this.props.index];if(_this.props.index==null||!parent||!child){return}var scrollTop=Math.max(Math.min(parent.scrollTop,child.offsetTop),child.offsetTop+child.offsetHeight-parent.offsetHeight);parent.scrollTop=scrollTop}));return _this}_createClass(Suggestions,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.index!==this.props.index){this.scrollIntoView()}}},{key:"render",value:function render(){var _this2=this;if(!this.props.show||(0,_lodash.isEmpty)(this.props.suggestions)){return null}var suggestions=this.props.suggestions.map((function(suggestion,index){var key=suggestion+"_"+index;return _react.default.createElement(_Suggestion.default,{innerRef:function innerRef(node){return _this2.childNodes[index]=node},selected:index===_this2.props.index,suggestion:suggestion,onClick:_this2.props.onClick,onMouseEnter:function onMouseEnter(){return _this2.props.onMouseEnter(index)},key:key})}));return _react.default.createElement(List,{innerRef:function innerRef(node){return _this2.parentNode=node}},suggestions)}}]);return Suggestions}(_react.Component);Suggestions.propTypes={index:_propTypes.default.number,onClick:_propTypes.default.func.isRequired,onMouseEnter:_propTypes.default.func.isRequired,show:_propTypes.default.bool,suggestions:_propTypes.default.array.isRequired};var _default=Suggestions;exports.default=_default;module.exports=exports.default},4303:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _eui=__webpack_require__(1);var _variables=__webpack_require__(38);var _polished=__webpack_require__(91);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getIconColor(type){switch(type){case"field":return _eui_theme_light.default.euiColorVis7;case"value":return _eui_theme_light.default.euiColorVis0;case"operator":return _eui_theme_light.default.euiColorVis1;case"conjunction":return _eui_theme_light.default.euiColorVis3;case"recentSearch":return _eui_theme_light.default.euiColorMediumShade}}var Description=_styledComponents.default.div.withConfig({displayName:"Description",componentId:"ph09hf-0"})(["color:",";p{display:inline;span{font-family:",";color:",";padding:0 ",";display:inline-block;}}"],_eui_theme_light.default.euiColorDarkShade,_variables.fontFamilyCode,_eui_theme_light.default.euiColorFullShade,(0,_variables.px)(_variables.units.quarter));var ListItem=_styledComponents.default.li.withConfig({displayName:"ListItem",componentId:"ph09hf-1"})(["font-size:",";height:",";align-items:center;display:flex;background:",";cursor:pointer;border-radius:",";","{p span{background:",";}}"],_variables.fontSizes.small,(0,_variables.px)(_variables.units.double),(function(props){return props.selected?_eui_theme_light.default.euiColorLightestShade:"initial"}),(0,_variables.px)(_variables.units.quarter),Description,(function(props){return props.selected?_eui_theme_light.default.euiColorEmptyShade:_eui_theme_light.default.euiColorLightestShade}));var Icon=_styledComponents.default.div.withConfig({displayName:"Icon",componentId:"ph09hf-2"})(["flex:0 0 ",";background:",";color:",";width:100%;height:100%;text-align:center;line-height:",";"],(0,_variables.px)(_variables.units.double),(function(props){return(0,_polished.tint)(.1,getIconColor(props.type))}),(function(props){return getIconColor(props.type)}),(0,_variables.px)(_variables.units.double));var TextValue=_styledComponents.default.div.withConfig({displayName:"TextValue",componentId:"ph09hf-3"})(["flex:0 0 ",";color:",";padding:0 ",";"],(0,_variables.px)(_variables.unit*16),_eui_theme_light.default.euiColorDarkestShade,(0,_variables.px)(_variables.units.half));function getEuiIconType(type){switch(type){case"field":return"kqlField";case"value":return"kqlValue";case"recentSearch":return"search";case"conjunction":return"kqlSelector";case"operator":return"kqlOperand";default:throw new Error("Unknown type",type)}}function Suggestion(props){return _react.default.createElement(ListItem,{innerRef:props.innerRef,selected:props.selected,onClick:function onClick(){return props.onClick(props.suggestion)},onMouseEnter:props.onMouseEnter},_react.default.createElement(Icon,{type:props.suggestion.type},_react.default.createElement(_eui.EuiIcon,{type:getEuiIconType(props.suggestion.type)})),_react.default.createElement(TextValue,null,props.suggestion.text),_react.default.createElement(Description,null,props.suggestion.description))}Suggestion.propTypes={onClick:_propTypes.default.func.isRequired,onMouseEnter:_propTypes.default.func.isRequired,selected:_propTypes.default.bool,suggestion:_propTypes.default.object.isRequired,innerRef:_propTypes.default.func.isRequired};var _default=Suggestion;exports.default=_default;module.exports=exports.default},4304:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ClickOutside=function(_Component){_inherits(ClickOutside,_Component);function ClickOutside(){var _getPrototypeOf2;var _this;_classCallCheck(this,ClickOutside);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ClickOutside)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"setNodeRef",(function(node){_this.nodeRef=node}));_defineProperty(_assertThisInitialized(_this),"onClick",(function(event){if(_this.nodeRef&&!_this.nodeRef.contains(event.target)){_this.props.onClickOutside()}}));return _this}_createClass(ClickOutside,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("mousedown",this.onClick)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("mousedown",this.onClick)}},{key:"render",value:function render(){var _this$props=this.props,onClickOutside=_this$props.onClickOutside,restProps=_objectWithoutProperties(_this$props,["onClickOutside"]);return _react.default.createElement("div",_extends({ref:this.setNodeRef},restProps),this.props.children)}}]);return ClickOutside}(_react.Component);exports.default=ClickOutside;ClickOutside.propTypes={onClickOutside:_propTypes.default.func.isRequired};module.exports=exports.default},4305:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getBoolFilter=getBoolFilter;var _elasticsearch_fieldnames=__webpack_require__(170);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getBoolFilter(urlParams){var start=urlParams.start,end=urlParams.end,serviceName=urlParams.serviceName,processorEvent=urlParams.processorEvent;if(!start||!end){throw new Error("Date range was not defined")}var boolFilter=[{range:{"@timestamp":{gte:new Date(start).getTime(),lte:new Date(end).getTime(),format:"epoch_millis"}}}];if(serviceName){boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.SERVICE_NAME,serviceName)})}switch(processorEvent){case"transaction":boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"transaction")});if(urlParams.transactionName){boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.TRANSACTION_NAME,urlParams.transactionName)})}if(urlParams.transactionType){boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.TRANSACTION_TYPE,urlParams.transactionType)})}break;case"error":boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"error")});if(urlParams.errorGroupId){boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.ERROR_GROUP_ID,urlParams.errorGroupId)})}break;case"metric":boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"metric")});break;default:boolFilter.push({bool:{should:[{term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"error")},{term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"transaction")},{term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"metric")}]}})}return boolFilter}},4306:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProcessorEvent=void 0;var ProcessorEvent;exports.ProcessorEvent=ProcessorEvent;(function(ProcessorEvent){ProcessorEvent["transaction"]="transaction";ProcessorEvent["error"]="error";ProcessorEvent["metric"]="metric"})(ProcessorEvent||(exports.ProcessorEvent=ProcessorEvent={}))},4307:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useDynamicIndexPattern=useDynamicIndexPattern;var _useFetcher2=__webpack_require__(54);function useDynamicIndexPattern(processorEvent){var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){return callApmApi({pathname:"/api/apm/index_pattern/dynamic",forceCache:true,params:{query:{processorEvent:processorEvent}}})}),[processorEvent]),data=_useFetcher.data,status=_useFetcher.status;return{indexPattern:data===null||data===void 0?void 0:data.dynamicIndexPattern,status:status}}},4308:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DatePicker=DatePicker;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _url_helpers=__webpack_require__(95);var _history=__webpack_require__(136);var _useLocation=__webpack_require__(156);var _useUrlParams2=__webpack_require__(45);var _callApi=__webpack_require__(365);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function DatePicker(){var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,refreshTimeRange=_useUrlParams.refreshTimeRange;var commonlyUsedRanges=[{start:"now-15m",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last15MinutesLabel",{defaultMessage:"Last 15 minutes"})},{start:"now-30m",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last30MinutesLabel",{defaultMessage:"Last 30 minutes"})},{start:"now-1h",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last1HourLabel",{defaultMessage:"Last 1 hour"})},{start:"now-24h",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last24HoursLabel",{defaultMessage:"Last 24 hours"})},{start:"now-7d",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last7DaysLabel",{defaultMessage:"Last 7 days"})},{start:"now-30d",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last30DaysLabel",{defaultMessage:"Last 30 days"})},{start:"now-90d",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last90DaysLabel",{defaultMessage:"Last 90 days"})},{start:"now-1y",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last1YearLabel",{defaultMessage:"Last 1 year"})}];function updateUrl(nextQuery){_history.history.push(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{},nextQuery))}))}function onRefreshChange(_ref){var isPaused=_ref.isPaused,refreshInterval=_ref.refreshInterval;updateUrl({refreshPaused:isPaused,refreshInterval:refreshInterval})}function onTimeChange(_ref2){var start=_ref2.start,end=_ref2.end;updateUrl({rangeFrom:start,rangeTo:end})}var rangeFrom=urlParams.rangeFrom,rangeTo=urlParams.rangeTo,refreshPaused=urlParams.refreshPaused,refreshInterval=urlParams.refreshInterval;return _react.default.createElement(_eui.EuiSuperDatePicker,{start:rangeFrom,end:rangeTo,isPaused:refreshPaused,refreshInterval:refreshInterval,onTimeChange:onTimeChange,onRefresh:function onRefresh(_ref3){var start=_ref3.start,end=_ref3.end;(0,_callApi.clearCache)();refreshTimeRange({rangeFrom:start,rangeTo:end})},onRefreshChange:onRefreshChange,showUpdateButton:true,commonlyUsedRanges:commonlyUsedRanges})}},4309:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EnvironmentFilter=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _useFetcher2=__webpack_require__(54);var _useLocation=__webpack_require__(156);var _useUrlParams2=__webpack_require__(45);var _history=__webpack_require__(136);var _url_helpers=__webpack_require__(95);var _environment_filter_values=__webpack_require__(4310);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function updateEnvironmentUrl(location,environment){var nextEnvironmentQueryParam=environment!==_environment_filter_values.ENVIRONMENT_ALL?environment:undefined;_history.history.push(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{environment:nextEnvironmentQueryParam}))}))}var ALL_OPTION={value:_environment_filter_values.ENVIRONMENT_ALL,text:_i18n.i18n.translate("xpack.apm.filter.environment.allLabel",{defaultMessage:"All"})};var NOT_DEFINED_OPTION={value:_environment_filter_values.ENVIRONMENT_NOT_DEFINED,text:_i18n.i18n.translate("xpack.apm.filter.environment.notDefinedLabel",{defaultMessage:"Not defined"})};var SEPARATOR_OPTION={text:"- ".concat(_i18n.i18n.translate("xpack.apm.filter.environment.selectEnvironmentLabel",{defaultMessage:"Select environment"})," -"),disabled:true};function getOptions(environments){var environmentOptions=environments.filter((function(env){return env!==_environment_filter_values.ENVIRONMENT_NOT_DEFINED})).map((function(environment){return{value:environment,text:environment}}));return[ALL_OPTION].concat(_toConsumableArray(environments.includes(_environment_filter_values.ENVIRONMENT_NOT_DEFINED)?[NOT_DEFINED_OPTION]:[]),_toConsumableArray(environmentOptions.length>0?[SEPARATOR_OPTION]:[]),_toConsumableArray(environmentOptions))}var EnvironmentFilter=function EnvironmentFilter(){var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var start=urlParams.start,end=urlParams.end,serviceName=urlParams.serviceName;var environment=uiFilters.environment;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(start&&end){return callApmApi({pathname:"/api/apm/ui_filters/environments",params:{query:{start:start,end:end,serviceName:serviceName}}})}}),[start,end,serviceName]),_useFetcher$data=_useFetcher.data,environments=_useFetcher$data===void 0?[]:_useFetcher$data,_useFetcher$status=_useFetcher.status,status=_useFetcher$status===void 0?"loading":_useFetcher$status;return _react.default.createElement(_eui.EuiSelect,{prepend:_i18n.i18n.translate("xpack.apm.filter.environment.label",{defaultMessage:"environment"}),options:getOptions(environments),value:environment||_environment_filter_values.ENVIRONMENT_ALL,onChange:function onChange(event){updateEnvironmentUrl(location,event.target.value)},isLoading:status==="loading"})};exports.EnvironmentFilter=EnvironmentFilter},4310:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ENVIRONMENT_NOT_DEFINED=exports.ENVIRONMENT_ALL=void 0;var ENVIRONMENT_ALL="ENVIRONMENT_ALL";exports.ENVIRONMENT_ALL=ENVIRONMENT_ALL;var ENVIRONMENT_NOT_DEFINED="ENVIRONMENT_NOT_DEFINED";exports.ENVIRONMENT_NOT_DEFINED=ENVIRONMENT_NOT_DEFINED},4311:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DetailView=DetailView;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _lodash=__webpack_require__(3);var _variables=__webpack_require__(38);var _DiscoverErrorLink=__webpack_require__(4312);var _url_helpers=__webpack_require__(95);var _history=__webpack_require__(136);var _ErrorMetadata=__webpack_require__(4314);var _Stacktrace=__webpack_require__(584);var _ErrorTabs=__webpack_require__(4325);var _Summary=__webpack_require__(841);var _TimestampTooltip=__webpack_require__(454);var _HttpInfoSummaryItem=__webpack_require__(843);var _TransactionDetailLink=__webpack_require__(366);var _UserAgentSummaryItem=__webpack_require__(1520);var _ExceptionStacktrace=__webpack_require__(4331);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var HeaderContainer=_styledComponents.default.div.withConfig({displayName:"HeaderContainer",componentId:"a860kg-0"})(["display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:",";"],(0,_variables.px)(_variables.unit));var TransactionLinkName=_styledComponents.default.div.withConfig({displayName:"TransactionLinkName",componentId:"a860kg-1"})(["margin-left:",";display:inline-block;vertical-align:middle;"],(0,_variables.px)(_variables.units.half));function getCurrentTab(){var tabs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var currentTabKey=arguments.length>1?arguments[1]:undefined;var selectedTab=tabs.find((function(_ref){var key=_ref.key;return key===currentTabKey}));return selectedTab?selectedTab:(0,_lodash.first)(tabs)||{}}function DetailView(_ref2){var _error$error$page,_error$url,_error$http,_error$http$request,_error$http2,_error$http2$response;var errorGroup=_ref2.errorGroup,urlParams=_ref2.urlParams,location=_ref2.location;var transaction=errorGroup.transaction,error=errorGroup.error,occurrencesCount=errorGroup.occurrencesCount;if(!error){return null}var tabs=(0,_ErrorTabs.getTabs)(error);var currentTab=getCurrentTab(tabs,urlParams.detailTab);var errorUrl=((_error$error$page=error.error.page)===null||_error$error$page===void 0?void 0:_error$error$page.url)||((_error$url=error.url)===null||_error$url===void 0?void 0:_error$url.full);var method=(_error$http=error.http)===null||_error$http===void 0?void 0:(_error$http$request=_error$http.request)===null||_error$http$request===void 0?void 0:_error$http$request.method;var status=(_error$http2=error.http)===null||_error$http2===void 0?void 0:(_error$http2$response=_error$http2.response)===null||_error$http2$response===void 0?void 0:_error$http2$response.status_code;return _react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(HeaderContainer,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.errorGroupDetails.errorOccurrenceTitle",{defaultMessage:"Error occurrence"}))),_react.default.createElement(_DiscoverErrorLink.DiscoverErrorLink,{error:error,kuery:urlParams.kuery},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"discoverApp"},_i18n.i18n.translate("xpack.apm.errorGroupDetails.viewOccurrencesInDiscoverButtonLabel",{defaultMessage:"View {occurrencesCount} {occurrencesCount, plural, one {occurrence} other {occurrences}} in Discover.",values:{occurrencesCount:occurrencesCount}})))),_react.default.createElement(_Summary.Summary,{items:[_react.default.createElement(_TimestampTooltip.TimestampTooltip,{time:error.timestamp.us/1e3}),errorUrl&&method?_react.default.createElement(_HttpInfoSummaryItem.HttpInfoSummaryItem,{url:errorUrl,method:method,status:status}):null,transaction&&transaction.user_agent?_react.default.createElement(_UserAgentSummaryItem.UserAgentSummaryItem,transaction.user_agent):null,transaction&&_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.errorGroupDetails.relatedTransactionSample",{defaultMessage:"Related transaction sample"})},_react.default.createElement(_TransactionDetailLink.TransactionDetailLink,{traceId:transaction.trace.id,transactionId:transaction.transaction.id,transactionName:transaction.transaction.name,transactionType:transaction.transaction.type,serviceName:transaction.service.name},_react.default.createElement(_eui.EuiIcon,{type:"merge"}),_react.default.createElement(TransactionLinkName,null,transaction.transaction.name)))]}),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiTabs,null,tabs.map((function(_ref3){var key=_ref3.key,label=_ref3.label;return _react.default.createElement(_eui.EuiTab,{onClick:function onClick(){_history.history.replace(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{detailTab:key}))}))},isSelected:currentTab.key===key,key:key},label)}))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(TabContent,{error:error,currentTab:currentTab}))}function TabContent(_ref4){var _error$service$langua,_error$error$log;var error=_ref4.error,currentTab=_ref4.currentTab;var codeLanguage=(_error$service$langua=error.service.language)===null||_error$service$langua===void 0?void 0:_error$service$langua.name;var exceptions=error.error.exception||[];var logStackframes=(_error$error$log=error.error.log)===null||_error$error$log===void 0?void 0:_error$error$log.stacktrace;switch(currentTab.key){case _ErrorTabs.logStacktraceTab.key:return _react.default.createElement(_Stacktrace.Stacktrace,{stackframes:logStackframes,codeLanguage:codeLanguage});case _ErrorTabs.exceptionStacktraceTab.key:return _react.default.createElement(_ExceptionStacktrace.ExceptionStacktrace,{codeLanguage:codeLanguage,exceptions:exceptions});default:return _react.default.createElement(_ErrorMetadata.ErrorMetadata,{error:error})}}},4312:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverErrorLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _elasticsearch_fieldnames=__webpack_require__(170);var _DiscoverLink=__webpack_require__(838);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getDiscoverQuery(error,kuery){var serviceName=error.service.name;var groupId=error.error.grouping_key;var query="".concat(_elasticsearch_fieldnames.SERVICE_NAME,':"').concat(serviceName,'" AND ').concat(_elasticsearch_fieldnames.ERROR_GROUP_ID,':"').concat(groupId,'"');if(kuery){query+=" AND ".concat(kuery)}return{_a:{interval:"auto",query:{language:"kuery",query:query},sort:{"@timestamp":"desc"}}}}var DiscoverErrorLink=function DiscoverErrorLink(_ref){var error=_ref.error,kuery=_ref.kuery,children=_ref.children;return _react.default.createElement(_DiscoverLink.DiscoverLink,{query:getDiscoverQuery(error,kuery),children:children})};exports.DiscoverErrorLink=DiscoverErrorLink},4313:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.APM_STATIC_INDEX_PATTERN_ID=void 0;var APM_STATIC_INDEX_PATTERN_ID="apm_static_index_pattern_id";exports.APM_STATIC_INDEX_PATTERN_ID=APM_STATIC_INDEX_PATTERN_ID},4314:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorMetadata=ErrorMetadata;var _react=_interopRequireWildcard(__webpack_require__(0));var _sections=__webpack_require__(4315);var _helper=__webpack_require__(582);var _=__webpack_require__(840);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ErrorMetadata(_ref){var error=_ref.error;var sectionsWithRows=(0,_react.useMemo)((function(){return(0,_helper.getSectionsWithRows)(_sections.ERROR_METADATA_SECTIONS,error)}),[error]);return _react.default.createElement(_.MetadataTable,{sections:sectionsWithRows})}},4315:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ERROR_METADATA_SECTIONS=void 0;var _sections=__webpack_require__(839);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ERROR_METADATA_SECTIONS=[_objectSpread({},_sections.LABELS,{required:true}),_sections.ERROR,_sections.HTTP,_sections.HOST,_sections.CONTAINER,_sections.SERVICE,_sections.PROCESS,_sections.AGENT,_sections.URL,_objectSpread({},_sections.USER,{required:true}),_sections.CUSTOM_ERROR];exports.ERROR_METADATA_SECTIONS=ERROR_METADATA_SECTIONS},4316:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Section=Section;var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(3);var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);var _KeyValueTable=__webpack_require__(1515);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Section(_ref){var keyValuePairs=_ref.keyValuePairs;if(!(0,_lodash.isEmpty)(keyValuePairs)){return _react.default.createElement(_KeyValueTable.KeyValueTable,{keyValuePairs:keyValuePairs})}return _react.default.createElement(_eui.EuiText,{size:"s"},_i18n.i18n.translate("xpack.apm.propertiesTable.agentFeature.noDataAvailableLabel",{defaultMessage:"No data available"}))}},4317:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FormattedKey=FormattedKey;exports.FormattedValue=FormattedValue;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _lodash=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _i18n=__webpack_require__(187);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmptyValue=_styledComponents.default.span.withConfig({displayName:"EmptyValue",componentId:"sc-1g8xvnn-0"})(["color:",";text-align:left;"],_eui_theme_light.default.euiColorMediumShade);function FormattedKey(_ref){var k=_ref.k,value=_ref.value;if(value==null){return _react.default.createElement(EmptyValue,null,k)}return _react.default.createElement(_react.default.Fragment,null,k)}function FormattedValue(_ref2){var value=_ref2.value;if((0,_lodash.isObject)(value)){return _react.default.createElement("pre",null,JSON.stringify(value,null,4))}else if((0,_lodash.isBoolean)(value)||(0,_lodash.isNumber)(value)){return _react.default.createElement(_react.default.Fragment,null,String(value))}else if(!value){return _react.default.createElement(EmptyValue,null,_i18n.NOT_AVAILABLE_LABEL)}return _react.default.createElement(_react.default.Fragment,null,value)}},4318:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LibraryStacktrace=LibraryStacktrace;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _Stackframe=__webpack_require__(1516);var _variables=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FramesContainer=(0,_styledComponents.default)("div").withConfig({displayName:"FramesContainer",componentId:"sc-15kutgr-0"})(["padding-left:",";"],(0,_variables.px)(_variables.unit));function LibraryStacktrace(_ref){var codeLanguage=_ref.codeLanguage,id=_ref.id,stackframes=_ref.stackframes;if(stackframes.length===0){return null}return _react.default.createElement(_eui.EuiAccordion,{buttonContent:_i18n.i18n.translate("xpack.apm.stacktraceTab.libraryFramesToogleButtonLabel",{defaultMessage:"{count, plural, one {# library frame} other {# library frames}}",values:{count:stackframes.length}}),id:id},_react.default.createElement(FramesContainer,null,stackframes.map((function(stackframe,i){return _react.default.createElement(_Stackframe.Stackframe,{key:i,id:i.toString(10),isLibraryFrame:true,codeLanguage:codeLanguage,stackframe:stackframe})}))))}},4319:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FrameHeading=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FileDetails=_styledComponents.default.div.withConfig({displayName:"FileDetails",componentId:"kpezkn-0"})(["color:",";padding:"," 0;font-family:",";font-size:",";"],_eui_theme_light.default.euiColorDarkShade,(0,_variables.px)(_variables.units.half),_variables.fontFamilyCode,_variables.fontSize);var LibraryFrameFileDetail=_styledComponents.default.span.withConfig({displayName:"LibraryFrameFileDetail",componentId:"kpezkn-1"})(["color:",";"],_eui_theme_light.default.euiColorDarkShade);var AppFrameFileDetail=_styledComponents.default.span.withConfig({displayName:"AppFrameFileDetail",componentId:"kpezkn-2"})(["color:",";"],_eui_theme_light.default.euiColorFullShade);var FrameHeading=function FrameHeading(_ref){var stackframe=_ref.stackframe,isLibraryFrame=_ref.isLibraryFrame;var FileDetail=isLibraryFrame?LibraryFrameFileDetail:AppFrameFileDetail;var lineNumber=stackframe.line.number;var name="filename"in stackframe?stackframe.filename:stackframe.classname;return _react.default.createElement(FileDetails,null,_react.default.createElement(FileDetail,null,name)," in"," ",_react.default.createElement(FileDetail,null,stackframe.function),lineNumber>0&&_react.default.createElement(_react.Fragment,null," at ",_react.default.createElement(FileDetail,null,"line ",stackframe.line.number)))};exports.FrameHeading=FrameHeading},4320:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Context=Context;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _lodash=__webpack_require__(3);var _polished=__webpack_require__(91);var _react=_interopRequireDefault(__webpack_require__(0));var _javascript=_interopRequireDefault(__webpack_require__(4659));var _python=_interopRequireDefault(__webpack_require__(4739));var _ruby=_interopRequireDefault(__webpack_require__(4747));var _light=_interopRequireWildcard(__webpack_require__(1815));var _styles=__webpack_require__(1819);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}(0,_light.registerLanguage)("javascript",_javascript.default);(0,_light.registerLanguage)("python",_python.default);(0,_light.registerLanguage)("ruby",_ruby.default);var ContextContainer=_styledComponents.default.div.withConfig({displayName:"ContextContainer",componentId:"urrc06-0"})(["position:relative;border-radius:",";"],_variables.borderRadius);var LINE_HEIGHT=_variables.units.eighth*9;var LineHighlight=_styledComponents.default.div.withConfig({displayName:"LineHighlight",componentId:"urrc06-1"})(["position:absolute;width:100%;height:",";top:",";pointer-events:none;background-color:",";"],(0,_variables.px)(_variables.units.eighth*9),(function(props){return(0,_variables.px)(props.lineNumber*LINE_HEIGHT)}),(0,_polished.tint)(.1,_eui_theme_light.default.euiColorWarning));var LineNumberContainer=_styledComponents.default.div.withConfig({displayName:"LineNumberContainer",componentId:"urrc06-2"})(["position:absolute;top:0;left:0;border-radius:",";background:",";"],_variables.borderRadius,(function(props){return props.isLibraryFrame?_eui_theme_light.default.euiColorEmptyShade:_eui_theme_light.default.euiColorLightestShade}));var LineNumber=_styledComponents.default.div.withConfig({displayName:"LineNumber",componentId:"urrc06-3"})(["position:relative;min-width:",";padding-left:",";padding-right:",";color:",";line-height:",";text-align:right;border-right:1px solid ",";background-color:",";&:last-of-type{border-radius:0 0 0 ",";}"],(0,_variables.px)(_variables.units.eighth*21),(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.units.quarter),_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.unit+_variables.units.eighth),_eui_theme_light.default.euiColorLightShade,(function(props){return props.highlight?(0,_polished.tint)(.1,_eui_theme_light.default.euiColorWarning):null}),_variables.borderRadius);var LineContainer=_styledComponents.default.div.withConfig({displayName:"LineContainer",componentId:"urrc06-4"})(["overflow:auto;margin:0 0 0 ",";padding:0;background-color:",";&:last-of-type{border-radius:0 0 "," 0;}"],(0,_variables.px)(_variables.units.eighth*21),_eui_theme_light.default.euiColorEmptyShade,_variables.borderRadius);var Line=_styledComponents.default.pre.withConfig({displayName:"Line",componentId:"urrc06-5"})(["margin:0;color:inherit;background:inherit;border:0;border-radius:0;overflow:initial;padding:0 ",";line-height:",";"],(0,_variables.px)(LINE_HEIGHT),(0,_variables.px)(LINE_HEIGHT));var Code=_styledComponents.default.code.withConfig({displayName:"Code",componentId:"urrc06-6"})(["position:relative;padding:0;margin:0;white-space:pre;z-index:2;"]);function getStackframeLines(stackframe){var _stackframe$context,_stackframe$context2;var line=stackframe.line.context;var preLines=((_stackframe$context=stackframe.context)===null||_stackframe$context===void 0?void 0:_stackframe$context.pre)||[];var postLines=((_stackframe$context2=stackframe.context)===null||_stackframe$context2===void 0?void 0:_stackframe$context2.post)||[];return[].concat(_toConsumableArray(preLines),[line],_toConsumableArray(postLines))}function getStartLineNumber(stackframe){var _stackframe$context3;var preLines=(0,_lodash.size)(((_stackframe$context3=stackframe.context)===null||_stackframe$context3===void 0?void 0:_stackframe$context3.pre)||[]);return stackframe.line.number-preLines}function Context(_ref){var _stackframe$context4;var stackframe=_ref.stackframe,codeLanguage=_ref.codeLanguage,isLibraryFrame=_ref.isLibraryFrame;var lines=getStackframeLines(stackframe);var startLineNumber=getStartLineNumber(stackframe);var highlightedLineIndex=(0,_lodash.size)(((_stackframe$context4=stackframe.context)===null||_stackframe$context4===void 0?void 0:_stackframe$context4.pre)||[]);var language=codeLanguage||"javascript";return _react.default.createElement(ContextContainer,null,_react.default.createElement(LineHighlight,{lineNumber:highlightedLineIndex}),_react.default.createElement(LineNumberContainer,{isLibraryFrame:isLibraryFrame},lines.map((function(line,i){return _react.default.createElement(LineNumber,{key:line+i,highlight:highlightedLineIndex===i},i+startLineNumber,".")}))),_react.default.createElement(LineContainer,null,lines.map((function(line,i){return _react.default.createElement(_light.default,{key:line+i,language:language,style:_styles.xcode,PreTag:Line,CodeTag:Code,customStyle:{padding:null,overflowX:null}},line||"\n")}))))}},4324:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Variables=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _variables=__webpack_require__(38);var _KeyValueTable=__webpack_require__(1515);var _flattenObject=__webpack_require__(1513);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VariablesContainer=_styledComponents.default.div.withConfig({displayName:"VariablesContainer",componentId:"uun7h7-0"})(["background:",";border-radius:0 0 "," ",";padding:"," ",";"],_eui_theme_light.default.euiColorEmptyShade,_variables.borderRadius,_variables.borderRadius,(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.unit));var Variables=function Variables(_ref){var vars=_ref.vars;if(!vars){return null}var flattenedVariables=(0,_flattenObject.flattenObject)(vars);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(VariablesContainer,null,_react.default.createElement(_eui.EuiAccordion,{id:"local-variables",className:"euiAccordion",buttonContent:_i18n.i18n.translate("xpack.apm.stacktraceTab.localVariablesToogleButtonLabel",{defaultMessage:"Local variables"})},_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_KeyValueTable.KeyValueTable,{keyValuePairs:flattenedVariables})))))};exports.Variables=Variables},4325:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTabs=getTabs;exports.metadataTab=exports.exceptionStacktraceTab=exports.logStacktraceTab=void 0;var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(3);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var logStacktraceTab={key:"log_stacktrace",label:_i18n.i18n.translate("xpack.apm.propertiesTable.tabs.logStacktraceLabel",{defaultMessage:"Log stack trace"})};exports.logStacktraceTab=logStacktraceTab;var exceptionStacktraceTab={key:"exception_stacktrace",label:_i18n.i18n.translate("xpack.apm.propertiesTable.tabs.exceptionStacktraceLabel",{defaultMessage:"Exception stack trace"})};exports.exceptionStacktraceTab=exceptionStacktraceTab;var metadataTab={key:"metadata",label:_i18n.i18n.translate("xpack.apm.propertiesTable.tabs.metadataLabel",{defaultMessage:"Metadata"})};exports.metadataTab=metadataTab;function getTabs(error){var _error$error$log;var hasLogStacktrace=!(0,_lodash.isEmpty)((_error$error$log=error.error.log)===null||_error$error$log===void 0?void 0:_error$error$log.stacktrace);return[].concat(_toConsumableArray(hasLogStacktrace?[logStacktraceTab]:[]),[exceptionStacktraceTab,metadataTab])}},4326:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asAbsoluteDateTime=asAbsoluteDateTime;exports.asRelativeDateTimeRange=asRelativeDateTimeRange;exports.getDateDifference=void 0;var _momentTimezone=_interopRequireDefault(__webpack_require__(35));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function formatTimezone(momentTime){var DEFAULT_TIMEZONE_FORMAT="Z";var utcOffsetHours=momentTime.utcOffset()/60;var customTimezoneFormat=utcOffsetHours>0?"+".concat(utcOffsetHours):utcOffsetHours;var utcOffsetFormatted=Number.isInteger(utcOffsetHours)?customTimezoneFormat:DEFAULT_TIMEZONE_FORMAT;return momentTime.format("(UTC".concat(utcOffsetFormatted,")"))}function getTimeFormat(timeUnit){switch(timeUnit){case"hours":return"HH";case"minutes":return"HH:mm";case"seconds":return"HH:mm:ss";case"milliseconds":return"HH:mm:ss.SSS";default:return""}}function getDateFormat(dateUnit){switch(dateUnit){case"years":return"YYYY";case"months":return"MMM YYYY";case"days":return"MMM D, YYYY";default:return""}}var getDateDifference=function getDateDifference(start,end,unitOfTime){return end.diff(start,unitOfTime)};exports.getDateDifference=getDateDifference;function getFormatsAccordingToDateDifference(start,end){if(getDateDifference(start,end,"years")>=5){return{dateFormat:getDateFormat("years")}}if(getDateDifference(start,end,"months")>=5){return{dateFormat:getDateFormat("months")}}var dateFormatWithDays=getDateFormat("days");if(getDateDifference(start,end,"days")>1){return{dateFormat:dateFormatWithDays}}if(getDateDifference(start,end,"hours")>=5){return{dateFormat:dateFormatWithDays,timeFormat:getTimeFormat("minutes")}}if(getDateDifference(start,end,"minutes")>=5){return{dateFormat:dateFormatWithDays,timeFormat:getTimeFormat("seconds")}}return{dateFormat:dateFormatWithDays,timeFormat:getTimeFormat("milliseconds")}}function asAbsoluteDateTime(time){var timeUnit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"milliseconds";var momentTime=(0,_momentTimezone.default)(time);var formattedTz=formatTimezone(momentTime);return momentTime.format("".concat(getDateFormat("days"),", ").concat(getTimeFormat(timeUnit)," ").concat(formattedTz))}function asRelativeDateTimeRange(start,end){var momentStartTime=(0,_momentTimezone.default)(start);var momentEndTime=(0,_momentTimezone.default)(end);var _getFormatsAccordingT=getFormatsAccordingToDateDifference(momentStartTime,momentEndTime),dateFormat=_getFormatsAccordingT.dateFormat,timeFormat=_getFormatsAccordingT.timeFormat;if(timeFormat){var _startFormatted=momentStartTime.format("".concat(dateFormat,", ").concat(timeFormat));var _endFormatted=momentEndTime.format(timeFormat);var formattedTz=formatTimezone(momentStartTime);return"".concat(_startFormatted," - ").concat(_endFormatted," ").concat(formattedTz)}var startFormatted=momentStartTime.format(dateFormat);var endFormatted=momentEndTime.format(dateFormat);return"".concat(startFormatted," - ").concat(endFormatted)}},4327:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertTo=convertTo;exports.asDuration=asDuration;exports.getDurationFormatter=exports.toMicroseconds=void 0;var _i18n=__webpack_require__(2);var _moment=_interopRequireDefault(__webpack_require__(13));var _lodash=__webpack_require__(3);var _i18n2=__webpack_require__(187);var _formatters=__webpack_require__(842);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var durationUnit={hours:{label:_i18n.i18n.translate("xpack.apm.formatters.hoursTimeUnitLabel",{defaultMessage:"h"}),convert:function convert(value){return(0,_formatters.asDecimal)(_moment.default.duration(value/1e3).asHours())}},minutes:{label:_i18n.i18n.translate("xpack.apm.formatters.minutesTimeUnitLabel",{defaultMessage:"min"}),convert:function convert(value){return(0,_formatters.asDecimal)(_moment.default.duration(value/1e3).asMinutes())}},seconds:{label:_i18n.i18n.translate("xpack.apm.formatters.secondsTimeUnitLabel",{defaultMessage:"s"}),convert:function convert(value){return(0,_formatters.asDecimal)(_moment.default.duration(value/1e3).asSeconds())}},milliseconds:{label:_i18n.i18n.translate("xpack.apm.formatters.millisTimeUnitLabel",{defaultMessage:"ms"}),convert:function convert(value){return(0,_formatters.asInteger)(_moment.default.duration(value/1e3).asMilliseconds())}},microseconds:{label:_i18n.i18n.translate("xpack.apm.formatters.microsTimeUnitLabel",{defaultMessage:"Î¼s"}),convert:function convert(value){return(0,_formatters.asInteger)(value)}}};function convertTo(_ref){var unit=_ref.unit,microseconds=_ref.microseconds,_ref$defaultValue=_ref.defaultValue,defaultValue=_ref$defaultValue===void 0?_i18n2.NOT_AVAILABLE_LABEL:_ref$defaultValue;var duration=durationUnit[unit];if(!duration||microseconds==null){return{value:defaultValue,formatted:defaultValue}}var convertedValue=duration.convert(microseconds);return{value:convertedValue,unit:duration.label,formatted:"".concat(convertedValue," ").concat(duration.label)}}var toMicroseconds=function toMicroseconds(value,timeUnit){return _moment.default.duration(value,timeUnit).asMilliseconds()*1e3};exports.toMicroseconds=toMicroseconds;function getDurationUnitKey(max){if(max>toMicroseconds(1,"hours")){return"hours"}if(max>toMicroseconds(1,"minutes")){return"minutes"}if(max>toMicroseconds(10,"seconds")){return"seconds"}if(max>toMicroseconds(10,"milliseconds")){return"milliseconds"}return"microseconds"}var getDurationFormatter=(0,_lodash.memoize)((function(max){var unit=getDurationUnitKey(max);return function(value){var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},defaultValue=_ref2.defaultValue;return convertTo({unit:unit,microseconds:value,defaultValue:defaultValue})}}));exports.getDurationFormatter=getDurationFormatter;function asDuration(value){var _ref3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref3$defaultValue=_ref3.defaultValue,defaultValue=_ref3$defaultValue===void 0?_i18n2.NOT_AVAILABLE_LABEL:_ref3$defaultValue;if(value==null){return defaultValue}var formatter=getDurationFormatter(value);return formatter(value,{defaultValue:defaultValue}).formatted}},4328:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asDynamicBytes=exports.getFixedByteFormatter=void 0;var _lodash=__webpack_require__(3);var _formatters=__webpack_require__(842);function asKilobytes(value){return"".concat((0,_formatters.asDecimal)(value/1e3)," KB")}function asMegabytes(value){return"".concat((0,_formatters.asDecimal)(value/1e6)," MB")}function asGigabytes(value){return"".concat((0,_formatters.asDecimal)(value/1e9)," GB")}function asTerabytes(value){return"".concat((0,_formatters.asDecimal)(value/1e12)," TB")}function asBytes(value){return"".concat((0,_formatters.asDecimal)(value)," B")}var bailIfNumberInvalid=function bailIfNumberInvalid(cb){return function(val){if(val===null||val===undefined||isNaN(val)){return""}return cb(val)}};var getFixedByteFormatter=(0,_lodash.memoize)((function(max){var formatter=unmemoizedFixedByteFormatter(max);return bailIfNumberInvalid(formatter)}));exports.getFixedByteFormatter=getFixedByteFormatter;var asDynamicBytes=bailIfNumberInvalid((function(value){return unmemoizedFixedByteFormatter(value)(value)}));exports.asDynamicBytes=asDynamicBytes;var unmemoizedFixedByteFormatter=function unmemoizedFixedByteFormatter(max){if(max>1e12){return asTerabytes}if(max>1e9){return asGigabytes}if(max>1e6){return asMegabytes}if(max>1e3){return asKilobytes}return asBytes}},4329:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HttpStatusBadge=HttpStatusBadge;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);var _statusCodes=__webpack_require__(4330);var _httpStatusCodeToColor=__webpack_require__(1519);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HttpStatusBadge(_ref){var status=_ref.status;var label=_i18n.i18n.translate("xpack.apm.transactionDetails.statusCode",{defaultMessage:"Status code"});return _react.default.createElement(_eui.EuiToolTip,{content:label},_react.default.createElement(_eui.EuiBadge,{color:(0,_httpStatusCodeToColor.httpStatusCodeToColor)(status)||"default"},status," ",_statusCodes.statusCodes[status.toString()]))}},4330:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.statusCodes=void 0;var statusCodes={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",511:"Network Authentication Required","1xx":"**Informational**","2xx":"**Successful**","3xx":"**Redirection**","4xx":"**Client Error**","5xx":"**Server Error**","7xx":"**Developer Error**"};exports.statusCodes=statusCodes},4331:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExceptionStacktrace=ExceptionStacktrace;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _Stacktrace=__webpack_require__(584);var _CauseStacktrace=__webpack_require__(4332);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ExceptionStacktrace(_ref){var _exceptions$;var codeLanguage=_ref.codeLanguage,exceptions=_ref.exceptions;var title=(_exceptions$=exceptions[0])===null||_exceptions$===void 0?void 0:_exceptions$.message;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h4",null,title)),exceptions.map((function(ex,index){return index===0?_react.default.createElement(_Stacktrace.Stacktrace,{key:index,stackframes:ex.stacktrace,codeLanguage:codeLanguage}):_react.default.createElement(_CauseStacktrace.CauseStacktrace,{codeLanguage:codeLanguage,key:index,id:index.toString(),message:ex.message,stackframes:ex.stacktrace})})))}},4332:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CauseStacktrace=CauseStacktrace;var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);var _variables=__webpack_require__(38);var _=__webpack_require__(584);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Accordion=(0,_styledComponents.default)(_eui.EuiAccordion).withConfig({displayName:"Accordion",componentId:"sc-1gvaaxc-0"})(["border-top:",";"],_eui_theme_light.default.euiBorderThin);var CausedByContainer=(0,_styledComponents.default)("h5").withConfig({displayName:"CausedByContainer",componentId:"sc-1gvaaxc-1"})(["padding:"," 0;"],_eui_theme_light.default.spacerSizes.s);var CausedByHeading=(0,_styledComponents.default)("span").withConfig({displayName:"CausedByHeading",componentId:"sc-1gvaaxc-2"})(["color:",";display:block;font-size:",";font-weight:",";text-transform:uppercase;"],_eui_theme_light.default.textColors.subdued,_eui_theme_light.default.euiFontSizeXS,_eui_theme_light.default.euiFontWeightBold);var FramesContainer=(0,_styledComponents.default)("div").withConfig({displayName:"FramesContainer",componentId:"sc-1gvaaxc-3"})(["padding-left:",";"],(0,_variables.px)(_variables.unit));function CausedBy(_ref){var message=_ref.message;return _react.default.createElement(CausedByContainer,null,_react.default.createElement(CausedByHeading,null,_i18n.i18n.translate("xpack.apm.stacktraceTab.causedByFramesToogleButtonLabel",{defaultMessage:"Caused By"})),_react.default.createElement(_eui.EuiTitle,{size:"xxs"},_react.default.createElement("span",null,message)))}function CauseStacktrace(_ref2){var codeLanguage=_ref2.codeLanguage,id=_ref2.id,_ref2$message=_ref2.message,message=_ref2$message===void 0?"â¦":_ref2$message,_ref2$stackframes=_ref2.stackframes,stackframes=_ref2$stackframes===void 0?[]:_ref2$stackframes;if(stackframes.length===0){return _react.default.createElement(CausedBy,{message:message})}return _react.default.createElement(Accordion,{buttonContent:_react.default.createElement(CausedBy,{message:message}),id:id},_react.default.createElement(FramesContainer,null,_react.default.createElement(_.Stacktrace,{stackframes:stackframes,codeLanguage:codeLanguage})))}},4333:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SingleRect(_ref){var innerHeight=_ref.innerHeight,marginTop=_ref.marginTop,style=_ref.style,x=_ref.x,width=_ref.width;return _react.default.createElement("rect",{style:style,height:innerHeight,width:width,rx:"2px",ry:"2px",x:x,y:marginTop})}SingleRect.requiresSVG=true;SingleRect.propTypes={x:_propTypes.default.number.isRequired};var _default=SingleRect;exports.default=_default;module.exports=exports.default},4334:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceDetails=ServiceDetails;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _ApmHeader=__webpack_require__(451);var _ServiceDetailTabs=__webpack_require__(4335);var _ServiceIntegrations=__webpack_require__(4398);var _useUrlParams2=__webpack_require__(45);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ServiceDetails(_ref){var tab=_ref.tab;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var serviceName=urlParams.serviceName;return _react.default.createElement("div",null,_react.default.createElement(_ApmHeader.ApmHeader,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,serviceName))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_ServiceIntegrations.ServiceIntegrations,{urlParams:urlParams})))),_react.default.createElement(_ServiceDetailTabs.ServiceDetailTabs,{tab:tab}))}},4335:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceDetailTabs=ServiceDetailTabs;var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _ErrorGroupOverview=__webpack_require__(4336);var _TransactionOverview=__webpack_require__(4343);var _ServiceMetrics=__webpack_require__(4375);var _agent_name=__webpack_require__(460);var _EuiTabLink=__webpack_require__(1536);var _useUrlParams2=__webpack_require__(45);var _TransactionOverviewLink=__webpack_require__(586);var _ErrorOverviewLink=__webpack_require__(1537);var _MetricOverviewLink=__webpack_require__(4376);var _ServiceNodeOverviewLink=__webpack_require__(4377);var _ServiceNodeOverview=__webpack_require__(4378);var _useAgentName2=__webpack_require__(1538);var _ServiceMap=__webpack_require__(1539);var _ServiceMapLink=__webpack_require__(1540);var _useApmPluginContext=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ServiceDetailTabs(_ref){var tab=_ref.tab;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var serviceName=urlParams.serviceName;var _useAgentName=(0,_useAgentName2.useAgentName)(),agentName=_useAgentName.agentName;var serviceMapEnabled=(0,_useApmPluginContext.useApmPluginContext)().config.serviceMapEnabled;if(!serviceName){throw new Error("Service name was not defined")}var transactionsTab={link:_react.default.createElement(_TransactionOverviewLink.TransactionOverviewLink,{serviceName:serviceName},_i18n.i18n.translate("xpack.apm.serviceDetails.transactionsTabLabel",{defaultMessage:"Transactions"})),render:function render(){return _react.default.createElement(_TransactionOverview.TransactionOverview,null)},name:"transactions"};var errorsTab={link:_react.default.createElement(_ErrorOverviewLink.ErrorOverviewLink,{serviceName:serviceName},_i18n.i18n.translate("xpack.apm.serviceDetails.errorsTabLabel",{defaultMessage:"Errors"})),render:function render(){return _react.default.createElement(_ErrorGroupOverview.ErrorGroupOverview,null)},name:"errors"};var tabs=[transactionsTab,errorsTab];if((0,_agent_name.isJavaAgentName)(agentName)){var nodesListTab={link:_react.default.createElement(_ServiceNodeOverviewLink.ServiceNodeOverviewLink,{serviceName:serviceName},_i18n.i18n.translate("xpack.apm.serviceDetails.nodesTabLabel",{defaultMessage:"JVMs"})),render:function render(){return _react.default.createElement(_ServiceNodeOverview.ServiceNodeOverview,null)},name:"nodes"};tabs.push(nodesListTab)}else if(agentName&&!(0,_agent_name.isRumAgentName)(agentName)){var metricsTab={link:_react.default.createElement(_MetricOverviewLink.MetricOverviewLink,{serviceName:serviceName},_i18n.i18n.translate("xpack.apm.serviceDetails.metricsTabLabel",{defaultMessage:"Metrics"})),render:function render(){return _react.default.createElement(_ServiceMetrics.ServiceMetrics,{agentName:agentName})},name:"metrics"};tabs.push(metricsTab)}var serviceMapTab={link:_react.default.createElement(_ServiceMapLink.ServiceMapLink,{serviceName:serviceName},_i18n.i18n.translate("xpack.apm.home.serviceMapTabLabel",{defaultMessage:"Service Map"})),render:function render(){return _react.default.createElement(_ServiceMap.ServiceMap,{serviceName:serviceName})},name:"service-map"};if(serviceMapEnabled){tabs.push(serviceMapTab)}var selectedTab=tabs.find((function(serviceTab){return serviceTab.name===tab}));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTabs,null,tabs.map((function(serviceTab){return _react.default.createElement(_EuiTabLink.EuiTabLink,{isSelected:serviceTab.name===tab,key:serviceTab.name},serviceTab.link)}))),_react.default.createElement(_eui.EuiSpacer,null),selectedTab?selectedTab.render():null)}},4336:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorGroupOverview=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _useFetcher3=__webpack_require__(54);var _Distribution=__webpack_require__(1521);var _List=__webpack_require__(4337);var _useUrlParams2=__webpack_require__(45);var _public=__webpack_require__(238);var _typings=__webpack_require__(295);var _LocalUIFilters=__webpack_require__(296);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var ErrorGroupOverview=function ErrorGroupOverview(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,sortField=urlParams.sortField,sortDirection=urlParams.sortDirection;var _useFetcher=(0,_useFetcher3.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/errors/distribution",params:{path:{serviceName:serviceName},query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,uiFilters]),errorDistributionData=_useFetcher.data;var _useFetcher2=(0,_useFetcher3.useFetcher)((function(callApmApi){var normalizedSortDirection=sortDirection==="asc"?"asc":"desc";if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/errors",params:{path:{serviceName:serviceName},query:{start:start,end:end,sortField:sortField,sortDirection:normalizedSortDirection,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,sortField,sortDirection,uiFilters]),errorGroupListData=_useFetcher2.data;(0,_public.useTrackPageview)({app:"apm",path:"error_group_overview"});(0,_public.useTrackPageview)({app:"apm",path:"error_group_overview",delay:15e3});var localUIFiltersConfig=(0,_react.useMemo)((function(){var config={filterNames:["host","containerId","podName","serviceVersion"],params:{serviceName:serviceName},projection:_typings.PROJECTION.ERROR_GROUPS};return config}),[serviceName]);if(!errorDistributionData||!errorGroupListData){return null}return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localUIFiltersConfig)),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_Distribution.ErrorDistribution,{distribution:errorDistributionData,title:_i18n.i18n.translate("xpack.apm.serviceDetails.metrics.errorOccurrencesChartTitle",{defaultMessage:"Error occurrences"})})))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,"Errors")),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_List.ErrorGroupList,{items:errorGroupListData}))))};exports.ErrorGroupOverview=ErrorGroupOverview},4337:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorGroupList=void 0;var _eui=__webpack_require__(1);var _numeral=_interopRequireDefault(__webpack_require__(148));var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _i18n2=__webpack_require__(187);var _variables=__webpack_require__(38);var _useUrlParams2=__webpack_require__(45);var _ManagedTable=__webpack_require__(367);var _ErrorDetailLink=__webpack_require__(1525);var _TimestampTooltip=__webpack_require__(454);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GroupIdLink=(0,_styledComponents.default)(_ErrorDetailLink.ErrorDetailLink).withConfig({displayName:"GroupIdLink",componentId:"sc-12m0avg-0"})(["font-family:",";"],_variables.fontFamilyCode);var MessageAndCulpritCell=_styledComponents.default.div.withConfig({displayName:"MessageAndCulpritCell",componentId:"sc-12m0avg-1"})(["",";"],(0,_variables.truncate)("100%"));var MessageLink=(0,_styledComponents.default)(_ErrorDetailLink.ErrorDetailLink).withConfig({displayName:"MessageLink",componentId:"sc-12m0avg-2"})(["font-family:",";font-size:",";",";"],_variables.fontFamilyCode,_variables.fontSizes.large,(0,_variables.truncate)("100%"));var Culprit=_styledComponents.default.div.withConfig({displayName:"Culprit",componentId:"sc-12m0avg-3"})(["font-family:",";"],_variables.fontFamilyCode);var ErrorGroupList=function ErrorGroupList(props){var items=props.items;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),serviceName=_useUrlParams.urlParams.serviceName;if(!serviceName){throw new Error("Service name is required")}var columns=(0,_react.useMemo)((function(){return[{name:_i18n.i18n.translate("xpack.apm.errorsTable.groupIdColumnLabel",{defaultMessage:"Group ID"}),field:"groupId",sortable:false,width:(0,_variables.px)(_variables.unit*6),render:function render(groupId){return _react.default.createElement(GroupIdLink,{serviceName:serviceName,errorGroupId:groupId},groupId.slice(0,5)||_i18n2.NOT_AVAILABLE_LABEL)}},{name:_i18n.i18n.translate("xpack.apm.errorsTable.errorMessageAndCulpritColumnLabel",{defaultMessage:"Error message and culprit"}),field:"message",sortable:false,width:"50%",render:function render(message,item){return _react.default.createElement(MessageAndCulpritCell,null,_react.default.createElement(_eui.EuiToolTip,{id:"error-message-tooltip",content:message||_i18n2.NOT_AVAILABLE_LABEL},_react.default.createElement(MessageLink,{serviceName:serviceName,errorGroupId:item.groupId},message||_i18n2.NOT_AVAILABLE_LABEL)),_react.default.createElement("br",null),_react.default.createElement(_eui.EuiToolTip,{id:"error-culprit-tooltip",content:item.culprit||_i18n2.NOT_AVAILABLE_LABEL},_react.default.createElement(Culprit,null,item.culprit||_i18n2.NOT_AVAILABLE_LABEL)))}},{name:"",field:"handled",sortable:false,align:"right",render:function render(isUnhandled){return isUnhandled===false&&_react.default.createElement(_eui.EuiBadge,{color:"warning"},_i18n.i18n.translate("xpack.apm.errorsTable.unhandledLabel",{defaultMessage:"Unhandled"}))}},{name:_i18n.i18n.translate("xpack.apm.errorsTable.occurrencesColumnLabel",{defaultMessage:"Occurrences"}),field:"occurrenceCount",sortable:true,dataType:"number",render:function render(value){return value?(0,_numeral.default)(value).format("0.[0]a"):_i18n2.NOT_AVAILABLE_LABEL}},{field:"latestOccurrenceAt",sortable:true,name:_i18n.i18n.translate("xpack.apm.errorsTable.latestOccurrenceColumnLabel",{defaultMessage:"Latest occurrence"}),align:"right",render:function render(value){return value?_react.default.createElement(_TimestampTooltip.TimestampTooltip,{time:value,timeUnit:"minutes"}):_i18n2.NOT_AVAILABLE_LABEL}}]}),[serviceName]);return _react.default.createElement(_ManagedTable.ManagedTable,{noItemsMessage:_i18n.i18n.translate("xpack.apm.errorsTable.noErrorsLabel",{defaultMessage:"No errors were found"}),items:items,columns:columns,initialPageSize:25,initialSortField:"occurrenceCount",initialSortDirection:"desc",sortItems:false})};exports.ErrorGroupList=ErrorGroupList},4338:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Filter=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _FilterBadgeList=__webpack_require__(4339);var _variables=__webpack_require__(38);var _FilterTitleButton=__webpack_require__(4340);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var Popover=(0,_styledComponents.default)(_eui.EuiPopover).attrs((function(){return{anchorClassName:"anchor"}})).withConfig({displayName:"Popover",componentId:"sc-92gggq-0"})([".anchor{display:block;}"]);var SelectContainer=_styledComponents.default.div.withConfig({displayName:"SelectContainer",componentId:"sc-92gggq-1"})(["width:",";"],(0,_variables.px)(_variables.unit*16));var Counter=_styledComponents.default.div.withConfig({displayName:"Counter",componentId:"sc-92gggq-2"})(["border-radius:",";background:",";padding:0 ",";"],_eui_theme_light.default.euiBorderRadius,_eui_theme_light.default.euiColorLightShade,_eui_theme_light.default.paddingSizes.xs);var ApplyButton=(0,_styledComponents.default)(_eui.EuiButton).withConfig({displayName:"ApplyButton",componentId:"sc-92gggq-3"})(["align-self:flex-end;"]);var FlexItem=(0,_styledComponents.default)(_eui.EuiFlexItem).withConfig({displayName:"FlexItem",componentId:"sc-92gggq-4"})(["flex-basis:auto !important;"]);var Filter=function Filter(_ref){var name=_ref.name,title=_ref.title,options=_ref.options,onChange=_ref.onChange,value=_ref.value,showCount=_ref.showCount;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),showPopover=_useState2[0],setShowPopover=_useState2[1];var toggleShowPopover=function toggleShowPopover(){return setShowPopover((function(show){return!show}))};var button=_react.default.createElement(_FilterTitleButton.FilterTitleButton,{onClick:toggleShowPopover},title);var items=(0,_react.useMemo)((function(){return options.map((function(option){return{label:option.name,append:showCount?_react.default.createElement(Counter,null,_react.default.createElement(_eui.EuiText,{size:"xs"},option.count)):null,checked:value.includes(option.name)?"on":undefined}}))}),[value,options,showCount]);var _useState3=(0,_react.useState)(items),_useState4=_slicedToArray(_useState3,2),visibleOptions=_useState4[0],setVisibleOptions=_useState4[1];(0,_react.useEffect)((function(){setVisibleOptions(items)}),[items]);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(Popover,{id:"local-filter-".concat(name),closePopover:toggleShowPopover,button:button,isOpen:showPopover,panelPaddingSize:"s",anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiSelectable,{onChange:function onChange(selectedOptions){setVisibleOptions(selectedOptions)},options:visibleOptions,searchable:true},(function(list,search){return _react.default.createElement(SelectContainer,null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"none"},_react.default.createElement(FlexItem,{grow:true},_react.default.createElement(_eui.EuiTitle,{size:"xxxs",textTransform:"uppercase"},_react.default.createElement("h4",null,_i18n.i18n.translate("xpack.apm.applyFilter",{defaultMessage:"Apply {title} filter",values:{title:title}}))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"none"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),search,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),list,_react.default.createElement(_eui.EuiSpacer,{size:"s"})),_react.default.createElement(FlexItem,{grow:false},_react.default.createElement(ApplyButton,{color:"primary",fill:true,onClick:function onClick(){var newValue=visibleOptions.filter((function(option){return option.checked==="on"})).map((function(option){return option.label}));setShowPopover(false);onChange(newValue)},size:"s"},_i18n.i18n.translate("xpack.apm.applyOptions",{defaultMessage:"Apply options"})))))}))),value.length?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_FilterBadgeList.FilterBadgeList,{onRemove:function onRemove(val){onChange(value.filter((function(v){return val!==v})))},value:value}),_react.default.createElement(_eui.EuiSpacer,{size:"s"})):null)};exports.Filter=Filter},4339:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBadgeList=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BadgeText=_styledComponents.default.div.withConfig({displayName:"BadgeText",componentId:"sc-8w0u72-0"})(["display:inline-block;",";vertical-align:middle;"],(0,_variables.truncate)((0,_variables.px)(_variables.unit*8)));var FilterBadgeList=function FilterBadgeList(_ref){var onRemove=_ref.onRemove,value=_ref.value;return _react.default.createElement(_eui.EuiFlexGrid,{gutterSize:"s"},value.map((function(val){return _react.default.createElement(_eui.EuiFlexItem,{key:val,grow:false},_react.default.createElement("button",{type:"button",onClick:function onClick(){onRemove(val)}},_react.default.createElement(_eui.EuiBadge,{color:"hollow"},_react.default.createElement(BadgeText,null,val),_react.default.createElement(_eui.EuiIcon,{type:"cross"}))))})))};exports.FilterBadgeList=FilterBadgeList},4340:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterTitleButton=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(30));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Button=(0,_styledComponents.default)(_eui.EuiButtonEmpty).attrs((function(){return{contentProps:{className:"alignLeft"},color:"text"}})).withConfig({displayName:"Button",componentId:"oltwer-0"})(["width:100%;.alignLeft{justify-content:flex-start;padding-left:0;}"]);var FilterTitleButton=function FilterTitleButton(props){return _react.default.createElement(Button,props,_react.default.createElement(_eui.EuiTitle,{size:"xxxs",textTransform:"uppercase"},_react.default.createElement("h4",null,props.children)))};exports.FilterTitleButton=FilterTitleButton},4341:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useLocalUIFilters=useLocalUIFilters;var _lodash=__webpack_require__(3);var _useFetcher2=__webpack_require__(54);var _useUrlParams2=__webpack_require__(45);var _config=__webpack_require__(837);var _history=__webpack_require__(136);var _url_helpers=__webpack_require__(95);var _helpers=__webpack_require__(835);var _pickKeys=__webpack_require__(188);var _useCallApi=__webpack_require__(4342);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getInitialData=function getInitialData(filterNames){return filterNames.map((function(filterName){return _objectSpread({options:[]},_config.localUIFilters[filterName])}))};function useLocalUIFilters(_ref){var projection=_ref.projection,filterNames=_ref.filterNames,params=_ref.params;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),uiFilters=_useUrlParams.uiFilters,urlParams=_useUrlParams.urlParams;var callApi=(0,_useCallApi.useCallApi)();var values=_pickKeys.pickKeys.apply(void 0,[uiFilters].concat(_toConsumableArray(filterNames)));var setFilterValue=function setFilterValue(name,value){var search=(0,_lodash.omit)((0,_url_helpers.toQuery)(_history.history.location.search),name);_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)((0,_helpers.removeUndefinedProps)(_objectSpread({},search,_defineProperty({},name,value.length?value.join(","):undefined))))}))};var clearValues=function clearValues(){var search=(0,_lodash.omit)((0,_url_helpers.toQuery)(_history.history.location.search),filterNames);_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(search)}))};var _useFetcher=(0,_useFetcher2.useFetcher)((function(){return callApi({method:"GET",pathname:"/api/apm/ui_filters/local_filters/".concat(projection),query:_objectSpread({uiFilters:JSON.stringify(uiFilters),start:urlParams.start,end:urlParams.end,filterNames:JSON.stringify(filterNames)},params)})}),[callApi,projection,uiFilters,urlParams.start,urlParams.end,filterNames,params]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?getInitialData(filterNames):_useFetcher$data,status=_useFetcher.status;var filters=data.map((function(filter){return _objectSpread({},filter,{value:values[filter.name]||[]})}));return{filters:filters,status:status,setFilterValue:setFilterValue,clearValues:clearValues}}},4342:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useCallApi=useCallApi;var _react=__webpack_require__(0);var _callApi=__webpack_require__(365);var _useApmPluginContext=__webpack_require__(80);function useCallApi(){var http=(0,_useApmPluginContext.useApmPluginContext)().core.http;return(0,_react.useMemo)((function(){return function(options){return(0,_callApi.callApi)(http,options)}}),[http])}},4343:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionOverview=TransactionOverview;var _eui=__webpack_require__(1);var _lodash=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _useTransactionList2=__webpack_require__(4344);var _useTransactionCharts2=__webpack_require__(1526);var _TransactionCharts=__webpack_require__(845);var _TransactionBreakdown=__webpack_require__(1531);var _List=__webpack_require__(4372);var _useRedirect=__webpack_require__(4373);var _useFetcher2=__webpack_require__(54);var _ml=__webpack_require__(849);var _history=__webpack_require__(136);var _useLocation=__webpack_require__(156);var _ChartsSyncContext=__webpack_require__(456);var _public=__webpack_require__(238);var _url_helpers=__webpack_require__(95);var _LocalUIFilters=__webpack_require__(296);var _typings=__webpack_require__(295);var _useUrlParams2=__webpack_require__(45);var _useServiceTransactionTypes=__webpack_require__(1533);var _TransactionTypeFilter=__webpack_require__(4374);var _useApmPluginContext=__webpack_require__(80);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getRedirectLocation(_ref){var urlParams=_ref.urlParams,location=_ref.location,serviceTransactionTypes=_ref.serviceTransactionTypes;var transactionType=urlParams.transactionType;var firstTransactionType=(0,_lodash.first)(serviceTransactionTypes);if(!transactionType&&firstTransactionType){return _objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{transactionType:firstTransactionType}))})}}function TransactionOverview(){var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var serviceName=urlParams.serviceName,transactionType=urlParams.transactionType;var serviceTransactionTypes=(0,_useServiceTransactionTypes.useServiceTransactionTypes)(urlParams);(0,_useRedirect.useRedirect)(_history.history,getRedirectLocation({urlParams:urlParams,location:location,serviceTransactionTypes:serviceTransactionTypes}));var _useTransactionCharts=(0,_useTransactionCharts2.useTransactionCharts)(),transactionCharts=_useTransactionCharts.data;(0,_public.useTrackPageview)({app:"apm",path:"transaction_overview"});(0,_public.useTrackPageview)({app:"apm",path:"transaction_overview",delay:15e3});var _useTransactionList=(0,_useTransactionList2.useTransactionList)(urlParams),transactionListData=_useTransactionList.data,transactionListStatus=_useTransactionList.status;var http=(0,_useApmPluginContext.useApmPluginContext)().core.http;var _useFetcher=(0,_useFetcher2.useFetcher)((function(){if(serviceName&&transactionType){return(0,_ml.getHasMLJob)({serviceName:serviceName,transactionType:transactionType,http:http})}}),[http,serviceName,transactionType]),_useFetcher$data=_useFetcher.data,hasMLJob=_useFetcher$data===void 0?false:_useFetcher$data;var localFiltersConfig=(0,_react.useMemo)((function(){return{filterNames:["transactionResult","host","containerId","podName","serviceVersion"],params:{serviceName:serviceName,transactionType:transactionType},projection:_typings.PROJECTION.TRANSACTION_GROUPS}}),[serviceName,transactionType]);if(!serviceName||!transactionType){return null}return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localFiltersConfig,_react.default.createElement(_TransactionTypeFilter.TransactionTypeFilter,{transactionTypes:serviceTransactionTypes}),_react.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"none"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_ChartsSyncContext.ChartsSyncContextProvider,null,_react.default.createElement(_TransactionBreakdown.TransactionBreakdown,{initialIsOpen:true}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_TransactionCharts.TransactionCharts,{hasMLJob:hasMLJob,charts:transactionCharts,location:location,urlParams:urlParams})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,"Transactions")),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_List.TransactionList,{isLoading:transactionListStatus==="loading",items:transactionListData}))))}},4344:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useTransactionList=useTransactionList;var _react=__webpack_require__(0);var _UrlParamsContext=__webpack_require__(452);var _useFetcher2=__webpack_require__(54);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getRelativeImpact=function getRelativeImpact(impact,impactMin,impactMax){return Math.max((impact-impactMin)/Math.max(impactMax-impactMin,1)*100,1)};function getWithRelativeImpact(items){var impacts=items.map((function(_ref){var impact=_ref.impact;return impact})).filter((function(impact){return impact!==null}));var impactMin=Math.min.apply(Math,_toConsumableArray(impacts));var impactMax=Math.max.apply(Math,_toConsumableArray(impacts));return items.map((function(item){return _objectSpread({},item,{impactRelative:item.impact!==null?getRelativeImpact(item.impact,impactMin,impactMax):null})}))}function useTransactionList(urlParams){var serviceName=urlParams.serviceName,transactionType=urlParams.transactionType,start=urlParams.start,end=urlParams.end;var uiFilters=(0,_UrlParamsContext.useUiFilters)(urlParams);var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end&&transactionType){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_groups",params:{path:{serviceName:serviceName},query:{start:start,end:end,transactionType:transactionType,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,transactionType,uiFilters]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?[]:_useFetcher$data,error=_useFetcher.error,status=_useFetcher.status;var memoizedData=(0,_react.useMemo)((function(){return getWithRelativeImpact(data)}),[data]);return{data:memoizedData,status:status,error:error}}},4345:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTransactionCharts=getTransactionCharts;exports.getResponseTimeSeries=getResponseTimeSeries;exports.getAnomalyScoreSeries=getAnomalyScoreSeries;exports.getTpmSeries=getTpmSeries;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(3);var _lodash2=_interopRequireDefault(__webpack_require__(4845));var _polished=__webpack_require__(91);var _formatters=__webpack_require__(85);var _getEmptySeries=__webpack_require__(4347);var _httpStatusCodeToColor=__webpack_require__(1519);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INITIAL_DATA={apmTimeseries:{responseTimes:{avg:[],p95:[],p99:[]},tpmBuckets:[],overallAvgDuration:null},anomalyTimeseries:undefined};function getTransactionCharts(_ref){var transactionType=_ref.transactionType;var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:INITIAL_DATA,apmTimeseries=_ref2.apmTimeseries,anomalyTimeseries=_ref2.anomalyTimeseries;var tpmSeries=getTpmSeries(apmTimeseries,transactionType);var responseTimeSeries=getResponseTimeSeries({apmTimeseries:apmTimeseries,anomalyTimeseries:anomalyTimeseries});return{tpmSeries:tpmSeries,responseTimeSeries:responseTimeSeries}}function getResponseTimeSeries(_ref3){var apmTimeseries=_ref3.apmTimeseries,anomalyTimeseries=_ref3.anomalyTimeseries;var overallAvgDuration=apmTimeseries.overallAvgDuration;var _apmTimeseries$respon=apmTimeseries.responseTimes,avg=_apmTimeseries$respon.avg,p95=_apmTimeseries$respon.p95,p99=_apmTimeseries$respon.p99;var formattedDuration=(0,_formatters.convertTo)({unit:"milliseconds",microseconds:overallAvgDuration}).formatted;var series=[{title:_i18n.i18n.translate("xpack.apm.transactions.chart.averageLabel",{defaultMessage:"Avg."}),data:avg,legendValue:formattedDuration,type:"linemark",color:_eui_theme_light.default.euiColorVis1},{title:_i18n.i18n.translate("xpack.apm.transactions.chart.95thPercentileLabel",{defaultMessage:"95th percentile"}),titleShort:"95th",data:p95,type:"linemark",color:_eui_theme_light.default.euiColorVis5},{title:_i18n.i18n.translate("xpack.apm.transactions.chart.99thPercentileLabel",{defaultMessage:"99th percentile"}),titleShort:"99th",data:p99,type:"linemark",color:_eui_theme_light.default.euiColorVis7}];if(anomalyTimeseries){series.splice(1,0,getAnomalyBoundariesSeries(anomalyTimeseries.anomalyBoundaries),getAnomalyScoreSeries(anomalyTimeseries.anomalyScore))}return series}function getAnomalyScoreSeries(data){return{title:_i18n.i18n.translate("xpack.apm.transactions.chart.anomalyScoreLabel",{defaultMessage:"Anomaly score"}),hideLegend:true,hideTooltipValue:true,data:data,type:"areaMaxHeight",color:"none",areaColor:(0,_polished.rgba)(_eui_theme_light.default.euiColorVis9,.1)}}function getAnomalyBoundariesSeries(data){return{title:_i18n.i18n.translate("xpack.apm.transactions.chart.anomalyBoundariesLabel",{defaultMessage:"Anomaly Boundaries"}),hideLegend:true,hideTooltipValue:true,data:data,type:"area",color:"none",areaColor:(0,_polished.rgba)(_eui_theme_light.default.euiColorVis1,.1)}}function getTpmSeries(apmTimeseries,transactionType){var tpmBuckets=apmTimeseries.tpmBuckets;var bucketKeys=tpmBuckets.map((function(_ref4){var key=_ref4.key;return key}));var getColor=getColorByKey(bucketKeys);var avg=apmTimeseries.responseTimes.avg;if(!tpmBuckets.length&&avg.length){var start=avg[0].x;var end=avg[avg.length-1].x;return(0,_getEmptySeries.getEmptySeries)(start,end)}return tpmBuckets.map((function(bucket){var average=(0,_lodash2.default)(bucket.dataPoints.map((function(p){return p.y})));return{title:bucket.key,data:bucket.dataPoints,legendValue:"".concat((0,_formatters.asDecimal)(average)," ").concat((0,_formatters.tpmUnit)(transactionType||"")),type:"linemark",color:getColor(bucket.key)}}))}function colorMatch(key){if(/ok|success/i.test(key)){return _eui_theme_light.default.euiColorSecondary}else if(/error|fail/i.test(key)){return _eui_theme_light.default.euiColorDanger}}function getColorByKey(keys){var assignedColors=["HTTP 2xx","HTTP 3xx","HTTP 4xx","HTTP 5xx"];var unknownKeys=(0,_lodash.difference)(keys,assignedColors);var unassignedColors=(0,_lodash.zipObject)(unknownKeys,[_eui_theme_light.default.euiColorVis1,_eui_theme_light.default.euiColorVis3,_eui_theme_light.default.euiColorVis4,_eui_theme_light.default.euiColorVis6,_eui_theme_light.default.euiColorVis2,_eui_theme_light.default.euiColorVis8]);return function(key){return colorMatch(key)||(0,_httpStatusCodeToColor.httpStatusCodeToColor)(key)||unassignedColors[key]}}},4347:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEmptySeries=void 0;var _d=_interopRequireDefault(__webpack_require__(48));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getEmptySeries=function getEmptySeries(){var start=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Date.now()-36e5;var end=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Date.now();var dates=_d.default.time.scale().domain([new Date(start),new Date(end)]).ticks();return[{title:"",type:"line",legendValue:"",color:"",data:dates.map((function(x){return{x:x.getTime(),y:null}}))}]};exports.getEmptySeries=getEmptySeries},4348:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidLicenseNotification=InvalidLicenseNotification;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _useApmPluginContext2=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function InvalidLicenseNotification(){var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var manageLicenseURL=core.http.basePath.prepend("/app/kibana#/management/elasticsearch/license_management");return _react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"alert",iconColor:"warning",title:_react.default.createElement("h1",null,_i18n.i18n.translate("xpack.apm.invalidLicense.title",{defaultMessage:"Invalid License"})),body:_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.invalidLicense.message",{defaultMessage:"The APM UI is not available because your current license has expired or is no longer valid."})),actions:[_react.default.createElement(_eui.EuiButton,{href:manageLicenseURL},_i18n.i18n.translate("xpack.apm.invalidLicense.licenseManagementLink",{defaultMessage:"Manage your license"}))]})}},4349:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=Legends;var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _Legend=__webpack_require__(455);var _variables=__webpack_require__(38);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Container=_styledComponents.default.div.withConfig({displayName:"Container",componentId:"sc-1irq3g8-0"})(["display:flex;margin-left:",";flex-wrap:wrap;& > div{margin-top:",";margin-right:",";&:last-child{margin-right:0;}}"],(0,_variables.px)(_variables.unit*5),(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.unit));var LegendContent=_styledComponents.default.span.withConfig({displayName:"LegendContent",componentId:"sc-1irq3g8-1"})(["white-space:nowrap;color:",";display:flex;"],_eui_theme_light.default.euiColorMediumShade);var TruncatedLabel=_styledComponents.default.span.withConfig({displayName:"TruncatedLabel",componentId:"sc-1irq3g8-2"})(["display:inline-block;",";"],(0,_variables.truncate)((0,_variables.px)(_variables.units.half*10)));var SeriesValue=_styledComponents.default.span.withConfig({displayName:"SeriesValue",componentId:"sc-1irq3g8-3"})(["margin-left:",";color:",";display:inline-block;"],(0,_variables.px)(_variables.units.quarter),_eui_theme_light.default.euiColorFullShade);var MoreSeriesContainer=_styledComponents.default.div.withConfig({displayName:"MoreSeriesContainer",componentId:"sc-1irq3g8-4"})(["font-size:",";color:",";"],_variables.fontSizes.small,_eui_theme_light.default.euiColorMediumShade);function MoreSeries(_ref){var hiddenSeriesCount=_ref.hiddenSeriesCount;if(hiddenSeriesCount<=0){return null}return _react.default.createElement(MoreSeriesContainer,null,"(+",hiddenSeriesCount,")")}function Legends(_ref2){var clickLegend=_ref2.clickLegend,hiddenSeriesCount=_ref2.hiddenSeriesCount,noHits=_ref2.noHits,series=_ref2.series,seriesEnabledState=_ref2.seriesEnabledState,truncateLegends=_ref2.truncateLegends,hasAnnotations=_ref2.hasAnnotations,showAnnotations=_ref2.showAnnotations,onAnnotationsToggle=_ref2.onAnnotationsToggle;if(noHits&&!hasAnnotations){return null}return _react.default.createElement(Container,null,series.map((function(serie,i){if(serie.hideLegend){return null}var text=_react.default.createElement(LegendContent,null,truncateLegends?_react.default.createElement(TruncatedLabel,{title:serie.title},serie.title):serie.title,serie.legendValue&&_react.default.createElement(SeriesValue,null,serie.legendValue));return _react.default.createElement(_Legend.Legend,{key:i,onClick:function onClick(){return clickLegend(i)},disabled:seriesEnabledState[i],text:text,color:serie.color})})),hasAnnotations&&_react.default.createElement(_Legend.Legend,{key:"annotations",onClick:function onClick(){if(onAnnotationsToggle){onAnnotationsToggle()}},text:_react.default.createElement(LegendContent,null,_i18n.i18n.translate("xpack.apm.serviceVersion",{defaultMessage:"Service version"})),indicator:function indicator(){return _react.default.createElement("div",{style:{marginRight:(0,_variables.px)(_variables.units.quarter)}},_react.default.createElement(_eui.EuiIcon,{type:"annotation",color:_eui_theme_light.default.euiColorSecondary}))},disabled:!showAnnotations,color:_eui_theme_light.default.euiColorSecondary}),_react.default.createElement(MoreSeries,{hiddenSeriesCount:hiddenSeriesCount}))}Legends.propTypes={clickLegend:_propTypes.default.func.isRequired,hiddenSeriesCount:_propTypes.default.number.isRequired,noHits:_propTypes.default.bool.isRequired,series:_propTypes.default.array.isRequired,seriesEnabledState:_propTypes.default.array.isRequired,truncateLegends:_propTypes.default.bool.isRequired,hasAnnotations:_propTypes.default.bool,showAnnotations:_propTypes.default.bool,onAnnotationsToggle:_propTypes.default.func};module.exports=exports.default},4350:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _reactVis=__webpack_require__(230);var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _polished=__webpack_require__(91);var _d3Scale=__webpack_require__(253);var _StatusText=_interopRequireDefault(__webpack_require__(4351));var _plotUtils=__webpack_require__(457);var _i18n=__webpack_require__(2);var _isValidCoordinateValue=__webpack_require__(458);var _getTimezoneOffsetInMs=__webpack_require__(844);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getNull=function getNull(d){return(0,_isValidCoordinateValue.isValidCoordinateValue)(d.y)&&!isNaN(d.y)};var StaticPlot=function(_PureComponent){_inherits(StaticPlot,_PureComponent);function StaticPlot(){var _getPrototypeOf2;var _this;_classCallCheck(this,StaticPlot);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StaticPlot)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"tickFormatXTime",(function(value){var xDomain=_this.props.plotValues.x.domain();var time=value.getTime();return(0,_d3Scale.scaleUtc)().domain(xDomain).tickFormat()(new Date(time-(0,_getTimezoneOffsetInMs.getTimezoneOffsetInMs)(time)))}));return _this}_createClass(StaticPlot,[{key:"getVisSeries",value:function getVisSeries(series,plotValues){var _this2=this;return series.slice().reverse().map((function(serie){return _this2.getSerie(serie,plotValues)}))}},{key:"getSerie",value:function getSerie(serie,plotValues){switch(serie.type){case"line":return _react.default.createElement(_reactVis.LineSeries,{getNull:getNull,key:serie.title,xType:"time-utc",curve:"curveMonotoneX",data:serie.data,color:serie.color,stack:serie.stack});case"area":return _react.default.createElement(_reactVis.AreaSeries,{getNull:getNull,key:serie.title,xType:"time-utc",curve:"curveMonotoneX",data:serie.data,color:serie.color,stroke:serie.color,fill:serie.areaColor||(0,_polished.rgba)(serie.color,.3)});case"areaStacked":{var _data=serie.data.map((function(value){return"y"in value&&(0,_isValidCoordinateValue.isValidCoordinateValue)(value.y)?value:_objectSpread({},value,{y:undefined})}));return[_react.default.createElement(_reactVis.AreaSeries,{getNull:getNull,key:"".concat(serie.title,"-area"),xType:"time-utc",curve:"curveMonotoneX",data:_data,color:serie.color,stroke:"rgba(0,0,0,0)",fill:serie.areaColor||(0,_polished.rgba)(serie.color,.3),stack:true,cluster:"area"}),_react.default.createElement(_reactVis.LineSeries,{getNull:getNull,key:"".concat(serie.title,"-line"),xType:"time-utc",curve:"curveMonotoneX",data:_data,color:serie.color,stack:true,cluster:"line"})]}case"areaMaxHeight":var yMax=(0,_lodash.last)(plotValues.yTickValues);var data=serie.data.map((function(p){return{x0:p.x0,x:p.x,y0:0,y:yMax}}));return _react.default.createElement(_reactVis.VerticalRectSeries,{getNull:getNull,key:serie.title,xType:"time-utc",curve:"curveMonotoneX",data:data,color:serie.color,stroke:serie.color,fill:serie.areaColor});case"linemark":return _react.default.createElement(_reactVis.LineMarkSeries,{getNull:getNull,key:serie.title,xType:"time-utc",curve:"curveMonotoneX",data:serie.data,color:serie.color,size:.5});default:throw new Error("Unknown type ".concat(serie.type))}}},{key:"render",value:function render(){var _this$props=this.props,series=_this$props.series,tickFormatY=_this$props.tickFormatY,plotValues=_this$props.plotValues,noHits=_this$props.noHits;var xTickValues=plotValues.xTickValues,yTickValues=plotValues.yTickValues;var tickFormatX=this.props.tickFormatX||this.tickFormatXTime;return _react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues},_react.default.createElement(_reactVis.XAxis,{type:"time-utc",tickSize:0,tickFormat:tickFormatX,tickValues:xTickValues}),noHits?_react.default.createElement(_StatusText.default,{marginLeft:30,text:_i18n.i18n.translate("xpack.apm.metrics.plot.noDataLabel",{defaultMessage:"No data within this time range."})}):[_react.default.createElement(_reactVis.HorizontalGridLines,{key:"grid-lines",tickValues:yTickValues}),_react.default.createElement(_reactVis.YAxis,{key:"y-axis",tickSize:0,tickValues:yTickValues,tickFormat:tickFormatY,style:{line:{stroke:"none",fill:"none"}}}),this.getVisSeries(series,plotValues)])}}]);return StaticPlot}(_react.PureComponent);var _default=StaticPlot;exports.default=_default;StaticPlot.propTypes={noHits:_propTypes.default.bool.isRequired,series:_propTypes.default.array.isRequired,plotValues:_propTypes.default.object.isRequired,tickFormatX:_propTypes.default.func,tickFormatY:_propTypes.default.func.isRequired,width:_propTypes.default.number.isRequired};module.exports=exports.default},4351:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StatusText(_ref){var marginLeft=_ref.marginLeft,marginRight=_ref.marginRight,marginTop=_ref.marginTop,marginBottom=_ref.marginBottom,text=_ref.text;var xTransform="calc(-50% + ".concat(marginLeft-marginRight,"px)");var yTransform="calc(-50% + ".concat(marginTop-marginBottom,"px - 15px)");return _react.default.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(".concat(xTransform,",").concat(yTransform,")")}},text)}StatusText.propTypes={text:_propTypes.default.string};var _default=StatusText;exports.default=_default;module.exports=exports.default},4352:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _lodash=__webpack_require__(3);var _plotUtils=__webpack_require__(457);var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireWildcard(__webpack_require__(0));var _SelectionMarker=_interopRequireDefault(__webpack_require__(4353));var _reactVis=__webpack_require__(230);var _Tooltip=_interopRequireDefault(__webpack_require__(1523));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getPointByX(serie,x){return serie.data.find((function(point){return point.x===x}))}var InteractivePlot=function(_PureComponent){_inherits(InteractivePlot,_PureComponent);function InteractivePlot(){var _getPrototypeOf2;var _this;_classCallCheck(this,InteractivePlot);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InteractivePlot)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getMarkPoints",(function(hoverX){return _this.props.series.filter((function(serie){return serie.data.some((function(point){return point.x===hoverX&&point.y!=null}))})).map((function(serie){var _ref=getPointByX(serie,hoverX)||{},x=_ref.x,y=_ref.y;return{x:x,y:y,color:serie.color}})).reverse()}));_defineProperty(_assertThisInitialized(_this),"getTooltipPoints",(function(hoverX){return _this.props.series.filter((function(series){return!series.hideTooltipValue})).map((function(serie){var point=getPointByX(serie,hoverX)||{};return{color:serie.color,value:_this.props.formatTooltipValue(point),text:serie.titleShort||serie.title}}))}));return _this}_createClass(InteractivePlot,[{key:"render",value:function render(){var _this$props=this.props,plotValues=_this$props.plotValues,hoverX=_this$props.hoverX,series=_this$props.series,isDrawing=_this$props.isDrawing,selectionStart=_this$props.selectionStart,selectionEnd=_this$props.selectionEnd;if((0,_lodash.isEmpty)(series)){return null}var tooltipPoints=this.getTooltipPoints(hoverX);var markPoints=this.getMarkPoints(hoverX);var x=plotValues.x,xTickValues=plotValues.xTickValues,yTickValues=plotValues.yTickValues;var yValueMiddle=yTickValues[1];if((0,_lodash.isEmpty)(xTickValues)){return _react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues})}return _react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues},hoverX&&_react.default.createElement(_Tooltip.default,{tooltipPoints:tooltipPoints,x:hoverX,y:yValueMiddle}),hoverX&&_react.default.createElement(_reactVis.MarkSeries,{data:markPoints,colorType:"literal"}),hoverX&&_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:[hoverX]}),isDrawing&&selectionEnd!==null&&_react.default.createElement(_SelectionMarker.default,{start:x(selectionStart),end:x(selectionEnd)}))}}]);return InteractivePlot}(_react.PureComponent);InteractivePlot.propTypes={formatTooltipValue:_propTypes.default.func.isRequired,hoverX:_propTypes.default.number,isDrawing:_propTypes.default.bool.isRequired,plotValues:_propTypes.default.object.isRequired,selectionEnd:_propTypes.default.number,selectionStart:_propTypes.default.number,series:_propTypes.default.array.isRequired};var _default=InteractivePlot;exports.default=_default;module.exports=exports.default},4353:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SelectionMarker(_ref){var innerHeight=_ref.innerHeight,marginTop=_ref.marginTop,start=_ref.start,end=_ref.end;var width=Math.abs(end-start);var x=start<end?start:end;return _react.default.createElement("rect",{pointerEvents:"none",fill:"black",fillOpacity:"0.1",x:x,y:marginTop,width:width,height:innerHeight})}SelectionMarker.requiresSVG=true;SelectionMarker.propTypes={start:_propTypes.default.number,end:_propTypes.default.number};var _default=SelectionMarker;exports.default=_default;module.exports=exports.default},4354:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _lodash=__webpack_require__(3);var _reactVis=__webpack_require__(230);var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireWildcard(__webpack_require__(0));var _plotUtils=__webpack_require__(457);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getXValuesCombined(series){return _lodash.union.apply(void 0,_toConsumableArray(series.map((function(serie){return serie.data.map((function(p){return p.x}))})))).map((function(x){return{x:x}}))}var VoronoiPlot=function(_PureComponent){_inherits(VoronoiPlot,_PureComponent);function VoronoiPlot(){_classCallCheck(this,VoronoiPlot);return _possibleConstructorReturn(this,_getPrototypeOf(VoronoiPlot).apply(this,arguments))}_createClass(VoronoiPlot,[{key:"render",value:function render(){var _this$props=this.props,series=_this$props.series,plotValues=_this$props.plotValues,noHits=_this$props.noHits;var XY_MARGIN=plotValues.XY_MARGIN,XY_HEIGHT=plotValues.XY_HEIGHT,XY_WIDTH=plotValues.XY_WIDTH,_x=plotValues.x;var xValuesCombined=getXValuesCombined(series);if(!xValuesCombined||noHits){return null}return _react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues,onMouseLeave:this.props.onMouseLeave},_react.default.createElement(_reactVis.Voronoi,{extent:[[XY_MARGIN.left,XY_MARGIN.top],[XY_WIDTH,XY_HEIGHT]],nodes:xValuesCombined,onHover:this.props.onHover,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,x:function x(d){return _x(d.x)},y:function y(){return 0}}))}}]);return VoronoiPlot}(_react.PureComponent);var _default=VoronoiPlot;exports.default=_default;VoronoiPlot.propTypes={noHits:_propTypes.default.bool.isRequired,onHover:_propTypes.default.func.isRequired,onMouseDown:_propTypes.default.func.isRequired,onMouseLeave:_propTypes.default.func.isRequired,onMouseUp:_propTypes.default.func,series:_propTypes.default.array.isRequired,plotValues:_propTypes.default.object.isRequired};module.exports=exports.default},4355:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AnnotationsPlot=AnnotationsPlot;var _react=_interopRequireDefault(__webpack_require__(0));var _reactVis=__webpack_require__(230);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _plotUtils=__webpack_require__(457);var _formatters=__webpack_require__(85);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var style={stroke:_eui_theme_light.default.euiColorSecondary,strokeDasharray:"none"};function AnnotationsPlot(props){var plotValues=props.plotValues,annotations=props.annotations;var tickValues=annotations.map((function(annotation){return annotation.time}));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues},_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:tickValues,style:style})),annotations.map((function(annotation){return _react.default.createElement("div",{key:annotation.id,style:{position:"absolute",left:plotValues.x(annotation.time)-8,top:-2}},_react.default.createElement(_eui.EuiToolTip,{title:(0,_formatters.asAbsoluteDateTime)(annotation.time,"seconds"),content:_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiText,null,_i18n.i18n.translate("xpack.apm.version",{defaultMessage:"Version"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},annotation.text))},_react.default.createElement(_eui.EuiIcon,{type:"dot",color:_eui_theme_light.default.euiColorSecondary})))})))}},4356:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BrowserLineChart=BrowserLineChart;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);var _TransactionLineChart=__webpack_require__(847);var _=__webpack_require__(845);var _formatters=__webpack_require__(85);var _useAvgDurationByBrowser=__webpack_require__(4357);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function BrowserLineChart(){var _useAvgDurationByBrow=(0,_useAvgDurationByBrowser.useAvgDurationByBrowser)(),data=_useAvgDurationByBrow.data;var maxY=(0,_.getMaxY)(data);var formatter=(0,_formatters.getDurationFormatter)(maxY);var formatTooltipValue=(0,_.getResponseTimeTooltipFormatter)(formatter);var tickFormatY=(0,_.getResponseTimeTickFormatter)(formatter);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,_i18n.i18n.translate("xpack.apm.metrics.pageLoadCharts.avgPageLoadByBrowser",{defaultMessage:"Avg. page load duration distribution by browser"}))),_react.default.createElement(_TransactionLineChart.TransactionLineChart,{formatTooltipValue:formatTooltipValue,series:data,tickFormatY:tickFormatY}))}},4357:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useAvgDurationByBrowser=useAvgDurationByBrowser;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _useFetcher2=__webpack_require__(54);var _useUrlParams2=__webpack_require__(45);var _viz_colors=__webpack_require__(4358);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function toTimeSeries(data){if(!data){return[]}return data.map((function(item,index){return _objectSpread({},item,{color:(0,_viz_colors.getVizColorForIndex)(index,_eui_theme_light.default),type:"linemark"})}))}function useAvgDurationByBrowser(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,serviceName=_useUrlParams$urlPara.serviceName,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end,transactionName=_useUrlParams$urlPara.transactionName,uiFilters=_useUrlParams.uiFilters;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_groups/avg_duration_by_browser",params:{path:{serviceName:serviceName},query:{start:start,end:end,transactionName:transactionName,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,transactionName,uiFilters]),data=_useFetcher.data,error=_useFetcher.error,status=_useFetcher.status;return{data:toTimeSeries(data),status:status,error:error}}},4358:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getVizColorForIndex=getVizColorForIndex;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getVizColorsForTheme(){var theme=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_eui_theme_light.default;return[theme.euiColorVis0,theme.euiColorVis1,theme.euiColorVis2,theme.euiColorVis3,theme.euiColorVis4,theme.euiColorVis5,theme.euiColorVis6,theme.euiColorVis7,theme.euiColorVis8,theme.euiColorVis9]}function getVizColorForIndex(){var index=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var theme=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_eui_theme_light.default;var colors=getVizColorsForTheme(theme);return colors[index%colors.length]}},4359:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DurationByCountryMap=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _useAvgDurationByCountry=__webpack_require__(4360);var _ChoroplethMap=__webpack_require__(4361);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DurationByCountryMap=function DurationByCountryMap(){var _useAvgDurationByCoun=(0,_useAvgDurationByCountry.useAvgDurationByCountry)(),data=_useAvgDurationByCoun.data;return _react.default.createElement(_react.default.Fragment,null," ",_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,_i18n.i18n.translate("xpack.apm.metrics.durationByCountryMap.avgPageLoadByCountryLabel",{defaultMessage:"Avg. page load duration distribution by country"}))),_react.default.createElement(_ChoroplethMap.ChoroplethMap,{items:data}))};exports.DurationByCountryMap=DurationByCountryMap},4360:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useAvgDurationByCountry=useAvgDurationByCountry;var _useFetcher2=__webpack_require__(54);var _useUrlParams2=__webpack_require__(45);function useAvgDurationByCountry(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,serviceName=_useUrlParams$urlPara.serviceName,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end,transactionName=_useUrlParams$urlPara.transactionName,uiFilters=_useUrlParams.uiFilters;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_groups/avg_duration_by_country",params:{path:{serviceName:serviceName},query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters),transactionName:transactionName}}})}}),[serviceName,start,end,uiFilters,transactionName]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?[]:_useFetcher$data,error=_useFetcher.error,status=_useFetcher.status;return{data:data,status:status,error:error}}},4361:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getProgressionColor=getProgressionColor;exports.ChoroplethMap=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _mapboxGl=__webpack_require__(5361);__webpack_require__(1058);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _polished=__webpack_require__(91);var _ChoroplethToolTip=__webpack_require__(4363);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var CHOROPLETH_LAYER_ID="choropleth_layer";var CHOROPLETH_POLYGONS_SOURCE_ID="choropleth_polygons";var GEOJSON_KEY_PROPERTY="iso2";var MAPBOX_STYLE="https://tiles.maps.elastic.co/styles/osm-bright-desaturated/style.json";var GEOJSON_SOURCE="https://vector.maps.elastic.co/files/world_countries_v1.geo.json?elastic_tile_service_tos=agree&my_app_name=ems-landing&my_app_version=7.2.0";function getProgressionColor(scale){var baseColor=_eui_theme_light.default.euiColorPrimary;var adjustedScale=.75*scale+.05;if(adjustedScale<.5){return(0,_polished.tint)(adjustedScale*2,baseColor)}if(adjustedScale>.5){return(0,_polished.shade)(1-(adjustedScale-.5)*2,baseColor)}return baseColor}var getMin=function getMin(items){return Math.min.apply(Math,_toConsumableArray(items.map((function(item){return item.value}))))};var getMax=function getMax(items){return Math.max.apply(Math,_toConsumableArray(items.map((function(item){return item.value}))))};var ChoroplethMap=function ChoroplethMap(props){var items=props.items;var containerRef=(0,_react.useRef)(null);var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),map=_useState2[0],setMap=_useState2[1];var popupRef=(0,_react.useRef)(null);var popupContainerRef=(0,_react.useRef)(null);var _useState3=(0,_react.useState)(null),_useState4=_slicedToArray(_useState3,2),tooltipState=_useState4[0],setTooltipState=_useState4[1];var _useMemo=(0,_react.useMemo)((function(){return[getMin(items),getMax(items)]}),[items]),_useMemo2=_slicedToArray(_useMemo,2),min=_useMemo2[0],max=_useMemo2[1];var getValueScale=(0,_react.useCallback)((function(value){return(value-min)/(max-min)}),[max,min]);var controlScrollZoomOnWheel=(0,_react.useCallback)((function(event){if(event.ctrlKey||event.metaKey){event.preventDefault()}else{event.stopPropagation()}}),[]);(0,_react.useEffect)((function(){var updateTooltipStateOnMousemove=function updateTooltipStateOnMousemove(event){var isMapQueryable=map&&popupRef.current&&items.length&&map.getLayer(CHOROPLETH_LAYER_ID);if(!isMapQueryable){return}popupRef.current.setLngLat(event.lngLat);var hoverFeatures=map.queryRenderedFeatures(event.point,{layers:[CHOROPLETH_LAYER_ID]});if(tooltipState&&hoverFeatures.length===0){return setTooltipState(null)}var featureProperties=hoverFeatures[0].properties;if(tooltipState&&tooltipState.name===featureProperties.name){return}var item=items.find((function(_ref){var key=_ref.key;return featureProperties&&key===featureProperties[GEOJSON_KEY_PROPERTY]}));if(item){return setTooltipState({name:featureProperties.name,value:item.value,docCount:item.docCount})}setTooltipState(null)};updateTooltipStateOnMousemoveRef.current=updateTooltipStateOnMousemove}),[map,items,tooltipState]);var updateTooltipStateOnMousemoveRef=(0,_react.useRef)((function(event){}));(0,_react.useEffect)((function(){if(containerRef.current===null){return}var mapboxMap=new _mapboxGl.Map({attributionControl:false,container:containerRef.current,dragRotate:false,touchZoomRotate:false,zoom:.85,center:{lng:0,lat:30},style:MAPBOX_STYLE});mapboxMap.addControl(new _mapboxGl.NavigationControl({showCompass:false}),"top-left");popupRef.current=new _mapboxGl.Popup({closeButton:false,closeOnClick:false});mapboxMap.on("mousemove",(function(){return updateTooltipStateOnMousemoveRef.current.apply(updateTooltipStateOnMousemoveRef,arguments)}));mapboxMap.on("mouseout",(function(){setTooltipState(null)}));var canvasElement=mapboxMap.getCanvas();canvasElement.addEventListener("wheel",controlScrollZoomOnWheel);mapboxMap.on("load",(function(){mapboxMap.addSource(CHOROPLETH_POLYGONS_SOURCE_ID,{type:"geojson",data:GEOJSON_SOURCE});setMap(mapboxMap)}));return function(){canvasElement.removeEventListener("wheel",controlScrollZoomOnWheel)}}),[controlScrollZoomOnWheel]);(0,_react.useEffect)((function(){if(!map){return}var symbolLayer=(map.getStyle().layers||[]).find((function(_ref2){var type=_ref2.type;return type==="symbol"}));if(map.getLayer(CHOROPLETH_LAYER_ID)){map.removeLayer(CHOROPLETH_LAYER_ID)}if(items.length===0){return}var stops=items.map((function(_ref3){var key=_ref3.key,value=_ref3.value;return[key,getProgressionColor(getValueScale(value))]}));var fillColor={property:GEOJSON_KEY_PROPERTY,stops:stops,type:"categorical",default:"transparent"};map.addLayer({id:CHOROPLETH_LAYER_ID,type:"fill",source:CHOROPLETH_POLYGONS_SOURCE_ID,layout:{},paint:{"fill-opacity":.75,"fill-color":fillColor}},symbolLayer?symbolLayer.id:undefined)}),[map,items,getValueScale]);(0,_react.useEffect)((function(){if(!(popupContainerRef.current&&map&&popupRef.current)){return}if(tooltipState){popupRef.current.setDOMContent(popupContainerRef.current).addTo(map);if(popupContainerRef.current.parentElement){popupContainerRef.current.parentElement.style.pointerEvents="none"}}else{popupRef.current.remove()}}),[map,tooltipState]);return _react.default.createElement("div",null,_react.default.createElement("div",{ref:containerRef,style:{height:256}}),_react.default.createElement("div",{style:{display:"none"}},_react.default.createElement("div",{ref:popupContainerRef},tooltipState?_react.default.createElement(_ChoroplethToolTip.ChoroplethToolTip,tooltipState):null)))};exports.ChoroplethMap=ChoroplethMap},4363:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ChoroplethToolTip=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _formatters=__webpack_require__(85);var _variables=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ChoroplethToolTip=function ChoroplethToolTip(_ref){var name=_ref.name,value=_ref.value,docCount=_ref.docCount;return _react.default.createElement("div",{style:{textAlign:"center"}},_react.default.createElement("div",{style:{fontSize:_variables.fontSizes.large}},name),_react.default.createElement("div",null,_i18n.i18n.translate("xpack.apm.metrics.durationByCountryMap.RegionMapChart.ToolTip.avgPageLoadDuration",{defaultMessage:"Avg. page load duration:"})),_react.default.createElement("div",{style:{fontWeight:"bold",fontSize:_variables.fontSizes.large}},(0,_formatters.asDuration)(value)),_react.default.createElement("div",null,"(",_i18n.i18n.translate("xpack.apm.metrics.durationByCountryMap.RegionMapChart.ToolTip.countPageLoads",{values:{docCount:(0,_formatters.asInteger)(docCount)},defaultMessage:"{docCount} page loads"}),")"))};exports.ChoroplethToolTip=ChoroplethToolTip},4364:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TRANSACTION_ROUTE_CHANGE=exports.TRANSACTION_REQUEST=exports.TRANSACTION_PAGE_LOAD=void 0;var TRANSACTION_PAGE_LOAD="page-load";exports.TRANSACTION_PAGE_LOAD=TRANSACTION_PAGE_LOAD;var TRANSACTION_REQUEST="request";exports.TRANSACTION_REQUEST=TRANSACTION_REQUEST;var TRANSACTION_ROUTE_CHANGE="route-change";exports.TRANSACTION_ROUTE_CHANGE=TRANSACTION_ROUTE_CHANGE},4365:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useTransactionBreakdown=useTransactionBreakdown;var _useFetcher2=__webpack_require__(54);var _useUrlParams2=__webpack_require__(45);function useTransactionBreakdown(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,serviceName=_useUrlParams$urlPara.serviceName,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end,transactionName=_useUrlParams$urlPara.transactionName,transactionType=_useUrlParams$urlPara.transactionType,uiFilters=_useUrlParams.uiFilters;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end&&transactionType){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_groups/breakdown",params:{path:{serviceName:serviceName},query:{start:start,end:end,transactionName:transactionName,transactionType:transactionType,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,transactionType,transactionName,uiFilters]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?{kpis:[],timeseries:[]}:_useFetcher$data,error=_useFetcher.error,status=_useFetcher.status;return{data:data,status:status,error:error}}},4366:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionBreakdownHeader=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TransactionBreakdownHeader=function TransactionBreakdownHeader(_ref){var showChart=_ref.showChart,onToggleClick=_ref.onToggleClick;return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.transactionBreakdown.chartTitle",{defaultMessage:"Time spent by span type"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",iconType:showChart?"arrowDown":"arrowRight",onClick:function onClick(){return onToggleClick()}},showChart?_i18n.i18n.translate("xpack.apm.transactionBreakdown.hideChart",{defaultMessage:"Hide chart"}):_i18n.i18n.translate("xpack.apm.transactionBreakdown.showChart",{defaultMessage:"Show chart"}))))};exports.TransactionBreakdownHeader=TransactionBreakdownHeader},4367:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionBreakdownKpiList=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _lib=__webpack_require__(191);var _formatters=__webpack_require__(459);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Description=_styledComponents.default.span.withConfig({displayName:"Description",componentId:"sc-6o4j5i-0"})(["{white-space:nowrap;}"]);var KpiDescription=function KpiDescription(_ref){var name=_ref.name,color=_ref.color;return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s",direction:"row",wrap:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{type:"dot",color:color})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs"},_react.default.createElement(Description,null,name))))};var TransactionBreakdownKpiList=function TransactionBreakdownKpiList(_ref2){var kpis=_ref2.kpis;return _react.default.createElement(_eui.EuiFlexGrid,null,kpis.map((function(kpi){return _react.default.createElement(_eui.EuiFlexItem,{key:kpi.name,grow:false},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(KpiDescription,{name:kpi.name,color:kpi.color})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_formatters.FORMATTERS[_lib.InfraFormatterType.percent](kpi.percentage))))))})))};exports.TransactionBreakdownKpiList=TransactionBreakdownKpiList},4371:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionBreakdownGraph=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _numeral=_interopRequireDefault(__webpack_require__(148));var _lodash=__webpack_require__(3);var _i18n=__webpack_require__(187);var _TransactionLineChart=__webpack_require__(847);var _formatters=__webpack_require__(85);var _variables=__webpack_require__(38);var _isValidCoordinateValue=__webpack_require__(458);var _use_track_metric=__webpack_require__(190);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var tickFormatY=function tickFormatY(y){return(0,_numeral.default)(y||0).format("0 %")};var formatTooltipValue=function formatTooltipValue(coordinate){return(0,_isValidCoordinateValue.isValidCoordinateValue)(coordinate.y)?(0,_formatters.asPercent)(coordinate.y,1):_i18n.NOT_AVAILABLE_LABEL};var trackHoverBreakdownChart=(0,_lodash.throttle)((function(){return(0,_use_track_metric.trackEvent)({app:"apm",name:"hover_breakdown_chart"})}),6e4);var TransactionBreakdownGraph=function TransactionBreakdownGraph(props){var timeseries=props.timeseries;return _react.default.createElement(_TransactionLineChart.TransactionLineChart,{series:timeseries,tickFormatY:tickFormatY,formatTooltipValue:formatTooltipValue,yMax:1,height:_variables.unit*12,stacked:true,onHover:trackHoverBreakdownChart})};exports.TransactionBreakdownGraph=TransactionBreakdownGraph},4372:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionList=TransactionList;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _i18n2=__webpack_require__(187);var _variables=__webpack_require__(38);var _formatters=__webpack_require__(85);var _ImpactBar=__webpack_require__(1532);var _ManagedTable=__webpack_require__(367);var _LoadingStatePrompt=__webpack_require__(368);var _EmptyMessage=__webpack_require__(453);var _TransactionDetailLink=__webpack_require__(366);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var TransactionNameLink=(0,_styledComponents.default)(_TransactionDetailLink.TransactionDetailLink).withConfig({displayName:"TransactionNameLink",componentId:"sc-1p719lf-0"})(["",";font-family:",";"],(0,_variables.truncate)("100%"),_variables.fontFamilyCode);var toMilliseconds=function toMilliseconds(time){return(0,_formatters.convertTo)({unit:"milliseconds",microseconds:time}).formatted};function TransactionList(_ref){var items=_ref.items,isLoading=_ref.isLoading;var columns=(0,_react.useMemo)((function(){return[{field:"name",name:_i18n.i18n.translate("xpack.apm.transactionsTable.nameColumnLabel",{defaultMessage:"Name"}),width:"50%",sortable:true,render:function render(transactionName,_ref2){var sample=_ref2.sample;return _react.default.createElement(_eui.EuiToolTip,{id:"transaction-name-link-tooltip",content:transactionName||_i18n2.NOT_AVAILABLE_LABEL},_react.default.createElement(TransactionNameLink,{serviceName:sample.service.name,transactionId:sample.transaction.id,traceId:sample.trace.id,transactionName:sample.transaction.name,transactionType:sample.transaction.type},transactionName||_i18n2.NOT_AVAILABLE_LABEL))}},{field:"averageResponseTime",name:_i18n.i18n.translate("xpack.apm.transactionsTable.avgDurationColumnLabel",{defaultMessage:"Avg. duration"}),sortable:true,dataType:"number",render:function render(time){return toMilliseconds(time)}},{field:"p95",name:_i18n.i18n.translate("xpack.apm.transactionsTable.95thPercentileColumnLabel",{defaultMessage:"95th percentile"}),sortable:true,dataType:"number",render:function render(time){return toMilliseconds(time)}},{field:"transactionsPerMinute",name:_i18n.i18n.translate("xpack.apm.transactionsTable.transactionsPerMinuteColumnLabel",{defaultMessage:"Trans. per minute"}),sortable:true,dataType:"number",render:function render(value){return"".concat((0,_formatters.asDecimal)(value)," ").concat(_i18n.i18n.translate("xpack.apm.transactionsTable.transactionsPerMinuteUnitLabel",{defaultMessage:"tpm"}))}},{field:"impact",name:_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionsTable.impactColumnDescription",{defaultMessage:"The most used and slowest endpoints in your service. It's calculated by taking the relative average duration times the number of transactions per minute."})},_react.default.createElement(_react.default.Fragment,null,_i18n.i18n.translate("xpack.apm.transactionsTable.impactColumnLabel",{defaultMessage:"Impact"})," ",_react.default.createElement(_eui.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),sortable:true,dataType:"number",render:function render(value){return _react.default.createElement(_ImpactBar.ImpactBar,{value:value})}}]}),[]);var noItemsMessage=_react.default.createElement(_EmptyMessage.EmptyMessage,{heading:_i18n.i18n.translate("xpack.apm.transactionsTable.notFoundLabel",{defaultMessage:"No transactions were found."})});return _react.default.createElement(_ManagedTable.ManagedTable,{noItemsMessage:isLoading?_react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null):noItemsMessage,columns:columns,items:items,initialSortField:"impact",initialSortDirection:"desc",initialPageSize:25})}},4373:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useRedirect=useRedirect;var _react=__webpack_require__(0);function useRedirect(history,redirectLocation){(0,_react.useEffect)((function(){if(redirectLocation){history.replace(redirectLocation)}}))}},4374:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionTypeFilter=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _useUrlParams2=__webpack_require__(45);var _history=__webpack_require__(136);var _url_helpers=__webpack_require__(95);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TransactionTypeFilter=function TransactionTypeFilter(_ref){var transactionTypes=_ref.transactionTypes;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),transactionType=_useUrlParams.urlParams.transactionType;var options=transactionTypes.map((function(type){return{text:type,value:type}}));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xxxs",textTransform:"uppercase"},_react.default.createElement("h4",null,_i18n.i18n.translate("xpack.apm.localFilters.titles.transactionType",{defaultMessage:"Transaction type"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"none"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiSelect,{options:options,value:transactionType,compressed:true,onChange:function onChange(event){var newLocation=_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(_history.history.location.search),{transactionType:event.target.value}))});_history.history.push(newLocation)}}))};exports.TransactionTypeFilter=TransactionTypeFilter},4375:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceMetrics=ServiceMetrics;var _eui=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _useServiceMetricCharts=__webpack_require__(1534);var _MetricsChart=__webpack_require__(1535);var _useUrlParams2=__webpack_require__(45);var _ChartsSyncContext=__webpack_require__(456);var _typings=__webpack_require__(295);var _LocalUIFilters=__webpack_require__(296);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ServiceMetrics(_ref){var agentName=_ref.agentName;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var serviceName=urlParams.serviceName,serviceNodeName=urlParams.serviceNodeName;var _useServiceMetricChar=(0,_useServiceMetricCharts.useServiceMetricCharts)(urlParams,agentName),data=_useServiceMetricChar.data;var start=urlParams.start,end=urlParams.end;var localFiltersConfig=(0,_react.useMemo)((function(){return{filterNames:["host","containerId","podName","serviceVersion"],params:{serviceName:serviceName,serviceNodeName:serviceNodeName},projection:_typings.PROJECTION.METRICS,showCount:false}}),[serviceName,serviceNodeName]);return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localFiltersConfig)),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_ChartsSyncContext.ChartsSyncContextProvider,null,_react.default.createElement(_eui.EuiFlexGrid,{columns:2,gutterSize:"s"},data.charts.map((function(chart){return _react.default.createElement(_eui.EuiFlexItem,{key:chart.key},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_MetricsChart.MetricsChart,{start:start,end:end,chart:chart})))}))),_react.default.createElement(_eui.EuiSpacer,{size:"xxl"}))))}},4376:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);var _useUrlParams2=__webpack_require__(45);var _pickKeys=__webpack_require__(188);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var MetricOverviewLink=function MetricOverviewLink(_ref){var serviceName=_ref.serviceName,rest=_objectWithoutProperties(_ref,["serviceName"]);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"host","containerId","podName","serviceVersion");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/metrics"),query:persistedFilters},rest))};exports.MetricOverviewLink=MetricOverviewLink},4377:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceNodeOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);var _useUrlParams2=__webpack_require__(45);var _pickKeys=__webpack_require__(188);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var ServiceNodeOverviewLink=function ServiceNodeOverviewLink(_ref){var serviceName=_ref.serviceName,rest=_objectWithoutProperties(_ref,["serviceName"]);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"host","containerId","podName","serviceVersion");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/nodes"),query:persistedFilters},rest))};exports.ServiceNodeOverviewLink=ServiceNodeOverviewLink},4378:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceNodeOverview=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _i18n2=__webpack_require__(187);var _service_nodes=__webpack_require__(833);var _typings=__webpack_require__(295);var _LocalUIFilters=__webpack_require__(296);var _useUrlParams2=__webpack_require__(45);var _ManagedTable=__webpack_require__(367);var _useFetcher2=__webpack_require__(54);var _formatters=__webpack_require__(85);var _ServiceNodeMetricOverviewLink=__webpack_require__(4379);var _variables=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var INITIAL_PAGE_SIZE=25;var INITIAL_SORT_FIELD="cpu";var INITIAL_SORT_DIRECTION="desc";var ServiceNodeName=_styledComponents.default.div.withConfig({displayName:"ServiceNodeName",componentId:"sc-1pmt842-0"})(["",""],(0,_variables.truncate)((0,_variables.px)(8*_variables.unit)));var ServiceNodeOverview=function ServiceNodeOverview(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),uiFilters=_useUrlParams.uiFilters,urlParams=_useUrlParams.urlParams;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end;var localFiltersConfig=(0,_react.useMemo)((function(){return{filterNames:["host","containerId","podName"],params:{serviceName:serviceName},projection:_typings.PROJECTION.SERVICE_NODES}}),[serviceName]);var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(!serviceName||!start||!end){return undefined}return callApmApi({pathname:"/api/apm/services/{serviceName}/serviceNodes",params:{path:{serviceName:serviceName},query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters)}}})}),[serviceName,start,end,uiFilters]),_useFetcher$data=_useFetcher.data,items=_useFetcher$data===void 0?[]:_useFetcher$data;if(!serviceName){return null}var columns=[{name:_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.jvmsTable.nameExplanation",{defaultMessage:"By default, the JVM name is the container ID (where applicable) or the hostname, but it can be manually configured through the agent's 'service_node_name' configuration."})},_react.default.createElement(_react.default.Fragment,null,_i18n.i18n.translate("xpack.apm.jvmsTable.nameColumnLabel",{defaultMessage:"Name"}))),field:"name",sortable:true,render:function render(name){var _ref=name===_service_nodes.SERVICE_NODE_NAME_MISSING?{displayedName:_i18n2.UNIDENTIFIED_SERVICE_NODES_LABEL,tooltip:_i18n.i18n.translate("xpack.apm.jvmsTable.explainServiceNodeNameMissing",{defaultMessage:"We could not identify which JVMs these metrics belong to. This is likely caused by running a version of APM Server that is older than 7.5. Upgrading to APM Server 7.5 or higher should resolve this issue."})}:{displayedName:name,tooltip:name},displayedName=_ref.displayedName,tooltip=_ref.tooltip;return _react.default.createElement(_eui.EuiToolTip,{content:tooltip},_react.default.createElement(_ServiceNodeMetricOverviewLink.ServiceNodeMetricOverviewLink,{serviceName:serviceName,serviceNodeName:name},_react.default.createElement(ServiceNodeName,null,displayedName)))}},{name:_i18n.i18n.translate("xpack.apm.jvmsTable.cpuColumnLabel",{defaultMessage:"CPU avg"}),field:"cpu",sortable:true,render:function render(value){return(0,_formatters.asPercent)(value||0,1)}},{name:_i18n.i18n.translate("xpack.apm.jvmsTable.heapMemoryColumnLabel",{defaultMessage:"Heap memory avg"}),field:"heapMemory",sortable:true,render:_formatters.asDynamicBytes},{name:_i18n.i18n.translate("xpack.apm.jvmsTable.nonHeapMemoryColumnLabel",{defaultMessage:"Non-heap memory avg"}),field:"nonHeapMemory",sortable:true,render:_formatters.asDynamicBytes},{name:_i18n.i18n.translate("xpack.apm.jvmsTable.threadCountColumnLabel",{defaultMessage:"Thread count max"}),field:"threadCount",sortable:true,render:_formatters.asInteger}];return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localFiltersConfig)),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_ManagedTable.ManagedTable,{noItemsMessage:_i18n.i18n.translate("xpack.apm.jvmsTable.noJvmsLabel",{defaultMessage:"No JVMs were found"}),items:items,columns:columns,initialPageSize:INITIAL_PAGE_SIZE,initialSortField:INITIAL_SORT_FIELD,initialSortDirection:INITIAL_SORT_DIRECTION}))))};exports.ServiceNodeOverview=ServiceNodeOverview},4379:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceNodeMetricOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);var _useUrlParams2=__webpack_require__(45);var _pickKeys=__webpack_require__(188);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var ServiceNodeMetricOverviewLink=function ServiceNodeMetricOverviewLink(_ref){var serviceName=_ref.serviceName,serviceNodeName=_ref.serviceNodeName,rest=_objectWithoutProperties(_ref,["serviceName","serviceNodeName"]);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"host","containerId","podName","serviceVersion");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/nodes/").concat(encodeURIComponent(serviceNodeName),"/metrics"),query:persistedFilters},rest))};exports.ServiceNodeMetricOverviewLink=ServiceNodeMetricOverviewLink},4380:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useLicense=useLicense;var _react=__webpack_require__(0);var _LicenseContext=__webpack_require__(585);function useLicense(){return(0,_react.useContext)(_LicenseContext.LicenseContext)}},4381:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Controls=Controls;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _i18n=__webpack_require__(2);var _Cytoscape=__webpack_require__(850);var _FullscreenPanel=__webpack_require__(4389);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var ControlsContainer=(0,_styledComponents.default)("div").withConfig({displayName:"ControlsContainer",componentId:"nyuhsx-0"})(["left:",";position:absolute;top:",";z-index:1;"],_eui_theme_light.default.gutterTypes.gutterMedium,_eui_theme_light.default.gutterTypes.gutterSmall);var Button=(0,_styledComponents.default)(_eui.EuiButtonIcon).withConfig({displayName:"Button",componentId:"nyuhsx-1"})(["display:block;margin:",";"],_eui_theme_light.default.paddingSizes.xs);var ZoomInButton=(0,_styledComponents.default)(Button).withConfig({displayName:"ZoomInButton",componentId:"nyuhsx-2"})(["margin-bottom:",";"],_eui_theme_light.default.paddingSizes.s);var ZoomPanel=(0,_styledComponents.default)(_eui.EuiPanel).withConfig({displayName:"ZoomPanel",componentId:"nyuhsx-3"})(["margin-bottom:",";"],_eui_theme_light.default.paddingSizes.s);var duration=parseInt(_eui_theme_light.default.euiAnimSpeedFast,10);var steps=5;function doZoom(cy,increment){if(cy){var level=cy.zoom()+increment;cy.animate({duration:duration,zoom:{level:level,position:cy.$(".primary").position()}})}}function Controls(){var cy=(0,_react.useContext)(_Cytoscape.CytoscapeContext);var _useState=(0,_react.useState)(cy&&cy.zoom()||1),_useState2=_slicedToArray(_useState,2),zoom=_useState2[0],setZoom=_useState2[1];(0,_react.useEffect)((function(){if(cy){cy.on("zoom",(function(event){setZoom(event.cy.zoom())}))}}),[cy]);function zoomIn(){doZoom(cy,increment)}function zoomOut(){doZoom(cy,-increment)}if(!cy){return null}var maxZoom=cy.maxZoom();var isMaxZoom=zoom===maxZoom;var minZoom=cy.minZoom();var isMinZoom=zoom===minZoom;var increment=(maxZoom-minZoom)/steps;var mapDomElement=cy.container();var zoomInLabel=_i18n.i18n.translate("xpack.apm.serviceMap.zoomIn",{defaultMessage:"Zoom in"});var zoomOutLabel=_i18n.i18n.translate("xpack.apm.serviceMap.zoomOut",{defaultMessage:"Zoom out"});return _react.default.createElement(ControlsContainer,null,_react.default.createElement(ZoomPanel,{hasShadow:true,paddingSize:"none"},_react.default.createElement(ZoomInButton,{"aria-label":zoomInLabel,color:"text",disabled:isMaxZoom,iconType:"plusInCircleFilled",onClick:zoomIn,title:zoomInLabel}),_react.default.createElement(Button,{"aria-label":zoomOutLabel,color:"text",disabled:isMinZoom,iconType:"minusInCircleFilled",onClick:zoomOut,title:zoomOutLabel})),_react.default.createElement(_FullscreenPanel.FullscreenPanel,{element:mapDomElement}))}},4384:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cytoscapeOptions=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _icons=__webpack_require__(4385);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var layout={name:"dagre",nodeDimensionsIncludeLabels:true,rankDir:"LR"};function isService(el){return el.data("type")==="service"}var style=[{selector:"node",style:{"background-color":"white","background-image":function backgroundImage(el){var _iconForNode;return(_iconForNode=(0,_icons.iconForNode)(el))!==null&&_iconForNode!==void 0?_iconForNode:_icons.defaultIcon},"background-height":function backgroundHeight(el){return isService(el)?"80%":"40%"},"background-width":function backgroundWidth(el){return isService(el)?"80%":"40%"},"border-color":function borderColor(el){return el.hasClass("primary")?_eui_theme_light.default.euiColorSecondary:_eui_theme_light.default.euiColorMediumShade},"border-width":2,color:_eui_theme_light.default.textColors.default,"font-family":"Inter UI, Segoe UI, Helvetica, Arial, sans-serif","font-size":_eui_theme_light.default.euiFontSizeXS,height:_eui_theme_light.default.avatarSizing.l.size,label:"data(label)","min-zoomed-font-size":_eui_theme_light.default.euiSizeL,"overlay-opacity":0,shape:function shape(el){return isService(el)?"ellipse":"diamond"},"text-background-color":_eui_theme_light.default.euiColorLightestShade,"text-background-opacity":0,"text-background-padding":_eui_theme_light.default.paddingSizes.xs,"text-background-shape":"roundrectangle","text-margin-y":_eui_theme_light.default.paddingSizes.s,"text-max-width":"85px","text-valign":"bottom","text-wrap":"ellipsis",width:_eui_theme_light.default.avatarSizing.l.size}},{selector:"edge",style:{"curve-style":"bezier","line-color":_eui_theme_light.default.euiColorMediumShade,"overlay-opacity":0,"target-arrow-color":_eui_theme_light.default.euiColorMediumShade,"target-arrow-shape":"triangle","target-distance-from-node":_eui_theme_light.default.paddingSizes.xs,width:1,"source-arrow-shape":"none"}},{selector:"edge[bidirectional]",style:{"source-arrow-shape":"triangle","target-arrow-shape":"triangle","source-distance-from-node":_eui_theme_light.default.paddingSizes.xs,"target-distance-from-node":_eui_theme_light.default.paddingSizes.xs}}];var cytoscapeOptions={autoungrabify:true,boxSelectionEnabled:false,layout:layout,maxZoom:3,minZoom:.2,style:style};exports.cytoscapeOptions=cytoscapeOptions},4385:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.iconForNode=iconForNode;exports.defaultIcon=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _database=_interopRequireDefault(__webpack_require__(4386));var _documents=_interopRequireDefault(__webpack_require__(4387));var _globe=_interopRequireDefault(__webpack_require__(4388));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getAvatarIcon(){var text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var backgroundColor=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"transparent";var foregroundColor=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"white";return"data:image/svg+xml;utf8,"+encodeURIComponent('<svg width="80" height="80" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">\n  <circle cx="40" cy="40" fill="'.concat(backgroundColor,'"  r="40" stroke-width="0" />\n  <text fill="').concat(foregroundColor,'" font-family="\'Inter UI\', \'-apple-system\', \'BlinkMacSystemFont\', \'Segoe UI\', \'Helvetica\', \'Arial\', sans-serif" font-size="36" text-anchor="middle" x="40" xml:space="preserve" y="52">').concat(text,"</text>\n</svg>\n"))}var icons={cache:_database.default,database:_database.default,external:_globe.default,messaging:_documents.default,resource:_globe.default};var serviceIcons={dotnet:getAvatarIcon(".N","#8562AD"),go:getAvatarIcon("Go","#00A9D6"),java:getAvatarIcon("Jv","#41717E"),"js-base":getAvatarIcon("JS","#F0DB4E",_eui_theme_light.default.euiTextColor),nodejs:getAvatarIcon("No","#689E62"),python:getAvatarIcon("Py","#376994"),ruby:getAvatarIcon("Rb","#CC362E")};var defaultIcon=getAvatarIcon();exports.defaultIcon=defaultIcon;function iconForNode(node){var type=node.data("type");if(type==="service"){return serviceIcons[node.data("agentName")]}else{return icons[type]}}},4386:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBkPSJNMiwxMiBMMTQsMTIgTDE0LDEwLjAzMDczOSBDMTIuNzc1MTAyOSwxMC42MTE1NDggMTAuNTQ2MzI1MSwxMSA4LDExIEM1LjQ1MzY3NDg2LDExIDMuMjI0ODk3MTUsMTAuNjExNTQ4IDIsMTAuMDMwNzM5IEwyLDEyIFogTTEsMTIgTDEsMyBDMSwxLjg5NTQzMDUgNC4xMzQwMDY3NSwxIDgsMSBDMTEuODY1OTkzMiwxIDE1LDEuODk1NDMwNSAxNSwzIEwxNSwxMiBDMTUsMTMuMTA0NTY5NSAxMS44NjU5OTMyLDE0IDgsMTQgQzQuMTM0MDA2NzUsMTQgMSwxMy4xMDQ1Njk1IDEsMTIgWiBNMiw5IEwxNCw5IEwxNCw3LjAzMDczOTAzIEMxMi43NzUxMDI5LDcuNjExNTQ3OTUgMTAuNTQ2MzI1MSw4IDgsOCBDNS40NTM2NzQ4Niw4IDMuMjI0ODk3MTUsNy42MTE1NDc5NSAyLDcuMDMwNzM5MDMgTDIsOSBaIE0yLDQuMDMwNzM5MDMgTDIsNiBMMTQsNiBMMTQsNC4wMzA3MzkwMyBDMTIuNzc1MTAyOSw0LjYxMTU0Nzk1IDEwLjU0NjMyNTEsNSA4LDUgQzUuNDUzNjc0ODYsNSAzLjIyNDg5NzE1LDQuNjExNTQ3OTUgMiw0LjAzMDczOTAzIFogTTEyLjY3NTAyNjMsMi41NDczMTAzOSBDMTEuNDY2OTI0NCwyLjIwMjEzODQgOS43OTQyNDM0LDIgOCwyIEM2LjIwNTc1NjYsMiA0LjUzMzA3NTYxLDIuMjAyMTM4NCAzLjMyNDk3MzY2LDIuNTQ3MzEwMzkgQzIuODMzMzQ5NTksMi42ODc3NzQ0IDIuNDQ1MTE1NzQsMi44NDUzNjYwNyAyLjE4ODYwMzg0LDMgQzIuNDQ1MTE1NzQsMy4xNTQ2MzM5MyAyLjgzMzM0OTU5LDMuMzEyMjI1NiAzLjMyNDk3MzY2LDMuNDUyNjg5NjEgQzQuNTMzMDc1NjEsMy43OTc4NjE2IDYuMjA1NzU2Niw0IDgsNCBDOS43OTQyNDM0LDQgMTEuNDY2OTI0NCwzLjc5Nzg2MTYgMTIuNjc1MDI2MywzLjQ1MjY4OTYxIEMxMy4xNjY2NTA0LDMuMzEyMjI1NiAxMy41NTQ4ODQzLDMuMTU0NjMzOTMgMTMuODExMzk2MiwzIEMxMy41NTQ4ODQzLDIuODQ1MzY2MDcgMTMuMTY2NjUwNCwyLjY4Nzc3NDQgMTIuNjc1MDI2MywyLjU0NzMxMDM5IFogTTIuMDAwMTIyMDcsNiBDMi4yNTY2MzM5Nyw2LjE1NDYzMzkzIDIuODMzMzQ5NTksNi4zMTIyMjU2IDMuMzI0OTczNjYsNi40NTI2ODk2MSBDNC41MzMwNzU2MSw2Ljc5Nzg2MTYgNi4yMDU3NTY2LDcgOCw3IEM5Ljc5NDI0MzQsNyAxMS40NjY5MjQ0LDYuNzk3ODYxNiAxMi42NzUwMjYzLDYuNDUyNjg5NjEgQzEzLjE2NjY1MDQsNi4zMTIyMjU2IDEzLjc0NTI1ODEsNi4xNTQ2MzM5MyAxNC4wMDE3Nyw2IEMxNC4wMDE3Nyw2IDIuMDAwMTIyMDcsNiAyLjAwMDEyMjA3LDYgWiBNMi4wMDAxMjIwNyw5IEMyLjI1NjYzMzk3LDkuMTU0NjMzOTMgMi44MzMzNDk1OSw5LjMxMjIyNTYgMy4zMjQ5NzM2Niw5LjQ1MjY4OTYxIEM0LjUzMzA3NTYxLDkuNzk3ODYxNiA2LjIwNTc1NjYsMTAgOCwxMCBDOS43OTQyNDM0LDEwIDExLjQ2NjkyNDQsOS43OTc4NjE2IDEyLjY3NTAyNjMsOS40NTI2ODk2MSBDMTMuMTY2NjUwNCw5LjMxMjIyNTYgMTMuNzQ1MjU4MSw5LjE1NDYzMzkzIDE0LjAwMTc3LDkgQzE0LjAwMTc3LDkgMi4wMDAxMjIwNyw5IDIuMDAwMTIyMDcsOSBaIE0yLjAwMDEyMjA3LDEyIEMyLjI1NjYzMzk3LDEyLjE1NDYzMzkgMi44MzMzNDk1OSwxMi4zMTIyMjU2IDMuMzI0OTczNjYsMTIuNDUyNjg5NiBDNC41MzMwNzU2MSwxMi43OTc4NjE2IDYuMjA1NzU2NiwxMyA4LDEzIEM5Ljc5NDI0MzQsMTMgMTEuNDY2OTI0NCwxMi43OTc4NjE2IDEyLjY3NTAyNjMsMTIuNDUyNjg5NiBDMTMuMTY2NjUwNCwxMi4zMTIyMjU2IDEzLjc0NTI1ODEsMTIuMTU0NjMzOSAxNC4wMDE3NywxMiBDMTQuMDAxNzcsMTIgMi4wMDAxMjIwNywxMiAyLjAwMDEyMjA3LDEyIFoiLz4KPC9zdmc+Cg=="},4387:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iZXVpSWNvbiBldWlJY29uLS1tZWRpdW0gZXVpSWNvbi1pc0xvYWRlZCIgZm9jdXNhYmxlPSJmYWxzZSIgcm9sZT0iaW1nIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PHRpdGxlPjwvdGl0bGU+PHBhdGggZD0iTTguOCAwYy4yNzQgMCAuNTM3LjExMy43MjYuMzEybDMuMiAzLjQyOGMuMTc2LjE4Ni4yNzQuNDMzLjI3NC42ODlWMTNhMSAxIDAgMDEtMSAxSDJhMSAxIDAgMDEtMS0xVjFhMSAxIDAgMDExLTFoNi44ek0xMiA1SDguNWEuNS41IDAgMDEtLjUtLjVWMUgydjEyaDEwVjV6bS03LjUgNmEuNS41IDAgMTEwLTFoNWEuNS41IDAgMTEwIDFoLTV6bTAtM2EuNS41IDAgMDEwLTFoNWEuNS41IDAgMTEwIDFoLTV6bTEgOGEuNS41IDAgMTEwLTFIMTRWNi41YS41LjUgMCAxMTEgMFYxNWExIDEgMCAwMS0xIDFINS41eiI+PC9wYXRoPjwvc3ZnPgo="},4388:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBkPSJNMS4wMTg5NDQ4Miw4IEMxLjEwMjU0Njc2LDkuMDk4OTk0MDQgMS40NTk0NDA5LDEwLjEyMTU5NzEgMi4wMjE4MTc5MSwxMSBMNC40MDM2ODg0MSwxMSBDNC4xODAxOTkzMywxMC4wOTQwMTY0IDQuMDQwNzcwMTcsOS4wNzgxMjExMiA0LjAwNzY1NDQsOCBMMS4wMTg5NDQ4Miw4IFogTTEuMDE4OTQ0ODIsNyBMNC4wMDc2NTQ0LDcgQzQuMDQwNzcwMTcsNS45MjE4Nzg4OCA0LjE4MDE5OTMzLDQuOTA1OTgzNTYgNC40MDM2ODg0MSw0IEwyLjAyMTgxNzkxLDQgQzEuNDU5NDQwOSw0Ljg3ODQwMjg1IDEuMTAyNTQ2NzYsNS45MDEwMDU5NiAxLjAxODk0NDgyLDcgWiBNMTMuOTgxMDU1Miw4IEwxMC45OTIzNDU2LDggQzEwLjk1OTIyOTgsOS4wNzgxMjExMiAxMC44MTk4MDA3LDEwLjA5NDAxNjQgMTAuNTk2MzExNiwxMSBMMTIuOTc4MTgyMSwxMSBDMTMuNTQwNTU5MSwxMC4xMjE1OTcxIDEzLjg5NzQ1MzIsOS4wOTg5OTQwNCAxMy45ODEwNTUyLDggWiBNMTMuOTgxMDU1Miw3IEMxMy44OTc0NTMyLDUuOTAxMDA1OTYgMTMuNTQwNTU5MSw0Ljg3ODQwMjg1IDEyLjk3ODE4MjEsNCBMMTAuNTk2MzExNiw0IEMxMC44MTk4MDA3LDQuOTA1OTgzNTYgMTAuOTU5MjI5OCw1LjkyMTg3ODg4IDEwLjk5MjM0NTYsNyBMMTMuOTgxMDU1Miw3IFogTTUuMDA4MzA5MjcsOCBDNS4wNDUxODQ1Miw5LjEwNjc2MDAxIDUuMjAyNjA1OTEsMTAuMTI2ODMyIDUuNDM2NjcxMiwxMSBMOS41NjMzMjg4LDExIEM5Ljc5NzM5NDA5LDEwLjEyNjgzMiA5Ljk1NDgxNTQ4LDkuMTA2NzYwMDEgOS45OTE2OTA3Myw4IEw1LjAwODMwOTI3LDggWiBNNS4wMDgzMDkyNyw3IEw5Ljk5MTY5MDczLDcgQzkuOTU0ODE1NDgsNS44OTMyMzk5OSA5Ljc5NzM5NDA5LDQuODczMTY3OTkgOS41NjMzMjg4LDQgTDUuNDM2NjcxMiw0IEM1LjIwMjYwNTkxLDQuODczMTY3OTkgNS4wNDUxODQ1Miw1Ljg5MzIzOTk5IDUuMDA4MzA5MjcsNyBaIE0wLjAxNjQwMjI3NzQsOCBMMCw4IEwwLDcgTDAuMDE2NDAyMjc3NCw3IEMwLjI3MzY5NTMyLDMuMDkwOTg0MDkgMy41MjU4Nzg2NSwwIDcuNSwwIEMxMS40NzQxMjEzLDAgMTQuNzI2MzA0NywzLjA5MDk4NDA5IDE0Ljk4MzU5NzcsNyBMMTUsNyBMMTUsOCBMMTQuOTgzNTk3Nyw4IEMxNC43MjYzMDQ3LDExLjkwOTAxNTkgMTEuNDc0MTIxMywxNSA3LjUsMTUgQzMuNTI1ODc4NjUsMTUgMC4yNzM2OTUzMiwxMS45MDkwMTU5IDAuMDE2NDAyMjc3NCw4IFogTTIuODA5NTcyMTksMTIgQzMuNTUwOTg5NDUsMTIuNzcyNTkyNiA0LjQ4MTQ0MTM4LDEzLjM2MjM4NDUgNS41MjY1NzQxMywxMy42OTUwMjE4IEM1LjIwOTU4MjgxLDEzLjIzMDQ1NDEgNC45MzAwNjcyLDEyLjY1NzA3OCA0LjY5OTc0MzY3LDEyIEwyLjgwOTU3MjE5LDEyIFogTTEyLjE5MDQyNzgsMTIgTDEwLjMwMDI1NjMsMTIgQzEwLjA2OTkzMjgsMTIuNjU3MDc4IDkuNzkwNDE3MTksMTMuMjMwNDU0MSA5LjQ3MzQyNTg3LDEzLjY5NTAyMTggQzEwLjUxODU1ODYsMTMuMzYyMzg0NSAxMS40NDkwMTA1LDEyLjc3MjU5MjYgMTIuMTkwNDI3OCwxMiBaIE01Ljc2MTg1MDY5LDEyIEM2LjI0NjAwNjA4LDEzLjIzOTY5NjcgNi44OTM2NTc3OSwxNCA3LjUsMTQgQzguMTA2MzQyMjEsMTQgOC43NTM5OTM5MiwxMy4yMzk2OTY3IDkuMjM4MTQ5MzEsMTIgTDUuNzYxODUwNjksMTIgWiBNMi44MDk1NzIxOSwzIEw0LjY5OTc0MzY3LDMgQzQuOTMwMDY3MiwyLjM0MjkyMjA0IDUuMjA5NTgyODEsMS43Njk1NDU5MiA1LjUyNjU3NDEzLDEuMzA0OTc4MTggQzQuNDgxNDQxMzgsMS42Mzc2MTU1MiAzLjU1MDk4OTQ1LDIuMjI3NDA3NCAyLjgwOTU3MjE5LDMgWiBNMTIuMTkwNDI3OCwzIEMxMS40NDkwMTA1LDIuMjI3NDA3NCAxMC41MTg1NTg2LDEuNjM3NjE1NTIgOS40NzM0MjU4NywxLjMwNDk3ODE4IEM5Ljc5MDQxNzE5LDEuNzY5NTQ1OTIgMTAuMDY5OTMyOCwyLjM0MjkyMjA0IDEwLjMwMDI1NjMsMyBMMTIuMTkwNDI3OCwzIFogTTUuNzYxODUwNjksMyBMOS4yMzgxNDkzMSwzIEM4Ljc1Mzk5MzkyLDEuNzYwMzAzMzQgOC4xMDYzNDIyMSwxIDcuNSwxIEM2Ljg5MzY1Nzc5LDEgNi4yNDYwMDYwOCwxLjc2MDMwMzM0IDUuNzYxODUwNjksMyBaIi8+Cjwvc3ZnPgo="},4389:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FullscreenPanel=FullscreenPanel;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Button=(0,_styledComponents.default)(_eui.EuiButtonIcon).withConfig({displayName:"Button",componentId:"qdx97h-0"})(["display:block;margin:",";"],_eui_theme_light.default.paddingSizes.xs);function FullscreenPanel(_ref){var element=_ref.element;var canDoFullscreen=element&&element.ownerDocument&&element.ownerDocument.fullscreenEnabled;if(!canDoFullscreen){return null}function doFullscreen(){if(element&&element.ownerDocument&&canDoFullscreen){var isFullscreen=element.ownerDocument.fullscreenElement!==null;if(isFullscreen){element.ownerDocument.exitFullscreen()}else{element.requestFullscreen()}}}var label=_i18n.i18n.translate("xpack.apm.serviceMap.fullscreen",{defaultMessage:"Full screen"});return _react.default.createElement(_eui.EuiPanel,{hasShadow:true,paddingSize:"none"},_react.default.createElement(Button,{"aria-label":label,color:"text",iconType:"fullScreen",onClick:doFullscreen,title:label}))}},4390:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCytoscapeElements=getCytoscapeElements;var _lodash=__webpack_require__(3);var _APMLink=__webpack_require__(123);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getConnectionNodeId(node){if("destination.address"in node){return">".concat(node["destination.address"])}return node["service.name"]}function getConnectionId(connection){return"".concat(getConnectionNodeId(connection.source),"~").concat(getConnectionNodeId(connection.destination))}function getCytoscapeElements(responses,search){var discoveredServices=responses.flatMap((function(response){return response.discoveredServices}));var serviceNodes=responses.flatMap((function(response){return response.services})).map((function(service){return _objectSpread({},service,{id:service["service.name"]})}));function getConnectionNode(node){var mappedNode;if("destination.address"in node){var _discoveredServices$f;mappedNode=(_discoveredServices$f=discoveredServices.find((function(map){return(0,_lodash.isEqual)(map.from,node)})))===null||_discoveredServices$f===void 0?void 0:_discoveredServices$f.to}if(!mappedNode){mappedNode=node}return _objectSpread({},mappedNode,{id:getConnectionNodeId(mappedNode)})}var connections=responses.flatMap((function(response){return response.connections})).map((function(connection){var source=getConnectionNode(connection.source);var destination=getConnectionNode(connection.destination);return{source:source,destination:destination,id:getConnectionId({source:source,destination:destination})}})).filter((function(connection){return connection.source.id!==connection.destination.id}));var nodes=connections.flatMap((function(connection){return[connection.source,connection.destination]})).concat(serviceNodes);var connectionsById=connections.reduce((function(connectionMap,connection){return _objectSpread({},connectionMap,_defineProperty({},connection.id,connection))}),{});var nodesById=nodes.reduce((function(nodeMap,node){return _objectSpread({},nodeMap,_defineProperty({},node.id,node))}),{});var cyNodes=Object.values(nodesById).map((function(node){var data={};if("service.name"in node){data={href:(0,_APMLink.getAPMHref)("/services/".concat(node["service.name"],"/service-map"),search),agentName:node["agent.name"]||node["agent.name"],type:"service"}}if("span.type"in node){data={type:node["span.type"]==="db"?"database":node["span.type"],subtype:node["span.type"]!=="external"&&node["span.subtype"]}}return{group:"nodes",data:_objectSpread({id:node.id,label:"service.name"in node?node["service.name"]:node["destination.address"]},data)}}));var dedupedConnections=(0,_lodash.sortBy)(Object.values(connectionsById),"id").reduce((function(prev,connection){var reversedConnection=prev.find((function(c){return c.destination.id===connection.source.id&&c.source.id===connection.destination.id}));if(reversedConnection){reversedConnection.bidirectional=true;return prev}return prev.concat(connection)}),[]);var cyEdges=dedupedConnections.map((function(connection){return{group:"edges",data:{id:connection.id,source:connection.source.id,target:connection.destination.id,bidirectional:connection.bidirectional?true:undefined}}}),[]);return[].concat(_toConsumableArray(cyNodes),_toConsumableArray(cyEdges))}},4391:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingOverlay=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Container=_styledComponents.default.div.withConfig({displayName:"Container",componentId:"sc-4lr3lw-0"})(["position:relative;"]);var Overlay=_styledComponents.default.div.withConfig({displayName:"Overlay",componentId:"sc-4lr3lw-1"})(["position:absolute;top:0;z-index:1;display:flex;flex-direction:column;align-items:center;width:100%;padding:",";"],_eui_theme_light.default.gutterTypes.gutterMedium);var ProgressBarContainer=_styledComponents.default.div.withConfig({displayName:"ProgressBarContainer",componentId:"sc-4lr3lw-2"})(["width:50%;max-width:600px;"]);var LoadingOverlay=function LoadingOverlay(_ref){var children=_ref.children,isLoading=_ref.isLoading,percentageLoaded=_ref.percentageLoaded;return _react.default.createElement(Container,null,isLoading&&_react.default.createElement(Overlay,null,_react.default.createElement(ProgressBarContainer,null,_react.default.createElement(_eui.EuiProgress,{value:percentageLoaded,max:100,color:"primary",size:"m"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,{size:"s",textAlign:"center"},_i18n.i18n.translate("xpack.apm.loadingServiceMap",{defaultMessage:"Loading service map... This might take a short while."}))),children)};exports.LoadingOverlay=LoadingOverlay},4392:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PlatinumLicensePrompt=PlatinumLicensePrompt;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _useKibanaUrl=__webpack_require__(4393);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PlatinumLicensePrompt(){var style={height:"60vh"};var licensePageUrl=(0,_useKibanaUrl.useKibanaUrl)("/app/kibana","/management/elasticsearch/license_management/home");return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",style:style},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPanel,{grow:false,hasShadow:true},_react.default.createElement(_eui.EuiEmptyPrompt,{actions:[_react.default.createElement(_eui.EuiButton,{fill:true,href:licensePageUrl},_i18n.i18n.translate("xpack.apm.serviceMap.licensePromptButtonText",{defaultMessage:"Start 30-day Platinum trial"}))],body:_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceMap.licensePromptBody",{defaultMessage:"In order to access Service Maps, you must be subscribed to an Elastic Platinum license. With it, you'll have the ability to visualize your entire application stack along with your APM data."})),title:_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.serviceMap.licensePromptTitle",{defaultMessage:"Service maps is available in Platinum."}))}))))}},4393:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useKibanaUrl=useKibanaUrl;var _url=_interopRequireDefault(__webpack_require__(71));var _useApmPluginContext2=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function useKibanaUrl(path,hash){var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;return _url.default.format({pathname:core.http.basePath.prepend(path),hash:hash})}},4394:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Popover=Popover;var _eui=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _Cytoscape=__webpack_require__(850);var _Buttons=__webpack_require__(4395);var _Info=__webpack_require__(4396);var _ServiceMetricList=__webpack_require__(4397);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var popoverMinWidth=280;function Popover(_ref){var _ref2,_ref3,_ref5,_ref6,_ref7,_ref8;var focusedServiceName=_ref.focusedServiceName;var cy=(0,_react.useContext)(_Cytoscape.CytoscapeContext);var _useState=(0,_react.useState)(undefined),_useState2=_slicedToArray(_useState,2),selectedNode=_useState2[0],setSelectedNode=_useState2[1];var onFocusClick=(0,_react.useCallback)((function(){return setSelectedNode(undefined)}),[setSelectedNode]);(0,_react.useEffect)((function(){var selectHandler=function selectHandler(event){setSelectedNode(event.target)};var unselectHandler=function unselectHandler(){setSelectedNode(undefined)};if(cy){cy.on("select","node",selectHandler);cy.on("unselect","node",unselectHandler);cy.on("data viewport",unselectHandler)}return function(){if(cy){cy.removeListener("select","node",selectHandler);cy.removeListener("unselect","node",unselectHandler);cy.removeListener("data viewport",undefined,unselectHandler)}}}),[cy]);var renderedHeight=(_ref2=selectedNode===null||selectedNode===void 0?void 0:selectedNode.renderedHeight())!==null&&_ref2!==void 0?_ref2:0;var renderedWidth=(_ref3=selectedNode===null||selectedNode===void 0?void 0:selectedNode.renderedWidth())!==null&&_ref3!==void 0?_ref3:0;var _ref4=(_ref5=selectedNode===null||selectedNode===void 0?void 0:selectedNode.renderedPosition())!==null&&_ref5!==void 0?_ref5:{x:0,y:0},x=_ref4.x,y=_ref4.y;var isOpen=!!selectedNode;var selectedNodeServiceName=selectedNode===null||selectedNode===void 0?void 0:selectedNode.data("id");var isService=(selectedNode===null||selectedNode===void 0?void 0:selectedNode.data("type"))==="service";var triggerStyle={background:"transparent",height:renderedHeight,position:"absolute",width:renderedWidth};var trigger=_react.default.createElement("div",{className:"trigger",style:triggerStyle});var zoom=(_ref6=cy===null||cy===void 0?void 0:cy.zoom())!==null&&_ref6!==void 0?_ref6:1;var height=(_ref7=selectedNode===null||selectedNode===void 0?void 0:selectedNode.height())!==null&&_ref7!==void 0?_ref7:0;var translateY=y-(zoom+1)*(height/2);var popoverStyle={position:"absolute",transform:"translate(".concat(x,"px, ").concat(translateY,"px)")};var data=(_ref8=selectedNode===null||selectedNode===void 0?void 0:selectedNode.data())!==null&&_ref8!==void 0?_ref8:{};var label=data.label||selectedNodeServiceName;return _react.default.createElement(_eui.EuiPopover,{anchorPosition:"upCenter",button:trigger,closePopover:function closePopover(){},isOpen:isOpen,style:popoverStyle},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"s",style:{minWidth:popoverMinWidth}},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTitle,{size:"xxs"},_react.default.createElement("h3",null,label)),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs"})),_react.default.createElement(_eui.EuiFlexItem,null,isService?_react.default.createElement(_ServiceMetricList.ServiceMetricList,{serviceName:selectedNodeServiceName}):_react.default.createElement(_Info.Info,data)),isService&&_react.default.createElement(_Buttons.Buttons,{focusedServiceName:focusedServiceName,onFocusClick:onFocusClick,selectedNodeServiceName:selectedNodeServiceName})))}},4395:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Buttons=Buttons;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _useUrlParams=__webpack_require__(45);var _APMLink=__webpack_require__(123);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Buttons(_ref){var _useUrlParams$urlPara;var focusedServiceName=_ref.focusedServiceName,_ref$onFocusClick=_ref.onFocusClick,onFocusClick=_ref$onFocusClick===void 0?function(){}:_ref$onFocusClick,selectedNodeServiceName=_ref.selectedNodeServiceName;var currentSearch=(_useUrlParams$urlPara=(0,_useUrlParams.useUrlParams)().urlParams.kuery)!==null&&_useUrlParams$urlPara!==void 0?_useUrlParams$urlPara:"";var detailsUrl=(0,_APMLink.getAPMHref)("/services/".concat(selectedNodeServiceName,"/transactions"),currentSearch);var focusUrl=(0,_APMLink.getAPMHref)("/services/".concat(selectedNodeServiceName,"/service-map"),currentSearch);var isAlreadyFocused=focusedServiceName===selectedNodeServiceName;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButton,{href:detailsUrl,fill:true},_i18n.i18n.translate("xpack.apm.serviceMap.serviceDetailsButtonText",{defaultMessage:"Service Details"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButton,{isDisabled:isAlreadyFocused,color:"secondary",href:focusUrl,onClick:onFocusClick,title:isAlreadyFocused?_i18n.i18n.translate("xpack.apm.serviceMap.alreadyFocusedTitleText",{defaultMessage:"Map is already focused"}):undefined},_i18n.i18n.translate("xpack.apm.serviceMap.focusMapButtonText",{defaultMessage:"Focus map"}))))}},4396:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Info=Info;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ItemRow=_styledComponents.default.div.withConfig({displayName:"ItemRow",componentId:"y947w1-0"})(["line-height:2;"]);var ItemTitle=_styledComponents.default.dt.withConfig({displayName:"ItemTitle",componentId:"y947w1-1"})(["color:",";"],_eui_theme_light.default.textColors.subdued);var ItemDescription=_styledComponents.default.dd.withConfig({displayName:"ItemDescription",componentId:"y947w1-2"})([""]);function Info(_ref){var type=_ref.type,subtype=_ref.subtype;var listItems=[{title:_i18n.i18n.translate("xpack.apm.serviceMap.typePopoverMetric",{defaultMessage:"Type"}),description:type},{title:_i18n.i18n.translate("xpack.apm.serviceMap.subtypePopoverMetric",{defaultMessage:"Subtype"}),description:subtype}];return _react.default.createElement(_react.default.Fragment,null,listItems.map((function(_ref2){var title=_ref2.title,description=_ref2.description;return description&&_react.default.createElement(ItemRow,{key:title},_react.default.createElement(ItemTitle,null,title),_react.default.createElement(ItemDescription,null,description))})))}},4397:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceMetricList=ServiceMetricList;var _eui=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _formatters=__webpack_require__(85);var _useUrlParams2=__webpack_require__(45);var _useFetcher2=__webpack_require__(54);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function LoadingSpinner(){return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",style:{height:170}},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"xl"}))}var ItemRow=(0,_styledComponents.default)("tr").withConfig({displayName:"ItemRow",componentId:"sc-1d6njb0-0"})(["line-height:2;"]);var ItemTitle=(0,_styledComponents.default)("td").withConfig({displayName:"ItemTitle",componentId:"sc-1d6njb0-1"})(["color:",";padding-right:1rem;"],_eui_theme_light.default.textColors.subdued);var ItemDescription=(0,_styledComponents.default)("td").withConfig({displayName:"ItemDescription",componentId:"sc-1d6njb0-2"})(["text-align:right;"]);var na=_i18n.i18n.translate("xpack.apm.serviceMap.NotAvailableMetric",{defaultMessage:"N/A"});function ServiceMetricList(_ref){var _ref2;var serviceName=_ref.serviceName;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end,environment=_useUrlParams$urlPara.environment;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/service-map/service/{serviceName}",params:{path:{serviceName:serviceName},query:{start:start,end:end,environment:environment}}})}}),[serviceName,start,end,environment],{preservePreviousData:false}),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?{}:_useFetcher$data,status=_useFetcher.status;var avgTransactionDuration=data.avgTransactionDuration,avgRequestsPerMinute=data.avgRequestsPerMinute,avgErrorsPerMinute=data.avgErrorsPerMinute,avgCpuUsage=data.avgCpuUsage,avgMemoryUsage=data.avgMemoryUsage,numInstances=data.numInstances;var isLoading=status==="loading";var listItems=[{title:_i18n.i18n.translate("xpack.apm.serviceMap.avgTransDurationPopoverMetric",{defaultMessage:"Trans. duration (avg.)"}),description:(0,_lodash.isNumber)(avgTransactionDuration)?(0,_formatters.asDuration)((0,_formatters.toMicroseconds)(avgTransactionDuration,"milliseconds")):na},{title:_i18n.i18n.translate("xpack.apm.serviceMap.avgReqPerMinutePopoverMetric",{defaultMessage:"Req. per minute (avg.)"}),description:(0,_lodash.isNumber)(avgRequestsPerMinute)?"".concat(avgRequestsPerMinute.toFixed(2)," ").concat((0,_formatters.tpmUnit)("request")):na},{title:_i18n.i18n.translate("xpack.apm.serviceMap.avgErrorsPerMinutePopoverMetric",{defaultMessage:"Errors per minute (avg.)"}),description:(_ref2=avgErrorsPerMinute===null||avgErrorsPerMinute===void 0?void 0:avgErrorsPerMinute.toFixed(2))!==null&&_ref2!==void 0?_ref2:na},{title:_i18n.i18n.translate("xpack.apm.serviceMap.avgCpuUsagePopoverMetric",{defaultMessage:"CPU usage (avg.)"}),description:(0,_lodash.isNumber)(avgCpuUsage)?(0,_formatters.asPercent)(avgCpuUsage,1):na},{title:_i18n.i18n.translate("xpack.apm.serviceMap.avgMemoryUsagePopoverMetric",{defaultMessage:"Memory usage (avg.)"}),description:(0,_lodash.isNumber)(avgMemoryUsage)?(0,_formatters.asPercent)(avgMemoryUsage,1):na}];return isLoading?_react.default.createElement(LoadingSpinner,null):_react.default.createElement(_react.default.Fragment,null,numInstances&&numInstances>1&&_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement("div",null,_react.default.createElement(_eui.EuiBadge,{iconType:"apps",color:"hollow"},_i18n.i18n.translate("xpack.apm.serviceMap.numInstancesMetric",{values:{numInstances:numInstances},defaultMessage:"{numInstances} instances"})))),_react.default.createElement("table",null,_react.default.createElement("tbody",null,listItems.map((function(_ref3){var title=_ref3.title,description=_ref3.description;return _react.default.createElement(ItemRow,{key:title},_react.default.createElement(ItemTitle,null,title),_react.default.createElement(ItemDescription,null,description))})))))}},4398:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceIntegrations=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _LicenseContext=__webpack_require__(585);var _MachineLearningFlyout=__webpack_require__(4399);var _WatcherFlyout=__webpack_require__(4402);var _ApmPluginContext=__webpack_require__(450);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ServiceIntegrations=function(_React$Component){_inherits(ServiceIntegrations,_React$Component);function ServiceIntegrations(){var _getPrototypeOf2;var _this;_classCallCheck(this,ServiceIntegrations);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ServiceIntegrations)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"context",void 0);_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false,activeFlyout:null});_defineProperty(_assertThisInitialized(_this),"getPanelItems",(0,_lodash.memoize)((function(mlAvailable){var panelItems=[];if(mlAvailable){panelItems=panelItems.concat(_this.getMLPanelItems())}return panelItems.concat(_this.getWatcherPanelItems())})));_defineProperty(_assertThisInitialized(_this),"getMLPanelItems",(function(){return[{name:_i18n.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.enableMLAnomalyDetectionButtonLabel",{defaultMessage:"Enable ML anomaly detection"}),icon:"machineLearningApp",toolTipContent:_i18n.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.enableMLAnomalyDetectionButtonTooltip",{defaultMessage:"Set up a machine learning job for this service"}),onClick:function onClick(){_this.closePopover();_this.openFlyout("ML")}}]}));_defineProperty(_assertThisInitialized(_this),"getWatcherPanelItems",(function(){var core=_this.context.core;return[{name:_i18n.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.enableWatcherErrorReportsButtonLabel",{defaultMessage:"Enable watcher error reports"}),icon:"watchesApp",onClick:function onClick(){_this.closePopover();_this.openFlyout("Watcher")}},{name:_i18n.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.viewWatchesButtonLabel",{defaultMessage:"View existing watches"}),icon:"watchesApp",href:core.http.basePath.prepend("/app/kibana#/management/elasticsearch/watcher"),target:"_blank",onClick:function onClick(){return _this.closePopover()}}]}));_defineProperty(_assertThisInitialized(_this),"openPopover",(function(){return _this.setState({isPopoverOpen:true})}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){return _this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"openFlyout",(function(name){return _this.setState({activeFlyout:name})}));_defineProperty(_assertThisInitialized(_this),"closeFlyouts",(function(){return _this.setState({activeFlyout:null})}));return _this}_createClass(ServiceIntegrations,[{key:"render",value:function render(){var _this2=this;var button=_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",onClick:this.openPopover},_i18n.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.integrationsButtonLabel",{defaultMessage:"Integrations"}));return _react.default.createElement(_LicenseContext.LicenseContext.Consumer,null,(function(license){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiPopover,{id:"integrations-menu",button:button,isOpen:_this2.state.isPopoverOpen,closePopover:_this2.closePopover,panelPaddingSize:"none",anchorPosition:"downRight"},_react.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:[{id:0,items:_this2.getPanelItems(license===null||license===void 0?void 0:license.getFeature("ml").isAvailable)}]})),_react.default.createElement(_MachineLearningFlyout.MachineLearningFlyout,{isOpen:_this2.state.activeFlyout==="ML",onClose:_this2.closeFlyouts,urlParams:_this2.props.urlParams}),_react.default.createElement(_WatcherFlyout.WatcherFlyout,{isOpen:_this2.state.activeFlyout==="Watcher",onClose:_this2.closeFlyouts,urlParams:_this2.props.urlParams}))}))}}]);return ServiceIntegrations}(_react.default.Component);exports.ServiceIntegrations=ServiceIntegrations;_defineProperty(ServiceIntegrations,"contextType",_ApmPluginContext.ApmPluginContext)},4399:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.MachineLearningFlyout=void 0;var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _public=__webpack_require__(16);var _ml=__webpack_require__(849);var _MLJobLink=__webpack_require__(846);var _view=__webpack_require__(4400);var _ApmPluginContext=__webpack_require__(450);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MachineLearningFlyout=function(_Component){_inherits(MachineLearningFlyout,_Component);function MachineLearningFlyout(){var _getPrototypeOf2;var _this;_classCallCheck(this,MachineLearningFlyout);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(MachineLearningFlyout)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isCreatingJob:false});_defineProperty(_assertThisInitialized(_this),"onClickCreate",(function _callee(_ref){var transactionType,http,serviceName,res,didSucceed;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:transactionType=_ref.transactionType;_this.setState({isCreatingJob:true});_context.prev=2;http=_this.context.core.http;serviceName=_this.props.urlParams.serviceName;if(serviceName){_context.next=7;break}throw new Error("Service name is required to create this ML job");case 7:_context.next=9;return regeneratorRuntime.awrap((0,_ml.startMLJob)({http:http,serviceName:serviceName,transactionType:transactionType}));case 9:res=_context.sent;didSucceed=res.datafeeds[0].success&&res.jobs[0].success;if(didSucceed){_context.next=13;break}throw new Error("Creating ML job failed");case 13:_this.addSuccessToast({transactionType:transactionType});_context.next=19;break;case 16:_context.prev=16;_context.t0=_context["catch"](2);_this.addErrorToast();case 19:_this.setState({isCreatingJob:false});_this.props.onClose();case 21:case"end":return _context.stop()}}}),null,null,[[2,16]])}));_defineProperty(_assertThisInitialized(_this),"addErrorToast",(function(){var core=_this.context;var urlParams=_this.props.urlParams;var serviceName=urlParams.serviceName;if(!serviceName){return}core.notifications.toasts.addWarning({title:_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreationFailedNotificationTitle",{defaultMessage:"Job creation failed"}),text:(0,_public.toMountPoint)(_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreationFailedNotificationText",{defaultMessage:"Your current license may not allow for creating machine learning jobs, or this job may already exist."})))})}));_defineProperty(_assertThisInitialized(_this),"addSuccessToast",(function(_ref2){var transactionType=_ref2.transactionType;var core=_this.context.core;var urlParams=_this.props.urlParams;var serviceName=urlParams.serviceName;if(!serviceName){return}core.notifications.toasts.addSuccess({title:_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreatedNotificationTitle",{defaultMessage:"Job successfully created"}),text:(0,_public.toMountPoint)(_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreatedNotificationText",{defaultMessage:"The analysis is now running for {serviceName} ({transactionType}). It might take a while before results are added to the response times graph.",values:{serviceName:serviceName,transactionType:transactionType}})," ",_react.default.createElement(_ApmPluginContext.ApmPluginContext.Provider,{value:_this.context},_react.default.createElement(_MLJobLink.MLJobLink,{serviceName:serviceName,transactionType:transactionType},_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreatedNotificationText.viewJobLinkText",{defaultMessage:"View job"})))))})}));return _this}_createClass(MachineLearningFlyout,[{key:"render",value:function render(){var _this$props=this.props,isOpen=_this$props.isOpen,onClose=_this$props.onClose,urlParams=_this$props.urlParams;var serviceName=urlParams.serviceName;var isCreatingJob=this.state.isCreatingJob;if(!isOpen||!serviceName){return null}return _react.default.createElement(_view.MachineLearningFlyoutView,{isCreatingJob:isCreatingJob,onClickCreate:this.onClickCreate,onClose:onClose,urlParams:urlParams})}}]);return MachineLearningFlyout}(_react.Component);exports.MachineLearningFlyout=MachineLearningFlyout;_defineProperty(MachineLearningFlyout,"contextType",_ApmPluginContext.ApmPluginContext)},4400:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MachineLearningFlyoutView=MachineLearningFlyoutView;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=__webpack_require__(4);var _react2=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _useFetcher2=__webpack_require__(54);var _ml=__webpack_require__(849);var _MLJobLink=__webpack_require__(846);var _MLLink=__webpack_require__(1528);var _TransactionSelect=__webpack_require__(4401);var _useServiceTransactionTypes=__webpack_require__(1533);var _useApmPluginContext=__webpack_require__(80);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function MachineLearningFlyoutView(_ref){var isCreatingJob=_ref.isCreatingJob,onClickCreate=_ref.onClickCreate,onClose=_ref.onClose,urlParams=_ref.urlParams;var serviceName=urlParams.serviceName;var transactionTypes=(0,_useServiceTransactionTypes.useServiceTransactionTypes)(urlParams);var _useState=(0,_react2.useState)(undefined),_useState2=_slicedToArray(_useState,2),selectedTransactionType=_useState2[0],setSelectedTransactionType=_useState2[1];var http=(0,_useApmPluginContext.useApmPluginContext)().core.http;var _useFetcher=(0,_useFetcher2.useFetcher)((function(){if(serviceName&&selectedTransactionType){return(0,_ml.getHasMLJob)({serviceName:serviceName,transactionType:selectedTransactionType,http:http})}}),[serviceName,selectedTransactionType,http]),_useFetcher$data=_useFetcher.data,hasMLJob=_useFetcher$data===void 0?false:_useFetcher$data,status=_useFetcher.status;(0,_react2.useEffect)((function(){setSelectedTransactionType(transactionTypes[0])}),[transactionTypes]);if(!serviceName||!selectedTransactionType||(0,_lodash.isEmpty)(transactionTypes)){return null}var isLoadingMLJob=status===_useFetcher2.FETCH_STATUS.LOADING;return _react2.default.createElement(_eui.EuiFlyout,{onClose:onClose,size:"s"},_react2.default.createElement(_eui.EuiFlyoutHeader,null,_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.enableAnomalyDetectionTitle",{defaultMessage:"Enable anomaly detection"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"})),_react2.default.createElement(_eui.EuiFlyoutBody,null,hasMLJob&&_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.callout.jobExistsTitle",{defaultMessage:"Job already exists"}),color:"success",iconType:"check"},_react2.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.callout.jobExistsDescription",{defaultMessage:"There is currently a job running for {serviceName} ({transactionType}).",values:{serviceName:serviceName,transactionType:selectedTransactionType}})," ",_react2.default.createElement(_MLJobLink.MLJobLink,{serviceName:serviceName,transactionType:selectedTransactionType},_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.callout.jobExistsDescription.viewJobLinkText",{defaultMessage:"View existing job"})))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"})),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.apm.serviceDetails.enableAnomalyDetectionPanel.createMLJobDescription",defaultMessage:"Here you can create a machine learning job to calculate anomaly scores on durations for APM transactions within the {serviceName} service. Once enabled, {transactionDurationGraphText} will show the expected bounds and annotate the graph once the anomaly score is >=75.",values:{serviceName:serviceName,transactionDurationGraphText:_react2.default.createElement("b",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.createMLJobDescription.transactionDurationGraphText",{defaultMessage:"the transaction duration graph"}))}})),_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.apm.serviceDetails.enableAnomalyDetectionPanel.manageMLJobDescription",defaultMessage:"Jobs can be created for each service + transaction type combination. Once a job is created, you can manage it and see more details in the {mlJobsPageLink}.",values:{mlJobsPageLink:_react2.default.createElement(_MLLink.MLLink,null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.manageMLJobDescription.mlJobsPageLinkText",{defaultMessage:"Machine Learning jobs management page"}))}})," ",_react2.default.createElement("em",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.manageMLJobDescription.noteText",{defaultMessage:"Note: It might take a few minutes for the job to begin calculating results."})))),_react2.default.createElement(_eui.EuiSpacer,null)),_react2.default.createElement(_eui.EuiFlyoutFooter,null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,null,transactionTypes.length>1?_react2.default.createElement(_TransactionSelect.TransactionSelect,{selectedTransactionType:selectedTransactionType,transactionTypes:transactionTypes,onChange:function onChange(value){setSelectedTransactionType(value)}}):null),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiButton,{onClick:function onClick(){return onClickCreate({transactionType:selectedTransactionType})},fill:true,disabled:isCreatingJob||hasMLJob||isLoadingMLJob},_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.createNewJobButtonLabel",{defaultMessage:"Create new job"})))))))}},4401:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionSelect=TransactionSelect;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TransactionSelect(_ref){var transactionTypes=_ref.transactionTypes,onChange=_ref.onChange,selectedTransactionType=_ref.selectedTransactionType;return _react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.selectTransactionTypeLabel",{defaultMessage:"Select a transaction type for this job"})},_react.default.createElement(_eui.EuiSuperSelect,{valueOfSelected:selectedTransactionType,onChange:onChange,options:transactionTypes.map((function(transactionType){return{value:transactionType,inputDisplay:transactionType,dropdownDisplay:_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,null,transactionType)))}}))}))}},4402:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.WatcherFlyout=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=__webpack_require__(4);var _lodash=__webpack_require__(3);var _momentTimezone=_interopRequireDefault(__webpack_require__(35));var _react2=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _public=__webpack_require__(16);var _KibanaLink=__webpack_require__(851);var _createErrorGroupWatch=__webpack_require__(4403);var _ElasticDocsLink=__webpack_require__(583);var _ApmPluginContext=__webpack_require__(450);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SmallInput=_styledComponents.default.div.withConfig({displayName:"SmallInput",componentId:"dlifd9-0"})([".euiFormRow{max-width:85px;}.euiFormHelpText{width:200px;}"]);var WatcherFlyout=function(_Component){_inherits(WatcherFlyout,_Component);function WatcherFlyout(){var _getPrototypeOf2;var _this;_classCallCheck(this,WatcherFlyout);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(WatcherFlyout)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"context",void 0);_defineProperty(_assertThisInitialized(_this),"state",{schedule:"daily",threshold:10,actions:{slack:false,email:false},interval:{value:10,unit:"m"},daily:"08:00",emails:"",slackUrl:""});_defineProperty(_assertThisInitialized(_this),"onChangeSchedule",(function(schedule){_this.setState({schedule:schedule})}));_defineProperty(_assertThisInitialized(_this),"onChangeThreshold",(function(event){_this.setState({threshold:parseInt(event.target.value,10)})}));_defineProperty(_assertThisInitialized(_this),"onChangeDailyUnit",(function(event){_this.setState({daily:event.target.value})}));_defineProperty(_assertThisInitialized(_this),"onChangeIntervalValue",(function(event){_this.setState({interval:{value:parseInt(event.target.value,10),unit:_this.state.interval.unit}})}));_defineProperty(_assertThisInitialized(_this),"onChangeIntervalUnit",(function(event){_this.setState({interval:{value:_this.state.interval.value,unit:event.target.value}})}));_defineProperty(_assertThisInitialized(_this),"onChangeAction",(function(actionName){_this.setState({actions:_objectSpread({},_this.state.actions,_defineProperty({},actionName,!_this.state.actions[actionName]))})}));_defineProperty(_assertThisInitialized(_this),"onChangeEmails",(function(event){_this.setState({emails:event.target.value})}));_defineProperty(_assertThisInitialized(_this),"onChangeSlackUrl",(function(event){_this.setState({slackUrl:event.target.value})}));_defineProperty(_assertThisInitialized(_this),"createWatch",(function(_ref){var indexPatternTitle=_ref.indexPatternTitle;return function(){var serviceName=_this.props.urlParams.serviceName;var core=_this.context.core;if(!serviceName){return}var emails=_this.state.actions.email?_this.state.emails.split(",").map((function(email){return email.trim()})).filter((function(email){return!!email})):[];var slackUrl=_this.state.actions.slack?_this.state.slackUrl:"";var schedule=_this.state.schedule==="interval"?{interval:"".concat(_this.state.interval.value).concat(_this.state.interval.unit)}:{daily:{at:"".concat(_this.state.daily)}};var timeRange=_this.state.schedule==="interval"?{value:_this.state.interval.value,unit:_this.state.interval.unit}:{value:24,unit:"h"};return(0,_createErrorGroupWatch.createErrorGroupWatch)({http:core.http,emails:emails,schedule:schedule,serviceName:serviceName,slackUrl:slackUrl,threshold:_this.state.threshold,timeRange:timeRange,apmIndexPatternTitle:indexPatternTitle}).then((function(id){_this.props.onClose();_this.addSuccessToast(id)})).catch((function(e){console.error(e);_this.addErrorToast()}))}}));_defineProperty(_assertThisInitialized(_this),"addErrorToast",(function(){var core=_this.context.core;core.notifications.toasts.addWarning({title:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreationFailedNotificationTitle",{defaultMessage:"Watch creation failed"}),text:(0,_public.toMountPoint)(_react2.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreationFailedNotificationText",{defaultMessage:"Make sure your user has permission to create watches."})))})}));_defineProperty(_assertThisInitialized(_this),"addSuccessToast",(function(id){var core=_this.context.core;core.notifications.toasts.addSuccess({title:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreatedNotificationTitle",{defaultMessage:"New watch created!"}),text:(0,_public.toMountPoint)(_react2.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreatedNotificationText",{defaultMessage:"The watch is now ready and will send error reports for {serviceName}.",values:{serviceName:_this.props.urlParams.serviceName}})," ",_react2.default.createElement(_ApmPluginContext.ApmPluginContext.Provider,{value:_this.context},_react2.default.createElement(_KibanaLink.KibanaLink,{path:"/management/elasticsearch/watcher/watches/watch/".concat(id)},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreatedNotificationText.viewWatchLinkText",{defaultMessage:"View watch"})))))})}));return _this}_createClass(WatcherFlyout,[{key:"render",value:function render(){var _this2=this;if(!this.props.isOpen){return null}var dailyTime=this.state.daily;var inputTime="".concat(dailyTime,"Z");var inputFormat="HH:mmZ";var dailyTimeFormatted=(0,_momentTimezone.default)(inputTime,inputFormat).format("HH:mm");var dailyTime12HourFormatted=(0,_momentTimezone.default)(inputTime,inputFormat).format("hh:mm A (z)");var intervalHours=(0,_lodash.range)(24).map((function(i){var hour=(0,_lodash.padLeft)(i.toString(),2,"0");return{value:"".concat(hour,":00"),text:"".concat(hour,":00 UTC")}}));var flyoutBody=_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.apm.serviceDetails.enableErrorReportsPanel.formDescription",defaultMessage:"This form will assist in creating a Watch that can notify you of error occurrences from this service. To learn more about Watcher, please read our {documentationLink}.",values:{documentationLink:_react2.default.createElement(_ElasticDocsLink.ElasticDocsLink,{target:"_blank",section:"/x-pack",path:"/watcher-getting-started.html"},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.formDescription.documentationLinkText",{defaultMessage:"documentation"}))}})),_react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement("h4",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.conditionTitle",{defaultMessage:"Condition"})),_react2.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.occurrencesThresholdLabel",{defaultMessage:"Occurrences threshold per error group"}),helpText:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.occurrencesThresholdHelpText",{defaultMessage:"Threshold to be met for error group to be included in report."}),compressed:true},_react2.default.createElement(_eui.EuiFieldNumber,{icon:"number",min:1,value:this.state.threshold,onChange:this.onChangeThreshold})),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement("h4",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.triggerScheduleTitle",{defaultMessage:"Trigger schedule"})),_react2.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.triggerScheduleDescription",{defaultMessage:"Choose the time interval for the report, when the threshold is exceeded."})),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiRadio,{id:"daily",label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.dailyReportRadioButtonLabel",{defaultMessage:"Daily report"}),onChange:function onChange(){return _this2.onChangeSchedule("daily")},checked:this.state.schedule==="daily"}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFormRow,{helpText:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.dailyReportHelpText",{defaultMessage:"The daily report will be sent at {dailyTimeFormatted} / {dailyTime12HourFormatted}.",values:{dailyTimeFormatted:dailyTimeFormatted,dailyTime12HourFormatted:dailyTime12HourFormatted}}),compressed:true},_react2.default.createElement(_eui.EuiSelect,{value:dailyTime,onChange:this.onChangeDailyUnit,options:intervalHours,disabled:this.state.schedule!=="daily"})),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiRadio,{id:"interval",label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.intervalRadioButtonLabel",{defaultMessage:"Interval"}),onChange:function onChange(){return _this2.onChangeSchedule("interval")},checked:this.state.schedule==="interval"}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(SmallInput,null,_react2.default.createElement(_eui.EuiFormRow,{helpText:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.intervalHelpText",{defaultMessage:"Time interval between reports."}),compressed:true},_react2.default.createElement(_eui.EuiFieldNumber,{compressed:true,icon:"clock",min:1,value:this.state.interval.value,onChange:this.onChangeIntervalValue,disabled:this.state.schedule!=="interval"})))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{compressed:true},_react2.default.createElement(_eui.EuiSelect,{value:this.state.interval.unit,onChange:this.onChangeIntervalUnit,compressed:true,options:[{value:"m",text:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.intervalUnit.minsLabel",{defaultMessage:"mins"})},{value:"h",text:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.intervalUnit.hrsLabel",{defaultMessage:"hrs"})}],disabled:this.state.schedule!=="interval"})))),_react2.default.createElement("h4",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.actionsTitle",{defaultMessage:"Actions"})),_react2.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.actionsDescription",{defaultMessage:"Reports can be sent by email or posted to a Slack channel. Each report will include the top 10 errors sorted by occurrence."})),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiSwitch,{label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.sendEmailLabel",{defaultMessage:"Send email"}),checked:this.state.actions.email,onChange:function onChange(){return _this2.onChangeAction("email")}}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),this.state.actions.email&&_react2.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.recipientsLabel",{defaultMessage:"Recipients (separated with comma)"}),compressed:true,helpText:_react2.default.createElement("span",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.apm.serviceDetails.enableErrorReportsPanel.recipientsHelpText",defaultMessage:"If you have not configured email, please see the {documentationLink}.",values:{documentationLink:_react2.default.createElement(_ElasticDocsLink.ElasticDocsLink,{target:"_blank",section:"/x-pack",path:"/actions-email.html#configuring-email"},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.recipientsHelpText.documentationLinkText",{defaultMessage:"documentation"}))}}))},_react2.default.createElement(_eui.EuiFieldText,{compressed:true,icon:"user",value:this.state.emails,onChange:this.onChangeEmails})),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiSwitch,{label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.sendSlackNotificationLabel",{defaultMessage:"Send Slack notification"}),checked:this.state.actions.slack,onChange:function onChange(){return _this2.onChangeAction("slack")}}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),this.state.actions.slack&&_react2.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.slackWebhookURLLabel",{defaultMessage:"Slack Webhook URL"}),compressed:true,helpText:_react2.default.createElement("span",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.apm.serviceDetails.enableErrorReportsPanel.slackWebhookURLHelpText",defaultMessage:"To get a Slack webhook, please see the {documentationLink}.",values:{documentationLink:_react2.default.createElement(_eui.EuiLink,{target:"_blank",href:"https://get.slack.help/hc/en-us/articles/115005265063-Incoming-WebHooks-for-Slack"},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.slackWebhookURLHelpText.documentationLinkText",{defaultMessage:"documentation"}))}}))},_react2.default.createElement(_eui.EuiFieldText,{compressed:true,icon:"link",value:this.state.slackUrl,onChange:this.onChangeSlackUrl}))));return _react2.default.createElement(_eui.EuiFlyout,{onClose:this.props.onClose,size:"s"},_react2.default.createElement(_eui.EuiFlyoutHeader,null,_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.enableErrorReportsTitle",{defaultMessage:"Enable error reports"})))),_react2.default.createElement(_eui.EuiFlyoutBody,null,flyoutBody),_react2.default.createElement(_eui.EuiFlyoutFooter,null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_ApmPluginContext.ApmPluginContext.Consumer,null,(function(_ref2){var config=_ref2.config;return _react2.default.createElement(_eui.EuiButton,{onClick:_this2.createWatch(config),fill:true,disabled:!_this2.state.actions.email&&!_this2.state.actions.slack},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.createWatchButtonLabel",{defaultMessage:"Create watch"}))}))))))}}]);return WatcherFlyout}(_react2.Component);exports.WatcherFlyout=WatcherFlyout;_defineProperty(WatcherFlyout,"contextType",_ApmPluginContext.ApmPluginContext)},4403:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createErrorGroupWatch=createErrorGroupWatch;var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(3);var _url=_interopRequireDefault(__webpack_require__(71));var _uuid=_interopRequireDefault(__webpack_require__(86));var _elasticsearch_fieldnames=__webpack_require__(170);var _watcher=__webpack_require__(4404);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getSlackPathUrl(slackUrl){if(slackUrl){var _url$parse=_url.default.parse(slackUrl),path=_url$parse.path;return path}}function createErrorGroupWatch(_ref){var http,_ref$emails,emails,schedule,serviceName,slackUrl,threshold,timeRange,apmIndexPatternTitle,id,slackUrlPath,emailTemplate,slackTemplate,actions,body;return regeneratorRuntime.async((function createErrorGroupWatch$(_context){while(1){switch(_context.prev=_context.next){case 0:http=_ref.http,_ref$emails=_ref.emails,emails=_ref$emails===void 0?[]:_ref$emails,schedule=_ref.schedule,serviceName=_ref.serviceName,slackUrl=_ref.slackUrl,threshold=_ref.threshold,timeRange=_ref.timeRange,apmIndexPatternTitle=_ref.apmIndexPatternTitle;id="apm-".concat(_uuid.default.v4());slackUrlPath=getSlackPathUrl(slackUrl);emailTemplate=_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.emailTemplateText",{defaultMessage:"Your service {serviceName} has error groups which exceeds {threshold} occurrences within {timeRange}{br}"+"{br}"+"{errorGroupsBuckets}{br}"+"{errorLogMessage}{br}"+"{errorCulprit}N/A{slashErrorCulprit}{br}"+"{docCountParam} occurrences{br}"+"{slashErrorGroupsBucket}",values:{serviceName:'"{{ctx.metadata.serviceName}}"',threshold:"{{ctx.metadata.threshold}}",timeRange:'"{{ctx.metadata.timeRangeValue}}{{ctx.metadata.timeRangeUnit}}"',errorGroupsBuckets:"{{#ctx.payload.aggregations.error_groups.buckets}}",errorLogMessage:"<strong>{{sample.hits.hits.0._source.error.log.message}}{{^sample.hits.hits.0._source.error.log.message}}{{sample.hits.hits.0._source.error.exception.0.message}}{{/sample.hits.hits.0._source.error.log.message}}</strong>",errorCulprit:"{{sample.hits.hits.0._source.error.culprit}}{{^sample.hits.hits.0._source.error.culprit}}",slashErrorCulprit:"{{/sample.hits.hits.0._source.error.culprit}}",docCountParam:"{{doc_count}}",slashErrorGroupsBucket:"{{/ctx.payload.aggregations.error_groups.buckets}}",br:"<br/>"}});slackTemplate=_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.slackTemplateText",{defaultMessage:"Your service {serviceName} has error groups which exceeds {threshold} occurrences within {timeRange}\n{errorGroupsBuckets}\n{errorLogMessage}\n{errorCulprit}N/A{slashErrorCulprit}\n{docCountParam} occurrences\n{slashErrorGroupsBucket}",values:{serviceName:'"{{ctx.metadata.serviceName}}"',threshold:"{{ctx.metadata.threshold}}",timeRange:'"{{ctx.metadata.timeRangeValue}}{{ctx.metadata.timeRangeUnit}}"',errorGroupsBuckets:"{{#ctx.payload.aggregations.error_groups.buckets}}",errorLogMessage:">*{{sample.hits.hits.0._source.error.log.message}}{{^sample.hits.hits.0._source.error.log.message}}{{sample.hits.hits.0._source.error.exception.0.message}}{{/sample.hits.hits.0._source.error.log.message}}*",errorCulprit:">{{#sample.hits.hits.0._source.error.culprit}}`{{sample.hits.hits.0._source.error.culprit}}`{{/sample.hits.hits.0._source.error.culprit}}{{^sample.hits.hits.0._source.error.culprit}}",slashErrorCulprit:"{{/sample.hits.hits.0._source.error.culprit}}",docCountParam:">{{doc_count}}",slashErrorGroupsBucket:"{{/ctx.payload.aggregations.error_groups.buckets}}"}});actions={log_error:{logging:{text:emailTemplate}}};body={metadata:{emails:emails,trigger:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.triggerText",{defaultMessage:"This value must be changed in trigger section"}),serviceName:serviceName,threshold:threshold,timeRangeValue:timeRange.value,timeRangeUnit:timeRange.unit,slackUrlPath:slackUrlPath},trigger:{schedule:schedule},input:{search:{request:{indices:[apmIndexPatternTitle],body:{size:0,query:{bool:{filter:[{term:_defineProperty({},_elasticsearch_fieldnames.SERVICE_NAME,"{{ctx.metadata.serviceName}}")},{term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"error")},{range:{"@timestamp":{gte:"now-{{ctx.metadata.timeRangeValue}}{{ctx.metadata.timeRangeUnit}}"}}}]}},aggs:{error_groups:{terms:{min_doc_count:"{{ctx.metadata.threshold}}",field:_elasticsearch_fieldnames.ERROR_GROUP_ID,size:10,order:{_count:"desc"}},aggs:{sample:{top_hits:{_source:[_elasticsearch_fieldnames.ERROR_LOG_MESSAGE,_elasticsearch_fieldnames.ERROR_EXC_MESSAGE,_elasticsearch_fieldnames.ERROR_EXC_HANDLED,_elasticsearch_fieldnames.ERROR_CULPRIT,_elasticsearch_fieldnames.ERROR_GROUP_ID,"@timestamp"],sort:[{"@timestamp":"desc"}],size:1}}}}}}}}},condition:{script:{source:"return ctx.payload.aggregations.error_groups.buckets.length > 0"}},actions:actions};if(slackUrlPath){body.actions.slack_webhook={webhook:{scheme:"https",host:"hooks.slack.com",port:443,method:"POST",path:"{{ctx.metadata.slackUrlPath}}",headers:{"Content-Type":"application/json"},body:"__json__::".concat(JSON.stringify({text:slackTemplate}))}}}if(!(0,_lodash.isEmpty)(emails)){body.actions.email={email:{to:"{{#join}}ctx.metadata.emails{{/join}}",subject:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.emailSubjectText",{defaultMessage:"{serviceName} has error groups which exceeds the threshold",values:{serviceName:'"{{ctx.metadata.serviceName}}"'}}),body:{html:emailTemplate}}}}_context.next=11;return regeneratorRuntime.awrap((0,_watcher.createWatch)({http:http,id:id,watch:body}));case 11:return _context.abrupt("return",id);case 12:case"end":return _context.stop()}}}))}},4404:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createWatch=createWatch;var _callApi=__webpack_require__(365);function createWatch(_ref){var id,watch,http;return regeneratorRuntime.async((function createWatch$(_context){while(1){switch(_context.prev=_context.next){case 0:id=_ref.id,watch=_ref.watch,http=_ref.http;return _context.abrupt("return",(0,_callApi.callApi)(http,{method:"PUT",pathname:"/api/watcher/watch/".concat(id),body:{type:"json",id:id,watch:watch}}));case 2:case"end":return _context.stop()}}}))}},4405:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionDetails=TransactionDetails;var _eui=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _useTransactionCharts2=__webpack_require__(1526);var _useTransactionDistribution=__webpack_require__(4406);var _useWaterfall2=__webpack_require__(4407);var _TransactionCharts=__webpack_require__(845);var _ApmHeader=__webpack_require__(451);var _Distribution=__webpack_require__(4409);var _WaterfallWithSummmary=__webpack_require__(4410);var _useLocation=__webpack_require__(156);var _useUrlParams2=__webpack_require__(45);var _useFetcher=__webpack_require__(54);var _TransactionBreakdown=__webpack_require__(1531);var _ChartsSyncContext=__webpack_require__(456);var _public=__webpack_require__(238);var _typings=__webpack_require__(295);var _LocalUIFilters=__webpack_require__(296);var _HeightRetainer=__webpack_require__(1514);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function TransactionDetails(){var _distributionData$buc;var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var _useTransactionDistri=(0,_useTransactionDistribution.useTransactionDistribution)(urlParams),distributionData=_useTransactionDistri.data,distributionStatus=_useTransactionDistri.status;var _useTransactionCharts=(0,_useTransactionCharts2.useTransactionCharts)(),transactionChartsData=_useTransactionCharts.data;var _useWaterfall=(0,_useWaterfall2.useWaterfall)(urlParams),waterfall=_useWaterfall.waterfall,exceedsMax=_useWaterfall.exceedsMax,waterfallStatus=_useWaterfall.status;var transactionName=urlParams.transactionName,transactionType=urlParams.transactionType,serviceName=urlParams.serviceName;(0,_public.useTrackPageview)({app:"apm",path:"transaction_details"});(0,_public.useTrackPageview)({app:"apm",path:"transaction_details",delay:15e3});var localUIFiltersConfig=(0,_react.useMemo)((function(){var config={filterNames:["transactionResult","serviceVersion"],projection:_typings.PROJECTION.TRANSACTIONS,params:{transactionName:transactionName,transactionType:transactionType,serviceName:serviceName}};return config}),[transactionName,transactionType,serviceName]);var bucketIndex=distributionData.buckets.findIndex((function(bucket){return bucket.samples.some((function(sample){return sample.transactionId===urlParams.transactionId&&sample.traceId===urlParams.traceId}))}));var traceSamples=(_distributionData$buc=distributionData.buckets[bucketIndex])===null||_distributionData$buc===void 0?void 0:_distributionData$buc.samples;return _react.default.createElement("div",null,_react.default.createElement(_ApmHeader.ApmHeader,null,_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,transactionName))),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localUIFiltersConfig)),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_ChartsSyncContext.ChartsSyncContextProvider,null,_react.default.createElement(_TransactionBreakdown.TransactionBreakdown,null),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_TransactionCharts.TransactionCharts,{hasMLJob:false,charts:transactionChartsData,urlParams:urlParams,location:location})),_react.default.createElement(_eui.EuiHorizontalRule,{size:"full",margin:"l"}),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_Distribution.TransactionDistribution,{distribution:distributionData,isLoading:distributionStatus===_useFetcher.FETCH_STATUS.LOADING,urlParams:urlParams,bucketIndex:bucketIndex})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_HeightRetainer.HeightRetainer,null,_react.default.createElement(_WaterfallWithSummmary.WaterfallWithSummmary,{location:location,urlParams:urlParams,waterfall:waterfall,isLoading:waterfallStatus===_useFetcher.FETCH_STATUS.LOADING,exceedsMax:exceedsMax,traceSamples:traceSamples})))))}},4406:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useTransactionDistribution=useTransactionDistribution;var _useFetcher2=__webpack_require__(54);var _UrlParamsContext=__webpack_require__(452);var INITIAL_DATA={buckets:[],noHits:true,bucketSize:0};function useTransactionDistribution(urlParams){var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,transactionType=urlParams.transactionType,transactionId=urlParams.transactionId,traceId=urlParams.traceId,transactionName=urlParams.transactionName;var uiFilters=(0,_UrlParamsContext.useUiFilters)(urlParams);var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end&&transactionType&&transactionName){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_groups/distribution",params:{path:{serviceName:serviceName},query:{start:start,end:end,transactionType:transactionType,transactionName:transactionName,transactionId:transactionId,traceId:traceId,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,transactionType,transactionName,uiFilters]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?INITIAL_DATA:_useFetcher$data,status=_useFetcher.status,error=_useFetcher.error;return{data:data,status:status,error:error}}},4407:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useWaterfall=useWaterfall;var _react=__webpack_require__(0);var _useFetcher2=__webpack_require__(54);var _waterfall_helpers=__webpack_require__(4408);var INITIAL_DATA={root:undefined,trace:{items:[],exceedsMax:false,errorDocs:[]},errorsPerTransaction:{}};function useWaterfall(urlParams){var traceId=urlParams.traceId,start=urlParams.start,end=urlParams.end,transactionId=urlParams.transactionId;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(traceId&&start&&end){return callApmApi({pathname:"/api/apm/traces/{traceId}",params:{path:{traceId:traceId},query:{start:start,end:end}}})}}),[traceId,start,end]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?INITIAL_DATA:_useFetcher$data,status=_useFetcher.status,error=_useFetcher.error;var waterfall=(0,_react.useMemo)((function(){return(0,_waterfall_helpers.getWaterfall)(data,transactionId)}),[data,transactionId]);return{waterfall:waterfall,status:status,error:error,exceedsMax:data.trace.exceedsMax}}},4408:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getClockSkew=getClockSkew;exports.getOrderedWaterfallItems=getOrderedWaterfallItems;exports.getWaterfall=getWaterfall;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _lodash=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ROOT_ID="root";function getTransactionItem(transaction){var _transaction$parent;return{docType:"transaction",doc:transaction,id:transaction.transaction.id,parentId:(_transaction$parent=transaction.parent)===null||_transaction$parent===void 0?void 0:_transaction$parent.id,duration:transaction.transaction.duration.us,offset:0,skew:0}}function getSpanItem(span){var _span$parent;return{docType:"span",doc:span,id:span.span.id,parentId:(_span$parent=span.parent)===null||_span$parent===void 0?void 0:_span$parent.id,duration:span.span.duration.us,offset:0,skew:0}}function getErrorItem(error,items,entryWaterfallTransaction){var _ref;var entryTimestamp=(_ref=entryWaterfallTransaction===null||entryWaterfallTransaction===void 0?void 0:entryWaterfallTransaction.doc.timestamp.us)!==null&&_ref!==void 0?_ref:0;var parent=items.find((function(waterfallItem){var _error$parent;return waterfallItem.id===((_error$parent=error.parent)===null||_error$parent===void 0?void 0:_error$parent.id)}));var errorItem={docType:"error",doc:error,id:error.error.id,parent:parent,parentId:parent===null||parent===void 0?void 0:parent.id,offset:error.timestamp.us-entryTimestamp,skew:0,duration:0};return _objectSpread({},errorItem,{skew:getClockSkew(errorItem,parent)})}function getClockSkew(item,parentItem){if(!parentItem){return 0}switch(item.docType){case"error":case"span":return parentItem.skew;case"transaction":{var parentStart=parentItem.doc.timestamp.us+parentItem.skew;var offsetStart=parentStart-item.doc.timestamp.us;if(offsetStart>0){var latency=Math.max(parentItem.duration-item.duration,0)/2;return offsetStart+latency}return 0}}}function getOrderedWaterfallItems(childrenByParentId,entryWaterfallTransaction){if(!entryWaterfallTransaction){return[]}var entryTimestamp=entryWaterfallTransaction.doc.timestamp.us;var visitedWaterfallItemSet=new Set;function getSortedChildren(item,parentItem){if(visitedWaterfallItemSet.has(item)){return[]}visitedWaterfallItemSet.add(item);var children=(0,_lodash.sortBy)(childrenByParentId[item.id]||[],"doc.timestamp.us");item.parent=parentItem;item.offset=item.doc.timestamp.us-entryTimestamp;item.skew=getClockSkew(item,parentItem);var deepChildren=(0,_lodash.flatten)(children.map((function(child){return getSortedChildren(child,item)})));return[item].concat(_toConsumableArray(deepChildren))}return getSortedChildren(entryWaterfallTransaction)}function getRootTransaction(childrenByParentId){var item=(0,_lodash.first)(childrenByParentId.root);if(item&&item.docType==="transaction"){return item.doc}}function getServiceColors(waterfallItems){var services=(0,_lodash.uniq)(waterfallItems.map((function(item){return item.doc.service.name})));var assignedColors=[_eui_theme_light.default.euiColorVis1,_eui_theme_light.default.euiColorVis0,_eui_theme_light.default.euiColorVis3,_eui_theme_light.default.euiColorVis2,_eui_theme_light.default.euiColorVis6,_eui_theme_light.default.euiColorVis7,_eui_theme_light.default.euiColorVis5];return(0,_lodash.zipObject)(services,assignedColors)}var getWaterfallDuration=function getWaterfallDuration(waterfallItems){return Math.max.apply(Math,_toConsumableArray(waterfallItems.map((function(item){return item.offset+item.skew+item.duration}))).concat([0]))};var getWaterfallItems=function getWaterfallItems(items){return items.map((function(item){var docType=item.processor.event;switch(docType){case"span":return getSpanItem(item);case"transaction":return getTransactionItem(item)}}))};var getChildrenGroupedByParentId=function getChildrenGroupedByParentId(waterfallItems){return(0,_lodash.groupBy)(waterfallItems,(function(item){return item.parentId?item.parentId:ROOT_ID}))};var getEntryWaterfallTransaction=function getEntryWaterfallTransaction(entryTransactionId,waterfallItems){return waterfallItems.find((function(item){return item.docType==="transaction"&&item.id===entryTransactionId}))};function isInEntryTransaction(parentIdLookup,entryTransactionId,currentId){if(currentId===entryTransactionId){return true}var parentId=parentIdLookup.get(currentId);if(parentId){return isInEntryTransaction(parentIdLookup,entryTransactionId,parentId)}return false}function getWaterfallErrors(errorDocs,items,entryWaterfallTransaction){var errorItems=errorDocs.map((function(errorDoc){return getErrorItem(errorDoc,items,entryWaterfallTransaction)}));if(!entryWaterfallTransaction){return errorItems}var parentIdLookup=[].concat(_toConsumableArray(items),_toConsumableArray(errorItems)).reduce((function(map,_ref2){var id=_ref2.id,parentId=_ref2.parentId;map.set(id,parentId!==null&&parentId!==void 0?parentId:ROOT_ID);return map}),new Map);return errorItems.filter((function(errorItem){return isInEntryTransaction(parentIdLookup,entryWaterfallTransaction===null||entryWaterfallTransaction===void 0?void 0:entryWaterfallTransaction.id,errorItem.id)}))}function getWaterfall(_ref3,entryTransactionId){var trace=_ref3.trace,errorsPerTransaction=_ref3.errorsPerTransaction;if((0,_lodash.isEmpty)(trace.items)||!entryTransactionId){return{duration:0,items:[],errorsPerTransaction:errorsPerTransaction,errorsCount:(0,_lodash.sum)(Object.values(errorsPerTransaction)),serviceColors:{},errorItems:[]}}var waterfallItems=getWaterfallItems(trace.items);var childrenByParentId=getChildrenGroupedByParentId(waterfallItems);var entryWaterfallTransaction=getEntryWaterfallTransaction(entryTransactionId,waterfallItems);var items=getOrderedWaterfallItems(childrenByParentId,entryWaterfallTransaction);var errorItems=getWaterfallErrors(trace.errorDocs,items,entryWaterfallTransaction);var rootTransaction=getRootTransaction(childrenByParentId);var duration=getWaterfallDuration(items);var serviceColors=getServiceColors(items);var entryTransaction=entryWaterfallTransaction===null||entryWaterfallTransaction===void 0?void 0:entryWaterfallTransaction.doc;return{entryTransaction:entryTransaction,rootTransaction:rootTransaction,duration:duration,items:items,errorsPerTransaction:errorsPerTransaction,errorsCount:errorItems.length,serviceColors:serviceColors,errorItems:errorItems}}},4409:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFormattedBuckets=getFormattedBuckets;exports.TransactionDistribution=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _d=_interopRequireDefault(__webpack_require__(48));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _formatters=__webpack_require__(85);var _Histogram=_interopRequireDefault(__webpack_require__(1522));var _EmptyMessage=__webpack_require__(453);var _url_helpers=__webpack_require__(95);var _history=__webpack_require__(136);var _LoadingStatePrompt=__webpack_require__(368);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getFormattedBuckets(buckets,bucketSize){if(!buckets){return[]}return buckets.map((function(_ref){var samples=_ref.samples,count=_ref.count,key=_ref.key;return{samples:samples,x0:key,x:key+bucketSize,y:count,style:{cursor:(0,_lodash.isEmpty)(samples)?"default":"pointer"}}}))}var getFormatYShort=function getFormatYShort(transactionType){return function(t){return _i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChart.unitShortLabel",{defaultMessage:"{transCount} {transType, select, request {req.} other {trans.}}",values:{transCount:t,transType:transactionType}})}};var getFormatYLong=function getFormatYLong(transactionType){return function(t){return transactionType==="request"?_i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChart.requestTypeUnitLongLabel",{defaultMessage:"{transCount, plural, =0 {# request} one {# request} other {# requests}}",values:{transCount:t}}):_i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChart.transactionTypeUnitLongLabel",{defaultMessage:"{transCount, plural, =0 {# transaction} one {# transaction} other {# transactions}}",values:{transCount:t}})}};var TransactionDistribution=function TransactionDistribution(props){var distribution=props.distribution,transactionType=props.urlParams.transactionType,isLoading=props.isLoading,bucketIndex=props.bucketIndex;var formatYShort=(0,_react.useCallback)(getFormatYShort(transactionType),[transactionType]);var formatYLong=(0,_react.useCallback)(getFormatYLong(transactionType),[transactionType]);if(!distribution||distribution.noHits){if(isLoading){return _react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null)}return _react.default.createElement(_EmptyMessage.EmptyMessage,{heading:_i18n.i18n.translate("xpack.apm.transactionDetails.notFoundLabel",{defaultMessage:"No transactions were found."})})}var buckets=getFormattedBuckets(distribution.buckets,distribution.bucketSize);var xMax=_d.default.max(buckets,(function(d){return d.x}))||0;var timeFormatter=(0,_formatters.getDurationFormatter)(xMax);return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChartTitle",{defaultMessage:"Transactions duration distribution"})," ",_react.default.createElement(_eui.EuiIconTip,{title:_i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChartTooltip.samplingLabel",{defaultMessage:"Sampling"}),content:_i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChartTooltip.samplingDescription",{defaultMessage:"Each bucket will show a sample transaction. If there's no sample available, it's most likely because of the sampling limit set in the agent configuration."}),position:"top"}))),_react.default.createElement(_Histogram.default,{buckets:buckets,bucketSize:distribution.bucketSize,bucketIndex:bucketIndex,onClick:function onClick(bucket){if(!(0,_lodash.isEmpty)(bucket.samples)){var sample=bucket.samples[0];_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(_history.history.location.search),{transactionId:sample.transactionId,traceId:sample.traceId}))}))}},formatX:function formatX(time){return timeFormatter(time).formatted},formatYShort:formatYShort,formatYLong:formatYLong,verticalLineHover:function verticalLineHover(bucket){return(0,_lodash.isEmpty)(bucket.samples)},backgroundHover:function backgroundHover(bucket){return!(0,_lodash.isEmpty)(bucket.samples)},tooltipHeader:function tooltipHeader(bucket){var xFormatted=timeFormatter(bucket.x);var x0Formatted=timeFormatter(bucket.x0);return"".concat(x0Formatted.value," - ").concat(xFormatted.value," ").concat(xFormatted.unit)},tooltipFooter:function tooltipFooter(bucket){return(0,_lodash.isEmpty)(bucket.samples)&&_i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChart.noSampleTooltip",{defaultMessage:"No sample available for this bucket"})}}))};exports.TransactionDistribution=TransactionDistribution},4410:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WaterfallWithSummmary=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);var _history=__webpack_require__(136);var _url_helpers=__webpack_require__(95);var _LoadingStatePrompt=__webpack_require__(368);var _TransactionSummary=__webpack_require__(1541);var _TransactionActionMenu=__webpack_require__(1543);var _MaybeViewTraceLink=__webpack_require__(4416);var _TransactionTabs=__webpack_require__(4417);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var PaginationContainer=_styledComponents.default.div.withConfig({displayName:"PaginationContainer",componentId:"sc-1qc5zel-0"})(["margin-left:",";display:flex;align-items:center;> span:first-of-type{font-weight:600;}> span:last-of-type{margin-right:",";}"],(0,_variables.px)(_variables.units.quarter),(0,_variables.px)(_variables.units.half));var WaterfallWithSummmary=function WaterfallWithSummmary(_ref){var _waterfall$rootTransa;var urlParams=_ref.urlParams,location=_ref.location,waterfall=_ref.waterfall,exceedsMax=_ref.exceedsMax,isLoading=_ref.isLoading,traceSamples=_ref.traceSamples;var _useState=(0,_react.useState)(0),_useState2=_slicedToArray(_useState,2),sampleActivePage=_useState2[0],setSampleActivePage=_useState2[1];(0,_react.useEffect)((function(){setSampleActivePage(0)}),[traceSamples]);var goToSample=function goToSample(index){setSampleActivePage(index);var sample=traceSamples[index];_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(_history.history.location.search),{transactionId:sample.transactionId,traceId:sample.traceId}))}))};var entryTransaction=waterfall.entryTransaction;if(!entryTransaction){var content=isLoading?_react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null):_react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("div",null,_i18n.i18n.translate("xpack.apm.transactionDetails.traceNotFound",{defaultMessage:"The selected trace cannot be found"})),titleSize:"s"});return _react.default.createElement(_eui.EuiPanel,{paddingSize:"m"},content)}return _react.default.createElement(_eui.EuiPanel,{paddingSize:"m"},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{style:{flexDirection:"row",alignItems:"baseLine"}},_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.apm.transactionDetails.traceSampleTitle",{defaultMessage:"Trace sample"}))),traceSamples&&_react.default.createElement(PaginationContainer,null,_react.default.createElement("span",null,sampleActivePage+1),_react.default.createElement("span",null,"/",traceSamples.length),_react.default.createElement(_eui.EuiPagination,{pageCount:traceSamples.length,activePage:sampleActivePage,onPageClick:goToSample,compressed:true}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_TransactionActionMenu.TransactionActionMenu,{transaction:entryTransaction})),_react.default.createElement(_MaybeViewTraceLink.MaybeViewTraceLink,{transaction:entryTransaction,waterfall:waterfall})))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_TransactionSummary.TransactionSummary,{errorCount:waterfall.errorsCount,totalDuration:(_waterfall$rootTransa=waterfall.rootTransaction)===null||_waterfall$rootTransa===void 0?void 0:_waterfall$rootTransa.transaction.duration.us,transaction:entryTransaction}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_TransactionTabs.TransactionTabs,{transaction:entryTransaction,location:location,urlParams:urlParams,waterfall:waterfall,exceedsMax:exceedsMax}))};exports.WaterfallWithSummmary=WaterfallWithSummmary},4411:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentOfParent=PercentOfParent;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);var _formatters=__webpack_require__(85);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PercentOfParent(_ref){var duration=_ref.duration,totalDuration=_ref.totalDuration,parentType=_ref.parentType;totalDuration=totalDuration||duration;var isOver100=duration>totalDuration;var percentOfParent=isOver100?">100%":(0,_formatters.asPercent)(duration,totalDuration,"");var percentOfParentText=_i18n.i18n.translate("xpack.apm.percentOfParent",{defaultMessage:"({value} of {parentType, select, transaction { transaction } trace {trace} })",values:{value:percentOfParent,parentType:parentType}});var childType=parentType==="trace"?"transaction":"span";return _react.default.createElement(_react.default.Fragment,null,isOver100?_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.percentOfTraceLabelExplanation",{defaultMessage:"The % of {parentType, select, transaction {transaction} trace {trace} } exceeds 100% because this {childType, select, span {span} transaction {transaction} } takes longer than the root transaction.",values:{parentType:parentType,childType:childType}})},_react.default.createElement(_react.default.Fragment,null,percentOfParentText)):percentOfParentText)}},4412:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorCountSummaryItemBadge=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _eui=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _variables=__webpack_require__(38);var _variables2=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Badge=(0,_styledComponents.default)(_eui.EuiBadge).withConfig({displayName:"Badge",componentId:"sc-1evs9np-0"})(["margin-top:",";"],(0,_variables.px)(_variables2.units.eighth));var ErrorCountSummaryItemBadge=function ErrorCountSummaryItemBadge(_ref){var count=_ref.count;return _react.default.createElement(Badge,{color:_eui_theme_light.default.euiColorDanger},_i18n.i18n.translate("xpack.apm.transactionDetails.errorCount",{defaultMessage:"{errorCount, number} {errorCount, plural, one {Error} other {Errors}}",values:{errorCount:count}}))};exports.ErrorCountSummaryItemBadge=ErrorCountSummaryItemBadge},4413:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionResultSummaryItem=TransactionResultSummaryItem;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TransactionResultSummaryItem(_ref){var transactionResult=_ref.transactionResult;return _react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.resultLabel",{defaultMessage:"Result"})},_react.default.createElement(_eui.EuiBadge,{color:"default",title:undefined},transactionResult))}},4414:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDiscoverQuery=getDiscoverQuery;exports.DiscoverTransactionLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _elasticsearch_fieldnames=__webpack_require__(170);var _DiscoverLink=__webpack_require__(838);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getDiscoverQuery(transaction){var transactionId=transaction.transaction.id;var traceId=transaction.trace.id;var query="".concat(_elasticsearch_fieldnames.PROCESSOR_EVENT,':"transaction" AND ').concat(_elasticsearch_fieldnames.TRANSACTION_ID,':"').concat(transactionId,'"');if(traceId){query+=" AND ".concat(_elasticsearch_fieldnames.TRACE_ID,':"').concat(traceId,'"')}return{_a:{interval:"auto",query:{language:"kuery",query:query}}}}var DiscoverTransactionLink=function DiscoverTransactionLink(_ref){var transaction=_ref.transaction,children=_ref.children;return _react.default.createElement(_DiscoverLink.DiscoverLink,{query:getDiscoverQuery(transaction),children:children})};exports.DiscoverTransactionLink=DiscoverTransactionLink},4415:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InfraLink=InfraLink;var _eui=__webpack_require__(1);var _lodash=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var _url=_interopRequireDefault(__webpack_require__(71));var _url_helpers=__webpack_require__(95);var _useApmPluginContext2=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function InfraLink(_ref){var path=_ref.path,_ref$query=_ref.query,query=_ref$query===void 0?{}:_ref$query,rest=_objectWithoutProperties(_ref,["path","query"]);var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var nextSearch=(0,_url_helpers.fromQuery)(query);var href=_url.default.format({pathname:core.http.basePath.prepend("/app/infra"),hash:(0,_lodash.compact)([path,nextSearch]).join("?")});return _react.default.createElement(_eui.EuiLink,_extends({},rest,{href:href}))}},4416:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MaybeViewTraceLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _TransactionDetailLink=__webpack_require__(366);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MaybeViewTraceLink=function MaybeViewTraceLink(_ref){var transaction=_ref.transaction,waterfall=_ref.waterfall;var viewFullTraceButtonLabel=_i18n.i18n.translate("xpack.apm.transactionDetails.viewFullTraceButtonLabel",{defaultMessage:"View full trace"});var rootTransaction=waterfall.rootTransaction;if(!rootTransaction){return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.noTraceParentButtonTooltip",{defaultMessage:"The trace parent cannot be found"})},_react.default.createElement(_eui.EuiButton,{iconType:"apmTrace",disabled:true},viewFullTraceButtonLabel)))}var isRoot=transaction.transaction.id===rootTransaction.transaction.id;if(isRoot){return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.viewingFullTraceButtonTooltip",{defaultMessage:"Currently viewing the full trace"})},_react.default.createElement(_eui.EuiButton,{iconType:"apmTrace",disabled:true},viewFullTraceButtonLabel)))}else{return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_TransactionDetailLink.TransactionDetailLink,{serviceName:rootTransaction.service.name,transactionId:rootTransaction.transaction.id,traceId:rootTransaction.trace.id,transactionName:rootTransaction.transaction.name,transactionType:rootTransaction.transaction.type},_react.default.createElement(_eui.EuiButton,{iconType:"apmTrace"},viewFullTraceButtonLabel)))}};exports.MaybeViewTraceLink=MaybeViewTraceLink},4417:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionTabs=TransactionTabs;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _url_helpers=__webpack_require__(95);var _history=__webpack_require__(136);var _TransactionMetadata=__webpack_require__(1544);var _WaterfallContainer=__webpack_require__(4419);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var timelineTab={key:"timeline",label:_i18n.i18n.translate("xpack.apm.propertiesTable.tabs.timelineLabel",{defaultMessage:"Timeline"})};var metadataTab={key:"metadata",label:_i18n.i18n.translate("xpack.apm.propertiesTable.tabs.metadataLabel",{defaultMessage:"Metadata"})};function TransactionTabs(_ref){var location=_ref.location,transaction=_ref.transaction,urlParams=_ref.urlParams,waterfall=_ref.waterfall,exceedsMax=_ref.exceedsMax;var tabs=[timelineTab,metadataTab];var currentTab=urlParams.detailTab===metadataTab.key?metadataTab:timelineTab;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTabs,null,tabs.map((function(_ref2){var key=_ref2.key,label=_ref2.label;return _react.default.createElement(_eui.EuiTab,{onClick:function onClick(){_history.history.replace(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{detailTab:key}))}))},isSelected:currentTab.key===key,key:key},label)}))),_react.default.createElement(_eui.EuiSpacer,null),currentTab.key===timelineTab.key?_react.default.createElement(_WaterfallContainer.WaterfallContainer,{location:location,urlParams:urlParams,waterfall:waterfall,exceedsMax:exceedsMax}):_react.default.createElement(_TransactionMetadata.TransactionMetadata,{transaction:transaction}))}},4418:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TRANSACTION_METADATA_SECTIONS=void 0;var _sections=__webpack_require__(839);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TRANSACTION_METADATA_SECTIONS=[_objectSpread({},_sections.LABELS,{required:true}),_sections.TRANSACTION,_sections.HTTP,_sections.HOST,_sections.CONTAINER,_sections.SERVICE,_sections.PROCESS,_sections.MESSAGE_TRANSACTION,_sections.AGENT,_sections.URL,_objectSpread({},_sections.PAGE,{key:"transaction.page"}),_objectSpread({},_sections.USER,{required:true}),_sections.USER_AGENT,_sections.CUSTOM_TRANSACTION];exports.TRANSACTION_METADATA_SECTIONS=TRANSACTION_METADATA_SECTIONS},4419:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WaterfallContainer=WaterfallContainer;var _react=_interopRequireDefault(__webpack_require__(0));var _ServiceLegends=__webpack_require__(4420);var _Waterfall=__webpack_require__(4421);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function WaterfallContainer(_ref){var location=_ref.location,urlParams=_ref.urlParams,waterfall=_ref.waterfall,exceedsMax=_ref.exceedsMax;if(!waterfall){return null}return _react.default.createElement("div",null,_react.default.createElement(_ServiceLegends.ServiceLegends,{serviceColors:waterfall.serviceColors}),_react.default.createElement(_Waterfall.Waterfall,{location:location,waterfallItemId:urlParams.waterfallItemId,waterfall:waterfall,exceedsMax:exceedsMax}))}},4420:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceLegends=ServiceLegends;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);var _Legend=__webpack_require__(455);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var Legends=_styledComponents.default.div.withConfig({displayName:"Legends",componentId:"am8gae-0"})(["display:flex;> *{margin-right:",";&:last-child{margin-right:0;}}"],(0,_variables.px)(_variables.unit));function ServiceLegends(_ref){var serviceColors=_ref.serviceColors;return _react.default.createElement(Legends,null,_react.default.createElement(_eui.EuiTitle,{size:"xxxs"},_react.default.createElement("span",null,_i18n.i18n.translate("xpack.apm.transactionDetails.servicesTitle",{defaultMessage:"Services"}))),Object.entries(serviceColors).map((function(_ref2){var _ref3=_slicedToArray(_ref2,2),label=_ref3[0],color=_ref3[1];return _react.default.createElement(_Legend.Legend,{key:color,color:color,text:label})})))}},4421:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Waterfall=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _reactSticky=__webpack_require__(1001);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);var _history=__webpack_require__(136);var _Timeline=_interopRequireDefault(__webpack_require__(4422));var _url_helpers=__webpack_require__(95);var _get_agent_marks=__webpack_require__(4430);var _get_error_marks=__webpack_require__(4431);var _WaterfallFlyout=__webpack_require__(4432);var _WaterfallItem=__webpack_require__(4444);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Container=_styledComponents.default.div.withConfig({displayName:"Container",componentId:"c399qo-0"})(["transition:0.1s padding ease;position:relative;overflow:hidden;"]);var TIMELINE_MARGINS={top:40,left:50,right:50,bottom:0};var toggleFlyout=function toggleFlyout(_ref){var item=_ref.item,location=_ref.location;_history.history.replace(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{flyoutDetailTab:undefined,waterfallItemId:item===null||item===void 0?void 0:item.id}))}))};var WaterfallItemsContainer=_styledComponents.default.div.withConfig({displayName:"WaterfallItemsContainer",componentId:"c399qo-1"})(["padding-top:",";"],(function(props){return(0,_variables.px)(props.paddingTop)}));var Waterfall=function Waterfall(_ref2){var waterfall=_ref2.waterfall,exceedsMax=_ref2.exceedsMax,waterfallItemId=_ref2.waterfallItemId,location=_ref2.location;var itemContainerHeight=58;var waterfallHeight=itemContainerHeight*waterfall.items.length;var serviceColors=waterfall.serviceColors,duration=waterfall.duration;var agentMarks=(0,_get_agent_marks.getAgentMarks)(waterfall.entryTransaction);var errorMarks=(0,_get_error_marks.getErrorMarks)(waterfall.errorItems,serviceColors);var renderWaterfallItem=function renderWaterfallItem(item){var errorCount=item.docType==="transaction"?waterfall.errorsPerTransaction[item.doc.transaction.id]:0;return _react.default.createElement(_WaterfallItem.WaterfallItem,{key:item.id,timelineMargins:TIMELINE_MARGINS,color:serviceColors[item.doc.service.name],item:item,totalDuration:duration,isSelected:item.id===waterfallItemId,errorCount:errorCount,onClick:function onClick(){return toggleFlyout({item:item,location:location})}})};return _react.default.createElement(Container,null,exceedsMax&&_react.default.createElement(_eui.EuiCallOut,{color:"warning",size:"s",iconType:"alert",title:_i18n.i18n.translate("xpack.apm.waterfall.exceedsMax",{defaultMessage:"Number of items in this trace exceed what is displayed"})}),_react.default.createElement(_reactSticky.StickyContainer,null,_react.default.createElement(_Timeline.default,{marks:[].concat(_toConsumableArray(agentMarks),_toConsumableArray(errorMarks)),duration:duration,height:waterfallHeight,margins:TIMELINE_MARGINS}),_react.default.createElement(WaterfallItemsContainer,{paddingTop:TIMELINE_MARGINS.top},waterfall.items.map(renderWaterfallItem))),_react.default.createElement(_WaterfallFlyout.WaterfallFlyout,{waterfallItemId:waterfallItemId,waterfall:waterfall,location:location,toggleFlyout:toggleFlyout}))};exports.Waterfall=Waterfall},4422:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _reactVis=__webpack_require__(230);var _plotUtils=__webpack_require__(4423);var _TimelineAxis=_interopRequireDefault(__webpack_require__(4424));var _VerticalLines=_interopRequireDefault(__webpack_require__(4429));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Timeline=function(_PureComponent){_inherits(Timeline,_PureComponent);function Timeline(){_classCallCheck(this,Timeline);return _possibleConstructorReturn(this,_getPrototypeOf(Timeline).apply(this,arguments))}_createClass(Timeline,[{key:"render",value:function render(){var _this$props=this.props,width=_this$props.width,duration=_this$props.duration,marks=_this$props.marks,height=_this$props.height,margins=_this$props.margins;if(duration==null||!width){return null}var plotValues=(0,_plotUtils.getPlotValues)({width:width,duration:duration,height:height,margins:margins});return _react.default.createElement("div",null,_react.default.createElement(_TimelineAxis.default,{plotValues:plotValues,marks:marks,topTraceDuration:duration}),_react.default.createElement(_VerticalLines.default,{plotValues:plotValues,marks:marks,topTraceDuration:duration}))}}]);return Timeline}(_react.PureComponent);Timeline.propTypes={marks:_propTypes.default.array,duration:_propTypes.default.number,height:_propTypes.default.number.isRequired,header:_propTypes.default.node,margins:_propTypes.default.object.isRequired,width:_propTypes.default.number};var _default=(0,_reactVis.makeWidthFlexible)(Timeline);exports.default=_default;module.exports=exports.default},4423:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPlotValues=getPlotValues;var _d3Scale=__webpack_require__(253);function getPlotValues(_ref){var width=_ref.width,duration=_ref.duration,height=_ref.height,margins=_ref.margins;var xMin=0;var xMax=duration;var xScale=(0,_d3Scale.scaleLinear)().domain([xMin,xMax]).range([margins.left,width-margins.right]);return{height:height,margins:margins,tickValues:xScale.ticks(7),width:width,xDomain:xScale.domain(),xMax:xMax,xScale:xScale}}},4424:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _lodash=__webpack_require__(3);var _reactSticky=__webpack_require__(1001);var _reactVis=__webpack_require__(230);var _LastTickValue=_interopRequireDefault(__webpack_require__(4425));var _Marker=__webpack_require__(4426);var _variables=__webpack_require__(38);var _formatters=__webpack_require__(85);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getXAxisTickValues=function getXAxisTickValues(tickValues,topTraceDuration){if(topTraceDuration==null){return tickValues}var padding=(tickValues[1]-tickValues[0])/2;var lowerBound=topTraceDuration-padding;var upperBound=topTraceDuration+padding;return tickValues.filter((function(value){var isInRange=(0,_lodash.inRange)(value,lowerBound,upperBound);return!isInRange&&value!==topTraceDuration}))};function TimelineAxis(_ref){var plotValues=_ref.plotValues,marks=_ref.marks,topTraceDuration=_ref.topTraceDuration;var margins=plotValues.margins,tickValues=plotValues.tickValues,width=plotValues.width,xDomain=plotValues.xDomain,xMax=plotValues.xMax,xScale=plotValues.xScale;var tickFormatter=(0,_formatters.getDurationFormatter)(xMax);var xAxisTickValues=getXAxisTickValues(tickValues,topTraceDuration);var topTraceDurationFormatted=tickFormatter(topTraceDuration).formatted;return _react.default.createElement(_reactSticky.Sticky,{disableCompensation:true},(function(_ref2){var style=_ref2.style;return _react.default.createElement("div",{style:_objectSpread({position:"absolute",borderBottom:"1px solid ".concat(_eui_theme_light.default.euiColorMediumShade),height:(0,_variables.px)(margins.top),zIndex:2,width:"100%"},style)},_react.default.createElement(_reactVis.XYPlot,{dontCheckIfEmpty:true,width:width,height:margins.top,margin:{top:margins.top,left:margins.left,right:margins.right},xDomain:xDomain},_react.default.createElement(_reactVis.XAxis,{hideLine:true,orientation:"top",tickSize:0,tickValues:xAxisTickValues,tickFormat:function tickFormat(time){return tickFormatter(time).formatted},tickPadding:20,style:{text:{fill:_eui_theme_light.default.euiColorDarkShade}}}),topTraceDuration>0&&_react.default.createElement(_LastTickValue.default,{x:xScale(topTraceDuration),value:topTraceDurationFormatted,marginTop:28}),marks.map((function(mark){return _react.default.createElement(_Marker.Marker,{key:mark.id,mark:mark,x:xScale(mark.offset)})}))))}))}TimelineAxis.propTypes={header:_propTypes.default.node,plotValues:_propTypes.default.object.isRequired,marks:_propTypes.default.array};TimelineAxis.defaultProps={marks:[]};var _default=TimelineAxis;exports.default=_default;module.exports=exports.default},4425:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=LastTickValue;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function LastTickValue(_ref){var x=_ref.x,marginTop=_ref.marginTop,value=_ref.value;return _react.default.createElement("g",{transform:"translate(".concat(x,", ").concat(marginTop,")")},_react.default.createElement("text",{textAnchor:"middle",dy:"0",transform:"translate(0, -8)"},value))}LastTickValue.requiresSVG=true;module.exports=exports.default},4426:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Marker=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);var _AgentMarker=__webpack_require__(4427);var _ErrorMarker=__webpack_require__(4428);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MarkerContainer=_styledComponents.default.div.withConfig({displayName:"MarkerContainer",componentId:"sc-1ggwr5-0"})(["position:absolute;bottom:0;"]);var Marker=function Marker(_ref){var mark=_ref.mark,x=_ref.x;var legendWidth=11;return _react.default.createElement(MarkerContainer,{style:{left:(0,_variables.px)(x-legendWidth/2)}},mark.type==="errorMark"?_react.default.createElement(_ErrorMarker.ErrorMarker,{mark:mark}):_react.default.createElement(_AgentMarker.AgentMarker,{mark:mark}))};exports.Marker=Marker},4427:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AgentMarker=void 0;var _eui=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);var _formatters=__webpack_require__(85);var _Legend=__webpack_require__(455);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NameContainer=_styledComponents.default.div.withConfig({displayName:"NameContainer",componentId:"sc-15edmj9-0"})(["border-bottom:1px solid ",";padding-bottom:",";"],_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.units.half));var TimeContainer=_styledComponents.default.div.withConfig({displayName:"TimeContainer",componentId:"sc-15edmj9-1"})(["color:",";padding-top:",";"],_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.units.half));var AgentMarker=function AgentMarker(_ref){var mark=_ref.mark;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiToolTip,{id:mark.id,position:"top",content:_react.default.createElement("div",null,_react.default.createElement(NameContainer,null,mark.id),_react.default.createElement(TimeContainer,null,(0,_formatters.asDuration)(mark.offset)))},_react.default.createElement(_Legend.Legend,{clickable:true,color:_eui_theme_light.default.euiColorMediumShade})))};exports.AgentMarker=AgentMarker},4428:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorMarker=void 0;var _eui=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _elasticsearch_fieldnames=__webpack_require__(170);var _useUrlParams2=__webpack_require__(45);var _variables=__webpack_require__(38);var _formatters=__webpack_require__(85);var _ErrorDetailLink=__webpack_require__(1525);var _Legend=__webpack_require__(455);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var Popover=_styledComponents.default.div.withConfig({displayName:"Popover",componentId:"nug8b5-0"})(["max-width:",";"],(0,_variables.px)(280));var TimeLegend=(0,_styledComponents.default)(_Legend.Legend).withConfig({displayName:"TimeLegend",componentId:"nug8b5-1"})(["margin-bottom:",";"],(0,_variables.px)(_variables.unit));var ErrorLink=(0,_styledComponents.default)(_ErrorDetailLink.ErrorDetailLink).withConfig({displayName:"ErrorLink",componentId:"nug8b5-2"})(["display:block;margin:"," 0 "," 0;"],(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.units.half));var Button=(0,_styledComponents.default)(_Legend.Legend).withConfig({displayName:"Button",componentId:"nug8b5-3"})(["height:20px;display:flex;align-items:flex-end;"]);var ErrorMarker=function ErrorMarker(_ref){var _error$trace,_error$transaction,_error$error$log,_error$error$exceptio,_error$error$exceptio2;var mark=_ref.mark;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],showPopover=_useState2[1];var togglePopover=function togglePopover(){return showPopover(!isPopoverOpen)};var button=_react.default.createElement(Button,{clickable:true,color:_eui_theme_light.default.euiColorDanger,shape:_Legend.Shape.square,onClick:togglePopover});var error=mark.error;var rangeTo=urlParams.rangeTo,rangeFrom=urlParams.rangeFrom;var query={kuery:encodeURIComponent("".concat(_elasticsearch_fieldnames.TRACE_ID,' : "').concat((_error$trace=error.trace)===null||_error$trace===void 0?void 0:_error$trace.id,'" and ').concat(_elasticsearch_fieldnames.TRANSACTION_ID,' : "').concat((_error$transaction=error.transaction)===null||_error$transaction===void 0?void 0:_error$transaction.id,'"')),rangeFrom:rangeFrom,rangeTo:rangeTo};return _react.default.createElement(_eui.EuiPopover,{id:"popover",button:button,isOpen:isPopoverOpen,closePopover:togglePopover,anchorPosition:"upCenter"},_react.default.createElement(Popover,null,_react.default.createElement(TimeLegend,{text:(0,_formatters.asDuration)(mark.offset),indicator:function indicator(){return _react.default.createElement("div",{style:{marginRight:(0,_variables.px)(_variables.units.quarter)}},"@")}}),_react.default.createElement(_Legend.Legend,{key:mark.serviceColor,color:mark.serviceColor,text:error.service.name}),_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement(ErrorLink,{serviceName:error.service.name,errorGroupId:error.error.grouping_key,query:query},((_error$error$log=error.error.log)===null||_error$error$log===void 0?void 0:_error$error$log.message)||((_error$error$exceptio=error.error.exception)===null||_error$error$exceptio===void 0?void 0:(_error$error$exceptio2=_error$error$exceptio[0])===null||_error$error$exceptio2===void 0?void 0:_error$error$exceptio2.message)))))};exports.ErrorMarker=ErrorMarker},4429:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _reactVis=__webpack_require__(230);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var VerticalLines=function(_PureComponent){_inherits(VerticalLines,_PureComponent);function VerticalLines(){_classCallCheck(this,VerticalLines);return _possibleConstructorReturn(this,_getPrototypeOf(VerticalLines).apply(this,arguments))}_createClass(VerticalLines,[{key:"render",value:function render(){var _this$props=this.props,topTraceDuration=_this$props.topTraceDuration,marks=_this$props.marks;var _this$props$plotValue=this.props.plotValues,width=_this$props$plotValue.width,height=_this$props$plotValue.height,margins=_this$props$plotValue.margins,xDomain=_this$props$plotValue.xDomain,tickValues=_this$props$plotValue.tickValues;var markTimes=marks.filter((function(mark){return mark.verticalLine})).map((function(_ref){var offset=_ref.offset;return offset}));return _react.default.createElement("div",{style:{position:"absolute",top:0,left:0}},_react.default.createElement(_reactVis.XYPlot,{dontCheckIfEmpty:true,width:width,height:height+margins.top,margin:margins,xDomain:xDomain},_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:tickValues,style:{stroke:_eui_theme_light.default.euiColorLightestShade}}),_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:markTimes,style:{stroke:_eui_theme_light.default.euiColorMediumShade}}),topTraceDuration>0&&_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:[topTraceDuration],style:{stroke:_eui_theme_light.default.gray3euiColorMediumShade}})))}}]);return VerticalLines}(_react.PureComponent);VerticalLines.propTypes={plotValues:_propTypes.default.object.isRequired,marks:_propTypes.default.array};VerticalLines.defaultProps={marks:[]};var _default=VerticalLines;exports.default=_default;module.exports=exports.default},4430:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAgentMarks=getAgentMarks;var _lodash=__webpack_require__(3);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function getAgentMarks(transaction){var _transaction$transact;var agent=transaction===null||transaction===void 0?void 0:(_transaction$transact=transaction.transaction.marks)===null||_transaction$transact===void 0?void 0:_transaction$transact.agent;if(!agent){return[]}return(0,_lodash.sortBy)(Object.entries(agent).map((function(_ref){var _ref2=_slicedToArray(_ref,2),name=_ref2[0],ms=_ref2[1];return{type:"agentMark",id:name,offset:ms*1e3,verticalLine:true}})),"offset")}},4431:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getErrorMarks=void 0;var _lodash=__webpack_require__(3);var getErrorMarks=function getErrorMarks(errorItems,serviceColors){if((0,_lodash.isEmpty)(errorItems)){return[]}return errorItems.map((function(error){return{type:"errorMark",offset:error.offset+error.skew,verticalLine:false,id:error.doc.error.id,error:error.doc,serviceColor:serviceColors[error.doc.service.name]}}))};exports.getErrorMarks=getErrorMarks},4432:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WaterfallFlyout=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _SpanFlyout=__webpack_require__(4433);var _TransactionFlyout=__webpack_require__(4441);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WaterfallFlyout=function WaterfallFlyout(_ref){var _currentItem$parent,_currentItem$parent2,_waterfall$rootTransa;var waterfallItemId=_ref.waterfallItemId,waterfall=_ref.waterfall,location=_ref.location,toggleFlyout=_ref.toggleFlyout;var currentItem=waterfall.items.find((function(item){return item.id===waterfallItemId}));if(!currentItem){return null}switch(currentItem.docType){case"span":var parentTransaction=((_currentItem$parent=currentItem.parent)===null||_currentItem$parent===void 0?void 0:_currentItem$parent.docType)==="transaction"?(_currentItem$parent2=currentItem.parent)===null||_currentItem$parent2===void 0?void 0:_currentItem$parent2.doc:undefined;return _react.default.createElement(_SpanFlyout.SpanFlyout,{totalDuration:waterfall.duration,span:currentItem.doc,parentTransaction:parentTransaction,onClose:function onClose(){return toggleFlyout({location:location})}});case"transaction":return _react.default.createElement(_TransactionFlyout.TransactionFlyout,{transaction:currentItem.doc,onClose:function onClose(){return toggleFlyout({location:location})},rootTransactionDuration:(_waterfall$rootTransa=waterfall.rootTransaction)===null||_waterfall$rootTransa===void 0?void 0:_waterfall$rootTransa.transaction.duration.us,errorCount:waterfall.errorsPerTransaction[currentItem.id]});default:return null}};exports.WaterfallFlyout=WaterfallFlyout},4433:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpanFlyout=SpanFlyout;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);var _Summary=__webpack_require__(841);var _TimestampTooltip=__webpack_require__(454);var _DurationSummaryItem=__webpack_require__(1542);var _DiscoverSpanLink=__webpack_require__(4434);var _Stacktrace=__webpack_require__(584);var _ResponsiveFlyout=__webpack_require__(1545);var _DatabaseContext=__webpack_require__(4435);var _StickySpanProperties=__webpack_require__(4438);var _HttpInfoSummaryItem=__webpack_require__(843);var _SpanMetadata=__webpack_require__(4439);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function formatType(type){switch(type){case"db":return"DB";case"hard-navigation":return _i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.spanType.navigationTimingLabel",{defaultMessage:"Navigation timing"});default:return type}}function formatSubtype(subtype){switch(subtype){case"mysql":return"MySQL";default:return subtype}}function getSpanTypes(span){var _span$span=span.span,type=_span$span.type,subtype=_span$span.subtype,action=_span$span.action;return{spanType:formatType(type),spanSubtype:formatSubtype(subtype),spanAction:action}}var SpanBadge=(0,_styledComponents.default)(_eui.EuiBadge).withConfig({displayName:"SpanBadge",componentId:"sc-1hu9fl2-0"})(["display:inline-block;margin-right:",";"],(0,_variables.px)(_variables.units.quarter));var HttpInfoContainer=(0,_styledComponents.default)("div").withConfig({displayName:"HttpInfoContainer",componentId:"sc-1hu9fl2-1"})(["margin-right:",";"],(0,_variables.px)(_variables.units.quarter));function SpanFlyout(_ref){var _parentTransaction$se,_httpContext$response,_httpContext$url;var span=_ref.span,parentTransaction=_ref.parentTransaction,totalDuration=_ref.totalDuration,onClose=_ref.onClose;if(!span){return null}var stackframes=span.span.stacktrace;var codeLanguage=parentTransaction===null||parentTransaction===void 0?void 0:(_parentTransaction$se=parentTransaction.service.language)===null||_parentTransaction$se===void 0?void 0:_parentTransaction$se.name;var dbContext=span.span.db;var httpContext=span.span.http;var spanTypes=getSpanTypes(span);var spanHttpStatusCode=httpContext===null||httpContext===void 0?void 0:(_httpContext$response=httpContext.response)===null||_httpContext$response===void 0?void 0:_httpContext$response.status_code;var spanHttpUrl=httpContext===null||httpContext===void 0?void 0:(_httpContext$url=httpContext.url)===null||_httpContext$url===void 0?void 0:_httpContext$url.original;var spanHttpMethod=httpContext===null||httpContext===void 0?void 0:httpContext.method;return _react.default.createElement(_eui.EuiPortal,null,_react.default.createElement(_ResponsiveFlyout.ResponsiveFlyout,{onClose:onClose,size:"m",ownFocus:true},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.spanDetailsTitle",{defaultMessage:"Span details"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_DiscoverSpanLink.DiscoverSpanLink,{span:span},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"discoverApp"},_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.viewSpanInDiscoverButtonLabel",{defaultMessage:"View span in Discover"})))))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_StickySpanProperties.StickySpanProperties,{span:span,transaction:parentTransaction}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_Summary.Summary,{items:[_react.default.createElement(_TimestampTooltip.TimestampTooltip,{time:span.timestamp.us/1e3}),_react.default.createElement(_DurationSummaryItem.DurationSummaryItem,{duration:span.span.duration.us,totalDuration:totalDuration,parentType:"transaction"}),_react.default.createElement(_react.default.Fragment,null,spanHttpUrl&&_react.default.createElement(HttpInfoContainer,null,_react.default.createElement(_HttpInfoSummaryItem.HttpInfoSummaryItem,{method:spanHttpMethod,url:spanHttpUrl,status:spanHttpStatusCode})),_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.spanType",{defaultMessage:"Type"})},_react.default.createElement(SpanBadge,{color:"hollow"},spanTypes.spanType)),spanTypes.spanSubtype&&_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.spanSubtype",{defaultMessage:"Subtype"})},_react.default.createElement(SpanBadge,{color:"hollow"},spanTypes.spanSubtype)),spanTypes.spanAction&&_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.spanAction",{defaultMessage:"Action"})},_react.default.createElement(SpanBadge,{color:"hollow"},spanTypes.spanAction)))]}),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_DatabaseContext.DatabaseContext,{dbContext:dbContext}),_react.default.createElement(_eui.EuiTabbedContent,{tabs:[{id:"stack-trace",name:_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.stackTraceTabLabel",{defaultMessage:"Stack Trace"}),content:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_Stacktrace.Stacktrace,{stackframes:stackframes,codeLanguage:codeLanguage}))},{id:"metadata",name:_i18n.i18n.translate("xpack.apm.propertiesTable.tabs.metadataLabel",{defaultMessage:"Metadata"}),content:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_SpanMetadata.SpanMetadata,{span:span}))}]}))))}},4434:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverSpanLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _elasticsearch_fieldnames=__webpack_require__(170);var _DiscoverLink=__webpack_require__(838);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getDiscoverQuery(span){var query="".concat(_elasticsearch_fieldnames.SPAN_ID,':"').concat(span.span.id,'"');return{_a:{interval:"auto",query:{language:"kuery",query:query}}}}var DiscoverSpanLink=function DiscoverSpanLink(_ref){var span=_ref.span,children=_ref.children;return _react.default.createElement(_DiscoverLink.DiscoverLink,{query:getDiscoverQuery(span),children:children})};exports.DiscoverSpanLink=DiscoverSpanLink},4435:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DatabaseContext=DatabaseContext;var _eui=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _i18n=__webpack_require__(2);var _polished=__webpack_require__(91);var _react=_interopRequireWildcard(__webpack_require__(0));var _sql=_interopRequireDefault(__webpack_require__(5670));var _light=_interopRequireWildcard(__webpack_require__(1815));var _styles=__webpack_require__(1819);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);var _TruncateHeightSection=__webpack_require__(4437);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_light.registerLanguage)("sql",_sql.default);var DatabaseStatement=_styledComponents.default.div.withConfig({displayName:"DatabaseStatement",componentId:"sc-5mz4ii-0"})(["padding:"," ",";background:",";border-radius:",";border:1px solid ",";font-family:",";font-size:",";"],(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.unit),(0,_polished.tint)(.1,_eui_theme_light.default.euiColorWarning),_variables.borderRadius,_eui_theme_light.default.euiColorLightShade,_variables.fontFamilyCode,_variables.fontSize);var dbSyntaxLineHeight=_variables.unit*1.5;function DatabaseContext(_ref){var dbContext=_ref.dbContext;if(!dbContext||!dbContext.statement){return null}if(dbContext.type!=="sql"){return _react.default.createElement(DatabaseStatement,null,dbContext.statement)}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.databaseStatementTitle",{defaultMessage:"Database statement"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(DatabaseStatement,null,_react.default.createElement(_TruncateHeightSection.TruncateHeightSection,{previewHeight:10*dbSyntaxLineHeight},_react.default.createElement(_light.default,{language:"sql",style:_styles.xcode,customStyle:{color:null,background:null,padding:null,lineHeight:(0,_variables.px)(dbSyntaxLineHeight),whiteSpace:"pre-wrap",overflowX:"scroll"}},dbContext.statement))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}))}},4437:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TruncateHeightSection=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var ToggleButtonContainer=_styledComponents.default.div.withConfig({displayName:"ToggleButtonContainer",componentId:"sc-1mcx3ay-0"})(["margin-top:",";user-select:none;"],(0,_variables.px)(_variables.units.half));var TruncateHeightSection=function TruncateHeightSection(_ref){var children=_ref.children,previewHeight=_ref.previewHeight;var contentContainerEl=(0,_react.useRef)(null);var _useState=(0,_react.useState)(true),_useState2=_slicedToArray(_useState,2),showToggle=_useState2[0],setShowToggle=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isOpen=_useState4[0],setIsOpen=_useState4[1];(0,_react.useEffect)((function(){if(contentContainerEl.current){var shouldShow=contentContainerEl.current.scrollHeight>previewHeight;setShowToggle(shouldShow)}}),[children,previewHeight]);return _react.default.createElement(_react.Fragment,null,_react.default.createElement("div",{ref:contentContainerEl,style:{overflow:"hidden",maxHeight:isOpen?"initial":(0,_variables.px)(previewHeight)}},children),showToggle?_react.default.createElement(ToggleButtonContainer,null,_react.default.createElement(_eui.EuiLink,{onClick:function onClick(){setIsOpen(!isOpen)}},_react.default.createElement(_eui.EuiIcon,{style:{transition:"transform 0.1s",transform:"rotate(".concat(isOpen?90:0,"deg)")},type:"arrowRight"})," ",isOpen?_i18n.i18n.translate("xpack.apm.toggleHeight.showLessButtonLabel",{defaultMessage:"Show fewer lines"}):_i18n.i18n.translate("xpack.apm.toggleHeight.showMoreButtonLabel",{defaultMessage:"Show more lines"}))):null)};exports.TruncateHeightSection=TruncateHeightSection},4438:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StickySpanProperties=StickySpanProperties;var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _elasticsearch_fieldnames=__webpack_require__(170);var _i18n2=__webpack_require__(187);var _StickyProperties=__webpack_require__(1546);var _TransactionOverviewLink=__webpack_require__(586);var _TransactionDetailLink=__webpack_require__(366);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StickySpanProperties(_ref){var span=_ref.span,transaction=_ref.transaction;var spanName=span.span.name;var transactionStickyProperties=transaction?[{label:_i18n.i18n.translate("xpack.apm.transactionDetails.serviceLabel",{defaultMessage:"Service"}),fieldName:_elasticsearch_fieldnames.SERVICE_NAME,val:_react.default.createElement(_TransactionOverviewLink.TransactionOverviewLink,{serviceName:transaction.service.name},transaction.service.name),width:"25%"},{label:_i18n.i18n.translate("xpack.apm.transactionDetails.transactionLabel",{defaultMessage:"Transaction"}),fieldName:_elasticsearch_fieldnames.TRANSACTION_NAME,val:_react.default.createElement(_TransactionDetailLink.TransactionDetailLink,{serviceName:transaction.service.name,transactionId:transaction.transaction.id,traceId:transaction.trace.id,transactionName:transaction.transaction.name,transactionType:transaction.transaction.type},transaction.transaction.name),width:"25%"}]:[];var stickyProperties=[{label:_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.nameLabel",{defaultMessage:"Name"}),fieldName:_elasticsearch_fieldnames.SPAN_NAME,val:spanName||_i18n2.NOT_AVAILABLE_LABEL,truncated:true,width:"25%"}].concat(transactionStickyProperties);return _react.default.createElement(_StickyProperties.StickyProperties,{stickyProperties:stickyProperties})}},4439:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpanMetadata=SpanMetadata;var _react=_interopRequireWildcard(__webpack_require__(0));var _sections=__webpack_require__(4440);var _helper=__webpack_require__(582);var _=__webpack_require__(840);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function SpanMetadata(_ref){var span=_ref.span;var sectionsWithRows=(0,_react.useMemo)((function(){return(0,_helper.getSectionsWithRows)(_sections.SPAN_METADATA_SECTIONS,span)}),[span]);return _react.default.createElement(_.MetadataTable,{sections:sectionsWithRows})}},4440:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SPAN_METADATA_SECTIONS=void 0;var _sections=__webpack_require__(839);var SPAN_METADATA_SECTIONS=[_sections.LABELS,_sections.SPAN,_sections.TRANSACTION,_sections.TRACE,_sections.SERVICE,_sections.MESSAGE_SPAN,_sections.AGENT];exports.SPAN_METADATA_SECTIONS=SPAN_METADATA_SECTIONS},4441:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionFlyout=TransactionFlyout;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _TransactionActionMenu=__webpack_require__(1543);var _TransactionSummary=__webpack_require__(1541);var _FlyoutTopLevelProperties=__webpack_require__(4442);var _ResponsiveFlyout=__webpack_require__(1545);var _TransactionMetadata=__webpack_require__(1544);var _DroppedSpansWarning=__webpack_require__(4443);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TransactionPropertiesTable(_ref){var transaction=_ref.transaction;return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h4",null,"Metadata")),_react.default.createElement(_TransactionMetadata.TransactionMetadata,{transaction:transaction}))}function TransactionFlyout(_ref2){var transactionDoc=_ref2.transaction,onClose=_ref2.onClose,_ref2$errorCount=_ref2.errorCount,errorCount=_ref2$errorCount===void 0?0:_ref2$errorCount,rootTransactionDuration=_ref2.rootTransactionDuration;if(!transactionDoc){return null}return _react.default.createElement(_eui.EuiPortal,null,_react.default.createElement(_ResponsiveFlyout.ResponsiveFlyout,{onClose:onClose,ownFocus:true,maxWidth:false},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h4",null,_i18n.i18n.translate("xpack.apm.transactionDetails.transFlyout.transactionDetailsTitle",{defaultMessage:"Transaction details"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_TransactionActionMenu.TransactionActionMenu,{transaction:transactionDoc})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_FlyoutTopLevelProperties.FlyoutTopLevelProperties,{transaction:transactionDoc}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_TransactionSummary.TransactionSummary,{transaction:transactionDoc,totalDuration:rootTransactionDuration,errorCount:errorCount}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"m"}),_react.default.createElement(_DroppedSpansWarning.DroppedSpansWarning,{transactionDoc:transactionDoc}),_react.default.createElement(TransactionPropertiesTable,{transaction:transactionDoc}))))}},4442:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FlyoutTopLevelProperties=FlyoutTopLevelProperties;var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _elasticsearch_fieldnames=__webpack_require__(170);var _TransactionDetailLink=__webpack_require__(366);var _StickyProperties=__webpack_require__(1546);var _TransactionOverviewLink=__webpack_require__(586);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FlyoutTopLevelProperties(_ref){var transaction=_ref.transaction;if(!transaction){return null}var stickyProperties=[{label:_i18n.i18n.translate("xpack.apm.transactionDetails.serviceLabel",{defaultMessage:"Service"}),fieldName:_elasticsearch_fieldnames.SERVICE_NAME,val:_react.default.createElement(_TransactionOverviewLink.TransactionOverviewLink,{serviceName:transaction.service.name},transaction.service.name),width:"25%"},{label:_i18n.i18n.translate("xpack.apm.transactionDetails.transactionLabel",{defaultMessage:"Transaction"}),fieldName:_elasticsearch_fieldnames.TRANSACTION_NAME,val:_react.default.createElement(_TransactionDetailLink.TransactionDetailLink,{serviceName:transaction.service.name,transactionId:transaction.transaction.id,traceId:transaction.trace.id,transactionName:transaction.transaction.name,transactionType:transaction.transaction.type},transaction.transaction.name),width:"25%"}];return _react.default.createElement(_StickyProperties.StickyProperties,{stickyProperties:stickyProperties})}},4443:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DroppedSpansWarning=DroppedSpansWarning;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _ElasticDocsLink=__webpack_require__(583);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DroppedSpansWarning(_ref){var _transactionDoc$trans;var transactionDoc=_ref.transactionDoc;var dropped=(_transactionDoc$trans=transactionDoc.transaction.span_count)===null||_transactionDoc$trans===void 0?void 0:_transactionDoc$trans.dropped;if(!dropped){return null}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{size:"s"},_i18n.i18n.translate("xpack.apm.transactionDetails.transFlyout.callout.agentDroppedSpansMessage",{defaultMessage:"The APM agent that reported this transaction dropped {dropped} spans or more based on its configuration.",values:{dropped:dropped}})," ",_react.default.createElement(_ElasticDocsLink.ElasticDocsLink,{section:"/apm/get-started",path:"/transaction-spans.html#dropped-spans",target:"_blank"},_i18n.i18n.translate("xpack.apm.transactionDetails.transFlyout.callout.learnMoreAboutDroppedSpansLinkText",{defaultMessage:"Learn more about dropped spans."}))),_react.default.createElement(_eui.EuiHorizontalRule,null))}},4444:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WaterfallItem=WaterfallItem;var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _eui=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _i18n=__webpack_require__(2);var _agent_name=__webpack_require__(460);var _variables=__webpack_require__(38);var _formatters=__webpack_require__(85);var _ErrorCount=__webpack_require__(4445);var _ErrorOverviewLink=__webpack_require__(1537);var _elasticsearch_fieldnames=__webpack_require__(170);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Container=_styledComponents.default.div.withConfig({displayName:"Container",componentId:"sc-1vw3f18-0"})(["position:relative;display:block;user-select:none;padding-top:",";padding-bottom:",";margin-right:",";margin-left:",";border-top:1px solid ",";background-color:",";cursor:pointer;&:hover{background-color:",";}"],(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.units.plus),(function(props){return(0,_variables.px)(props.timelineMargins.right)}),(function(props){return(0,_variables.px)(props.timelineMargins.left)}),_eui_theme_light.default.euiColorLightShade,(function(props){return props.isSelected?_eui_theme_light.default.euiColorLightestShade:"initial"}),_eui_theme_light.default.euiColorLightestShade);var ItemBar=_styledComponents.default.div.withConfig({displayName:"ItemBar",componentId:"sc-1vw3f18-1"})(["box-sizing:border-box;position:relative;height:",";min-width:2px;background-color:",";"],(0,_variables.px)(_variables.unit),(function(props){return props.color}));var ItemText=_styledComponents.default.span.withConfig({displayName:"ItemText",componentId:"sc-1vw3f18-2"})(["position:absolute;right:0;display:flex;align-items:center;height:",";& > *{margin-right:",";white-space:nowrap;}"],(0,_variables.px)(_variables.units.plus),(0,_variables.px)(_variables.units.half));function PrefixIcon(_ref){var item=_ref.item;switch(item.docType){case"span":{var isDbType=item.doc.span.type.startsWith("db");if(isDbType){return _react.default.createElement(_eui.EuiIcon,{type:"database"})}return null}case"transaction":{if((0,_agent_name.isRumAgentName)(item.doc.agent.name)){return _react.default.createElement(_eui.EuiIcon,{type:"globe"})}return _react.default.createElement(_eui.EuiIcon,{type:"merge"})}default:return null}}var SpanActionToolTip=function SpanActionToolTip(_ref2){var item=_ref2.item,children=_ref2.children;if((item===null||item===void 0?void 0:item.docType)==="span"){return _react.default.createElement(_eui.EuiToolTip,{content:"".concat(item.doc.span.subtype,".").concat(item.doc.span.action)},_react.default.createElement(_react.default.Fragment,null,children))}return _react.default.createElement(_react.default.Fragment,null,children)};function Duration(_ref3){var item=_ref3.item;return _react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs"},(0,_formatters.asDuration)(item.duration))}function HttpStatusCode(_ref4){var item=_ref4.item;var httpStatusCode=item.docType==="transaction"&&item.doc.transaction.type==="request"?item.doc.transaction.result:undefined;if(!httpStatusCode){return null}return _react.default.createElement(_eui.EuiText,{size:"xs"},httpStatusCode)}function NameLabel(_ref5){var item=_ref5.item;switch(item.docType){case"span":return _react.default.createElement(_eui.EuiText,{size:"s"},item.doc.span.name);case"transaction":return _react.default.createElement(_eui.EuiTitle,{size:"xxs"},_react.default.createElement("h5",null,item.doc.transaction.name));default:return null}}function WaterfallItem(_ref6){var timelineMargins=_ref6.timelineMargins,totalDuration=_ref6.totalDuration,item=_ref6.item,color=_ref6.color,isSelected=_ref6.isSelected,errorCount=_ref6.errorCount,onClick=_ref6.onClick;if(!totalDuration){return null}var width=item.duration/totalDuration*100;var left=(item.offset+item.skew)/totalDuration*100;var tooltipContent=_i18n.i18n.translate("xpack.apm.transactionDetails.errorsOverviewLinkTooltip",{values:{errorCount:errorCount},defaultMessage:"{errorCount, plural, one {View 1 related error} other {View # related errors}}"});return _react.default.createElement(Container,{type:item.docType,timelineMargins:timelineMargins,isSelected:isSelected,onClick:onClick},_react.default.createElement(ItemBar,{style:{left:"".concat(left,"%"),width:"".concat(width,"%")},color:color,type:item.docType}),_react.default.createElement(ItemText,{style:{minWidth:"".concat(Math.max(100-left,0),"%")}},_react.default.createElement(SpanActionToolTip,{item:item},_react.default.createElement(PrefixIcon,{item:item})),_react.default.createElement(HttpStatusCode,{item:item}),_react.default.createElement(NameLabel,{item:item}),errorCount>0&&item.docType==="transaction"?_react.default.createElement(_ErrorOverviewLink.ErrorOverviewLink,{serviceName:item.doc.service.name,query:{kuery:encodeURIComponent("".concat(_elasticsearch_fieldnames.TRACE_ID,' : "').concat(item.doc.trace.id,'" and transaction.id : "').concat(item.doc.transaction.id,'"'))},color:"danger",style:{textDecoration:"none"}},_react.default.createElement(_eui.EuiToolTip,{content:tooltipContent},_react.default.createElement(_ErrorCount.ErrorCount,{count:errorCount}))):null,_react.default.createElement(Duration,{item:item})))}},4445:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorCount=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ErrorCount=function ErrorCount(_ref){var count=_ref.count;return _react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("h4",null,_react.default.createElement(_eui.EuiTextColor,{color:"danger",onClick:function onClick(e){e.stopPropagation()}},_i18n.i18n.translate("xpack.apm.transactionDetails.errorCount",{defaultMessage:"{errorCount, number} {errorCount, plural, one {Error} other {Errors}}",values:{errorCount:count}}))))};exports.ErrorCount=ErrorCount},4446:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Home=Home;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _ApmHeader=__webpack_require__(451);var _SetupInstructionsLink=__webpack_require__(1547);var _ServiceOverview=__webpack_require__(4447);var _TraceOverview=__webpack_require__(4452);var _ServiceOverviewLink=__webpack_require__(4454);var _TraceOverviewLink=__webpack_require__(4455);var _EuiTabLink=__webpack_require__(1536);var _SettingsLink=__webpack_require__(4456);var _ServiceMapLink=__webpack_require__(1540);var _ServiceMap=__webpack_require__(1539);var _useApmPluginContext2=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getHomeTabs(_ref){var _ref$serviceMapEnable=_ref.serviceMapEnabled,serviceMapEnabled=_ref$serviceMapEnable===void 0?false:_ref$serviceMapEnable;var homeTabs=[{link:_react.default.createElement(_ServiceOverviewLink.ServiceOverviewLink,null,_i18n.i18n.translate("xpack.apm.home.servicesTabLabel",{defaultMessage:"Services"})),render:function render(){return _react.default.createElement(_ServiceOverview.ServiceOverview,null)},name:"services"},{link:_react.default.createElement(_TraceOverviewLink.TraceOverviewLink,null,_i18n.i18n.translate("xpack.apm.home.tracesTabLabel",{defaultMessage:"Traces"})),render:function render(){return _react.default.createElement(_TraceOverview.TraceOverview,null)},name:"traces"}];if(serviceMapEnabled){homeTabs.push({link:_react.default.createElement(_ServiceMapLink.ServiceMapLink,null,_i18n.i18n.translate("xpack.apm.home.serviceMapTabLabel",{defaultMessage:"Service Map"})),render:function render(){return _react.default.createElement(_ServiceMap.ServiceMap,null)},name:"service-map"})}return homeTabs}var SETTINGS_LINK_LABEL=_i18n.i18n.translate("xpack.apm.settingsLinkLabel",{defaultMessage:"Settings"});function Home(_ref2){var tab=_ref2.tab;var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),config=_useApmPluginContext.config;var homeTabs=getHomeTabs(config);var selectedTab=homeTabs.find((function(homeTab){return homeTab.name===tab}));return _react.default.createElement("div",null,_react.default.createElement(_ApmHeader.ApmHeader,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,"APM"))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_SettingsLink.SettingsLink,null,_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",color:"primary",iconType:"gear"},SETTINGS_LINK_LABEL))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_SetupInstructionsLink.SetupInstructionsLink,null)))),_react.default.createElement(_eui.EuiTabs,null,homeTabs.map((function(homeTab){return _react.default.createElement(_EuiTabLink.EuiTabLink,{isSelected:homeTab===selectedTab,key:homeTab.name},homeTab.link)}))),_react.default.createElement(_eui.EuiSpacer,null),selectedTab.render())}},4447:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceOverview=ServiceOverview;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _url=_interopRequireDefault(__webpack_require__(71));var _public=__webpack_require__(16);var _useFetcher2=__webpack_require__(54);var _NoServicesMessage=__webpack_require__(4448);var _ServiceList=__webpack_require__(4450);var _useUrlParams2=__webpack_require__(45);var _public2=__webpack_require__(238);var _typings=__webpack_require__(295);var _LocalUIFilters=__webpack_require__(296);var _useApmPluginContext2=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var initalData={items:[],hasHistoricalData:true,hasLegacyData:false};var hasDisplayedToast=false;function ServiceOverview(){var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end,uiFilters=_useUrlParams.uiFilters;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(start&&end){return callApmApi({pathname:"/api/apm/services",params:{query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters)}}})}}),[start,end,uiFilters]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?initalData:_useFetcher$data,status=_useFetcher.status;(0,_react.useEffect)((function(){if(data.hasLegacyData&&!hasDisplayedToast){hasDisplayedToast=true;core.notifications.toasts.addWarning({title:_i18n.i18n.translate("xpack.apm.serviceOverview.toastTitle",{defaultMessage:"Legacy data was detected within the selected time range"}),text:(0,_public.toMountPoint)(_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceOverview.toastText",{defaultMessage:"You're running Elastic Stack 7.0+ and we've detected incompatible data from a previous 6.x version. If you want to view this data in APM, you should migrate it. See more in "}),_react.default.createElement(_eui.EuiLink,{href:_url.default.format({pathname:core.http.basePath.prepend("/app/kibana"),hash:"/management/elasticsearch/upgrade_assistant"})},_i18n.i18n.translate("xpack.apm.serviceOverview.upgradeAssistantLink",{defaultMessage:"the upgrade assistant"}))))})}}),[data.hasLegacyData,core.http.basePath,core.notifications.toasts]);(0,_public2.useTrackPageview)({app:"apm",path:"services_overview"});(0,_public2.useTrackPageview)({app:"apm",path:"services_overview",delay:15e3});var localFiltersConfig=(0,_react.useMemo)((function(){return{filterNames:["host","agentName"],projection:_typings.PROJECTION.SERVICES}}),[]);return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localFiltersConfig)),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_ServiceList.ServiceList,{items:data.items,noItemsMessage:_react.default.createElement(_NoServicesMessage.NoServicesMessage,{historicalDataFound:data.hasHistoricalData,status:status})}))))}},4448:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoServicesMessage=NoServicesMessage;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _KibanaLink=__webpack_require__(851);var _SetupInstructionsLink=__webpack_require__(1547);var _LoadingStatePrompt=__webpack_require__(368);var _ErrorStatePrompt=__webpack_require__(4449);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NoServicesMessage(_ref){var historicalDataFound=_ref.historicalDataFound,status=_ref.status;if(status==="loading"){return _react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null)}if(status==="failure"){return _react.default.createElement(_ErrorStatePrompt.ErrorStatePrompt,null)}if(historicalDataFound){return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("div",null,_i18n.i18n.translate("xpack.apm.servicesTable.notFoundLabel",{defaultMessage:"No services found"})),titleSize:"s"})}return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("div",null,_i18n.i18n.translate("xpack.apm.servicesTable.noServicesLabel",{defaultMessage:"Looks like you don't have any APM services installed. Let's add some!"})),titleSize:"s",body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.servicesTable.7xUpgradeServerMessage",{defaultMessage:"Upgrading from a pre-7.x version? Make sure you've also upgraded\n              your APM server instance(s) to at least 7.0."})),_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.servicesTable.7xOldDataMessage",{defaultMessage:"You may also have old data that needs to be migrated."})," ",_react.default.createElement(_KibanaLink.KibanaLink,{path:"/management/elasticsearch/upgrade_assistant"},_i18n.i18n.translate("xpack.apm.servicesTable.UpgradeAssistantLink",{defaultMessage:"Learn more by visiting the Kibana Upgrade Assistant"})),".")),actions:_react.default.createElement(_SetupInstructionsLink.SetupInstructionsLink,{buttonFill:true})})}},4449:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorStatePrompt=ErrorStatePrompt;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ErrorStatePrompt(){return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("div",null,_i18n.i18n.translate("xpack.apm.error.prompt.title",{defaultMessage:"Sorry, an error occured :("})),body:_i18n.i18n.translate("xpack.apm.error.prompt.body",{defaultMessage:"Please inspect your browser's developer console for details."}),titleSize:"s"})}},4450:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceList=ServiceList;exports.SERVICE_COLUMNS=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _i18n2=__webpack_require__(187);var _variables=__webpack_require__(38);var _formatters=__webpack_require__(85);var _ManagedTable=__webpack_require__(367);var _EnvironmentBadge=__webpack_require__(4451);var _TransactionOverviewLink=__webpack_require__(586);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function formatNumber(value){if(value===0){return"0"}else if(value<=.1){return"< 0.1"}else{return(0,_formatters.asDecimal)(value)}}function formatString(value){return value||_i18n2.NOT_AVAILABLE_LABEL}var AppLink=(0,_styledComponents.default)(_TransactionOverviewLink.TransactionOverviewLink).withConfig({displayName:"AppLink",componentId:"sc-1axllds-0"})(["font-size:",";",";"],_variables.fontSizes.large,(0,_variables.truncate)("100%"));var SERVICE_COLUMNS=[{field:"serviceName",name:_i18n.i18n.translate("xpack.apm.servicesTable.nameColumnLabel",{defaultMessage:"Name"}),width:"40%",sortable:true,render:function render(serviceName){return _react.default.createElement(_eui.EuiToolTip,{content:formatString(serviceName),id:"service-name-tooltip"},_react.default.createElement(AppLink,{serviceName:serviceName},formatString(serviceName)))}},{field:"environments",name:_i18n.i18n.translate("xpack.apm.servicesTable.environmentColumnLabel",{defaultMessage:"Environment"}),width:"20%",sortable:true,render:function render(environments){return _react.default.createElement(_EnvironmentBadge.EnvironmentBadge,{environments:environments})}},{field:"agentName",name:_i18n.i18n.translate("xpack.apm.servicesTable.agentColumnLabel",{defaultMessage:"Agent"}),sortable:true,render:function render(agentName){return formatString(agentName)}},{field:"avgResponseTime",name:_i18n.i18n.translate("xpack.apm.servicesTable.avgResponseTimeColumnLabel",{defaultMessage:"Avg. response time"}),sortable:true,dataType:"number",render:function render(time){return(0,_formatters.convertTo)({unit:"milliseconds",microseconds:time}).formatted}},{field:"transactionsPerMinute",name:_i18n.i18n.translate("xpack.apm.servicesTable.transactionsPerMinuteColumnLabel",{defaultMessage:"Trans. per minute"}),sortable:true,dataType:"number",render:function render(value){return"".concat(formatNumber(value)," ").concat(_i18n.i18n.translate("xpack.apm.servicesTable.transactionsPerMinuteUnitLabel",{defaultMessage:"tpm"}))}},{field:"errorsPerMinute",name:_i18n.i18n.translate("xpack.apm.servicesTable.errorsPerMinuteColumnLabel",{defaultMessage:"Errors per minute"}),sortable:true,dataType:"number",render:function render(value){return"".concat(formatNumber(value)," ").concat(_i18n.i18n.translate("xpack.apm.servicesTable.errorsPerMinuteUnitLabel",{defaultMessage:"err."}))}}];exports.SERVICE_COLUMNS=SERVICE_COLUMNS;function ServiceList(_ref){var items=_ref.items,noItemsMessage=_ref.noItemsMessage;return _react.default.createElement(_ManagedTable.ManagedTable,{columns:SERVICE_COLUMNS,items:items,noItemsMessage:noItemsMessage,initialSortField:"serviceName",initialPageSize:50})}},4451:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EnvironmentBadge=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EnvironmentBadge=function EnvironmentBadge(_ref){var _ref$environments=_ref.environments,environments=_ref$environments===void 0?[]:_ref$environments;if(environments.length<3){return _react.default.createElement(_react.default.Fragment,null,environments.map((function(env){return _react.default.createElement(_eui.EuiBadge,{color:"hollow",key:env},env)})))}return _react.default.createElement(_eui.EuiToolTip,{position:"right",content:environments.map((function(env){return _react.default.createElement(_react.default.Fragment,{key:env},env,_react.default.createElement("br",null))}))},_react.default.createElement(_eui.EuiBadge,null,_i18n.i18n.translate("xpack.apm.servicesTable.environmentCount",{values:{environmentCount:environments.length},defaultMessage:"{environmentCount, plural, one {1 environment} other {# environments}}"})))};exports.EnvironmentBadge=EnvironmentBadge},4452:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceOverview=TraceOverview;var _eui=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _useFetcher2=__webpack_require__(54);var _TraceList=__webpack_require__(4453);var _useUrlParams2=__webpack_require__(45);var _public=__webpack_require__(238);var _LocalUIFilters=__webpack_require__(296);var _typings=__webpack_require__(295);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function TraceOverview(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var start=urlParams.start,end=urlParams.end;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(start&&end){return callApmApi({pathname:"/api/apm/traces",params:{query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters)}}})}}),[start,end,uiFilters]),status=_useFetcher.status,_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?[]:_useFetcher$data;(0,_public.useTrackPageview)({app:"apm",path:"traces_overview"});(0,_public.useTrackPageview)({app:"apm",path:"traces_overview",delay:15e3});var localUIFiltersConfig=(0,_react.useMemo)((function(){var config={filterNames:["transactionResult","host","containerId","podName"],projection:_typings.PROJECTION.TRACES};return config}),[]);return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localUIFiltersConfig)),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_TraceList.TraceList,{items:data,isLoading:status===_useFetcher2.FETCH_STATUS.LOADING}))))}},4453:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceList=TraceList;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);var _formatters=__webpack_require__(85);var _EmptyMessage=__webpack_require__(453);var _ImpactBar=__webpack_require__(1532);var _TransactionDetailLink=__webpack_require__(366);var _ManagedTable=__webpack_require__(367);var _LoadingStatePrompt=__webpack_require__(368);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StyledTransactionLink=(0,_styledComponents.default)(_TransactionDetailLink.TransactionDetailLink).withConfig({displayName:"StyledTransactionLink",componentId:"sc-137e0tc-0"})(["font-size:",";",";"],_variables.fontSizes.large,(0,_variables.truncate)("100%"));var traceListColumns=[{field:"name",name:_i18n.i18n.translate("xpack.apm.tracesTable.nameColumnLabel",{defaultMessage:"Name"}),width:"40%",sortable:true,render:function render(name,_ref){var sample=_ref.sample;return _react.default.createElement(_eui.EuiToolTip,{id:"trace-transaction-link-tooltip",content:name},_react.default.createElement(StyledTransactionLink,{serviceName:sample.service.name,transactionId:sample.transaction.id,traceId:sample.trace.id,transactionName:sample.transaction.name,transactionType:sample.transaction.type},name))}},{field:"sample.service.name",name:_i18n.i18n.translate("xpack.apm.tracesTable.originatingServiceColumnLabel",{defaultMessage:"Originating service"}),sortable:true},{field:"averageResponseTime",name:_i18n.i18n.translate("xpack.apm.tracesTable.avgResponseTimeColumnLabel",{defaultMessage:"Avg. response time"}),sortable:true,dataType:"number",render:function render(time){return(0,_formatters.convertTo)({unit:"milliseconds",microseconds:time}).formatted}},{field:"transactionsPerMinute",name:_i18n.i18n.translate("xpack.apm.tracesTable.tracesPerMinuteColumnLabel",{defaultMessage:"Traces per minute"}),sortable:true,dataType:"number",render:function render(value){return"".concat(value.toLocaleString()," ").concat(_i18n.i18n.translate("xpack.apm.tracesTable.tracesPerMinuteUnitLabel",{defaultMessage:"tpm"}))}},{field:"impact",name:_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.tracesTable.impactColumnDescription",{defaultMessage:"The most used and slowest endpoints in your service. It's calculated by taking the relative average duration times the number of transactions per minute."})},_react.default.createElement(_react.default.Fragment,null,_i18n.i18n.translate("xpack.apm.tracesTable.impactColumnLabel",{defaultMessage:"Impact"})," ",_react.default.createElement(_eui.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),width:"20%",align:"left",sortable:true,render:function render(value){return _react.default.createElement(_ImpactBar.ImpactBar,{value:value})}}];var noItemsMessage=_react.default.createElement(_EmptyMessage.EmptyMessage,{heading:_i18n.i18n.translate("xpack.apm.tracesTable.notFoundLabel",{defaultMessage:"No traces found for this query"})});function TraceList(_ref2){var _ref2$items=_ref2.items,items=_ref2$items===void 0?[]:_ref2$items,isLoading=_ref2.isLoading;var noItems=isLoading?_react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null):noItemsMessage;return _react.default.createElement(_ManagedTable.ManagedTable,{columns:traceListColumns,items:items,initialSortField:"impact",initialSortDirection:"desc",noItemsMessage:noItems,initialPageSize:25})}},4454:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);var _useUrlParams2=__webpack_require__(45);var _pickKeys=__webpack_require__(188);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var ServiceOverviewLink=function ServiceOverviewLink(props){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"host","agentName");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services",query:persistedFilters},props))};exports.ServiceOverviewLink=ServiceOverviewLink},4455:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);var _useUrlParams2=__webpack_require__(45);var _pickKeys=__webpack_require__(188);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var TraceOverviewLink=function TraceOverviewLink(props){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"transactionResult","host","containerId","podName");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/traces",query:persistedFilters},props))};exports.TraceOverviewLink=TraceOverviewLink},4456:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SettingsLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var SettingsLink=function SettingsLink(props){return _react.default.createElement(_APMLink.APMLink,_extends({path:"/settings"},props))};exports.SettingsLink=SettingsLink},4457:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RouteName=void 0;var RouteName;exports.RouteName=RouteName;(function(RouteName){RouteName["HOME"]="home";RouteName["SERVICES"]="services";RouteName["SERVICE_MAP"]="service-map";RouteName["SINGLE_SERVICE_MAP"]="single-service-map";RouteName["TRACES"]="traces";RouteName["SERVICE"]="service";RouteName["TRANSACTIONS"]="transactions";RouteName["ERRORS"]="errors";RouteName["ERROR"]="error";RouteName["METRICS"]="metrics";RouteName["SERVICE_NODE_METRICS"]="node_metrics";RouteName["TRANSACTION_TYPE"]="transaction_type";RouteName["TRANSACTION_NAME"]="transaction_name";RouteName["SETTINGS"]="settings";RouteName["AGENT_CONFIGURATION"]="agent_configuration";RouteName["INDICES"]="indices";RouteName["SERVICE_NODES"]="nodes";RouteName["LINK_TO_TRACE"]="link_to_trace"})(RouteName||(exports.RouteName=RouteName={}))},4458:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Settings=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);var _HomeLink=__webpack_require__(4459);var _useLocation2=__webpack_require__(156);var _APMLink=__webpack_require__(123);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Settings=function Settings(props){var _useLocation=(0,_useLocation2.useLocation)(),search=_useLocation.search,pathname=_useLocation.pathname;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_HomeLink.HomeLink,null,_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",color:"primary",iconType:"arrowLeft"},_i18n.i18n.translate("xpack.apm.settings.returnToOverviewLinkLabel",{defaultMessage:"Return to overview"}))),_react.default.createElement(_eui.EuiPage,null,_react.default.createElement(_eui.EuiPageSideBar,null,_react.default.createElement(_eui.EuiSideNav,{items:[{name:_i18n.i18n.translate("xpack.apm.settings.pageTitle",{defaultMessage:"Settings"}),id:0,items:[{name:"Agent Configuration",id:"1",href:(0,_APMLink.getAPMHref)("/settings/agent-configuration",search),isSelected:pathname==="/settings/agent-configuration"},{name:"Indices",id:"2",href:(0,_APMLink.getAPMHref)("/settings/apm-indices",search),isSelected:pathname==="/settings/apm-indices"}]}]})),_react.default.createElement(_eui.EuiPageBody,null,props.children)))};exports.Settings=Settings},4459:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HomeLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var HomeLink=function HomeLink(props){return _react.default.createElement(_APMLink.APMLink,_extends({path:"/"},props))};exports.HomeLink=HomeLink},4460:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AgentConfigurations=AgentConfigurations;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);var _lodash=__webpack_require__(3);var _useFetcher2=__webpack_require__(54);var _AgentConfigurationList=__webpack_require__(4461);var _public=__webpack_require__(238);var _AddEditFlyout=__webpack_require__(4462);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function AgentConfigurations(){var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){return callApmApi({pathname:"/api/apm/settings/agent-configuration"})}),[],{preservePreviousData:false}),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?[]:_useFetcher$data,status=_useFetcher.status,refetch=_useFetcher.refetch;var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),selectedConfig=_useState2[0],setSelectedConfig=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isFlyoutOpen=_useState4[0],setIsFlyoutOpen=_useState4[1];(0,_public.useTrackPageview)({app:"apm",path:"agent_configuration"});(0,_public.useTrackPageview)({app:"apm",path:"agent_configuration",delay:15e3});var hasConfigurations=!(0,_lodash.isEmpty)(data);var onClose=function onClose(){setSelectedConfig(null);setIsFlyoutOpen(false)};return _react.default.createElement(_react.default.Fragment,null,isFlyoutOpen&&_react.default.createElement(_AddEditFlyout.AddEditFlyout,{selectedConfig:selectedConfig,onClose:onClose,onSaved:function onSaved(){onClose();refetch()},onDeleted:function onDeleted(){onClose();refetch()}}),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.settings.agentConf.configurationsPanelTitle",{defaultMessage:"Agent remote configuration"})))),hasConfigurations?_react.default.createElement(CreateConfigurationButton,{onClick:function onClick(){return setIsFlyoutOpen(true)}}):null),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_AgentConfigurationList.AgentConfigurationList,{status:status,data:data,setIsFlyoutOpen:setIsFlyoutOpen,setSelectedConfig:setSelectedConfig})))}function CreateConfigurationButton(_ref){var onClick=_ref.onClick;return _react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{color:"primary",fill:true,iconType:"plusInCircle",onClick:onClick},_i18n.i18n.translate("xpack.apm.settings.agentConf.createConfigButtonLabel",{defaultMessage:"Create configuration"})))))}},4461:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AgentConfigurationList=AgentConfigurationList;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);var _lodash=__webpack_require__(3);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _ManagedTable=__webpack_require__(367);var _LoadingStatePrompt=__webpack_require__(368);var _TimestampTooltip=__webpack_require__(454);var _variables=__webpack_require__(38);var _agent_configuration_constants=__webpack_require__(461);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AgentConfigurationList(_ref){var status=_ref.status,data=_ref.data,setIsFlyoutOpen=_ref.setIsFlyoutOpen,setSelectedConfig=_ref.setSelectedConfig;var columns=[{field:"applied_by_agent",align:"center",width:(0,_variables.px)(_variables.units.double),name:"",sortable:true,render:function render(isApplied){return _react.default.createElement(_eui.EuiToolTip,{content:isApplied?_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.appliedTooltipMessage",{defaultMessage:"Applied by at least one agent"}):_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.notAppliedTooltipMessage",{defaultMessage:"Not yet applied by any agents"})},_react.default.createElement(_eui.EuiHealth,{color:isApplied?"success":_eui_theme_light.default.euiColorLightShade}))}},{field:"service.name",name:_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.serviceNameColumnLabel",{defaultMessage:"Service name"}),sortable:true,render:function render(_,config){return _react.default.createElement(_eui.EuiButtonEmpty,{flush:"left",size:"s",color:"primary",onClick:function onClick(){setSelectedConfig(config);setIsFlyoutOpen(true)}},(0,_agent_configuration_constants.getOptionLabel)(config.service.name))}},{field:"service.environment",name:_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.environmentColumnLabel",{defaultMessage:"Service environment"}),sortable:true,render:function render(value){return(0,_agent_configuration_constants.getOptionLabel)(value)}},{field:"settings.transaction_sample_rate",name:_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.sampleRateColumnLabel",{defaultMessage:"Sample rate"}),dataType:"number",sortable:true,render:function render(value){return value}},{field:"settings.capture_body",name:_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.captureBodyColumnLabel",{defaultMessage:"Capture body"}),sortable:true,render:function render(value){return value}},{field:"settings.transaction_max_spans",name:_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.transactionMaxSpansColumnLabel",{defaultMessage:"Transaction max spans"}),dataType:"number",sortable:true,render:function render(value){return value}},{align:"right",field:"@timestamp",name:_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.lastUpdatedColumnLabel",{defaultMessage:"Last updated"}),sortable:true,render:function render(value){return _react.default.createElement(_TimestampTooltip.TimestampTooltip,{time:value,timeUnit:"minutes"})}},{width:(0,_variables.px)(_variables.units.double),name:"",actions:[{name:_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.editButtonLabel",{defaultMessage:"Edit"}),description:_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.editButtonDescription",{defaultMessage:"Edit this config"}),icon:"pencil",color:"primary",type:"icon",onClick:function onClick(config){setSelectedConfig(config);setIsFlyoutOpen(true)}}]}];var emptyStatePrompt=_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"controlsHorizontal",title:_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.emptyPromptTitle",{defaultMessage:"No configurations found."})),body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.emptyPromptText",{defaultMessage:"Let's change that! You can fine-tune agent configuration directly from Kibana without having to redeploy. Get started by creating your first configuration."}))),actions:_react.default.createElement(_eui.EuiButton,{color:"primary",fill:true,onClick:function onClick(){return setIsFlyoutOpen(true)}},_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.createConfigButtonLabel",{defaultMessage:"Create configuration"}))});var failurePrompt=_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"alert",body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.settings.agentConf.configTable.configTable.failurePromptText",{defaultMessage:"The list of agent configurations could not be fetched. Your user may not have the sufficient permissions."})))});if(status==="failure"){return failurePrompt}if(status==="success"&&(0,_lodash.isEmpty)(data)){return emptyStatePrompt}return _react.default.createElement(_ManagedTable.ManagedTable,{noItemsMessage:_react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null),columns:columns,items:data,initialSortField:"service.name",initialSortDirection:"asc",initialPageSize:50})}},4462:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AddEditFlyout=AddEditFlyout;var _eui=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _Either=__webpack_require__(76);var _useCallApmApi=__webpack_require__(449);var _transaction_sample_rate_rt=__webpack_require__(4463);var _SettingsSection=__webpack_require__(4464);var _ServiceSection=__webpack_require__(4465);var _DeleteButton=__webpack_require__(4466);var _transaction_max_spans_rt=__webpack_require__(4467);var _useFetcher2=__webpack_require__(54);var _agent_name=__webpack_require__(460);var _agent_configuration_constants=__webpack_require__(461);var _saveConfig=__webpack_require__(4468);var _useApmPluginContext=__webpack_require__(80);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var defaultSettings={TRANSACTION_SAMPLE_RATE:"1.0",CAPTURE_BODY:"off",TRANSACTION_MAX_SPANS:"500"};function AddEditFlyout(_ref){var onClose=_ref.onClose,onSaved=_ref.onSaved,onDeleted=_ref.onDeleted,selectedConfig=_ref.selectedConfig;var toasts=(0,_useApmPluginContext.useApmPluginContext)().core.notifications.toasts;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isSaving=_useState2[0],setIsSaving=_useState2[1];var callApmApiFromHook=(0,_useCallApmApi.useCallApmApi)();var _useState3=(0,_react.useState)(selectedConfig?selectedConfig.service.name||_agent_configuration_constants.ALL_OPTION_VALUE:""),_useState4=_slicedToArray(_useState3,2),serviceName=_useState4[0],setServiceName=_useState4[1];var _useState5=(0,_react.useState)(selectedConfig?selectedConfig.service.environment||_agent_configuration_constants.ALL_OPTION_VALUE:""),_useState6=_slicedToArray(_useState5,2),environment=_useState6[0],setEnvironment=_useState6[1];var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName===_agent_configuration_constants.ALL_OPTION_VALUE){return Promise.resolve({agentName:undefined})}if(serviceName){return callApmApi({pathname:"/api/apm/settings/agent-configuration/agent_name",params:{query:{serviceName:serviceName}}})}}),[serviceName],{preservePreviousData:false}),_useFetcher$data=_useFetcher.data;_useFetcher$data=_useFetcher$data===void 0?{agentName:undefined}:_useFetcher$data;var agentName=_useFetcher$data.agentName;var _useState7=(0,_react.useState)(((selectedConfig===null||selectedConfig===void 0?void 0:selectedConfig.settings.transaction_sample_rate)||defaultSettings.TRANSACTION_SAMPLE_RATE).toString()),_useState8=_slicedToArray(_useState7,2),sampleRate=_useState8[0],setSampleRate=_useState8[1];var _useState9=(0,_react.useState)((selectedConfig===null||selectedConfig===void 0?void 0:selectedConfig.settings.capture_body)||defaultSettings.CAPTURE_BODY),_useState10=_slicedToArray(_useState9,2),captureBody=_useState10[0],setCaptureBody=_useState10[1];var _useState11=(0,_react.useState)(((selectedConfig===null||selectedConfig===void 0?void 0:selectedConfig.settings.transaction_max_spans)||defaultSettings.TRANSACTION_MAX_SPANS).toString()),_useState12=_slicedToArray(_useState11,2),transactionMaxSpans=_useState12[0],setTransactionMaxSpans=_useState12[1];var isRumService=(0,_agent_name.isRumAgentName)(agentName);var isSampleRateValid=(0,_Either.isRight)(_transaction_sample_rate_rt.transactionSampleRateRt.decode(sampleRate));var isTransactionMaxSpansValid=(0,_Either.isRight)(_transaction_max_spans_rt.transactionMaxSpansRt.decode(transactionMaxSpans));var isFormValid=!!serviceName&&!!environment&&isSampleRateValid&&(isRumService||!!captureBody&&isTransactionMaxSpansValid)&&(serviceName===_agent_configuration_constants.ALL_OPTION_VALUE||agentName!==undefined);var handleSubmitEvent=function handleSubmitEvent(event){return regeneratorRuntime.async((function handleSubmitEvent$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setIsSaving(true);_context.next=4;return regeneratorRuntime.awrap((0,_saveConfig.saveConfig)({callApmApi:callApmApiFromHook,serviceName:serviceName,environment:environment,sampleRate:sampleRate,captureBody:captureBody,transactionMaxSpans:transactionMaxSpans,configurationId:selectedConfig?selectedConfig.id:undefined,agentName:agentName,toasts:toasts}));case 4:setIsSaving(false);onSaved();case 6:case"end":return _context.stop()}}}))};return _react.default.createElement(_eui.EuiPortal,null,_react.default.createElement(_eui.EuiFlyout,{size:"s",onClose:onClose,ownFocus:true},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,selectedConfig?_i18n.i18n.translate("xpack.apm.settings.agentConf.editConfigTitle",{defaultMessage:"Edit configuration"}):_i18n.i18n.translate("xpack.apm.settings.agentConf.createConfigTitle",{defaultMessage:"Create configuration"})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_eui.EuiText,{size:"s"},"This allows you to fine-tune your agent configuration directly in Kibana. Best of all, changes are automatically propagated to your APM agents so thereâs no need to redeploy."),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiForm,null,_react.default.createElement("form",{onKeyPress:function onKeyPress(e){var didClickEnter=e.which===13;if(didClickEnter){handleSubmitEvent(e)}}},_react.default.createElement(_ServiceSection.ServiceSection,{isReadOnly:Boolean(selectedConfig),environment:environment,setEnvironment:setEnvironment,serviceName:serviceName,setServiceName:setServiceName}),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_SettingsSection.SettingsSection,{isRumService:isRumService,sampleRate:sampleRate,setSampleRate:setSampleRate,isSampleRateValid:isSampleRateValid,captureBody:captureBody,setCaptureBody:setCaptureBody,transactionMaxSpans:transactionMaxSpans,setTransactionMaxSpans:setTransactionMaxSpans,isTransactionMaxSpansValid:isTransactionMaxSpansValid})))),_react.default.createElement(_eui.EuiFlyoutFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},selectedConfig?_react.default.createElement(_DeleteButton.DeleteButton,{selectedConfig:selectedConfig,onDeleted:onDeleted}):null),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:onClose},_i18n.i18n.translate("xpack.apm.settings.agentConf.cancelButtonLabel",{defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{type:"submit",fill:true,isLoading:isSaving,iconSide:"right",isDisabled:!isFormValid,onClick:handleSubmitEvent},_i18n.i18n.translate("xpack.apm.settings.agentConf.saveConfigurationButtonLabel",{defaultMessage:"Save"})))))))))}},4463:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.transactionSampleRateRt=void 0;var t=_interopRequireWildcard(__webpack_require__(57));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var transactionSampleRateRt=new t.Type("TransactionSampleRate",t.number.is,(function(input,context){var value=parseFloat(input);return value>=0&&value<=1&&parseFloat(value.toFixed(3))===value?t.success(value):t.failure(input,context)}),t.identity);exports.transactionSampleRateRt=transactionSampleRateRt},4464:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SettingsSection=SettingsSection;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(3);var _SelectWithPlaceholder=__webpack_require__(1548);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SettingsSection(_ref){var isRumService=_ref.isRumService,sampleRate=_ref.sampleRate,setSampleRate=_ref.setSampleRate,isSampleRateValid=_ref.isSampleRateValid,captureBody=_ref.captureBody,setCaptureBody=_ref.setCaptureBody,transactionMaxSpans=_ref.transactionMaxSpans,setTransactionMaxSpans=_ref.setTransactionMaxSpans,isTransactionMaxSpansValid=_ref.isTransactionMaxSpansValid;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.settingsSection.title",{defaultMessage:"Options"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.settingsSection.sampleRateConfigurationInputLabel",{defaultMessage:"Transaction sample rate"}),helpText:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.settingsSection.sampleRateConfigurationInputHelpText",{defaultMessage:"Choose a rate between 0.000 and 1.0. Default is 1.0 (100% of traces)."}),error:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.settingsSection.sampleRateConfigurationInputErrorText",{defaultMessage:"Sample rate must be between 0.000 and 1"}),isInvalid:!(0,_lodash.isEmpty)(sampleRate)&&!isSampleRateValid},_react.default.createElement(_eui.EuiFieldText,{placeholder:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.settingsSection.sampleRateConfigurationInputPlaceholderText",{defaultMessage:"Set sample rate"}),value:sampleRate,onChange:function onChange(e){e.preventDefault();setSampleRate(e.target.value)}})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),!isRumService&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.settingsSection.captureBodyInputLabel",{defaultMessage:"Capture body"}),helpText:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.settingsSection.captureBodyInputHelpText",{defaultMessage:'For transactions that are HTTP requests, the agent can optionally capture the request body (e.g. POST variables). Default is "off".'})},_react.default.createElement(_SelectWithPlaceholder.SelectWithPlaceholder,{placeholder:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.settingsSection.captureBodyInputPlaceholderText",{defaultMessage:"Select option"}),options:[{text:"off"},{text:"errors"},{text:"transactions"},{text:"all"}],value:captureBody,onChange:function onChange(e){e.preventDefault();setCaptureBody(e.target.value)}})),!isRumService&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.settingsSection.transactionMaxSpansConfigInputLabel",{defaultMessage:"Transaction max spans"}),helpText:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.settingsSection.transactionMaxSpansConfigInputHelpText",{defaultMessage:"Limits the amount of spans that are recorded per transaction. Default is 500."}),error:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.settingsSection.transactionMaxSpansConfigInputErrorText",{defaultMessage:"Must be between 0 and 32000"}),isInvalid:!(0,_lodash.isEmpty)(transactionMaxSpans)&&!isTransactionMaxSpansValid},_react.default.createElement(_eui.EuiFieldNumber,{placeholder:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.settingsSection.transactionMaxSpansConfigInputPlaceholderText",{defaultMessage:"Set transaction max spans"}),value:transactionMaxSpans===""?"":Number(transactionMaxSpans),min:0,max:32e3,onChange:function onChange(e){e.preventDefault();setTransactionMaxSpans(e.target.value)}})))}},4465:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceSection=ServiceSection;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _SelectWithPlaceholder=__webpack_require__(1548);var _useFetcher3=__webpack_require__(54);var _agent_configuration_constants=__webpack_require__(461);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SELECT_PLACEHOLDER_LABEL="- ".concat(_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.serviceSection.selectPlaceholder",{defaultMessage:"Select"})," -");function ServiceSection(_ref){var isReadOnly=_ref.isReadOnly,serviceName=_ref.serviceName,setServiceName=_ref.setServiceName,environment=_ref.environment,setEnvironment=_ref.setEnvironment;var _useFetcher=(0,_useFetcher3.useFetcher)((function(callApmApi){if(!isReadOnly){return callApmApi({pathname:"/api/apm/settings/agent-configuration/services",forceCache:true})}}),[isReadOnly],{preservePreviousData:false}),_useFetcher$data=_useFetcher.data,serviceNames=_useFetcher$data===void 0?[]:_useFetcher$data,serviceNamesStatus=_useFetcher.status;var _useFetcher2=(0,_useFetcher3.useFetcher)((function(callApmApi){if(!isReadOnly&&serviceName){return callApmApi({pathname:"/api/apm/settings/agent-configuration/environments",params:{query:{serviceName:(0,_agent_configuration_constants.omitAllOption)(serviceName)}}})}}),[isReadOnly,serviceName],{preservePreviousData:false}),_useFetcher2$data=_useFetcher2.data,environments=_useFetcher2$data===void 0?[]:_useFetcher2$data,environmentStatus=_useFetcher2.status;var ALREADY_CONFIGURED_TRANSLATED=_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.serviceSection.alreadyConfiguredOption",{defaultMessage:"already configured"});var serviceNameOptions=serviceNames.map((function(name){return{text:(0,_agent_configuration_constants.getOptionLabel)(name),value:name}}));var environmentOptions=environments.map((function(_ref2){var name=_ref2.name,alreadyConfigured=_ref2.alreadyConfigured;return{disabled:alreadyConfigured,text:"".concat((0,_agent_configuration_constants.getOptionLabel)(name)," ").concat(alreadyConfigured?"(".concat(ALREADY_CONFIGURED_TRANSLATED,")"):""),value:name}}));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.serviceSection.title",{defaultMessage:"Service"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.serviceSection.serviceNameSelectLabel",{defaultMessage:"Name"}),helpText:!isReadOnly&&_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.serviceSection.serviceNameSelectHelpText",{defaultMessage:"Choose the service you want to configure."})},isReadOnly?_react.default.createElement(_eui.EuiText,null,(0,_agent_configuration_constants.getOptionLabel)(serviceName)):_react.default.createElement(_SelectWithPlaceholder.SelectWithPlaceholder,{placeholder:SELECT_PLACEHOLDER_LABEL,isLoading:serviceNamesStatus==="loading",options:serviceNameOptions,value:serviceName,disabled:serviceNamesStatus==="loading",onChange:function onChange(e){e.preventDefault();setServiceName(e.target.value);setEnvironment("")}})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.serviceSection.serviceEnvironmentSelectLabel",{defaultMessage:"Environment"}),helpText:!isReadOnly&&_i18n.i18n.translate("xpack.apm.settings.agentConf.flyOut.serviceSection.serviceEnvironmentSelectHelpText",{defaultMessage:"Only a single environment per configuration is supported."})},isReadOnly?_react.default.createElement(_eui.EuiText,null,(0,_agent_configuration_constants.getOptionLabel)(environment)):_react.default.createElement(_SelectWithPlaceholder.SelectWithPlaceholder,{placeholder:SELECT_PLACEHOLDER_LABEL,isLoading:environmentStatus==="loading",options:environmentOptions,value:environment,disabled:!serviceName||environmentStatus==="loading",onChange:function onChange(e){e.preventDefault();setEnvironment(e.target.value)}})))}},4466:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeleteButton=DeleteButton;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _useCallApmApi=__webpack_require__(449);var _agent_configuration_constants=__webpack_require__(461);var _useApmPluginContext=__webpack_require__(80);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function DeleteButton(_ref){var onDeleted=_ref.onDeleted,selectedConfig=_ref.selectedConfig;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isDeleting=_useState2[0],setIsDeleting=_useState2[1];var toasts=(0,_useApmPluginContext.useApmPluginContext)().core.notifications.toasts;var callApmApi=(0,_useCallApmApi.useCallApmApi)();return _react.default.createElement(_eui.EuiButtonEmpty,{color:"danger",isLoading:isDeleting,iconSide:"right",onClick:function _callee(){return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsDeleting(true);_context.next=3;return regeneratorRuntime.awrap(deleteConfig(callApmApi,selectedConfig,toasts));case 3:setIsDeleting(false);onDeleted();case 5:case"end":return _context.stop()}}}))}},_i18n.i18n.translate("xpack.apm.settings.agentConf.flyout.deleteSection.buttonLabel",{defaultMessage:"Delete"}))}function deleteConfig(callApmApi,selectedConfig,toasts){return regeneratorRuntime.async((function deleteConfig$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return regeneratorRuntime.awrap(callApmApi({pathname:"/api/apm/settings/agent-configuration/{configurationId}",method:"DELETE",params:{path:{configurationId:selectedConfig.id}}}));case 3:toasts.addSuccess({title:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyout.deleteSection.deleteConfigSucceededTitle",{defaultMessage:"Configuration was deleted"}),text:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyout.deleteSection.deleteConfigSucceededText",{defaultMessage:'You have successfully deleted a configuration for "{serviceName}". It will take some time to propagate to the agents.',values:{serviceName:(0,_agent_configuration_constants.getOptionLabel)(selectedConfig.service.name)}})});_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2["catch"](0);toasts.addDanger({title:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyout.deleteSection.deleteConfigFailedTitle",{defaultMessage:"Configuration could not be deleted"}),text:_i18n.i18n.translate("xpack.apm.settings.agentConf.flyout.deleteSection.deleteConfigFailedText",{defaultMessage:'Something went wrong when deleting a configuration for "{serviceName}". Error: "{errorMessage}"',values:{serviceName:(0,_agent_configuration_constants.getOptionLabel)(selectedConfig.service.name),errorMessage:_context2.t0.message}})});case 9:case"end":return _context2.stop()}}}),null,null,[[0,6]])}},4467:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.transactionMaxSpansRt=void 0;var t=_interopRequireWildcard(__webpack_require__(57));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var transactionMaxSpansRt=new t.Type("transactionMaxSpans",t.number.is,(function(input,context){var value=parseInt(input,10);return value>=0&&value<=32e3?t.success(value):t.failure(input,context)}),t.identity);exports.transactionMaxSpansRt=transactionMaxSpansRt},4468:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.saveConfig=saveConfig;var _i18n=__webpack_require__(2);var _use_track_metric=__webpack_require__(190);var _agent_name=__webpack_require__(460);var _agent_configuration_constants=__webpack_require__(461);function saveConfig(_ref){var callApmApi,serviceName,environment,sampleRate,captureBody,transactionMaxSpans,configurationId,agentName,toasts,settings,configuration;return regeneratorRuntime.async((function saveConfig$(_context){while(1){switch(_context.prev=_context.next){case 0:callApmApi=_ref.callApmApi,serviceName=_ref.serviceName,environment=_ref.environment,sampleRate=_ref.sampleRate,captureBody=_ref.captureBody,transactionMaxSpans=_ref.transactionMaxSpans,configurationId=_ref.configurationId,agentName=_ref.agentName,toasts=_ref.toasts;(0,_use_track_metric.trackEvent)({app:"apm",name:"save_agent_configuration"});_context.prev=2;settings={transaction_sample_rate:Number(sampleRate)};if(!(0,_agent_name.isRumAgentName)(agentName)){settings.capture_body=captureBody;settings.transaction_max_spans=Number(transactionMaxSpans)}configuration={agent_name:agentName,service:{name:(0,_agent_configuration_constants.omitAllOption)(serviceName),environment:(0,_agent_configuration_constants.omitAllOption)(environment)},settings:settings};if(!configurationId){_context.next=11;break}_context.next=9;return regeneratorRuntime.awrap(callApmApi({pathname:"/api/apm/settings/agent-configuration/{configurationId}",method:"PUT",params:{path:{configurationId:configurationId},body:configuration}}));case 9:_context.next=13;break;case 11:_context.next=13;return regeneratorRuntime.awrap(callApmApi({pathname:"/api/apm/settings/agent-configuration/new",method:"POST",params:{body:configuration}}));case 13:toasts.addSuccess({title:_i18n.i18n.translate("xpack.apm.settings.agentConf.saveConfig.succeeded.title",{defaultMessage:"Configuration saved"}),text:_i18n.i18n.translate("xpack.apm.settings.agentConf.saveConfig.succeeded.text",{defaultMessage:'The configuration for "{serviceName}" was saved. It will take some time to propagate to the agents.',values:{serviceName:(0,_agent_configuration_constants.getOptionLabel)(serviceName)}})});_context.next=19;break;case 16:_context.prev=16;_context.t0=_context["catch"](2);toasts.addDanger({title:_i18n.i18n.translate("xpack.apm.settings.agentConf.saveConfig.failed.title",{defaultMessage:"Configuration could not be saved"}),text:_i18n.i18n.translate("xpack.apm.settings.agentConf.saveConfig.failed.text",{defaultMessage:'Something went wrong when saving the configuration for "{serviceName}". Error: "{errorMessage}"',values:{serviceName:(0,_agent_configuration_constants.getOptionLabel)(serviceName),errorMessage:_context.t0.message}})});case 19:case"end":return _context.stop()}}}),null,null,[[2,16]])}},4469:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ApmIndices=ApmIndices;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);var _useFetcher2=__webpack_require__(54);var _useCallApmApi=__webpack_require__(449);var _callApi=__webpack_require__(365);var _useApmPluginContext=__webpack_require__(80);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var APM_INDEX_LABELS=[{configurationName:"apm_oss.sourcemapIndices",label:_i18n.i18n.translate("xpack.apm.settings.apmIndices.sourcemapIndicesLabel",{defaultMessage:"Sourcemap Indices"})},{configurationName:"apm_oss.errorIndices",label:_i18n.i18n.translate("xpack.apm.settings.apmIndices.errorIndicesLabel",{defaultMessage:"Error Indices"})},{configurationName:"apm_oss.onboardingIndices",label:_i18n.i18n.translate("xpack.apm.settings.apmIndices.onboardingIndicesLabel",{defaultMessage:"Onboarding Indices"})},{configurationName:"apm_oss.spanIndices",label:_i18n.i18n.translate("xpack.apm.settings.apmIndices.spanIndicesLabel",{defaultMessage:"Span Indices"})},{configurationName:"apm_oss.transactionIndices",label:_i18n.i18n.translate("xpack.apm.settings.apmIndices.transactionIndicesLabel",{defaultMessage:"Transaction Indices"})},{configurationName:"apm_oss.metricsIndices",label:_i18n.i18n.translate("xpack.apm.settings.apmIndices.metricsIndicesLabel",{defaultMessage:"Metrics Indices"})}];function saveApmIndices(_ref){var callApmApi,apmIndices;return regeneratorRuntime.async((function saveApmIndices$(_context){while(1){switch(_context.prev=_context.next){case 0:callApmApi=_ref.callApmApi,apmIndices=_ref.apmIndices;_context.next=3;return regeneratorRuntime.awrap(callApmApi({method:"POST",pathname:"/api/apm/settings/apm-indices/save",params:{body:apmIndices}}));case 3:(0,_callApi.clearCache)();case 4:case"end":return _context.stop()}}}))}var INITIAL_STATE=[];function ApmIndices(){var toasts=(0,_useApmPluginContext.useApmPluginContext)().core.notifications.toasts;var _useState=(0,_react.useState)({}),_useState2=_slicedToArray(_useState,2),apmIndices=_useState2[0],setApmIndices=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isSaving=_useState4[0],setIsSaving=_useState4[1];var callApmApiFromHook=(0,_useCallApmApi.useCallApmApi)();var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){return callApmApi({pathname:"/api/apm/settings/apm-index-settings"})}),[]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?INITIAL_STATE:_useFetcher$data,status=_useFetcher.status,refetch=_useFetcher.refetch;(0,_react.useEffect)((function(){setApmIndices(data.reduce((function(acc,_ref2){var configurationName=_ref2.configurationName,savedValue=_ref2.savedValue;return _objectSpread({},acc,_defineProperty({},configurationName,savedValue))}),{}))}),[data]);var handleApplyChangesEvent=function handleApplyChangesEvent(event){return regeneratorRuntime.async((function handleApplyChangesEvent$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();setIsSaving(true);_context2.prev=2;_context2.next=5;return regeneratorRuntime.awrap(saveApmIndices({callApmApi:callApmApiFromHook,apmIndices:apmIndices}));case 5:toasts.addSuccess({title:_i18n.i18n.translate("xpack.apm.settings.apmIndices.applyChanges.succeeded.title",{defaultMessage:"Indices applied"}),text:_i18n.i18n.translate("xpack.apm.settings.apmIndices.applyChanges.succeeded.text",{defaultMessage:"The indices changes were successfully applied. These changes are reflected immediately in the APM UI"})});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](2);toasts.addDanger({title:_i18n.i18n.translate("xpack.apm.settings.apmIndices.applyChanges.failed.title",{defaultMessage:"Indices could not be applied."}),text:_i18n.i18n.translate("xpack.apm.settings.apmIndices.applyChanges.failed.text",{defaultMessage:"Something went wrong when applying indices. Error: {errorMessage}",values:{errorMessage:_context2.t0.message}})});case 11:setIsSaving(false);case 12:case"end":return _context2.stop()}}}),null,null,[[2,8]])};var handleChangeIndexConfigurationEvent=function handleChangeIndexConfigurationEvent(event){var _event$target,name,value;return regeneratorRuntime.async((function handleChangeIndexConfigurationEvent$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_event$target=event.target,name=_event$target.name,value=_event$target.value;setApmIndices(_objectSpread({},apmIndices,_defineProperty({},name,value)));case 2:case"end":return _context3.stop()}}}))};return _react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.settings.apmIndices.title",{defaultMessage:"Indices"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiText,{size:"s",grow:false},_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.settings.apmIndices.description",{defaultMessage:"The APM UI uses index patterns to query your APM indices. If you've customized the index names that APM Server writes events to, you may need to update these patterns for the APM UI to work. Settings here take precedence over those set in kibana.yml."})),_react.default.createElement(_eui.EuiForm,null,APM_INDEX_LABELS.map((function(_ref3){var configurationName=_ref3.configurationName,label=_ref3.label;var matchedConfiguration=data.find((function(_ref4){var configName=_ref4.configurationName;return configName===configurationName}));var defaultValue=matchedConfiguration?matchedConfiguration.defaultValue:"";var savedUiIndexValue=apmIndices[configurationName]||"";return _react.default.createElement(_eui.EuiFormRow,{key:configurationName,label:label,helpText:_i18n.i18n.translate("xpack.apm.settings.apmIndices.helpText",{defaultMessage:"Overrides {configurationName}: {defaultValue}",values:{configurationName:configurationName,defaultValue:defaultValue}}),fullWidth:true},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,name:configurationName,placeholder:defaultValue,value:savedUiIndexValue,onChange:handleChangeIndexConfigurationEvent}))})),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:refetch},_i18n.i18n.translate("xpack.apm.settings.apmIndices.cancelButton",{defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,onClick:handleApplyChangesEvent,isLoading:isSaving,disabled:status!=="success"},_i18n.i18n.translate("xpack.apm.settings.apmIndices.applyButton",{defaultMessage:"Apply changes"})))))))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))}},4470:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceNodeMetrics=ServiceNodeMetrics;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(2);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _react2=__webpack_require__(4);var _service_nodes=__webpack_require__(833);var _ApmHeader=__webpack_require__(451);var _useUrlParams2=__webpack_require__(45);var _useAgentName2=__webpack_require__(1538);var _useServiceMetricCharts=__webpack_require__(1534);var _ChartsSyncContext=__webpack_require__(456);var _MetricsChart=__webpack_require__(1535);var _useFetcher2=__webpack_require__(54);var _variables=__webpack_require__(38);var _ElasticDocsLink=__webpack_require__(583);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INITIAL_DATA={host:"",containerId:""};var Truncate=_styledComponents.default.span.withConfig({displayName:"Truncate",componentId:"sc-1e367jm-0"})(["display:block;",""],(0,_variables.truncate)((0,_variables.px)(_variables.unit*12)));function ServiceNodeMetrics(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var serviceName=urlParams.serviceName,serviceNodeName=urlParams.serviceNodeName;var _useAgentName=(0,_useAgentName2.useAgentName)(),agentName=_useAgentName.agentName;var _useServiceMetricChar=(0,_useServiceMetricCharts.useServiceMetricCharts)(urlParams,agentName),data=_useServiceMetricChar.data;var start=urlParams.start,end=urlParams.end;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&serviceNodeName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/node/{serviceNodeName}/metadata",params:{path:{serviceName:serviceName,serviceNodeName:serviceNodeName},query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,serviceNodeName,start,end,uiFilters]),_useFetcher$data=_useFetcher.data;_useFetcher$data=_useFetcher$data===void 0?INITIAL_DATA:_useFetcher$data;var host=_useFetcher$data.host,containerId=_useFetcher$data.containerId,status=_useFetcher.status;var isLoading=status===_useFetcher2.FETCH_STATUS.LOADING;var isAggregatedData=serviceNodeName===_service_nodes.SERVICE_NODE_NAME_MISSING;return _react.default.createElement("div",null,_react.default.createElement(_ApmHeader.ApmHeader,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,serviceName))))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"m"}),isAggregatedData?_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.apm.serviceNodeMetrics.unidentifiedServiceNodesWarningTitle",{defaultMessage:"Could not identify JVMs"}),iconType:"help",color:"warning"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.apm.serviceNodeMetrics.unidentifiedServiceNodesWarningText",defaultMessage:"We could not identify which JVMs these metrics belong to. This is likely caused by running a version of APM Server that is older than 7.5. Upgrading to APM Server 7.5 or higher should resolve this issue. For more information on upgrading, see the {link}. As an alternative, you can use the Kibana Query bar to filter by hostname, container ID or other fields.",values:{link:_react.default.createElement(_ElasticDocsLink.ElasticDocsLink,{target:"_blank",section:"/apm/server",path:"/upgrading.html"},_i18n.i18n.translate("xpack.apm.serviceNodeMetrics.unidentifiedServiceNodesWarningDocumentationLink",{defaultMessage:"documentation of APM Server"}))}})):_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xl"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiStat,{titleSize:"s",isLoading:isLoading,description:_i18n.i18n.translate("xpack.apm.serviceNodeMetrics.host",{defaultMessage:"Host"}),title:_react.default.createElement(_eui.EuiToolTip,{content:host},_react.default.createElement(Truncate,null,host))})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiStat,{titleSize:"s",isLoading:isLoading,description:_i18n.i18n.translate("xpack.apm.serviceNodeMetrics.containerId",{defaultMessage:"Container ID"}),title:_react.default.createElement(_eui.EuiToolTip,{content:containerId},_react.default.createElement(Truncate,null,containerId))}))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"m"}),agentName&&serviceNodeName&&_react.default.createElement(_ChartsSyncContext.ChartsSyncContextProvider,null,_react.default.createElement(_eui.EuiFlexGrid,{columns:2,gutterSize:"s"},data.charts.map((function(chart){return _react.default.createElement(_eui.EuiFlexItem,{key:chart.key},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_MetricsChart.MetricsChart,{start:start,end:end,chart:chart})))}))),_react.default.createElement(_eui.EuiSpacer,{size:"xxl"})))}},4471:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceLink=void 0;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _reactRouterDom=__webpack_require__(23);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _url=_interopRequireDefault(__webpack_require__(71));var _elasticsearch_fieldnames=__webpack_require__(170);var _useFetcher2=__webpack_require__(54);var _useUrlParams2=__webpack_require__(45);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CentralizedContainer=_styledComponents.default.div.withConfig({displayName:"CentralizedContainer",componentId:"p7bj0u-0"})(["height:100%;display:flex;"]);var redirectToTransactionDetailPage=function redirectToTransactionDetailPage(_ref){var transaction=_ref.transaction,rangeFrom=_ref.rangeFrom,rangeTo=_ref.rangeTo;return _url.default.format({pathname:"/services/".concat(transaction.service.name,"/transactions/view"),query:{traceId:transaction.trace.id,transactionId:transaction.transaction.id,transactionName:transaction.transaction.name,transactionType:transaction.transaction.type,rangeFrom:rangeFrom,rangeTo:rangeTo}})};var redirectToTracePage=function redirectToTracePage(_ref2){var traceId=_ref2.traceId,rangeFrom=_ref2.rangeFrom,rangeTo=_ref2.rangeTo;return _url.default.format({pathname:"/traces",query:{kuery:encodeURIComponent("".concat(_elasticsearch_fieldnames.TRACE_ID,' : "').concat(traceId,'"')),rangeFrom:rangeFrom,rangeTo:rangeTo}})};var TraceLink=function TraceLink(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var traceId=urlParams.traceIdLink,rangeFrom=urlParams.rangeFrom,rangeTo=urlParams.rangeTo;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(traceId){return callApmApi({pathname:"/api/apm/transaction/{traceId}",params:{path:{traceId:traceId}}})}}),[traceId]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?{transaction:null}:_useFetcher$data,status=_useFetcher.status;if(traceId&&status===_useFetcher2.FETCH_STATUS.SUCCESS){var to=data.transaction?redirectToTransactionDetailPage({transaction:data.transaction,rangeFrom:rangeFrom,rangeTo:rangeTo}):redirectToTracePage({traceId:traceId,rangeFrom:rangeFrom,rangeTo:rangeTo});return _react.default.createElement(_reactRouterDom.Redirect,{to:to})}return _react.default.createElement(CentralizedContainer,null,_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"apmTrace",title:_react.default.createElement("h2",null,"Fetching trace...")}))};exports.TraceLink=TraceLink},4472:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ScrollToTopOnPathChange=void 0;var _react=__webpack_require__(0);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ScrollToTopOnPathChange=function(_Component){_inherits(ScrollToTopOnPathChange,_Component);function ScrollToTopOnPathChange(){_classCallCheck(this,ScrollToTopOnPathChange);return _possibleConstructorReturn(this,_getPrototypeOf(ScrollToTopOnPathChange).apply(this,arguments))}_createClass(ScrollToTopOnPathChange,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this.props.location.pathname!==prevProps.location.pathname){window.scrollTo(0,0)}}},{key:"render",value:function render(){return null}}]);return ScrollToTopOnPathChange}(_react.Component);exports.ScrollToTopOnPathChange=ScrollToTopOnPathChange},4473:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.UpdateBreadcrumbs=UpdateBreadcrumbs;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);var _ProvideBreadcrumbs=__webpack_require__(4474);var _useApmPluginContext2=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function getTitleFromBreadCrumbs(breadcrumbs){return breadcrumbs.map((function(_ref){var value=_ref.value;return value})).reverse().join(" | ")}var UpdateBreadcrumbsComponent=function(_React$Component){_inherits(UpdateBreadcrumbsComponent,_React$Component);function UpdateBreadcrumbsComponent(){_classCallCheck(this,UpdateBreadcrumbsComponent);return _possibleConstructorReturn(this,_getPrototypeOf(UpdateBreadcrumbsComponent).apply(this,arguments))}_createClass(UpdateBreadcrumbsComponent,[{key:"updateHeaderBreadcrumbs",value:function updateHeaderBreadcrumbs(){var _this=this;var breadcrumbs=this.props.breadcrumbs.map((function(_ref2){var value=_ref2.value,match=_ref2.match;return{text:value,href:(0,_APMLink.getAPMHref)(match.url,_this.props.location.search)}}));document.title=getTitleFromBreadCrumbs(this.props.breadcrumbs);this.props.core.chrome.setBreadcrumbs(breadcrumbs)}},{key:"componentDidMount",value:function componentDidMount(){this.updateHeaderBreadcrumbs()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.updateHeaderBreadcrumbs()}},{key:"render",value:function render(){return null}}]);return UpdateBreadcrumbsComponent}(_react.default.Component);function UpdateBreadcrumbs(_ref3){var routes=_ref3.routes;var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;return _react.default.createElement(_ProvideBreadcrumbs.ProvideBreadcrumbs,{routes:routes,render:function render(_ref4){var breadcrumbs=_ref4.breadcrumbs,location=_ref4.location;return _react.default.createElement(UpdateBreadcrumbsComponent,{breadcrumbs:breadcrumbs,location:location,core:core})}})}},4474:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getBreadcrumb=getBreadcrumb;exports.getBreadcrumbs=getBreadcrumbs;exports.ProvideBreadcrumbs=void 0;var _reactRouterDom=__webpack_require__(23);function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var parse=function parse(options){var breadcrumb=options.breadcrumb,match=options.match,location=options.location;var value;if(typeof breadcrumb==="function"){value=breadcrumb({match:match,location:location})}else{value=breadcrumb}return{value:value,match:match,location:location}};function getBreadcrumb(_ref){var location=_ref.location,currentPath=_ref.currentPath,routes=_ref.routes;return routes.reduce((function(found,_ref2){var breadcrumb=_ref2.breadcrumb,route=_objectWithoutProperties(_ref2,["breadcrumb"]);if(found){return found}if(!breadcrumb){return null}var match=(0,_reactRouterDom.matchPath)(currentPath,route);if(match){return parse({breadcrumb:breadcrumb,match:match,location:location})}return null}),null)}function getBreadcrumbs(_ref3){var routes=_ref3.routes,location=_ref3.location;var breadcrumbs=[];var pathname=location.pathname;pathname.split("?")[0].replace(/\/$/,"").split("/").reduce((function(acc,next){var currentPath=!next?"/":"".concat(acc,"/").concat(next);var breadcrumb=getBreadcrumb({location:location,currentPath:currentPath,routes:routes});if(breadcrumb){breadcrumbs.push(breadcrumb)}return currentPath==="/"?"":currentPath}),"");return breadcrumbs}function ProvideBreadcrumbsComponent(_ref4){var _ref4$routes=_ref4.routes,routes=_ref4$routes===void 0?[]:_ref4$routes,render=_ref4.render,location=_ref4.location,match=_ref4.match,history=_ref4.history;var breadcrumbs=getBreadcrumbs({routes:routes,location:location});return render({breadcrumbs:breadcrumbs,location:location,match:match,history:history})}var ProvideBreadcrumbs=(0,_reactRouterDom.withRouter)(ProvideBreadcrumbsComponent);exports.ProvideBreadcrumbs=ProvideBreadcrumbs},4475:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MatchedRouteProvider=MatchedRouteProvider;exports.MatchedRouteContext=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _reactRouterDom=__webpack_require__(23);var _useLocation2=__webpack_require__(156);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var MatchedRouteContext=_react.default.createContext([]);exports.MatchedRouteContext=MatchedRouteContext;function MatchedRouteProvider(_ref){var children=_ref.children,routes=_ref.routes;var _useLocation=(0,_useLocation2.useLocation)(),pathname=_useLocation.pathname;var contextValue=(0,_react.useMemo)((function(){return routes.filter((function(route){return(0,_reactRouterDom.matchPath)(pathname,{path:route.path})}))}),[pathname,routes]);return _react.default.createElement(MatchedRouteContext.Provider,{value:contextValue,children:children})}},4476:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createStaticIndexPattern=void 0;var _createCallApmApi=__webpack_require__(834);var createStaticIndexPattern=function createStaticIndexPattern(http){var callApmApi;return regeneratorRuntime.async((function createStaticIndexPattern$(_context){while(1){switch(_context.prev=_context.next){case 0:callApmApi=(0,_createCallApmApi.createCallApmApi)(http);_context.next=3;return regeneratorRuntime.awrap(callApmApi({method:"POST",pathname:"/api/apm/index_pattern/static"}));case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}}))};exports.createStaticIndexPattern=createStaticIndexPattern},4477:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getConfigFromInjectedMetadata=getConfigFromInjectedMetadata;var _new_platform=__webpack_require__(7);var core=_new_platform.npStart.core;function getConfigFromInjectedMetadata(){var _core$injectedMetadat=core.injectedMetadata.getInjectedVars(),apmIndexPatternTitle=_core$injectedMetadat.apmIndexPatternTitle,apmServiceMapEnabled=_core$injectedMetadat.apmServiceMapEnabled,apmUiEnabled=_core$injectedMetadat.apmUiEnabled;return{indexPatternTitle:"".concat(apmIndexPatternTitle),serviceMapEnabled:!!apmServiceMapEnabled,ui:{enabled:!!apmUiEnabled}}}},4478:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setHelpExtension=setHelpExtension;var _url=_interopRequireDefault(__webpack_require__(71));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function setHelpExtension(_ref){var chrome=_ref.chrome,http=_ref.http;chrome.setHelpExtension({appName:_i18n.i18n.translate("xpack.apm.feedbackMenu.appName",{defaultMessage:"APM"}),links:[{linkType:"discuss",href:"https://discuss.elastic.co/c/apm"},{linkType:"custom",href:_url.default.format({pathname:http.basePath.prepend("/app/kibana"),hash:"/management/elasticsearch/upgrade_assistant"}),content:_i18n.i18n.translate("xpack.apm.helpMenu.upgradeAssistantLink",{defaultMessage:"Upgrade assistant"})}]})}},4479:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toggleAppLinkInNav=toggleAppLinkInNav;function toggleAppLinkInNav(core,_ref){var ui=_ref.ui;if(ui.enabled===false){core.chrome.navLinks.update("apm",{hidden:true})}}},4480:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setReadonlyBadge=setReadonlyBadge;var _i18n=__webpack_require__(2);function setReadonlyBadge(_ref){var application=_ref.application,chrome=_ref.chrome;var canSave=application.capabilities.apm.save;var setBadge=chrome.setBadge;setBadge(!canSave?{text:_i18n.i18n.translate("xpack.apm.header.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n.i18n.translate("xpack.apm.header.badge.readOnly.tooltip",{defaultMessage:"Unable to save"}),iconType:"glasses"}:undefined)}},4481:function(module,exports,__webpack_require__){},4482:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div id="react-apm-root" class="apmReactRoot"></div>\n'},449:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useCallApmApi=useCallApmApi;var _react=__webpack_require__(0);var _createCallApmApi=__webpack_require__(834);var _useApmPluginContext=__webpack_require__(80);function useCallApmApi(){var http=(0,_useApmPluginContext.useApmPluginContext)().core.http;return(0,_react.useMemo)((function(){return(0,_createCallApmApi.createCallApmApi)(http)}),[http])}},45:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useUrlParams=useUrlParams;var _react=__webpack_require__(0);var _UrlParamsContext=__webpack_require__(452);function useUrlParams(){return(0,_react.useContext)(_UrlParamsContext.UrlParamsContext)}},450:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ApmPluginContext=void 0;var _react=__webpack_require__(0);var ApmPluginContext=(0,_react.createContext)({});exports.ApmPluginContext=ApmPluginContext},451:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ApmHeader=void 0;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _KueryBar=__webpack_require__(4300);var _DatePicker=__webpack_require__(4308);var _EnvironmentFilter=__webpack_require__(4309);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ApmHeader=function ApmHeader(_ref){var children=_ref.children;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,children),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_DatePicker.DatePicker,null))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:3},_react.default.createElement(_KueryBar.KueryBar,null)),_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_EnvironmentFilter.EnvironmentFilter,null))))};exports.ApmHeader=ApmHeader},452:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useUiFilters=useUiFilters;exports.UrlParamsProvider=exports.UrlParamsContext=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _reactRouterDom=__webpack_require__(23);var _lodash=__webpack_require__(3);var _helpers=__webpack_require__(835);var _resolveUrlParams=__webpack_require__(1510);var _config=__webpack_require__(837);var _pickKeys=__webpack_require__(188);var _useDeepObjectIdentity=__webpack_require__(1511);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function useUiFilters(params){var kuery=params.kuery,environment=params.environment,urlParams=_objectWithoutProperties(params,["kuery","environment"]);var localUiFilters=(0,_lodash.mapValues)(_pickKeys.pickKeys.apply(void 0,[urlParams].concat(_toConsumableArray(_config.localUIFilterNames))),(function(val){return val?val.split(","):[]}));return(0,_useDeepObjectIdentity.useDeepObjectIdentity)(_objectSpread({kuery:kuery,environment:environment},localUiFilters))}var defaultRefresh=function defaultRefresh(time){};var UrlParamsContext=(0,_react.createContext)({urlParams:{},refreshTimeRange:defaultRefresh,uiFilters:{}});exports.UrlParamsContext=UrlParamsContext;var UrlParamsProvider=(0,_reactRouterDom.withRouter)((function(_ref){var location=_ref.location,children=_ref.children;var refUrlParams=(0,_react.useRef)((0,_resolveUrlParams.resolveUrlParams)(location,{}));var _refUrlParams$current=refUrlParams.current,start=_refUrlParams$current.start,end=_refUrlParams$current.end,rangeFrom=_refUrlParams$current.rangeFrom,rangeTo=_refUrlParams$current.rangeTo;var _useState=(0,_react.useState)(""),_useState2=_slicedToArray(_useState,2),forceUpdate=_useState2[1];var urlParams=(0,_react.useMemo)((function(){return(0,_resolveUrlParams.resolveUrlParams)(location,{start:start,end:end,rangeFrom:rangeFrom,rangeTo:rangeTo})}),[location,start,end,rangeFrom,rangeTo]);refUrlParams.current=urlParams;var refreshTimeRange=(0,_react.useCallback)((function(timeRange){refUrlParams.current=_objectSpread({},refUrlParams.current,{start:(0,_helpers.getParsedDate)(timeRange.rangeFrom),end:(0,_helpers.getParsedDate)(timeRange.rangeTo,{roundUp:true})});forceUpdate((0,_lodash.uniqueId)())}),[forceUpdate]);var uiFilters=useUiFilters(urlParams);var contextValue=(0,_react.useMemo)((function(){return{urlParams:urlParams,refreshTimeRange:refreshTimeRange,uiFilters:uiFilters}}),[urlParams,refreshTimeRange,uiFilters]);return _react.default.createElement(UrlParamsContext.Provider,{children:children,value:contextValue})}));exports.UrlParamsProvider=UrlParamsProvider},453:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmptyMessage=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmptyMessage=function EmptyMessage(_ref){var _ref$heading=_ref.heading,heading=_ref$heading===void 0?_i18n.i18n.translate("xpack.apm.emptyMessage.noDataFoundLabel",{defaultMessage:"No data found."}):_ref$heading,_ref$subheading=_ref.subheading,subheading=_ref$subheading===void 0?_i18n.i18n.translate("xpack.apm.emptyMessage.noDataFoundDescription",{defaultMessage:"Try another time range or reset the search filter."}):_ref$subheading,_ref$hideSubheading=_ref.hideSubheading,hideSubheading=_ref$hideSubheading===void 0?false:_ref$hideSubheading;return _react.default.createElement(_eui.EuiEmptyPrompt,{titleSize:"s",title:_react.default.createElement("div",null,heading),body:!hideSubheading&&subheading})};exports.EmptyMessage=EmptyMessage},454:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimestampTooltip=TimestampTooltip;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _momentTimezone=_interopRequireDefault(__webpack_require__(35));var _formatters=__webpack_require__(85);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TimestampTooltip(_ref){var time=_ref.time,_ref$timeUnit=_ref.timeUnit,timeUnit=_ref$timeUnit===void 0?"milliseconds":_ref$timeUnit;var momentTime=(0,_momentTimezone.default)(time);var relativeTimeLabel=momentTime.fromNow();var absoluteTimeLabel=(0,_formatters.asAbsoluteDateTime)(time,timeUnit);return _react.default.createElement(_eui.EuiToolTip,{content:absoluteTimeLabel},_react.default.createElement(_react.default.Fragment,null,relativeTimeLabel))}},455:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Legend=exports.Indicator=exports.Shape=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var Shape;exports.Shape=Shape;(function(Shape){Shape["circle"]="circle";Shape["square"]="square"})(Shape||(exports.Shape=Shape={}));var Container=_styledComponents.default.div.withConfig({displayName:"Container",componentId:"ay18rd-0"})(["display:flex;align-items:center;font-size:",";color:",";cursor:",";opacity:",";user-select:none;"],(function(props){return props.fontSize}),_eui_theme_light.default.euiColorDarkShade,(function(props){return props.clickable?"pointer":"initial"}),(function(props){return props.disabled?.4:1}));var Indicator=_styledComponents.default.span.withConfig({displayName:"Indicator",componentId:"ay18rd-1"})(["width:",";height:",";margin-right:",";background:",";border-radius:",";"],(function(props){return(0,_variables.px)(props.radius)}),(function(props){return(0,_variables.px)(props.radius)}),(function(props){return props.withMargin?(0,_variables.px)(props.radius/2):0}),(function(props){return props.color}),(function(props){return props.shape===Shape.circle?"100%":"0"}));exports.Indicator=Indicator;var Legend=function Legend(_ref){var onClick=_ref.onClick,text=_ref.text,_ref$color=_ref.color,color=_ref$color===void 0?_eui_theme_light.default.euiColorVis1:_ref$color,_ref$fontSize=_ref.fontSize,fontSize=_ref$fontSize===void 0?_variables.fontSizes.small:_ref$fontSize,_ref$radius=_ref.radius,radius=_ref$radius===void 0?_variables.units.minus-1:_ref$radius,_ref$disabled=_ref.disabled,disabled=_ref$disabled===void 0?false:_ref$disabled,_ref$clickable=_ref.clickable,clickable=_ref$clickable===void 0?false:_ref$clickable,_ref$shape=_ref.shape,shape=_ref$shape===void 0?Shape.circle:_ref$shape,indicator=_ref.indicator,rest=_objectWithoutProperties(_ref,["onClick","text","color","fontSize","radius","disabled","clickable","shape","indicator"]);return _react.default.createElement(Container,_extends({onClick:onClick,disabled:disabled,clickable:clickable||Boolean(onClick),fontSize:fontSize},rest),indicator?indicator():_react.default.createElement(Indicator,{color:color,radius:radius,shape:shape,withMargin:!!text}),text)};exports.Legend=Legend},456:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ChartsSyncContextProvider=exports.ChartsSyncContext=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _url_helpers=__webpack_require__(95);var _history=__webpack_require__(136);var _useUrlParams2=__webpack_require__(45);var _useFetcher2=__webpack_require__(54);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var ChartsSyncContext=_react.default.createContext(null);exports.ChartsSyncContext=ChartsSyncContext;var ChartsSyncContextProvider=function ChartsSyncContextProvider(_ref){var children=_ref.children;var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),time=_useState2[0],setTime=_useState2[1];var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var start=urlParams.start,end=urlParams.end,serviceName=urlParams.serviceName;var environment=uiFilters.environment;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(start&&end&&serviceName){return callApmApi({pathname:"/api/apm/services/{serviceName}/annotations",params:{path:{serviceName:serviceName},query:{start:start,end:end,environment:environment}}})}}),[start,end,environment,serviceName]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?{annotations:[]}:_useFetcher$data;var value=(0,_react.useMemo)((function(){var hoverXHandlers={onHover:function onHover(hoverX){setTime(hoverX)},onMouseLeave:function onMouseLeave(){setTime(null)},onSelectionEnd:function onSelectionEnd(range){setTime(null);var currentSearch=(0,_url_helpers.toQuery)(_history.history.location.search);var nextSearch={rangeFrom:new Date(range.start).toISOString(),rangeTo:new Date(range.end).toISOString()};_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},currentSearch,{},nextSearch))}))},hoverX:time,annotations:data.annotations};return _objectSpread({},hoverXHandlers)}),[time,data.annotations]);return _react.default.createElement(ChartsSyncContext.Provider,{value:value,children:children})};exports.ChartsSyncContextProvider=ChartsSyncContextProvider},457:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPlotValues=getPlotValues;exports.SharedPlot=SharedPlot;var _lodash=__webpack_require__(3);var _d3Scale=__webpack_require__(253);var _reactVis=__webpack_require__(230);var _d2=_interopRequireDefault(__webpack_require__(48));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireDefault(__webpack_require__(0));var _variables=__webpack_require__(38);var _timezone=__webpack_require__(1524);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var XY_HEIGHT=_variables.unit*16;var XY_MARGIN={top:_variables.unit,left:_variables.unit*5,right:0,bottom:_variables.unit*2};var getXScale=function getXScale(xMin,xMax,width){return(0,_d3Scale.scaleLinear)().domain([xMin,xMax]).range([XY_MARGIN.left,width-XY_MARGIN.right])};var getYScale=function getYScale(yMin,yMax){return(0,_d3Scale.scaleLinear)().domain([yMin,yMax]).range([XY_HEIGHT,0]).nice()};function getFlattenedCoordinates(visibleSeries,enabledSeries){var enabledCoordinates=(0,_lodash.flatten)(enabledSeries.map((function(serie){return serie.data})));if(!(0,_lodash.isEmpty)(enabledCoordinates)){return enabledCoordinates}return(0,_lodash.flatten)(visibleSeries.map((function(serie){return serie.data})))}function getPlotValues(visibleSeries,enabledSeries,_ref){var width=_ref.width,_ref$yMin=_ref.yMin,yMin=_ref$yMin===void 0?0:_ref$yMin,_ref$yMax=_ref.yMax,yMax=_ref$yMax===void 0?"max":_ref$yMax,height=_ref.height,stackBy=_ref.stackBy;var flattenedCoordinates=getFlattenedCoordinates(visibleSeries,enabledSeries);var xMin=_d2.default.min(flattenedCoordinates,(function(d){return d.x}));var xMax=_d2.default.max(flattenedCoordinates,(function(d){return d.x}));if(yMax==="max"){yMax=_d2.default.max(flattenedCoordinates,(function(d){var _d$y;return(_d$y=d.y)!==null&&_d$y!==void 0?_d$y:0}))}if(yMin==="min"){yMin=_d2.default.min(flattenedCoordinates,(function(d){var _d$y2;return(_d$y2=d.y)!==null&&_d$y2!==void 0?_d$y2:0}))}var _getDomainTZ=(0,_timezone.getDomainTZ)(xMin,xMax),_getDomainTZ2=_slicedToArray(_getDomainTZ,2),xMinZone=_getDomainTZ2[0],xMaxZone=_getDomainTZ2[1];var xScale=getXScale(xMin,xMax,width);var yScale=getYScale(yMin,yMax);var yMaxNice=yScale.domain()[1];var yTickValues=[0,yMaxNice/2,yMaxNice];var xTickTotal=Math.floor(width/100);var xTickValues=(0,_timezone.getTimeTicksTZ)({domain:[xMinZone,xMaxZone],totalTicks:xTickTotal,width:width});return{x:xScale,y:yScale,xTickValues:xTickValues,yTickValues:yTickValues,XY_MARGIN:XY_MARGIN,XY_HEIGHT:height||XY_HEIGHT,XY_WIDTH:width,stackBy:stackBy}}function SharedPlot(_ref2){var plotValues=_ref2.plotValues,props=_objectWithoutProperties(_ref2,["plotValues"]);var height=plotValues.XY_HEIGHT,margin=plotValues.XY_MARGIN,width=plotValues.XY_WIDTH;return _react.default.createElement("div",{style:{position:"absolute",top:0,left:0,pointerEvents:"none"}},_react.default.createElement(_reactVis.XYPlot,_extends({dontCheckIfEmpty:true,height:height,margin:margin,xType:"time-utc",width:width,xDomain:plotValues.x.domain(),yDomain:plotValues.y.domain(),stackBy:plotValues.stackBy},props)))}SharedPlot.propTypes={plotValues:_propTypes.default.shape({x:_propTypes.default.func.isRequired,y:_propTypes.default.func.isRequired,XY_WIDTH:_propTypes.default.number.isRequired,height:_propTypes.default.number}).isRequired}},458:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidCoordinateValue=void 0;var isValidCoordinateValue=function isValidCoordinateValue(value){return value!==null&&value!==undefined};exports.isValidCoordinateValue=isValidCoordinateValue},460:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAgentName=isAgentName;exports.isRumAgentName=isRumAgentName;exports.isJavaAgentName=isJavaAgentName;var agentNames={python:"python",java:"java",nodejs:"nodejs","js-base":"js-base","rum-js":"rum-js",dotnet:"dotnet",ruby:"ruby",go:"go"};function isAgentName(agentName){return Object.values(agentNames).includes(agentName)}function isRumAgentName(agentName){return agentName===agentNames["js-base"]||agentName===agentNames["rum-js"]}function isJavaAgentName(agentName){return agentName===agentNames.java}},461:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getOptionLabel=getOptionLabel;exports.omitAllOption=omitAllOption;exports.ALL_OPTION_VALUE=void 0;var _i18n=__webpack_require__(2);var ALL_OPTION_VALUE="ALL_OPTION_VALUE";exports.ALL_OPTION_VALUE=ALL_OPTION_VALUE;function getOptionLabel(value){if(value===undefined||value===ALL_OPTION_VALUE){return _i18n.i18n.translate("xpack.apm.settings.agentConf.allOptionLabel",{defaultMessage:"All"})}return value}function omitAllOption(value){return value===ALL_OPTION_VALUE?undefined:value}},4647:function(module,exports,__webpack_require__){module.exports=__webpack_require__(34)(1784)},4659:function(module,exports,__webpack_require__){module.exports=__webpack_require__(26)(2709)},4739:function(module,exports,__webpack_require__){module.exports=__webpack_require__(17)(3100)},4747:function(module,exports,__webpack_require__){module.exports=__webpack_require__(36)(2363)},4845:function(module,exports,__webpack_require__){module.exports=__webpack_require__(36)(2640)},50:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiDarkTheme},51:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLibServices},5361:function(module,exports,__webpack_require__){module.exports=__webpack_require__(26)(2712)},5397:function(module,exports,__webpack_require__){module.exports=__webpack_require__(34)(2279)},54:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useFetcher=useFetcher;exports.FETCH_STATUS=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _public=__webpack_require__(16);var _LoadingIndicatorContext=__webpack_require__(1508);var _useComponentId=__webpack_require__(4298);var _useCallApmApi=__webpack_require__(449);var _useApmPluginContext=__webpack_require__(80);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var FETCH_STATUS;exports.FETCH_STATUS=FETCH_STATUS;(function(FETCH_STATUS){FETCH_STATUS["LOADING"]="loading";FETCH_STATUS["SUCCESS"]="success";FETCH_STATUS["FAILURE"]="failure";FETCH_STATUS["PENDING"]="pending"})(FETCH_STATUS||(exports.FETCH_STATUS=FETCH_STATUS={}));function useFetcher(fn,fnDeps){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var notifications=(0,_useApmPluginContext.useApmPluginContext)().core.notifications;var _options$preservePrev=options.preservePreviousData,preservePreviousData=_options$preservePrev===void 0?true:_options$preservePrev;var id=(0,_useComponentId.useComponentId)();var callApmApi=(0,_useCallApmApi.useCallApmApi)();var _useContext=(0,_react.useContext)(_LoadingIndicatorContext.LoadingIndicatorContext),dispatchStatus=_useContext.dispatchStatus;var _useState=(0,_react.useState)({data:undefined,status:FETCH_STATUS.PENDING}),_useState2=_slicedToArray(_useState,2),result=_useState2[0],setResult=_useState2[1];var _useState3=(0,_react.useState)(0),_useState4=_slicedToArray(_useState3,2),counter=_useState4[0],setCounter=_useState4[1];(0,_react.useEffect)((function(){var didCancel=false;function doFetch(){var promise,data,err,_err$response,_err$response2,_err$response3;return regeneratorRuntime.async((function doFetch$(_context){while(1){switch(_context.prev=_context.next){case 0:promise=fn(callApmApi);if(promise){_context.next=3;break}return _context.abrupt("return");case 3:dispatchStatus({id:id,isLoading:true});setResult((function(prevResult){return{data:preservePreviousData?prevResult.data:undefined,status:FETCH_STATUS.LOADING,error:undefined}}));_context.prev=5;_context.next=8;return regeneratorRuntime.awrap(promise);case 8:data=_context.sent;if(!didCancel){dispatchStatus({id:id,isLoading:false});setResult({data:data,status:FETCH_STATUS.SUCCESS,error:undefined})}_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);err=_context.t0;if(!didCancel){notifications.toasts.addWarning({title:_i18n.i18n.translate("xpack.apm.fetcher.error.title",{defaultMessage:"Error while fetching resource"}),text:(0,_public.toMountPoint)(_react.default.createElement("div",null,_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.apm.fetcher.error.status",{defaultMessage:"Error"})),(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.statusText," (",(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status,")",_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.apm.fetcher.error.url",{defaultMessage:"URL"})),(_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.url))});dispatchStatus({id:id,isLoading:false});setResult({data:undefined,status:FETCH_STATUS.FAILURE,error:_context.t0})}case 16:case"end":return _context.stop()}}}),null,null,[[5,12]])}doFetch();return function(){dispatchStatus({id:id,isLoading:false});didCancel=true}}),[counter,id,preservePreviousData,dispatchStatus].concat(_toConsumableArray(fnDeps)));return(0,_react.useMemo)((function(){return _objectSpread({},result,{refetch:function refetch(){setCounter((function(count){return count+1}))}})}),[result])}},5461:function(module,exports,__webpack_require__){module.exports=__webpack_require__(34)(1973)},5670:function(module,exports,__webpack_require__){module.exports=__webpack_require__(36)(2638)},582:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterSectionsByTerm=exports.getSectionsWithRows=void 0;var _lodash=__webpack_require__(3);var _flattenObject=__webpack_require__(1513);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getSectionsWithRows=function getSectionsWithRows(sections,apmDoc){return sections.map((function(section){var sectionData=(0,_lodash.get)(apmDoc,section.key);var filteredData=section.properties?(0,_lodash.pick)(sectionData,section.properties):sectionData;var rows=(0,_flattenObject.flattenObject)(filteredData,section.key);return _objectSpread({},section,{rows:rows})})).filter((function(_ref){var required=_ref.required,rows=_ref.rows;return required||!(0,_lodash.isEmpty)(rows)}))};exports.getSectionsWithRows=getSectionsWithRows;var filterSectionsByTerm=function filterSectionsByTerm(sections,searchTerm){if(!searchTerm){return sections}return sections.map((function(section){var _section$rows=section.rows,rows=_section$rows===void 0?[]:_section$rows;var filteredRows=rows.filter((function(_ref2){var key=_ref2.key,value=_ref2.value;var valueAsString=String(value).toLowerCase();return key.toLowerCase().includes(searchTerm)||valueAsString.includes(searchTerm)}));return _objectSpread({},section,{rows:filteredRows})})).filter((function(_ref3){var rows=_ref3.rows;return!(0,_lodash.isEmpty)(rows)}))};exports.filterSectionsByTerm=filterSectionsByTerm},583:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElasticDocsLink=ElasticDocsLink;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _useApmPluginContext=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function ElasticDocsLink(_ref){var section=_ref.section,path=_ref.path,rest=_objectWithoutProperties(_ref,["section","path"]);var version=(0,_useApmPluginContext.useApmPluginContext)().packageInfo.version;var href="https://www.elastic.co/guide/en".concat(section,"/").concat(version).concat(path);return _react.default.createElement(_eui.EuiLink,_extends({href:href},rest))}},584:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Stacktrace=Stacktrace;exports.getGroupedStackframes=getGroupedStackframes;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _EmptyMessage=__webpack_require__(453);var _LibraryStacktrace=__webpack_require__(4318);var _Stackframe=__webpack_require__(1516);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function Stacktrace(_ref){var _ref$stackframes=_ref.stackframes,stackframes=_ref$stackframes===void 0?[]:_ref$stackframes,codeLanguage=_ref.codeLanguage;if((0,_lodash.isEmpty)(stackframes)){return _react.default.createElement(_EmptyMessage.EmptyMessage,{heading:_i18n.i18n.translate("xpack.apm.stacktraceTab.noStacktraceAvailableLabel",{defaultMessage:"No stack trace available."}),hideSubheading:true})}var groups=getGroupedStackframes(stackframes);return _react.default.createElement(_react.Fragment,null,groups.map((function(group,i){if(group.isLibraryFrame&&groups.length>1){return _react.default.createElement(_react.Fragment,{key:i},_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_LibraryStacktrace.LibraryStacktrace,{id:i.toString(),stackframes:group.stackframes,codeLanguage:codeLanguage}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))}return group.stackframes.map((function(stackframe,idx){return _react.default.createElement(_react.Fragment,{key:"".concat(i,"-").concat(idx)},idx>0&&_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_Stackframe.Stackframe,{codeLanguage:codeLanguage,id:"".concat(i,"-").concat(idx),initialIsOpen:i===0&&groups.length>1,stackframe:stackframe}))}))})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))}function getGroupedStackframes(stackframes){return stackframes.reduce((function(acc,stackframe){var prevGroup=(0,_lodash.last)(acc);var shouldAppend=prevGroup&&prevGroup.isLibraryFrame===stackframe.library_frame&&!prevGroup.excludeFromGrouping&&!stackframe.exclude_from_grouping;if(shouldAppend){prevGroup.stackframes.push(stackframe);return acc}acc.push({isLibraryFrame:Boolean(stackframe.library_frame),excludeFromGrouping:Boolean(stackframe.exclude_from_grouping),stackframes:[stackframe]});return acc}),[])}},585:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LicenseProvider=LicenseProvider;exports.LicenseContext=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactUse=__webpack_require__(1956);var _useApmPluginContext=__webpack_require__(80);var _InvalidLicenseNotification=__webpack_require__(4348);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LicenseContext=_react.default.createContext(undefined);exports.LicenseContext=LicenseContext;function LicenseProvider(_ref){var children=_ref.children;var license$=(0,_useApmPluginContext.useApmPluginContext)().plugins.licensing.license$;var license=(0,_reactUse.useObservable)(license$);var hasInvalidLicense=(license===null||license===void 0?void 0:license.isActive)===false;if(hasInvalidLicense){return _react.default.createElement(_InvalidLicenseNotification.InvalidLicenseNotification,null)}return _react.default.createElement(LicenseContext.Provider,{value:license,children:children})}},586:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(123);var _useUrlParams2=__webpack_require__(45);var _pickKeys=__webpack_require__(188);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var TransactionOverviewLink=function TransactionOverviewLink(_ref){var serviceName=_ref.serviceName,rest=_objectWithoutProperties(_ref,["serviceName"]);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"transactionResult","host","containerId","podName","serviceVersion");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/transactions"),query:persistedFilters},rest))};exports.TransactionOverviewLink=TransactionOverviewLink},78:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nAngular},80:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useApmPluginContext=useApmPluginContext;var _react=__webpack_require__(0);var _ApmPluginContext=__webpack_require__(450);function useApmPluginContext(){return(0,_react.useContext)(_ApmPluginContext.ApmPluginContext)}},833:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SERVICE_NODE_NAME_MISSING=void 0;var SERVICE_NODE_NAME_MISSING="_service_node_name_missing_";exports.SERVICE_NODE_NAME_MISSING=SERVICE_NODE_NAME_MISSING},834:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createCallApmApi=void 0;var _callApi=__webpack_require__(365);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var createCallApmApi=function createCallApmApi(http){return function(options){var pathname=options.pathname,_options$params=options.params,params=_options$params===void 0?{}:_options$params,opts=_objectWithoutProperties(options,["pathname","params"]);var path=params.path||{};var formattedPathname=Object.keys(path).reduce((function(acc,paramName){return acc.replace("{".concat(paramName,"}"),path[paramName])}),pathname);return(0,_callApi.callApi)(http,_objectSpread({},opts,{pathname:formattedPathname,body:params.body,query:params.query}))}};exports.createCallApmApi=createCallApmApi},835:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getParsedDate=getParsedDate;exports.getStart=getStart;exports.getEnd=getEnd;exports.toNumber=toNumber;exports.toString=toString;exports.toBoolean=toBoolean;exports.getPathAsArray=getPathAsArray;exports.removeUndefinedProps=removeUndefinedProps;exports.getPathParams=getPathParams;var _lodash=__webpack_require__(3);var _datemath=_interopRequireDefault(__webpack_require__(77));var _processor_event=__webpack_require__(4306);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getParsedDate(rawDate){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(rawDate){var parsed=_datemath.default.parse(rawDate,opts);if(parsed){return parsed.toISOString()}}}function getStart(prevState,rangeFrom){if(prevState.rangeFrom!==rangeFrom){return getParsedDate(rangeFrom)}return prevState.start}function getEnd(prevState,rangeTo){if(prevState.rangeTo!==rangeTo){return getParsedDate(rangeTo,{roundUp:true})}return prevState.end}function toNumber(value){if(value!==undefined){return parseInt(value,10)}}function toString(value){if(value===""||value==="null"||value==="undefined"){return}return value}function toBoolean(value){return value==="true"}function getPathAsArray(){var pathname=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return(0,_lodash.compact)(pathname.split("/"))}function removeUndefinedProps(obj){return(0,_lodash.pick)(obj,(function(value){return value!==undefined}))}function getPathParams(){var pathname=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var paths=getPathAsArray(pathname);var pageName=paths[0];switch(pageName){case"services":var servicePageName=paths[2];var serviceName=paths[1];var serviceNodeName=paths[3];if(servicePageName==="nodes"&&paths.length>3){servicePageName="metrics"}switch(servicePageName){case"transactions":return{processorEvent:_processor_event.ProcessorEvent.transaction,serviceName:serviceName};case"errors":return{processorEvent:_processor_event.ProcessorEvent.error,serviceName:serviceName,errorGroupId:paths[3]};case"metrics":return{processorEvent:_processor_event.ProcessorEvent.metric,serviceName:serviceName,serviceNodeName:serviceNodeName};case"nodes":return{processorEvent:_processor_event.ProcessorEvent.metric,serviceName:serviceName};case"service-map":return{serviceName:serviceName};default:return{}}case"traces":return{processorEvent:_processor_event.ProcessorEvent.transaction};case"link-to":var link=paths[1];switch(link){case"trace":return{traceId:paths[2]};default:return{}}default:return{}}}},836:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TIMEPICKER_DEFAULTS=exports.LOCATION_UPDATE=exports.TIME_RANGE_REFRESH=void 0;var TIME_RANGE_REFRESH="TIME_RANGE_REFRESH";exports.TIME_RANGE_REFRESH=TIME_RANGE_REFRESH;var LOCATION_UPDATE="LOCATION_UPDATE";exports.LOCATION_UPDATE=LOCATION_UPDATE;var TIMEPICKER_DEFAULTS={rangeFrom:"now-24h",rangeTo:"now",refreshPaused:"true",refreshInterval:"0"};exports.TIMEPICKER_DEFAULTS=TIMEPICKER_DEFAULTS},837:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.localUIFilters=exports.localUIFilterNames=void 0;var _i18n=__webpack_require__(2);var _elasticsearch_fieldnames=__webpack_require__(170);var filtersByName={host:{title:_i18n.i18n.translate("xpack.apm.localFilters.titles.host",{defaultMessage:"Host"}),fieldName:_elasticsearch_fieldnames.HOST_NAME},agentName:{title:_i18n.i18n.translate("xpack.apm.localFilters.titles.agentName",{defaultMessage:"Agent name"}),fieldName:_elasticsearch_fieldnames.SERVICE_AGENT_NAME},containerId:{title:_i18n.i18n.translate("xpack.apm.localFilters.titles.containerId",{defaultMessage:"Container ID"}),fieldName:_elasticsearch_fieldnames.CONTAINER_ID},podName:{title:_i18n.i18n.translate("xpack.apm.localFilters.titles.podName",{defaultMessage:"Pod"}),fieldName:_elasticsearch_fieldnames.POD_NAME},transactionResult:{title:_i18n.i18n.translate("xpack.apm.localFilters.titles.transactionResult",{defaultMessage:"Transaction result"}),fieldName:_elasticsearch_fieldnames.TRANSACTION_RESULT},serviceVersion:{title:_i18n.i18n.translate("xpack.apm.localFilters.titles.serviceVersion",{defaultMessage:"Service version"}),fieldName:_elasticsearch_fieldnames.SERVICE_VERSION}};var localUIFilterNames=Object.keys(filtersByName);exports.localUIFilterNames=localUIFilterNames;var localUIFilters=localUIFilterNames.reduce((function(acc,key){var field=filtersByName[key];return _objectSpread({},acc,_defineProperty({},key,_objectSpread({},field,{name:key})))}),{});exports.localUIFilters=localUIFilters},838:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverLink=DiscoverLink;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _url=_interopRequireDefault(__webpack_require__(71));var _risonNode=_interopRequireDefault(__webpack_require__(163));var _useLocation=__webpack_require__(156);var _rison_helpers=__webpack_require__(1512);var _index_pattern_constants=__webpack_require__(4313);var _useApmPluginContext2=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function DiscoverLink(_ref){var _ref$query=_ref.query,query=_ref$query===void 0?{}:_ref$query,rest=_objectWithoutProperties(_ref,["query"]);var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var location=(0,_useLocation.useLocation)();var risonQuery={_g:(0,_rison_helpers.getTimepickerRisonData)(location.search),_a:_objectSpread({},query._a,{index:_index_pattern_constants.APM_STATIC_INDEX_PATTERN_ID})};var href=_url.default.format({pathname:core.http.basePath.prepend("/app/kibana"),hash:"/discover?_g=".concat(_risonNode.default.encode(risonQuery._g),"&_a=").concat(_risonNode.default.encode(risonQuery._a))});return _react.default.createElement(_eui.EuiLink,_extends({},rest,{href:href}))}},839:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MESSAGE_SPAN=exports.MESSAGE_TRANSACTION=exports.CUSTOM_TRANSACTION=exports.CUSTOM_ERROR=exports.ERROR=exports.TRACE=exports.TRANSACTION=exports.SPAN=exports.PAGE=exports.USER_AGENT=exports.USER=exports.URL=exports.AGENT=exports.PROCESS=exports.SERVICE=exports.CONTAINER=exports.HOST=exports.HTTP=exports.LABELS=void 0;var _i18n=__webpack_require__(2);var LABELS={key:"labels",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.labelsLabel",{defaultMessage:"Labels"})};exports.LABELS=LABELS;var HTTP={key:"http",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.httpLabel",{defaultMessage:"HTTP"})};exports.HTTP=HTTP;var HOST={key:"host",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.hostLabel",{defaultMessage:"Host"})};exports.HOST=HOST;var CONTAINER={key:"container",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.containerLabel",{defaultMessage:"Container"})};exports.CONTAINER=CONTAINER;var SERVICE={key:"service",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.serviceLabel",{defaultMessage:"Service"})};exports.SERVICE=SERVICE;var PROCESS={key:"process",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.processLabel",{defaultMessage:"Process"})};exports.PROCESS=PROCESS;var AGENT={key:"agent",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.agentLabel",{defaultMessage:"Agent"})};exports.AGENT=AGENT;var URL={key:"url",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.urlLabel",{defaultMessage:"URL"})};exports.URL=URL;var USER={key:"user",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.userLabel",{defaultMessage:"User"})};exports.USER=USER;var USER_AGENT={key:"user_agent",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.userAgentLabel",{defaultMessage:"User agent"})};exports.USER_AGENT=USER_AGENT;var PAGE={key:"page",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.pageLabel",{defaultMessage:"Page"})};exports.PAGE=PAGE;var SPAN={key:"span",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.spanLabel",{defaultMessage:"Span"}),properties:["id"]};exports.SPAN=SPAN;var TRANSACTION={key:"transaction",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.transactionLabel",{defaultMessage:"Transaction"}),properties:["id"]};exports.TRANSACTION=TRANSACTION;var TRACE={key:"trace",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.traceLabel",{defaultMessage:"Trace"})};exports.TRACE=TRACE;var ERROR={key:"error",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.errorLabel",{defaultMessage:"Error"}),properties:["id"]};exports.ERROR=ERROR;var customLabel=_i18n.i18n.translate("xpack.apm.metadataTable.section.customLabel",{defaultMessage:"Custom"});var CUSTOM_ERROR={key:"error.custom",label:customLabel};exports.CUSTOM_ERROR=CUSTOM_ERROR;var CUSTOM_TRANSACTION={key:"transaction.custom",label:customLabel};exports.CUSTOM_TRANSACTION=CUSTOM_TRANSACTION;var messageLabel=_i18n.i18n.translate("xpack.apm.metadataTable.section.messageLabel",{defaultMessage:"Message"});var MESSAGE_TRANSACTION={key:"transaction.message",label:messageLabel};exports.MESSAGE_TRANSACTION=MESSAGE_TRANSACTION;var MESSAGE_SPAN={key:"span.message",label:messageLabel};exports.MESSAGE_SPAN=MESSAGE_SPAN},840:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetadataTable=MetadataTable;var _eui=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _lodash=__webpack_require__(3);var _ElasticDocsLink=__webpack_require__(583);var _HeightRetainer=__webpack_require__(1514);var _Section=__webpack_require__(4316);var _history=__webpack_require__(136);var _url_helpers=__webpack_require__(95);var _useLocation=__webpack_require__(156);var _useUrlParams2=__webpack_require__(45);var _helper=__webpack_require__(582);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function MetadataTable(_ref){var sections=_ref.sections;var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var _urlParams$searchTerm=urlParams.searchTerm,searchTerm=_urlParams$searchTerm===void 0?"":_urlParams$searchTerm;var filteredSections=(0,_helper.filterSectionsByTerm)(sections,searchTerm);var onSearchChange=(0,_react.useCallback)((function(e){var value=e.target.value.trim().toLowerCase();_history.history.replace(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{searchTerm:value}))}))}),[location]);var noResultFound=Boolean(searchTerm)&&(0,_lodash.isEmpty)(filteredSections);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_ElasticDocsLink.ElasticDocsLink,{section:"/apm/get-started",path:"/metadata.html"},_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement(_eui.EuiIcon,{type:"help"})," How to add labels and other data"))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFieldSearch,{onChange:onSearchChange,placeholder:_i18n.i18n.translate("xpack.apm.searchInput.filter",{defaultMessage:"Filter..."}),style:{width:400},isInvalid:noResultFound,value:searchTerm}))),_react.default.createElement(_HeightRetainer.HeightRetainer,null,filteredSections.map((function(section){return _react.default.createElement("div",{key:section.key},_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h6",null,section.label)),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_Section.Section,{keyValuePairs:section.rows}),_react.default.createElement(_eui.EuiSpacer,{size:"xl"}))})),noResultFound&&_react.default.createElement(NoResultFound,{value:searchTerm})))}var NoResultFound=function NoResultFound(_ref2){var value=_ref2.value;return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"s"},_i18n.i18n.translate("xpack.apm.propertiesTable.agentFeature.noResultFound",{defaultMessage:'No results for "{value}".',values:{value:value}}))))}},841:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Summary=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _variables=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var theme=_eui_theme_light.default;var Item=(0,_styledComponents.default)(_eui.EuiFlexItem).withConfig({displayName:"Item",componentId:"sc-11nr6pd-0"})(["flex-wrap:nowrap;border-right:1px solid ",";padding-right:",";flex-flow:row nowrap;line-height:1.5;align-items:center !important;&:last-child{border-right:none;padding-right:0;}"],theme.euiColorLightShade,(0,_variables.px)(_variables.units.half));var Summary=function Summary(_ref){var items=_ref.items;var filteredItems=items.filter(Boolean);return _react.default.createElement(_eui.EuiFlexGrid,{gutterSize:"s"},filteredItems.map((function(item,index){return _react.default.createElement(Item,{key:index,grow:false},item)})))};exports.Summary=Summary},842:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asDecimal=asDecimal;exports.asInteger=asInteger;exports.tpmUnit=tpmUnit;exports.asPercent=asPercent;var _numeral=_interopRequireDefault(__webpack_require__(148));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asDecimal(value){return(0,_numeral.default)(value).format("0,0.0")}function asInteger(value){return(0,_numeral.default)(value).format("0,0")}function tpmUnit(type){return type==="request"?_i18n.i18n.translate("xpack.apm.formatters.requestsPerMinLabel",{defaultMessage:"rpm"}):_i18n.i18n.translate("xpack.apm.formatters.transactionsPerMinLabel",{defaultMessage:"tpm"})}function asPercent(numerator,denominator){var fallbackResult=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(!denominator||isNaN(numerator)){return fallbackResult}var decimal=numerator/denominator;return(0,_numeral.default)(decimal).format("0.0%")}},843:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HttpInfoSummaryItem=HttpInfoSummaryItem;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _variables=__webpack_require__(38);var _HttpStatusBadge=__webpack_require__(4329);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HttpInfoBadge=(0,_styledComponents.default)(_eui.EuiBadge).withConfig({displayName:"HttpInfoBadge",componentId:"zm7v59-0"})(["margin-right:",";"],(0,_variables.px)(_variables.units.quarter));var Url=(0,_styledComponents.default)("span").withConfig({displayName:"Url",componentId:"zm7v59-1"})(["display:inline-block;vertical-align:bottom;",";"],(0,_variables.truncate)((0,_variables.px)(_variables.unit*24)));var Span=(0,_styledComponents.default)("span").withConfig({displayName:"Span",componentId:"zm7v59-2"})(["white-space:nowrap;"]);function HttpInfoSummaryItem(_ref){var status=_ref.status,method=_ref.method,url=_ref.url;if(!url){return null}var methodLabel=_i18n.i18n.translate("xpack.apm.transactionDetails.requestMethodLabel",{defaultMessage:"Request method"});return _react.default.createElement(Span,null,_react.default.createElement(HttpInfoBadge,{title:undefined},method&&_react.default.createElement(_eui.EuiToolTip,{content:methodLabel},_react.default.createElement(_react.default.Fragment,null,method.toUpperCase()))," ",_react.default.createElement(_eui.EuiToolTip,{content:url},_react.default.createElement(Url,null,url))),status&&_react.default.createElement(_HttpStatusBadge.HttpStatusBadge,{status:status}))}},844:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTimezoneOffsetInMs=getTimezoneOffsetInMs;var _momentTimezone=_interopRequireDefault(__webpack_require__(35));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getTimezoneOffsetInMs(time){var zone=_momentTimezone.default.defaultZone?_momentTimezone.default.defaultZone.name:_momentTimezone.default.tz.guess();return _momentTimezone.default.tz.zone(zone).parse(time)*6e4}},845:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getResponseTimeTickFormatter=getResponseTimeTickFormatter;exports.getResponseTimeTooltipFormatter=getResponseTimeTooltipFormatter;exports.getMaxY=getMaxY;exports.TransactionCharts=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _styledComponents=_interopRequireDefault(__webpack_require__(30));var _i18n2=__webpack_require__(187);var _formatters=__webpack_require__(85);var _MLJobLink=__webpack_require__(846);var _LicenseContext=__webpack_require__(585);var _TransactionLineChart=__webpack_require__(847);var _isValidCoordinateValue=__webpack_require__(458);var _BrowserLineChart=__webpack_require__(4356);var _DurationByCountryMap=__webpack_require__(4359);var _transaction_types=__webpack_require__(4364);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var ShiftedIconWrapper=_styledComponents.default.span.withConfig({displayName:"ShiftedIconWrapper",componentId:"afb4wy-0"})(["padding-right:5px;position:relative;top:-1px;display:inline-block;"]);var ShiftedEuiText=(0,_styledComponents.default)(_eui.EuiText).withConfig({displayName:"ShiftedEuiText",componentId:"afb4wy-1"})(["position:relative;top:5px;"]);function getResponseTimeTickFormatter(formatter){return function(t){return formatter(t).formatted}}function getResponseTimeTooltipFormatter(formatter){return function(p){return(0,_isValidCoordinateValue.isValidCoordinateValue)(p.y)?formatter(p.y).formatted:_i18n2.NOT_AVAILABLE_LABEL}}function getMaxY(responseTimeSeries){var coordinates=(0,_lodash.flatten)(responseTimeSeries.map((function(serie){return serie.data})));var numbers=coordinates.map((function(c){return c.y?c.y:0}));return Math.max.apply(Math,_toConsumableArray(numbers).concat([0]))}var TransactionCharts=function(_Component){_inherits(TransactionCharts,_Component);function TransactionCharts(){var _getPrototypeOf2;var _this;_classCallCheck(this,TransactionCharts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TransactionCharts)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getTPMFormatter",(function(t){var urlParams=_this.props.urlParams;var unit=(0,_formatters.tpmUnit)(urlParams.transactionType);return"".concat((0,_formatters.asInteger)(t)," ").concat(unit)}));_defineProperty(_assertThisInitialized(_this),"getTPMTooltipFormatter",(function(p){return(0,_isValidCoordinateValue.isValidCoordinateValue)(p.y)?_this.getTPMFormatter(p.y):_i18n2.NOT_AVAILABLE_LABEL}));return _this}_createClass(TransactionCharts,[{key:"renderMLHeader",value:function renderMLHeader(hasValidMlLicense){var hasMLJob=this.props.hasMLJob;if(!hasValidMlLicense||!hasMLJob){return null}var _this$props$urlParams=this.props.urlParams,serviceName=_this$props$urlParams.serviceName,transactionType=_this$props$urlParams.transactionType,kuery=_this$props$urlParams.kuery;if(!serviceName){return null}var hasKuery=!(0,_lodash.isEmpty)(kuery);var icon=hasKuery?_react.default.createElement(_eui.EuiIconTip,{"aria-label":"Warning",type:"alert",color:"warning",content:"The Machine learning results are hidden when the search bar is used for filtering"}):_react.default.createElement(_eui.EuiIconTip,{content:_i18n.i18n.translate("xpack.apm.metrics.transactionChart.machineLearningTooltip",{defaultMessage:"The stream around the average duration shows the expected bounds. An annotation is shown for anomaly scores >= 75."})});return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(ShiftedEuiText,{size:"xs"},_react.default.createElement(ShiftedIconWrapper,null,icon),_react.default.createElement("span",null,_i18n.i18n.translate("xpack.apm.metrics.transactionChart.machineLearningLabel",{defaultMessage:"Machine learning:"})," "),_react.default.createElement(_MLJobLink.MLJobLink,{serviceName:serviceName,transactionType:transactionType},"View Job")))}},{key:"render",value:function render(){var _this2=this;var _this$props=this.props,charts=_this$props.charts,urlParams=_this$props.urlParams;var responseTimeSeries=charts.responseTimeSeries,tpmSeries=charts.tpmSeries;var transactionType=urlParams.transactionType;var maxY=getMaxY(responseTimeSeries);var formatter=(0,_formatters.getDurationFormatter)(maxY);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGrid,{columns:2,gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{"data-cy":"transaction-duration-charts"},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,responseTimeLabel(transactionType)))),_react.default.createElement(_LicenseContext.LicenseContext.Consumer,null,(function(license){return _this2.renderMLHeader(license===null||license===void 0?void 0:license.getFeature("ml").isAvailable)}))),_react.default.createElement(_TransactionLineChart.TransactionLineChart,{series:responseTimeSeries,tickFormatY:getResponseTimeTickFormatter(formatter),formatTooltipValue:getResponseTimeTooltipFormatter(formatter)})))),_react.default.createElement(_eui.EuiFlexItem,{style:{flexShrink:1}},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,tpmLabel(transactionType))),_react.default.createElement(_TransactionLineChart.TransactionLineChart,{series:tpmSeries,tickFormatY:this.getTPMFormatter,formatTooltipValue:this.getTPMTooltipFormatter,truncateLegends:true}))))),transactionType===_transaction_types.TRANSACTION_PAGE_LOAD&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiFlexGrid,{columns:2,gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_DurationByCountryMap.DurationByCountryMap,null))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_BrowserLineChart.BrowserLineChart,null))))))}}]);return TransactionCharts}(_react.Component);exports.TransactionCharts=TransactionCharts;function tpmLabel(type){return type===_transaction_types.TRANSACTION_REQUEST?_i18n.i18n.translate("xpack.apm.metrics.transactionChart.requestsPerMinuteLabel",{defaultMessage:"Requests per minute"}):_i18n.i18n.translate("xpack.apm.metrics.transactionChart.transactionsPerMinuteLabel",{defaultMessage:"Transactions per minute"})}function responseTimeLabel(type){switch(type){case _transaction_types.TRANSACTION_PAGE_LOAD:return _i18n.i18n.translate("xpack.apm.metrics.transactionChart.pageLoadTimesLabel",{defaultMessage:"Page load times"});case _transaction_types.TRANSACTION_ROUTE_CHANGE:return _i18n.i18n.translate("xpack.apm.metrics.transactionChart.routeChangeTimesLabel",{defaultMessage:"Route change times"});default:return _i18n.i18n.translate("xpack.apm.metrics.transactionChart.transactionDurationLabel",{defaultMessage:"Transaction duration"})}}},846:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MLJobLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _ml_job_constants=__webpack_require__(1527);var _MLLink=__webpack_require__(1528);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MLJobLink=function MLJobLink(_ref){var serviceName=_ref.serviceName,transactionType=_ref.transactionType,children=_ref.children;var jobId=(0,_ml_job_constants.getMlJobId)(serviceName,transactionType);var query={ml:{jobIds:[jobId]}};return _react.default.createElement(_MLLink.MLLink,{children:children,query:query,path:"/timeseriesexplorer"})};exports.MLJobLink=MLJobLink},847:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionLineChart=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _useChartsSync=__webpack_require__(1529);var _CustomPlot=_interopRequireDefault(__webpack_require__(1530));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var TransactionLineChart=function TransactionLineChart(props){var series=props.series,tickFormatY=props.tickFormatY,formatTooltipValue=props.formatTooltipValue,_props$yMax=props.yMax,yMax=_props$yMax===void 0?"max":_props$yMax,height=props.height,truncateLegends=props.truncateLegends,_props$stacked=props.stacked,stacked=_props$stacked===void 0?false:_props$stacked,onHover=props.onHover;var syncedChartsProps=(0,_useChartsSync.useChartsSync)();var combinedOnHover=(0,_react.useCallback)((function(hoverX){if(onHover){onHover()}return syncedChartsProps.onHover(hoverX)}),[syncedChartsProps,onHover]);return _react.default.createElement(_CustomPlot.default,_extends({series:series},syncedChartsProps,{onHover:combinedOnHover,tickFormatY:tickFormatY,formatTooltipValue:formatTooltipValue,yMax:yMax,height:height,truncateLegends:truncateLegends},stacked?{stackBy:"y"}:{}))};exports.TransactionLineChart=TransactionLineChart},849:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.startMLJob=startMLJob;exports.getHasMLJob=getHasMLJob;var _elasticsearch_fieldnames=__webpack_require__(170);var _ml_job_constants=__webpack_require__(1527);var _callApi=__webpack_require__(365);var _createCallApmApi=__webpack_require__(834);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getTransactionIndices(http){var callApmApi,indices;return regeneratorRuntime.async((function getTransactionIndices$(_context){while(1){switch(_context.prev=_context.next){case 0:callApmApi=(0,_createCallApmApi.createCallApmApi)(http);_context.next=3;return regeneratorRuntime.awrap(callApmApi({method:"GET",pathname:"/api/apm/settings/apm-indices"}));case 3:indices=_context.sent;return _context.abrupt("return",indices["apm_oss.transactionIndices"]);case 5:case"end":return _context.stop()}}}))}function startMLJob(_ref){var serviceName,transactionType,http,transactionIndices,groups,filter;return regeneratorRuntime.async((function startMLJob$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:serviceName=_ref.serviceName,transactionType=_ref.transactionType,http=_ref.http;_context2.next=3;return regeneratorRuntime.awrap(getTransactionIndices(http));case 3:transactionIndices=_context2.sent;groups=["apm",serviceName.toLowerCase()];filter=[{term:_defineProperty({},_elasticsearch_fieldnames.SERVICE_NAME,serviceName)},{term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"transaction")},{term:_defineProperty({},_elasticsearch_fieldnames.TRANSACTION_TYPE,transactionType)}];groups.push(transactionType.toLowerCase());return _context2.abrupt("return",(0,_callApi.callApi)(http,{method:"POST",pathname:"/api/ml/modules/setup/apm_transaction",body:{prefix:(0,_ml_job_constants.getMlPrefix)(serviceName,transactionType),groups:groups,indexPatternName:transactionIndices,startDatafeed:true,query:{bool:{filter:filter}}}}));case 8:case"end":return _context2.stop()}}}))}function getHasMLJob(_ref2){var serviceName,transactionType,http;return regeneratorRuntime.async((function getHasMLJob$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:serviceName=_ref2.serviceName,transactionType=_ref2.transactionType,http=_ref2.http;_context3.prev=1;_context3.next=4;return regeneratorRuntime.awrap((0,_callApi.callApi)(http,{method:"GET",pathname:"/api/ml/anomaly_detectors/".concat((0,_ml_job_constants.getMlJobId)(serviceName,transactionType))}));case 4:return _context3.abrupt("return",true);case 7:_context3.prev=7;_context3.t0=_context3["catch"](1);return _context3.abrupt("return",false);case 10:case"end":return _context3.stop()}}}),null,null,[[1,7]])}},85:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _formatters=__webpack_require__(842);Object.keys(_formatters).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _formatters[key]}})}));var _datetime=__webpack_require__(4326);Object.keys(_datetime).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _datetime[key]}})}));var _duration=__webpack_require__(4327);Object.keys(_duration).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _duration[key]}})}));var _size=__webpack_require__(4328);Object.keys(_size).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _size[key]}})}))},850:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Cytoscape=Cytoscape;exports.CytoscapeContext=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _cytoscape=_interopRequireDefault(__webpack_require__(5397));var _cytoscapeDagre=_interopRequireDefault(__webpack_require__(5461));var _cytoscapeOptions=__webpack_require__(4384);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}_cytoscape.default.use(_cytoscapeDagre.default);var CytoscapeContext=(0,_react.createContext)(undefined);exports.CytoscapeContext=CytoscapeContext;function useCytoscape(options){var _useState=(0,_react.useState)(undefined),_useState2=_slicedToArray(_useState,2),cy=_useState2[0],setCy=_useState2[1];var ref=(0,_react.useRef)(null);(0,_react.useEffect)((function(){if(!cy){setCy((0,_cytoscape.default)(_objectSpread({},options,{container:ref.current})))}}),[options,cy]);(0,_react.useEffect)((function(){return function(){if(cy){cy.destroy()}}}),[cy]);return[ref,cy]}function Cytoscape(_ref){var children=_ref.children,elements=_ref.elements,serviceName=_ref.serviceName,style=_ref.style;var _useCytoscape=useCytoscape(_objectSpread({},_cytoscapeOptions.cytoscapeOptions,{elements:elements})),_useCytoscape2=_slicedToArray(_useCytoscape,2),ref=_useCytoscape2[0],cy=_useCytoscape2[1];(0,_react.useEffect)((function(){if(cy){cy.add(elements);cy.trigger("data")}}),[cy,elements]);(0,_react.useEffect)((function(){var dataHandler=function dataHandler(event){if(cy){if(cy.nodes().length>0&&serviceName){cy.nodes().removeClass("primary");cy.getElementById(serviceName).addClass("primary")}if(event.cy.elements().length>0){cy.layout(_cytoscapeOptions.cytoscapeOptions.layout).run()}}};var mouseoverHandler=function mouseoverHandler(event){event.target.addClass("hover");event.target.connectedEdges().addClass("nodeHover")};var mouseoutHandler=function mouseoutHandler(event){event.target.removeClass("hover");event.target.connectedEdges().removeClass("nodeHover")};if(cy){cy.on("data",dataHandler);cy.on("mouseover","edge, node",mouseoverHandler);cy.on("mouseout","edge, node",mouseoutHandler)}return function(){if(cy){cy.removeListener("data",undefined,dataHandler);cy.removeListener("mouseover","edge, node",mouseoverHandler);cy.removeListener("mouseout","edge, node",mouseoutHandler)}}}),[cy,serviceName]);return _react.default.createElement(CytoscapeContext.Provider,{value:cy},_react.default.createElement("div",{ref:ref,style:style},children))}},851:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaLink=KibanaLink;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _url=_interopRequireDefault(__webpack_require__(71));var _useApmPluginContext2=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function KibanaLink(_ref){var path=_ref.path,rest=_objectWithoutProperties(_ref,["path"]);var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var href=_url.default.format({pathname:core.http.basePath.prepend("/app/kibana"),hash:path});return _react.default.createElement(_eui.EuiLink,_extends({},rest,{href:href}))}},9:function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},95:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toQuery=toQuery;exports.fromQuery=fromQuery;var _querystring=_interopRequireDefault(__webpack_require__(189));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function toQuery(search){return search?_querystring.default.parse(search.slice(1)):{}}function fromQuery(query){return _querystring.default.stringify(query,undefined,undefined,{encodeURIComponent:function(_encodeURIComponent){function encodeURIComponent(_x){return _encodeURIComponent.apply(this,arguments)}encodeURIComponent.toString=function(){return _encodeURIComponent.toString()};return encodeURIComponent}((function(value){return encodeURIComponent(value).replace(/%3A/g,":")}))})}}})["plugin"];