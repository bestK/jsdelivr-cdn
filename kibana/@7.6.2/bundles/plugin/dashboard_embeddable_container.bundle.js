/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["plugin/dashboard_embeddable_container"]=function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var executeModules=data[2];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}deferredModules.push.apply(deferredModules,executeModules||[]);return checkDeferredModules()}function checkDeferredModules(){var result;for(var i=0;i<deferredModules.length;i++){var deferredModule=deferredModules[i];var fulfilled=true;for(var j=1;j<deferredModule.length;j++){var depId=deferredModule[j];if(installedChunks[depId]!==0)fulfilled=false}if(fulfilled){deferredModules.splice(i--,1);result=__webpack_require__(__webpack_require__.s=deferredModule[0])}}return result}var installedModules={};var installedChunks={21:0,24:0,29:0,32:0,39:0};var deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(){return Promise.resolve()};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([1051,0]);return checkDeferredModules()}({0:function(module,exports){module.exports=__kbnSharedDeps__.React},1:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},1051:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,Plugin:true};exports.plugin=plugin;Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.DashboardEmbeddableContainerPublicPlugin}});var _plugin=__webpack_require__(2288);var _types=__webpack_require__(2297);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _actions=__webpack_require__(2298);Object.keys(_actions).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _actions[key]}})}));var _embeddable=__webpack_require__(692);Object.keys(_embeddable).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _embeddable[key]}})}));function plugin(initializerContext){return new _plugin.DashboardEmbeddableContainerPublicPlugin(initializerContext)}},1052:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardContainerFactory=void 0;var _i18n=__webpack_require__(2);var _embeddable_plugin=__webpack_require__(409);var _dashboard_container=__webpack_require__(1053);var _dashboard_constants=__webpack_require__(410);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardContainerFactory=function(_EmbeddableFactory){_inherits(DashboardContainerFactory,_EmbeddableFactory);function DashboardContainerFactory(options){var _this;_classCallCheck(this,DashboardContainerFactory);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardContainerFactory).call(this,{savedObjectMetaData:options.savedObjectMetaData}));_this.options=options;_defineProperty(_assertThisInitialized(_this),"isContainerType",true);_defineProperty(_assertThisInitialized(_this),"type",_dashboard_constants.DASHBOARD_CONTAINER_TYPE);_defineProperty(_assertThisInitialized(_this),"allowEditing",void 0);var capabilities=options.application.capabilities.dashboard;if(!capabilities||_typeof(capabilities)!=="object"){throw new TypeError("Dashboard capabilities not found.")}_this.allowEditing=!!capabilities.createNew&&!!capabilities.showWriteControls;return _this}_createClass(DashboardContainerFactory,[{key:"isEditable",value:function isEditable(){return this.allowEditing}},{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("dashboardEmbeddableContainer.factory.displayName",{defaultMessage:"dashboard"})}},{key:"getDefaultInput",value:function getDefaultInput(){return{panels:{},isFullScreenMode:false,useMargins:true}}},{key:"create",value:function create(initialInput,parent){return regeneratorRuntime.async((function create$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new _dashboard_container.DashboardContainer(initialInput,this.options,parent));case 1:case"end":return _context.stop()}}}),null,this)}}]);return DashboardContainerFactory}(_embeddable_plugin.EmbeddableFactory);exports.DashboardContainerFactory=DashboardContainerFactory},1053:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardContainer=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(9));var _react2=__webpack_require__(4);var _embeddable_plugin=__webpack_require__(409);var _dashboard_constants=__webpack_require__(410);var _panel=__webpack_require__(1054);var _dashboard_viewport=__webpack_require__(2290);var _public=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardContainer=function(_Container){_inherits(DashboardContainer,_Container);function DashboardContainer(initialInput,options,parent){var _this;_classCallCheck(this,DashboardContainer);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardContainer).call(this,_objectSpread({panels:{},isFullScreenMode:false,filters:[],useMargins:true},initialInput),{embeddableLoaded:{}},options.embeddable.getEmbeddableFactory,parent));_this.options=options;_defineProperty(_assertThisInitialized(_this),"type",_dashboard_constants.DASHBOARD_CONTAINER_TYPE);_defineProperty(_assertThisInitialized(_this),"renderEmpty",void 0);return _this}_createClass(DashboardContainer,[{key:"createNewPanelState",value:function createNewPanelState(factory){var partial=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var panelState=_get(_getPrototypeOf(DashboardContainer.prototype),"createNewPanelState",this).call(this,factory,partial);return(0,_panel.createPanelState)(panelState,Object.values(this.input.panels))}},{key:"render",value:function render(dom){_reactDom.default.render(_react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_public.KibanaContextProvider,{services:this.options},_react.default.createElement(_dashboard_viewport.DashboardViewport,{renderEmpty:this.renderEmpty,container:this}))),dom)}},{key:"getInheritedInput",value:function getInheritedInput(id){var _this$input=this.input,viewMode=_this$input.viewMode,refreshConfig=_this$input.refreshConfig,timeRange=_this$input.timeRange,query=_this$input.query,hidePanelTitles=_this$input.hidePanelTitles,filters=_this$input.filters;return{filters:filters,hidePanelTitles:hidePanelTitles,query:query,timeRange:timeRange,refreshConfig:refreshConfig,viewMode:viewMode,id:id}}}]);return DashboardContainer}(_embeddable_plugin.Container);exports.DashboardContainer=DashboardContainer},1054:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createPanelState",{enumerable:true,get:function get(){return _create_panel_state.createPanelState}});var _create_panel_state=__webpack_require__(2289)},1055:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _public=__webpack_require__(337);Object.keys(_public).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _public[key]}})}))},17:function(module,exports){module.exports=vendors_3},18:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLightTheme},2:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},2288:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardEmbeddableContainerPublicPlugin=void 0;var React=_interopRequireWildcard(__webpack_require__(0));var _embeddable_plugin=__webpack_require__(409);var _=__webpack_require__(1051);var _dashboard_container_factory=__webpack_require__(1052);var _public=__webpack_require__(16);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var DashboardEmbeddableContainerPublicPlugin=function(){function DashboardEmbeddableContainerPublicPlugin(initializerContext){_classCallCheck(this,DashboardEmbeddableContainerPublicPlugin)}_createClass(DashboardEmbeddableContainerPublicPlugin,[{key:"setup",value:function setup(core,_ref){var embeddable=_ref.embeddable,uiActions=_ref.uiActions;var expandPanelAction=new _.ExpandPanelAction;uiActions.registerAction(expandPanelAction);uiActions.attachAction(_embeddable_plugin.CONTEXT_MENU_TRIGGER,expandPanelAction.id)}},{key:"start",value:function start(core,plugins){var application=core.application,notifications=core.notifications,overlays=core.overlays;var embeddable=plugins.embeddable,inspector=plugins.inspector,uiActions=plugins.uiActions;var SavedObjectFinder=function SavedObjectFinder(props){return React.createElement(_public.SavedObjectFinderUi,_extends({},props,{savedObjects:core.savedObjects,uiSettings:core.uiSettings}))};var useHideChrome=function useHideChrome(){React.useEffect((function(){core.chrome.setIsVisible(false);return function(){return core.chrome.setIsVisible(true)}}),[])};var ExitFullScreenButton=function ExitFullScreenButton(props){useHideChrome();return React.createElement(_public.ExitFullScreenButton,props)};var changeViewAction=new _.ReplacePanelAction(core,SavedObjectFinder,notifications,plugins.embeddable.getEmbeddableFactories);uiActions.registerAction(changeViewAction);uiActions.attachAction(_embeddable_plugin.CONTEXT_MENU_TRIGGER,changeViewAction.id);var factory=new _dashboard_container_factory.DashboardContainerFactory({application:application,notifications:notifications,overlays:overlays,embeddable:embeddable,inspector:inspector,SavedObjectFinder:SavedObjectFinder,ExitFullScreenButton:ExitFullScreenButton,uiActions:uiActions});embeddable.registerEmbeddableFactory(factory.type,factory)}},{key:"stop",value:function stop(){}}]);return DashboardEmbeddableContainerPublicPlugin}();exports.DashboardEmbeddableContainerPublicPlugin=DashboardEmbeddableContainerPublicPlugin},2289:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createPanelState=createPanelState;var _dashboard_constants=__webpack_require__(410);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function findTopLeftMostOpenSpace(width,height,currentPanels){var maxY=-1;currentPanels.forEach((function(panel){maxY=Math.max(panel.gridData.y+panel.gridData.h,maxY)}));if(maxY<0){return{x:0,y:0}}var grid=new Array(maxY);for(var y=0;y<maxY;y++){grid[y]=new Array(_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT).fill(0)}currentPanels.forEach((function(panel){for(var x=panel.gridData.x;x<panel.gridData.x+panel.gridData.w;x++){for(var _y=panel.gridData.y;_y<panel.gridData.y+panel.gridData.h;_y++){var row=grid[_y];if(row===undefined){throw new Error("Attempted to access a row that doesn't exist at ".concat(_y," for panel ").concat(JSON.stringify(panel)))}grid[_y][x]=1}}}));for(var _y2=0;_y2<maxY;_y2++){for(var x=0;x<_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT;x++){if(grid[_y2][x]===1){continue}else{for(var h=_y2;h<Math.min(_y2+height,maxY);h++){for(var w=x;w<Math.min(x+width,_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT);w++){var spaceIsEmpty=grid[h][w]===0;var fitsPanelWidth=w===x+width-1;var fitsPanelHeight=h===Math.min(_y2+height-1,maxY-1);if(spaceIsEmpty&&fitsPanelWidth&&fitsPanelHeight){return{x:x,y:_y2}}else if(grid[h][w]===1){break}}}}}}return{x:0,y:maxY}}function createPanelState(panelState,currentPanels){var _findTopLeftMostOpenS=findTopLeftMostOpenSpace(_dashboard_constants.DEFAULT_PANEL_WIDTH,_dashboard_constants.DEFAULT_PANEL_HEIGHT,currentPanels),x=_findTopLeftMostOpenS.x,y=_findTopLeftMostOpenS.y;return _objectSpread({gridData:{w:_dashboard_constants.DEFAULT_PANEL_WIDTH,h:_dashboard_constants.DEFAULT_PANEL_HEIGHT,x:x,y:y,i:panelState.explicitInput.id}},panelState)}},2290:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewport=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _grid=__webpack_require__(2291);var _public=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardViewport=function(_React$Component){_inherits(DashboardViewport,_React$Component);function DashboardViewport(props){var _this;_classCallCheck(this,DashboardViewport);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardViewport).call(this,props));_defineProperty(_assertThisInitialized(_this),"context",void 0);_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"onExitFullScreenMode",(function(){_this.props.container.updateInput({isFullScreenMode:false})}));var _this$props$container=_this.props.container.getInput(),isFullScreenMode=_this$props$container.isFullScreenMode,panels=_this$props$container.panels,useMargins=_this$props$container.useMargins,title=_this$props$container.title,isEmptyState=_this$props$container.isEmptyState;_this.state={isFullScreenMode:isFullScreenMode,panels:panels,useMargins:useMargins,title:title,isEmptyState:isEmptyState};return _this}_createClass(DashboardViewport,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.mounted=true;this.subscription=this.props.container.getInput$().subscribe((function(){var _this2$props$containe=_this2.props.container.getInput(),isFullScreenMode=_this2$props$containe.isFullScreenMode,useMargins=_this2$props$containe.useMargins,title=_this2$props$containe.title,description=_this2$props$containe.description,isEmptyState=_this2$props$containe.isEmptyState;if(_this2.mounted){_this2.setState({isFullScreenMode:isFullScreenMode,description:description,useMargins:useMargins,title:title,isEmptyState:isEmptyState})}}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}}},{key:"renderEmptyScreen",value:function renderEmptyScreen(){var renderEmpty=this.props.renderEmpty;var isFullScreenMode=this.state.isFullScreenMode;return _react.default.createElement("div",{className:"dshDashboardEmptyScreen"},isFullScreenMode&&_react.default.createElement(this.context.services.ExitFullScreenButton,{onExitFullScreenMode:this.onExitFullScreenMode}),renderEmpty&&renderEmpty())}},{key:"renderContainerScreen",value:function renderContainerScreen(){var container=this.props.container;var _this$state=this.state,isFullScreenMode=_this$state.isFullScreenMode,panels=_this$state.panels,title=_this$state.title,description=_this$state.description,useMargins=_this$state.useMargins;return _react.default.createElement("div",{"data-shared-items-count":Object.values(panels).length,"data-shared-items-container":true,"data-title":title,"data-description":description,className:useMargins?"dshDashboardViewport-withMargins":"dshDashboardViewport"},isFullScreenMode&&_react.default.createElement(this.context.services.ExitFullScreenButton,{onExitFullScreenMode:this.onExitFullScreenMode}),_react.default.createElement(_grid.DashboardGrid,{container:container}))}},{key:"render",value:function render(){return _react.default.createElement(_react.default.Fragment,null,this.state.isEmptyState?this.renderEmptyScreen():null,this.renderContainerScreen())}}]);return DashboardViewport}(_react.default.Component);exports.DashboardViewport=DashboardViewport;_defineProperty(DashboardViewport,"contextType",_public.context)},2291:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DashboardGrid",{enumerable:true,get:function get(){return _dashboard_grid.DashboardGrid}});var _dashboard_grid=__webpack_require__(2292)},2292:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardGrid=void 0;__webpack_require__(2293);__webpack_require__(2294);var _reactSizeme=_interopRequireDefault(__webpack_require__(2465));var _react=__webpack_require__(4);var _classnames=_interopRequireDefault(__webpack_require__(63));var _lodash=_interopRequireDefault(__webpack_require__(3));var _react2=_interopRequireDefault(__webpack_require__(0));var _reactGridLayout=_interopRequireDefault(__webpack_require__(2512));var _embeddable_plugin=__webpack_require__(409);var _dashboard_constants=__webpack_require__(410);var _public=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectDestructuringEmpty(obj){if(obj==null)throw new TypeError("Cannot destructure undefined")}var lastValidGridSize=0;function ensureWindowScrollsToBottom(event){var WINDOW_BUFFER=10;if(event.clientY>window.innerHeight-WINDOW_BUFFER){window.scrollTo(0,event.pageY+WINDOW_BUFFER-window.innerHeight)}}function ResponsiveGrid(_ref){var size=_ref.size,isViewMode=_ref.isViewMode,layout=_ref.layout,onLayoutChange=_ref.onLayoutChange,children=_ref.children,maximizedPanelId=_ref.maximizedPanelId,useMargins=_ref.useMargins;lastValidGridSize=size.width>0?size.width:lastValidGridSize;var classes=(0,_classnames.default)({"dshLayout--viewing":isViewMode,"dshLayout--editing":!isViewMode,"dshLayout-isMaximizedPanel":maximizedPanelId!==undefined,"dshLayout-withoutMargins":!useMargins});var MARGINS=useMargins?8:0;return _react2.default.createElement(_reactGridLayout.default,{width:lastValidGridSize,className:classes,isDraggable:true,isResizable:true,useCSSTransforms:false,margin:[MARGINS,MARGINS],cols:_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT,rowHeight:_dashboard_constants.DASHBOARD_GRID_HEIGHT,draggableHandle:isViewMode?".doesnt-exist":".embPanel__dragger",layout:layout,onLayoutChange:onLayoutChange,onResize:function onResize(_ref2,_ref3,_ref4,_ref5,event){_objectDestructuringEmpty(_ref2);_objectDestructuringEmpty(_ref3);_objectDestructuringEmpty(_ref4);_objectDestructuringEmpty(_ref5);return ensureWindowScrollsToBottom(event)}},children)}var config={monitorWidth:true};var ResponsiveSizedGrid=(0,_reactSizeme.default)(config)(ResponsiveGrid);var DashboardGridUi=function(_React$Component){_inherits(DashboardGridUi,_React$Component);function DashboardGridUi(props){var _this;_classCallCheck(this,DashboardGridUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardGridUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"gridItems",{});_defineProperty(_assertThisInitialized(_this),"buildLayoutFromPanels",(function(){return _lodash.default.map(_this.state.panels,(function(panel){return panel.gridData}))}));_defineProperty(_assertThisInitialized(_this),"onLayoutChange",(function(layout){var panels=_this.state.panels;var updatedPanels=layout.reduce((function(updatedPanelsAcc,panelLayout){updatedPanelsAcc[panelLayout.i]=_objectSpread({},panels[panelLayout.i],{gridData:_lodash.default.pick(panelLayout,["x","y","w","h","i"])});return updatedPanelsAcc}),{});_this.onPanelsUpdated(updatedPanels)}));_defineProperty(_assertThisInitialized(_this),"onPanelsUpdated",(function(panels){_this.props.container.updateInput({panels:panels})}));_defineProperty(_assertThisInitialized(_this),"onPanelFocused",(function(focusedPanelIndex){_this.setState({focusedPanelIndex:focusedPanelIndex})}));_defineProperty(_assertThisInitialized(_this),"onPanelBlurred",(function(blurredPanelIndex){if(_this.state.focusedPanelIndex===blurredPanelIndex){_this.setState({focusedPanelIndex:undefined})}}));_this.state={layout:[],isLayoutInvalid:false,focusedPanelIndex:undefined,panels:_this.props.container.getInput().panels,viewMode:_this.props.container.getInput().viewMode,useMargins:_this.props.container.getInput().useMargins,expandedPanelId:_this.props.container.getInput().expandedPanelId};return _this}_createClass(DashboardGridUi,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.mounted=true;var isLayoutInvalid=false;var layout;try{layout=this.buildLayoutFromPanels()}catch(error){console.error(error);isLayoutInvalid=true;this.props.kibana.notifications.toasts.danger({title:this.props.intl.formatMessage({id:"dashboardEmbeddableContainer.dashboardGrid.toast.unableToLoadDashboardDangerMessage",defaultMessage:"Unable to load dashboard."}),body:error.message,toastLifeTimeMs:5e3})}this.setState({layout:layout,isLayoutInvalid:isLayoutInvalid});this.subscription=this.props.container.getInput$().subscribe((function(input){if(_this2.mounted){_this2.setState({panels:input.panels,viewMode:input.viewMode,useMargins:input.useMargins,expandedPanelId:input.expandedPanelId})}}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}}},{key:"renderPanels",value:function renderPanels(){var _this3=this;var _this$state=this.state,focusedPanelIndex=_this$state.focusedPanelIndex,panels=_this$state.panels,expandedPanelId=_this$state.expandedPanelId;var panelsInOrder=Object.keys(panels).map((function(key){return panels[key]}));panelsInOrder.sort((function(panelA,panelB){if(panelA.gridData.y===panelB.gridData.y){return panelA.gridData.x-panelB.gridData.x}else{return panelA.gridData.y-panelB.gridData.y}}));return _lodash.default.map(panelsInOrder,(function(panel){var expandPanel=expandedPanelId!==undefined&&expandedPanelId===panel.explicitInput.id;var hidePanel=expandedPanelId!==undefined&&expandedPanelId!==panel.explicitInput.id;var classes=(0,_classnames.default)({"dshDashboardGrid__item--expanded":expandPanel,"dshDashboardGrid__item--hidden":hidePanel});return _react2.default.createElement("div",{style:{zIndex:focusedPanelIndex===panel.explicitInput.id?2:"auto"},className:classes,key:panel.explicitInput.id,"data-test-subj":"dashboardPanel",ref:function ref(reactGridItem){_this3.gridItems[panel.explicitInput.id]=reactGridItem}},_react2.default.createElement(_embeddable_plugin.EmbeddableChildPanel,{embeddableId:panel.explicitInput.id,container:_this3.props.container,getActions:_this3.props.kibana.services.uiActions.getTriggerCompatibleActions,getEmbeddableFactory:_this3.props.kibana.services.embeddable.getEmbeddableFactory,getAllEmbeddableFactories:_this3.props.kibana.services.embeddable.getEmbeddableFactories,overlays:_this3.props.kibana.services.overlays,notifications:_this3.props.kibana.services.notifications,inspector:_this3.props.kibana.services.inspector,SavedObjectFinder:_this3.props.kibana.services.SavedObjectFinder}))}))}},{key:"render",value:function render(){if(this.state.isLayoutInvalid){return null}var viewMode=this.state.viewMode;var isViewMode=viewMode===_embeddable_plugin.ViewMode.VIEW;return _react2.default.createElement(ResponsiveSizedGrid,{isViewMode:isViewMode,layout:this.buildLayoutFromPanels(),onLayoutChange:this.onLayoutChange,maximizedPanelId:this.state.expandedPanelId,useMargins:this.state.useMargins},this.renderPanels())}}]);return DashboardGridUi}(_react2.default.Component);var DashboardGrid=(0,_react.injectI18n)((0,_public.withKibana)(DashboardGridUi));exports.DashboardGrid=DashboardGrid},2293:function(module,exports,__webpack_require__){},2294:function(module,exports,__webpack_require__){},2297:function(module,exports,__webpack_require__){"use strict"},2298:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ExpandPanelAction",{enumerable:true,get:function get(){return _expand_panel_action.ExpandPanelAction}});Object.defineProperty(exports,"EXPAND_PANEL_ACTION",{enumerable:true,get:function get(){return _expand_panel_action.EXPAND_PANEL_ACTION}});Object.defineProperty(exports,"ReplacePanelAction",{enumerable:true,get:function get(){return _replace_panel_action.ReplacePanelAction}});Object.defineProperty(exports,"REPLACE_PANEL_ACTION",{enumerable:true,get:function get(){return _replace_panel_action.REPLACE_PANEL_ACTION}});var _expand_panel_action=__webpack_require__(2299);var _replace_panel_action=__webpack_require__(2301)},2299:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandPanelAction=exports.EXPAND_PANEL_ACTION=void 0;var _i18n=__webpack_require__(2);var _ui_actions_plugin=__webpack_require__(1055);var _embeddable=__webpack_require__(692);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EXPAND_PANEL_ACTION="togglePanel";exports.EXPAND_PANEL_ACTION=EXPAND_PANEL_ACTION;function isDashboard(embeddable){return embeddable.type===_embeddable.DASHBOARD_CONTAINER_TYPE}function isExpanded(embeddable){if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return embeddable.id===embeddable.parent.getInput().expandedPanelId}var ExpandPanelAction=function(){function ExpandPanelAction(){_classCallCheck(this,ExpandPanelAction);_defineProperty(this,"type",EXPAND_PANEL_ACTION);_defineProperty(this,"id",EXPAND_PANEL_ACTION);_defineProperty(this,"order",7)}_createClass(ExpandPanelAction,[{key:"getDisplayName",value:function getDisplayName(_ref){var embeddable=_ref.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return isExpanded(embeddable)?_i18n.i18n.translate("dashboardEmbeddableContainer.actions.toggleExpandPanelMenuItem.expandedDisplayName",{defaultMessage:"Minimize"}):_i18n.i18n.translate("dashboardEmbeddableContainer.actions.toggleExpandPanelMenuItem.notExpandedDisplayName",{defaultMessage:"Full screen"})}},{key:"getIconType",value:function getIconType(_ref2){var embeddable=_ref2.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return isExpanded(embeddable)?"expand":"expand"}},{key:"isCompatible",value:function isCompatible(_ref3){var embeddable;return regeneratorRuntime.async((function isCompatible$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref3.embeddable;return _context.abrupt("return",Boolean(embeddable.parent&&isDashboard(embeddable.parent)));case 2:case"end":return _context.stop()}}}))}},{key:"execute",value:function execute(_ref4){var embeddable,newValue;return regeneratorRuntime.async((function execute$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref4.embeddable;if(!(!embeddable.parent||!isDashboard(embeddable.parent))){_context2.next=3;break}throw new _ui_actions_plugin.IncompatibleActionError;case 3:newValue=isExpanded(embeddable)?undefined:embeddable.id;embeddable.parent.updateInput({expandedPanelId:newValue});case 5:case"end":return _context2.stop()}}}))}}]);return ExpandPanelAction}();exports.ExpandPanelAction=ExpandPanelAction},2300:function(module,exports,__webpack_require__){"use strict"},2301:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReplacePanelAction=exports.REPLACE_PANEL_ACTION=void 0;var _i18n=__webpack_require__(2);var _embeddable_plugin=__webpack_require__(409);var _embeddable=__webpack_require__(692);var _ui_actions_plugin=__webpack_require__(1055);var _open_replace_panel_flyout=__webpack_require__(2302);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var REPLACE_PANEL_ACTION="replacePanel";exports.REPLACE_PANEL_ACTION=REPLACE_PANEL_ACTION;function isDashboard(embeddable){return embeddable.type===_embeddable.DASHBOARD_CONTAINER_TYPE}var ReplacePanelAction=function(){function ReplacePanelAction(core,savedobjectfinder,notifications,getEmbeddableFactories){_classCallCheck(this,ReplacePanelAction);this.core=core;this.savedobjectfinder=savedobjectfinder;this.notifications=notifications;this.getEmbeddableFactories=getEmbeddableFactories;_defineProperty(this,"type",REPLACE_PANEL_ACTION);_defineProperty(this,"id",REPLACE_PANEL_ACTION);_defineProperty(this,"order",11)}_createClass(ReplacePanelAction,[{key:"getDisplayName",value:function getDisplayName(_ref){var embeddable=_ref.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return _i18n.i18n.translate("dashboardEmbeddableContainer.panel.removePanel.replacePanel",{defaultMessage:"Replace panel"})}},{key:"getIconType",value:function getIconType(_ref2){var embeddable=_ref2.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return"kqlOperand"}},{key:"isCompatible",value:function isCompatible(_ref3){var embeddable;return regeneratorRuntime.async((function isCompatible$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref3.embeddable;if(!embeddable.getInput().viewMode){_context.next=4;break}if(!(embeddable.getInput().viewMode===_embeddable_plugin.ViewMode.VIEW)){_context.next=4;break}return _context.abrupt("return",false);case 4:return _context.abrupt("return",Boolean(embeddable.parent&&isDashboard(embeddable.parent)));case 5:case"end":return _context.stop()}}}))}},{key:"execute",value:function execute(_ref4){var embeddable,view,dash;return regeneratorRuntime.async((function execute$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref4.embeddable;if(!(!embeddable.parent||!isDashboard(embeddable.parent))){_context2.next=3;break}throw new _ui_actions_plugin.IncompatibleActionError;case 3:view=embeddable;dash=embeddable.parent;(0,_open_replace_panel_flyout.openReplacePanelFlyout)({embeddable:dash,core:this.core,savedObjectFinder:this.savedobjectfinder,notifications:this.notifications,panelToRemove:view,getEmbeddableFactories:this.getEmbeddableFactories});case 6:case"end":return _context2.stop()}}}),null,this)}}]);return ReplacePanelAction}();exports.ReplacePanelAction=ReplacePanelAction},2302:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.openReplacePanelFlyout=openReplacePanelFlyout;var _react=_interopRequireDefault(__webpack_require__(0));var _public=__webpack_require__(16);var _replace_panel_flyout=__webpack_require__(2303);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function openReplacePanelFlyout(options){var embeddable,core,panelToRemove,savedObjectFinder,notifications,getEmbeddableFactories,flyoutSession;return regeneratorRuntime.async((function openReplacePanelFlyout$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=options.embeddable,core=options.core,panelToRemove=options.panelToRemove,savedObjectFinder=options.savedObjectFinder,notifications=options.notifications,getEmbeddableFactories=options.getEmbeddableFactories;flyoutSession=core.overlays.openFlyout((0,_public.toMountPoint)(_react.default.createElement(_replace_panel_flyout.ReplacePanelFlyout,{container:embeddable,onClose:function onClose(){if(flyoutSession){flyoutSession.close()}},panelToRemove:panelToRemove,savedObjectsFinder:savedObjectFinder,notifications:notifications,getEmbeddableFactories:getEmbeddableFactories})),{"data-test-subj":"replacePanelFlyout"});case 2:case"end":return _context.stop()}}}))}},2303:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ReplacePanelFlyout=void 0;var _i18n=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ReplacePanelFlyout=function(_React$Component){_inherits(ReplacePanelFlyout,_React$Component);function ReplacePanelFlyout(props){var _this;_classCallCheck(this,ReplacePanelFlyout);_this=_possibleConstructorReturn(this,_getPrototypeOf(ReplacePanelFlyout).call(this,props));_defineProperty(_assertThisInitialized(_this),"lastToast",{id:"panelReplaceToast"});_defineProperty(_assertThisInitialized(_this),"showToast",(function(name){if(_this.lastToast){_this.props.notifications.toasts.remove(_this.lastToast)}_this.lastToast=_this.props.notifications.toasts.addSuccess({title:_i18n.i18n.translate("dashboardEmbeddableContainer.addPanel.savedObjectAddedToContainerSuccessMessageTitle",{defaultMessage:"{savedObjectName} was added",values:{savedObjectName:name}}),"data-test-subj":"addObjectToContainerSuccess"})}));_defineProperty(_assertThisInitialized(_this),"onReplacePanel",(function _callee(id,type,name){var originalPanels,filteredPanels,nnw,nnh,nnx,nny,newObj,finalPanels;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:originalPanels=_this.props.container.getInput().panels;filteredPanels=_objectSpread({},originalPanels);nnw=filteredPanels[_this.props.panelToRemove.id].gridData.w;nnh=filteredPanels[_this.props.panelToRemove.id].gridData.h;nnx=filteredPanels[_this.props.panelToRemove.id].gridData.x;nny=filteredPanels[_this.props.panelToRemove.id].gridData.y;_context.next=8;return regeneratorRuntime.awrap(_this.props.container.addSavedObjectEmbeddable(type,id));case 8:newObj=_context.sent;finalPanels=_this.props.container.getInput().panels;finalPanels[newObj.id].gridData.w=nnw;finalPanels[newObj.id].gridData.h=nnh;finalPanels[newObj.id].gridData.x=nnx;finalPanels[newObj.id].gridData.y=nny;delete finalPanels[_this.props.panelToRemove.id];_this.props.container.updateInput(finalPanels);_this.props.container.reload();_this.showToast(name);_this.props.onClose();case 19:case"end":return _context.stop()}}}))}));return _this}_createClass(ReplacePanelFlyout,[{key:"render",value:function render(){var SavedObjectFinder=this.props.savedObjectsFinder;var savedObjectsFinder=_react.default.createElement(SavedObjectFinder,{noItemsMessage:_i18n.i18n.translate("dashboardEmbeddableContainer.addPanel.noMatchingObjectsMessage",{defaultMessage:"No matching objects found."}),savedObjectMetaData:_toConsumableArray(this.props.getEmbeddableFactories()).filter((function(embeddableFactory){return Boolean(embeddableFactory.savedObjectMetaData)&&!embeddableFactory.isContainerType})).map((function(_ref){var savedObjectMetaData=_ref.savedObjectMetaData;return savedObjectMetaData})),showFilter:true,onChoose:this.onReplacePanel});var panelToReplace="Replace panel "+this.props.panelToRemove.getTitle()+" with:";return _react.default.createElement(_eui.EuiFlyout,{ownFocus:true,onClose:this.props.onClose,"data-test-subj":"dashboardReplacePanel"},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h2",null,_react.default.createElement("span",null,panelToReplace)))),_react.default.createElement(_eui.EuiFlyoutBody,null,savedObjectsFinder))}}]);return ReplacePanelFlyout}(_react.default.Component);exports.ReplacePanelFlyout=ReplacePanelFlyout},2465:function(module,exports,__webpack_require__){module.exports=__webpack_require__(34)(1809)},2512:function(module,exports,__webpack_require__){module.exports=__webpack_require__(34)(1747)},26:function(module,exports){module.exports=vendors_2},34:function(module,exports){module.exports=vendors_0},36:function(module,exports){module.exports=vendors_1},4:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},409:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _public=__webpack_require__(229);Object.keys(_public).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _public[key]}})}))},410:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DASHBOARD_CONTAINER_TYPE=exports.DEFAULT_PANEL_HEIGHT=exports.DEFAULT_PANEL_WIDTH=exports.DASHBOARD_GRID_HEIGHT=exports.DASHBOARD_GRID_COLUMN_COUNT=void 0;var DASHBOARD_GRID_COLUMN_COUNT=48;exports.DASHBOARD_GRID_COLUMN_COUNT=DASHBOARD_GRID_COLUMN_COUNT;var DASHBOARD_GRID_HEIGHT=20;exports.DASHBOARD_GRID_HEIGHT=DASHBOARD_GRID_HEIGHT;var DEFAULT_PANEL_WIDTH=DASHBOARD_GRID_COLUMN_COUNT/2;exports.DEFAULT_PANEL_WIDTH=DEFAULT_PANEL_WIDTH;var DEFAULT_PANEL_HEIGHT=15;exports.DEFAULT_PANEL_HEIGHT=DEFAULT_PANEL_HEIGHT;var DASHBOARD_CONTAINER_TYPE="dashboard";exports.DASHBOARD_CONTAINER_TYPE=DASHBOARD_CONTAINER_TYPE},50:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiDarkTheme},692:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DashboardContainerFactory",{enumerable:true,get:function get(){return _dashboard_container_factory.DashboardContainerFactory}});Object.defineProperty(exports,"DashboardContainer",{enumerable:true,get:function get(){return _dashboard_container.DashboardContainer}});Object.defineProperty(exports,"DashboardContainerInput",{enumerable:true,get:function get(){return _dashboard_container.DashboardContainerInput}});Object.defineProperty(exports,"createPanelState",{enumerable:true,get:function get(){return _panel.createPanelState}});Object.defineProperty(exports,"DashboardPanelState",{enumerable:true,get:function get(){return _types.DashboardPanelState}});Object.defineProperty(exports,"GridData",{enumerable:true,get:function get(){return _types.GridData}});Object.defineProperty(exports,"DASHBOARD_GRID_COLUMN_COUNT",{enumerable:true,get:function get(){return _dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT}});Object.defineProperty(exports,"DEFAULT_PANEL_HEIGHT",{enumerable:true,get:function get(){return _dashboard_constants.DEFAULT_PANEL_HEIGHT}});Object.defineProperty(exports,"DEFAULT_PANEL_WIDTH",{enumerable:true,get:function get(){return _dashboard_constants.DEFAULT_PANEL_WIDTH}});Object.defineProperty(exports,"DASHBOARD_CONTAINER_TYPE",{enumerable:true,get:function get(){return _dashboard_constants.DASHBOARD_CONTAINER_TYPE}});var _dashboard_container_factory=__webpack_require__(1052);var _dashboard_container=__webpack_require__(1053);var _panel=__webpack_require__(1054);var _types=__webpack_require__(2300);var _dashboard_constants=__webpack_require__(410)},9:function(module,exports){module.exports=__kbnSharedDeps__.ReactDom}})["plugin"];