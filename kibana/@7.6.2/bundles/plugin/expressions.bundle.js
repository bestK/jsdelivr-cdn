/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["plugin/expressions"]=function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var executeModules=data[2];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}deferredModules.push.apply(deferredModules,executeModules||[]);return checkDeferredModules()}function checkDeferredModules(){var result;for(var i=0;i<deferredModules.length;i++){var deferredModule=deferredModules[i];var fulfilled=true;for(var j=1;j<deferredModule.length;j++){var depId=deferredModule[j];if(installedChunks[depId]!==0)fulfilled=false}if(fulfilled){deferredModules.splice(i--,1);result=__webpack_require__(__webpack_require__.s=deferredModule[0])}}return result}var installedModules={};var installedChunks={26:0,24:0,29:0,32:0,39:0};var deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(){return Promise.resolve()};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([6898,0]);return checkDeferredModules()}({0:function(module,exports){module.exports=__kbnSharedDeps__.React},1:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},17:function(module,exports){module.exports=vendors_3},18:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLightTheme},1870:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _type_registry=__webpack_require__(6900);Object.keys(_type_registry).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _type_registry[key]}})}));var _function_registry=__webpack_require__(6901);Object.keys(_function_registry).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _function_registry[key]}})}));var _render_registry=__webpack_require__(6902);Object.keys(_render_registry).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _render_registry[key]}})}))},1871:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.interpreterProvider=interpreterProvider;Object.defineProperty(exports,"createError",{enumerable:true,get:function get(){return _create_error.createError}});var _common=__webpack_require__(75);var _lodash=__webpack_require__(3);var _create_error=__webpack_require__(6908);var _type=__webpack_require__(829);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function interpreterProvider(config){var functions=config.functions,types=config.types;var handlers=_objectSpread({},config.handlers,{types:types});function cast(node,toTypeNames){if(!toTypeNames||toTypeNames.length===0)return node;var fromTypeName=(0,_type.getType)(node);if(toTypeNames.includes(fromTypeName))return node;var fromTypeDef=types[fromTypeName];for(var i=0;i<toTypeNames.length;i++){if(fromTypeDef&&fromTypeDef.castsTo(toTypeNames[i])){return fromTypeDef.to(node,toTypeNames[i],types)}var toTypeDef=types[toTypeNames[i]];if(toTypeDef&&toTypeDef.castsFrom(fromTypeName))return toTypeDef.from(node,types)}throw new Error("Can not cast '".concat(fromTypeName,"' to any of '").concat(toTypeNames.join(", "),"'"))}function invokeChain(chainArr,context){var chain,link,fnName,fnArgs,fnDef,_ref,resolvedArgs,newContext;return regeneratorRuntime.async((function invokeChain$(_context){while(1){switch(_context.prev=_context.next){case 0:if(chainArr.length){_context.next=2;break}return _context.abrupt("return",context);case 2:if(!(handlers.abortSignal&&handlers.abortSignal.aborted)){_context.next=4;break}return _context.abrupt("return",(0,_create_error.createError)({message:"The expression was aborted.",name:"AbortError"}));case 4:chain=(0,_lodash.clone)(chainArr);link=chain.shift();if(link){_context.next=8;break}throw Error("Function chain is empty.");case 8:fnName=link.function,fnArgs=link.arguments;fnDef=(0,_common.getByAlias)(functions.toJS(),fnName);if(fnDef){_context.next=12;break}return _context.abrupt("return",(0,_create_error.createError)({message:"Function ".concat(fnName," could not be found.")}));case 12:_context.prev=12;_context.next=15;return regeneratorRuntime.awrap(resolveArgs(fnDef,context,fnArgs));case 15:_ref=_context.sent;resolvedArgs=_ref.resolvedArgs;_context.next=19;return regeneratorRuntime.awrap(invokeFunction(fnDef,context,resolvedArgs));case 19:newContext=_context.sent;if(!((0,_type.getType)(newContext)==="error")){_context.next=22;break}return _context.abrupt("return",newContext);case 22:return _context.abrupt("return",invokeChain(chain,newContext));case 25:_context.prev=25;_context.t0=_context["catch"](12);_context.t0.message="[".concat(fnName,"] > ").concat(_context.t0.message);return _context.abrupt("return",(0,_create_error.createError)(_context.t0));case 29:case"end":return _context.stop()}}}),null,null,[[12,25]])}function invokeFunction(fnDef,context,args){var acceptableContext,fnOutput,returnType,expectedType,type;return regeneratorRuntime.async((function invokeFunction$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:acceptableContext=cast(context,fnDef.context?fnDef.context.types:undefined);_context2.next=3;return regeneratorRuntime.awrap(fnDef.fn(acceptableContext,args,handlers));case 3:fnOutput=_context2.sent;returnType=(0,_type.getType)(fnOutput);expectedType=fnDef.type;if(!(expectedType&&returnType!==expectedType)){_context2.next=8;break}throw new Error("Function '".concat(fnDef.name,"' should return '").concat(expectedType,"',")+" actually returned '".concat(returnType,"'"));case 8:type=handlers.types[fnDef.type];if(!(type&&type.validate)){_context2.next=17;break}_context2.prev=10;type.validate(fnOutput);_context2.next=17;break;case 14:_context2.prev=14;_context2.t0=_context2["catch"](10);throw new Error("Output of '".concat(fnDef.name,"' is not a valid type '").concat(fnDef.type,"': ").concat(_context2.t0));case 17:return _context2.abrupt("return",fnOutput);case 18:case"end":return _context2.stop()}}}),null,null,[[10,14]])}function resolveArgs(fnDef,context,argAsts){var argDefs,dealiasedArgAsts,argAstsWithDefaults,resolveArgFns,argNames,resolvedArgValues,resolvedMultiArgs,resolvedArgs;return regeneratorRuntime.async((function resolveArgs$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:argDefs=fnDef.args;dealiasedArgAsts=(0,_lodash.reduce)(argAsts,(function(acc,argAst,argName){var argDef=(0,_common.getByAlias)(argDefs,argName);if(!argDef){throw new Error("Unknown argument '".concat(argName,"' passed to function '").concat(fnDef.name,"'"))}acc[argDef.name]=(acc[argDef.name]||[]).concat(argAst);return acc}),{});(0,_lodash.each)(argDefs,(function(argDef){var _ref2=argDef,aliases=_ref2.aliases,argDefault=_ref2.default,argName=_ref2.name,required=_ref2.required;if(typeof argDefault==="undefined"&&required&&typeof dealiasedArgAsts[argName]==="undefined"){if(!aliases||aliases.length===0){throw new Error("".concat(fnDef.name," requires an argument"))}else{var errorArg=argName==="_"?aliases[0]:argName;throw new Error("".concat(fnDef.name,' requires an "').concat(errorArg,'" argument'))}}}));argAstsWithDefaults=(0,_lodash.reduce)(argDefs,(function(acc,argDef,argName){if(typeof acc[argName]==="undefined"&&typeof argDef.default!=="undefined"){acc[argName]=[(0,_common.fromExpression)(argDef.default,"argument")]}return acc}),dealiasedArgAsts);resolveArgFns=(0,_lodash.mapValues)(argAstsWithDefaults,(function(asts,argName){return asts.map((function(item){return function _callee(){var ctx,newContext,_args3=arguments;return regeneratorRuntime.async((function _callee$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:ctx=_args3.length>0&&_args3[0]!==undefined?_args3[0]:context;_context3.next=3;return regeneratorRuntime.awrap(interpret(item,ctx));case 3:newContext=_context3.sent;if(!((0,_type.getType)(newContext)==="error")){_context3.next=6;break}throw newContext.error;case 6:return _context3.abrupt("return",cast(newContext,argDefs[argName].types));case 7:case"end":return _context3.stop()}}}))}}))}));argNames=(0,_lodash.keys)(resolveArgFns);_context4.next=8;return regeneratorRuntime.awrap(Promise.all(argNames.map((function(argName){var interpretFns=resolveArgFns[argName];if(!argDefs[argName].resolve)return interpretFns;return Promise.all(interpretFns.map((function(fn){return fn()})))}))));case 8:resolvedArgValues=_context4.sent;resolvedMultiArgs=(0,_lodash.zipObject)(argNames,resolvedArgValues);resolvedArgs=(0,_lodash.mapValues)(resolvedMultiArgs,(function(argValues,argName){if(argDefs[argName].multi)return argValues;return(0,_lodash.last)(argValues)}));return _context4.abrupt("return",{resolvedArgs:resolvedArgs});case 12:case"end":return _context4.stop()}}}))}var interpret=function interpret(ast){var context,type,_args5=arguments;return regeneratorRuntime.async((function interpret$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:context=_args5.length>1&&_args5[1]!==undefined?_args5[1]:null;type=(0,_type.getType)(ast);_context5.t0=type;_context5.next=_context5.t0==="expression"?5:_context5.t0==="string"?6:_context5.t0==="number"?6:_context5.t0==="null"?6:_context5.t0==="boolean"?6:7;break;case 5:return _context5.abrupt("return",invokeChain(ast.chain,context));case 6:return _context5.abrupt("return",ast);case 7:throw new Error("Unknown AST object: ".concat(JSON.stringify(ast)));case 8:case"end":return _context5.stop()}}}))};return interpret}},1872:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpressionRendererImplementation=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(63));var _operators=__webpack_require__(47);var _useShallowCompareEffect=_interopRequireDefault(__webpack_require__(7814));var _eui=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(18));var _loader=__webpack_require__(1873);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var defaultState={isEmpty:true,isLoading:false,error:null};var ExpressionRendererImplementation=function ExpressionRendererImplementation(_ref){var className=_ref.className,dataAttrs=_ref.dataAttrs,padding=_ref.padding,renderError=_ref.renderError,expression=_ref.expression,expressionLoaderOptions=_objectWithoutProperties(_ref,["className","dataAttrs","padding","renderError","expression"]);var mountpoint=(0,_react.useRef)(null);var _useState=(0,_react.useState)(_objectSpread({},defaultState)),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var hasCustomRenderErrorHandler=!!renderError;var expressionLoaderRef=(0,_react.useRef)(null);var hasHandledErrorRef=(0,_react.useRef)(false);var errorRenderHandlerRef=(0,_react.useRef)(null);(0,_react.useEffect)((function(){var subs=[];expressionLoaderRef.current=new _loader.ExpressionLoader(mountpoint.current,expression,_objectSpread({},expressionLoaderOptions,{onRenderError:hasCustomRenderErrorHandler?function(domNode,error,handlers){errorRenderHandlerRef.current=handlers;setState((function(){return _objectSpread({},defaultState,{isEmpty:false,error:error})}));if(expressionLoaderOptions.onRenderError){expressionLoaderOptions.onRenderError(domNode,error,handlers)}}:expressionLoaderOptions.onRenderError}));subs.push(expressionLoaderRef.current.loading$.subscribe((function(){hasHandledErrorRef.current=false;setState((function(prevState){return _objectSpread({},prevState,{isLoading:true})}))})),expressionLoaderRef.current.render$.pipe((0,_operators.filter)((function(){return!hasHandledErrorRef.current}))).subscribe((function(item){setState((function(){return _objectSpread({},defaultState,{isEmpty:false})}))})));return function(){subs.forEach((function(s){return s.unsubscribe()}));if(expressionLoaderRef.current){expressionLoaderRef.current.destroy();expressionLoaderRef.current=null}errorRenderHandlerRef.current=null}}),[hasCustomRenderErrorHandler]);(0,_useShallowCompareEffect.default)((function(){if(expressionLoaderRef.current){expressionLoaderRef.current.update(expression,expressionLoaderOptions)}}),[_objectSpread({expression:expression},expressionLoaderOptions)]);(0,_react.useLayoutEffect)((function(){if(state.error&&errorRenderHandlerRef.current){hasHandledErrorRef.current=true;errorRenderHandlerRef.current.done();errorRenderHandlerRef.current=null}}),[state.error]);var classes=(0,_classnames.default)("expExpressionRenderer",{"expExpressionRenderer-isEmpty":state.isEmpty,"expExpressionRenderer-hasError":!!state.error,className:className});var expressionStyles={};if(padding){expressionStyles.padding=_eui_theme_light.default.paddingSizes[padding]}return _react.default.createElement("div",_extends({},dataAttrs,{className:classes}),state.isEmpty&&_react.default.createElement(_eui.EuiLoadingChart,{mono:true,size:"l"}),state.isLoading&&_react.default.createElement(_eui.EuiProgress,{size:"xs",color:"accent",position:"absolute"}),!state.isLoading&&state.error&&renderError&&renderError(state.error.message),_react.default.createElement("div",{className:"expExpressionRenderer__expression",style:expressionStyles,ref:mountpoint}))};exports.ExpressionRendererImplementation=ExpressionRendererImplementation},1873:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loader=exports.ExpressionLoader=void 0;var _rxjs=__webpack_require__(37);var _operators=__webpack_require__(47);var _execute=__webpack_require__(972);var _render=__webpack_require__(973);var _services=__webpack_require__(394);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ExpressionLoader=function(){function ExpressionLoader(element,_expression,_params){var _this=this;_classCallCheck(this,ExpressionLoader);_defineProperty(this,"data$",void 0);_defineProperty(this,"update$",void 0);_defineProperty(this,"render$",void 0);_defineProperty(this,"events$",void 0);_defineProperty(this,"loading$",void 0);_defineProperty(this,"dataHandler",void 0);_defineProperty(this,"renderHandler",void 0);_defineProperty(this,"dataSubject",void 0);_defineProperty(this,"loadingSubject",void 0);_defineProperty(this,"data",void 0);_defineProperty(this,"params",{});_defineProperty(this,"loadData",(function _callee(expression,params){var prevDataHandler,data;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.dataHandler&&_this.dataHandler.isPending){_this.dataHandler.cancel()}_this.setParams(params);_this.dataHandler=new _execute.ExpressionDataHandler(expression,params);if(!params.inspectorAdapters)params.inspectorAdapters=_this.dataHandler.inspect();prevDataHandler=_this.dataHandler;_context.next=7;return regeneratorRuntime.awrap(prevDataHandler.getData());case 7:data=_context.sent;if(!(_this.dataHandler!==prevDataHandler)){_context.next=10;break}return _context.abrupt("return");case 10:_this.dataSubject.next(data);case 11:case"end":return _context.stop()}}}))}));this.dataSubject=new _rxjs.Subject;this.data$=this.dataSubject.asObservable();this.loadingSubject=new _rxjs.BehaviorSubject(false);this.loading$=this.loadingSubject.asObservable().pipe((0,_operators.filter)((function(_){return _===true})),(0,_operators.map)((function(){return void 0})));this.renderHandler=new _render.ExpressionRenderHandler(element,{onRenderError:_params&&_params.onRenderError});this.render$=this.renderHandler.render$;this.update$=this.renderHandler.update$;this.events$=this.renderHandler.events$;this.update$.subscribe((function(_ref){var newExpression=_ref.newExpression,newParams=_ref.newParams;_this.update(newExpression,newParams)}));this.data$.subscribe((function(data){_this.render(data)}));this.render$.subscribe((function(){_this.loadingSubject.next(false)}));this.setParams(_params);if(_expression){this.loadingSubject.next(true);this.loadData(_expression,this.params)}}_createClass(ExpressionLoader,[{key:"destroy",value:function destroy(){this.dataSubject.complete();this.loadingSubject.complete();this.renderHandler.destroy();if(this.dataHandler){this.dataHandler.cancel()}}},{key:"cancel",value:function cancel(){if(this.dataHandler){this.dataHandler.cancel()}}},{key:"getExpression",value:function getExpression(){if(this.dataHandler){return this.dataHandler.getExpression()}}},{key:"getAst",value:function getAst(){if(this.dataHandler){return this.dataHandler.getAst()}}},{key:"getElement",value:function getElement(){return this.renderHandler.getElement()}},{key:"openInspector",value:function openInspector(title){var inspector=this.inspect();if(inspector){return(0,_services.getInspector)().open(inspector,{title:title})}}},{key:"inspect",value:function inspect(){if(this.dataHandler){return this.dataHandler.inspect()}}},{key:"update",value:function update(expression,params){this.setParams(params);this.loadingSubject.next(true);if(expression){this.loadData(expression,this.params)}else if(this.data){this.render(this.data)}}},{key:"render",value:function render(data){this.renderHandler.render(data,this.params.extraHandlers)}},{key:"setParams",value:function setParams(params){if(!params||!Object.keys(params).length){return}if(params.searchContext){this.params.searchContext=_.defaults({},params.searchContext,this.params.searchContext||{})}if(params.extraHandlers&&this.params){this.params.extraHandlers=params.extraHandlers}}}]);return ExpressionLoader}();exports.ExpressionLoader=ExpressionLoader;var loader=function loader(element,expression,params){return new ExpressionLoader(element,expression,params)};exports.loader=loader},2:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},26:function(module,exports){module.exports=vendors_2},34:function(module,exports){module.exports=vendors_0},36:function(module,exports){module.exports=vendors_1},394:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setRenderersRegistry=exports.getRenderersRegistry=exports.setNotifications=exports.getNotifications=exports.setInterpreter=exports.getInterpreter=exports.setInspector=exports.getInspector=exports.savedObjects=exports.setCoreStart=exports.getCoreStart=void 0;var _public=__webpack_require__(31);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var _createKibanaUtilsCor=(0,_public.createKibanaUtilsCore)(),getCoreStart=_createKibanaUtilsCor.getCoreStart,setCoreStart=_createKibanaUtilsCor.setCoreStart,savedObjects=_createKibanaUtilsCor.savedObjects;exports.savedObjects=savedObjects;exports.setCoreStart=setCoreStart;exports.getCoreStart=getCoreStart;var _createGetterSetter=(0,_public.createGetterSetter)("Inspector"),_createGetterSetter2=_slicedToArray(_createGetterSetter,2),getInspector=_createGetterSetter2[0],setInspector=_createGetterSetter2[1];exports.setInspector=setInspector;exports.getInspector=getInspector;var _createGetterSetter3=(0,_public.createGetterSetter)("Interpreter"),_createGetterSetter4=_slicedToArray(_createGetterSetter3,2),getInterpreter=_createGetterSetter4[0],setInterpreter=_createGetterSetter4[1];exports.setInterpreter=setInterpreter;exports.getInterpreter=getInterpreter;var _createGetterSetter5=(0,_public.createGetterSetter)("Notifications"),_createGetterSetter6=_slicedToArray(_createGetterSetter5,2),getNotifications=_createGetterSetter6[0],setNotifications=_createGetterSetter6[1];exports.setNotifications=setNotifications;exports.getNotifications=getNotifications;var _createGetterSetter7=(0,_public.createGetterSetter)("Renderers registry"),_createGetterSetter8=_slicedToArray(_createGetterSetter7,2),getRenderersRegistry=_createGetterSetter8[0],setRenderersRegistry=_createGetterSetter8[1];exports.setRenderersRegistry=setRenderersRegistry;exports.getRenderersRegistry=getRenderersRegistry},4:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},50:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiDarkTheme},6898:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,Plugin:true,interpreterProvider:true,ExpressionInterpret:true,ExpressionRenderer:true,ExpressionRendererProps:true,ExpressionDataHandler:true,ExpressionRenderHandler:true};exports.plugin=plugin;Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.ExpressionsPublicPlugin}});Object.defineProperty(exports,"interpreterProvider",{enumerable:true,get:function get(){return _interpreter_provider.interpreterProvider}});Object.defineProperty(exports,"ExpressionInterpret",{enumerable:true,get:function get(){return _interpreter_provider.ExpressionInterpret}});Object.defineProperty(exports,"ExpressionRenderer",{enumerable:true,get:function get(){return _expression_renderer.ExpressionRenderer}});Object.defineProperty(exports,"ExpressionRendererProps",{enumerable:true,get:function get(){return _expression_renderer.ExpressionRendererProps}});Object.defineProperty(exports,"ExpressionDataHandler",{enumerable:true,get:function get(){return _execute.ExpressionDataHandler}});Object.defineProperty(exports,"ExpressionRenderHandler",{enumerable:true,get:function get(){return _render.ExpressionRenderHandler}});var _plugin=__webpack_require__(6899);Object.keys(_plugin).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _plugin[key]}})}));var _types=__webpack_require__(6912);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _common=__webpack_require__(1454);Object.keys(_common).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _common[key]}})}));var _interpreter_provider=__webpack_require__(1871);var _expression_renderer=__webpack_require__(1872);var _execute=__webpack_require__(972);var _render=__webpack_require__(973);function plugin(initializerContext){return new _plugin.ExpressionsPublicPlugin(initializerContext)}},6899:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpressionsPublicPlugin=void 0;var _registries=__webpack_require__(1870);var _services=__webpack_require__(394);var _clog=__webpack_require__(6903);var _font=__webpack_require__(6904);var _kibana=__webpack_require__(6906);var _kibana_context=__webpack_require__(6907);var _expression_types=__webpack_require__(1456);var _interpreter_provider=__webpack_require__(1871);var _create_handlers=__webpack_require__(6909);var _expression_renderer=__webpack_require__(1872);var _loader=__webpack_require__(1873);var _execute=__webpack_require__(972);var _render=__webpack_require__(973);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ExpressionsPublicPlugin=function(){function ExpressionsPublicPlugin(initializerContext){_classCallCheck(this,ExpressionsPublicPlugin);_defineProperty(this,"functions",new _registries.FunctionsRegistry);_defineProperty(this,"renderers",new _registries.RenderFunctionsRegistry);_defineProperty(this,"types",new _registries.TypesRegistry)}_createClass(ExpressionsPublicPlugin,[{key:"setup",value:function setup(core,_ref){var inspector=_ref.inspector;var functions=this.functions,renderers=this.renderers,types=this.types;(0,_services.setRenderersRegistry)(renderers);var registerFunction=function registerFunction(fn){functions.register(fn)};registerFunction(_clog.clog);registerFunction(_font.font);registerFunction(_kibana.kibana);registerFunction(_kibana_context.kibanaContext);types.register(_expression_types.boolean);types.register(_expression_types.datatable);types.register(_expression_types.error);types.register(_expression_types.filter);types.register(_expression_types.image);types.register(_expression_types.nullType);types.register(_expression_types.number);types.register(_expression_types.pointseries);types.register(_expression_types.range);types.register(_expression_types.render);types.register(_expression_types.shape);types.register(_expression_types.string);types.register(_expression_types.style);types.register(_expression_types.kibanaContext);types.register(_expression_types.kibanaDatatable);var getExecutor=function getExecutor(){var interpretAst=function interpretAst(ast,context,handlers){var interpret=(0,_interpreter_provider.interpreterProvider)({types:types.toJS(),handlers:_objectSpread({},handlers,{},(0,_create_handlers.createHandlers)()),functions:functions});return interpret(ast,context)};var executor={interpreter:{interpretAst:interpretAst}};return executor};(0,_services.setInterpreter)(getExecutor().interpreter);var setup={registerFunction:registerFunction,registerRenderer:function registerRenderer(renderer){renderers.register(renderer)},registerType:function registerType(type){types.register(type)},__LEGACY:{functions:functions,renderers:renderers,types:types,getExecutor:getExecutor}};return setup}},{key:"start",value:function start(core,_ref2){var inspector=_ref2.inspector;(0,_services.setCoreStart)(core);(0,_services.setInspector)(inspector);(0,_services.setNotifications)(core.notifications);return{execute:_execute.execute,ExpressionDataHandler:_execute.ExpressionDataHandler,ExpressionLoader:_loader.ExpressionLoader,ExpressionRenderer:_expression_renderer.ExpressionRendererImplementation,ExpressionRenderHandler:_render.ExpressionRenderHandler,loader:_loader.loader,render:_render.render}}},{key:"stop",value:function stop(){}}]);return ExpressionsPublicPlugin}();exports.ExpressionsPublicPlugin=ExpressionsPublicPlugin},6900:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.TypesRegistry=void 0;var _registry=__webpack_require__(971);var _type=__webpack_require__(829);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var TypesRegistry=function(_Registry){_inherits(TypesRegistry,_Registry);function TypesRegistry(){_classCallCheck(this,TypesRegistry);return _possibleConstructorReturn(this,_getPrototypeOf(TypesRegistry).apply(this,arguments))}_createClass(TypesRegistry,[{key:"register",value:function register(typeDefinition){var type=new _type.Type(_typeof(typeDefinition)==="object"?typeDefinition:typeDefinition());this.set(type.name,type)}}]);return TypesRegistry}(_registry.Registry);exports.TypesRegistry=TypesRegistry},6901:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FunctionsRegistry=exports.Function=exports.FunctionParameter=void 0;var _registry=__webpack_require__(971);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FunctionParameter=function(){function FunctionParameter(name,arg){_classCallCheck(this,FunctionParameter);_defineProperty(this,"name",void 0);_defineProperty(this,"required",void 0);_defineProperty(this,"help",void 0);_defineProperty(this,"types",void 0);_defineProperty(this,"default",void 0);_defineProperty(this,"aliases",void 0);_defineProperty(this,"multi",void 0);_defineProperty(this,"resolve",void 0);_defineProperty(this,"options",void 0);var required=arg.required,help=arg.help,types=arg.types,aliases=arg.aliases,multi=arg.multi,resolve=arg.resolve,options=arg.options;if(name==="_"){throw Error("Arg names must not be _. Use it in aliases instead.")}this.name=name;this.required=!!required;this.help=help||"";this.types=types||[];this.default=arg.default;this.aliases=aliases||[];this.multi=!!multi;this.resolve=resolve==null?true:resolve;this.options=options||[]}_createClass(FunctionParameter,[{key:"accepts",value:function accepts(type){if(!this.types.length)return true;return this.types.indexOf(type)>-1}}]);return FunctionParameter}();exports.FunctionParameter=FunctionParameter;var Function=function Function(functionDefinition){var _this=this;_classCallCheck(this,Function);_defineProperty(this,"name",void 0);_defineProperty(this,"aliases",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"fn",void 0);_defineProperty(this,"help",void 0);_defineProperty(this,"args",{});_defineProperty(this,"context",void 0);_defineProperty(this,"accepts",(function(type){if(!_this.context.types)return true;return _this.context.types.indexOf(type)>-1}));var name=functionDefinition.name,_type=functionDefinition.type,aliases=functionDefinition.aliases,fn=functionDefinition.fn,help=functionDefinition.help,args=functionDefinition.args,context=functionDefinition.context;this.name=name;this.type=_type;this.aliases=aliases||[];this.fn=function(input,params,handlers){return Promise.resolve(fn(input,params,handlers))};this.help=help||"";this.context=context||{};for(var _i=0,_Object$entries=Object.entries(args||{});_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],arg=_Object$entries$_i[1];this.args[key]=new FunctionParameter(key,arg)}};exports.Function=Function;var FunctionsRegistry=function(_Registry){_inherits(FunctionsRegistry,_Registry);function FunctionsRegistry(){_classCallCheck(this,FunctionsRegistry);return _possibleConstructorReturn(this,_getPrototypeOf(FunctionsRegistry).apply(this,arguments))}_createClass(FunctionsRegistry,[{key:"register",value:function register(functionDefinition){var fn=new Function(_typeof(functionDefinition)==="object"?functionDefinition:functionDefinition());this.set(fn.name,fn)}}]);return FunctionsRegistry}(_registry.Registry);exports.FunctionsRegistry=FunctionsRegistry},6902:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RenderFunctionsRegistry=void 0;var _registry=__webpack_require__(971);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ExpressionRenderFunction=function ExpressionRenderFunction(config){_classCallCheck(this,ExpressionRenderFunction);_defineProperty(this,"name",void 0);_defineProperty(this,"displayName",void 0);_defineProperty(this,"help",void 0);_defineProperty(this,"validate",void 0);_defineProperty(this,"reuseDomNode",void 0);_defineProperty(this,"render",void 0);var name=config.name,displayName=config.displayName,help=config.help,validate=config.validate,reuseDomNode=config.reuseDomNode,render=config.render;this.name=name;this.displayName=displayName||name;this.help=help||"";this.validate=validate||function(){};this.reuseDomNode=Boolean(reuseDomNode);this.render=render};var RenderFunctionsRegistry=function(_Registry){_inherits(RenderFunctionsRegistry,_Registry);function RenderFunctionsRegistry(){_classCallCheck(this,RenderFunctionsRegistry);return _possibleConstructorReturn(this,_getPrototypeOf(RenderFunctionsRegistry).apply(this,arguments))}_createClass(RenderFunctionsRegistry,[{key:"register",value:function register(definition){var renderFunction=new ExpressionRenderFunction(_typeof(definition)==="object"?definition:definition());this.set(renderFunction.name,renderFunction)}}]);return RenderFunctionsRegistry}(_registry.Registry);exports.RenderFunctionsRegistry=RenderFunctionsRegistry},6903:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.clog=void 0;var name="clog";var clog=function clog(){return{name:name,args:{},help:"Outputs the context to the console",fn:function fn(context){console.log(context);return context}}};exports.clog=clog},6904:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.font=font;var _i18n=__webpack_require__(2);var _fonts=__webpack_require__(6905);var _types=__webpack_require__(1455);var dashify=function dashify(str){return str.trim().replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\W/g,(function(m){return/[À-ž]/.test(m)?m:"-"})).replace(/^-+|-+$/g,"").toLowerCase()};var inlineStyle=function inlineStyle(obj){if(!obj)return"";var styles=Object.keys(obj).map((function(key){var prop=dashify(key);var line=prop.concat(":").concat(String(obj[key]));return line}));return styles.join(";")};function font(){return{name:"font",aliases:[],type:"style",help:_i18n.i18n.translate("expressions.functions.fontHelpText",{defaultMessage:"Create a font style."}),context:{types:["null"]},args:{align:{default:"left",help:_i18n.i18n.translate("expressions.functions.font.args.alignHelpText",{defaultMessage:"The horizontal text alignment."}),options:Object.values(_types.TextAlignment),types:["string"]},color:{help:_i18n.i18n.translate("expressions.functions.font.args.colorHelpText",{defaultMessage:"The text color."}),types:["string"]},family:{default:'"'.concat(_fonts.openSans.value,'"'),help:_i18n.i18n.translate("expressions.functions.font.args.familyHelpText",{defaultMessage:"An acceptable {css} web font string",values:{css:"CSS"}}),types:["string"]},italic:{default:false,help:_i18n.i18n.translate("expressions.functions.font.args.italicHelpText",{defaultMessage:"Italicize the text?"}),options:[true,false],types:["boolean"]},lHeight:{default:null,aliases:["lineHeight"],help:_i18n.i18n.translate("expressions.functions.font.args.lHeightHelpText",{defaultMessage:"The line height in pixels"}),types:["number","null"]},size:{default:14,help:_i18n.i18n.translate("expressions.functions.font.args.sizeHelpText",{defaultMessage:"The font size in pixels"}),types:["number"]},underline:{default:false,help:_i18n.i18n.translate("expressions.functions.font.args.underlineHelpText",{defaultMessage:"Underline the text?"}),options:[true,false],types:["boolean"]},weight:{default:"normal",help:_i18n.i18n.translate("expressions.functions.font.args.weightHelpText",{defaultMessage:"The font weight. For example, {list}, or {end}.",values:{list:Object.values(_types.FontWeight).slice(0,-1).map((function(weight){return'`"'.concat(weight,'"`')})).join(", "),end:'`"'.concat(Object.values(_types.FontWeight).slice(-1)[0],'"`')}}),options:Object.values(_types.FontWeight),types:["string"]}},fn:function fn(_context,args){if(!Object.values(_types.FontWeight).includes(args.weight)){throw new Error(_i18n.i18n.translate("expressions.functions.font.invalidFontWeightErrorMessage",{defaultMessage:"Invalid font weight: '{weight}'",values:{weight:args.weight}}))}if(!Object.values(_types.TextAlignment).includes(args.align)){throw new Error(_i18n.i18n.translate("expressions.functions.font.invalidTextAlignmentErrorMessage",{defaultMessage:"Invalid text alignment: '{align}'",values:{align:args.align}}))}var lineHeight=args.lHeight!=null?"".concat(args.lHeight,"px"):"1";var spec={fontFamily:args.family,fontWeight:args.weight,fontStyle:args.italic?_types.FontStyle.ITALIC:_types.FontStyle.NORMAL,textDecoration:args.underline?_types.TextDecoration.UNDERLINE:_types.TextDecoration.NONE,textAlign:args.align,fontSize:"".concat(args.size,"px"),lineHeight:lineHeight};if(args.color){spec.color=args.color}return{type:"style",spec:spec,css:inlineStyle(spec)}}}}},6905:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fonts=exports.palatino=exports.optima=exports.openSans=exports.myriad=exports.lucidaGrande=exports.hoeflerText=exports.helveticaNeue=exports.gillSans=exports.futura=exports.didot=exports.chalkboard=exports.brushScript=exports.bookAntiqua=exports.baskerville=exports.arial=exports.americanTypewriter=void 0;function createFont(font){return font}var americanTypewriter=createFont({label:"American Typewriter",value:"'American Typewriter', 'Courier New', Courier, Monaco, mono"});exports.americanTypewriter=americanTypewriter;var arial=createFont({label:"Arial",value:"Arial, sans-serif"});exports.arial=arial;var baskerville=createFont({label:"Baskerville",value:"Baskerville, Georgia, Garamond, 'Times New Roman', Times, serif"});exports.baskerville=baskerville;var bookAntiqua=createFont({label:"Book Antiqua",value:"'Book Antiqua', Georgia, Garamond, 'Times New Roman', Times, serif"});exports.bookAntiqua=bookAntiqua;var brushScript=createFont({label:"Brush Script",value:"'Brush Script MT', 'Comic Sans', sans-serif"});exports.brushScript=brushScript;var chalkboard=createFont({label:"Chalkboard",value:"Chalkboard, 'Comic Sans', sans-serif"});exports.chalkboard=chalkboard;var didot=createFont({label:"Didot",value:"Didot, Georgia, Garamond, 'Times New Roman', Times, serif"});exports.didot=didot;var futura=createFont({label:"Futura",value:"Futura, Impact, Helvetica, Arial, sans-serif"});exports.futura=futura;var gillSans=createFont({label:"Gill Sans",value:"'Gill Sans', 'Lucida Grande', 'Lucida Sans Unicode', Verdana, Helvetica, Arial, sans-serif"});exports.gillSans=gillSans;var helveticaNeue=createFont({label:"Helvetica Neue",value:"'Helvetica Neue', Helvetica, Arial, sans-serif"});exports.helveticaNeue=helveticaNeue;var hoeflerText=createFont({label:"Hoefler Text",value:"'Hoefler Text', Garamond, Georgia, 'Times New Roman', Times, serif"});exports.hoeflerText=hoeflerText;var lucidaGrande=createFont({label:"Lucida Grande",value:"'Lucida Grande', 'Lucida Sans Unicode', Lucida, Verdana, Helvetica, Arial, sans-serif"});exports.lucidaGrande=lucidaGrande;var myriad=createFont({label:"Myriad",value:"Myriad, Helvetica, Arial, sans-serif"});exports.myriad=myriad;var openSans=createFont({label:"Open Sans",value:"'Open Sans', Helvetica, Arial, sans-serif"});exports.openSans=openSans;var optima=createFont({label:"Optima",value:"Optima, 'Lucida Grande', 'Lucida Sans Unicode', Verdana, Helvetica, Arial, sans-serif"});exports.optima=optima;var palatino=createFont({label:"Palatino",value:"Palatino, 'Book Antiqua', Georgia, Garamond, 'Times New Roman', Times, serif"});exports.palatino=palatino;var fonts=[americanTypewriter,arial,baskerville,bookAntiqua,brushScript,chalkboard,didot,futura,gillSans,helveticaNeue,hoeflerText,lucidaGrande,myriad,openSans,optima,palatino];exports.fonts=fonts},6906:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kibana=void 0;var _i18n=__webpack_require__(2);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var kibana=function kibana(){return{name:"kibana",type:"kibana_context",context:{types:["kibana_context","null"]},help:_i18n.i18n.translate("expressions.functions.kibana.help",{defaultMessage:"Gets kibana global context"}),args:{},fn:function fn(context,args,handlers){var initialContext=handlers.getInitialContext?handlers.getInitialContext():{};if(context&&context.query){initialContext.query=initialContext.query.concat(context.query)}if(context&&context.filters){initialContext.filters=initialContext.filters.concat(context.filters)}var timeRange=initialContext.timeRange||(context?context.timeRange:undefined);return _objectSpread({},context,{type:"kibana_context",query:initialContext.query,filters:initialContext.filters,timeRange:timeRange})}}};exports.kibana=kibana},6907:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kibanaContext=void 0;var _i18n=__webpack_require__(2);var _services=__webpack_require__(394);var kibanaContext=function kibanaContext(){return{name:"kibana_context",type:"kibana_context",context:{types:["kibana_context","null"]},help:_i18n.i18n.translate("expressions.functions.kibana_context.help",{defaultMessage:"Updates kibana global context"}),args:{q:{types:["string","null"],aliases:["query","_"],default:null,help:_i18n.i18n.translate("expressions.functions.kibana_context.q.help",{defaultMessage:"Specify Kibana free form text query"})},filters:{types:["string","null"],default:'"[]"',help:_i18n.i18n.translate("expressions.functions.kibana_context.filters.help",{defaultMessage:"Specify Kibana generic filters"})},timeRange:{types:["string","null"],default:null,help:_i18n.i18n.translate("expressions.functions.kibana_context.timeRange.help",{defaultMessage:"Specify Kibana time range filter"})},savedSearchId:{types:["string","null"],default:null,help:_i18n.i18n.translate("expressions.functions.kibana_context.savedSearchId.help",{defaultMessage:"Specify saved search ID to be used for queries and filters"})}},fn:function fn(context,args,handlers){var queryArg,queries,filters,obj,search,data,timeRange;return regeneratorRuntime.async((function fn$(_context){while(1){switch(_context.prev=_context.next){case 0:queryArg=args.q?JSON.parse(args.q):[];queries=Array.isArray(queryArg)?queryArg:[queryArg];filters=args.filters?JSON.parse(args.filters):[];if(!args.savedSearchId){_context.next=11;break}_context.next=6;return regeneratorRuntime.awrap(_services.savedObjects.get("search",args.savedSearchId));case 6:obj=_context.sent;search=obj.attributes.kibanaSavedObjectMeta;data=JSON.parse(search.searchSourceJSON);queries=queries.concat(data.query);filters=filters.concat(data.filter);case 11:if(context&&context.query){queries=queries.concat(context.query)}if(context&&context.filters){filters=filters.concat(context.filters).filter((function(f){return!f.meta.disabled}))}timeRange=args.timeRange?JSON.parse(args.timeRange):context?context.timeRange:undefined;return _context.abrupt("return",{type:"kibana_context",query:queries,filters:filters,timeRange:timeRange});case 15:case"end":return _context.stop()}}}))}}};exports.kibanaContext=kibanaContext},6908:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.createError=void 0;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}var createError=function createError(err){return{type:"error",error:{stack:true?undefined:undefined,message:typeof err==="string"?err:err.message,name:_typeof(err)==="object"?err.name||"Error":"Error"}}};exports.createError=createError},6909:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createHandlers=createHandlers;function createHandlers(){return{environment:"client"}}},6911:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderErrorHandler=void 0;var _i18n=__webpack_require__(2);var _services=__webpack_require__(394);var renderErrorHandler=function renderErrorHandler(element,error,handlers){(0,_services.getNotifications)().toasts.addError(error,{title:_i18n.i18n.translate("expressions.defaultErrorRenderer.errorTitle",{defaultMessage:"Error in visualisation"}),toastMessage:error.message});handlers.done()};exports.renderErrorHandler=renderErrorHandler},6912:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ExpressionRenderDefinition",{enumerable:true,get:function get(){return _registries.ExpressionRenderDefinition}});var _registries=__webpack_require__(1870)},7814:function(module,exports,__webpack_require__){module.exports=__webpack_require__(17)(1285)},9:function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},971:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Registry=void 0;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Registry=function(){function Registry(){_classCallCheck(this,Registry);_defineProperty(this,"data",{})}_createClass(Registry,[{key:"set",value:function set(id,item){this.data[id]=item}},{key:"get",value:function get(id){return this.data[id]||null}},{key:"toJS",value:function toJS(){return _objectSpread({},this.data)}},{key:"toArray",value:function toArray(){return Object.values(this.data)}},{key:"reset",value:function reset(){this.data={}}}]);return Registry}();exports.Registry=Registry},972:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.execute=execute;exports.ExpressionDataHandler=void 0;var _common=__webpack_require__(75);var _public=__webpack_require__(546);var _services=__webpack_require__(394);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ExpressionDataHandler=function ExpressionDataHandler(expression,params){var _this=this;_classCallCheck(this,ExpressionDataHandler);_defineProperty(this,"abortController",void 0);_defineProperty(this,"expression",void 0);_defineProperty(this,"ast",void 0);_defineProperty(this,"inspectorAdapters",void 0);_defineProperty(this,"promise",void 0);_defineProperty(this,"isPending",true);_defineProperty(this,"cancel",(function(){_this.abortController.abort()}));_defineProperty(this,"getData",(function _callee(){return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return regeneratorRuntime.awrap(_this.promise);case 3:return _context.abrupt("return",_context.sent);case 6:_context.prev=6;_context.t0=_context["catch"](0);return _context.abrupt("return",{type:"error",error:{type:_context.t0.type,message:_context.t0.message,stack:_context.t0.stack}});case 9:case"end":return _context.stop()}}}),null,null,[[0,6]])}));_defineProperty(this,"getExpression",(function(){return _this.expression}));_defineProperty(this,"getAst",(function(){return _this.ast}));_defineProperty(this,"inspect",(function(){return _this.inspectorAdapters}));_defineProperty(this,"getActiveInspectorAdapters",(function(){var adapters={};adapters.requests=new _public.RequestAdapter;adapters.data=new _public.DataAdapter;return adapters}));if(typeof expression==="string"){this.expression=expression;this.ast=(0,_common.fromExpression)(expression)}else{this.ast=expression;this.expression=(0,_common.toExpression)(this.ast)}this.abortController=new AbortController;this.inspectorAdapters=params.inspectorAdapters||this.getActiveInspectorAdapters();var getInitialContext=function getInitialContext(){return _objectSpread({type:"kibana_context"},params.searchContext)};var defaultContext={type:"null"};var interpreter=(0,_services.getInterpreter)();this.promise=interpreter.interpretAst(this.ast,params.context||defaultContext,{getInitialContext:getInitialContext,inspectorAdapters:this.inspectorAdapters,abortSignal:this.abortController.signal}).then((function(v){_this.isPending=false;return v}),(function(){_this.isPending=false}))};exports.ExpressionDataHandler=ExpressionDataHandler;function execute(expression){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new ExpressionDataHandler(expression,params)}},973:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.render=render;exports.ExpressionRenderHandler=void 0;var Rx=_interopRequireWildcard(__webpack_require__(37));var _operators=__webpack_require__(47);var _services=__webpack_require__(394);var _render_error_handler=__webpack_require__(6911);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ExpressionRenderHandler=function ExpressionRenderHandler(element){var _this=this;var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},onRenderError=_ref.onRenderError;_classCallCheck(this,ExpressionRenderHandler);_defineProperty(this,"render$",void 0);_defineProperty(this,"update$",void 0);_defineProperty(this,"events$",void 0);_defineProperty(this,"element",void 0);_defineProperty(this,"destroyFn",void 0);_defineProperty(this,"renderCount",0);_defineProperty(this,"renderSubject",void 0);_defineProperty(this,"eventsSubject",void 0);_defineProperty(this,"updateSubject",void 0);_defineProperty(this,"handlers",void 0);_defineProperty(this,"onRenderError",void 0);_defineProperty(this,"render",(function _callee(data){var extraHandlers,_args=arguments;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:extraHandlers=_args.length>1&&_args[1]!==undefined?_args[1]:{};if(!(!data||_typeof(data)!=="object")){_context.next=3;break}return _context.abrupt("return",_this.handleRenderError(new Error("invalid data provided to the expression renderer")));case 3:if(!(data.type!=="render"||!data.as)){_context.next=9;break}if(!(data.type==="error")){_context.next=8;break}return _context.abrupt("return",_this.handleRenderError(data.error));case 8:return _context.abrupt("return",_this.handleRenderError(new Error("invalid data provided to the expression renderer")));case 9:if((0,_services.getRenderersRegistry)().get(data.as)){_context.next=11;break}return _context.abrupt("return",_this.handleRenderError(new Error("invalid renderer id '".concat(data.as,"'"))));case 11:_context.prev=11;_context.next=14;return regeneratorRuntime.awrap((0,_services.getRenderersRegistry)().get(data.as).render(_this.element,data.value,_objectSpread({},_this.handlers,{},extraHandlers)));case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context["catch"](11);return _context.abrupt("return",_this.handleRenderError(_context.t0));case 19:case"end":return _context.stop()}}}),null,null,[[11,16]])}));_defineProperty(this,"destroy",(function(){_this.renderSubject.complete();_this.eventsSubject.complete();_this.updateSubject.complete();if(_this.destroyFn){_this.destroyFn()}}));_defineProperty(this,"getElement",(function(){return _this.element}));_defineProperty(this,"handleRenderError",(function(error){_this.onRenderError(_this.element,error,_this.handlers)}));this.element=element;this.eventsSubject=new Rx.Subject;this.events$=this.eventsSubject.asObservable();this.onRenderError=onRenderError||_render_error_handler.renderErrorHandler;this.renderSubject=new Rx.BehaviorSubject(null);this.render$=this.renderSubject.asObservable().pipe((0,_operators.filter)((function(_){return _!==null})));this.updateSubject=new Rx.Subject;this.update$=this.updateSubject.asObservable();this.handlers={onDestroy:function onDestroy(fn){_this.destroyFn=fn},done:function done(){_this.renderCount++;_this.renderSubject.next(_this.renderCount)},reload:function reload(){_this.updateSubject.next(null)},update:function update(params){_this.updateSubject.next(params)},event:function event(data){_this.eventsSubject.next(data)}}};exports.ExpressionRenderHandler=ExpressionRenderHandler;function render(element,data,options){var handler=new ExpressionRenderHandler(element,options);handler.render(data);return handler}}})["plugin"];