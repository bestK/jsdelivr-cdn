/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["plugin/reporting"]=function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var executeModules=data[2];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}deferredModules.push.apply(deferredModules,executeModules||[]);return checkDeferredModules()}function checkDeferredModules(){var result;for(var i=0;i<deferredModules.length;i++){var deferredModule=deferredModules[i];var fulfilled=true;for(var j=1;j<deferredModule.length;j++){var depId=deferredModule[j];if(installedChunks[depId]!==0)fulfilled=false}if(fulfilled){deferredModules.splice(i--,1);result=__webpack_require__(__webpack_require__.s=deferredModule[0])}}return result}var installedModules={};var installedChunks={35:0,24:0,29:0,32:0,39:0};var deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(){return Promise.resolve()};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([6953,0]);return checkDeferredModules()}({0:function(module,exports){module.exports=__kbnSharedDeps__.React},1:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},17:function(module,exports){module.exports=vendors_3},18:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLightTheme},1879:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getSuccessToast",{enumerable:true,get:function get(){return _job_success.getSuccessToast}});Object.defineProperty(exports,"getFailureToast",{enumerable:true,get:function get(){return _job_failure.getFailureToast}});Object.defineProperty(exports,"getWarningFormulasToast",{enumerable:true,get:function get(){return _job_warning_formulas.getWarningFormulasToast}});Object.defineProperty(exports,"getWarningMaxSizeToast",{enumerable:true,get:function get(){return _job_warning_max_size.getWarningMaxSizeToast}});Object.defineProperty(exports,"getGeneralErrorToast",{enumerable:true,get:function get(){return _general_error.getGeneralErrorToast}});var _job_success=__webpack_require__(6955);var _job_failure=__webpack_require__(6956);var _job_warning_formulas=__webpack_require__(6957);var _job_warning_max_size=__webpack_require__(6958);var _general_error=__webpack_require__(6959)},2:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},26:function(module,exports){module.exports=vendors_2},34:function(module,exports){module.exports=vendors_0},36:function(module,exports){module.exports=vendors_1},4:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},50:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiDarkTheme},6953:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.ReportingPublicPlugin}});var _plugin=__webpack_require__(6954);function plugin(initializerContext){return new _plugin.ReportingPublicPlugin(initializerContext)}},6954:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReportingPublicPlugin=void 0;var Rx=_interopRequireWildcard(__webpack_require__(37));var _operators=__webpack_require__(47);var _i18n=__webpack_require__(2);var _constants=__webpack_require__(974);var _components=__webpack_require__(1879);var _stream_handler=__webpack_require__(6960);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var JOBS_REFRESH_INTERVAL=_constants.JOB_COMPLETION_NOTIFICATIONS_POLLER_CONFIG.jobCompletionNotifier.interval;function getStored(){var sessionValue=sessionStorage.getItem(_constants.JOB_COMPLETION_NOTIFICATIONS_SESSION_KEY);return sessionValue?JSON.parse(sessionValue):[]}function handleError(notifications,err){notifications.toasts.addDanger((0,_components.getGeneralErrorToast)(_i18n.i18n.translate("xpack.reporting.publicNotifier.pollingErrorMessage",{defaultMessage:"Reporting notifier error!"}),err));window.console.error(err);return Rx.of({completed:[],failed:[]})}var ReportingPublicPlugin=function(){function ReportingPublicPlugin(initializerContext){_classCallCheck(this,ReportingPublicPlugin);_defineProperty(this,"stop$",new Rx.ReplaySubject(1))}_createClass(ReportingPublicPlugin,[{key:"setup",value:function setup(core){}},{key:"start",value:function start(core){var http=core.http,notifications=core.notifications;var streamHandler=new _stream_handler.ReportingNotifierStreamHandler(http,notifications);Rx.timer(0,JOBS_REFRESH_INTERVAL).pipe((0,_operators.takeUntil)(this.stop$),(0,_operators.map)((function(){return getStored()})),(0,_operators.filter)((function(storedJobs){return storedJobs.length>0})),(0,_operators.mergeMap)((function(storedJobs){return streamHandler.findChangedStatusJobs(storedJobs)})),(0,_operators.mergeMap)((function(_ref){var completed=_ref.completed,failed=_ref.failed;return streamHandler.showNotifications({completed:completed,failed:failed})})),(0,_operators.catchError)((function(err){return handleError(notifications,err)}))).subscribe()}},{key:"stop",value:function stop(){this.stop$.next()}}]);return ReportingPublicPlugin}();exports.ReportingPublicPlugin=ReportingPublicPlugin},6955:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSuccessToast=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(4);var _public=__webpack_require__(16);var _report_link=__webpack_require__(975);var _download_button=__webpack_require__(976);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var getSuccessToast=function getSuccessToast(job,getReportLink,getDownloadLink){return{title:(0,_public.toMountPoint)(_react.default.createElement(_react2.FormattedMessage,{id:"xpack.reporting.publicNotifier.successfullyCreatedReportNotificationTitle",defaultMessage:"Created report for {reportObjectType} '{reportObjectTitle}'",values:{reportObjectType:job.type,reportObjectTitle:job.title}})),color:"success",text:(0,_public.toMountPoint)(_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_report_link.ReportLink,{getUrl:getReportLink})),_react.default.createElement(_download_button.DownloadButton,{getUrl:getDownloadLink,job:job}))),"data-test-subj":"completeReportSuccess"}};exports.getSuccessToast=getSuccessToast},6956:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFailureToast=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(2);var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);var _public=__webpack_require__(16);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var getFailureToast=function getFailureToast(errorText,job,getManagmenetLink){return{title:(0,_public.toMountPoint)(_react.default.createElement(_react2.FormattedMessage,{id:"xpack.reporting.publicNotifier.error.couldNotCreateReportTitle",defaultMessage:"Could not create report for {reportObjectType} '{reportObjectTitle}'.",values:{reportObjectType:job.type,reportObjectTitle:job.title}})),text:(0,_public.toMountPoint)(_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{size:"m",title:_i18n.i18n.translate("xpack.reporting.publicNotifier.error.calloutTitle",{defaultMessage:"The reporting job failed"}),color:"danger",iconType:"alert"},errorText),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.reporting.publicNotifier.error.checkManagement",defaultMessage:"More information is available at {path}.",values:{path:_react.default.createElement("a",{href:getManagmenetLink()},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.reporting.publicNotifier.error.reportingSectionUrlLinkLabel",defaultMessage:"Management > Kibana > Reporting"}))}})))),iconType:undefined,"data-test-subj":"completeReportFailure"}};exports.getFailureToast=getFailureToast},6957:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getWarningFormulasToast=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(4);var _public=__webpack_require__(16);var _report_link=__webpack_require__(975);var _download_button=__webpack_require__(976);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var getWarningFormulasToast=function getWarningFormulasToast(job,getReportLink,getDownloadLink){return{title:(0,_public.toMountPoint)(_react.default.createElement(_react2.FormattedMessage,{id:"xpack.reporting.publicNotifier.csvContainsFormulas.formulaReportTitle",defaultMessage:"Report may contain formulas {reportObjectType} '{reportObjectTitle}'",values:{reportObjectType:job.type,reportObjectTitle:job.title}})),text:(0,_public.toMountPoint)(_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.reporting.publicNotifier.csvContainsFormulas.formulaReportMessage",defaultMessage:"The report contains characters which spreadsheet applications can interpret as formulas."})),_react.default.createElement("p",null,_react.default.createElement(_report_link.ReportLink,{getUrl:getReportLink})),_react.default.createElement(_download_button.DownloadButton,{getUrl:getDownloadLink,job:job}))),"data-test-subj":"completeReportCsvFormulasWarning"}};exports.getWarningFormulasToast=getWarningFormulasToast},6958:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getWarningMaxSizeToast=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(4);var _public=__webpack_require__(16);var _report_link=__webpack_require__(975);var _download_button=__webpack_require__(976);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var getWarningMaxSizeToast=function getWarningMaxSizeToast(job,getReportLink,getDownloadLink){return{title:(0,_public.toMountPoint)(_react.default.createElement(_react2.FormattedMessage,{id:"xpack.reporting.publicNotifier.maxSizeReached.partialReportTitle",defaultMessage:"Created partial report for {reportObjectType} '{reportObjectTitle}'",values:{reportObjectType:job.type,reportObjectTitle:job.title}})),text:(0,_public.toMountPoint)(_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.reporting.publicNotifier.maxSizeReached.partialReportDescription",defaultMessage:"The report reached the max size and contains partial data."})),_react.default.createElement("p",null,_react.default.createElement(_report_link.ReportLink,{getUrl:getReportLink})),_react.default.createElement(_download_button.DownloadButton,{getUrl:getDownloadLink,job:job}))),"data-test-subj":"completeReportMaxSizeWarning"}};exports.getWarningMaxSizeToast=getWarningMaxSizeToast},6959:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getGeneralErrorToast=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);var _public=__webpack_require__(16);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var getGeneralErrorToast=function getGeneralErrorToast(errorText,err){return{text:(0,_public.toMountPoint)(_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:errorText,color:"danger",iconType:"alert"},err.toString()),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_react2.FormattedMessage,{id:"xpack.reporting.publicNotifier.error.tryRefresh",defaultMessage:"Try refreshing the page."}))),iconType:undefined}};exports.getGeneralErrorToast=getGeneralErrorToast},6960:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReportingNotifierStreamHandler=void 0;var Rx=_interopRequireWildcard(__webpack_require__(37));var _operators=__webpack_require__(47);var _i18n=__webpack_require__(2);var _constants=__webpack_require__(974);var _components=__webpack_require__(1879);var _job_queue=__webpack_require__(6961);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function updateStored(jobIds){sessionStorage.setItem(_constants.JOB_COMPLETION_NOTIFICATIONS_SESSION_KEY,JSON.stringify(jobIds))}function summarizeJob(src){return{id:src._id,status:src._source.status,title:src._source.payload.title,type:src._source.payload.type,maxSizeReached:src._source.output.max_size_reached,csvContainsFormulas:src._source.output.csv_contains_formulas}}var ReportingNotifierStreamHandler=function(){function ReportingNotifierStreamHandler(http,notifications){var jobQueueClient=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_job_queue.jobQueueClient;_classCallCheck(this,ReportingNotifierStreamHandler);this.http=http;this.notifications=notifications;this.jobQueueClient=jobQueueClient;_defineProperty(this,"getManagementLink",void 0);_defineProperty(this,"getDownloadLink",void 0);this.getManagementLink=function(){return http.basePath.prepend(_constants.REPORTING_MANAGEMENT_HOME)};this.getDownloadLink=function(jobId){return http.basePath.prepend("".concat(_constants.API_BASE_URL,"/download/").concat(jobId))}}_createClass(ReportingNotifierStreamHandler,[{key:"showNotifications",value:function showNotifications(_ref){var _this=this;var completedJobs=_ref.completed,failedJobs=_ref.failed;var showNotificationsAsync=function showNotificationsAsync(){var _iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,job,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,_job,content;return regeneratorRuntime.async((function showNotificationsAsync$(_context){while(1){switch(_context.prev=_context.next){case 0:_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=3;for(_iterator=completedJobs[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){job=_step.value;if(job.csvContainsFormulas){_this.notifications.toasts.addWarning((0,_components.getWarningFormulasToast)(job,_this.getManagementLink,_this.getDownloadLink))}else if(job.maxSizeReached){_this.notifications.toasts.addWarning((0,_components.getWarningMaxSizeToast)(job,_this.getManagementLink,_this.getDownloadLink))}else{_this.notifications.toasts.addSuccess((0,_components.getSuccessToast)(job,_this.getManagementLink,_this.getDownloadLink))}}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context["catch"](3);_didIteratorError=true;_iteratorError=_context.t0;case 11:_context.prev=11;_context.prev=12;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 14:_context.prev=14;if(!_didIteratorError){_context.next=17;break}throw _iteratorError;case 17:return _context.finish(14);case 18:return _context.finish(11);case 19:_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context.prev=22;_iterator2=failedJobs[Symbol.iterator]();case 24:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context.next=33;break}_job=_step2.value;_context.next=28;return regeneratorRuntime.awrap(_this.jobQueueClient.getContent(_this.http,_job.id));case 28:content=_context.sent;_this.notifications.toasts.addDanger((0,_components.getFailureToast)(content,_job,_this.getManagementLink));case 30:_iteratorNormalCompletion2=true;_context.next=24;break;case 33:_context.next=39;break;case 35:_context.prev=35;_context.t1=_context["catch"](22);_didIteratorError2=true;_iteratorError2=_context.t1;case 39:_context.prev=39;_context.prev=40;if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}case 42:_context.prev=42;if(!_didIteratorError2){_context.next=45;break}throw _iteratorError2;case 45:return _context.finish(42);case 46:return _context.finish(39);case 47:return _context.abrupt("return",{completed:completedJobs,failed:failedJobs});case 48:case"end":return _context.stop()}}}),null,null,[[3,7,11,19],[12,,14,18],[22,35,39,47],[40,,42,46]])};return Rx.from(showNotificationsAsync())}},{key:"findChangedStatusJobs",value:function findChangedStatusJobs(storedJobs){var _this2=this;return Rx.from(this.jobQueueClient.findForJobIds(this.http,storedJobs)).pipe((0,_operators.map)((function(jobs){var completedJobs=[];var failedJobs=[];var pending=[];var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=jobs[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _job2=_step3.value;var jobId=_job2._id,jobStatus=_job2._source.status;if(storedJobs.includes(jobId)){if(jobStatus===_constants.JOB_STATUS_COMPLETED){completedJobs.push(summarizeJob(_job2))}else if(jobStatus===_constants.JOB_STATUS_FAILED){failedJobs.push(summarizeJob(_job2))}else{pending.push(jobId)}}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return!=null){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}updateStored(pending);return{completed:completedJobs,failed:failedJobs}})),(0,_operators.catchError)((function(err){_this2.notifications.toasts.addDanger((0,_components.getGeneralErrorToast)(_i18n.i18n.translate("xpack.reporting.publicNotifier.httpErrorMessage",{defaultMessage:"Could not check Reporting job status!"}),err));window.console.error(err);return Rx.of({completed:[],failed:[]})})))}}]);return ReportingNotifierStreamHandler}();exports.ReportingNotifierStreamHandler=ReportingNotifierStreamHandler},6961:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.jobQueueClient=exports.JobQueue=void 0;var _constants=__webpack_require__(974);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var JobQueue=function(){function JobQueue(){_classCallCheck(this,JobQueue);_defineProperty(this,"findForJobIds",(function(http,jobIds){return http.fetch("".concat(_constants.API_BASE_URL,"/list"),{query:{page:0,ids:jobIds.join(",")},method:"GET"})}))}_createClass(JobQueue,[{key:"getContent",value:function getContent(http,jobId){return http.fetch("".concat(_constants.API_BASE_URL,"/output/").concat(jobId),{method:"GET"}).then((function(data){return data.content}))}}]);return JobQueue}();exports.JobQueue=JobQueue;var jobQueueClient=new JobQueue;exports.jobQueueClient=jobQueueClient},9:function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},974:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JOB_STATUS_COMPLETED=exports.JOB_STATUS_FAILED=exports.REPORTING_MANAGEMENT_HOME=exports.API_BASE_URL=exports.JOB_COMPLETION_NOTIFICATIONS_POLLER_CONFIG=exports.JOB_COMPLETION_NOTIFICATIONS_SESSION_KEY=void 0;var JOB_COMPLETION_NOTIFICATIONS_SESSION_KEY="xpack.reporting.jobCompletionNotifications";exports.JOB_COMPLETION_NOTIFICATIONS_SESSION_KEY=JOB_COMPLETION_NOTIFICATIONS_SESSION_KEY;var JOB_COMPLETION_NOTIFICATIONS_POLLER_CONFIG={jobCompletionNotifier:{interval:1e4,intervalErrorMultiplier:5}};exports.JOB_COMPLETION_NOTIFICATIONS_POLLER_CONFIG=JOB_COMPLETION_NOTIFICATIONS_POLLER_CONFIG;var API_BASE_URL="/api/reporting/jobs";exports.API_BASE_URL=API_BASE_URL;var REPORTING_MANAGEMENT_HOME="/app/kibana#/management/kibana/reporting";exports.REPORTING_MANAGEMENT_HOME=REPORTING_MANAGEMENT_HOME;var JOB_STATUS_FAILED="failed";exports.JOB_STATUS_FAILED=JOB_STATUS_FAILED;var JOB_STATUS_COMPLETED="completed";exports.JOB_STATUS_COMPLETED=JOB_STATUS_COMPLETED},975:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReportLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ReportLink=function ReportLink(_ref){var getUrl=_ref.getUrl;return _react.default.createElement(_react2.FormattedMessage,{id:"xpack.reporting.publicNotifier.reportLink.pickItUpFromPathDescription",defaultMessage:"Pick it up from {path}.",values:{path:_react.default.createElement("a",{href:getUrl()},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.reporting.publicNotifier.reportLink.reportingSectionUrlLinkLabel",defaultMessage:"Management > Kibana > Reporting"}))}})};exports.ReportLink=ReportLink},976:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DownloadButton=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DownloadButton=function DownloadButton(_ref){var getUrl=_ref.getUrl,job=_ref.job;var downloadReport=function downloadReport(){window.open(getUrl(job.id))};return _react.default.createElement(_eui.EuiButton,{size:"s","data-test-subj":"downloadCompletedReportButton",onClick:function onClick(){downloadReport()}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.reporting.publicNotifier.downloadReportButtonLabel",defaultMessage:"Download report"}))};exports.DownloadButton=DownloadButton}})["plugin"];