/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["plugin/share"]=function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var executeModules=data[2];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}deferredModules.push.apply(deferredModules,executeModules||[]);return checkDeferredModules()}function checkDeferredModules(){var result;for(var i=0;i<deferredModules.length;i++){var deferredModule=deferredModules[i];var fulfilled=true;for(var j=1;j<deferredModule.length;j++){var depId=deferredModule[j];if(installedChunks[depId]!==0)fulfilled=false}if(fulfilled){deferredModules.splice(i--,1);result=__webpack_require__(__webpack_require__.s=deferredModule[0])}}return result}var installedModules={};var installedChunks={37:0};var deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(){return Promise.resolve()};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([6932,0]);return checkDeferredModules()}({0:function(module,exports){module.exports=__kbnSharedDeps__.React},1:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},2:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},26:function(module,exports){module.exports=vendors_2},4:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},6932:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SharePluginSetup",{enumerable:true,get:function get(){return _plugin.SharePluginSetup}});Object.defineProperty(exports,"SharePluginStart",{enumerable:true,get:function get(){return _plugin.SharePluginStart}});Object.defineProperty(exports,"ShareContext",{enumerable:true,get:function get(){return _types.ShareContext}});Object.defineProperty(exports,"ShareMenuProvider",{enumerable:true,get:function get(){return _types.ShareMenuProvider}});Object.defineProperty(exports,"ShareMenuItem",{enumerable:true,get:function get(){return _types.ShareMenuItem}});Object.defineProperty(exports,"ShowShareMenuOptions",{enumerable:true,get:function get(){return _types.ShowShareMenuOptions}});Object.defineProperty(exports,"ShareContextMenuPanelItem",{enumerable:true,get:function get(){return _types.ShareContextMenuPanelItem}});exports.plugin=void 0;var _plugin=__webpack_require__(6933);var _types=__webpack_require__(6940);var plugin=function plugin(){return new _plugin.SharePlugin};exports.plugin=plugin},6933:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SharePlugin=void 0;var _services=__webpack_require__(6934);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SharePlugin=function(){function SharePlugin(){_classCallCheck(this,SharePlugin);_defineProperty(this,"shareMenuRegistry",new _services.ShareMenuRegistry);_defineProperty(this,"shareContextMenu",new _services.ShareMenuManager)}_createClass(SharePlugin,[{key:"setup",value:function setup(){return regeneratorRuntime.async((function setup$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",_objectSpread({},this.shareMenuRegistry.setup()));case 1:case"end":return _context.stop()}}}),null,this)}},{key:"start",value:function start(core){return regeneratorRuntime.async((function start$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",_objectSpread({},this.shareContextMenu.start(core,this.shareMenuRegistry.start())));case 1:case"end":return _context2.stop()}}}),null,this)}}]);return SharePlugin}();exports.SharePlugin=SharePlugin},6934:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _share_menu_registry=__webpack_require__(6935);Object.keys(_share_menu_registry).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _share_menu_registry[key]}})}));var _share_menu_manager=__webpack_require__(6936);Object.keys(_share_menu_manager).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _share_menu_manager[key]}})}))},6935:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShareMenuRegistry=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ShareMenuRegistry=function(){function ShareMenuRegistry(){_classCallCheck(this,ShareMenuRegistry);_defineProperty(this,"shareMenuProviders",new Map)}_createClass(ShareMenuRegistry,[{key:"setup",value:function setup(){var _this=this;return{register:function register(shareMenuProvider){if(_this.shareMenuProviders.has(shareMenuProvider.id)){throw new Error("Share menu provider with id [".concat(shareMenuProvider.id,"] has already been registered. Use a unique id."))}_this.shareMenuProviders.set(shareMenuProvider.id,shareMenuProvider)}}}},{key:"start",value:function start(){var _this2=this;return{getShareMenuItems:function getShareMenuItems(context){return Array.from(_this2.shareMenuProviders.values()).flatMap((function(shareActionProvider){return shareActionProvider.getShareMenuItems(context)}))}}}}]);return ShareMenuRegistry}();exports.ShareMenuRegistry=ShareMenuRegistry},6936:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShareMenuManager=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(9));var _react2=__webpack_require__(4);var _eui=__webpack_require__(1);var _share_context_menu=__webpack_require__(6937);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ShareMenuManager=function(){function ShareMenuManager(){var _this=this;_classCallCheck(this,ShareMenuManager);_defineProperty(this,"isOpen",false);_defineProperty(this,"container",document.createElement("div"));_defineProperty(this,"onClose",(function(){_reactDom.default.unmountComponentAtNode(_this.container);_this.isOpen=false}))}_createClass(ShareMenuManager,[{key:"start",value:function start(core,shareRegistry){var _this2=this;return{toggleShareContextMenu:function toggleShareContextMenu(options){var menuItems=shareRegistry.getShareMenuItems(_objectSpread({},options,{onClose:_this2.onClose}));_this2.toggleShareContextMenu(_objectSpread({},options,{menuItems:menuItems,post:core.http.post,basePath:core.http.basePath.get()}))}}}},{key:"toggleShareContextMenu",value:function toggleShareContextMenu(_ref){var anchorElement=_ref.anchorElement,allowEmbed=_ref.allowEmbed,allowShortUrl=_ref.allowShortUrl,objectId=_ref.objectId,objectType=_ref.objectType,sharingData=_ref.sharingData,menuItems=_ref.menuItems,shareableUrl=_ref.shareableUrl,post=_ref.post,basePath=_ref.basePath;if(this.isOpen){this.onClose();return}this.isOpen=true;document.body.appendChild(this.container);var element=_react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_eui.EuiWrappingPopover,{id:"sharePopover",button:anchorElement,isOpen:true,closePopover:this.onClose,panelPaddingSize:"none",withTitle:true,anchorPosition:"downLeft"},_react.default.createElement(_share_context_menu.ShareContextMenu,{allowEmbed:allowEmbed,allowShortUrl:allowShortUrl,objectId:objectId,objectType:objectType,shareMenuItems:menuItems,sharingData:sharingData,shareableUrl:shareableUrl,onClose:this.onClose,post:post,basePath:basePath})));_reactDom.default.render(element,this.container)}}]);return ShareMenuManager}();exports.ShareMenuManager=ShareMenuManager},6937:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ShareContextMenu=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(4);var _i18n=__webpack_require__(2);var _eui=__webpack_require__(1);var _url_panel_content=__webpack_require__(6938);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ShareContextMenu=function(_Component){_inherits(ShareContextMenu,_Component);function ShareContextMenu(){var _getPrototypeOf2;var _this;_classCallCheck(this,ShareContextMenu);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ShareContextMenu)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getPanels",(function(){var panels=[];var menuItems=[];var permalinkPanel={id:panels.length+1,title:_i18n.i18n.translate("share.contextMenu.permalinkPanelTitle",{defaultMessage:"Permalink"}),content:_react.default.createElement(_url_panel_content.UrlPanelContent,{allowShortUrl:_this.props.allowShortUrl,objectId:_this.props.objectId,objectType:_this.props.objectType,basePath:_this.props.basePath,post:_this.props.post,shareableUrl:_this.props.shareableUrl})};menuItems.push({name:_i18n.i18n.translate("share.contextMenu.permalinksLabel",{defaultMessage:"Permalinks"}),icon:"link",panel:permalinkPanel.id,sortOrder:0});panels.push(permalinkPanel);if(_this.props.allowEmbed){var embedPanel={id:panels.length+1,title:_i18n.i18n.translate("share.contextMenu.embedCodePanelTitle",{defaultMessage:"Embed Code"}),content:_react.default.createElement(_url_panel_content.UrlPanelContent,{allowShortUrl:_this.props.allowShortUrl,isEmbedded:true,objectId:_this.props.objectId,objectType:_this.props.objectType,basePath:_this.props.basePath,post:_this.props.post,shareableUrl:_this.props.shareableUrl})};panels.push(embedPanel);menuItems.push({name:_i18n.i18n.translate("share.contextMenu.embedCodeLabel",{defaultMessage:"Embed code"}),icon:"console",panel:embedPanel.id,sortOrder:0})}_this.props.shareMenuItems.forEach((function(_ref){var shareMenuItem=_ref.shareMenuItem,panel=_ref.panel;var panelId=panels.length+1;panels.push(_objectSpread({},panel,{id:panelId}));menuItems.push(_objectSpread({},shareMenuItem,{panel:panelId}))}));if(menuItems.length>1){var topLevelMenuPanel={id:panels.length+1,title:_i18n.i18n.translate("share.contextMenuTitle",{defaultMessage:"Share this {objectType}",values:{objectType:_this.props.objectType}}),items:menuItems.sort((function(a,b){var aSortOrder=a.sortOrder||0;var bSortOrder=b.sortOrder||0;if(aSortOrder>bSortOrder){return 1}if(aSortOrder<bSortOrder){return-1}if(a.name.toLowerCase().localeCompare(b.name.toLowerCase())>0){return 1}return-1})).map((function(menuItem){menuItem["data-test-subj"]="sharePanel-".concat(menuItem.name.replace(" ",""));delete menuItem.sortOrder;return menuItem}))};panels.push(topLevelMenuPanel)}var lastPanelIndex=panels.length-1;var initialPanelId=panels[lastPanelIndex].id;return{panels:panels,initialPanelId:initialPanelId}}));return _this}_createClass(ShareContextMenu,[{key:"render",value:function render(){var _this$getPanels=this.getPanels(),panels=_this$getPanels.panels,initialPanelId=_this$getPanels.initialPanelId;return _react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_eui.EuiContextMenu,{initialPanelId:initialPanelId,panels:panels,"data-test-subj":"shareContextMenu"}))}}]);return ShareContextMenu}(_react.Component);exports.ShareContextMenu=ShareContextMenu},6938:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.UrlPanelContent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _url=__webpack_require__(71);var _react2=__webpack_require__(4);var _i18n=__webpack_require__(2);var _url_shortener=__webpack_require__(6939);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ExportUrlAsType;(function(ExportUrlAsType){ExportUrlAsType["EXPORT_URL_AS_SAVED_OBJECT"]="savedObject";ExportUrlAsType["EXPORT_URL_AS_SNAPSHOT"]="snapshot"})(ExportUrlAsType||(ExportUrlAsType={}));var UrlPanelContent=function(_Component){_inherits(UrlPanelContent,_Component);function UrlPanelContent(props){var _this;_classCallCheck(this,UrlPanelContent);_this=_possibleConstructorReturn(this,_getPrototypeOf(UrlPanelContent).call(this,props));_defineProperty(_assertThisInitialized(_this),"mounted",void 0);_defineProperty(_assertThisInitialized(_this),"shortUrlCache",void 0);_defineProperty(_assertThisInitialized(_this),"isNotSaved",(function(){return _this.props.objectId===undefined||_this.props.objectId===""}));_defineProperty(_assertThisInitialized(_this),"resetUrl",(function(){if(_this.mounted){_this.shortUrlCache=undefined;_this.setState({useShortUrl:false},_this.setUrl)}}));_defineProperty(_assertThisInitialized(_this),"getSavedObjectUrl",(function(){if(_this.isNotSaved()){return}var url=_this.getSnapshotUrl();var parsedUrl=(0,_url.parse)(url);if(!parsedUrl||!parsedUrl.hash){return}var parsedAppUrl=(0,_url.parse)(parsedUrl.hash.slice(1),true);return(0,_url.format)({protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.host,pathname:parsedUrl.pathname,hash:(0,_url.format)({pathname:parsedAppUrl.pathname,query:{_g:parsedAppUrl.query._g}})})}));_defineProperty(_assertThisInitialized(_this),"getSnapshotUrl",(function(){return _this.props.shareableUrl||window.location.href}));_defineProperty(_assertThisInitialized(_this),"makeUrlEmbeddable",(function(url){var embedQueryParam="?embed=true";var urlHasQueryString=url.indexOf("?")!==-1;if(urlHasQueryString){return url.replace("?","".concat(embedQueryParam,"&"))}return"".concat(url).concat(embedQueryParam)}));_defineProperty(_assertThisInitialized(_this),"makeIframeTag",(function(url){if(!url){return}var embeddableUrl=_this.makeUrlEmbeddable(url);return'<iframe src="'.concat(embeddableUrl,'" height="600" width="800"></iframe>')}));_defineProperty(_assertThisInitialized(_this),"setUrl",(function(){var url;if(_this.state.exportUrlAs===ExportUrlAsType.EXPORT_URL_AS_SAVED_OBJECT){url=_this.getSavedObjectUrl()}else if(_this.state.useShortUrl){url=_this.shortUrlCache}else{url=_this.getSnapshotUrl()}if(_this.props.isEmbedded){url=_this.makeIframeTag(url)}_this.setState({url:url})}));_defineProperty(_assertThisInitialized(_this),"handleExportUrlAs",(function(optionId){_this.setState({exportUrlAs:optionId},_this.setUrl)}));_defineProperty(_assertThisInitialized(_this),"handleShortUrlChange",(function _callee(evt){var isChecked,shortUrl;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isChecked=evt.target.checked;if(!(!isChecked||_this.shortUrlCache!==undefined)){_context.next=4;break}_this.setState({useShortUrl:isChecked},_this.setUrl);return _context.abrupt("return");case 4:_this.setState({isCreatingShortUrl:true,shortUrlErrorMsg:undefined});_context.prev=5;_context.next=8;return regeneratorRuntime.awrap((0,_url_shortener.shortenUrl)(_this.getSnapshotUrl(),{basePath:_this.props.basePath,post:_this.props.post}));case 8:shortUrl=_context.sent;if(_this.mounted){_this.shortUrlCache=shortUrl;_this.setState({isCreatingShortUrl:false,useShortUrl:isChecked},_this.setUrl)}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);if(_this.mounted){_this.shortUrlCache=undefined;_this.setState({useShortUrl:false,isCreatingShortUrl:false,shortUrlErrorMsg:_i18n.i18n.translate("share.urlPanel.unableCreateShortUrlErrorMessage",{defaultMessage:"Unable to create short URL. Error: {errorMessage}",values:{errorMessage:_context.t0.message}})},_this.setUrl)}case 15:case"end":return _context.stop()}}}),null,null,[[5,12]])}));_defineProperty(_assertThisInitialized(_this),"renderExportUrlAsOptions",(function(){return[_defineProperty({id:ExportUrlAsType.EXPORT_URL_AS_SNAPSHOT,label:_this.renderWithIconTip(_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.snapshotLabel",defaultMessage:"Snapshot"}),_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.snapshotDescription",defaultMessage:"Snapshot URLs encode the current state of the {objectType} in the URL itself. Edits to the saved {objectType} won't be visible via this URL.",values:{objectType:_this.props.objectType}}))},"data-test-subj","exportAsSnapshot"),_defineProperty({id:ExportUrlAsType.EXPORT_URL_AS_SAVED_OBJECT,disabled:_this.isNotSaved(),label:_this.renderWithIconTip(_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.savedObjectLabel",defaultMessage:"Saved object"}),_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.savedObjectDescription",defaultMessage:"You can share this URL with people to let them load the most recent saved version of this {objectType}.",values:{objectType:_this.props.objectType}}))},"data-test-subj","exportAsSavedObject")]}));_defineProperty(_assertThisInitialized(_this),"renderWithIconTip",(function(child,tipContent){return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none",responsive:false},_react.default.createElement(_eui.EuiFlexItem,null,child),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIconTip,{content:tipContent,position:"bottom"})))}));_defineProperty(_assertThisInitialized(_this),"renderExportAsRadioGroup",(function(){var generateLinkAsHelp=_this.isNotSaved()?_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.canNotShareAsSavedObjectHelpText",defaultMessage:"Can't share as saved object until the {objectType} has been saved.",values:{objectType:_this.props.objectType}}):undefined;return _react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.generateLinkAsLabel",defaultMessage:"Generate the link as"}),helpText:generateLinkAsHelp},_react.default.createElement(_eui.EuiRadioGroup,{options:_this.renderExportUrlAsOptions(),idSelected:_this.state.exportUrlAs,onChange:_this.handleExportUrlAs}))}));_defineProperty(_assertThisInitialized(_this),"renderShortUrlSwitch",(function(){if(_this.state.exportUrlAs===ExportUrlAsType.EXPORT_URL_AS_SAVED_OBJECT||!_this.props.allowShortUrl){return}var shortUrlLabel=_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.shortUrlLabel",defaultMessage:"Short URL"});var switchLabel=_this.state.isCreatingShortUrl?_react.default.createElement("span",null,_react.default.createElement(_eui.EuiLoadingSpinner,{size:"s"})," ",shortUrlLabel):shortUrlLabel;var switchComponent=_react.default.createElement(_eui.EuiSwitch,{label:switchLabel,checked:_this.state.useShortUrl,onChange:_this.handleShortUrlChange,"data-test-subj":"useShortUrl"});var tipContent=_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.shortUrlHelpText",defaultMessage:"We recommend sharing shortened snapshot URLs for maximum compatibility. Internet Explorer has URL length restrictions, and some wiki and markup parsers don't do well with the full-length version of the snapshot URL, but the short URL should work great."});return _react.default.createElement(_eui.EuiFormRow,{helpText:_this.state.shortUrlErrorMsg,"data-test-subj":"createShortUrl"},_this.renderWithIconTip(switchComponent,tipContent))}));_this.shortUrlCache=undefined;_this.state={exportUrlAs:ExportUrlAsType.EXPORT_URL_AS_SNAPSHOT,useShortUrl:false,isCreatingShortUrl:false,url:""};return _this}_createClass(UrlPanelContent,[{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("hashchange",this.resetUrl);this.mounted=false}},{key:"componentDidMount",value:function componentDidMount(){this.mounted=true;this.setUrl();window.addEventListener("hashchange",this.resetUrl,false)}},{key:"render",value:function render(){var _this2=this;return _react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_eui.EuiForm,{className:"kbnShareContextMenu__finalPanel","data-test-subj":"shareUrlForm"},this.renderExportAsRadioGroup(),this.renderShortUrlSwitch(),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiCopy,{textToCopy:this.state.url||"",anchorClassName:"eui-displayBlock"},(function(copy){return _react.default.createElement(_eui.EuiButton,{fill:true,fullWidth:true,onClick:copy,disabled:_this2.state.isCreatingShortUrl||_this2.state.url==="","data-share-url":_this2.state.url,"data-test-subj":"copyShareUrlButton",size:"s"},_this2.props.isEmbedded?_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.copyIframeCodeButtonLabel",defaultMessage:"Copy iFrame code"}):_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.copyLinkButtonLabel",defaultMessage:"Copy link"}))}))))}}]);return UrlPanelContent}(_react.Component);exports.UrlPanelContent=UrlPanelContent},6939:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shortenUrl=shortenUrl;var _url=_interopRequireDefault(__webpack_require__(71));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function shortenUrl(absoluteUrl,_ref){var basePath,post,parsedUrl,path,hash,relativeUrl,body,resp;return regeneratorRuntime.async((function shortenUrl$(_context){while(1){switch(_context.prev=_context.next){case 0:basePath=_ref.basePath,post=_ref.post;parsedUrl=_url.default.parse(absoluteUrl);if(!(!parsedUrl||!parsedUrl.path)){_context.next=4;break}return _context.abrupt("return");case 4:path=parsedUrl.path.replace(basePath,"");hash=parsedUrl.hash?parsedUrl.hash:"";relativeUrl=path+hash;body=JSON.stringify({url:relativeUrl});_context.next=10;return regeneratorRuntime.awrap(post("/api/shorten_url",{body:body}));case 10:resp=_context.sent;return _context.abrupt("return",_url.default.format({protocol:parsedUrl.protocol,host:parsedUrl.host,pathname:"".concat(basePath,"/goto/").concat(resp.urlId)}));case 12:case"end":return _context.stop()}}}))}},6940:function(module,exports,__webpack_require__){"use strict"},9:function(module,exports){module.exports=__kbnSharedDeps__.ReactDom}})["plugin"];